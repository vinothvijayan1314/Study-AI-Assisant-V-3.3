var cv=Object.defineProperty;var Dy=_e=>{throw TypeError(_e)};var uv=(_e,e,un)=>e in _e?cv(_e,e,{enumerable:!0,configurable:!0,writable:!0,value:un}):_e[e]=un;var io=(_e,e,un)=>uv(_e,typeof e!="symbol"?e+"":e,un),S0=(_e,e,un)=>e.has(_e)||Dy("Cannot "+un);var Hn=(_e,e,un)=>(S0(_e,e,"read from private field"),un?un.call(_e):e.get(_e)),Br=(_e,e,un)=>e.has(_e)?Dy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(_e):e.set(_e,un),Fr=(_e,e,un,dn)=>(S0(_e,e,"write to private field"),dn?dn.call(_e,un):e.set(_e,un),un),Or=(_e,e,un)=>(S0(_e,e,"access private method"),un);var $u=(_e,e,un,dn)=>({set _(hn){Fr(_e,e,hn,un)},get _(){return Hn(_e,e,dn)}});function _mergeNamespaces(_e,e){for(var un=0;un<e.length;un++){const dn=e[un];if(typeof dn!="string"&&!Array.isArray(dn)){for(const hn in dn)if(hn!=="default"&&!(hn in _e)){const fn=Object.getOwnPropertyDescriptor(dn,hn);fn&&Object.defineProperty(_e,hn,fn.get?fn:{enumerable:!0,get:()=>dn[hn]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const hn of document.querySelectorAll('link[rel="modulepreload"]'))dn(hn);new MutationObserver(hn=>{for(const fn of hn)if(fn.type==="childList")for(const pn of fn.addedNodes)pn.tagName==="LINK"&&pn.rel==="modulepreload"&&dn(pn)}).observe(document,{childList:!0,subtree:!0});function un(hn){const fn={};return hn.integrity&&(fn.integrity=hn.integrity),hn.referrerPolicy&&(fn.referrerPolicy=hn.referrerPolicy),hn.crossOrigin==="use-credentials"?fn.credentials="include":hn.crossOrigin==="anonymous"?fn.credentials="omit":fn.credentials="same-origin",fn}function dn(hn){if(hn.ep)return;hn.ep=!0;const fn=un(hn);fetch(hn.href,fn)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function getAugmentedNamespace(_e){if(_e.__esModule)return _e;var e=_e.default;if(typeof e=="function"){var un=function dn(){return this instanceof dn?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};un.prototype=e.prototype}else un={};return Object.defineProperty(un,"__esModule",{value:!0}),Object.keys(_e).forEach(function(dn){var hn=Object.getOwnPropertyDescriptor(_e,dn);Object.defineProperty(un,dn,hn.get?hn:{enumerable:!0,get:function(){return _e[dn]}})}),un}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$2(_e){return _e===null||typeof _e!="object"?null:(_e=z$3&&_e[z$3]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$3={};function E$3(_e,e,un){this.props=_e,this.context=e,this.refs=D$3,this.updater=un||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(_e,e){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,e,"setState")};E$3.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F$2(){}F$2.prototype=E$3.prototype;function G$3(_e,e,un){this.props=_e,this.context=e,this.refs=D$3,this.updater=un||B$3}var H$2=G$3.prototype=new F$2;H$2.constructor=G$3;C$2(H$2,E$3.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$3(_e,e,un){var dn,hn={},fn=null,pn=null;if(e!=null)for(dn in e.ref!==void 0&&(pn=e.ref),e.key!==void 0&&(fn=""+e.key),e)J$1.call(e,dn)&&!L$4.hasOwnProperty(dn)&&(hn[dn]=e[dn]);var mn=arguments.length-2;if(mn===1)hn.children=un;else if(1<mn){for(var gn=Array(mn),yn=0;yn<mn;yn++)gn[yn]=arguments[yn+2];hn.children=gn}if(_e&&_e.defaultProps)for(dn in mn=_e.defaultProps,mn)hn[dn]===void 0&&(hn[dn]=mn[dn]);return{$$typeof:l$2,type:_e,key:fn,ref:pn,props:hn,_owner:K$2.current}}function N$3(_e,e){return{$$typeof:l$2,type:_e.type,key:e,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$3(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$2}function escape$1(_e){var e={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(un){return e[un]})}var P$3=/\/+/g;function Q$3(_e,e){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):e.toString(36)}function R$2(_e,e,un,dn,hn){var fn=typeof _e;(fn==="undefined"||fn==="boolean")&&(_e=null);var pn=!1;if(_e===null)pn=!0;else switch(fn){case"string":case"number":pn=!0;break;case"object":switch(_e.$$typeof){case l$2:case n$2:pn=!0}}if(pn)return pn=_e,hn=hn(pn),_e=dn===""?"."+Q$3(pn,0):dn,I$2(hn)?(un="",_e!=null&&(un=_e.replace(P$3,"$&/")+"/"),R$2(hn,e,un,"",function(yn){return yn})):hn!=null&&(O$3(hn)&&(hn=N$3(hn,un+(!hn.key||pn&&pn.key===hn.key?"":(""+hn.key).replace(P$3,"$&/")+"/")+_e)),e.push(hn)),1;if(pn=0,dn=dn===""?".":dn+":",I$2(_e))for(var mn=0;mn<_e.length;mn++){fn=_e[mn];var gn=dn+Q$3(fn,mn);pn+=R$2(fn,e,un,gn,hn)}else if(gn=A$2(_e),typeof gn=="function")for(_e=gn.call(_e),mn=0;!(fn=_e.next()).done;)fn=fn.value,gn=dn+Q$3(fn,mn++),pn+=R$2(fn,e,un,gn,hn);else if(fn==="object")throw e=String(_e),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return pn}function S$2(_e,e,un){if(_e==null)return _e;var dn=[],hn=0;return R$2(_e,dn,"","",function(fn){return e.call(un,fn,hn++)}),dn}function T$2(_e){if(_e._status===-1){var e=_e._result;e=e(),e.then(function(un){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=un)},function(un){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=un)}),_e._status===-1&&(_e._status=0,_e._result=e)}if(_e._status===1)return _e._result.default;throw _e._result}var U$3={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$3(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(_e,e,un){S$2(_e,function(){e.apply(this,arguments)},un)},count:function(_e){var e=0;return S$2(_e,function(){e++}),e},toArray:function(_e){return S$2(_e,function(e){return e})||[]},only:function(_e){if(!O$3(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$3;react_production_min.Fragment=p$3;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$3;react_production_min.cloneElement=function(_e,e,un){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var dn=C$2({},_e.props),hn=_e.key,fn=_e.ref,pn=_e._owner;if(e!=null){if(e.ref!==void 0&&(fn=e.ref,pn=K$2.current),e.key!==void 0&&(hn=""+e.key),_e.type&&_e.type.defaultProps)var mn=_e.type.defaultProps;for(gn in e)J$1.call(e,gn)&&!L$4.hasOwnProperty(gn)&&(dn[gn]=e[gn]===void 0&&mn!==void 0?mn[gn]:e[gn])}var gn=arguments.length-2;if(gn===1)dn.children=un;else if(1<gn){mn=Array(gn);for(var yn=0;yn<gn;yn++)mn[yn]=arguments[yn+2];dn.children=mn}return{$$typeof:l$2,type:_e.type,key:hn,ref:fn,props:dn,_owner:pn}};react_production_min.createContext=function(_e){return _e={$$typeof:u$1,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$3;react_production_min.createFactory=function(_e){var e=M$3.bind(null,_e);return e.type=_e,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$3,render:_e}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(_e){return{$$typeof:y$1,_payload:{_status:-1,_result:_e},_init:T$2}};react_production_min.memo=function(_e,e){return{$$typeof:x$3,type:_e,compare:e===void 0?null:e}};react_production_min.startTransition=function(_e){var e=V$2.transition;V$2.transition={};try{_e()}finally{V$2.transition=e}};react_production_min.unstable_act=X$3;react_production_min.useCallback=function(_e,e){return U$3.current.useCallback(_e,e)};react_production_min.useContext=function(_e){return U$3.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$3.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,e){return U$3.current.useEffect(_e,e)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(_e,e,un){return U$3.current.useImperativeHandle(_e,e,un)};react_production_min.useInsertionEffect=function(_e,e){return U$3.current.useInsertionEffect(_e,e)};react_production_min.useLayoutEffect=function(_e,e){return U$3.current.useLayoutEffect(_e,e)};react_production_min.useMemo=function(_e,e){return U$3.current.useMemo(_e,e)};react_production_min.useReducer=function(_e,e,un){return U$3.current.useReducer(_e,e,un)};react_production_min.useRef=function(_e){return U$3.current.useRef(_e)};react_production_min.useState=function(_e){return U$3.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,e,un){return U$3.current.useSyncExternalStore(_e,e,un)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$2=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$2(_e,e,un){var dn,hn={},fn=null,pn=null;un!==void 0&&(fn=""+un),e.key!==void 0&&(fn=""+e.key),e.ref!==void 0&&(pn=e.ref);for(dn in e)m$2.call(e,dn)&&!p$2.hasOwnProperty(dn)&&(hn[dn]=e[dn]);if(_e&&_e.defaultProps)for(dn in e=_e.defaultProps,e)hn[dn]===void 0&&(hn[dn]=e[dn]);return{$$typeof:k$2,type:_e,key:fn,ref:pn,props:hn,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function e(tr,Jn){var ar=tr.length;tr.push(Jn);e:for(;0<ar;){var gr=ar-1>>>1,qn=tr[gr];if(0<hn(qn,Jn))tr[gr]=Jn,tr[ar]=qn,ar=gr;else break e}}function un(tr){return tr.length===0?null:tr[0]}function dn(tr){if(tr.length===0)return null;var Jn=tr[0],ar=tr.pop();if(ar!==Jn){tr[0]=ar;e:for(var gr=0,qn=tr.length,On=qn>>>1;gr<On;){var Un=2*(gr+1)-1,Yn=tr[Un],er=Un+1,Zn=tr[er];if(0>hn(Yn,ar))er<qn&&0>hn(Zn,Yn)?(tr[gr]=Zn,tr[er]=ar,gr=er):(tr[gr]=Yn,tr[Un]=ar,gr=Un);else if(er<qn&&0>hn(Zn,ar))tr[gr]=Zn,tr[er]=ar,gr=er;else break e}}return Jn}function hn(tr,Jn){var ar=tr.sortIndex-Jn.sortIndex;return ar!==0?ar:tr.id-Jn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var fn=performance;_e.unstable_now=function(){return fn.now()}}else{var pn=Date,mn=pn.now();_e.unstable_now=function(){return pn.now()-mn}}var gn=[],yn=[],xn=1,En=null,bn=3,vn=!1,Pn=!1,Tn=!1,In=typeof setTimeout=="function"?setTimeout:null,Rn=typeof clearTimeout=="function"?clearTimeout:null,Sn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Dn(tr){for(var Jn=un(yn);Jn!==null;){if(Jn.callback===null)dn(yn);else if(Jn.startTime<=tr)dn(yn),Jn.sortIndex=Jn.expirationTime,e(gn,Jn);else break;Jn=un(yn)}}function $n(tr){if(Tn=!1,Dn(tr),!Pn)if(un(gn)!==null)Pn=!0,sr(Fn);else{var Jn=un(yn);Jn!==null&&lr($n,Jn.startTime-tr)}}function Fn(tr,Jn){Pn=!1,Tn&&(Tn=!1,Rn(Nn),Nn=-1),vn=!0;var ar=bn;try{for(Dn(Jn),En=un(gn);En!==null&&(!(En.expirationTime>Jn)||tr&&!Cn());){var gr=En.callback;if(typeof gr=="function"){En.callback=null,bn=En.priorityLevel;var qn=gr(En.expirationTime<=Jn);Jn=_e.unstable_now(),typeof qn=="function"?En.callback=qn:En===un(gn)&&dn(gn),Dn(Jn)}else dn(gn);En=un(gn)}if(En!==null)var On=!0;else{var Un=un(yn);Un!==null&&lr($n,Un.startTime-Jn),On=!1}return On}finally{En=null,bn=ar,vn=!1}}var Gn=!1,kn=null,Nn=-1,Ln=5,zn=-1;function Cn(){return!(_e.unstable_now()-zn<Ln)}function Mn(){if(kn!==null){var tr=_e.unstable_now();zn=tr;var Jn=!0;try{Jn=kn(!0,tr)}finally{Jn?Bn():(Gn=!1,kn=null)}}else Gn=!1}var Bn;if(typeof Sn=="function")Bn=function(){Sn(Mn)};else if(typeof MessageChannel<"u"){var Xn=new MessageChannel,nr=Xn.port2;Xn.port1.onmessage=Mn,Bn=function(){nr.postMessage(null)}}else Bn=function(){In(Mn,0)};function sr(tr){kn=tr,Gn||(Gn=!0,Bn())}function lr(tr,Jn){Nn=In(function(){tr(_e.unstable_now())},Jn)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(tr){tr.callback=null},_e.unstable_continueExecution=function(){Pn||vn||(Pn=!0,sr(Fn))},_e.unstable_forceFrameRate=function(tr){0>tr||125<tr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ln=0<tr?Math.floor(1e3/tr):5},_e.unstable_getCurrentPriorityLevel=function(){return bn},_e.unstable_getFirstCallbackNode=function(){return un(gn)},_e.unstable_next=function(tr){switch(bn){case 1:case 2:case 3:var Jn=3;break;default:Jn=bn}var ar=bn;bn=Jn;try{return tr()}finally{bn=ar}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(tr,Jn){switch(tr){case 1:case 2:case 3:case 4:case 5:break;default:tr=3}var ar=bn;bn=tr;try{return Jn()}finally{bn=ar}},_e.unstable_scheduleCallback=function(tr,Jn,ar){var gr=_e.unstable_now();switch(typeof ar=="object"&&ar!==null?(ar=ar.delay,ar=typeof ar=="number"&&0<ar?gr+ar:gr):ar=gr,tr){case 1:var qn=-1;break;case 2:qn=250;break;case 5:qn=1073741823;break;case 4:qn=1e4;break;default:qn=5e3}return qn=ar+qn,tr={id:xn++,callback:Jn,priorityLevel:tr,startTime:ar,expirationTime:qn,sortIndex:-1},ar>gr?(tr.sortIndex=ar,e(yn,tr),un(gn)===null&&tr===un(yn)&&(Tn?(Rn(Nn),Nn=-1):Tn=!0,lr($n,ar-gr))):(tr.sortIndex=qn,e(gn,tr),Pn||vn||(Pn=!0,sr(Fn))),tr},_e.unstable_shouldYield=Cn,_e.unstable_wrapCallback=function(tr){var Jn=bn;return function(){var ar=bn;bn=Jn;try{return tr.apply(this,arguments)}finally{bn=ar}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(_e){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+_e,un=1;un<arguments.length;un++)e+="&args[]="+encodeURIComponent(arguments[un]);return"Minified React error #"+_e+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,e){ha(_e,e),ha(_e+"Capture",e)}function ha(_e,e){for(ea[_e]=e,_e=0;_e<e.length;_e++)da.add(e[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,e,un,dn){if(un!==null&&un.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return dn?!1:un!==null?!un.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,e,un,dn){if(e===null||typeof e>"u"||pa(_e,e,un,dn))return!0;if(dn)return!1;if(un!==null)switch(un.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$2(_e,e,un,dn,hn,fn,pn){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=dn,this.attributeNamespace=hn,this.mustUseProperty=un,this.propertyName=_e,this.type=e,this.sanitizeURL=fn,this.removeEmptyString=pn}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$2[_e]=new v$2(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var e=_e[0];z$2[e]=new v$2(e,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$2[_e]=new v$2(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$2[_e]=new v$2(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$2[_e]=new v$2(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$2[_e]=new v$2(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$2[_e]=new v$2(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$2[_e]=new v$2(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$2[_e]=new v$2(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var e=_e.replace(ra,sa);z$2[e]=new v$2(e,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var e=_e.replace(ra,sa);z$2[e]=new v$2(e,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var e=_e.replace(ra,sa);z$2[e]=new v$2(e,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$2[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$2[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,e,un,dn){var hn=z$2.hasOwnProperty(e)?z$2[e]:null;(hn!==null?hn.type!==0:dn||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,un,hn,dn)&&(un=null),dn||hn===null?oa(e)&&(un===null?_e.removeAttribute(e):_e.setAttribute(e,""+un)):hn.mustUseProperty?_e[hn.propertyName]=un===null?hn.type===3?!1:"":un:(e=hn.attributeName,dn=hn.attributeNamespace,un===null?_e.removeAttribute(e):(hn=hn.type,un=hn===3||hn===4&&un===!0?"":""+un,dn?_e.setAttributeNS(dn,e,un):_e.setAttribute(e,un))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$1=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(un){var e=un.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,e){if(!_e||Na)return"";Na=!0;var un=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(yn){var dn=yn}Reflect.construct(_e,[],e)}else{try{e.call()}catch(yn){dn=yn}_e.call(e.prototype)}else{try{throw Error()}catch(yn){dn=yn}_e()}}catch(yn){if(yn&&dn&&typeof yn.stack=="string"){for(var hn=yn.stack.split(`
`),fn=dn.stack.split(`
`),pn=hn.length-1,mn=fn.length-1;1<=pn&&0<=mn&&hn[pn]!==fn[mn];)mn--;for(;1<=pn&&0<=mn;pn--,mn--)if(hn[pn]!==fn[mn]){if(pn!==1||mn!==1)do if(pn--,mn--,0>mn||hn[pn]!==fn[mn]){var gn=`
`+hn[pn].replace(" at new "," at ");return _e.displayName&&gn.includes("<anonymous>")&&(gn=gn.replace("<anonymous>",_e.displayName)),gn}while(1<=pn&&0<=mn);break}}}finally{Na=!1,Error.prepareStackTrace=un}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var e=_e.render;return _e=_e.displayName,_e||(_e=e.displayName||e.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return e=_e.displayName||null,e!==null?e:Qa(_e.type)||"Memo";case Ha:e=_e._payload,_e=_e._init;try{return Qa(_e(e))}catch{}}return null}function Ra(_e){var e=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=e.render,_e=_e.displayName||_e.name||"",e.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var e=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(_e){var e=Ta(_e)?"checked":"value",un=Object.getOwnPropertyDescriptor(_e.constructor.prototype,e),dn=""+_e[e];if(!_e.hasOwnProperty(e)&&typeof un<"u"&&typeof un.get=="function"&&typeof un.set=="function"){var hn=un.get,fn=un.set;return Object.defineProperty(_e,e,{configurable:!0,get:function(){return hn.call(this)},set:function(pn){dn=""+pn,fn.call(this,pn)}}),Object.defineProperty(_e,e,{enumerable:un.enumerable}),{getValue:function(){return dn},setValue:function(pn){dn=""+pn},stopTracking:function(){_e._valueTracker=null,delete _e[e]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var e=_e._valueTracker;if(!e)return!0;var un=e.getValue(),dn="";return _e&&(dn=Ta(_e)?_e.checked?"true":"false":_e.value),_e=dn,_e!==un?(e.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,e){var un=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:un??_e._wrapperState.initialChecked})}function Za(_e,e){var un=e.defaultValue==null?"":e.defaultValue,dn=e.checked!=null?e.checked:e.defaultChecked;un=Sa(e.value!=null?e.value:un),_e._wrapperState={initialChecked:dn,initialValue:un,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(_e,e){e=e.checked,e!=null&&ta(_e,"checked",e,!1)}function bb(_e,e){ab(_e,e);var un=Sa(e.value),dn=e.type;if(un!=null)dn==="number"?(un===0&&_e.value===""||_e.value!=un)&&(_e.value=""+un):_e.value!==""+un&&(_e.value=""+un);else if(dn==="submit"||dn==="reset"){_e.removeAttribute("value");return}e.hasOwnProperty("value")?cb(_e,e.type,un):e.hasOwnProperty("defaultValue")&&cb(_e,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(_e.defaultChecked=!!e.defaultChecked)}function db$1(_e,e,un){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var dn=e.type;if(!(dn!=="submit"&&dn!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+_e._wrapperState.initialValue,un||e===_e.value||(_e.value=e),_e.defaultValue=e}un=_e.name,un!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,un!==""&&(_e.name=un)}function cb(_e,e,un){(e!=="number"||Xa(_e.ownerDocument)!==_e)&&(un==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+un&&(_e.defaultValue=""+un))}var eb=Array.isArray;function fb(_e,e,un,dn){if(_e=_e.options,e){e={};for(var hn=0;hn<un.length;hn++)e["$"+un[hn]]=!0;for(un=0;un<_e.length;un++)hn=e.hasOwnProperty("$"+_e[un].value),_e[un].selected!==hn&&(_e[un].selected=hn),hn&&dn&&(_e[un].defaultSelected=!0)}else{for(un=""+Sa(un),e=null,hn=0;hn<_e.length;hn++){if(_e[hn].value===un){_e[hn].selected=!0,dn&&(_e[hn].defaultSelected=!0);return}e!==null||_e[hn].disabled||(e=_e[hn])}e!==null&&(e.selected=!0)}}function gb(_e,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,e){var un=e.value;if(un==null){if(un=e.children,e=e.defaultValue,un!=null){if(e!=null)throw Error(p$1(92));if(eb(un)){if(1<un.length)throw Error(p$1(93));un=un[0]}e=un}e==null&&(e=""),un=e}_e._wrapperState={initialValue:Sa(un)}}function ib(_e,e){var un=Sa(e.value),dn=Sa(e.defaultValue);un!=null&&(un=""+un,un!==_e.value&&(_e.value=un),e.defaultValue==null&&_e.defaultValue!==un&&(_e.defaultValue=un)),dn!=null&&(_e.defaultValue=""+dn)}function jb(_e){var e=_e.textContent;e===_e._wrapperState.initialValue&&e!==""&&e!==null&&(_e.value=e)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,e){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(e):_e==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,un,dn,hn){MSApp.execUnsafeLocalFunction(function(){return _e(e,un,dn,hn)})}:_e}(function(_e,e){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;e.firstChild;)_e.appendChild(e.firstChild)}});function ob(_e,e){if(e){var un=_e.firstChild;if(un&&un===_e.lastChild&&un.nodeType===3){un.nodeValue=e;return}}_e.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(e){e=e+_e.charAt(0).toUpperCase()+_e.substring(1),pb[e]=pb[_e]})});function rb(_e,e,un){return e==null||typeof e=="boolean"||e===""?"":un||typeof e!="number"||e===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+e).trim():e+"px"}function sb(_e,e){_e=_e.style;for(var un in e)if(e.hasOwnProperty(un)){var dn=un.indexOf("--")===0,hn=rb(un,e[un],dn);un==="float"&&(un="cssFloat"),dn?_e.setProperty(un,hn):_e[un]=hn}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,e){if(e){if(tb[_e]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,_e));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p$1(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p$1(62))}}function vb(_e,e){if(_e.indexOf("-")===-1)return typeof e.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$1(280));var e=_e.stateNode;e&&(e=Db(e),yb(_e.stateNode,_e.type,e))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,e=Ab;if(Ab=zb=null,Bb(_e),e)for(_e=0;_e<e.length;_e++)Bb(e[_e])}}function Gb(_e,e){return _e(e)}function Hb(){}var Ib=!1;function Jb(_e,e,un){if(Ib)return _e(e,un);Ib=!0;try{return Gb(_e,e,un)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,e){var un=_e.stateNode;if(un===null)return null;var dn=Db(un);if(dn===null)return null;un=dn[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(dn=!dn.disabled)||(_e=_e.type,dn=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!dn;break e;default:_e=!1}if(_e)return null;if(un&&typeof un!="function")throw Error(p$1(231,e,typeof un));return un}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,e,un,dn,hn,fn,pn,mn,gn){var yn=Array.prototype.slice.call(arguments,3);try{e.apply(un,yn)}catch(xn){this.onError(xn)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,e,un,dn,hn,fn,pn,mn,gn){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,e,un,dn,hn,fn,pn,mn,gn){if(Tb.apply(this,arguments),Ob){if(Ob){var yn=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=yn)}}function Vb(_e){var e=_e,un=_e;if(_e.alternate)for(;e.return;)e=e.return;else{_e=e;do e=_e,e.flags&4098&&(un=e.return),_e=e.return;while(_e)}return e.tag===3?un:null}function Wb(_e){if(_e.tag===13){var e=_e.memoizedState;if(e===null&&(_e=_e.alternate,_e!==null&&(e=_e.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$1(188))}function Yb(_e){var e=_e.alternate;if(!e){if(e=Vb(_e),e===null)throw Error(p$1(188));return e!==_e?null:_e}for(var un=_e,dn=e;;){var hn=un.return;if(hn===null)break;var fn=hn.alternate;if(fn===null){if(dn=hn.return,dn!==null){un=dn;continue}break}if(hn.child===fn.child){for(fn=hn.child;fn;){if(fn===un)return Xb(hn),_e;if(fn===dn)return Xb(hn),e;fn=fn.sibling}throw Error(p$1(188))}if(un.return!==dn.return)un=hn,dn=fn;else{for(var pn=!1,mn=hn.child;mn;){if(mn===un){pn=!0,un=hn,dn=fn;break}if(mn===dn){pn=!0,dn=hn,un=fn;break}mn=mn.sibling}if(!pn){for(mn=fn.child;mn;){if(mn===un){pn=!0,un=fn,dn=hn;break}if(mn===dn){pn=!0,dn=fn,un=hn;break}mn=mn.sibling}if(!pn)throw Error(p$1(189))}}if(un.alternate!==dn)throw Error(p$1(190))}if(un.tag!==3)throw Error(p$1(188));return un.stateNode.current===un?_e:e}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var e=$b(_e);if(e!==null)return e;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc$1=null;function mc(_e){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,e){var un=_e.pendingLanes;if(un===0)return 0;var dn=0,hn=_e.suspendedLanes,fn=_e.pingedLanes,pn=un&268435455;if(pn!==0){var mn=pn&~hn;mn!==0?dn=tc(mn):(fn&=pn,fn!==0&&(dn=tc(fn)))}else pn=un&~hn,pn!==0?dn=tc(pn):fn!==0&&(dn=tc(fn));if(dn===0)return 0;if(e!==0&&e!==dn&&!(e&hn)&&(hn=dn&-dn,fn=e&-e,hn>=fn||hn===16&&(fn&4194240)!==0))return e;if(dn&4&&(dn|=un&16),e=_e.entangledLanes,e!==0)for(_e=_e.entanglements,e&=dn;0<e;)un=31-oc(e),hn=1<<un,dn|=_e[un],e&=~hn;return dn}function vc(_e,e){switch(_e){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,e){for(var un=_e.suspendedLanes,dn=_e.pingedLanes,hn=_e.expirationTimes,fn=_e.pendingLanes;0<fn;){var pn=31-oc(fn),mn=1<<pn,gn=hn[pn];gn===-1?(!(mn&un)||mn&dn)&&(hn[pn]=vc(mn,e)):gn<=e&&(_e.expiredLanes|=mn),fn&=~mn}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var e=[],un=0;31>un;un++)e.push(_e);return e}function Ac(_e,e,un){_e.pendingLanes|=e,e!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,e=31-oc(e),_e[e]=un}function Bc(_e,e){var un=_e.pendingLanes&~e;_e.pendingLanes=e,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=e,_e.mutableReadLanes&=e,_e.entangledLanes&=e,e=_e.entanglements;var dn=_e.eventTimes;for(_e=_e.expirationTimes;0<un;){var hn=31-oc(un),fn=1<<hn;e[hn]=0,dn[hn]=-1,_e[hn]=-1,un&=~fn}}function Cc(_e,e){var un=_e.entangledLanes|=e;for(_e=_e.entanglements;un;){var dn=31-oc(un),hn=1<<dn;hn&e|_e[dn]&e&&(_e[dn]|=e),un&=~hn}}var C$1=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,e){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(_e,e,un,dn,hn,fn){return _e===null||_e.nativeEvent!==fn?(_e={blockedOn:e,domEventName:un,eventSystemFlags:dn,nativeEvent:fn,targetContainers:[hn]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),_e):(_e.eventSystemFlags|=dn,e=_e.targetContainers,hn!==null&&e.indexOf(hn)===-1&&e.push(hn),_e)}function Uc(_e,e,un,dn,hn){switch(e){case"focusin":return Lc=Tc(Lc,_e,e,un,dn,hn),!0;case"dragenter":return Mc=Tc(Mc,_e,e,un,dn,hn),!0;case"mouseover":return Nc=Tc(Nc,_e,e,un,dn,hn),!0;case"pointerover":var fn=hn.pointerId;return Oc.set(fn,Tc(Oc.get(fn)||null,_e,e,un,dn,hn)),!0;case"gotpointercapture":return fn=hn.pointerId,Pc.set(fn,Tc(Pc.get(fn)||null,_e,e,un,dn,hn)),!0}return!1}function Vc(_e){var e=Wc(_e.target);if(e!==null){var un=Vb(e);if(un!==null){if(e=un.tag,e===13){if(e=Wb(un),e!==null){_e.blockedOn=e,Ic(_e.priority,function(){Gc(un)});return}}else if(e===3&&un.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=un.tag===3?un.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var e=_e.targetContainers;0<e.length;){var un=Yc(_e.domEventName,_e.eventSystemFlags,e[0],_e.nativeEvent);if(un===null){un=_e.nativeEvent;var dn=new un.constructor(un.type,un);wb=dn,un.target.dispatchEvent(dn),wb=null}else return e=Cb(un),e!==null&&Fc(e),_e.blockedOn=un,!1;e.shift()}return!0}function Zc(_e,e,un){Xc(_e)&&un.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,e){_e.blockedOn===e&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function e(hn){return ad(hn,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var un=1;un<Kc.length;un++){var dn=Kc[un];dn.blockedOn===_e&&(dn.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(e),Pc.forEach(e),un=0;un<Qc.length;un++)dn=Qc[un],dn.blockedOn===_e&&(dn.blockedOn=null);for(;0<Qc.length&&(un=Qc[0],un.blockedOn===null);)Vc(un),un.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_e,e,un,dn){var hn=C$1,fn=cd.transition;cd.transition=null;try{C$1=1,fd$1(_e,e,un,dn)}finally{C$1=hn,cd.transition=fn}}function gd(_e,e,un,dn){var hn=C$1,fn=cd.transition;cd.transition=null;try{C$1=4,fd$1(_e,e,un,dn)}finally{C$1=hn,cd.transition=fn}}function fd$1(_e,e,un,dn){if(dd){var hn=Yc(_e,e,un,dn);if(hn===null)hd(_e,e,dn,id,un),Sc(_e,dn);else if(Uc(hn,_e,e,un,dn))dn.stopPropagation();else if(Sc(_e,dn),e&4&&-1<Rc.indexOf(_e)){for(;hn!==null;){var fn=Cb(hn);if(fn!==null&&Ec(fn),fn=Yc(_e,e,un,dn),fn===null&&hd(_e,e,dn,id,un),fn===hn)break;hn=fn}hn!==null&&dn.stopPropagation()}else hd(_e,e,dn,null,un)}}var id=null;function Yc(_e,e,un,dn){if(id=null,_e=xb(dn),_e=Wc(_e),_e!==null)if(e=Vb(_e),e===null)_e=null;else if(un=e.tag,un===13){if(_e=Wb(e),_e!==null)return _e;_e=null}else if(un===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;_e=null}else e!==_e&&(_e=null);return id=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,e=ld,un=e.length,dn,hn="value"in kd?kd.value:kd.textContent,fn=hn.length;for(_e=0;_e<un&&e[_e]===hn[_e];_e++);var pn=un-_e;for(dn=1;dn<=pn&&e[un-dn]===hn[fn-dn];dn++);return md=hn.slice(_e,1<dn?1-dn:void 0)}function od(_e){var e=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&e===13&&(_e=13)):_e=e,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function e(un,dn,hn,fn,pn){this._reactName=un,this._targetInst=hn,this.type=dn,this.nativeEvent=fn,this.target=pn,this.currentTarget=null;for(var mn in _e)_e.hasOwnProperty(mn)&&(un=_e[mn],this[mn]=un?un(fn):fn[mn]);return this.isDefaultPrevented=(fn.defaultPrevented!=null?fn.defaultPrevented:fn.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var un=this.nativeEvent;un&&(un.preventDefault?un.preventDefault():typeof un.returnValue!="unknown"&&(un.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var un=this.nativeEvent;un&&(un.stopPropagation?un.stopPropagation():typeof un.cancelBubble!="unknown"&&(un.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(_e):(_e=Od[_e])?!!e[_e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_e){if(_e.key){var e=Md[_e.key]||_e.key;if(e!=="Unidentified")return e}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$2||be$1&&8<be$1&&11>=be$1),ee$2=" ",fe$1=!1;function ge$1(_e,e){switch(_e){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie$1=!1;function je(_e,e){switch(_e){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe$1=!0,ee$2);case"textInput":return _e=e.data,_e===ee$2&&fe$1?null:_e;default:return null}}function ke(_e,e){if(ie$1)return _e==="compositionend"||!ae$2&&ge$1(_e,e)?(_e=nd(),md=ld=kd=null,ie$1=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de$1&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(_e){var e=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return e==="input"?!!le$1[_e.type]:e==="textarea"}function ne$2(_e,e,un,dn){Eb(dn),e=oe$2(e,"onChange"),0<e.length&&(un=new td$1("onChange","change",null,un,dn),_e.push({event:un,listeners:e}))}var pe$1=null,qe=null;function re$1(_e){se$2(_e,0)}function te$2(_e){var e=ue$1(_e);if(Wa(e))return _e}function ve$1(_e,e){if(_e==="change")return e}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(_e){if(_e.propertyName==="value"&&te$2(qe)){var e=[];ne$2(e,qe,_e,xb(_e)),Jb(re$1,e)}}function Ce(_e,e,un){_e==="focusin"?(Ae(),pe$1=e,qe=un,pe$1.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te$2(qe)}function Ee(_e,e){if(_e==="click")return te$2(e)}function Fe(_e,e){if(_e==="input"||_e==="change")return te$2(e)}function Ge(_e,e){return _e===e&&(_e!==0||1/_e===1/e)||_e!==_e&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,e){if(He(_e,e))return!0;if(typeof _e!="object"||_e===null||typeof e!="object"||e===null)return!1;var un=Object.keys(_e),dn=Object.keys(e);if(un.length!==dn.length)return!1;for(dn=0;dn<un.length;dn++){var hn=un[dn];if(!ja.call(e,hn)||!He(_e[hn],e[hn]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,e){var un=Je(_e);_e=0;for(var dn;un;){if(un.nodeType===3){if(dn=_e+un.textContent.length,_e<=e&&dn>=e)return{node:un,offset:e-_e};_e=dn}e:{for(;un;){if(un.nextSibling){un=un.nextSibling;break e}un=un.parentNode}un=void 0}un=Je(un)}}function Le$1(_e,e){return _e&&e?_e===e?!0:_e&&_e.nodeType===3?!1:e&&e.nodeType===3?Le$1(_e,e.parentNode):"contains"in _e?_e.contains(e):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var _e=window,e=Xa();e instanceof _e.HTMLIFrameElement;){try{var un=typeof e.contentWindow.location.href=="string"}catch{un=!1}if(un)_e=e.contentWindow;else break;e=Xa(_e.document)}return e}function Ne$1(_e){var e=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return e&&(e==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||e==="textarea"||_e.contentEditable==="true")}function Oe(_e){var e=Me(),un=_e.focusedElem,dn=_e.selectionRange;if(e!==un&&un&&un.ownerDocument&&Le$1(un.ownerDocument.documentElement,un)){if(dn!==null&&Ne$1(un)){if(e=dn.start,_e=dn.end,_e===void 0&&(_e=e),"selectionStart"in un)un.selectionStart=e,un.selectionEnd=Math.min(_e,un.value.length);else if(_e=(e=un.ownerDocument||document)&&e.defaultView||window,_e.getSelection){_e=_e.getSelection();var hn=un.textContent.length,fn=Math.min(dn.start,hn);dn=dn.end===void 0?fn:Math.min(dn.end,hn),!_e.extend&&fn>dn&&(hn=dn,dn=fn,fn=hn),hn=Ke(un,fn);var pn=Ke(un,dn);hn&&pn&&(_e.rangeCount!==1||_e.anchorNode!==hn.node||_e.anchorOffset!==hn.offset||_e.focusNode!==pn.node||_e.focusOffset!==pn.offset)&&(e=e.createRange(),e.setStart(hn.node,hn.offset),_e.removeAllRanges(),fn>dn?(_e.addRange(e),_e.extend(pn.node,pn.offset)):(e.setEnd(pn.node,pn.offset),_e.addRange(e)))}}for(e=[],_e=un;_e=_e.parentNode;)_e.nodeType===1&&e.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof un.focus=="function"&&un.focus(),un=0;un<e.length;un++)_e=e[un],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(_e,e,un){var dn=un.window===un?un.document:un.nodeType===9?un:un.ownerDocument;Te$1||Qe==null||Qe!==Xa(dn)||(dn=Qe,"selectionStart"in dn&&Ne$1(dn)?dn={start:dn.selectionStart,end:dn.selectionEnd}:(dn=(dn.ownerDocument&&dn.ownerDocument.defaultView||window).getSelection(),dn={anchorNode:dn.anchorNode,anchorOffset:dn.anchorOffset,focusNode:dn.focusNode,focusOffset:dn.focusOffset}),Se&&Ie(Se,dn)||(Se=dn,dn=oe$2(Re,"onSelect"),0<dn.length&&(e=new td$1("onSelect","select",null,e,un),_e.push({event:e,listeners:dn}),e.target=Qe)))}function Ve(_e,e){var un={};return un[_e.toLowerCase()]=e.toLowerCase(),un["Webkit"+_e]="webkit"+e,un["Moz"+_e]="moz"+e,un}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var e=We[_e],un;for(un in e)if(e.hasOwnProperty(un)&&un in Ye)return Xe[_e]=e[un];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,e){df.set(_e,e),fa(e,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,e,un){var dn=_e.type||"unknown-event";_e.currentTarget=un,Ub(dn,e,void 0,_e),_e.currentTarget=null}function se$2(_e,e){e=(e&4)!==0;for(var un=0;un<_e.length;un++){var dn=_e[un],hn=dn.event;dn=dn.listeners;e:{var fn=void 0;if(e)for(var pn=dn.length-1;0<=pn;pn--){var mn=dn[pn],gn=mn.instance,yn=mn.currentTarget;if(mn=mn.listener,gn!==fn&&hn.isPropagationStopped())break e;nf(hn,mn,yn),fn=gn}else for(pn=0;pn<dn.length;pn++){if(mn=dn[pn],gn=mn.instance,yn=mn.currentTarget,mn=mn.listener,gn!==fn&&hn.isPropagationStopped())break e;nf(hn,mn,yn),fn=gn}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D$2(_e,e){var un=e[of];un===void 0&&(un=e[of]=new Set);var dn=_e+"__bubble";un.has(dn)||(pf(e,_e,2,!1),un.add(dn))}function qf(_e,e,un){var dn=0;e&&(dn|=4),pf(un,_e,dn,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(un){un!=="selectionchange"&&(mf.has(un)||qf(un,!1,_e),qf(un,!0,_e))});var e=_e.nodeType===9?_e:_e.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(_e,e,un,dn){switch(jd(e)){case 1:var hn=ed;break;case 4:hn=gd;break;default:hn=fd$1}un=hn.bind(null,e,un,_e),hn=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(hn=!0),dn?hn!==void 0?_e.addEventListener(e,un,{capture:!0,passive:hn}):_e.addEventListener(e,un,!0):hn!==void 0?_e.addEventListener(e,un,{passive:hn}):_e.addEventListener(e,un,!1)}function hd(_e,e,un,dn,hn){var fn=dn;if(!(e&1)&&!(e&2)&&dn!==null)e:for(;;){if(dn===null)return;var pn=dn.tag;if(pn===3||pn===4){var mn=dn.stateNode.containerInfo;if(mn===hn||mn.nodeType===8&&mn.parentNode===hn)break;if(pn===4)for(pn=dn.return;pn!==null;){var gn=pn.tag;if((gn===3||gn===4)&&(gn=pn.stateNode.containerInfo,gn===hn||gn.nodeType===8&&gn.parentNode===hn))return;pn=pn.return}for(;mn!==null;){if(pn=Wc(mn),pn===null)return;if(gn=pn.tag,gn===5||gn===6){dn=fn=pn;continue e}mn=mn.parentNode}}dn=dn.return}Jb(function(){var yn=fn,xn=xb(un),En=[];e:{var bn=df.get(_e);if(bn!==void 0){var vn=td$1,Pn=_e;switch(_e){case"keypress":if(od(un)===0)break e;case"keydown":case"keyup":vn=Rd;break;case"focusin":Pn="focus",vn=Fd;break;case"focusout":Pn="blur",vn=Fd;break;case"beforeblur":case"afterblur":vn=Fd;break;case"click":if(un.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vn=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vn=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vn=Vd;break;case $e:case af:case bf:vn=Hd;break;case cf:vn=Xd;break;case"scroll":vn=vd;break;case"wheel":vn=Zd;break;case"copy":case"cut":case"paste":vn=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vn=Td}var Tn=(e&4)!==0,In=!Tn&&_e==="scroll",Rn=Tn?bn!==null?bn+"Capture":null:bn;Tn=[];for(var Sn=yn,Dn;Sn!==null;){Dn=Sn;var $n=Dn.stateNode;if(Dn.tag===5&&$n!==null&&(Dn=$n,Rn!==null&&($n=Kb(Sn,Rn),$n!=null&&Tn.push(tf(Sn,$n,Dn)))),In)break;Sn=Sn.return}0<Tn.length&&(bn=new vn(bn,Pn,null,un,xn),En.push({event:bn,listeners:Tn}))}}if(!(e&7)){e:{if(bn=_e==="mouseover"||_e==="pointerover",vn=_e==="mouseout"||_e==="pointerout",bn&&un!==wb&&(Pn=un.relatedTarget||un.fromElement)&&(Wc(Pn)||Pn[uf]))break e;if((vn||bn)&&(bn=xn.window===xn?xn:(bn=xn.ownerDocument)?bn.defaultView||bn.parentWindow:window,vn?(Pn=un.relatedTarget||un.toElement,vn=yn,Pn=Pn?Wc(Pn):null,Pn!==null&&(In=Vb(Pn),Pn!==In||Pn.tag!==5&&Pn.tag!==6)&&(Pn=null)):(vn=null,Pn=yn),vn!==Pn)){if(Tn=Bd,$n="onMouseLeave",Rn="onMouseEnter",Sn="mouse",(_e==="pointerout"||_e==="pointerover")&&(Tn=Td,$n="onPointerLeave",Rn="onPointerEnter",Sn="pointer"),In=vn==null?bn:ue$1(vn),Dn=Pn==null?bn:ue$1(Pn),bn=new Tn($n,Sn+"leave",vn,un,xn),bn.target=In,bn.relatedTarget=Dn,$n=null,Wc(xn)===yn&&(Tn=new Tn(Rn,Sn+"enter",Pn,un,xn),Tn.target=Dn,Tn.relatedTarget=In,$n=Tn),In=$n,vn&&Pn)t:{for(Tn=vn,Rn=Pn,Sn=0,Dn=Tn;Dn;Dn=vf(Dn))Sn++;for(Dn=0,$n=Rn;$n;$n=vf($n))Dn++;for(;0<Sn-Dn;)Tn=vf(Tn),Sn--;for(;0<Dn-Sn;)Rn=vf(Rn),Dn--;for(;Sn--;){if(Tn===Rn||Rn!==null&&Tn===Rn.alternate)break t;Tn=vf(Tn),Rn=vf(Rn)}Tn=null}else Tn=null;vn!==null&&wf(En,bn,vn,Tn,!1),Pn!==null&&In!==null&&wf(En,In,Pn,Tn,!0)}}e:{if(bn=yn?ue$1(yn):window,vn=bn.nodeName&&bn.nodeName.toLowerCase(),vn==="select"||vn==="input"&&bn.type==="file")var Fn=ve$1;else if(me$1(bn))if(we$1)Fn=Fe;else{Fn=De;var Gn=Ce}else(vn=bn.nodeName)&&vn.toLowerCase()==="input"&&(bn.type==="checkbox"||bn.type==="radio")&&(Fn=Ee);if(Fn&&(Fn=Fn(_e,yn))){ne$2(En,Fn,un,xn);break e}Gn&&Gn(_e,bn,yn),_e==="focusout"&&(Gn=bn._wrapperState)&&Gn.controlled&&bn.type==="number"&&cb(bn,"number",bn.value)}switch(Gn=yn?ue$1(yn):window,_e){case"focusin":(me$1(Gn)||Gn.contentEditable==="true")&&(Qe=Gn,Re=yn,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(En,un,xn);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(En,un,xn)}var kn;if(ae$2)e:{switch(_e){case"compositionstart":var Nn="onCompositionStart";break e;case"compositionend":Nn="onCompositionEnd";break e;case"compositionupdate":Nn="onCompositionUpdate";break e}Nn=void 0}else ie$1?ge$1(_e,un)&&(Nn="onCompositionEnd"):_e==="keydown"&&un.keyCode===229&&(Nn="onCompositionStart");Nn&&(de$1&&un.locale!=="ko"&&(ie$1||Nn!=="onCompositionStart"?Nn==="onCompositionEnd"&&ie$1&&(kn=nd()):(kd=xn,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Gn=oe$2(yn,Nn),0<Gn.length&&(Nn=new Ld(Nn,_e,null,un,xn),En.push({event:Nn,listeners:Gn}),kn?Nn.data=kn:(kn=he$1(un),kn!==null&&(Nn.data=kn)))),(kn=ce$1?je(_e,un):ke(_e,un))&&(yn=oe$2(yn,"onBeforeInput"),0<yn.length&&(xn=new Ld("onBeforeInput","beforeinput",null,un,xn),En.push({event:xn,listeners:yn}),xn.data=kn))}se$2(En,e)})}function tf(_e,e,un){return{instance:_e,listener:e,currentTarget:un}}function oe$2(_e,e){for(var un=e+"Capture",dn=[];_e!==null;){var hn=_e,fn=hn.stateNode;hn.tag===5&&fn!==null&&(hn=fn,fn=Kb(_e,un),fn!=null&&dn.unshift(tf(_e,fn,hn)),fn=Kb(_e,e),fn!=null&&dn.push(tf(_e,fn,hn))),_e=_e.return}return dn}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,e,un,dn,hn){for(var fn=e._reactName,pn=[];un!==null&&un!==dn;){var mn=un,gn=mn.alternate,yn=mn.stateNode;if(gn!==null&&gn===dn)break;mn.tag===5&&yn!==null&&(mn=yn,hn?(gn=Kb(un,fn),gn!=null&&pn.unshift(tf(un,gn,mn))):hn||(gn=Kb(un,fn),gn!=null&&pn.push(tf(un,gn,mn)))),un=un.return}pn.length!==0&&_e.push({event:e,listeners:pn})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,e,un){if(e=zf(e),zf(_e)!==e&&un)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,e){return _e==="textarea"||_e==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,e){var un=e,dn=0;do{var hn=un.nextSibling;if(_e.removeChild(un),hn&&hn.nodeType===8)if(un=hn.data,un==="/$"){if(dn===0){_e.removeChild(hn),bd(e);return}dn--}else un!=="$"&&un!=="$?"&&un!=="$!"||dn++;un=hn}while(un);bd(e)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var e=_e.nodeType;if(e===1||e===3)break;if(e===8){if(e=_e.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var e=0;_e;){if(_e.nodeType===8){var un=_e.data;if(un==="$"||un==="$!"||un==="$?"){if(e===0)return _e;e--}else un==="/$"&&e++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var e=_e[Of];if(e)return e;for(var un=_e.parentNode;un;){if(e=un[uf]||un[Of]){if(un=e.alternate,e.child!==null||un!==null&&un.child!==null)for(_e=Mf(_e);_e!==null;){if(un=_e[Of])return un;_e=Mf(_e)}return e}_e=un,un=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue$1(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$1(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$2(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(_e,e){Tf++,Sf[Tf]=_e.current,_e.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,e){var un=_e.type.contextTypes;if(!un)return Vf;var dn=_e.stateNode;if(dn&&dn.__reactInternalMemoizedUnmaskedChildContext===e)return dn.__reactInternalMemoizedMaskedChildContext;var hn={},fn;for(fn in un)hn[fn]=e[fn];return dn&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=e,_e.__reactInternalMemoizedMaskedChildContext=hn),hn}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$2(Wf),E$2(H$1)}function ag(_e,e,un){if(H$1.current!==Vf)throw Error(p$1(168));G$2(H$1,e),G$2(Wf,un)}function bg(_e,e,un){var dn=_e.stateNode;if(e=e.childContextTypes,typeof dn.getChildContext!="function")return un;dn=dn.getChildContext();for(var hn in dn)if(!(hn in e))throw Error(p$1(108,Ra(_e)||"Unknown",hn));return A$1({},un,dn)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$2(H$1,_e),G$2(Wf,Wf.current),!0}function dg(_e,e,un){var dn=_e.stateNode;if(!dn)throw Error(p$1(169));un?(_e=bg(_e,e,Xf),dn.__reactInternalMemoizedMergedChildContext=_e,E$2(Wf),E$2(H$1),G$2(H$1,_e)):E$2(Wf),G$2(Wf,un)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,e=C$1;try{var un=eg;for(C$1=1;_e<un.length;_e++){var dn=un[_e];do dn=dn(!0);while(dn!==null)}eg=null,fg=!1}catch(hn){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),hn}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,e){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=e}function ug(_e,e,un){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var dn=rg;_e=sg;var hn=32-oc(dn)-1;dn&=~(1<<hn),un+=1;var fn=32-oc(e)+hn;if(30<fn){var pn=hn-hn%5;fn=(dn&(1<<pn)-1).toString(32),dn>>=pn,hn-=pn,rg=1<<32-oc(e)+hn|un<<hn|dn,sg=fn+_e}else rg=1<<fn|un<<hn|dn,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(_e,e){var un=Bg(5,null,null,0);un.elementType="DELETED",un.stateNode=e,un.return=_e,e=_e.deletions,e===null?(_e.deletions=[un],_e.flags|=16):e.push(un)}function Cg(_e,e){switch(_e.tag){case 5:var un=_e.type;return e=e.nodeType!==1||un.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(_e.stateNode=e,xg=_e,yg=Lf(e.firstChild),!0):!1;case 6:return e=_e.pendingProps===""||e.nodeType!==3?null:e,e!==null?(_e.stateNode=e,xg=_e,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(un=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:e,treeContext:un,retryLane:1073741824},un=Bg(18,null,null,0),un.stateNode=e,un.return=_e,_e.child=un,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$1){var e=yg;if(e){var un=e;if(!Cg(_e,e)){if(Dg(_e))throw Error(p$1(418));e=Lf(un.nextSibling);var dn=xg;e&&Cg(_e,e)?Ag(dn,un):(_e.flags=_e.flags&-4097|2,I$1=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$1(418));_e.flags=_e.flags&-4097|2,I$1=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$1)return Fg(_e),I$1=!0,!1;var e;if((e=_e.tag!==3)&&!(e=_e.tag!==5)&&(e=_e.type,e=e!=="head"&&e!=="body"&&!Ef(_e.type,_e.memoizedProps)),e&&(e=yg)){if(Dg(_e))throw Hg(),Error(p$1(418));for(;e;)Ag(_e,e),e=Lf(e.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$1(317));e:{for(_e=_e.nextSibling,e=0;_e;){if(_e.nodeType===8){var un=_e.data;if(un==="/$"){if(e===0){yg=Lf(_e.nextSibling);break e}e--}else un!=="$"&&un!=="$!"&&un!=="$?"||e++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_e,e,un){if(_e=un.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(un._owner){if(un=un._owner,un){if(un.tag!==1)throw Error(p$1(309));var dn=un.stateNode}if(!dn)throw Error(p$1(147,_e));var hn=dn,fn=""+_e;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===fn?e.ref:(e=function(pn){var mn=hn.refs;pn===null?delete mn[fn]:mn[fn]=pn},e._stringRef=fn,e)}if(typeof _e!="string")throw Error(p$1(284));if(!un._owner)throw Error(p$1(290,_e))}return _e}function Mg(_e,e){throw _e=Object.prototype.toString.call(e),Error(p$1(31,_e==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":_e))}function Ng(_e){var e=_e._init;return e(_e._payload)}function Og(_e){function e(Rn,Sn){if(_e){var Dn=Rn.deletions;Dn===null?(Rn.deletions=[Sn],Rn.flags|=16):Dn.push(Sn)}}function un(Rn,Sn){if(!_e)return null;for(;Sn!==null;)e(Rn,Sn),Sn=Sn.sibling;return null}function dn(Rn,Sn){for(Rn=new Map;Sn!==null;)Sn.key!==null?Rn.set(Sn.key,Sn):Rn.set(Sn.index,Sn),Sn=Sn.sibling;return Rn}function hn(Rn,Sn){return Rn=Pg(Rn,Sn),Rn.index=0,Rn.sibling=null,Rn}function fn(Rn,Sn,Dn){return Rn.index=Dn,_e?(Dn=Rn.alternate,Dn!==null?(Dn=Dn.index,Dn<Sn?(Rn.flags|=2,Sn):Dn):(Rn.flags|=2,Sn)):(Rn.flags|=1048576,Sn)}function pn(Rn){return _e&&Rn.alternate===null&&(Rn.flags|=2),Rn}function mn(Rn,Sn,Dn,$n){return Sn===null||Sn.tag!==6?(Sn=Qg(Dn,Rn.mode,$n),Sn.return=Rn,Sn):(Sn=hn(Sn,Dn),Sn.return=Rn,Sn)}function gn(Rn,Sn,Dn,$n){var Fn=Dn.type;return Fn===ya?xn(Rn,Sn,Dn.props.children,$n,Dn.key):Sn!==null&&(Sn.elementType===Fn||typeof Fn=="object"&&Fn!==null&&Fn.$$typeof===Ha&&Ng(Fn)===Sn.type)?($n=hn(Sn,Dn.props),$n.ref=Lg(Rn,Sn,Dn),$n.return=Rn,$n):($n=Rg(Dn.type,Dn.key,Dn.props,null,Rn.mode,$n),$n.ref=Lg(Rn,Sn,Dn),$n.return=Rn,$n)}function yn(Rn,Sn,Dn,$n){return Sn===null||Sn.tag!==4||Sn.stateNode.containerInfo!==Dn.containerInfo||Sn.stateNode.implementation!==Dn.implementation?(Sn=Sg(Dn,Rn.mode,$n),Sn.return=Rn,Sn):(Sn=hn(Sn,Dn.children||[]),Sn.return=Rn,Sn)}function xn(Rn,Sn,Dn,$n,Fn){return Sn===null||Sn.tag!==7?(Sn=Tg(Dn,Rn.mode,$n,Fn),Sn.return=Rn,Sn):(Sn=hn(Sn,Dn),Sn.return=Rn,Sn)}function En(Rn,Sn,Dn){if(typeof Sn=="string"&&Sn!==""||typeof Sn=="number")return Sn=Qg(""+Sn,Rn.mode,Dn),Sn.return=Rn,Sn;if(typeof Sn=="object"&&Sn!==null){switch(Sn.$$typeof){case va:return Dn=Rg(Sn.type,Sn.key,Sn.props,null,Rn.mode,Dn),Dn.ref=Lg(Rn,null,Sn),Dn.return=Rn,Dn;case wa:return Sn=Sg(Sn,Rn.mode,Dn),Sn.return=Rn,Sn;case Ha:var $n=Sn._init;return En(Rn,$n(Sn._payload),Dn)}if(eb(Sn)||Ka(Sn))return Sn=Tg(Sn,Rn.mode,Dn,null),Sn.return=Rn,Sn;Mg(Rn,Sn)}return null}function bn(Rn,Sn,Dn,$n){var Fn=Sn!==null?Sn.key:null;if(typeof Dn=="string"&&Dn!==""||typeof Dn=="number")return Fn!==null?null:mn(Rn,Sn,""+Dn,$n);if(typeof Dn=="object"&&Dn!==null){switch(Dn.$$typeof){case va:return Dn.key===Fn?gn(Rn,Sn,Dn,$n):null;case wa:return Dn.key===Fn?yn(Rn,Sn,Dn,$n):null;case Ha:return Fn=Dn._init,bn(Rn,Sn,Fn(Dn._payload),$n)}if(eb(Dn)||Ka(Dn))return Fn!==null?null:xn(Rn,Sn,Dn,$n,null);Mg(Rn,Dn)}return null}function vn(Rn,Sn,Dn,$n,Fn){if(typeof $n=="string"&&$n!==""||typeof $n=="number")return Rn=Rn.get(Dn)||null,mn(Sn,Rn,""+$n,Fn);if(typeof $n=="object"&&$n!==null){switch($n.$$typeof){case va:return Rn=Rn.get($n.key===null?Dn:$n.key)||null,gn(Sn,Rn,$n,Fn);case wa:return Rn=Rn.get($n.key===null?Dn:$n.key)||null,yn(Sn,Rn,$n,Fn);case Ha:var Gn=$n._init;return vn(Rn,Sn,Dn,Gn($n._payload),Fn)}if(eb($n)||Ka($n))return Rn=Rn.get(Dn)||null,xn(Sn,Rn,$n,Fn,null);Mg(Sn,$n)}return null}function Pn(Rn,Sn,Dn,$n){for(var Fn=null,Gn=null,kn=Sn,Nn=Sn=0,Ln=null;kn!==null&&Nn<Dn.length;Nn++){kn.index>Nn?(Ln=kn,kn=null):Ln=kn.sibling;var zn=bn(Rn,kn,Dn[Nn],$n);if(zn===null){kn===null&&(kn=Ln);break}_e&&kn&&zn.alternate===null&&e(Rn,kn),Sn=fn(zn,Sn,Nn),Gn===null?Fn=zn:Gn.sibling=zn,Gn=zn,kn=Ln}if(Nn===Dn.length)return un(Rn,kn),I$1&&tg(Rn,Nn),Fn;if(kn===null){for(;Nn<Dn.length;Nn++)kn=En(Rn,Dn[Nn],$n),kn!==null&&(Sn=fn(kn,Sn,Nn),Gn===null?Fn=kn:Gn.sibling=kn,Gn=kn);return I$1&&tg(Rn,Nn),Fn}for(kn=dn(Rn,kn);Nn<Dn.length;Nn++)Ln=vn(kn,Rn,Nn,Dn[Nn],$n),Ln!==null&&(_e&&Ln.alternate!==null&&kn.delete(Ln.key===null?Nn:Ln.key),Sn=fn(Ln,Sn,Nn),Gn===null?Fn=Ln:Gn.sibling=Ln,Gn=Ln);return _e&&kn.forEach(function(Cn){return e(Rn,Cn)}),I$1&&tg(Rn,Nn),Fn}function Tn(Rn,Sn,Dn,$n){var Fn=Ka(Dn);if(typeof Fn!="function")throw Error(p$1(150));if(Dn=Fn.call(Dn),Dn==null)throw Error(p$1(151));for(var Gn=Fn=null,kn=Sn,Nn=Sn=0,Ln=null,zn=Dn.next();kn!==null&&!zn.done;Nn++,zn=Dn.next()){kn.index>Nn?(Ln=kn,kn=null):Ln=kn.sibling;var Cn=bn(Rn,kn,zn.value,$n);if(Cn===null){kn===null&&(kn=Ln);break}_e&&kn&&Cn.alternate===null&&e(Rn,kn),Sn=fn(Cn,Sn,Nn),Gn===null?Fn=Cn:Gn.sibling=Cn,Gn=Cn,kn=Ln}if(zn.done)return un(Rn,kn),I$1&&tg(Rn,Nn),Fn;if(kn===null){for(;!zn.done;Nn++,zn=Dn.next())zn=En(Rn,zn.value,$n),zn!==null&&(Sn=fn(zn,Sn,Nn),Gn===null?Fn=zn:Gn.sibling=zn,Gn=zn);return I$1&&tg(Rn,Nn),Fn}for(kn=dn(Rn,kn);!zn.done;Nn++,zn=Dn.next())zn=vn(kn,Rn,Nn,zn.value,$n),zn!==null&&(_e&&zn.alternate!==null&&kn.delete(zn.key===null?Nn:zn.key),Sn=fn(zn,Sn,Nn),Gn===null?Fn=zn:Gn.sibling=zn,Gn=zn);return _e&&kn.forEach(function(Mn){return e(Rn,Mn)}),I$1&&tg(Rn,Nn),Fn}function In(Rn,Sn,Dn,$n){if(typeof Dn=="object"&&Dn!==null&&Dn.type===ya&&Dn.key===null&&(Dn=Dn.props.children),typeof Dn=="object"&&Dn!==null){switch(Dn.$$typeof){case va:e:{for(var Fn=Dn.key,Gn=Sn;Gn!==null;){if(Gn.key===Fn){if(Fn=Dn.type,Fn===ya){if(Gn.tag===7){un(Rn,Gn.sibling),Sn=hn(Gn,Dn.props.children),Sn.return=Rn,Rn=Sn;break e}}else if(Gn.elementType===Fn||typeof Fn=="object"&&Fn!==null&&Fn.$$typeof===Ha&&Ng(Fn)===Gn.type){un(Rn,Gn.sibling),Sn=hn(Gn,Dn.props),Sn.ref=Lg(Rn,Gn,Dn),Sn.return=Rn,Rn=Sn;break e}un(Rn,Gn);break}else e(Rn,Gn);Gn=Gn.sibling}Dn.type===ya?(Sn=Tg(Dn.props.children,Rn.mode,$n,Dn.key),Sn.return=Rn,Rn=Sn):($n=Rg(Dn.type,Dn.key,Dn.props,null,Rn.mode,$n),$n.ref=Lg(Rn,Sn,Dn),$n.return=Rn,Rn=$n)}return pn(Rn);case wa:e:{for(Gn=Dn.key;Sn!==null;){if(Sn.key===Gn)if(Sn.tag===4&&Sn.stateNode.containerInfo===Dn.containerInfo&&Sn.stateNode.implementation===Dn.implementation){un(Rn,Sn.sibling),Sn=hn(Sn,Dn.children||[]),Sn.return=Rn,Rn=Sn;break e}else{un(Rn,Sn);break}else e(Rn,Sn);Sn=Sn.sibling}Sn=Sg(Dn,Rn.mode,$n),Sn.return=Rn,Rn=Sn}return pn(Rn);case Ha:return Gn=Dn._init,In(Rn,Sn,Gn(Dn._payload),$n)}if(eb(Dn))return Pn(Rn,Sn,Dn,$n);if(Ka(Dn))return Tn(Rn,Sn,Dn,$n);Mg(Rn,Dn)}return typeof Dn=="string"&&Dn!==""||typeof Dn=="number"?(Dn=""+Dn,Sn!==null&&Sn.tag===6?(un(Rn,Sn.sibling),Sn=hn(Sn,Dn),Sn.return=Rn,Rn=Sn):(un(Rn,Sn),Sn=Qg(Dn,Rn.mode,$n),Sn.return=Rn,Rn=Sn),pn(Rn)):un(Rn,Sn)}return In}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var e=Wg.current;E$2(Wg),_e._currentValue=e}function bh(_e,e,un){for(;_e!==null;){var dn=_e.alternate;if((_e.childLanes&e)!==e?(_e.childLanes|=e,dn!==null&&(dn.childLanes|=e)):dn!==null&&(dn.childLanes&e)!==e&&(dn.childLanes|=e),_e===un)break;_e=_e.return}}function ch(_e,e){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&e&&(dh=!0),_e.firstContext=null)}function eh(_e){var e=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return e}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,e,un,dn){var hn=e.interleaved;return hn===null?(un.next=un,gh(e)):(un.next=hn.next,hn.next=un),e.interleaved=un,ih(_e,dn)}function ih(_e,e){_e.lanes|=e;var un=_e.alternate;for(un!==null&&(un.lanes|=e),un=_e,_e=_e.return;_e!==null;)_e.childLanes|=e,un=_e.alternate,un!==null&&(un.childLanes|=e),un=_e,_e=_e.return;return un.tag===3?un.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,e){_e=_e.updateQueue,e.updateQueue===_e&&(e.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,e){return{eventTime:_e,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(_e,e,un){var dn=_e.updateQueue;if(dn===null)return null;if(dn=dn.shared,K$1&2){var hn=dn.pending;return hn===null?e.next=e:(e.next=hn.next,hn.next=e),dn.pending=e,ih(_e,un)}return hn=dn.interleaved,hn===null?(e.next=e,gh(dn)):(e.next=hn.next,hn.next=e),dn.interleaved=e,ih(_e,un)}function oh(_e,e,un){if(e=e.updateQueue,e!==null&&(e=e.shared,(un&4194240)!==0)){var dn=e.lanes;dn&=_e.pendingLanes,un|=dn,e.lanes=un,Cc(_e,un)}}function ph(_e,e){var un=_e.updateQueue,dn=_e.alternate;if(dn!==null&&(dn=dn.updateQueue,un===dn)){var hn=null,fn=null;if(un=un.firstBaseUpdate,un!==null){do{var pn={eventTime:un.eventTime,lane:un.lane,tag:un.tag,payload:un.payload,callback:un.callback,next:null};fn===null?hn=fn=pn:fn=fn.next=pn,un=un.next}while(un!==null);fn===null?hn=fn=e:fn=fn.next=e}else hn=fn=e;un={baseState:dn.baseState,firstBaseUpdate:hn,lastBaseUpdate:fn,shared:dn.shared,effects:dn.effects},_e.updateQueue=un;return}_e=un.lastBaseUpdate,_e===null?un.firstBaseUpdate=e:_e.next=e,un.lastBaseUpdate=e}function qh(_e,e,un,dn){var hn=_e.updateQueue;jh=!1;var fn=hn.firstBaseUpdate,pn=hn.lastBaseUpdate,mn=hn.shared.pending;if(mn!==null){hn.shared.pending=null;var gn=mn,yn=gn.next;gn.next=null,pn===null?fn=yn:pn.next=yn,pn=gn;var xn=_e.alternate;xn!==null&&(xn=xn.updateQueue,mn=xn.lastBaseUpdate,mn!==pn&&(mn===null?xn.firstBaseUpdate=yn:mn.next=yn,xn.lastBaseUpdate=gn))}if(fn!==null){var En=hn.baseState;pn=0,xn=yn=gn=null,mn=fn;do{var bn=mn.lane,vn=mn.eventTime;if((dn&bn)===bn){xn!==null&&(xn=xn.next={eventTime:vn,lane:0,tag:mn.tag,payload:mn.payload,callback:mn.callback,next:null});e:{var Pn=_e,Tn=mn;switch(bn=e,vn=un,Tn.tag){case 1:if(Pn=Tn.payload,typeof Pn=="function"){En=Pn.call(vn,En,bn);break e}En=Pn;break e;case 3:Pn.flags=Pn.flags&-65537|128;case 0:if(Pn=Tn.payload,bn=typeof Pn=="function"?Pn.call(vn,En,bn):Pn,bn==null)break e;En=A$1({},En,bn);break e;case 2:jh=!0}}mn.callback!==null&&mn.lane!==0&&(_e.flags|=64,bn=hn.effects,bn===null?hn.effects=[mn]:bn.push(mn))}else vn={eventTime:vn,lane:bn,tag:mn.tag,payload:mn.payload,callback:mn.callback,next:null},xn===null?(yn=xn=vn,gn=En):xn=xn.next=vn,pn|=bn;if(mn=mn.next,mn===null){if(mn=hn.shared.pending,mn===null)break;bn=mn,mn=bn.next,bn.next=null,hn.lastBaseUpdate=bn,hn.shared.pending=null}}while(!0);if(xn===null&&(gn=En),hn.baseState=gn,hn.firstBaseUpdate=yn,hn.lastBaseUpdate=xn,e=hn.shared.interleaved,e!==null){hn=e;do pn|=hn.lane,hn=hn.next;while(hn!==e)}else fn===null&&(hn.shared.lanes=0);rh|=pn,_e.lanes=pn,_e.memoizedState=En}}function sh(_e,e,un){if(_e=e.effects,e.effects=null,_e!==null)for(e=0;e<_e.length;e++){var dn=_e[e],hn=dn.callback;if(hn!==null){if(dn.callback=null,dn=un,typeof hn!="function")throw Error(p$1(191,hn));hn.call(dn)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$1(174));return _e}function yh(_e,e){switch(G$2(wh,e),G$2(vh,_e),G$2(uh,th),_e=e.nodeType,_e){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:_e=_e===8?e.parentNode:e,e=_e.namespaceURI||null,_e=_e.tagName,e=lb(e,_e)}E$2(uh),G$2(uh,e)}function zh(){E$2(uh),E$2(vh),E$2(wh)}function Ah(_e){xh(wh.current);var e=xh(uh.current),un=lb(e,_e.type);e!==un&&(G$2(vh,_e),G$2(uh,un))}function Bh(_e){vh.current===_e&&(E$2(uh),E$2(vh))}var L$3=Uf(0);function Ch(_e){for(var e=_e;e!==null;){if(e.tag===13){var un=e.memoizedState;if(un!==null&&(un=un.dehydrated,un===null||un.data==="$?"||un.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===_e)break;for(;e.sibling===null;){if(e.return===null||e.return===_e)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$2=null,N$2=null,O$2=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$2(){throw Error(p$1(321))}function Mh(_e,e){if(e===null)return!1;for(var un=0;un<e.length&&un<_e.length;un++)if(!He(_e[un],e[un]))return!1;return!0}function Nh(_e,e,un,dn,hn,fn){if(Hh=fn,M$2=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=un(dn,hn),Jh){fn=0;do{if(Jh=!1,Kh=0,25<=fn)throw Error(p$1(301));fn+=1,O$2=N$2=null,e.updateQueue=null,Fh.current=Qh,_e=un(dn,hn)}while(Jh)}if(Fh.current=Rh,e=N$2!==null&&N$2.next!==null,Hh=0,O$2=N$2=M$2=null,Ih=!1,e)throw Error(p$1(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$2===null?M$2.memoizedState=O$2=_e:O$2=O$2.next=_e,O$2}function Uh(){if(N$2===null){var _e=M$2.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$2.next;var e=O$2===null?M$2.memoizedState:O$2.next;if(e!==null)O$2=e,N$2=_e;else{if(_e===null)throw Error(p$1(310));N$2=_e,_e={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$2===null?M$2.memoizedState=O$2=_e:O$2=O$2.next=_e}return O$2}function Vh(_e,e){return typeof e=="function"?e(_e):e}function Wh(_e){var e=Uh(),un=e.queue;if(un===null)throw Error(p$1(311));un.lastRenderedReducer=_e;var dn=N$2,hn=dn.baseQueue,fn=un.pending;if(fn!==null){if(hn!==null){var pn=hn.next;hn.next=fn.next,fn.next=pn}dn.baseQueue=hn=fn,un.pending=null}if(hn!==null){fn=hn.next,dn=dn.baseState;var mn=pn=null,gn=null,yn=fn;do{var xn=yn.lane;if((Hh&xn)===xn)gn!==null&&(gn=gn.next={lane:0,action:yn.action,hasEagerState:yn.hasEagerState,eagerState:yn.eagerState,next:null}),dn=yn.hasEagerState?yn.eagerState:_e(dn,yn.action);else{var En={lane:xn,action:yn.action,hasEagerState:yn.hasEagerState,eagerState:yn.eagerState,next:null};gn===null?(mn=gn=En,pn=dn):gn=gn.next=En,M$2.lanes|=xn,rh|=xn}yn=yn.next}while(yn!==null&&yn!==fn);gn===null?pn=dn:gn.next=mn,He(dn,e.memoizedState)||(dh=!0),e.memoizedState=dn,e.baseState=pn,e.baseQueue=gn,un.lastRenderedState=dn}if(_e=un.interleaved,_e!==null){hn=_e;do fn=hn.lane,M$2.lanes|=fn,rh|=fn,hn=hn.next;while(hn!==_e)}else hn===null&&(un.lanes=0);return[e.memoizedState,un.dispatch]}function Xh(_e){var e=Uh(),un=e.queue;if(un===null)throw Error(p$1(311));un.lastRenderedReducer=_e;var dn=un.dispatch,hn=un.pending,fn=e.memoizedState;if(hn!==null){un.pending=null;var pn=hn=hn.next;do fn=_e(fn,pn.action),pn=pn.next;while(pn!==hn);He(fn,e.memoizedState)||(dh=!0),e.memoizedState=fn,e.baseQueue===null&&(e.baseState=fn),un.lastRenderedState=fn}return[fn,dn]}function Yh(){}function Zh(_e,e){var un=M$2,dn=Uh(),hn=e(),fn=!He(dn.memoizedState,hn);if(fn&&(dn.memoizedState=hn,dh=!0),dn=dn.queue,$h(ai.bind(null,un,dn,_e),[_e]),dn.getSnapshot!==e||fn||O$2!==null&&O$2.memoizedState.tag&1){if(un.flags|=2048,bi(9,ci.bind(null,un,dn,hn,e),void 0,null),Q$2===null)throw Error(p$1(349));Hh&30||di(un,e,hn)}return hn}function di(_e,e,un){_e.flags|=16384,_e={getSnapshot:e,value:un},e=M$2.updateQueue,e===null?(e={lastEffect:null,stores:null},M$2.updateQueue=e,e.stores=[_e]):(un=e.stores,un===null?e.stores=[_e]:un.push(_e))}function ci(_e,e,un,dn){e.value=un,e.getSnapshot=dn,ei(e)&&fi(_e)}function ai(_e,e,un){return un(function(){ei(e)&&fi(_e)})}function ei(_e){var e=_e.getSnapshot;_e=_e.value;try{var un=e();return!He(_e,un)}catch{return!0}}function fi(_e){var e=ih(_e,1);e!==null&&gi(e,_e,1,-1)}function hi(_e){var e=Th();return typeof _e=="function"&&(_e=_e()),e.memoizedState=e.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},e.queue=_e,_e=_e.dispatch=ii.bind(null,M$2,_e),[e.memoizedState,_e]}function bi(_e,e,un,dn){return _e={tag:_e,create:e,destroy:un,deps:dn,next:null},e=M$2.updateQueue,e===null?(e={lastEffect:null,stores:null},M$2.updateQueue=e,e.lastEffect=_e.next=_e):(un=e.lastEffect,un===null?e.lastEffect=_e.next=_e:(dn=un.next,un.next=_e,_e.next=dn,e.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,e,un,dn){var hn=Th();M$2.flags|=_e,hn.memoizedState=bi(1|e,un,void 0,dn===void 0?null:dn)}function li(_e,e,un,dn){var hn=Uh();dn=dn===void 0?null:dn;var fn=void 0;if(N$2!==null){var pn=N$2.memoizedState;if(fn=pn.destroy,dn!==null&&Mh(dn,pn.deps)){hn.memoizedState=bi(e,un,fn,dn);return}}M$2.flags|=_e,hn.memoizedState=bi(1|e,un,fn,dn)}function mi(_e,e){return ki(8390656,8,_e,e)}function $h(_e,e){return li(2048,8,_e,e)}function ni(_e,e){return li(4,2,_e,e)}function oi(_e,e){return li(4,4,_e,e)}function pi(_e,e){if(typeof e=="function")return _e=_e(),e(_e),function(){e(null)};if(e!=null)return _e=_e(),e.current=_e,function(){e.current=null}}function qi(_e,e,un){return un=un!=null?un.concat([_e]):null,li(4,4,pi.bind(null,e,_e),un)}function ri(){}function si(_e,e){var un=Uh();e=e===void 0?null:e;var dn=un.memoizedState;return dn!==null&&e!==null&&Mh(e,dn[1])?dn[0]:(un.memoizedState=[_e,e],_e)}function ti(_e,e){var un=Uh();e=e===void 0?null:e;var dn=un.memoizedState;return dn!==null&&e!==null&&Mh(e,dn[1])?dn[0]:(_e=_e(),un.memoizedState=[_e,e],_e)}function ui(_e,e,un){return Hh&21?(He(un,e)||(un=yc(),M$2.lanes|=un,rh|=un,_e.baseState=!0),e):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=un)}function vi(_e,e){var un=C$1;C$1=un!==0&&4>un?un:4,_e(!0);var dn=Gh.transition;Gh.transition={};try{_e(!1),e()}finally{C$1=un,Gh.transition=dn}}function wi(){return Uh().memoizedState}function xi(_e,e,un){var dn=yi(_e);if(un={lane:dn,action:un,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai(e,un);else if(un=hh(_e,e,un,dn),un!==null){var hn=R$1();gi(un,_e,dn,hn),Bi(un,e,dn)}}function ii(_e,e,un){var dn=yi(_e),hn={lane:dn,action:un,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai(e,hn);else{var fn=_e.alternate;if(_e.lanes===0&&(fn===null||fn.lanes===0)&&(fn=e.lastRenderedReducer,fn!==null))try{var pn=e.lastRenderedState,mn=fn(pn,un);if(hn.hasEagerState=!0,hn.eagerState=mn,He(mn,pn)){var gn=e.interleaved;gn===null?(hn.next=hn,gh(e)):(hn.next=gn.next,gn.next=hn),e.interleaved=hn;return}}catch{}finally{}un=hh(_e,e,hn,dn),un!==null&&(hn=R$1(),gi(un,_e,dn,hn),Bi(un,e,dn))}}function zi(_e){var e=_e.alternate;return _e===M$2||e!==null&&e===M$2}function Ai(_e,e){Jh=Ih=!0;var un=_e.pending;un===null?e.next=e:(e.next=un.next,un.next=e),_e.pending=e}function Bi(_e,e,un){if(un&4194240){var dn=e.lanes;dn&=_e.pendingLanes,un|=dn,e.lanes=un,Cc(_e,un)}}var Rh={readContext:eh,useCallback:P$2,useContext:P$2,useEffect:P$2,useImperativeHandle:P$2,useInsertionEffect:P$2,useLayoutEffect:P$2,useMemo:P$2,useReducer:P$2,useRef:P$2,useState:P$2,useDebugValue:P$2,useDeferredValue:P$2,useTransition:P$2,useMutableSource:P$2,useSyncExternalStore:P$2,useId:P$2,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,e){return Th().memoizedState=[_e,e===void 0?null:e],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,e,un){return un=un!=null?un.concat([_e]):null,ki(4194308,4,pi.bind(null,e,_e),un)},useLayoutEffect:function(_e,e){return ki(4194308,4,_e,e)},useInsertionEffect:function(_e,e){return ki(4,2,_e,e)},useMemo:function(_e,e){var un=Th();return e=e===void 0?null:e,_e=_e(),un.memoizedState=[_e,e],_e},useReducer:function(_e,e,un){var dn=Th();return e=un!==void 0?un(e):e,dn.memoizedState=dn.baseState=e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:e},dn.queue=_e,_e=_e.dispatch=xi.bind(null,M$2,_e),[dn.memoizedState,_e]},useRef:function(_e){var e=Th();return _e={current:_e},e.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th().memoizedState=_e},useTransition:function(){var _e=hi(!1),e=_e[0];return _e=vi.bind(null,_e[1]),Th().memoizedState=_e,[e,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,e,un){var dn=M$2,hn=Th();if(I$1){if(un===void 0)throw Error(p$1(407));un=un()}else{if(un=e(),Q$2===null)throw Error(p$1(349));Hh&30||di(dn,e,un)}hn.memoizedState=un;var fn={value:un,getSnapshot:e};return hn.queue=fn,mi(ai.bind(null,dn,fn,_e),[_e]),dn.flags|=2048,bi(9,ci.bind(null,dn,fn,un,e),void 0,null),un},useId:function(){var _e=Th(),e=Q$2.identifierPrefix;if(I$1){var un=sg,dn=rg;un=(dn&~(1<<32-oc(dn)-1)).toString(32)+un,e=":"+e+"R"+un,un=Kh++,0<un&&(e+="H"+un.toString(32)),e+=":"}else un=Lh++,e=":"+e+"r"+un.toString(32)+":";return _e.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var e=Uh();return ui(e,N$2.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],e=Uh().memoizedState;return[_e,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var e=Uh();return N$2===null?e.memoizedState=_e:ui(e,N$2.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],e=Uh().memoizedState;return[_e,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,e){if(_e&&_e.defaultProps){e=A$1({},e),_e=_e.defaultProps;for(var un in _e)e[un]===void 0&&(e[un]=_e[un]);return e}return e}function Di(_e,e,un,dn){e=_e.memoizedState,un=un(dn,e),un=un==null?e:A$1({},e,un),_e.memoizedState=un,_e.lanes===0&&(_e.updateQueue.baseState=un)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,e,un){_e=_e._reactInternals;var dn=R$1(),hn=yi(_e),fn=mh(dn,hn);fn.payload=e,un!=null&&(fn.callback=un),e=nh(_e,fn,hn),e!==null&&(gi(e,_e,hn,dn),oh(e,_e,hn))},enqueueReplaceState:function(_e,e,un){_e=_e._reactInternals;var dn=R$1(),hn=yi(_e),fn=mh(dn,hn);fn.tag=1,fn.payload=e,un!=null&&(fn.callback=un),e=nh(_e,fn,hn),e!==null&&(gi(e,_e,hn,dn),oh(e,_e,hn))},enqueueForceUpdate:function(_e,e){_e=_e._reactInternals;var un=R$1(),dn=yi(_e),hn=mh(un,dn);hn.tag=2,e!=null&&(hn.callback=e),e=nh(_e,hn,dn),e!==null&&(gi(e,_e,dn,un),oh(e,_e,dn))}};function Fi(_e,e,un,dn,hn,fn,pn){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(dn,fn,pn):e.prototype&&e.prototype.isPureReactComponent?!Ie(un,dn)||!Ie(hn,fn):!0}function Gi(_e,e,un){var dn=!1,hn=Vf,fn=e.contextType;return typeof fn=="object"&&fn!==null?fn=eh(fn):(hn=Zf(e)?Xf:H$1.current,dn=e.contextTypes,fn=(dn=dn!=null)?Yf(_e,hn):Vf),e=new e(un,fn),_e.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,_e.stateNode=e,e._reactInternals=_e,dn&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=hn,_e.__reactInternalMemoizedMaskedChildContext=fn),e}function Hi(_e,e,un,dn){_e=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(un,dn),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(un,dn),e.state!==_e&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(_e,e,un,dn){var hn=_e.stateNode;hn.props=un,hn.state=_e.memoizedState,hn.refs={},kh(_e);var fn=e.contextType;typeof fn=="object"&&fn!==null?hn.context=eh(fn):(fn=Zf(e)?Xf:H$1.current,hn.context=Yf(_e,fn)),hn.state=_e.memoizedState,fn=e.getDerivedStateFromProps,typeof fn=="function"&&(Di(_e,e,fn,un),hn.state=_e.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof hn.getSnapshotBeforeUpdate=="function"||typeof hn.UNSAFE_componentWillMount!="function"&&typeof hn.componentWillMount!="function"||(e=hn.state,typeof hn.componentWillMount=="function"&&hn.componentWillMount(),typeof hn.UNSAFE_componentWillMount=="function"&&hn.UNSAFE_componentWillMount(),e!==hn.state&&Ei.enqueueReplaceState(hn,hn.state,null),qh(_e,un,hn,dn),hn.state=_e.memoizedState),typeof hn.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,e){try{var un="",dn=e;do un+=Pa(dn),dn=dn.return;while(dn);var hn=un}catch(fn){hn=`
Error generating stack: `+fn.message+`
`+fn.stack}return{value:_e,source:e,stack:hn,digest:null}}function Ki(_e,e,un){return{value:_e,source:null,stack:un??null,digest:e??null}}function Li(_e,e){try{console.error(e.value)}catch(un){setTimeout(function(){throw un})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,e,un){un=mh(-1,un),un.tag=3,un.payload={element:null};var dn=e.value;return un.callback=function(){Oi||(Oi=!0,Pi=dn),Li(_e,e)},un}function Qi(_e,e,un){un=mh(-1,un),un.tag=3;var dn=_e.type.getDerivedStateFromError;if(typeof dn=="function"){var hn=e.value;un.payload=function(){return dn(hn)},un.callback=function(){Li(_e,e)}}var fn=_e.stateNode;return fn!==null&&typeof fn.componentDidCatch=="function"&&(un.callback=function(){Li(_e,e),typeof dn!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var pn=e.stack;this.componentDidCatch(e.value,{componentStack:pn!==null?pn:""})}),un}function Si(_e,e,un){var dn=_e.pingCache;if(dn===null){dn=_e.pingCache=new Mi;var hn=new Set;dn.set(e,hn)}else hn=dn.get(e),hn===void 0&&(hn=new Set,dn.set(e,hn));hn.has(un)||(hn.add(un),_e=Ti.bind(null,_e,e,un),e.then(_e,_e))}function Ui(_e){do{var e;if((e=_e.tag===13)&&(e=_e.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,e,un,dn,hn){return _e.mode&1?(_e.flags|=65536,_e.lanes=hn,_e):(_e===e?_e.flags|=65536:(_e.flags|=128,un.flags|=131072,un.flags&=-52805,un.tag===1&&(un.alternate===null?un.tag=17:(e=mh(-1,1),e.tag=2,nh(un,e,1))),un.lanes|=1),_e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(_e,e,un,dn){e.child=_e===null?Vg(e,null,un,dn):Ug(e,_e.child,un,dn)}function Yi(_e,e,un,dn,hn){un=un.render;var fn=e.ref;return ch(e,hn),dn=Nh(_e,e,un,dn,fn,hn),un=Sh(),_e!==null&&!dh?(e.updateQueue=_e.updateQueue,e.flags&=-2053,_e.lanes&=~hn,Zi(_e,e,hn)):(I$1&&un&&vg(e),e.flags|=1,Xi(_e,e,dn,hn),e.child)}function $i(_e,e,un,dn,hn){if(_e===null){var fn=un.type;return typeof fn=="function"&&!aj(fn)&&fn.defaultProps===void 0&&un.compare===null&&un.defaultProps===void 0?(e.tag=15,e.type=fn,bj(_e,e,fn,dn,hn)):(_e=Rg(un.type,null,dn,e,e.mode,hn),_e.ref=e.ref,_e.return=e,e.child=_e)}if(fn=_e.child,!(_e.lanes&hn)){var pn=fn.memoizedProps;if(un=un.compare,un=un!==null?un:Ie,un(pn,dn)&&_e.ref===e.ref)return Zi(_e,e,hn)}return e.flags|=1,_e=Pg(fn,dn),_e.ref=e.ref,_e.return=e,e.child=_e}function bj(_e,e,un,dn,hn){if(_e!==null){var fn=_e.memoizedProps;if(Ie(fn,dn)&&_e.ref===e.ref)if(dh=!1,e.pendingProps=dn=fn,(_e.lanes&hn)!==0)_e.flags&131072&&(dh=!0);else return e.lanes=_e.lanes,Zi(_e,e,hn)}return cj(_e,e,un,dn,hn)}function dj(_e,e,un){var dn=e.pendingProps,hn=dn.children,fn=_e!==null?_e.memoizedState:null;if(dn.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(ej,fj),fj|=un;else{if(!(un&1073741824))return _e=fn!==null?fn.baseLanes|un:un,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:_e,cachePool:null,transitions:null},e.updateQueue=null,G$2(ej,fj),fj|=_e,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn=fn!==null?fn.baseLanes:un,G$2(ej,fj),fj|=dn}else fn!==null?(dn=fn.baseLanes|un,e.memoizedState=null):dn=un,G$2(ej,fj),fj|=dn;return Xi(_e,e,hn,un),e.child}function gj(_e,e){var un=e.ref;(_e===null&&un!==null||_e!==null&&_e.ref!==un)&&(e.flags|=512,e.flags|=2097152)}function cj(_e,e,un,dn,hn){var fn=Zf(un)?Xf:H$1.current;return fn=Yf(e,fn),ch(e,hn),un=Nh(_e,e,un,dn,fn,hn),dn=Sh(),_e!==null&&!dh?(e.updateQueue=_e.updateQueue,e.flags&=-2053,_e.lanes&=~hn,Zi(_e,e,hn)):(I$1&&dn&&vg(e),e.flags|=1,Xi(_e,e,un,hn),e.child)}function hj(_e,e,un,dn,hn){if(Zf(un)){var fn=!0;cg(e)}else fn=!1;if(ch(e,hn),e.stateNode===null)ij(_e,e),Gi(e,un,dn),Ii(e,un,dn,hn),dn=!0;else if(_e===null){var pn=e.stateNode,mn=e.memoizedProps;pn.props=mn;var gn=pn.context,yn=un.contextType;typeof yn=="object"&&yn!==null?yn=eh(yn):(yn=Zf(un)?Xf:H$1.current,yn=Yf(e,yn));var xn=un.getDerivedStateFromProps,En=typeof xn=="function"||typeof pn.getSnapshotBeforeUpdate=="function";En||typeof pn.UNSAFE_componentWillReceiveProps!="function"&&typeof pn.componentWillReceiveProps!="function"||(mn!==dn||gn!==yn)&&Hi(e,pn,dn,yn),jh=!1;var bn=e.memoizedState;pn.state=bn,qh(e,dn,pn,hn),gn=e.memoizedState,mn!==dn||bn!==gn||Wf.current||jh?(typeof xn=="function"&&(Di(e,un,xn,dn),gn=e.memoizedState),(mn=jh||Fi(e,un,mn,dn,bn,gn,yn))?(En||typeof pn.UNSAFE_componentWillMount!="function"&&typeof pn.componentWillMount!="function"||(typeof pn.componentWillMount=="function"&&pn.componentWillMount(),typeof pn.UNSAFE_componentWillMount=="function"&&pn.UNSAFE_componentWillMount()),typeof pn.componentDidMount=="function"&&(e.flags|=4194308)):(typeof pn.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=dn,e.memoizedState=gn),pn.props=dn,pn.state=gn,pn.context=yn,dn=mn):(typeof pn.componentDidMount=="function"&&(e.flags|=4194308),dn=!1)}else{pn=e.stateNode,lh(_e,e),mn=e.memoizedProps,yn=e.type===e.elementType?mn:Ci(e.type,mn),pn.props=yn,En=e.pendingProps,bn=pn.context,gn=un.contextType,typeof gn=="object"&&gn!==null?gn=eh(gn):(gn=Zf(un)?Xf:H$1.current,gn=Yf(e,gn));var vn=un.getDerivedStateFromProps;(xn=typeof vn=="function"||typeof pn.getSnapshotBeforeUpdate=="function")||typeof pn.UNSAFE_componentWillReceiveProps!="function"&&typeof pn.componentWillReceiveProps!="function"||(mn!==En||bn!==gn)&&Hi(e,pn,dn,gn),jh=!1,bn=e.memoizedState,pn.state=bn,qh(e,dn,pn,hn);var Pn=e.memoizedState;mn!==En||bn!==Pn||Wf.current||jh?(typeof vn=="function"&&(Di(e,un,vn,dn),Pn=e.memoizedState),(yn=jh||Fi(e,un,yn,dn,bn,Pn,gn)||!1)?(xn||typeof pn.UNSAFE_componentWillUpdate!="function"&&typeof pn.componentWillUpdate!="function"||(typeof pn.componentWillUpdate=="function"&&pn.componentWillUpdate(dn,Pn,gn),typeof pn.UNSAFE_componentWillUpdate=="function"&&pn.UNSAFE_componentWillUpdate(dn,Pn,gn)),typeof pn.componentDidUpdate=="function"&&(e.flags|=4),typeof pn.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof pn.componentDidUpdate!="function"||mn===_e.memoizedProps&&bn===_e.memoizedState||(e.flags|=4),typeof pn.getSnapshotBeforeUpdate!="function"||mn===_e.memoizedProps&&bn===_e.memoizedState||(e.flags|=1024),e.memoizedProps=dn,e.memoizedState=Pn),pn.props=dn,pn.state=Pn,pn.context=gn,dn=yn):(typeof pn.componentDidUpdate!="function"||mn===_e.memoizedProps&&bn===_e.memoizedState||(e.flags|=4),typeof pn.getSnapshotBeforeUpdate!="function"||mn===_e.memoizedProps&&bn===_e.memoizedState||(e.flags|=1024),dn=!1)}return jj(_e,e,un,dn,fn,hn)}function jj(_e,e,un,dn,hn,fn){gj(_e,e);var pn=(e.flags&128)!==0;if(!dn&&!pn)return hn&&dg(e,un,!1),Zi(_e,e,fn);dn=e.stateNode,Wi.current=e;var mn=pn&&typeof un.getDerivedStateFromError!="function"?null:dn.render();return e.flags|=1,_e!==null&&pn?(e.child=Ug(e,_e.child,null,fn),e.child=Ug(e,null,mn,fn)):Xi(_e,e,mn,fn),e.memoizedState=dn.state,hn&&dg(e,un,!0),e.child}function kj(_e){var e=_e.stateNode;e.pendingContext?ag(_e,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(_e,e.context,!1),yh(_e,e.containerInfo)}function lj(_e,e,un,dn,hn){return Ig(),Jg(hn),e.flags|=256,Xi(_e,e,un,dn),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,e,un){var dn=e.pendingProps,hn=L$3.current,fn=!1,pn=(e.flags&128)!==0,mn;if((mn=pn)||(mn=_e!==null&&_e.memoizedState===null?!1:(hn&2)!==0),mn?(fn=!0,e.flags&=-129):(_e===null||_e.memoizedState!==null)&&(hn|=1),G$2(L$3,hn&1),_e===null)return Eg(e),_e=e.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(e.mode&1?_e.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(pn=dn.children,_e=dn.fallback,fn?(dn=e.mode,fn=e.child,pn={mode:"hidden",children:pn},!(dn&1)&&fn!==null?(fn.childLanes=0,fn.pendingProps=pn):fn=pj(pn,dn,0,null),_e=Tg(_e,dn,un,null),fn.return=e,_e.return=e,fn.sibling=_e,e.child=fn,e.child.memoizedState=nj(un),e.memoizedState=mj,_e):qj(e,pn));if(hn=_e.memoizedState,hn!==null&&(mn=hn.dehydrated,mn!==null))return rj(_e,e,pn,dn,mn,hn,un);if(fn){fn=dn.fallback,pn=e.mode,hn=_e.child,mn=hn.sibling;var gn={mode:"hidden",children:dn.children};return!(pn&1)&&e.child!==hn?(dn=e.child,dn.childLanes=0,dn.pendingProps=gn,e.deletions=null):(dn=Pg(hn,gn),dn.subtreeFlags=hn.subtreeFlags&14680064),mn!==null?fn=Pg(mn,fn):(fn=Tg(fn,pn,un,null),fn.flags|=2),fn.return=e,dn.return=e,dn.sibling=fn,e.child=dn,dn=fn,fn=e.child,pn=_e.child.memoizedState,pn=pn===null?nj(un):{baseLanes:pn.baseLanes|un,cachePool:null,transitions:pn.transitions},fn.memoizedState=pn,fn.childLanes=_e.childLanes&~un,e.memoizedState=mj,dn}return fn=_e.child,_e=fn.sibling,dn=Pg(fn,{mode:"visible",children:dn.children}),!(e.mode&1)&&(dn.lanes=un),dn.return=e,dn.sibling=null,_e!==null&&(un=e.deletions,un===null?(e.deletions=[_e],e.flags|=16):un.push(_e)),e.child=dn,e.memoizedState=null,dn}function qj(_e,e){return e=pj({mode:"visible",children:e},_e.mode,0,null),e.return=_e,_e.child=e}function sj(_e,e,un,dn){return dn!==null&&Jg(dn),Ug(e,_e.child,null,un),_e=qj(e,e.pendingProps.children),_e.flags|=2,e.memoizedState=null,_e}function rj(_e,e,un,dn,hn,fn,pn){if(un)return e.flags&256?(e.flags&=-257,dn=Ki(Error(p$1(422))),sj(_e,e,pn,dn)):e.memoizedState!==null?(e.child=_e.child,e.flags|=128,null):(fn=dn.fallback,hn=e.mode,dn=pj({mode:"visible",children:dn.children},hn,0,null),fn=Tg(fn,hn,pn,null),fn.flags|=2,dn.return=e,fn.return=e,dn.sibling=fn,e.child=dn,e.mode&1&&Ug(e,_e.child,null,pn),e.child.memoizedState=nj(pn),e.memoizedState=mj,fn);if(!(e.mode&1))return sj(_e,e,pn,null);if(hn.data==="$!"){if(dn=hn.nextSibling&&hn.nextSibling.dataset,dn)var mn=dn.dgst;return dn=mn,fn=Error(p$1(419)),dn=Ki(fn,dn,void 0),sj(_e,e,pn,dn)}if(mn=(pn&_e.childLanes)!==0,dh||mn){if(dn=Q$2,dn!==null){switch(pn&-pn){case 4:hn=2;break;case 16:hn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:hn=32;break;case 536870912:hn=268435456;break;default:hn=0}hn=hn&(dn.suspendedLanes|pn)?0:hn,hn!==0&&hn!==fn.retryLane&&(fn.retryLane=hn,ih(_e,hn),gi(dn,_e,hn,-1))}return tj(),dn=Ki(Error(p$1(421))),sj(_e,e,pn,dn)}return hn.data==="$?"?(e.flags|=128,e.child=_e.child,e=uj.bind(null,_e),hn._reactRetry=e,null):(_e=fn.treeContext,yg=Lf(hn.nextSibling),xg=e,I$1=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=e),e=qj(e,dn.children),e.flags|=4096,e)}function vj(_e,e,un){_e.lanes|=e;var dn=_e.alternate;dn!==null&&(dn.lanes|=e),bh(_e.return,e,un)}function wj(_e,e,un,dn,hn){var fn=_e.memoizedState;fn===null?_e.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:dn,tail:un,tailMode:hn}:(fn.isBackwards=e,fn.rendering=null,fn.renderingStartTime=0,fn.last=dn,fn.tail=un,fn.tailMode=hn)}function xj(_e,e,un){var dn=e.pendingProps,hn=dn.revealOrder,fn=dn.tail;if(Xi(_e,e,dn.children,un),dn=L$3.current,dn&2)dn=dn&1|2,e.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=e.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,un,e);else if(_e.tag===19)vj(_e,un,e);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===e)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===e)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}dn&=1}if(G$2(L$3,dn),!(e.mode&1))e.memoizedState=null;else switch(hn){case"forwards":for(un=e.child,hn=null;un!==null;)_e=un.alternate,_e!==null&&Ch(_e)===null&&(hn=un),un=un.sibling;un=hn,un===null?(hn=e.child,e.child=null):(hn=un.sibling,un.sibling=null),wj(e,!1,hn,un,fn);break;case"backwards":for(un=null,hn=e.child,e.child=null;hn!==null;){if(_e=hn.alternate,_e!==null&&Ch(_e)===null){e.child=hn;break}_e=hn.sibling,hn.sibling=un,un=hn,hn=_e}wj(e,!0,un,null,fn);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(_e,e){!(e.mode&1)&&_e!==null&&(_e.alternate=null,e.alternate=null,e.flags|=2)}function Zi(_e,e,un){if(_e!==null&&(e.dependencies=_e.dependencies),rh|=e.lanes,!(un&e.childLanes))return null;if(_e!==null&&e.child!==_e.child)throw Error(p$1(153));if(e.child!==null){for(_e=e.child,un=Pg(_e,_e.pendingProps),e.child=un,un.return=e;_e.sibling!==null;)_e=_e.sibling,un=un.sibling=Pg(_e,_e.pendingProps),un.return=e;un.sibling=null}return e.child}function yj(_e,e,un){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var dn=e.type._context,hn=e.memoizedProps.value;G$2(Wg,dn._currentValue),dn._currentValue=hn;break;case 13:if(dn=e.memoizedState,dn!==null)return dn.dehydrated!==null?(G$2(L$3,L$3.current&1),e.flags|=128,null):un&e.child.childLanes?oj(_e,e,un):(G$2(L$3,L$3.current&1),_e=Zi(_e,e,un),_e!==null?_e.sibling:null);G$2(L$3,L$3.current&1);break;case 19:if(dn=(un&e.childLanes)!==0,_e.flags&128){if(dn)return xj(_e,e,un);e.flags|=128}if(hn=e.memoizedState,hn!==null&&(hn.rendering=null,hn.tail=null,hn.lastEffect=null),G$2(L$3,L$3.current),dn)break;return null;case 22:case 23:return e.lanes=0,dj(_e,e,un)}return Zi(_e,e,un)}var zj,Aj,Bj,Cj;zj=function(_e,e){for(var un=e.child;un!==null;){if(un.tag===5||un.tag===6)_e.appendChild(un.stateNode);else if(un.tag!==4&&un.child!==null){un.child.return=un,un=un.child;continue}if(un===e)break;for(;un.sibling===null;){if(un.return===null||un.return===e)return;un=un.return}un.sibling.return=un.return,un=un.sibling}};Aj=function(){};Bj=function(_e,e,un,dn){var hn=_e.memoizedProps;if(hn!==dn){_e=e.stateNode,xh(uh.current);var fn=null;switch(un){case"input":hn=Ya(_e,hn),dn=Ya(_e,dn),fn=[];break;case"select":hn=A$1({},hn,{value:void 0}),dn=A$1({},dn,{value:void 0}),fn=[];break;case"textarea":hn=gb(_e,hn),dn=gb(_e,dn),fn=[];break;default:typeof hn.onClick!="function"&&typeof dn.onClick=="function"&&(_e.onclick=Bf)}ub(un,dn);var pn;un=null;for(yn in hn)if(!dn.hasOwnProperty(yn)&&hn.hasOwnProperty(yn)&&hn[yn]!=null)if(yn==="style"){var mn=hn[yn];for(pn in mn)mn.hasOwnProperty(pn)&&(un||(un={}),un[pn]="")}else yn!=="dangerouslySetInnerHTML"&&yn!=="children"&&yn!=="suppressContentEditableWarning"&&yn!=="suppressHydrationWarning"&&yn!=="autoFocus"&&(ea.hasOwnProperty(yn)?fn||(fn=[]):(fn=fn||[]).push(yn,null));for(yn in dn){var gn=dn[yn];if(mn=hn!=null?hn[yn]:void 0,dn.hasOwnProperty(yn)&&gn!==mn&&(gn!=null||mn!=null))if(yn==="style")if(mn){for(pn in mn)!mn.hasOwnProperty(pn)||gn&&gn.hasOwnProperty(pn)||(un||(un={}),un[pn]="");for(pn in gn)gn.hasOwnProperty(pn)&&mn[pn]!==gn[pn]&&(un||(un={}),un[pn]=gn[pn])}else un||(fn||(fn=[]),fn.push(yn,un)),un=gn;else yn==="dangerouslySetInnerHTML"?(gn=gn?gn.__html:void 0,mn=mn?mn.__html:void 0,gn!=null&&mn!==gn&&(fn=fn||[]).push(yn,gn)):yn==="children"?typeof gn!="string"&&typeof gn!="number"||(fn=fn||[]).push(yn,""+gn):yn!=="suppressContentEditableWarning"&&yn!=="suppressHydrationWarning"&&(ea.hasOwnProperty(yn)?(gn!=null&&yn==="onScroll"&&D$2("scroll",_e),fn||mn===gn||(fn=[])):(fn=fn||[]).push(yn,gn))}un&&(fn=fn||[]).push("style",un);var yn=fn;(e.updateQueue=yn)&&(e.flags|=4)}};Cj=function(_e,e,un,dn){un!==dn&&(e.flags|=4)};function Dj(_e,e){if(!I$1)switch(_e.tailMode){case"hidden":e=_e.tail;for(var un=null;e!==null;)e.alternate!==null&&(un=e),e=e.sibling;un===null?_e.tail=null:un.sibling=null;break;case"collapsed":un=_e.tail;for(var dn=null;un!==null;)un.alternate!==null&&(dn=un),un=un.sibling;dn===null?e||_e.tail===null?_e.tail=null:_e.tail.sibling=null:dn.sibling=null}}function S$1(_e){var e=_e.alternate!==null&&_e.alternate.child===_e.child,un=0,dn=0;if(e)for(var hn=_e.child;hn!==null;)un|=hn.lanes|hn.childLanes,dn|=hn.subtreeFlags&14680064,dn|=hn.flags&14680064,hn.return=_e,hn=hn.sibling;else for(hn=_e.child;hn!==null;)un|=hn.lanes|hn.childLanes,dn|=hn.subtreeFlags,dn|=hn.flags,hn.return=_e,hn=hn.sibling;return _e.subtreeFlags|=dn,_e.childLanes=un,e}function Ej(_e,e,un){var dn=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(e),null;case 1:return Zf(e.type)&&$f(),S$1(e),null;case 3:return dn=e.stateNode,zh(),E$2(Wf),E$2(H$1),Eh(),dn.pendingContext&&(dn.context=dn.pendingContext,dn.pendingContext=null),(_e===null||_e.child===null)&&(Gg(e)?e.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,e),S$1(e),null;case 5:Bh(e);var hn=xh(wh.current);if(un=e.type,_e!==null&&e.stateNode!=null)Bj(_e,e,un,dn,hn),_e.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!dn){if(e.stateNode===null)throw Error(p$1(166));return S$1(e),null}if(_e=xh(uh.current),Gg(e)){dn=e.stateNode,un=e.type;var fn=e.memoizedProps;switch(dn[Of]=e,dn[Pf]=fn,_e=(e.mode&1)!==0,un){case"dialog":D$2("cancel",dn),D$2("close",dn);break;case"iframe":case"object":case"embed":D$2("load",dn);break;case"video":case"audio":for(hn=0;hn<lf.length;hn++)D$2(lf[hn],dn);break;case"source":D$2("error",dn);break;case"img":case"image":case"link":D$2("error",dn),D$2("load",dn);break;case"details":D$2("toggle",dn);break;case"input":Za(dn,fn),D$2("invalid",dn);break;case"select":dn._wrapperState={wasMultiple:!!fn.multiple},D$2("invalid",dn);break;case"textarea":hb(dn,fn),D$2("invalid",dn)}ub(un,fn),hn=null;for(var pn in fn)if(fn.hasOwnProperty(pn)){var mn=fn[pn];pn==="children"?typeof mn=="string"?dn.textContent!==mn&&(fn.suppressHydrationWarning!==!0&&Af(dn.textContent,mn,_e),hn=["children",mn]):typeof mn=="number"&&dn.textContent!==""+mn&&(fn.suppressHydrationWarning!==!0&&Af(dn.textContent,mn,_e),hn=["children",""+mn]):ea.hasOwnProperty(pn)&&mn!=null&&pn==="onScroll"&&D$2("scroll",dn)}switch(un){case"input":Va(dn),db$1(dn,fn,!0);break;case"textarea":Va(dn),jb(dn);break;case"select":case"option":break;default:typeof fn.onClick=="function"&&(dn.onclick=Bf)}dn=hn,e.updateQueue=dn,dn!==null&&(e.flags|=4)}else{pn=hn.nodeType===9?hn:hn.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(un)),_e==="http://www.w3.org/1999/xhtml"?un==="script"?(_e=pn.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof dn.is=="string"?_e=pn.createElement(un,{is:dn.is}):(_e=pn.createElement(un),un==="select"&&(pn=_e,dn.multiple?pn.multiple=!0:dn.size&&(pn.size=dn.size))):_e=pn.createElementNS(_e,un),_e[Of]=e,_e[Pf]=dn,zj(_e,e,!1,!1),e.stateNode=_e;e:{switch(pn=vb(un,dn),un){case"dialog":D$2("cancel",_e),D$2("close",_e),hn=dn;break;case"iframe":case"object":case"embed":D$2("load",_e),hn=dn;break;case"video":case"audio":for(hn=0;hn<lf.length;hn++)D$2(lf[hn],_e);hn=dn;break;case"source":D$2("error",_e),hn=dn;break;case"img":case"image":case"link":D$2("error",_e),D$2("load",_e),hn=dn;break;case"details":D$2("toggle",_e),hn=dn;break;case"input":Za(_e,dn),hn=Ya(_e,dn),D$2("invalid",_e);break;case"option":hn=dn;break;case"select":_e._wrapperState={wasMultiple:!!dn.multiple},hn=A$1({},dn,{value:void 0}),D$2("invalid",_e);break;case"textarea":hb(_e,dn),hn=gb(_e,dn),D$2("invalid",_e);break;default:hn=dn}ub(un,hn),mn=hn;for(fn in mn)if(mn.hasOwnProperty(fn)){var gn=mn[fn];fn==="style"?sb(_e,gn):fn==="dangerouslySetInnerHTML"?(gn=gn?gn.__html:void 0,gn!=null&&nb(_e,gn)):fn==="children"?typeof gn=="string"?(un!=="textarea"||gn!=="")&&ob(_e,gn):typeof gn=="number"&&ob(_e,""+gn):fn!=="suppressContentEditableWarning"&&fn!=="suppressHydrationWarning"&&fn!=="autoFocus"&&(ea.hasOwnProperty(fn)?gn!=null&&fn==="onScroll"&&D$2("scroll",_e):gn!=null&&ta(_e,fn,gn,pn))}switch(un){case"input":Va(_e),db$1(_e,dn,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":dn.value!=null&&_e.setAttribute("value",""+Sa(dn.value));break;case"select":_e.multiple=!!dn.multiple,fn=dn.value,fn!=null?fb(_e,!!dn.multiple,fn,!1):dn.defaultValue!=null&&fb(_e,!!dn.multiple,dn.defaultValue,!0);break;default:typeof hn.onClick=="function"&&(_e.onclick=Bf)}switch(un){case"button":case"input":case"select":case"textarea":dn=!!dn.autoFocus;break e;case"img":dn=!0;break e;default:dn=!1}}dn&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$1(e),null;case 6:if(_e&&e.stateNode!=null)Cj(_e,e,_e.memoizedProps,dn);else{if(typeof dn!="string"&&e.stateNode===null)throw Error(p$1(166));if(un=xh(wh.current),xh(uh.current),Gg(e)){if(dn=e.stateNode,un=e.memoizedProps,dn[Of]=e,(fn=dn.nodeValue!==un)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(dn.nodeValue,un,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(dn.nodeValue,un,(_e.mode&1)!==0)}fn&&(e.flags|=4)}else dn=(un.nodeType===9?un:un.ownerDocument).createTextNode(dn),dn[Of]=e,e.stateNode=dn}return S$1(e),null;case 13:if(E$2(L$3),dn=e.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,fn=!1;else if(fn=Gg(e),dn!==null&&dn.dehydrated!==null){if(_e===null){if(!fn)throw Error(p$1(318));if(fn=e.memoizedState,fn=fn!==null?fn.dehydrated:null,!fn)throw Error(p$1(317));fn[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$1(e),fn=!1}else zg!==null&&(Fj(zg),zg=null),fn=!0;if(!fn)return e.flags&65536?e:null}return e.flags&128?(e.lanes=un,e):(dn=dn!==null,dn!==(_e!==null&&_e.memoizedState!==null)&&dn&&(e.child.flags|=8192,e.mode&1&&(_e===null||L$3.current&1?T$1===0&&(T$1=3):tj())),e.updateQueue!==null&&(e.flags|=4),S$1(e),null);case 4:return zh(),Aj(_e,e),_e===null&&sf(e.stateNode.containerInfo),S$1(e),null;case 10:return ah(e.type._context),S$1(e),null;case 17:return Zf(e.type)&&$f(),S$1(e),null;case 19:if(E$2(L$3),fn=e.memoizedState,fn===null)return S$1(e),null;if(dn=(e.flags&128)!==0,pn=fn.rendering,pn===null)if(dn)Dj(fn,!1);else{if(T$1!==0||_e!==null&&_e.flags&128)for(_e=e.child;_e!==null;){if(pn=Ch(_e),pn!==null){for(e.flags|=128,Dj(fn,!1),dn=pn.updateQueue,dn!==null&&(e.updateQueue=dn,e.flags|=4),e.subtreeFlags=0,dn=un,un=e.child;un!==null;)fn=un,_e=dn,fn.flags&=14680066,pn=fn.alternate,pn===null?(fn.childLanes=0,fn.lanes=_e,fn.child=null,fn.subtreeFlags=0,fn.memoizedProps=null,fn.memoizedState=null,fn.updateQueue=null,fn.dependencies=null,fn.stateNode=null):(fn.childLanes=pn.childLanes,fn.lanes=pn.lanes,fn.child=pn.child,fn.subtreeFlags=0,fn.deletions=null,fn.memoizedProps=pn.memoizedProps,fn.memoizedState=pn.memoizedState,fn.updateQueue=pn.updateQueue,fn.type=pn.type,_e=pn.dependencies,fn.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),un=un.sibling;return G$2(L$3,L$3.current&1|2),e.child}_e=_e.sibling}fn.tail!==null&&B$2()>Gj&&(e.flags|=128,dn=!0,Dj(fn,!1),e.lanes=4194304)}else{if(!dn)if(_e=Ch(pn),_e!==null){if(e.flags|=128,dn=!0,un=_e.updateQueue,un!==null&&(e.updateQueue=un,e.flags|=4),Dj(fn,!0),fn.tail===null&&fn.tailMode==="hidden"&&!pn.alternate&&!I$1)return S$1(e),null}else 2*B$2()-fn.renderingStartTime>Gj&&un!==1073741824&&(e.flags|=128,dn=!0,Dj(fn,!1),e.lanes=4194304);fn.isBackwards?(pn.sibling=e.child,e.child=pn):(un=fn.last,un!==null?un.sibling=pn:e.child=pn,fn.last=pn)}return fn.tail!==null?(e=fn.tail,fn.rendering=e,fn.tail=e.sibling,fn.renderingStartTime=B$2(),e.sibling=null,un=L$3.current,G$2(L$3,dn?un&1|2:un&1),e):(S$1(e),null);case 22:case 23:return Hj(),dn=e.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==dn&&(e.flags|=8192),dn&&e.mode&1?fj&1073741824&&(S$1(e),e.subtreeFlags&6&&(e.flags|=8192)):S$1(e),null;case 24:return null;case 25:return null}throw Error(p$1(156,e.tag))}function Ij(_e,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),_e=e.flags,_e&65536?(e.flags=_e&-65537|128,e):null;case 3:return zh(),E$2(Wf),E$2(H$1),Eh(),_e=e.flags,_e&65536&&!(_e&128)?(e.flags=_e&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E$2(L$3),_e=e.memoizedState,_e!==null&&_e.dehydrated!==null){if(e.alternate===null)throw Error(p$1(340));Ig()}return _e=e.flags,_e&65536?(e.flags=_e&-65537|128,e):null;case 19:return E$2(L$3),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$2=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(_e,e){var un=_e.ref;if(un!==null)if(typeof un=="function")try{un(null)}catch(dn){W$1(_e,e,dn)}else un.current=null}function Mj(_e,e,un){try{un()}catch(dn){W$1(_e,e,dn)}}var Nj=!1;function Oj(_e,e){if(Cf=dd,_e=Me(),Ne$1(_e)){if("selectionStart"in _e)var un={start:_e.selectionStart,end:_e.selectionEnd};else e:{un=(un=_e.ownerDocument)&&un.defaultView||window;var dn=un.getSelection&&un.getSelection();if(dn&&dn.rangeCount!==0){un=dn.anchorNode;var hn=dn.anchorOffset,fn=dn.focusNode;dn=dn.focusOffset;try{un.nodeType,fn.nodeType}catch{un=null;break e}var pn=0,mn=-1,gn=-1,yn=0,xn=0,En=_e,bn=null;t:for(;;){for(var vn;En!==un||hn!==0&&En.nodeType!==3||(mn=pn+hn),En!==fn||dn!==0&&En.nodeType!==3||(gn=pn+dn),En.nodeType===3&&(pn+=En.nodeValue.length),(vn=En.firstChild)!==null;)bn=En,En=vn;for(;;){if(En===_e)break t;if(bn===un&&++yn===hn&&(mn=pn),bn===fn&&++xn===dn&&(gn=pn),(vn=En.nextSibling)!==null)break;En=bn,bn=En.parentNode}En=vn}un=mn===-1||gn===-1?null:{start:mn,end:gn}}else un=null}un=un||{start:0,end:0}}else un=null;for(Df={focusedElem:_e,selectionRange:un},dd=!1,V$1=e;V$1!==null;)if(e=V$1,_e=e.child,(e.subtreeFlags&1028)!==0&&_e!==null)_e.return=e,V$1=_e;else for(;V$1!==null;){e=V$1;try{var Pn=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Pn!==null){var Tn=Pn.memoizedProps,In=Pn.memoizedState,Rn=e.stateNode,Sn=Rn.getSnapshotBeforeUpdate(e.elementType===e.type?Tn:Ci(e.type,Tn),In);Rn.__reactInternalSnapshotBeforeUpdate=Sn}break;case 3:var Dn=e.stateNode.containerInfo;Dn.nodeType===1?Dn.textContent="":Dn.nodeType===9&&Dn.documentElement&&Dn.removeChild(Dn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch($n){W$1(e,e.return,$n)}if(_e=e.sibling,_e!==null){_e.return=e.return,V$1=_e;break}V$1=e.return}return Pn=Nj,Nj=!1,Pn}function Pj(_e,e,un){var dn=e.updateQueue;if(dn=dn!==null?dn.lastEffect:null,dn!==null){var hn=dn=dn.next;do{if((hn.tag&_e)===_e){var fn=hn.destroy;hn.destroy=void 0,fn!==void 0&&Mj(e,un,fn)}hn=hn.next}while(hn!==dn)}}function Qj(_e,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var un=e=e.next;do{if((un.tag&_e)===_e){var dn=un.create;un.destroy=dn()}un=un.next}while(un!==e)}}function Rj(_e){var e=_e.ref;if(e!==null){var un=_e.stateNode;switch(_e.tag){case 5:_e=un;break;default:_e=un}typeof e=="function"?e(_e):e.current=_e}}function Sj(_e){var e=_e.alternate;e!==null&&(_e.alternate=null,Sj(e)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(e=_e.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,e,un){var dn=_e.tag;if(dn===5||dn===6)_e=_e.stateNode,e?un.nodeType===8?un.parentNode.insertBefore(_e,e):un.insertBefore(_e,e):(un.nodeType===8?(e=un.parentNode,e.insertBefore(_e,un)):(e=un,e.appendChild(_e)),un=un._reactRootContainer,un!=null||e.onclick!==null||(e.onclick=Bf));else if(dn!==4&&(_e=_e.child,_e!==null))for(Vj(_e,e,un),_e=_e.sibling;_e!==null;)Vj(_e,e,un),_e=_e.sibling}function Wj(_e,e,un){var dn=_e.tag;if(dn===5||dn===6)_e=_e.stateNode,e?un.insertBefore(_e,e):un.appendChild(_e);else if(dn!==4&&(_e=_e.child,_e!==null))for(Wj(_e,e,un),_e=_e.sibling;_e!==null;)Wj(_e,e,un),_e=_e.sibling}var X$2=null,Xj=!1;function Yj(_e,e,un){for(un=un.child;un!==null;)Zj(_e,e,un),un=un.sibling}function Zj(_e,e,un){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc,un)}catch{}switch(un.tag){case 5:U$2||Lj(un,e);case 6:var dn=X$2,hn=Xj;X$2=null,Yj(_e,e,un),X$2=dn,Xj=hn,X$2!==null&&(Xj?(_e=X$2,un=un.stateNode,_e.nodeType===8?_e.parentNode.removeChild(un):_e.removeChild(un)):X$2.removeChild(un.stateNode));break;case 18:X$2!==null&&(Xj?(_e=X$2,un=un.stateNode,_e.nodeType===8?Kf(_e.parentNode,un):_e.nodeType===1&&Kf(_e,un),bd(_e)):Kf(X$2,un.stateNode));break;case 4:dn=X$2,hn=Xj,X$2=un.stateNode.containerInfo,Xj=!0,Yj(_e,e,un),X$2=dn,Xj=hn;break;case 0:case 11:case 14:case 15:if(!U$2&&(dn=un.updateQueue,dn!==null&&(dn=dn.lastEffect,dn!==null))){hn=dn=dn.next;do{var fn=hn,pn=fn.destroy;fn=fn.tag,pn!==void 0&&(fn&2||fn&4)&&Mj(un,e,pn),hn=hn.next}while(hn!==dn)}Yj(_e,e,un);break;case 1:if(!U$2&&(Lj(un,e),dn=un.stateNode,typeof dn.componentWillUnmount=="function"))try{dn.props=un.memoizedProps,dn.state=un.memoizedState,dn.componentWillUnmount()}catch(mn){W$1(un,e,mn)}Yj(_e,e,un);break;case 21:Yj(_e,e,un);break;case 22:un.mode&1?(U$2=(dn=U$2)||un.memoizedState!==null,Yj(_e,e,un),U$2=dn):Yj(_e,e,un);break;default:Yj(_e,e,un)}}function ak(_e){var e=_e.updateQueue;if(e!==null){_e.updateQueue=null;var un=_e.stateNode;un===null&&(un=_e.stateNode=new Kj),e.forEach(function(dn){var hn=bk.bind(null,_e,dn);un.has(dn)||(un.add(dn),dn.then(hn,hn))})}}function ck(_e,e){var un=e.deletions;if(un!==null)for(var dn=0;dn<un.length;dn++){var hn=un[dn];try{var fn=_e,pn=e,mn=pn;e:for(;mn!==null;){switch(mn.tag){case 5:X$2=mn.stateNode,Xj=!1;break e;case 3:X$2=mn.stateNode.containerInfo,Xj=!0;break e;case 4:X$2=mn.stateNode.containerInfo,Xj=!0;break e}mn=mn.return}if(X$2===null)throw Error(p$1(160));Zj(fn,pn,hn),X$2=null,Xj=!1;var gn=hn.alternate;gn!==null&&(gn.return=null),hn.return=null}catch(yn){W$1(hn,e,yn)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,_e),e=e.sibling}function dk(_e,e){var un=_e.alternate,dn=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck(e,_e),ek(_e),dn&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(Tn){W$1(_e,_e.return,Tn)}try{Pj(5,_e,_e.return)}catch(Tn){W$1(_e,_e.return,Tn)}}break;case 1:ck(e,_e),ek(_e),dn&512&&un!==null&&Lj(un,un.return);break;case 5:if(ck(e,_e),ek(_e),dn&512&&un!==null&&Lj(un,un.return),_e.flags&32){var hn=_e.stateNode;try{ob(hn,"")}catch(Tn){W$1(_e,_e.return,Tn)}}if(dn&4&&(hn=_e.stateNode,hn!=null)){var fn=_e.memoizedProps,pn=un!==null?un.memoizedProps:fn,mn=_e.type,gn=_e.updateQueue;if(_e.updateQueue=null,gn!==null)try{mn==="input"&&fn.type==="radio"&&fn.name!=null&&ab(hn,fn),vb(mn,pn);var yn=vb(mn,fn);for(pn=0;pn<gn.length;pn+=2){var xn=gn[pn],En=gn[pn+1];xn==="style"?sb(hn,En):xn==="dangerouslySetInnerHTML"?nb(hn,En):xn==="children"?ob(hn,En):ta(hn,xn,En,yn)}switch(mn){case"input":bb(hn,fn);break;case"textarea":ib(hn,fn);break;case"select":var bn=hn._wrapperState.wasMultiple;hn._wrapperState.wasMultiple=!!fn.multiple;var vn=fn.value;vn!=null?fb(hn,!!fn.multiple,vn,!1):bn!==!!fn.multiple&&(fn.defaultValue!=null?fb(hn,!!fn.multiple,fn.defaultValue,!0):fb(hn,!!fn.multiple,fn.multiple?[]:"",!1))}hn[Pf]=fn}catch(Tn){W$1(_e,_e.return,Tn)}}break;case 6:if(ck(e,_e),ek(_e),dn&4){if(_e.stateNode===null)throw Error(p$1(162));hn=_e.stateNode,fn=_e.memoizedProps;try{hn.nodeValue=fn}catch(Tn){W$1(_e,_e.return,Tn)}}break;case 3:if(ck(e,_e),ek(_e),dn&4&&un!==null&&un.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(Tn){W$1(_e,_e.return,Tn)}break;case 4:ck(e,_e),ek(_e);break;case 13:ck(e,_e),ek(_e),hn=_e.child,hn.flags&8192&&(fn=hn.memoizedState!==null,hn.stateNode.isHidden=fn,!fn||hn.alternate!==null&&hn.alternate.memoizedState!==null||(fk=B$2())),dn&4&&ak(_e);break;case 22:if(xn=un!==null&&un.memoizedState!==null,_e.mode&1?(U$2=(yn=U$2)||xn,ck(e,_e),U$2=yn):ck(e,_e),ek(_e),dn&8192){if(yn=_e.memoizedState!==null,(_e.stateNode.isHidden=yn)&&!xn&&_e.mode&1)for(V$1=_e,xn=_e.child;xn!==null;){for(En=V$1=xn;V$1!==null;){switch(bn=V$1,vn=bn.child,bn.tag){case 0:case 11:case 14:case 15:Pj(4,bn,bn.return);break;case 1:Lj(bn,bn.return);var Pn=bn.stateNode;if(typeof Pn.componentWillUnmount=="function"){dn=bn,un=bn.return;try{e=dn,Pn.props=e.memoizedProps,Pn.state=e.memoizedState,Pn.componentWillUnmount()}catch(Tn){W$1(dn,un,Tn)}}break;case 5:Lj(bn,bn.return);break;case 22:if(bn.memoizedState!==null){gk(En);continue}}vn!==null?(vn.return=bn,V$1=vn):gk(En)}xn=xn.sibling}e:for(xn=null,En=_e;;){if(En.tag===5){if(xn===null){xn=En;try{hn=En.stateNode,yn?(fn=hn.style,typeof fn.setProperty=="function"?fn.setProperty("display","none","important"):fn.display="none"):(mn=En.stateNode,gn=En.memoizedProps.style,pn=gn!=null&&gn.hasOwnProperty("display")?gn.display:null,mn.style.display=rb("display",pn))}catch(Tn){W$1(_e,_e.return,Tn)}}}else if(En.tag===6){if(xn===null)try{En.stateNode.nodeValue=yn?"":En.memoizedProps}catch(Tn){W$1(_e,_e.return,Tn)}}else if((En.tag!==22&&En.tag!==23||En.memoizedState===null||En===_e)&&En.child!==null){En.child.return=En,En=En.child;continue}if(En===_e)break e;for(;En.sibling===null;){if(En.return===null||En.return===_e)break e;xn===En&&(xn=null),En=En.return}xn===En&&(xn=null),En.sibling.return=En.return,En=En.sibling}}break;case 19:ck(e,_e),ek(_e),dn&4&&ak(_e);break;case 21:break;default:ck(e,_e),ek(_e)}}function ek(_e){var e=_e.flags;if(e&2){try{e:{for(var un=_e.return;un!==null;){if(Tj(un)){var dn=un;break e}un=un.return}throw Error(p$1(160))}switch(dn.tag){case 5:var hn=dn.stateNode;dn.flags&32&&(ob(hn,""),dn.flags&=-33);var fn=Uj(_e);Wj(_e,fn,hn);break;case 3:case 4:var pn=dn.stateNode.containerInfo,mn=Uj(_e);Vj(_e,mn,pn);break;default:throw Error(p$1(161))}}catch(gn){W$1(_e,_e.return,gn)}_e.flags&=-3}e&4096&&(_e.flags&=-4097)}function hk(_e,e,un){V$1=_e,ik(_e)}function ik(_e,e,un){for(var dn=(_e.mode&1)!==0;V$1!==null;){var hn=V$1,fn=hn.child;if(hn.tag===22&&dn){var pn=hn.memoizedState!==null||Jj;if(!pn){var mn=hn.alternate,gn=mn!==null&&mn.memoizedState!==null||U$2;mn=Jj;var yn=U$2;if(Jj=pn,(U$2=gn)&&!yn)for(V$1=hn;V$1!==null;)pn=V$1,gn=pn.child,pn.tag===22&&pn.memoizedState!==null?jk(hn):gn!==null?(gn.return=pn,V$1=gn):jk(hn);for(;fn!==null;)V$1=fn,ik(fn),fn=fn.sibling;V$1=hn,Jj=mn,U$2=yn}kk(_e)}else hn.subtreeFlags&8772&&fn!==null?(fn.return=hn,V$1=fn):kk(_e)}}function kk(_e){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var un=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U$2||Qj(5,e);break;case 1:var dn=e.stateNode;if(e.flags&4&&!U$2)if(un===null)dn.componentDidMount();else{var hn=e.elementType===e.type?un.memoizedProps:Ci(e.type,un.memoizedProps);dn.componentDidUpdate(hn,un.memoizedState,dn.__reactInternalSnapshotBeforeUpdate)}var fn=e.updateQueue;fn!==null&&sh(e,fn,dn);break;case 3:var pn=e.updateQueue;if(pn!==null){if(un=null,e.child!==null)switch(e.child.tag){case 5:un=e.child.stateNode;break;case 1:un=e.child.stateNode}sh(e,pn,un)}break;case 5:var mn=e.stateNode;if(un===null&&e.flags&4){un=mn;var gn=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":gn.autoFocus&&un.focus();break;case"img":gn.src&&(un.src=gn.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var yn=e.alternate;if(yn!==null){var xn=yn.memoizedState;if(xn!==null){var En=xn.dehydrated;En!==null&&bd(En)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$2||e.flags&512&&Rj(e)}catch(bn){W$1(e,e.return,bn)}}if(e===_e){V$1=null;break}if(un=e.sibling,un!==null){un.return=e.return,V$1=un;break}V$1=e.return}}function gk(_e){for(;V$1!==null;){var e=V$1;if(e===_e){V$1=null;break}var un=e.sibling;if(un!==null){un.return=e.return,V$1=un;break}V$1=e.return}}function jk(_e){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var un=e.return;try{Qj(4,e)}catch(gn){W$1(e,un,gn)}break;case 1:var dn=e.stateNode;if(typeof dn.componentDidMount=="function"){var hn=e.return;try{dn.componentDidMount()}catch(gn){W$1(e,hn,gn)}}var fn=e.return;try{Rj(e)}catch(gn){W$1(e,fn,gn)}break;case 5:var pn=e.return;try{Rj(e)}catch(gn){W$1(e,pn,gn)}}}catch(gn){W$1(e,e.return,gn)}if(e===_e){V$1=null;break}var mn=e.sibling;if(mn!==null){mn.return=e.return,V$1=mn;break}V$1=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$2=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$2():Ak!==-1?Ak:Ak=B$2()}function yi(_e){return _e.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C$1,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,e,un,dn){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(_e,un,dn),(!(K$1&2)||_e!==Q$2)&&(_e===Q$2&&(!(K$1&2)&&(qk|=un),T$1===4&&Ck(_e,Z$1)),Dk(_e,dn),un===1&&K$1===0&&!(e.mode&1)&&(Gj=B$2()+500,fg&&jg()))}function Dk(_e,e){var un=_e.callbackNode;wc(_e,e);var dn=uc(_e,_e===Q$2?Z$1:0);if(dn===0)un!==null&&bc(un),_e.callbackNode=null,_e.callbackPriority=0;else if(e=dn&-dn,_e.callbackPriority!==e){if(un!=null&&bc(un),e===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K$1&6)&&jg()}),un=null;else{switch(Dc(dn)){case 1:un=fc;break;case 4:un=gc;break;case 16:un=hc;break;case 536870912:un=jc;break;default:un=hc}un=Fk(un,Gk.bind(null,_e))}_e.callbackPriority=e,_e.callbackNode=un}}function Gk(_e,e){if(Ak=-1,Bk=0,K$1&6)throw Error(p$1(327));var un=_e.callbackNode;if(Hk()&&_e.callbackNode!==un)return null;var dn=uc(_e,_e===Q$2?Z$1:0);if(dn===0)return null;if(dn&30||dn&_e.expiredLanes||e)e=Ik(_e,dn);else{e=dn;var hn=K$1;K$1|=2;var fn=Jk();(Q$2!==_e||Z$1!==e)&&(uk=null,Gj=B$2()+500,Kk(_e,e));do try{Lk();break}catch(mn){Mk(_e,mn)}while(!0);$g(),mk.current=fn,K$1=hn,Y$1!==null?e=0:(Q$2=null,Z$1=0,e=T$1)}if(e!==0){if(e===2&&(hn=xc(_e),hn!==0&&(dn=hn,e=Nk(_e,hn))),e===1)throw un=pk,Kk(_e,0),Ck(_e,dn),Dk(_e,B$2()),un;if(e===6)Ck(_e,dn);else{if(hn=_e.current.alternate,!(dn&30)&&!Ok(hn)&&(e=Ik(_e,dn),e===2&&(fn=xc(_e),fn!==0&&(dn=fn,e=Nk(_e,fn))),e===1))throw un=pk,Kk(_e,0),Ck(_e,dn),Dk(_e,B$2()),un;switch(_e.finishedWork=hn,_e.finishedLanes=dn,e){case 0:case 1:throw Error(p$1(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,dn),(dn&130023424)===dn&&(e=fk+500-B$2(),10<e)){if(uc(_e,0)!==0)break;if(hn=_e.suspendedLanes,(hn&dn)!==dn){R$1(),_e.pingedLanes|=_e.suspendedLanes&hn;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),e);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,dn),(dn&4194240)===dn)break;for(e=_e.eventTimes,hn=-1;0<dn;){var pn=31-oc(dn);fn=1<<pn,pn=e[pn],pn>hn&&(hn=pn),dn&=~fn}if(dn=hn,dn=B$2()-dn,dn=(120>dn?120:480>dn?480:1080>dn?1080:1920>dn?1920:3e3>dn?3e3:4320>dn?4320:1960*lk(dn/1960))-dn,10<dn){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),dn);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(_e,B$2()),_e.callbackNode===un?Gk.bind(null,_e):null}function Nk(_e,e){var un=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,e).flags|=256),_e=Ik(_e,e),_e!==2&&(e=tk,tk=un,e!==null&&Fj(e)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var e=_e;;){if(e.flags&16384){var un=e.updateQueue;if(un!==null&&(un=un.stores,un!==null))for(var dn=0;dn<un.length;dn++){var hn=un[dn],fn=hn.getSnapshot;hn=hn.value;try{if(!He(fn(),hn))return!1}catch{return!1}}}if(un=e.child,e.subtreeFlags&16384&&un!==null)un.return=e,e=un;else{if(e===_e)break;for(;e.sibling===null;){if(e.return===null||e.return===_e)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(_e,e){for(e&=~rk,e&=~qk,_e.suspendedLanes|=e,_e.pingedLanes&=~e,_e=_e.expirationTimes;0<e;){var un=31-oc(e),dn=1<<un;_e[un]=-1,e&=~dn}}function Ek(_e){if(K$1&6)throw Error(p$1(327));Hk();var e=uc(_e,0);if(!(e&1))return Dk(_e,B$2()),null;var un=Ik(_e,e);if(_e.tag!==0&&un===2){var dn=xc(_e);dn!==0&&(e=dn,un=Nk(_e,dn))}if(un===1)throw un=pk,Kk(_e,0),Ck(_e,e),Dk(_e,B$2()),un;if(un===6)throw Error(p$1(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=e,Pk(_e,tk,uk),Dk(_e,B$2()),null}function Qk(_e,e){var un=K$1;K$1|=1;try{return _e(e)}finally{K$1=un,K$1===0&&(Gj=B$2()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var e=K$1;K$1|=1;var un=ok.transition,dn=C$1;try{if(ok.transition=null,C$1=1,_e)return _e()}finally{C$1=dn,ok.transition=un,K$1=e,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(_e,e){_e.finishedWork=null,_e.finishedLanes=0;var un=_e.timeoutHandle;if(un!==-1&&(_e.timeoutHandle=-1,Gf(un)),Y$1!==null)for(un=Y$1.return;un!==null;){var dn=un;switch(wg(dn),dn.tag){case 1:dn=dn.type.childContextTypes,dn!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$1),Eh();break;case 5:Bh(dn);break;case 4:zh();break;case 13:E$2(L$3);break;case 19:E$2(L$3);break;case 10:ah(dn.type._context);break;case 22:case 23:Hj()}un=un.return}if(Q$2=_e,Y$1=_e=Pg(_e.current,null),Z$1=fj=e,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(un=fh[e],dn=un.interleaved,dn!==null){un.interleaved=null;var hn=dn.next,fn=un.pending;if(fn!==null){var pn=fn.next;fn.next=hn,dn.next=pn}un.pending=dn}fh=null}return _e}function Mk(_e,e){do{var un=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var dn=M$2.memoizedState;dn!==null;){var hn=dn.queue;hn!==null&&(hn.pending=null),dn=dn.next}Ih=!1}if(Hh=0,O$2=N$2=M$2=null,Jh=!1,Kh=0,nk.current=null,un===null||un.return===null){T$1=1,pk=e,Y$1=null;break}e:{var fn=_e,pn=un.return,mn=un,gn=e;if(e=Z$1,mn.flags|=32768,gn!==null&&typeof gn=="object"&&typeof gn.then=="function"){var yn=gn,xn=mn,En=xn.tag;if(!(xn.mode&1)&&(En===0||En===11||En===15)){var bn=xn.alternate;bn?(xn.updateQueue=bn.updateQueue,xn.memoizedState=bn.memoizedState,xn.lanes=bn.lanes):(xn.updateQueue=null,xn.memoizedState=null)}var vn=Ui(pn);if(vn!==null){vn.flags&=-257,Vi(vn,pn,mn,fn,e),vn.mode&1&&Si(fn,yn,e),e=vn,gn=yn;var Pn=e.updateQueue;if(Pn===null){var Tn=new Set;Tn.add(gn),e.updateQueue=Tn}else Pn.add(gn);break e}else{if(!(e&1)){Si(fn,yn,e),tj();break e}gn=Error(p$1(426))}}else if(I$1&&mn.mode&1){var In=Ui(pn);if(In!==null){!(In.flags&65536)&&(In.flags|=256),Vi(In,pn,mn,fn,e),Jg(Ji(gn,mn));break e}}fn=gn=Ji(gn,mn),T$1!==4&&(T$1=2),sk===null?sk=[fn]:sk.push(fn),fn=pn;do{switch(fn.tag){case 3:fn.flags|=65536,e&=-e,fn.lanes|=e;var Rn=Ni(fn,gn,e);ph(fn,Rn);break e;case 1:mn=gn;var Sn=fn.type,Dn=fn.stateNode;if(!(fn.flags&128)&&(typeof Sn.getDerivedStateFromError=="function"||Dn!==null&&typeof Dn.componentDidCatch=="function"&&(Ri===null||!Ri.has(Dn)))){fn.flags|=65536,e&=-e,fn.lanes|=e;var $n=Qi(fn,mn,e);ph(fn,$n);break e}}fn=fn.return}while(fn!==null)}Sk(un)}catch(Fn){e=Fn,Y$1===un&&un!==null&&(Y$1=un=un.return);continue}break}while(!0)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$2===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$2,Z$1)}function Ik(_e,e){var un=K$1;K$1|=2;var dn=Jk();(Q$2!==_e||Z$1!==e)&&(uk=null,Kk(_e,e));do try{Tk();break}catch(hn){Mk(_e,hn)}while(!0);if($g(),K$1=un,mk.current=dn,Y$1!==null)throw Error(p$1(261));return Q$2=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(_e){var e=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,e===null?Sk(_e):Y$1=e,nk.current=null}function Sk(_e){var e=_e;do{var un=e.alternate;if(_e=e.return,e.flags&32768){if(un=Ij(un,e),un!==null){un.flags&=32767,Y$1=un;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$1=6,Y$1=null;return}}else if(un=Ej(un,e,fj),un!==null){Y$1=un;return}if(e=e.sibling,e!==null){Y$1=e;return}Y$1=e=_e}while(e!==null);T$1===0&&(T$1=5)}function Pk(_e,e,un){var dn=C$1,hn=ok.transition;try{ok.transition=null,C$1=1,Wk(_e,e,un,dn)}finally{ok.transition=hn,C$1=dn}return null}function Wk(_e,e,un,dn){do Hk();while(wk!==null);if(K$1&6)throw Error(p$1(327));un=_e.finishedWork;var hn=_e.finishedLanes;if(un===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,un===_e.current)throw Error(p$1(177));_e.callbackNode=null,_e.callbackPriority=0;var fn=un.lanes|un.childLanes;if(Bc(_e,fn),_e===Q$2&&(Y$1=Q$2=null,Z$1=0),!(un.subtreeFlags&2064)&&!(un.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),fn=(un.flags&15990)!==0,un.subtreeFlags&15990||fn){fn=ok.transition,ok.transition=null;var pn=C$1;C$1=1;var mn=K$1;K$1|=4,nk.current=null,Oj(_e,un),dk(un,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=un,hk(un),dc(),K$1=mn,C$1=pn,ok.transition=fn}else _e.current=un;if(vk&&(vk=!1,wk=_e,xk=hn),fn=_e.pendingLanes,fn===0&&(Ri=null),mc(un.stateNode),Dk(_e,B$2()),e!==null)for(dn=_e.onRecoverableError,un=0;un<e.length;un++)hn=e[un],dn(hn.value,{componentStack:hn.stack,digest:hn.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),fn=_e.pendingLanes,fn&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),e=ok.transition,un=C$1;try{if(ok.transition=null,C$1=16>_e?16:_e,wk===null)var dn=!1;else{if(_e=wk,wk=null,xk=0,K$1&6)throw Error(p$1(331));var hn=K$1;for(K$1|=4,V$1=_e.current;V$1!==null;){var fn=V$1,pn=fn.child;if(V$1.flags&16){var mn=fn.deletions;if(mn!==null){for(var gn=0;gn<mn.length;gn++){var yn=mn[gn];for(V$1=yn;V$1!==null;){var xn=V$1;switch(xn.tag){case 0:case 11:case 15:Pj(8,xn,fn)}var En=xn.child;if(En!==null)En.return=xn,V$1=En;else for(;V$1!==null;){xn=V$1;var bn=xn.sibling,vn=xn.return;if(Sj(xn),xn===yn){V$1=null;break}if(bn!==null){bn.return=vn,V$1=bn;break}V$1=vn}}}var Pn=fn.alternate;if(Pn!==null){var Tn=Pn.child;if(Tn!==null){Pn.child=null;do{var In=Tn.sibling;Tn.sibling=null,Tn=In}while(Tn!==null)}}V$1=fn}}if(fn.subtreeFlags&2064&&pn!==null)pn.return=fn,V$1=pn;else e:for(;V$1!==null;){if(fn=V$1,fn.flags&2048)switch(fn.tag){case 0:case 11:case 15:Pj(9,fn,fn.return)}var Rn=fn.sibling;if(Rn!==null){Rn.return=fn.return,V$1=Rn;break e}V$1=fn.return}}var Sn=_e.current;for(V$1=Sn;V$1!==null;){pn=V$1;var Dn=pn.child;if(pn.subtreeFlags&2064&&Dn!==null)Dn.return=pn,V$1=Dn;else e:for(pn=Sn;V$1!==null;){if(mn=V$1,mn.flags&2048)try{switch(mn.tag){case 0:case 11:case 15:Qj(9,mn)}}catch(Fn){W$1(mn,mn.return,Fn)}if(mn===pn){V$1=null;break e}var $n=mn.sibling;if($n!==null){$n.return=mn.return,V$1=$n;break e}V$1=mn.return}}if(K$1=hn,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc,_e)}catch{}dn=!0}return dn}finally{C$1=un,ok.transition=e}}return!1}function Xk(_e,e,un){e=Ji(un,e),e=Ni(_e,e,1),_e=nh(_e,e,1),e=R$1(),_e!==null&&(Ac(_e,1,e),Dk(_e,e))}function W$1(_e,e,un){if(_e.tag===3)Xk(_e,_e,un);else for(;e!==null;){if(e.tag===3){Xk(e,_e,un);break}else if(e.tag===1){var dn=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof dn.componentDidCatch=="function"&&(Ri===null||!Ri.has(dn))){_e=Ji(un,_e),_e=Qi(e,_e,1),e=nh(e,_e,1),_e=R$1(),e!==null&&(Ac(e,1,_e),Dk(e,_e));break}}e=e.return}}function Ti(_e,e,un){var dn=_e.pingCache;dn!==null&&dn.delete(e),e=R$1(),_e.pingedLanes|=_e.suspendedLanes&un,Q$2===_e&&(Z$1&un)===un&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$2()-fk?Kk(_e,0):rk|=un),Dk(_e,e)}function Yk(_e,e){e===0&&(_e.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var un=R$1();_e=ih(_e,e),_e!==null&&(Ac(_e,e,un),Dk(_e,un))}function uj(_e){var e=_e.memoizedState,un=0;e!==null&&(un=e.retryLane),Yk(_e,un)}function bk(_e,e){var un=0;switch(_e.tag){case 13:var dn=_e.stateNode,hn=_e.memoizedState;hn!==null&&(un=hn.retryLane);break;case 19:dn=_e.stateNode;break;default:throw Error(p$1(314))}dn!==null&&dn.delete(e),Yk(_e,un)}var Vk;Vk=function(_e,e,un){if(_e!==null)if(_e.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&un)&&!(e.flags&128))return dh=!1,yj(_e,e,un);dh=!!(_e.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var dn=e.type;ij(_e,e),_e=e.pendingProps;var hn=Yf(e,H$1.current);ch(e,un),hn=Nh(null,e,dn,_e,hn,un);var fn=Sh();return e.flags|=1,typeof hn=="object"&&hn!==null&&typeof hn.render=="function"&&hn.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(dn)?(fn=!0,cg(e)):fn=!1,e.memoizedState=hn.state!==null&&hn.state!==void 0?hn.state:null,kh(e),hn.updater=Ei,e.stateNode=hn,hn._reactInternals=e,Ii(e,dn,_e,un),e=jj(null,e,dn,!0,fn,un)):(e.tag=0,I$1&&fn&&vg(e),Xi(null,e,hn,un),e=e.child),e;case 16:dn=e.elementType;e:{switch(ij(_e,e),_e=e.pendingProps,hn=dn._init,dn=hn(dn._payload),e.type=dn,hn=e.tag=Zk(dn),_e=Ci(dn,_e),hn){case 0:e=cj(null,e,dn,_e,un);break e;case 1:e=hj(null,e,dn,_e,un);break e;case 11:e=Yi(null,e,dn,_e,un);break e;case 14:e=$i(null,e,dn,Ci(dn.type,_e),un);break e}throw Error(p$1(306,dn,""))}return e;case 0:return dn=e.type,hn=e.pendingProps,hn=e.elementType===dn?hn:Ci(dn,hn),cj(_e,e,dn,hn,un);case 1:return dn=e.type,hn=e.pendingProps,hn=e.elementType===dn?hn:Ci(dn,hn),hj(_e,e,dn,hn,un);case 3:e:{if(kj(e),_e===null)throw Error(p$1(387));dn=e.pendingProps,fn=e.memoizedState,hn=fn.element,lh(_e,e),qh(e,dn,null,un);var pn=e.memoizedState;if(dn=pn.element,fn.isDehydrated)if(fn={element:dn,isDehydrated:!1,cache:pn.cache,pendingSuspenseBoundaries:pn.pendingSuspenseBoundaries,transitions:pn.transitions},e.updateQueue.baseState=fn,e.memoizedState=fn,e.flags&256){hn=Ji(Error(p$1(423)),e),e=lj(_e,e,dn,un,hn);break e}else if(dn!==hn){hn=Ji(Error(p$1(424)),e),e=lj(_e,e,dn,un,hn);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,un=Vg(e,null,dn,un),e.child=un;un;)un.flags=un.flags&-3|4096,un=un.sibling;else{if(Ig(),dn===hn){e=Zi(_e,e,un);break e}Xi(_e,e,dn,un)}e=e.child}return e;case 5:return Ah(e),_e===null&&Eg(e),dn=e.type,hn=e.pendingProps,fn=_e!==null?_e.memoizedProps:null,pn=hn.children,Ef(dn,hn)?pn=null:fn!==null&&Ef(dn,fn)&&(e.flags|=32),gj(_e,e),Xi(_e,e,pn,un),e.child;case 6:return _e===null&&Eg(e),null;case 13:return oj(_e,e,un);case 4:return yh(e,e.stateNode.containerInfo),dn=e.pendingProps,_e===null?e.child=Ug(e,null,dn,un):Xi(_e,e,dn,un),e.child;case 11:return dn=e.type,hn=e.pendingProps,hn=e.elementType===dn?hn:Ci(dn,hn),Yi(_e,e,dn,hn,un);case 7:return Xi(_e,e,e.pendingProps,un),e.child;case 8:return Xi(_e,e,e.pendingProps.children,un),e.child;case 12:return Xi(_e,e,e.pendingProps.children,un),e.child;case 10:e:{if(dn=e.type._context,hn=e.pendingProps,fn=e.memoizedProps,pn=hn.value,G$2(Wg,dn._currentValue),dn._currentValue=pn,fn!==null)if(He(fn.value,pn)){if(fn.children===hn.children&&!Wf.current){e=Zi(_e,e,un);break e}}else for(fn=e.child,fn!==null&&(fn.return=e);fn!==null;){var mn=fn.dependencies;if(mn!==null){pn=fn.child;for(var gn=mn.firstContext;gn!==null;){if(gn.context===dn){if(fn.tag===1){gn=mh(-1,un&-un),gn.tag=2;var yn=fn.updateQueue;if(yn!==null){yn=yn.shared;var xn=yn.pending;xn===null?gn.next=gn:(gn.next=xn.next,xn.next=gn),yn.pending=gn}}fn.lanes|=un,gn=fn.alternate,gn!==null&&(gn.lanes|=un),bh(fn.return,un,e),mn.lanes|=un;break}gn=gn.next}}else if(fn.tag===10)pn=fn.type===e.type?null:fn.child;else if(fn.tag===18){if(pn=fn.return,pn===null)throw Error(p$1(341));pn.lanes|=un,mn=pn.alternate,mn!==null&&(mn.lanes|=un),bh(pn,un,e),pn=fn.sibling}else pn=fn.child;if(pn!==null)pn.return=fn;else for(pn=fn;pn!==null;){if(pn===e){pn=null;break}if(fn=pn.sibling,fn!==null){fn.return=pn.return,pn=fn;break}pn=pn.return}fn=pn}Xi(_e,e,hn.children,un),e=e.child}return e;case 9:return hn=e.type,dn=e.pendingProps.children,ch(e,un),hn=eh(hn),dn=dn(hn),e.flags|=1,Xi(_e,e,dn,un),e.child;case 14:return dn=e.type,hn=Ci(dn,e.pendingProps),hn=Ci(dn.type,hn),$i(_e,e,dn,hn,un);case 15:return bj(_e,e,e.type,e.pendingProps,un);case 17:return dn=e.type,hn=e.pendingProps,hn=e.elementType===dn?hn:Ci(dn,hn),ij(_e,e),e.tag=1,Zf(dn)?(_e=!0,cg(e)):_e=!1,ch(e,un),Gi(e,dn,hn),Ii(e,dn,hn,un),jj(null,e,dn,!0,_e,un);case 19:return xj(_e,e,un);case 22:return dj(_e,e,un)}throw Error(p$1(156,e.tag))};function Fk(_e,e){return ac(_e,e)}function $k(_e,e,un,dn){this.tag=_e,this.key=un,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=dn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,e,un,dn){return new $k(_e,e,un,dn)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,e){var un=_e.alternate;return un===null?(un=Bg(_e.tag,e,_e.key,_e.mode),un.elementType=_e.elementType,un.type=_e.type,un.stateNode=_e.stateNode,un.alternate=_e,_e.alternate=un):(un.pendingProps=e,un.type=_e.type,un.flags=0,un.subtreeFlags=0,un.deletions=null),un.flags=_e.flags&14680064,un.childLanes=_e.childLanes,un.lanes=_e.lanes,un.child=_e.child,un.memoizedProps=_e.memoizedProps,un.memoizedState=_e.memoizedState,un.updateQueue=_e.updateQueue,e=_e.dependencies,un.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},un.sibling=_e.sibling,un.index=_e.index,un.ref=_e.ref,un}function Rg(_e,e,un,dn,hn,fn){var pn=2;if(dn=_e,typeof _e=="function")aj(_e)&&(pn=1);else if(typeof _e=="string")pn=5;else e:switch(_e){case ya:return Tg(un.children,hn,fn,e);case za:pn=8,hn|=8;break;case Aa:return _e=Bg(12,un,e,hn|2),_e.elementType=Aa,_e.lanes=fn,_e;case Ea:return _e=Bg(13,un,e,hn),_e.elementType=Ea,_e.lanes=fn,_e;case Fa:return _e=Bg(19,un,e,hn),_e.elementType=Fa,_e.lanes=fn,_e;case Ia:return pj(un,hn,fn,e);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:pn=10;break e;case Ca:pn=9;break e;case Da:pn=11;break e;case Ga:pn=14;break e;case Ha:pn=16,dn=null;break e}throw Error(p$1(130,_e==null?_e:typeof _e,""))}return e=Bg(pn,un,e,hn),e.elementType=_e,e.type=dn,e.lanes=fn,e}function Tg(_e,e,un,dn){return _e=Bg(7,_e,dn,e),_e.lanes=un,_e}function pj(_e,e,un,dn){return _e=Bg(22,_e,dn,e),_e.elementType=Ia,_e.lanes=un,_e.stateNode={isHidden:!1},_e}function Qg(_e,e,un){return _e=Bg(6,_e,null,e),_e.lanes=un,_e}function Sg(_e,e,un){return e=Bg(4,_e.children!==null?_e.children:[],_e.key,e),e.lanes=un,e.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},e}function al(_e,e,un,dn,hn){this.tag=e,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=dn,this.onRecoverableError=hn,this.mutableSourceEagerHydrationData=null}function bl(_e,e,un,dn,hn,fn,pn,mn,gn){return _e=new al(_e,e,un,mn,gn),e===1?(e=1,fn===!0&&(e|=8)):e=0,fn=Bg(3,null,null,e),_e.current=fn,fn.stateNode=_e,fn.memoizedState={element:dn,isDehydrated:un,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(fn),_e}function cl(_e,e,un){var dn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:dn==null?null:""+dn,children:_e,containerInfo:e,implementation:un}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$1(170));var e=_e;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p$1(171))}if(_e.tag===1){var un=_e.type;if(Zf(un))return bg(_e,un,e)}return e}function el(_e,e,un,dn,hn,fn,pn,mn,gn){return _e=bl(un,dn,!0,_e,hn,fn,pn,mn,gn),_e.context=dl(null),un=_e.current,dn=R$1(),hn=yi(un),fn=mh(dn,hn),fn.callback=e??null,nh(un,fn,hn),_e.current.lanes=hn,Ac(_e,hn,dn),Dk(_e,dn),_e}function fl$1(_e,e,un,dn){var hn=e.current,fn=R$1(),pn=yi(hn);return un=dl(un),e.context===null?e.context=un:e.pendingContext=un,e=mh(fn,pn),e.payload={element:_e},dn=dn===void 0?null:dn,dn!==null&&(e.callback=dn),_e=nh(hn,e,pn),_e!==null&&(gi(_e,hn,pn,fn),oh(_e,hn,pn)),pn}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,e){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var un=_e.retryLane;_e.retryLane=un!==0&&un<e?un:e}}function il(_e,e){hl(_e,e),(_e=_e.alternate)&&hl(_e,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var e=this._internalRoot;if(e===null)throw Error(p$1(409));fl$1(_e,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var e=_e.containerInfo;Rk(function(){fl$1(null,_e,null,null)}),e[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var e=Hc();_e={blockedOn:null,target:_e,priority:e};for(var un=0;un<Qc.length&&e!==0&&e<Qc[un].priority;un++);Qc.splice(un,0,_e),un===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,e,un,dn,hn){if(hn){if(typeof dn=="function"){var fn=dn;dn=function(){var yn=gl(pn);fn.call(yn)}}var pn=el(e,dn,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=pn,_e[uf]=pn.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),pn}for(;hn=_e.lastChild;)_e.removeChild(hn);if(typeof dn=="function"){var mn=dn;dn=function(){var yn=gl(gn);mn.call(yn)}}var gn=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=gn,_e[uf]=gn.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl$1(e,gn,un,dn)}),gn}function rl(_e,e,un,dn,hn){var fn=un._reactRootContainer;if(fn){var pn=fn;if(typeof hn=="function"){var mn=hn;hn=function(){var gn=gl(pn);mn.call(gn)}}fl$1(e,pn,_e,hn)}else pn=ql(un,e,_e,hn,dn);return gl(pn)}Ec=function(_e){switch(_e.tag){case 3:var e=_e.stateNode;if(e.current.memoizedState.isDehydrated){var un=tc(e.pendingLanes);un!==0&&(Cc(e,un|1),Dk(e,B$2()),!(K$1&6)&&(Gj=B$2()+500,jg()))}break;case 13:Rk(function(){var dn=ih(_e,1);if(dn!==null){var hn=R$1();gi(dn,_e,1,hn)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var e=ih(_e,134217728);if(e!==null){var un=R$1();gi(e,_e,134217728,un)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var e=yi(_e),un=ih(_e,e);if(un!==null){var dn=R$1();gi(un,_e,e,dn)}il(_e,e)}};Hc=function(){return C$1};Ic=function(_e,e){var un=C$1;try{return C$1=_e,e()}finally{C$1=un}};yb=function(_e,e,un){switch(e){case"input":if(bb(_e,un),e=un.name,un.type==="radio"&&e!=null){for(un=_e;un.parentNode;)un=un.parentNode;for(un=un.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<un.length;e++){var dn=un[e];if(dn!==_e&&dn.form===_e.form){var hn=Db(dn);if(!hn)throw Error(p$1(90));Wa(dn),bb(dn,hn)}}}break;case"textarea":ib(_e,un);break;case"select":e=un.value,e!=null&&fb(_e,!!un.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc$1=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,e){var un=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p$1(200));return cl(_e,e,null,un)};reactDom_production_min.createRoot=function(_e,e){if(!nl(_e))throw Error(p$1(299));var un=!1,dn="",hn=kl;return e!=null&&(e.unstable_strictMode===!0&&(un=!0),e.identifierPrefix!==void 0&&(dn=e.identifierPrefix),e.onRecoverableError!==void 0&&(hn=e.onRecoverableError)),e=bl(_e,1,!1,null,null,un,!1,dn,hn),_e[uf]=e.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll(e)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var e=_e._reactInternals;if(e===void 0)throw typeof _e.render=="function"?Error(p$1(188)):(_e=Object.keys(_e).join(","),Error(p$1(268,_e)));return _e=Zb(e),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,e,un){if(!ol(e))throw Error(p$1(200));return rl(null,_e,e,!0,un)};reactDom_production_min.hydrateRoot=function(_e,e,un){if(!nl(_e))throw Error(p$1(405));var dn=un!=null&&un.hydratedSources||null,hn=!1,fn="",pn=kl;if(un!=null&&(un.unstable_strictMode===!0&&(hn=!0),un.identifierPrefix!==void 0&&(fn=un.identifierPrefix),un.onRecoverableError!==void 0&&(pn=un.onRecoverableError)),e=el(e,null,_e,1,un??null,hn,!1,fn,pn),_e[uf]=e.current,sf(_e),dn)for(_e=0;_e<dn.length;_e++)un=dn[_e],hn=un._getVersion,hn=hn(un._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[un,hn]:e.mutableSourceEagerHydrationData.push(un,hn);return new ml(e)};reactDom_production_min.render=function(_e,e,un){if(!ol(e))throw Error(p$1(200));return rl(null,_e,e,!1,un)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$1(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,e,un,dn){if(!ol(un))throw Error(p$1(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$1(38));return rl(_e,e,un,!1,dn)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const Gt$1=getDefaultExportFromCjs(reactDomExports);var createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_SAFE_INTEGER,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=_e=>{if(toastTimeouts.has(_e))return;const e=setTimeout(()=>{toastTimeouts.delete(_e),dispatch({type:"REMOVE_TOAST",toastId:_e})},TOAST_REMOVE_DELAY);toastTimeouts.set(_e,e)},reducer$1=(_e,e)=>{switch(e.type){case"ADD_TOAST":return{..._e,toasts:[e.toast,..._e.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{..._e,toasts:_e.toasts.map(un=>un.id===e.toast.id?{...un,...e.toast}:un)};case"DISMISS_TOAST":{const{toastId:un}=e;return un?addToRemoveQueue(un):_e.toasts.forEach(dn=>{addToRemoveQueue(dn.id)}),{..._e,toasts:_e.toasts.map(dn=>dn.id===un||un===void 0?{...dn,open:!1}:dn)}}case"REMOVE_TOAST":return e.toastId===void 0?{..._e,toasts:[]}:{..._e,toasts:_e.toasts.filter(un=>un.id!==e.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(_e){memoryState=reducer$1(memoryState,_e),listeners.forEach(e=>{e(memoryState)})}function toast({..._e}){const e=genId(),un=hn=>dispatch({type:"UPDATE_TOAST",toast:{...hn,id:e}}),dn=()=>dispatch({type:"DISMISS_TOAST",toastId:e});return dispatch({type:"ADD_TOAST",toast:{..._e,id:e,open:!0,onOpenChange:hn=>{hn||dn()}}}),{id:e,dismiss:dn,update:un}}function useToast(){const[_e,e]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(e),()=>{const un=listeners.indexOf(e);un>-1&&listeners.splice(un,1)}),[_e]),{..._e,toast,dismiss:un=>dispatch({type:"DISMISS_TOAST",toastId:un})}}function composeEventHandlers(_e,e,{checkForDefaultPrevented:un=!0}={}){return function(hn){if(_e==null||_e(hn),un===!1||!hn.defaultPrevented)return e==null?void 0:e(hn)}}function setRef(_e,e){typeof _e=="function"?_e(e):_e!=null&&(_e.current=e)}function composeRefs(..._e){return e=>_e.forEach(un=>setRef(un,e))}function useComposedRefs(..._e){return reactExports.useCallback(composeRefs(..._e),_e)}function createContextScope$4(_e,e=[]){let un=[];function dn(fn,pn){const mn=reactExports.createContext(pn),gn=un.length;un=[...un,pn];function yn(En){const{scope:bn,children:vn,...Pn}=En,Tn=(bn==null?void 0:bn[_e][gn])||mn,In=reactExports.useMemo(()=>Pn,Object.values(Pn));return jsxRuntimeExports.jsx(Tn.Provider,{value:In,children:vn})}function xn(En,bn){const vn=(bn==null?void 0:bn[_e][gn])||mn,Pn=reactExports.useContext(vn);if(Pn)return Pn;if(pn!==void 0)return pn;throw new Error(`\`${En}\` must be used within \`${fn}\``)}return yn.displayName=fn+"Provider",[yn,xn]}const hn=()=>{const fn=un.map(pn=>reactExports.createContext(pn));return function(mn){const gn=(mn==null?void 0:mn[_e])||fn;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...mn,[_e]:gn}}),[mn,gn])}};return hn.scopeName=_e,[dn,composeContextScopes$4(hn,...e)]}function composeContextScopes$4(..._e){const e=_e[0];if(_e.length===1)return e;const un=()=>{const dn=_e.map(hn=>({useScope:hn(),scopeName:hn.scopeName}));return function(fn){const pn=dn.reduce((mn,{useScope:gn,scopeName:yn})=>{const En=gn(fn)[`__scope${yn}`];return{...mn,...En}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:pn}),[pn])}};return un.scopeName=e.scopeName,un}var Slot=reactExports.forwardRef((_e,e)=>{const{children:un,...dn}=_e,hn=reactExports.Children.toArray(un),fn=hn.find(isSlottable);if(fn){const pn=fn.props.children,mn=hn.map(gn=>gn===fn?reactExports.Children.count(pn)>1?reactExports.Children.only(null):reactExports.isValidElement(pn)?pn.props.children:null:gn);return jsxRuntimeExports.jsx(SlotClone,{...dn,ref:e,children:reactExports.isValidElement(pn)?reactExports.cloneElement(pn,void 0,mn):null})}return jsxRuntimeExports.jsx(SlotClone,{...dn,ref:e,children:un})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((_e,e)=>{const{children:un,...dn}=_e;if(reactExports.isValidElement(un)){const hn=getElementRef$1(un);return reactExports.cloneElement(un,{...mergeProps(dn,un.props),ref:e?composeRefs(e,hn):hn})}return reactExports.Children.count(un)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:_e})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e});function isSlottable(_e){return reactExports.isValidElement(_e)&&_e.type===Slottable}function mergeProps(_e,e){const un={...e};for(const dn in e){const hn=_e[dn],fn=e[dn];/^on[A-Z]/.test(dn)?hn&&fn?un[dn]=(...mn)=>{fn(...mn),hn(...mn)}:hn&&(un[dn]=hn):dn==="style"?un[dn]={...hn,...fn}:dn==="className"&&(un[dn]=[hn,fn].filter(Boolean).join(" "))}return{..._e,...un}}function getElementRef$1(_e){var dn,hn;let e=(dn=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:dn.get,un=e&&"isReactWarning"in e&&e.isReactWarning;return un?_e.ref:(e=(hn=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:hn.get,un=e&&"isReactWarning"in e&&e.isReactWarning,un?_e.props.ref:_e.props.ref||_e.ref)}function createCollection(_e){const e=_e+"CollectionProvider",[un,dn]=createContextScope$4(e),[hn,fn]=un(e,{collectionRef:{current:null},itemMap:new Map}),pn=vn=>{const{scope:Pn,children:Tn}=vn,In=React.useRef(null),Rn=React.useRef(new Map).current;return jsxRuntimeExports.jsx(hn,{scope:Pn,itemMap:Rn,collectionRef:In,children:Tn})};pn.displayName=e;const mn=_e+"CollectionSlot",gn=React.forwardRef((vn,Pn)=>{const{scope:Tn,children:In}=vn,Rn=fn(mn,Tn),Sn=useComposedRefs(Pn,Rn.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:Sn,children:In})});gn.displayName=mn;const yn=_e+"CollectionItemSlot",xn="data-radix-collection-item",En=React.forwardRef((vn,Pn)=>{const{scope:Tn,children:In,...Rn}=vn,Sn=React.useRef(null),Dn=useComposedRefs(Pn,Sn),$n=fn(yn,Tn);return React.useEffect(()=>($n.itemMap.set(Sn,{ref:Sn,...Rn}),()=>void $n.itemMap.delete(Sn))),jsxRuntimeExports.jsx(Slot,{[xn]:"",ref:Dn,children:In})});En.displayName=yn;function bn(vn){const Pn=fn(_e+"CollectionConsumer",vn);return React.useCallback(()=>{const In=Pn.collectionRef.current;if(!In)return[];const Rn=Array.from(In.querySelectorAll(`[${xn}]`));return Array.from(Pn.itemMap.values()).sort(($n,Fn)=>Rn.indexOf($n.ref.current)-Rn.indexOf(Fn.ref.current))},[Pn.collectionRef,Pn.itemMap])}return[{Provider:pn,Slot:gn,ItemSlot:En},bn,dn]}function createContext2(_e,e){const un=reactExports.createContext(e),dn=fn=>{const{children:pn,...mn}=fn,gn=reactExports.useMemo(()=>mn,Object.values(mn));return jsxRuntimeExports.jsx(un.Provider,{value:gn,children:pn})};dn.displayName=_e+"Provider";function hn(fn){const pn=reactExports.useContext(un);if(pn)return pn;if(e!==void 0)return e;throw new Error(`\`${fn}\` must be used within \`${_e}\``)}return[dn,hn]}function createContextScope$3(_e,e=[]){let un=[];function dn(fn,pn){const mn=reactExports.createContext(pn),gn=un.length;un=[...un,pn];const yn=En=>{var Rn;const{scope:bn,children:vn,...Pn}=En,Tn=((Rn=bn==null?void 0:bn[_e])==null?void 0:Rn[gn])||mn,In=reactExports.useMemo(()=>Pn,Object.values(Pn));return jsxRuntimeExports.jsx(Tn.Provider,{value:In,children:vn})};yn.displayName=fn+"Provider";function xn(En,bn){var Tn;const vn=((Tn=bn==null?void 0:bn[_e])==null?void 0:Tn[gn])||mn,Pn=reactExports.useContext(vn);if(Pn)return Pn;if(pn!==void 0)return pn;throw new Error(`\`${En}\` must be used within \`${fn}\``)}return[yn,xn]}const hn=()=>{const fn=un.map(pn=>reactExports.createContext(pn));return function(mn){const gn=(mn==null?void 0:mn[_e])||fn;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...mn,[_e]:gn}}),[mn,gn])}};return hn.scopeName=_e,[dn,composeContextScopes$3(hn,...e)]}function composeContextScopes$3(..._e){const e=_e[0];if(_e.length===1)return e;const un=()=>{const dn=_e.map(hn=>({useScope:hn(),scopeName:hn.scopeName}));return function(fn){const pn=dn.reduce((mn,{useScope:gn,scopeName:yn})=>{const En=gn(fn)[`__scope${yn}`];return{...mn,...En}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:pn}),[pn])}};return un.scopeName=e.scopeName,un}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((_e,e)=>{const un=reactExports.forwardRef((dn,hn)=>{const{asChild:fn,...pn}=dn,mn=fn?Slot:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(mn,{...pn,ref:hn})});return un.displayName=`Primitive.${e}`,{..._e,[e]:un}},{});function dispatchDiscreteCustomEvent(_e,e){_e&&reactDomExports.flushSync(()=>_e.dispatchEvent(e))}function useCallbackRef$1(_e){const e=reactExports.useRef(_e);return reactExports.useEffect(()=>{e.current=_e}),reactExports.useMemo(()=>(...un)=>{var dn;return(dn=e.current)==null?void 0:dn.call(e,...un)},[])}function useEscapeKeydown(_e,e=globalThis==null?void 0:globalThis.document){const un=useCallbackRef$1(_e);reactExports.useEffect(()=>{const dn=hn=>{hn.key==="Escape"&&un(hn)};return e.addEventListener("keydown",dn,{capture:!0}),()=>e.removeEventListener("keydown",dn,{capture:!0})},[un,e])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_e,e)=>{const{disableOutsidePointerEvents:un=!1,onEscapeKeyDown:dn,onPointerDownOutside:hn,onFocusOutside:fn,onInteractOutside:pn,onDismiss:mn,...gn}=_e,yn=reactExports.useContext(DismissableLayerContext),[xn,En]=reactExports.useState(null),bn=(xn==null?void 0:xn.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,vn]=reactExports.useState({}),Pn=useComposedRefs(e,kn=>En(kn)),Tn=Array.from(yn.layers),[In]=[...yn.layersWithOutsidePointerEventsDisabled].slice(-1),Rn=Tn.indexOf(In),Sn=xn?Tn.indexOf(xn):-1,Dn=yn.layersWithOutsidePointerEventsDisabled.size>0,$n=Sn>=Rn,Fn=usePointerDownOutside(kn=>{const Nn=kn.target,Ln=[...yn.branches].some(zn=>zn.contains(Nn));!$n||Ln||(hn==null||hn(kn),pn==null||pn(kn),kn.defaultPrevented||mn==null||mn())},bn),Gn=useFocusOutside(kn=>{const Nn=kn.target;[...yn.branches].some(zn=>zn.contains(Nn))||(fn==null||fn(kn),pn==null||pn(kn),kn.defaultPrevented||mn==null||mn())},bn);return useEscapeKeydown(kn=>{Sn===yn.layers.size-1&&(dn==null||dn(kn),!kn.defaultPrevented&&mn&&(kn.preventDefault(),mn()))},bn),reactExports.useEffect(()=>{if(xn)return un&&(yn.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=bn.body.style.pointerEvents,bn.body.style.pointerEvents="none"),yn.layersWithOutsidePointerEventsDisabled.add(xn)),yn.layers.add(xn),dispatchUpdate(),()=>{un&&yn.layersWithOutsidePointerEventsDisabled.size===1&&(bn.body.style.pointerEvents=originalBodyPointerEvents)}},[xn,bn,un,yn]),reactExports.useEffect(()=>()=>{xn&&(yn.layers.delete(xn),yn.layersWithOutsidePointerEventsDisabled.delete(xn),dispatchUpdate())},[xn,yn]),reactExports.useEffect(()=>{const kn=()=>vn({});return document.addEventListener(CONTEXT_UPDATE,kn),()=>document.removeEventListener(CONTEXT_UPDATE,kn)},[]),jsxRuntimeExports.jsx(Primitive.div,{...gn,ref:Pn,style:{pointerEvents:Dn?$n?"auto":"none":void 0,..._e.style},onFocusCapture:composeEventHandlers(_e.onFocusCapture,Gn.onFocusCapture),onBlurCapture:composeEventHandlers(_e.onBlurCapture,Gn.onBlurCapture),onPointerDownCapture:composeEventHandlers(_e.onPointerDownCapture,Fn.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_e,e)=>{const un=reactExports.useContext(DismissableLayerContext),dn=reactExports.useRef(null),hn=useComposedRefs(e,dn);return reactExports.useEffect(()=>{const fn=dn.current;if(fn)return un.branches.add(fn),()=>{un.branches.delete(fn)}},[un.branches]),jsxRuntimeExports.jsx(Primitive.div,{..._e,ref:hn})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_e,e=globalThis==null?void 0:globalThis.document){const un=useCallbackRef$1(_e),dn=reactExports.useRef(!1),hn=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const fn=mn=>{if(mn.target&&!dn.current){let gn=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,un,yn,{discrete:!0})};const yn={originalEvent:mn};mn.pointerType==="touch"?(e.removeEventListener("click",hn.current),hn.current=gn,e.addEventListener("click",hn.current,{once:!0})):gn()}else e.removeEventListener("click",hn.current);dn.current=!1},pn=window.setTimeout(()=>{e.addEventListener("pointerdown",fn)},0);return()=>{window.clearTimeout(pn),e.removeEventListener("pointerdown",fn),e.removeEventListener("click",hn.current)}},[e,un]),{onPointerDownCapture:()=>dn.current=!0}}function useFocusOutside(_e,e=globalThis==null?void 0:globalThis.document){const un=useCallbackRef$1(_e),dn=reactExports.useRef(!1);return reactExports.useEffect(()=>{const hn=fn=>{fn.target&&!dn.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,un,{originalEvent:fn},{discrete:!1})};return e.addEventListener("focusin",hn),()=>e.removeEventListener("focusin",hn)},[e,un]),{onFocusCapture:()=>dn.current=!0,onBlurCapture:()=>dn.current=!1}}function dispatchUpdate(){const _e=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_e)}function handleAndDispatchCustomEvent$1(_e,e,un,{discrete:dn}){const hn=un.originalEvent.target,fn=new CustomEvent(_e,{bubbles:!1,cancelable:!0,detail:un});e&&hn.addEventListener(_e,e,{once:!0}),dn?dispatchDiscreteCustomEvent(hn,fn):hn.dispatchEvent(fn)}var Root$7=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$3="Portal",Portal$2=reactExports.forwardRef((_e,e)=>{var mn;const{container:un,...dn}=_e,[hn,fn]=reactExports.useState(!1);useLayoutEffect2(()=>fn(!0),[]);const pn=un||hn&&((mn=globalThis==null?void 0:globalThis.document)==null?void 0:mn.body);return pn?Gt$1.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...dn,ref:e}),pn):null});Portal$2.displayName=PORTAL_NAME$3;function useStateMachine$1(_e,e){return reactExports.useReducer((un,dn)=>e[un][dn]??un,_e)}var Presence=_e=>{const{present:e,children:un}=_e,dn=usePresence(e),hn=typeof un=="function"?un({present:dn.isPresent}):reactExports.Children.only(un),fn=useComposedRefs(dn.ref,getElementRef(hn));return typeof un=="function"||dn.isPresent?reactExports.cloneElement(hn,{ref:fn}):null};Presence.displayName="Presence";function usePresence(_e){const[e,un]=reactExports.useState(),dn=reactExports.useRef({}),hn=reactExports.useRef(_e),fn=reactExports.useRef("none"),pn=_e?"mounted":"unmounted",[mn,gn]=useStateMachine$1(pn,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const yn=getAnimationName(dn.current);fn.current=mn==="mounted"?yn:"none"},[mn]),useLayoutEffect2(()=>{const yn=dn.current,xn=hn.current;if(xn!==_e){const bn=fn.current,vn=getAnimationName(yn);_e?gn("MOUNT"):vn==="none"||(yn==null?void 0:yn.display)==="none"?gn("UNMOUNT"):gn(xn&&bn!==vn?"ANIMATION_OUT":"UNMOUNT"),hn.current=_e}},[_e,gn]),useLayoutEffect2(()=>{if(e){let yn;const xn=e.ownerDocument.defaultView??window,En=vn=>{const Tn=getAnimationName(dn.current).includes(vn.animationName);if(vn.target===e&&Tn&&(gn("ANIMATION_END"),!hn.current)){const In=e.style.animationFillMode;e.style.animationFillMode="forwards",yn=xn.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=In)})}},bn=vn=>{vn.target===e&&(fn.current=getAnimationName(dn.current))};return e.addEventListener("animationstart",bn),e.addEventListener("animationcancel",En),e.addEventListener("animationend",En),()=>{xn.clearTimeout(yn),e.removeEventListener("animationstart",bn),e.removeEventListener("animationcancel",En),e.removeEventListener("animationend",En)}}else gn("ANIMATION_END")},[e,gn]),{isPresent:["mounted","unmountSuspended"].includes(mn),ref:reactExports.useCallback(yn=>{yn&&(dn.current=getComputedStyle(yn)),un(yn)},[])}}function getAnimationName(_e){return(_e==null?void 0:_e.animationName)||"none"}function getElementRef(_e){var dn,hn;let e=(dn=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:dn.get,un=e&&"isReactWarning"in e&&e.isReactWarning;return un?_e.ref:(e=(hn=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:hn.get,un=e&&"isReactWarning"in e&&e.isReactWarning,un?_e.props.ref:_e.props.ref||_e.ref)}function useControllableState({prop:_e,defaultProp:e,onChange:un=()=>{}}){const[dn,hn]=useUncontrolledState({defaultProp:e,onChange:un}),fn=_e!==void 0,pn=fn?_e:dn,mn=useCallbackRef$1(un),gn=reactExports.useCallback(yn=>{if(fn){const En=typeof yn=="function"?yn(_e):yn;En!==_e&&mn(En)}else hn(yn)},[fn,_e,hn,mn]);return[pn,gn]}function useUncontrolledState({defaultProp:_e,onChange:e}){const un=reactExports.useState(_e),[dn]=un,hn=reactExports.useRef(dn),fn=useCallbackRef$1(e);return reactExports.useEffect(()=>{hn.current!==dn&&(fn(dn),hn.current=dn)},[dn,hn,fn]),un}var NAME$2="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_e,e)=>jsxRuntimeExports.jsx(Primitive.span,{..._e,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._e.style}}));VisuallyHidden.displayName=NAME$2;var Root$6=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope$3("Toast",[createCollectionScope$2]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=_e=>{const{__scopeToast:e,label:un="Notification",duration:dn=5e3,swipeDirection:hn="right",swipeThreshold:fn=50,children:pn}=_e,[mn,gn]=reactExports.useState(null),[yn,xn]=reactExports.useState(0),En=reactExports.useRef(!1),bn=reactExports.useRef(!1);return un.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection$2.Provider,{scope:e,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:e,label:un,duration:dn,swipeDirection:hn,swipeThreshold:fn,toastCount:yn,viewport:mn,onViewportChange:gn,onToastAdd:reactExports.useCallback(()=>xn(vn=>vn+1),[]),onToastRemove:reactExports.useCallback(()=>xn(vn=>vn-1),[]),isFocusedToastEscapeKeyDownRef:En,isClosePausedRef:bn,children:pn})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME$2="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((_e,e)=>{const{__scopeToast:un,hotkey:dn=VIEWPORT_DEFAULT_HOTKEY,label:hn="Notifications ({hotkey})",...fn}=_e,pn=useToastProviderContext(VIEWPORT_NAME$2,un),mn=useCollection$2(un),gn=reactExports.useRef(null),yn=reactExports.useRef(null),xn=reactExports.useRef(null),En=reactExports.useRef(null),bn=useComposedRefs(e,En,pn.onViewportChange),vn=dn.join("+").replace(/Key/g,"").replace(/Digit/g,""),Pn=pn.toastCount>0;reactExports.useEffect(()=>{const In=Rn=>{var Dn;dn.length!==0&&dn.every($n=>Rn[$n]||Rn.code===$n)&&((Dn=En.current)==null||Dn.focus())};return document.addEventListener("keydown",In),()=>document.removeEventListener("keydown",In)},[dn]),reactExports.useEffect(()=>{const In=gn.current,Rn=En.current;if(Pn&&In&&Rn){const Sn=()=>{if(!pn.isClosePausedRef.current){const Gn=new CustomEvent(VIEWPORT_PAUSE);Rn.dispatchEvent(Gn),pn.isClosePausedRef.current=!0}},Dn=()=>{if(pn.isClosePausedRef.current){const Gn=new CustomEvent(VIEWPORT_RESUME);Rn.dispatchEvent(Gn),pn.isClosePausedRef.current=!1}},$n=Gn=>{!In.contains(Gn.relatedTarget)&&Dn()},Fn=()=>{In.contains(document.activeElement)||Dn()};return In.addEventListener("focusin",Sn),In.addEventListener("focusout",$n),In.addEventListener("pointermove",Sn),In.addEventListener("pointerleave",Fn),window.addEventListener("blur",Sn),window.addEventListener("focus",Dn),()=>{In.removeEventListener("focusin",Sn),In.removeEventListener("focusout",$n),In.removeEventListener("pointermove",Sn),In.removeEventListener("pointerleave",Fn),window.removeEventListener("blur",Sn),window.removeEventListener("focus",Dn)}}},[Pn,pn.isClosePausedRef]);const Tn=reactExports.useCallback(({tabbingDirection:In})=>{const Sn=mn().map(Dn=>{const $n=Dn.ref.current,Fn=[$n,...getTabbableCandidates$1($n)];return In==="forwards"?Fn:Fn.reverse()});return(In==="forwards"?Sn.reverse():Sn).flat()},[mn]);return reactExports.useEffect(()=>{const In=En.current;if(In){const Rn=Sn=>{var Fn,Gn,kn;const Dn=Sn.altKey||Sn.ctrlKey||Sn.metaKey;if(Sn.key==="Tab"&&!Dn){const Nn=document.activeElement,Ln=Sn.shiftKey;if(Sn.target===In&&Ln){(Fn=yn.current)==null||Fn.focus();return}const Mn=Tn({tabbingDirection:Ln?"backwards":"forwards"}),Bn=Mn.findIndex(Xn=>Xn===Nn);focusFirst$2(Mn.slice(Bn+1))?Sn.preventDefault():Ln?(Gn=yn.current)==null||Gn.focus():(kn=xn.current)==null||kn.focus()}};return In.addEventListener("keydown",Rn),()=>In.removeEventListener("keydown",Rn)}},[mn,Tn]),jsxRuntimeExports.jsxs(Branch,{ref:gn,role:"region","aria-label":hn.replace("{hotkey}",vn),tabIndex:-1,style:{pointerEvents:Pn?void 0:"none"},children:[Pn&&jsxRuntimeExports.jsx(FocusProxy,{ref:yn,onFocusFromOutsideViewport:()=>{const In=Tn({tabbingDirection:"forwards"});focusFirst$2(In)}}),jsxRuntimeExports.jsx(Collection$2.Slot,{scope:un,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...fn,ref:bn})}),Pn&&jsxRuntimeExports.jsx(FocusProxy,{ref:xn,onFocusFromOutsideViewport:()=>{const In=Tn({tabbingDirection:"backwards"});focusFirst$2(In)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME$2;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((_e,e)=>{const{__scopeToast:un,onFocusFromOutsideViewport:dn,...hn}=_e,fn=useToastProviderContext(FOCUS_PROXY_NAME,un);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...hn,ref:e,style:{position:"fixed"},onFocus:pn=>{var yn;const mn=pn.relatedTarget;!((yn=fn.viewport)!=null&&yn.contains(mn))&&dn()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((_e,e)=>{const{forceMount:un,open:dn,defaultOpen:hn,onOpenChange:fn,...pn}=_e,[mn=!0,gn]=useControllableState({prop:dn,defaultProp:hn,onChange:fn});return jsxRuntimeExports.jsx(Presence,{present:un||mn,children:jsxRuntimeExports.jsx(ToastImpl,{open:mn,...pn,ref:e,onClose:()=>gn(!1),onPause:useCallbackRef$1(_e.onPause),onResume:useCallbackRef$1(_e.onResume),onSwipeStart:composeEventHandlers(_e.onSwipeStart,yn=>{yn.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(_e.onSwipeMove,yn=>{const{x:xn,y:En}=yn.detail.delta;yn.currentTarget.setAttribute("data-swipe","move"),yn.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${xn}px`),yn.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${En}px`)}),onSwipeCancel:composeEventHandlers(_e.onSwipeCancel,yn=>{yn.currentTarget.setAttribute("data-swipe","cancel"),yn.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),yn.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),yn.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),yn.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(_e.onSwipeEnd,yn=>{const{x:xn,y:En}=yn.detail.delta;yn.currentTarget.setAttribute("data-swipe","end"),yn.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),yn.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),yn.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${xn}px`),yn.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${En}px`),gn(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((_e,e)=>{const{__scopeToast:un,type:dn="foreground",duration:hn,open:fn,onClose:pn,onEscapeKeyDown:mn,onPause:gn,onResume:yn,onSwipeStart:xn,onSwipeMove:En,onSwipeCancel:bn,onSwipeEnd:vn,...Pn}=_e,Tn=useToastProviderContext(TOAST_NAME,un),[In,Rn]=reactExports.useState(null),Sn=useComposedRefs(e,Xn=>Rn(Xn)),Dn=reactExports.useRef(null),$n=reactExports.useRef(null),Fn=hn||Tn.duration,Gn=reactExports.useRef(0),kn=reactExports.useRef(Fn),Nn=reactExports.useRef(0),{onToastAdd:Ln,onToastRemove:zn}=Tn,Cn=useCallbackRef$1(()=>{var nr;(In==null?void 0:In.contains(document.activeElement))&&((nr=Tn.viewport)==null||nr.focus()),pn()}),Mn=reactExports.useCallback(Xn=>{!Xn||Xn===1/0||(window.clearTimeout(Nn.current),Gn.current=new Date().getTime(),Nn.current=window.setTimeout(Cn,Xn))},[Cn]);reactExports.useEffect(()=>{const Xn=Tn.viewport;if(Xn){const nr=()=>{Mn(kn.current),yn==null||yn()},sr=()=>{const lr=new Date().getTime()-Gn.current;kn.current=kn.current-lr,window.clearTimeout(Nn.current),gn==null||gn()};return Xn.addEventListener(VIEWPORT_PAUSE,sr),Xn.addEventListener(VIEWPORT_RESUME,nr),()=>{Xn.removeEventListener(VIEWPORT_PAUSE,sr),Xn.removeEventListener(VIEWPORT_RESUME,nr)}}},[Tn.viewport,Fn,gn,yn,Mn]),reactExports.useEffect(()=>{fn&&!Tn.isClosePausedRef.current&&Mn(Fn)},[fn,Fn,Tn.isClosePausedRef,Mn]),reactExports.useEffect(()=>(Ln(),()=>zn()),[Ln,zn]);const Bn=reactExports.useMemo(()=>In?getAnnounceTextContent(In):null,[In]);return Tn.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Bn&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:un,role:"status","aria-live":dn==="foreground"?"assertive":"polite","aria-atomic":!0,children:Bn}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:un,onClose:Cn,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:un,children:jsxRuntimeExports.jsx(Root$7,{asChild:!0,onEscapeKeyDown:composeEventHandlers(mn,()=>{Tn.isFocusedToastEscapeKeyDownRef.current||Cn(),Tn.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":fn?"open":"closed","data-swipe-direction":Tn.swipeDirection,...Pn,ref:Sn,style:{userSelect:"none",touchAction:"none",..._e.style},onKeyDown:composeEventHandlers(_e.onKeyDown,Xn=>{Xn.key==="Escape"&&(mn==null||mn(Xn.nativeEvent),Xn.nativeEvent.defaultPrevented||(Tn.isFocusedToastEscapeKeyDownRef.current=!0,Cn()))}),onPointerDown:composeEventHandlers(_e.onPointerDown,Xn=>{Xn.button===0&&(Dn.current={x:Xn.clientX,y:Xn.clientY})}),onPointerMove:composeEventHandlers(_e.onPointerMove,Xn=>{if(!Dn.current)return;const nr=Xn.clientX-Dn.current.x,sr=Xn.clientY-Dn.current.y,lr=!!$n.current,tr=["left","right"].includes(Tn.swipeDirection),Jn=["left","up"].includes(Tn.swipeDirection)?Math.min:Math.max,ar=tr?Jn(0,nr):0,gr=tr?0:Jn(0,sr),qn=Xn.pointerType==="touch"?10:2,On={x:ar,y:gr},Un={originalEvent:Xn,delta:On};lr?($n.current=On,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,En,Un,{discrete:!1})):isDeltaInDirection(On,Tn.swipeDirection,qn)?($n.current=On,handleAndDispatchCustomEvent(TOAST_SWIPE_START,xn,Un,{discrete:!1}),Xn.target.setPointerCapture(Xn.pointerId)):(Math.abs(nr)>qn||Math.abs(sr)>qn)&&(Dn.current=null)}),onPointerUp:composeEventHandlers(_e.onPointerUp,Xn=>{const nr=$n.current,sr=Xn.target;if(sr.hasPointerCapture(Xn.pointerId)&&sr.releasePointerCapture(Xn.pointerId),$n.current=null,Dn.current=null,nr){const lr=Xn.currentTarget,tr={originalEvent:Xn,delta:nr};isDeltaInDirection(nr,Tn.swipeDirection,Tn.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,vn,tr,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,bn,tr,{discrete:!0}),lr.addEventListener("click",Jn=>Jn.preventDefault(),{once:!0})}})})})}),Tn.viewport)})]}):null}),ToastAnnounce=_e=>{const{__scopeToast:e,children:un,...dn}=_e,hn=useToastProviderContext(TOAST_NAME,e),[fn,pn]=reactExports.useState(!1),[mn,gn]=reactExports.useState(!1);return useNextFrame(()=>pn(!0)),reactExports.useEffect(()=>{const yn=window.setTimeout(()=>gn(!0),1e3);return()=>window.clearTimeout(yn)},[]),mn?null:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...dn,children:fn&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[hn.label," ",un]})})})},TITLE_NAME$1="ToastTitle",ToastTitle$1=reactExports.forwardRef((_e,e)=>{const{__scopeToast:un,...dn}=_e;return jsxRuntimeExports.jsx(Primitive.div,{...dn,ref:e})});ToastTitle$1.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="ToastDescription",ToastDescription$1=reactExports.forwardRef((_e,e)=>{const{__scopeToast:un,...dn}=_e;return jsxRuntimeExports.jsx(Primitive.div,{...dn,ref:e})});ToastDescription$1.displayName=DESCRIPTION_NAME$1;var ACTION_NAME="ToastAction",ToastAction$1=reactExports.forwardRef((_e,e)=>{const{altText:un,...dn}=_e;return un.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:un,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...dn,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME;var CLOSE_NAME$1="ToastClose",ToastClose$1=reactExports.forwardRef((_e,e)=>{const{__scopeToast:un,...dn}=_e,hn=useToastInteractiveContext(CLOSE_NAME$1,un);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...dn,ref:e,onClick:composeEventHandlers(_e.onClick,hn.onClose)})})});ToastClose$1.displayName=CLOSE_NAME$1;var ToastAnnounceExclude=reactExports.forwardRef((_e,e)=>{const{__scopeToast:un,altText:dn,...hn}=_e;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":dn||void 0,...hn,ref:e})});function getAnnounceTextContent(_e){const e=[];return Array.from(_e.childNodes).forEach(dn=>{if(dn.nodeType===dn.TEXT_NODE&&dn.textContent&&e.push(dn.textContent),isHTMLElement$1(dn)){const hn=dn.ariaHidden||dn.hidden||dn.style.display==="none",fn=dn.dataset.radixToastAnnounceExclude==="";if(!hn)if(fn){const pn=dn.dataset.radixToastAnnounceAlt;pn&&e.push(pn)}else e.push(...getAnnounceTextContent(dn))}}),e}function handleAndDispatchCustomEvent(_e,e,un,{discrete:dn}){const hn=un.originalEvent.currentTarget,fn=new CustomEvent(_e,{bubbles:!0,cancelable:!0,detail:un});e&&hn.addEventListener(_e,e,{once:!0}),dn?dispatchDiscreteCustomEvent(hn,fn):hn.dispatchEvent(fn)}var isDeltaInDirection=(_e,e,un=0)=>{const dn=Math.abs(_e.x),hn=Math.abs(_e.y),fn=dn>hn;return e==="left"||e==="right"?fn&&dn>un:!fn&&hn>un};function useNextFrame(_e=()=>{}){const e=useCallbackRef$1(_e);useLayoutEffect2(()=>{let un=0,dn=0;return un=window.requestAnimationFrame(()=>dn=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(un),window.cancelAnimationFrame(dn)}},[e])}function isHTMLElement$1(_e){return _e.nodeType===_e.ELEMENT_NODE}function getTabbableCandidates$1(_e){const e=[],un=document.createTreeWalker(_e,NodeFilter.SHOW_ELEMENT,{acceptNode:dn=>{const hn=dn.tagName==="INPUT"&&dn.type==="hidden";return dn.disabled||dn.hidden||hn?NodeFilter.FILTER_SKIP:dn.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;un.nextNode();)e.push(un.currentNode);return e}function focusFirst$2(_e){const e=document.activeElement;return _e.some(un=>un===e?!0:(un.focus(),document.activeElement!==e))}var Provider$2=ToastProvider$1,Viewport$2=ToastViewport$1,Root2$4=Toast$1,Title$1=ToastTitle$1,Description$1=ToastDescription$1,Action=ToastAction$1,Close$1=ToastClose$1;function r(_e){var e,un,dn="";if(typeof _e=="string"||typeof _e=="number")dn+=_e;else if(typeof _e=="object")if(Array.isArray(_e)){var hn=_e.length;for(e=0;e<hn;e++)_e[e]&&(un=r(_e[e]))&&(dn&&(dn+=" "),dn+=un)}else for(un in _e)_e[un]&&(dn&&(dn+=" "),dn+=un);return dn}function clsx(){for(var _e,e,un=0,dn="",hn=arguments.length;un<hn;un++)(_e=arguments[un])&&(e=r(_e))&&(dn&&(dn+=" "),dn+=e);return dn}const falsyToString=_e=>typeof _e=="boolean"?`${_e}`:_e===0?"0":_e,cx=clsx,cva=(_e,e)=>un=>{var dn;if((e==null?void 0:e.variants)==null)return cx(_e,un==null?void 0:un.class,un==null?void 0:un.className);const{variants:hn,defaultVariants:fn}=e,pn=Object.keys(hn).map(yn=>{const xn=un==null?void 0:un[yn],En=fn==null?void 0:fn[yn];if(xn===null)return null;const bn=falsyToString(xn)||falsyToString(En);return hn[yn][bn]}),mn=un&&Object.entries(un).reduce((yn,xn)=>{let[En,bn]=xn;return bn===void 0||(yn[En]=bn),yn},{}),gn=e==null||(dn=e.compoundVariants)===null||dn===void 0?void 0:dn.reduce((yn,xn)=>{let{class:En,className:bn,...vn}=xn;return Object.entries(vn).every(Pn=>{let[Tn,In]=Pn;return Array.isArray(In)?In.includes({...fn,...mn}[Tn]):{...fn,...mn}[Tn]===In})?[...yn,En,bn]:yn},[]);return cx(_e,pn,gn,un==null?void 0:un.class,un==null?void 0:un.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=_e=>_e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(..._e)=>_e.filter((e,un,dn)=>!!e&&e.trim()!==""&&dn.indexOf(e)===un).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:_e="currentColor",size:e=24,strokeWidth:un=2,absoluteStrokeWidth:dn,className:hn="",children:fn,iconNode:pn,...mn},gn)=>reactExports.createElement("svg",{ref:gn,...defaultAttributes,width:e,height:e,stroke:_e,strokeWidth:dn?Number(un)*24/Number(e):un,className:mergeClasses("lucide",hn),...mn},[...pn.map(([yn,xn])=>reactExports.createElement(yn,xn)),...Array.isArray(fn)?fn:[fn]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(_e,e)=>{const un=reactExports.forwardRef(({className:dn,...hn},fn)=>reactExports.createElement(Icon$1,{ref:fn,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(_e)}`,dn),...hn}));return un.displayName=`${_e}`,un};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Award=createLucideIcon("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Brain=createLucideIcon("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleAlert=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheckBig=createLucideIcon("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ellipsis=createLucideIcon("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Filter$1=createLucideIcon("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const History=createLucideIcon("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Image$1=createLucideIcon("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Languages=createLucideIcon("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Menu=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageCircle=createLucideIcon("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Paperclip=createLucideIcon("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Play=createLucideIcon("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sparkles=createLucideIcon("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TriangleAlert=createLucideIcon("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trophy=createLucideIcon("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User$1=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$1=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zap=createLucideIcon("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=_e=>{const e=createClassMap(_e),{conflictingClassGroups:un,conflictingClassGroupModifiers:dn}=_e;return{getClassGroupId:pn=>{const mn=pn.split(CLASS_PART_SEPARATOR);return mn[0]===""&&mn.length!==1&&mn.shift(),getGroupRecursive(mn,e)||getGroupIdForArbitraryProperty(pn)},getConflictingClassGroupIds:(pn,mn)=>{const gn=un[pn]||[];return mn&&dn[pn]?[...gn,...dn[pn]]:gn}}},getGroupRecursive=(_e,e)=>{var pn;if(_e.length===0)return e.classGroupId;const un=_e[0],dn=e.nextPart.get(un),hn=dn?getGroupRecursive(_e.slice(1),dn):void 0;if(hn)return hn;if(e.validators.length===0)return;const fn=_e.join(CLASS_PART_SEPARATOR);return(pn=e.validators.find(({validator:mn})=>mn(fn)))==null?void 0:pn.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=_e=>{if(arbitraryPropertyRegex.test(_e)){const e=arbitraryPropertyRegex.exec(_e)[1],un=e==null?void 0:e.substring(0,e.indexOf(":"));if(un)return"arbitrary.."+un}},createClassMap=_e=>{const{theme:e,prefix:un}=_e,dn={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(_e.classGroups),un).forEach(([fn,pn])=>{processClassesRecursively(pn,dn,fn,e)}),dn},processClassesRecursively=(_e,e,un,dn)=>{_e.forEach(hn=>{if(typeof hn=="string"){const fn=hn===""?e:getPart(e,hn);fn.classGroupId=un;return}if(typeof hn=="function"){if(isThemeGetter(hn)){processClassesRecursively(hn(dn),e,un,dn);return}e.validators.push({validator:hn,classGroupId:un});return}Object.entries(hn).forEach(([fn,pn])=>{processClassesRecursively(pn,getPart(e,fn),un,dn)})})},getPart=(_e,e)=>{let un=_e;return e.split(CLASS_PART_SEPARATOR).forEach(dn=>{un.nextPart.has(dn)||un.nextPart.set(dn,{nextPart:new Map,validators:[]}),un=un.nextPart.get(dn)}),un},isThemeGetter=_e=>_e.isThemeGetter,getPrefixedClassGroupEntries=(_e,e)=>e?_e.map(([un,dn])=>{const hn=dn.map(fn=>typeof fn=="string"?e+fn:typeof fn=="object"?Object.fromEntries(Object.entries(fn).map(([pn,mn])=>[e+pn,mn])):fn);return[un,hn]}):_e,createLruCache=_e=>{if(_e<1)return{get:()=>{},set:()=>{}};let e=0,un=new Map,dn=new Map;const hn=(fn,pn)=>{un.set(fn,pn),e++,e>_e&&(e=0,dn=un,un=new Map)};return{get(fn){let pn=un.get(fn);if(pn!==void 0)return pn;if((pn=dn.get(fn))!==void 0)return hn(fn,pn),pn},set(fn,pn){un.has(fn)?un.set(fn,pn):hn(fn,pn)}}},IMPORTANT_MODIFIER="!",createParseClassName=_e=>{const{separator:e,experimentalParseClassName:un}=_e,dn=e.length===1,hn=e[0],fn=e.length,pn=mn=>{const gn=[];let yn=0,xn=0,En;for(let In=0;In<mn.length;In++){let Rn=mn[In];if(yn===0){if(Rn===hn&&(dn||mn.slice(In,In+fn)===e)){gn.push(mn.slice(xn,In)),xn=In+fn;continue}if(Rn==="/"){En=In;continue}}Rn==="["?yn++:Rn==="]"&&yn--}const bn=gn.length===0?mn:mn.substring(xn),vn=bn.startsWith(IMPORTANT_MODIFIER),Pn=vn?bn.substring(1):bn,Tn=En&&En>xn?En-xn:void 0;return{modifiers:gn,hasImportantModifier:vn,baseClassName:Pn,maybePostfixModifierPosition:Tn}};return un?mn=>un({className:mn,parseClassName:pn}):pn},sortModifiers=_e=>{if(_e.length<=1)return _e;const e=[];let un=[];return _e.forEach(dn=>{dn[0]==="["?(e.push(...un.sort(),dn),un=[]):un.push(dn)}),e.push(...un.sort()),e},createConfigUtils=_e=>({cache:createLruCache(_e.cacheSize),parseClassName:createParseClassName(_e),...createClassGroupUtils(_e)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(_e,e)=>{const{parseClassName:un,getClassGroupId:dn,getConflictingClassGroupIds:hn}=e,fn=[],pn=_e.trim().split(SPLIT_CLASSES_REGEX);let mn="";for(let gn=pn.length-1;gn>=0;gn-=1){const yn=pn[gn],{modifiers:xn,hasImportantModifier:En,baseClassName:bn,maybePostfixModifierPosition:vn}=un(yn);let Pn=!!vn,Tn=dn(Pn?bn.substring(0,vn):bn);if(!Tn){if(!Pn){mn=yn+(mn.length>0?" "+mn:mn);continue}if(Tn=dn(bn),!Tn){mn=yn+(mn.length>0?" "+mn:mn);continue}Pn=!1}const In=sortModifiers(xn).join(":"),Rn=En?In+IMPORTANT_MODIFIER:In,Sn=Rn+Tn;if(fn.includes(Sn))continue;fn.push(Sn);const Dn=hn(Tn,Pn);for(let $n=0;$n<Dn.length;++$n){const Fn=Dn[$n];fn.push(Rn+Fn)}mn=yn+(mn.length>0?" "+mn:mn)}return mn};function twJoin(){let _e=0,e,un,dn="";for(;_e<arguments.length;)(e=arguments[_e++])&&(un=toValue(e))&&(dn&&(dn+=" "),dn+=un);return dn}const toValue=_e=>{if(typeof _e=="string")return _e;let e,un="";for(let dn=0;dn<_e.length;dn++)_e[dn]&&(e=toValue(_e[dn]))&&(un&&(un+=" "),un+=e);return un};function createTailwindMerge(_e,...e){let un,dn,hn,fn=pn;function pn(gn){const yn=e.reduce((xn,En)=>En(xn),_e());return un=createConfigUtils(yn),dn=un.cache.get,hn=un.cache.set,fn=mn,mn(gn)}function mn(gn){const yn=dn(gn);if(yn)return yn;const xn=mergeClassList(gn,un);return hn(gn,xn),xn}return function(){return fn(twJoin.apply(null,arguments))}}const fromTheme=_e=>{const e=un=>un[_e]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=_e=>isNumber$1(_e)||stringLengths.has(_e)||fractionRegex.test(_e),isArbitraryLength=_e=>getIsArbitraryValue(_e,"length",isLengthOnly),isNumber$1=_e=>!!_e&&!Number.isNaN(Number(_e)),isArbitraryNumber=_e=>getIsArbitraryValue(_e,"number",isNumber$1),isInteger$1=_e=>!!_e&&Number.isInteger(Number(_e)),isPercent=_e=>_e.endsWith("%")&&isNumber$1(_e.slice(0,-1)),isArbitraryValue=_e=>arbitraryValueRegex.test(_e),isTshirtSize=_e=>tshirtUnitRegex.test(_e),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=_e=>getIsArbitraryValue(_e,sizeLabels,isNever),isArbitraryPosition=_e=>getIsArbitraryValue(_e,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=_e=>getIsArbitraryValue(_e,imageLabels,isImage),isArbitraryShadow=_e=>getIsArbitraryValue(_e,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(_e,e,un)=>{const dn=arbitraryValueRegex.exec(_e);return dn?dn[1]?typeof e=="string"?dn[1]===e:e.has(dn[1]):un(dn[2]):!1},isLengthOnly=_e=>lengthUnitRegex.test(_e)&&!colorFunctionRegex.test(_e),isNever=()=>!1,isShadow=_e=>shadowRegex.test(_e),isImage=_e=>imageRegex.test(_e),getDefaultConfig=()=>{const _e=fromTheme("colors"),e=fromTheme("spacing"),un=fromTheme("blur"),dn=fromTheme("brightness"),hn=fromTheme("borderColor"),fn=fromTheme("borderRadius"),pn=fromTheme("borderSpacing"),mn=fromTheme("borderWidth"),gn=fromTheme("contrast"),yn=fromTheme("grayscale"),xn=fromTheme("hueRotate"),En=fromTheme("invert"),bn=fromTheme("gap"),vn=fromTheme("gradientColorStops"),Pn=fromTheme("gradientColorStopPositions"),Tn=fromTheme("inset"),In=fromTheme("margin"),Rn=fromTheme("opacity"),Sn=fromTheme("padding"),Dn=fromTheme("saturate"),$n=fromTheme("scale"),Fn=fromTheme("sepia"),Gn=fromTheme("skew"),kn=fromTheme("space"),Nn=fromTheme("translate"),Ln=()=>["auto","contain","none"],zn=()=>["auto","hidden","clip","visible","scroll"],Cn=()=>["auto",isArbitraryValue,e],Mn=()=>[isArbitraryValue,e],Bn=()=>["",isLength,isArbitraryLength],Xn=()=>["auto",isNumber$1,isArbitraryValue],nr=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],sr=()=>["solid","dashed","dotted","double","none"],lr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],tr=()=>["start","end","center","between","around","evenly","stretch"],Jn=()=>["","0",isArbitraryValue],ar=()=>["auto","avoid","all","avoid-page","page","left","right","column"],gr=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:gr(),borderColor:[_e],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:Mn(),borderWidth:Bn(),contrast:gr(),grayscale:Jn(),hueRotate:gr(),invert:Jn(),gap:Mn(),gradientColorStops:[_e],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:Cn(),margin:Cn(),opacity:gr(),padding:Mn(),saturate:gr(),scale:gr(),sepia:Jn(),skew:gr(),space:Mn(),translate:Mn()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":ar()}],"break-before":[{"break-before":ar()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...nr(),isArbitraryValue]}],overflow:[{overflow:zn()}],"overflow-x":[{"overflow-x":zn()}],"overflow-y":[{"overflow-y":zn()}],overscroll:[{overscroll:Ln()}],"overscroll-x":[{"overscroll-x":Ln()}],"overscroll-y":[{"overscroll-y":Ln()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[Tn]}],"inset-x":[{"inset-x":[Tn]}],"inset-y":[{"inset-y":[Tn]}],start:[{start:[Tn]}],end:[{end:[Tn]}],top:[{top:[Tn]}],right:[{right:[Tn]}],bottom:[{bottom:[Tn]}],left:[{left:[Tn]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger$1,isArbitraryValue]}],basis:[{basis:Cn()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Jn()}],shrink:[{shrink:Jn()}],order:[{order:["first","last","none",isInteger$1,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger$1,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Xn()}],"col-end":[{"col-end":Xn()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger$1,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Xn()}],"row-end":[{"row-end":Xn()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[bn]}],"gap-x":[{"gap-x":[bn]}],"gap-y":[{"gap-y":[bn]}],"justify-content":[{justify:["normal",...tr()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...tr(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...tr(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[Sn]}],px:[{px:[Sn]}],py:[{py:[Sn]}],ps:[{ps:[Sn]}],pe:[{pe:[Sn]}],pt:[{pt:[Sn]}],pr:[{pr:[Sn]}],pb:[{pb:[Sn]}],pl:[{pl:[Sn]}],m:[{m:[In]}],mx:[{mx:[In]}],my:[{my:[In]}],ms:[{ms:[In]}],me:[{me:[In]}],mt:[{mt:[In]}],mr:[{mr:[In]}],mb:[{mb:[In]}],ml:[{ml:[In]}],"space-x":[{"space-x":[kn]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[kn]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,e]}],"min-w":[{"min-w":[isArbitraryValue,e,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,e,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[_e]}],"placeholder-opacity":[{"placeholder-opacity":[Rn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[_e]}],"text-opacity":[{"text-opacity":[Rn]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...sr(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[_e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Mn()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Rn]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...nr(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[_e]}],"gradient-from-pos":[{from:[Pn]}],"gradient-via-pos":[{via:[Pn]}],"gradient-to-pos":[{to:[Pn]}],"gradient-from":[{from:[vn]}],"gradient-via":[{via:[vn]}],"gradient-to":[{to:[vn]}],rounded:[{rounded:[fn]}],"rounded-s":[{"rounded-s":[fn]}],"rounded-e":[{"rounded-e":[fn]}],"rounded-t":[{"rounded-t":[fn]}],"rounded-r":[{"rounded-r":[fn]}],"rounded-b":[{"rounded-b":[fn]}],"rounded-l":[{"rounded-l":[fn]}],"rounded-ss":[{"rounded-ss":[fn]}],"rounded-se":[{"rounded-se":[fn]}],"rounded-ee":[{"rounded-ee":[fn]}],"rounded-es":[{"rounded-es":[fn]}],"rounded-tl":[{"rounded-tl":[fn]}],"rounded-tr":[{"rounded-tr":[fn]}],"rounded-br":[{"rounded-br":[fn]}],"rounded-bl":[{"rounded-bl":[fn]}],"border-w":[{border:[mn]}],"border-w-x":[{"border-x":[mn]}],"border-w-y":[{"border-y":[mn]}],"border-w-s":[{"border-s":[mn]}],"border-w-e":[{"border-e":[mn]}],"border-w-t":[{"border-t":[mn]}],"border-w-r":[{"border-r":[mn]}],"border-w-b":[{"border-b":[mn]}],"border-w-l":[{"border-l":[mn]}],"border-opacity":[{"border-opacity":[Rn]}],"border-style":[{border:[...sr(),"hidden"]}],"divide-x":[{"divide-x":[mn]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[mn]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Rn]}],"divide-style":[{divide:sr()}],"border-color":[{border:[hn]}],"border-color-x":[{"border-x":[hn]}],"border-color-y":[{"border-y":[hn]}],"border-color-s":[{"border-s":[hn]}],"border-color-e":[{"border-e":[hn]}],"border-color-t":[{"border-t":[hn]}],"border-color-r":[{"border-r":[hn]}],"border-color-b":[{"border-b":[hn]}],"border-color-l":[{"border-l":[hn]}],"divide-color":[{divide:[hn]}],"outline-style":[{outline:["",...sr()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[_e]}],"ring-w":[{ring:Bn()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[_e]}],"ring-opacity":[{"ring-opacity":[Rn]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[_e]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[Rn]}],"mix-blend":[{"mix-blend":[...lr(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":lr()}],filter:[{filter:["","none"]}],blur:[{blur:[un]}],brightness:[{brightness:[dn]}],contrast:[{contrast:[gn]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[yn]}],"hue-rotate":[{"hue-rotate":[xn]}],invert:[{invert:[En]}],saturate:[{saturate:[Dn]}],sepia:[{sepia:[Fn]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[un]}],"backdrop-brightness":[{"backdrop-brightness":[dn]}],"backdrop-contrast":[{"backdrop-contrast":[gn]}],"backdrop-grayscale":[{"backdrop-grayscale":[yn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[xn]}],"backdrop-invert":[{"backdrop-invert":[En]}],"backdrop-opacity":[{"backdrop-opacity":[Rn]}],"backdrop-saturate":[{"backdrop-saturate":[Dn]}],"backdrop-sepia":[{"backdrop-sepia":[Fn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[pn]}],"border-spacing-x":[{"border-spacing-x":[pn]}],"border-spacing-y":[{"border-spacing-y":[pn]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:gr()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:gr()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[$n]}],"scale-x":[{"scale-x":[$n]}],"scale-y":[{"scale-y":[$n]}],rotate:[{rotate:[isInteger$1,isArbitraryValue]}],"translate-x":[{"translate-x":[Nn]}],"translate-y":[{"translate-y":[Nn]}],"skew-x":[{"skew-x":[Gn]}],"skew-y":[{"skew-y":[Gn]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",_e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[_e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Mn()}],"scroll-mx":[{"scroll-mx":Mn()}],"scroll-my":[{"scroll-my":Mn()}],"scroll-ms":[{"scroll-ms":Mn()}],"scroll-me":[{"scroll-me":Mn()}],"scroll-mt":[{"scroll-mt":Mn()}],"scroll-mr":[{"scroll-mr":Mn()}],"scroll-mb":[{"scroll-mb":Mn()}],"scroll-ml":[{"scroll-ml":Mn()}],"scroll-p":[{"scroll-p":Mn()}],"scroll-px":[{"scroll-px":Mn()}],"scroll-py":[{"scroll-py":Mn()}],"scroll-ps":[{"scroll-ps":Mn()}],"scroll-pe":[{"scroll-pe":Mn()}],"scroll-pt":[{"scroll-pt":Mn()}],"scroll-pr":[{"scroll-pr":Mn()}],"scroll-pb":[{"scroll-pb":Mn()}],"scroll-pl":[{"scroll-pl":Mn()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[_e,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[_e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn$1(..._e){return twMerge(clsx(_e))}const ToastProvider=Provider$2,ToastViewport=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Viewport$2,{ref:un,className:cn$1("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",_e),...e}));ToastViewport.displayName=Viewport$2.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:_e,variant:e,...un},dn)=>jsxRuntimeExports.jsx(Root2$4,{ref:dn,className:cn$1(toastVariants({variant:e}),_e),...un}));Toast.displayName=Root2$4.displayName;const ToastAction=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Action,{ref:un,className:cn$1("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",_e),...e}));ToastAction.displayName=Action.displayName;const ToastClose=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Close$1,{ref:un,className:cn$1("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",_e),"toast-close":"",...e,children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})}));ToastClose.displayName=Close$1.displayName;const ToastTitle=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Title$1,{ref:un,className:cn$1("text-sm font-semibold",_e),...e}));ToastTitle.displayName=Title$1.displayName;const ToastDescription=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Description$1,{ref:un,className:cn$1("text-sm opacity-90",_e),...e}));ToastDescription.displayName=Description$1.displayName;function Toaster$1(){const{toasts:_e}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[_e.map(function({id:e,title:un,description:dn,action:hn,...fn}){return jsxRuntimeExports.jsxs(Toast,{...fn,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[un&&jsxRuntimeExports.jsx(ToastTitle,{children:un}),dn&&jsxRuntimeExports.jsx(ToastDescription,{children:dn})]}),hn,jsxRuntimeExports.jsx(ToastClose,{})]},e)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}var P$1=["light","dark"],E$1="(prefers-color-scheme: dark)",L$2=reactExports.createContext(void 0),D$1={setTheme:_e=>{},themes:[]},j$1=()=>{var _e;return(_e=reactExports.useContext(L$2))!=null?_e:D$1};reactExports.memo(({forcedTheme:_e,storageKey:e,attribute:un,enableSystem:dn,enableColorScheme:hn,defaultTheme:fn,value:pn,attrs:mn,nonce:gn})=>{let yn=fn==="system",xn=un==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${mn.map(Pn=>`'${Pn}'`).join(",")})`};`:`var d=document.documentElement,n='${un}',s='setAttribute';`,En=hn?P$1.includes(fn)&&fn?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${fn}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",bn=(Pn,Tn=!1,In=!0)=>{let Rn=pn?pn[Pn]:Pn,Sn=Tn?Pn+"|| ''":`'${Rn}'`,Dn="";return hn&&In&&!Tn&&P$1.includes(Pn)&&(Dn+=`d.style.colorScheme = '${Pn}';`),un==="class"?Tn||Rn?Dn+=`c.add(${Sn})`:Dn+="null":Rn&&(Dn+=`d[s](n,${Sn})`),Dn},vn=_e?`!function(){${xn}${bn(_e)}}()`:dn?`!function(){try{${xn}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${yn})){var t='${E$1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${bn("dark")}}else{${bn("light")}}}else if(e){${pn?`var x=${JSON.stringify(pn)};`:""}${bn(pn?"x[e]":"e",!0)}}${yn?"":"else{"+bn(fn,!1,!1)+"}"}${En}}catch(e){}}()`:`!function(){try{${xn}var e=localStorage.getItem('${e}');if(e){${pn?`var x=${JSON.stringify(pn)};`:""}${bn(pn?"x[e]":"e",!0)}}else{${bn(fn,!1,!1)};}${En}}catch(t){}}();`;return reactExports.createElement("script",{nonce:gn,dangerouslySetInnerHTML:{__html:vn}})});var Ct$1=_e=>{switch(_e){case"success":return $t$2;case"info":return _t$2;case"warning":return Wt$1;case"error":return Ut$1;default:return null}},Ft$2=Array(12).fill(0),It$1=({visible:_e})=>React.createElement("div",{className:"sonner-loading-wrapper","data-visible":_e},React.createElement("div",{className:"sonner-spinner"},Ft$2.map((e,un)=>React.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${un}`})))),$t$2=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wt$1=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_t$2=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ut$1=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Dt$1=()=>{let[_e,e]=React.useState(document.hidden);return React.useEffect(()=>{let un=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",un),()=>window.removeEventListener("visibilitychange",un)},[]),_e},ct$2=1,ut$2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let un=this.subscribers.indexOf(e);this.subscribers.splice(un,1)}),this.publish=e=>{this.subscribers.forEach(un=>un(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var un;let{message:dn,...hn}=e,fn=typeof(e==null?void 0:e.id)=="number"||((un=e.id)==null?void 0:un.length)>0?e.id:ct$2++,pn=this.toasts.find(gn=>gn.id===fn),mn=e.dismissible===void 0?!0:e.dismissible;return pn?this.toasts=this.toasts.map(gn=>gn.id===fn?(this.publish({...gn,...e,id:fn,title:dn}),{...gn,...e,id:fn,dismissible:mn,title:dn}):gn):this.addToast({title:dn,...hn,dismissible:mn,id:fn}),fn},this.dismiss=e=>(e||this.toasts.forEach(un=>{this.subscribers.forEach(dn=>dn({id:un.id,dismiss:!0}))}),this.subscribers.forEach(un=>un({id:e,dismiss:!0})),e),this.message=(e,un)=>this.create({...un,message:e}),this.error=(e,un)=>this.create({...un,message:e,type:"error"}),this.success=(e,un)=>this.create({...un,type:"success",message:e}),this.info=(e,un)=>this.create({...un,type:"info",message:e}),this.warning=(e,un)=>this.create({...un,type:"warning",message:e}),this.loading=(e,un)=>this.create({...un,type:"loading",message:e}),this.promise=(e,un)=>{if(!un)return;let dn;un.loading!==void 0&&(dn=this.create({...un,promise:e,type:"loading",message:un.loading,description:typeof un.description!="function"?un.description:void 0}));let hn=e instanceof Promise?e:e(),fn=dn!==void 0;return hn.then(async pn=>{if(Ot$2(pn)&&!pn.ok){fn=!1;let mn=typeof un.error=="function"?await un.error(`HTTP error! status: ${pn.status}`):un.error,gn=typeof un.description=="function"?await un.description(`HTTP error! status: ${pn.status}`):un.description;this.create({id:dn,type:"error",message:mn,description:gn})}else if(un.success!==void 0){fn=!1;let mn=typeof un.success=="function"?await un.success(pn):un.success,gn=typeof un.description=="function"?await un.description(pn):un.description;this.create({id:dn,type:"success",message:mn,description:gn})}}).catch(async pn=>{if(un.error!==void 0){fn=!1;let mn=typeof un.error=="function"?await un.error(pn):un.error,gn=typeof un.description=="function"?await un.description(pn):un.description;this.create({id:dn,type:"error",message:mn,description:gn})}}).finally(()=>{var pn;fn&&(this.dismiss(dn),dn=void 0),(pn=un.finally)==null||pn.call(un)}),dn},this.custom=(e,un)=>{let dn=(un==null?void 0:un.id)||ct$2++;return this.create({jsx:e(dn),id:dn,...un}),dn},this.subscribers=[],this.toasts=[]}},v$1=new ut$2,Vt$2=(_e,e)=>{let un=(e==null?void 0:e.id)||ct$2++;return v$1.addToast({title:_e,...e,id:un}),un},Ot$2=_e=>_e&&typeof _e=="object"&&"ok"in _e&&typeof _e.ok=="boolean"&&"status"in _e&&typeof _e.status=="number",Kt$1=Vt$2,Xt$2=()=>v$1.toasts,Jt$2=Object.assign(Kt$1,{success:v$1.success,info:v$1.info,warning:v$1.warning,error:v$1.error,custom:v$1.custom,message:v$1.message,promise:v$1.promise,dismiss:v$1.dismiss,loading:v$1.loading},{getHistory:Xt$2});function ft$2(_e,{insertAt:e}={}){if(typeof document>"u")return;let un=document.head||document.getElementsByTagName("head")[0],dn=document.createElement("style");dn.type="text/css",e==="top"&&un.firstChild?un.insertBefore(dn,un.firstChild):un.appendChild(dn),dn.styleSheet?dn.styleSheet.cssText=_e:dn.appendChild(document.createTextNode(_e))}ft$2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function U$1(_e){return _e.label!==void 0}var qt$1=3,Qt$2="32px",Zt$2=4e3,te$1=356,ee$1=14,oe$1=20,ae$1=200;function ne$1(..._e){return _e.filter(Boolean).join(" ")}var se$1=_e=>{var e,un,dn,hn,fn,pn,mn,gn,yn,xn;let{invert:En,toast:bn,unstyled:vn,interacting:Pn,setHeights:Tn,visibleToasts:In,heights:Rn,index:Sn,toasts:Dn,expanded:$n,removeToast:Fn,defaultRichColors:Gn,closeButton:kn,style:Nn,cancelButtonStyle:Ln,actionButtonStyle:zn,className:Cn="",descriptionClassName:Mn="",duration:Bn,position:Xn,gap:nr,loadingIcon:sr,expandByDefault:lr,classNames:tr,icons:Jn,closeButtonAriaLabel:ar="Close toast",pauseWhenPageIsHidden:gr,cn:qn}=_e,[On,Un]=React.useState(!1),[Yn,er]=React.useState(!1),[Zn,ir]=React.useState(!1),[fr,br]=React.useState(!1),[Tr,Ir]=React.useState(0),[Mr,qr]=React.useState(0),Ar=React.useRef(null),or=React.useRef(null),jr=Sn===0,cr=Sn+1<=In,hr=bn.type,wr=bn.dismissible!==!1,Pr=bn.className||"",kr=bn.descriptionClassName||"",Hr=React.useMemo(()=>Rn.findIndex(is=>is.toastId===bn.id)||0,[Rn,bn.id]),Kr=React.useMemo(()=>{var is;return(is=bn.closeButton)!=null?is:kn},[bn.closeButton,kn]),Nr=React.useMemo(()=>bn.duration||Bn||Zt$2,[bn.duration,Bn]),ns=React.useRef(0),ts=React.useRef(0),Ps=React.useRef(0),ps=React.useRef(null),[Cs,as]=Xn.split("-"),Ss=React.useMemo(()=>Rn.reduce((is,ks,ws)=>ws>=Hr?is:is+ks.height,0),[Rn,Hr]),js=Dt$1(),Bs=bn.invert||En,es=hr==="loading";ts.current=React.useMemo(()=>Hr*nr+Ss,[Hr,Ss]),React.useEffect(()=>{Un(!0)},[]),React.useLayoutEffect(()=>{if(!On)return;let is=or.current,ks=is.style.height;is.style.height="auto";let ws=is.getBoundingClientRect().height;is.style.height=ks,qr(ws),Tn(Rr=>Rr.find(Zr=>Zr.toastId===bn.id)?Rr.map(Zr=>Zr.toastId===bn.id?{...Zr,height:ws}:Zr):[{toastId:bn.id,height:ws,position:bn.position},...Rr])},[On,bn.title,bn.description,Tn,bn.id]);let Vr=React.useCallback(()=>{er(!0),Ir(ts.current),Tn(is=>is.filter(ks=>ks.toastId!==bn.id)),setTimeout(()=>{Fn(bn)},ae$1)},[bn,Fn,Tn,ts]);React.useEffect(()=>{if(bn.promise&&hr==="loading"||bn.duration===1/0||bn.type==="loading")return;let is,ks=Nr;return $n||Pn||gr&&js?(()=>{if(Ps.current<ns.current){let ws=new Date().getTime()-ns.current;ks=ks-ws}Ps.current=new Date().getTime()})():ks!==1/0&&(ns.current=new Date().getTime(),is=setTimeout(()=>{var ws;(ws=bn.onAutoClose)==null||ws.call(bn,bn),Vr()},ks)),()=>clearTimeout(is)},[$n,Pn,lr,bn,Nr,Vr,bn.promise,hr,gr,js]),React.useEffect(()=>{let is=or.current;if(is){let ks=is.getBoundingClientRect().height;return qr(ks),Tn(ws=>[{toastId:bn.id,height:ks,position:bn.position},...ws]),()=>Tn(ws=>ws.filter(Rr=>Rr.toastId!==bn.id))}},[Tn,bn.id]),React.useEffect(()=>{bn.delete&&Vr()},[Vr,bn.delete]);function Wr(){return Jn!=null&&Jn.loading?React.createElement("div",{className:"sonner-loader","data-visible":hr==="loading"},Jn.loading):sr?React.createElement("div",{className:"sonner-loader","data-visible":hr==="loading"},sr):React.createElement(It$1,{visible:hr==="loading"})}return React.createElement("li",{"aria-live":bn.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:or,className:qn(Cn,Pr,tr==null?void 0:tr.toast,(e=bn==null?void 0:bn.classNames)==null?void 0:e.toast,tr==null?void 0:tr.default,tr==null?void 0:tr[hr],(un=bn==null?void 0:bn.classNames)==null?void 0:un[hr]),"data-sonner-toast":"","data-rich-colors":(dn=bn.richColors)!=null?dn:Gn,"data-styled":!(bn.jsx||bn.unstyled||vn),"data-mounted":On,"data-promise":!!bn.promise,"data-removed":Yn,"data-visible":cr,"data-y-position":Cs,"data-x-position":as,"data-index":Sn,"data-front":jr,"data-swiping":Zn,"data-dismissible":wr,"data-type":hr,"data-invert":Bs,"data-swipe-out":fr,"data-expanded":!!($n||lr&&On),style:{"--index":Sn,"--toasts-before":Sn,"--z-index":Dn.length-Sn,"--offset":`${Yn?Tr:ts.current}px`,"--initial-height":lr?"auto":`${Mr}px`,...Nn,...bn.style},onPointerDown:is=>{es||!wr||(Ar.current=new Date,Ir(ts.current),is.target.setPointerCapture(is.pointerId),is.target.tagName!=="BUTTON"&&(ir(!0),ps.current={x:is.clientX,y:is.clientY}))},onPointerUp:()=>{var is,ks,ws,Rr;if(fr||!wr)return;ps.current=null;let Zr=Number(((is=or.current)==null?void 0:is.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ds=new Date().getTime()-((ks=Ar.current)==null?void 0:ks.getTime()),fs=Math.abs(Zr)/ds;if(Math.abs(Zr)>=oe$1||fs>.11){Ir(ts.current),(ws=bn.onDismiss)==null||ws.call(bn,bn),Vr(),br(!0);return}(Rr=or.current)==null||Rr.style.setProperty("--swipe-amount","0px"),ir(!1)},onPointerMove:is=>{var ks;if(!ps.current||!wr)return;let ws=is.clientY-ps.current.y,Rr=is.clientX-ps.current.x,Zr=(Cs==="top"?Math.min:Math.max)(0,ws),ds=is.pointerType==="touch"?10:2;Math.abs(Zr)>ds?(ks=or.current)==null||ks.style.setProperty("--swipe-amount",`${ws}px`):Math.abs(Rr)>ds&&(ps.current=null)}},Kr&&!bn.jsx?React.createElement("button",{"aria-label":ar,"data-disabled":es,"data-close-button":!0,onClick:es||!wr?()=>{}:()=>{var is;Vr(),(is=bn.onDismiss)==null||is.call(bn,bn)},className:qn(tr==null?void 0:tr.closeButton,(hn=bn==null?void 0:bn.classNames)==null?void 0:hn.closeButton)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,bn.jsx||React.isValidElement(bn.title)?bn.jsx||bn.title:React.createElement(React.Fragment,null,hr||bn.icon||bn.promise?React.createElement("div",{"data-icon":"",className:qn(tr==null?void 0:tr.icon,(fn=bn==null?void 0:bn.classNames)==null?void 0:fn.icon)},bn.promise||bn.type==="loading"&&!bn.icon?bn.icon||Wr():null,bn.type!=="loading"?bn.icon||(Jn==null?void 0:Jn[hr])||Ct$1(hr):null):null,React.createElement("div",{"data-content":"",className:qn(tr==null?void 0:tr.content,(pn=bn==null?void 0:bn.classNames)==null?void 0:pn.content)},React.createElement("div",{"data-title":"",className:qn(tr==null?void 0:tr.title,(mn=bn==null?void 0:bn.classNames)==null?void 0:mn.title)},bn.title),bn.description?React.createElement("div",{"data-description":"",className:qn(Mn,kr,tr==null?void 0:tr.description,(gn=bn==null?void 0:bn.classNames)==null?void 0:gn.description)},bn.description):null),React.isValidElement(bn.cancel)?bn.cancel:bn.cancel&&U$1(bn.cancel)?React.createElement("button",{"data-button":!0,"data-cancel":!0,style:bn.cancelButtonStyle||Ln,onClick:is=>{var ks,ws;U$1(bn.cancel)&&wr&&((ws=(ks=bn.cancel).onClick)==null||ws.call(ks,is),Vr())},className:qn(tr==null?void 0:tr.cancelButton,(yn=bn==null?void 0:bn.classNames)==null?void 0:yn.cancelButton)},bn.cancel.label):null,React.isValidElement(bn.action)?bn.action:bn.action&&U$1(bn.action)?React.createElement("button",{"data-button":!0,"data-action":!0,style:bn.actionButtonStyle||zn,onClick:is=>{var ks,ws;U$1(bn.action)&&(is.defaultPrevented||((ws=(ks=bn.action).onClick)==null||ws.call(ks,is),Vr()))},className:qn(tr==null?void 0:tr.actionButton,(xn=bn==null?void 0:bn.classNames)==null?void 0:xn.actionButton)},bn.action.label):null))};function Ht$2(){if(typeof window>"u"||typeof document>"u")return"ltr";let _e=document.documentElement.getAttribute("dir");return _e==="auto"||!_e?window.getComputedStyle(document.documentElement).direction:_e}var Te=_e=>{let{invert:e,position:un="bottom-right",hotkey:dn=["altKey","KeyT"],expand:hn,closeButton:fn,className:pn,offset:mn,theme:gn="light",richColors:yn,duration:xn,style:En,visibleToasts:bn=qt$1,toastOptions:vn,dir:Pn=Ht$2(),gap:Tn=ee$1,loadingIcon:In,icons:Rn,containerAriaLabel:Sn="Notifications",pauseWhenPageIsHidden:Dn,cn:$n=ne$1}=_e,[Fn,Gn]=React.useState([]),kn=React.useMemo(()=>Array.from(new Set([un].concat(Fn.filter(gr=>gr.position).map(gr=>gr.position)))),[Fn,un]),[Nn,Ln]=React.useState([]),[zn,Cn]=React.useState(!1),[Mn,Bn]=React.useState(!1),[Xn,nr]=React.useState(gn!=="system"?gn:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),sr=React.useRef(null),lr=dn.join("+").replace(/Key/g,"").replace(/Digit/g,""),tr=React.useRef(null),Jn=React.useRef(!1),ar=React.useCallback(gr=>{var qn;(qn=Fn.find(On=>On.id===gr.id))!=null&&qn.delete||v$1.dismiss(gr.id),Gn(On=>On.filter(({id:Un})=>Un!==gr.id))},[Fn]);return React.useEffect(()=>v$1.subscribe(gr=>{if(gr.dismiss){Gn(qn=>qn.map(On=>On.id===gr.id?{...On,delete:!0}:On));return}setTimeout(()=>{Gt$1.flushSync(()=>{Gn(qn=>{let On=qn.findIndex(Un=>Un.id===gr.id);return On!==-1?[...qn.slice(0,On),{...qn[On],...gr},...qn.slice(On+1)]:[gr,...qn]})})})}),[]),React.useEffect(()=>{if(gn!=="system"){nr(gn);return}gn==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?nr("dark"):nr("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:gr})=>{nr(gr?"dark":"light")})},[gn]),React.useEffect(()=>{Fn.length<=1&&Cn(!1)},[Fn]),React.useEffect(()=>{let gr=qn=>{var On,Un;dn.every(Yn=>qn[Yn]||qn.code===Yn)&&(Cn(!0),(On=sr.current)==null||On.focus()),qn.code==="Escape"&&(document.activeElement===sr.current||(Un=sr.current)!=null&&Un.contains(document.activeElement))&&Cn(!1)};return document.addEventListener("keydown",gr),()=>document.removeEventListener("keydown",gr)},[dn]),React.useEffect(()=>{if(sr.current)return()=>{tr.current&&(tr.current.focus({preventScroll:!0}),tr.current=null,Jn.current=!1)}},[sr.current]),Fn.length?React.createElement("section",{"aria-label":`${Sn} ${lr}`,tabIndex:-1},kn.map((gr,qn)=>{var On;let[Un,Yn]=gr.split("-");return React.createElement("ol",{key:gr,dir:Pn==="auto"?Ht$2():Pn,tabIndex:-1,ref:sr,className:pn,"data-sonner-toaster":!0,"data-theme":Xn,"data-y-position":Un,"data-x-position":Yn,style:{"--front-toast-height":`${((On=Nn[0])==null?void 0:On.height)||0}px`,"--offset":typeof mn=="number"?`${mn}px`:mn||Qt$2,"--width":`${te$1}px`,"--gap":`${Tn}px`,...En},onBlur:er=>{Jn.current&&!er.currentTarget.contains(er.relatedTarget)&&(Jn.current=!1,tr.current&&(tr.current.focus({preventScroll:!0}),tr.current=null))},onFocus:er=>{er.target instanceof HTMLElement&&er.target.dataset.dismissible==="false"||Jn.current||(Jn.current=!0,tr.current=er.relatedTarget)},onMouseEnter:()=>Cn(!0),onMouseMove:()=>Cn(!0),onMouseLeave:()=>{Mn||Cn(!1)},onPointerDown:er=>{er.target instanceof HTMLElement&&er.target.dataset.dismissible==="false"||Bn(!0)},onPointerUp:()=>Bn(!1)},Fn.filter(er=>!er.position&&qn===0||er.position===gr).map((er,Zn)=>{var ir,fr;return React.createElement(se$1,{key:er.id,icons:Rn,index:Zn,toast:er,defaultRichColors:yn,duration:(ir=vn==null?void 0:vn.duration)!=null?ir:xn,className:vn==null?void 0:vn.className,descriptionClassName:vn==null?void 0:vn.descriptionClassName,invert:e,visibleToasts:bn,closeButton:(fr=vn==null?void 0:vn.closeButton)!=null?fr:fn,interacting:Mn,position:gr,style:vn==null?void 0:vn.style,unstyled:vn==null?void 0:vn.unstyled,classNames:vn==null?void 0:vn.classNames,cancelButtonStyle:vn==null?void 0:vn.cancelButtonStyle,actionButtonStyle:vn==null?void 0:vn.actionButtonStyle,removeToast:ar,toasts:Fn.filter(br=>br.position==er.position),heights:Nn.filter(br=>br.position==er.position),setHeights:Ln,expandByDefault:hn,gap:Tn,loadingIcon:In,expanded:zn,pauseWhenPageIsHidden:Dn,cn:$n})}))})):null};const Toaster=({..._e})=>{const{theme:e="system"}=j$1();return jsxRuntimeExports.jsx(Te,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},..._e})};var useReactId=React$1.useId||(()=>{}),count$1=0;function useId(_e){const[e,un]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{_e||un(dn=>dn??String(count$1++))},[_e]),_e||(e?`radix-${e}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max$1=Math.max,round=Math.round,floor=Math.floor,createCoords=_e=>({x:_e,y:_e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(_e,e,un){return max$1(_e,min(e,un))}function evaluate(_e,e){return typeof _e=="function"?_e(e):_e}function getSide(_e){return _e.split("-")[0]}function getAlignment(_e){return _e.split("-")[1]}function getOppositeAxis(_e){return _e==="x"?"y":"x"}function getAxisLength(_e){return _e==="y"?"height":"width"}function getSideAxis(_e){return["top","bottom"].includes(getSide(_e))?"y":"x"}function getAlignmentAxis(_e){return getOppositeAxis(getSideAxis(_e))}function getAlignmentSides(_e,e,un){un===void 0&&(un=!1);const dn=getAlignment(_e),hn=getAlignmentAxis(_e),fn=getAxisLength(hn);let pn=hn==="x"?dn===(un?"end":"start")?"right":"left":dn==="start"?"bottom":"top";return e.reference[fn]>e.floating[fn]&&(pn=getOppositePlacement(pn)),[pn,getOppositePlacement(pn)]}function getExpandedPlacements(_e){const e=getOppositePlacement(_e);return[getOppositeAlignmentPlacement(_e),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(_e){return _e.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(_e,e,un){const dn=["left","right"],hn=["right","left"],fn=["top","bottom"],pn=["bottom","top"];switch(_e){case"top":case"bottom":return un?e?hn:dn:e?dn:hn;case"left":case"right":return e?fn:pn;default:return[]}}function getOppositeAxisPlacements(_e,e,un,dn){const hn=getAlignment(_e);let fn=getSideList(getSide(_e),un==="start",dn);return hn&&(fn=fn.map(pn=>pn+"-"+hn),e&&(fn=fn.concat(fn.map(getOppositeAlignmentPlacement)))),fn}function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(_e){return{top:0,right:0,bottom:0,left:0,..._e}}function getPaddingObject(_e){return typeof _e!="number"?expandPaddingObject(_e):{top:_e,right:_e,bottom:_e,left:_e}}function rectToClientRect(_e){const{x:e,y:un,width:dn,height:hn}=_e;return{width:dn,height:hn,top:un,left:e,right:e+dn,bottom:un+hn,x:e,y:un}}function computeCoordsFromPlacement(_e,e,un){let{reference:dn,floating:hn}=_e;const fn=getSideAxis(e),pn=getAlignmentAxis(e),mn=getAxisLength(pn),gn=getSide(e),yn=fn==="y",xn=dn.x+dn.width/2-hn.width/2,En=dn.y+dn.height/2-hn.height/2,bn=dn[mn]/2-hn[mn]/2;let vn;switch(gn){case"top":vn={x:xn,y:dn.y-hn.height};break;case"bottom":vn={x:xn,y:dn.y+dn.height};break;case"right":vn={x:dn.x+dn.width,y:En};break;case"left":vn={x:dn.x-hn.width,y:En};break;default:vn={x:dn.x,y:dn.y}}switch(getAlignment(e)){case"start":vn[pn]-=bn*(un&&yn?-1:1);break;case"end":vn[pn]+=bn*(un&&yn?-1:1);break}return vn}const computePosition$1=async(_e,e,un)=>{const{placement:dn="bottom",strategy:hn="absolute",middleware:fn=[],platform:pn}=un,mn=fn.filter(Boolean),gn=await(pn.isRTL==null?void 0:pn.isRTL(e));let yn=await pn.getElementRects({reference:_e,floating:e,strategy:hn}),{x:xn,y:En}=computeCoordsFromPlacement(yn,dn,gn),bn=dn,vn={},Pn=0;for(let Tn=0;Tn<mn.length;Tn++){const{name:In,fn:Rn}=mn[Tn],{x:Sn,y:Dn,data:$n,reset:Fn}=await Rn({x:xn,y:En,initialPlacement:dn,placement:bn,strategy:hn,middlewareData:vn,rects:yn,platform:pn,elements:{reference:_e,floating:e}});xn=Sn??xn,En=Dn??En,vn={...vn,[In]:{...vn[In],...$n}},Fn&&Pn<=50&&(Pn++,typeof Fn=="object"&&(Fn.placement&&(bn=Fn.placement),Fn.rects&&(yn=Fn.rects===!0?await pn.getElementRects({reference:_e,floating:e,strategy:hn}):Fn.rects),{x:xn,y:En}=computeCoordsFromPlacement(yn,bn,gn)),Tn=-1)}return{x:xn,y:En,placement:bn,strategy:hn,middlewareData:vn}};async function detectOverflow(_e,e){var un;e===void 0&&(e={});const{x:dn,y:hn,platform:fn,rects:pn,elements:mn,strategy:gn}=_e,{boundary:yn="clippingAncestors",rootBoundary:xn="viewport",elementContext:En="floating",altBoundary:bn=!1,padding:vn=0}=evaluate(e,_e),Pn=getPaddingObject(vn),In=mn[bn?En==="floating"?"reference":"floating":En],Rn=rectToClientRect(await fn.getClippingRect({element:(un=await(fn.isElement==null?void 0:fn.isElement(In)))==null||un?In:In.contextElement||await(fn.getDocumentElement==null?void 0:fn.getDocumentElement(mn.floating)),boundary:yn,rootBoundary:xn,strategy:gn})),Sn=En==="floating"?{x:dn,y:hn,width:pn.floating.width,height:pn.floating.height}:pn.reference,Dn=await(fn.getOffsetParent==null?void 0:fn.getOffsetParent(mn.floating)),$n=await(fn.isElement==null?void 0:fn.isElement(Dn))?await(fn.getScale==null?void 0:fn.getScale(Dn))||{x:1,y:1}:{x:1,y:1},Fn=rectToClientRect(fn.convertOffsetParentRelativeRectToViewportRelativeRect?await fn.convertOffsetParentRelativeRectToViewportRelativeRect({elements:mn,rect:Sn,offsetParent:Dn,strategy:gn}):Sn);return{top:(Rn.top-Fn.top+Pn.top)/$n.y,bottom:(Fn.bottom-Rn.bottom+Pn.bottom)/$n.y,left:(Rn.left-Fn.left+Pn.left)/$n.x,right:(Fn.right-Rn.right+Pn.right)/$n.x}}const arrow$3=_e=>({name:"arrow",options:_e,async fn(e){const{x:un,y:dn,placement:hn,rects:fn,platform:pn,elements:mn,middlewareData:gn}=e,{element:yn,padding:xn=0}=evaluate(_e,e)||{};if(yn==null)return{};const En=getPaddingObject(xn),bn={x:un,y:dn},vn=getAlignmentAxis(hn),Pn=getAxisLength(vn),Tn=await pn.getDimensions(yn),In=vn==="y",Rn=In?"top":"left",Sn=In?"bottom":"right",Dn=In?"clientHeight":"clientWidth",$n=fn.reference[Pn]+fn.reference[vn]-bn[vn]-fn.floating[Pn],Fn=bn[vn]-fn.reference[vn],Gn=await(pn.getOffsetParent==null?void 0:pn.getOffsetParent(yn));let kn=Gn?Gn[Dn]:0;(!kn||!await(pn.isElement==null?void 0:pn.isElement(Gn)))&&(kn=mn.floating[Dn]||fn.floating[Pn]);const Nn=$n/2-Fn/2,Ln=kn/2-Tn[Pn]/2-1,zn=min(En[Rn],Ln),Cn=min(En[Sn],Ln),Mn=zn,Bn=kn-Tn[Pn]-Cn,Xn=kn/2-Tn[Pn]/2+Nn,nr=clamp$1(Mn,Xn,Bn),sr=!gn.arrow&&getAlignment(hn)!=null&&Xn!==nr&&fn.reference[Pn]/2-(Xn<Mn?zn:Cn)-Tn[Pn]/2<0,lr=sr?Xn<Mn?Xn-Mn:Xn-Bn:0;return{[vn]:bn[vn]+lr,data:{[vn]:nr,centerOffset:Xn-nr-lr,...sr&&{alignmentOffset:lr}},reset:sr}}}),flip$2=function(_e){return _e===void 0&&(_e={}),{name:"flip",options:_e,async fn(e){var un,dn;const{placement:hn,middlewareData:fn,rects:pn,initialPlacement:mn,platform:gn,elements:yn}=e,{mainAxis:xn=!0,crossAxis:En=!0,fallbackPlacements:bn,fallbackStrategy:vn="bestFit",fallbackAxisSideDirection:Pn="none",flipAlignment:Tn=!0,...In}=evaluate(_e,e);if((un=fn.arrow)!=null&&un.alignmentOffset)return{};const Rn=getSide(hn),Sn=getSideAxis(mn),Dn=getSide(mn)===mn,$n=await(gn.isRTL==null?void 0:gn.isRTL(yn.floating)),Fn=bn||(Dn||!Tn?[getOppositePlacement(mn)]:getExpandedPlacements(mn)),Gn=Pn!=="none";!bn&&Gn&&Fn.push(...getOppositeAxisPlacements(mn,Tn,Pn,$n));const kn=[mn,...Fn],Nn=await detectOverflow(e,In),Ln=[];let zn=((dn=fn.flip)==null?void 0:dn.overflows)||[];if(xn&&Ln.push(Nn[Rn]),En){const Xn=getAlignmentSides(hn,pn,$n);Ln.push(Nn[Xn[0]],Nn[Xn[1]])}if(zn=[...zn,{placement:hn,overflows:Ln}],!Ln.every(Xn=>Xn<=0)){var Cn,Mn;const Xn=(((Cn=fn.flip)==null?void 0:Cn.index)||0)+1,nr=kn[Xn];if(nr)return{data:{index:Xn,overflows:zn},reset:{placement:nr}};let sr=(Mn=zn.filter(lr=>lr.overflows[0]<=0).sort((lr,tr)=>lr.overflows[1]-tr.overflows[1])[0])==null?void 0:Mn.placement;if(!sr)switch(vn){case"bestFit":{var Bn;const lr=(Bn=zn.filter(tr=>{if(Gn){const Jn=getSideAxis(tr.placement);return Jn===Sn||Jn==="y"}return!0}).map(tr=>[tr.placement,tr.overflows.filter(Jn=>Jn>0).reduce((Jn,ar)=>Jn+ar,0)]).sort((tr,Jn)=>tr[1]-Jn[1])[0])==null?void 0:Bn[0];lr&&(sr=lr);break}case"initialPlacement":sr=mn;break}if(hn!==sr)return{reset:{placement:sr}}}return{}}}};function getSideOffsets(_e,e){return{top:_e.top-e.height,right:_e.right-e.width,bottom:_e.bottom-e.height,left:_e.left-e.width}}function isAnySideFullyClipped(_e){return sides.some(e=>_e[e]>=0)}const hide$2=function(_e){return _e===void 0&&(_e={}),{name:"hide",options:_e,async fn(e){const{rects:un}=e,{strategy:dn="referenceHidden",...hn}=evaluate(_e,e);switch(dn){case"referenceHidden":{const fn=await detectOverflow(e,{...hn,elementContext:"reference"}),pn=getSideOffsets(fn,un.reference);return{data:{referenceHiddenOffsets:pn,referenceHidden:isAnySideFullyClipped(pn)}}}case"escaped":{const fn=await detectOverflow(e,{...hn,altBoundary:!0}),pn=getSideOffsets(fn,un.floating);return{data:{escapedOffsets:pn,escaped:isAnySideFullyClipped(pn)}}}default:return{}}}}};async function convertValueToCoords(_e,e){const{placement:un,platform:dn,elements:hn}=_e,fn=await(dn.isRTL==null?void 0:dn.isRTL(hn.floating)),pn=getSide(un),mn=getAlignment(un),gn=getSideAxis(un)==="y",yn=["left","top"].includes(pn)?-1:1,xn=fn&&gn?-1:1,En=evaluate(e,_e);let{mainAxis:bn,crossAxis:vn,alignmentAxis:Pn}=typeof En=="number"?{mainAxis:En,crossAxis:0,alignmentAxis:null}:{mainAxis:En.mainAxis||0,crossAxis:En.crossAxis||0,alignmentAxis:En.alignmentAxis};return mn&&typeof Pn=="number"&&(vn=mn==="end"?Pn*-1:Pn),gn?{x:vn*xn,y:bn*yn}:{x:bn*yn,y:vn*xn}}const offset$2=function(_e){return _e===void 0&&(_e=0),{name:"offset",options:_e,async fn(e){var un,dn;const{x:hn,y:fn,placement:pn,middlewareData:mn}=e,gn=await convertValueToCoords(e,_e);return pn===((un=mn.offset)==null?void 0:un.placement)&&(dn=mn.arrow)!=null&&dn.alignmentOffset?{}:{x:hn+gn.x,y:fn+gn.y,data:{...gn,placement:pn}}}}},shift$2=function(_e){return _e===void 0&&(_e={}),{name:"shift",options:_e,async fn(e){const{x:un,y:dn,placement:hn}=e,{mainAxis:fn=!0,crossAxis:pn=!1,limiter:mn={fn:In=>{let{x:Rn,y:Sn}=In;return{x:Rn,y:Sn}}},...gn}=evaluate(_e,e),yn={x:un,y:dn},xn=await detectOverflow(e,gn),En=getSideAxis(getSide(hn)),bn=getOppositeAxis(En);let vn=yn[bn],Pn=yn[En];if(fn){const In=bn==="y"?"top":"left",Rn=bn==="y"?"bottom":"right",Sn=vn+xn[In],Dn=vn-xn[Rn];vn=clamp$1(Sn,vn,Dn)}if(pn){const In=En==="y"?"top":"left",Rn=En==="y"?"bottom":"right",Sn=Pn+xn[In],Dn=Pn-xn[Rn];Pn=clamp$1(Sn,Pn,Dn)}const Tn=mn.fn({...e,[bn]:vn,[En]:Pn});return{...Tn,data:{x:Tn.x-un,y:Tn.y-dn,enabled:{[bn]:fn,[En]:pn}}}}}},limitShift$2=function(_e){return _e===void 0&&(_e={}),{options:_e,fn(e){const{x:un,y:dn,placement:hn,rects:fn,middlewareData:pn}=e,{offset:mn=0,mainAxis:gn=!0,crossAxis:yn=!0}=evaluate(_e,e),xn={x:un,y:dn},En=getSideAxis(hn),bn=getOppositeAxis(En);let vn=xn[bn],Pn=xn[En];const Tn=evaluate(mn,e),In=typeof Tn=="number"?{mainAxis:Tn,crossAxis:0}:{mainAxis:0,crossAxis:0,...Tn};if(gn){const Dn=bn==="y"?"height":"width",$n=fn.reference[bn]-fn.floating[Dn]+In.mainAxis,Fn=fn.reference[bn]+fn.reference[Dn]-In.mainAxis;vn<$n?vn=$n:vn>Fn&&(vn=Fn)}if(yn){var Rn,Sn;const Dn=bn==="y"?"width":"height",$n=["top","left"].includes(getSide(hn)),Fn=fn.reference[En]-fn.floating[Dn]+($n&&((Rn=pn.offset)==null?void 0:Rn[En])||0)+($n?0:In.crossAxis),Gn=fn.reference[En]+fn.reference[Dn]+($n?0:((Sn=pn.offset)==null?void 0:Sn[En])||0)-($n?In.crossAxis:0);Pn<Fn?Pn=Fn:Pn>Gn&&(Pn=Gn)}return{[bn]:vn,[En]:Pn}}}},size$2=function(_e){return _e===void 0&&(_e={}),{name:"size",options:_e,async fn(e){var un,dn;const{placement:hn,rects:fn,platform:pn,elements:mn}=e,{apply:gn=()=>{},...yn}=evaluate(_e,e),xn=await detectOverflow(e,yn),En=getSide(hn),bn=getAlignment(hn),vn=getSideAxis(hn)==="y",{width:Pn,height:Tn}=fn.floating;let In,Rn;En==="top"||En==="bottom"?(In=En,Rn=bn===(await(pn.isRTL==null?void 0:pn.isRTL(mn.floating))?"start":"end")?"left":"right"):(Rn=En,In=bn==="end"?"top":"bottom");const Sn=Tn-xn.top-xn.bottom,Dn=Pn-xn.left-xn.right,$n=min(Tn-xn[In],Sn),Fn=min(Pn-xn[Rn],Dn),Gn=!e.middlewareData.shift;let kn=$n,Nn=Fn;if((un=e.middlewareData.shift)!=null&&un.enabled.x&&(Nn=Dn),(dn=e.middlewareData.shift)!=null&&dn.enabled.y&&(kn=Sn),Gn&&!bn){const zn=max$1(xn.left,0),Cn=max$1(xn.right,0),Mn=max$1(xn.top,0),Bn=max$1(xn.bottom,0);vn?Nn=Pn-2*(zn!==0||Cn!==0?zn+Cn:max$1(xn.left,xn.right)):kn=Tn-2*(Mn!==0||Bn!==0?Mn+Bn:max$1(xn.top,xn.bottom))}await gn({...e,availableWidth:Nn,availableHeight:kn});const Ln=await pn.getDimensions(mn.floating);return Pn!==Ln.width||Tn!==Ln.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_e){return isNode$1(_e)?(_e.nodeName||"").toLowerCase():"#document"}function getWindow(_e){var e;return(_e==null||(e=_e.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(_e){var e;return(e=(isNode$1(_e)?_e.ownerDocument:_e.document)||window.document)==null?void 0:e.documentElement}function isNode$1(_e){return hasWindow()?_e instanceof Node||_e instanceof getWindow(_e).Node:!1}function isElement(_e){return hasWindow()?_e instanceof Element||_e instanceof getWindow(_e).Element:!1}function isHTMLElement(_e){return hasWindow()?_e instanceof HTMLElement||_e instanceof getWindow(_e).HTMLElement:!1}function isShadowRoot(_e){return!hasWindow()||typeof ShadowRoot>"u"?!1:_e instanceof ShadowRoot||_e instanceof getWindow(_e).ShadowRoot}function isOverflowElement(_e){const{overflow:e,overflowX:un,overflowY:dn,display:hn}=getComputedStyle$1(_e);return/auto|scroll|overlay|hidden|clip/.test(e+dn+un)&&!["inline","contents"].includes(hn)}function isTableElement(_e){return["table","td","th"].includes(getNodeName(_e))}function isTopLayer(_e){return[":popover-open",":modal"].some(e=>{try{return _e.matches(e)}catch{return!1}})}function isContainingBlock(_e){const e=isWebKit(),un=isElement(_e)?getComputedStyle$1(_e):_e;return un.transform!=="none"||un.perspective!=="none"||(un.containerType?un.containerType!=="normal":!1)||!e&&(un.backdropFilter?un.backdropFilter!=="none":!1)||!e&&(un.filter?un.filter!=="none":!1)||["transform","perspective","filter"].some(dn=>(un.willChange||"").includes(dn))||["paint","layout","strict","content"].some(dn=>(un.contain||"").includes(dn))}function getContainingBlock(_e){let e=getParentNode(_e);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_e){return["html","body","#document"].includes(getNodeName(_e))}function getComputedStyle$1(_e){return getWindow(_e).getComputedStyle(_e)}function getNodeScroll(_e){return isElement(_e)?{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}:{scrollLeft:_e.scrollX,scrollTop:_e.scrollY}}function getParentNode(_e){if(getNodeName(_e)==="html")return _e;const e=_e.assignedSlot||_e.parentNode||isShadowRoot(_e)&&_e.host||getDocumentElement(_e);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(_e){const e=getParentNode(_e);return isLastTraversableNode(e)?_e.ownerDocument?_e.ownerDocument.body:_e.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(_e,e,un){var dn;e===void 0&&(e=[]),un===void 0&&(un=!0);const hn=getNearestOverflowAncestor(_e),fn=hn===((dn=_e.ownerDocument)==null?void 0:dn.body),pn=getWindow(hn);if(fn){const mn=getFrameElement(pn);return e.concat(pn,pn.visualViewport||[],isOverflowElement(hn)?hn:[],mn&&un?getOverflowAncestors(mn):[])}return e.concat(hn,getOverflowAncestors(hn,[],un))}function getFrameElement(_e){return _e.parent&&Object.getPrototypeOf(_e.parent)?_e.frameElement:null}function getCssDimensions(_e){const e=getComputedStyle$1(_e);let un=parseFloat(e.width)||0,dn=parseFloat(e.height)||0;const hn=isHTMLElement(_e),fn=hn?_e.offsetWidth:un,pn=hn?_e.offsetHeight:dn,mn=round(un)!==fn||round(dn)!==pn;return mn&&(un=fn,dn=pn),{width:un,height:dn,$:mn}}function unwrapElement(_e){return isElement(_e)?_e:_e.contextElement}function getScale(_e){const e=unwrapElement(_e);if(!isHTMLElement(e))return createCoords(1);const un=e.getBoundingClientRect(),{width:dn,height:hn,$:fn}=getCssDimensions(e);let pn=(fn?round(un.width):un.width)/dn,mn=(fn?round(un.height):un.height)/hn;return(!pn||!Number.isFinite(pn))&&(pn=1),(!mn||!Number.isFinite(mn))&&(mn=1),{x:pn,y:mn}}const noOffsets=createCoords(0);function getVisualOffsets(_e){const e=getWindow(_e);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(_e,e,un){return e===void 0&&(e=!1),!un||e&&un!==getWindow(_e)?!1:e}function getBoundingClientRect(_e,e,un,dn){e===void 0&&(e=!1),un===void 0&&(un=!1);const hn=_e.getBoundingClientRect(),fn=unwrapElement(_e);let pn=createCoords(1);e&&(dn?isElement(dn)&&(pn=getScale(dn)):pn=getScale(_e));const mn=shouldAddVisualOffsets(fn,un,dn)?getVisualOffsets(fn):createCoords(0);let gn=(hn.left+mn.x)/pn.x,yn=(hn.top+mn.y)/pn.y,xn=hn.width/pn.x,En=hn.height/pn.y;if(fn){const bn=getWindow(fn),vn=dn&&isElement(dn)?getWindow(dn):dn;let Pn=bn,Tn=getFrameElement(Pn);for(;Tn&&dn&&vn!==Pn;){const In=getScale(Tn),Rn=Tn.getBoundingClientRect(),Sn=getComputedStyle$1(Tn),Dn=Rn.left+(Tn.clientLeft+parseFloat(Sn.paddingLeft))*In.x,$n=Rn.top+(Tn.clientTop+parseFloat(Sn.paddingTop))*In.y;gn*=In.x,yn*=In.y,xn*=In.x,En*=In.y,gn+=Dn,yn+=$n,Pn=getWindow(Tn),Tn=getFrameElement(Pn)}}return rectToClientRect({width:xn,height:En,x:gn,y:yn})}function convertOffsetParentRelativeRectToViewportRelativeRect(_e){let{elements:e,rect:un,offsetParent:dn,strategy:hn}=_e;const fn=hn==="fixed",pn=getDocumentElement(dn),mn=e?isTopLayer(e.floating):!1;if(dn===pn||mn&&fn)return un;let gn={scrollLeft:0,scrollTop:0},yn=createCoords(1);const xn=createCoords(0),En=isHTMLElement(dn);if((En||!En&&!fn)&&((getNodeName(dn)!=="body"||isOverflowElement(pn))&&(gn=getNodeScroll(dn)),isHTMLElement(dn))){const bn=getBoundingClientRect(dn);yn=getScale(dn),xn.x=bn.x+dn.clientLeft,xn.y=bn.y+dn.clientTop}return{width:un.width*yn.x,height:un.height*yn.y,x:un.x*yn.x-gn.scrollLeft*yn.x+xn.x,y:un.y*yn.y-gn.scrollTop*yn.y+xn.y}}function getClientRects(_e){return Array.from(_e.getClientRects())}function getWindowScrollBarX(_e,e){const un=getNodeScroll(_e).scrollLeft;return e?e.left+un:getBoundingClientRect(getDocumentElement(_e)).left+un}function getDocumentRect(_e){const e=getDocumentElement(_e),un=getNodeScroll(_e),dn=_e.ownerDocument.body,hn=max$1(e.scrollWidth,e.clientWidth,dn.scrollWidth,dn.clientWidth),fn=max$1(e.scrollHeight,e.clientHeight,dn.scrollHeight,dn.clientHeight);let pn=-un.scrollLeft+getWindowScrollBarX(_e);const mn=-un.scrollTop;return getComputedStyle$1(dn).direction==="rtl"&&(pn+=max$1(e.clientWidth,dn.clientWidth)-hn),{width:hn,height:fn,x:pn,y:mn}}function getViewportRect(_e,e){const un=getWindow(_e),dn=getDocumentElement(_e),hn=un.visualViewport;let fn=dn.clientWidth,pn=dn.clientHeight,mn=0,gn=0;if(hn){fn=hn.width,pn=hn.height;const yn=isWebKit();(!yn||yn&&e==="fixed")&&(mn=hn.offsetLeft,gn=hn.offsetTop)}return{width:fn,height:pn,x:mn,y:gn}}function getInnerBoundingClientRect(_e,e){const un=getBoundingClientRect(_e,!0,e==="fixed"),dn=un.top+_e.clientTop,hn=un.left+_e.clientLeft,fn=isHTMLElement(_e)?getScale(_e):createCoords(1),pn=_e.clientWidth*fn.x,mn=_e.clientHeight*fn.y,gn=hn*fn.x,yn=dn*fn.y;return{width:pn,height:mn,x:gn,y:yn}}function getClientRectFromClippingAncestor(_e,e,un){let dn;if(e==="viewport")dn=getViewportRect(_e,un);else if(e==="document")dn=getDocumentRect(getDocumentElement(_e));else if(isElement(e))dn=getInnerBoundingClientRect(e,un);else{const hn=getVisualOffsets(_e);dn={...e,x:e.x-hn.x,y:e.y-hn.y}}return rectToClientRect(dn)}function hasFixedPositionAncestor(_e,e){const un=getParentNode(_e);return un===e||!isElement(un)||isLastTraversableNode(un)?!1:getComputedStyle$1(un).position==="fixed"||hasFixedPositionAncestor(un,e)}function getClippingElementAncestors(_e,e){const un=e.get(_e);if(un)return un;let dn=getOverflowAncestors(_e,[],!1).filter(mn=>isElement(mn)&&getNodeName(mn)!=="body"),hn=null;const fn=getComputedStyle$1(_e).position==="fixed";let pn=fn?getParentNode(_e):_e;for(;isElement(pn)&&!isLastTraversableNode(pn);){const mn=getComputedStyle$1(pn),gn=isContainingBlock(pn);!gn&&mn.position==="fixed"&&(hn=null),(fn?!gn&&!hn:!gn&&mn.position==="static"&&!!hn&&["absolute","fixed"].includes(hn.position)||isOverflowElement(pn)&&!gn&&hasFixedPositionAncestor(_e,pn))?dn=dn.filter(xn=>xn!==pn):hn=mn,pn=getParentNode(pn)}return e.set(_e,dn),dn}function getClippingRect(_e){let{element:e,boundary:un,rootBoundary:dn,strategy:hn}=_e;const pn=[...un==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(un),dn],mn=pn[0],gn=pn.reduce((yn,xn)=>{const En=getClientRectFromClippingAncestor(e,xn,hn);return yn.top=max$1(En.top,yn.top),yn.right=min(En.right,yn.right),yn.bottom=min(En.bottom,yn.bottom),yn.left=max$1(En.left,yn.left),yn},getClientRectFromClippingAncestor(e,mn,hn));return{width:gn.right-gn.left,height:gn.bottom-gn.top,x:gn.left,y:gn.top}}function getDimensions(_e){const{width:e,height:un}=getCssDimensions(_e);return{width:e,height:un}}function getRectRelativeToOffsetParent(_e,e,un){const dn=isHTMLElement(e),hn=getDocumentElement(e),fn=un==="fixed",pn=getBoundingClientRect(_e,!0,fn,e);let mn={scrollLeft:0,scrollTop:0};const gn=createCoords(0);if(dn||!dn&&!fn)if((getNodeName(e)!=="body"||isOverflowElement(hn))&&(mn=getNodeScroll(e)),dn){const vn=getBoundingClientRect(e,!0,fn,e);gn.x=vn.x+e.clientLeft,gn.y=vn.y+e.clientTop}else hn&&(gn.x=getWindowScrollBarX(hn));let yn=0,xn=0;if(hn&&!dn&&!fn){const vn=hn.getBoundingClientRect();xn=vn.top+mn.scrollTop,yn=vn.left+mn.scrollLeft-getWindowScrollBarX(hn,vn)}const En=pn.left+mn.scrollLeft-gn.x-yn,bn=pn.top+mn.scrollTop-gn.y-xn;return{x:En,y:bn,width:pn.width,height:pn.height}}function isStaticPositioned(_e){return getComputedStyle$1(_e).position==="static"}function getTrueOffsetParent(_e,e){if(!isHTMLElement(_e)||getComputedStyle$1(_e).position==="fixed")return null;if(e)return e(_e);let un=_e.offsetParent;return getDocumentElement(_e)===un&&(un=un.ownerDocument.body),un}function getOffsetParent(_e,e){const un=getWindow(_e);if(isTopLayer(_e))return un;if(!isHTMLElement(_e)){let hn=getParentNode(_e);for(;hn&&!isLastTraversableNode(hn);){if(isElement(hn)&&!isStaticPositioned(hn))return hn;hn=getParentNode(hn)}return un}let dn=getTrueOffsetParent(_e,e);for(;dn&&isTableElement(dn)&&isStaticPositioned(dn);)dn=getTrueOffsetParent(dn,e);return dn&&isLastTraversableNode(dn)&&isStaticPositioned(dn)&&!isContainingBlock(dn)?un:dn||getContainingBlock(_e)||un}const getElementRects=async function(_e){const e=this.getOffsetParent||getOffsetParent,un=this.getDimensions,dn=await un(_e.floating);return{reference:getRectRelativeToOffsetParent(_e.reference,await e(_e.floating),_e.strategy),floating:{x:0,y:0,width:dn.width,height:dn.height}}};function isRTL(_e){return getComputedStyle$1(_e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_e,e){let un=null,dn;const hn=getDocumentElement(_e);function fn(){var mn;clearTimeout(dn),(mn=un)==null||mn.disconnect(),un=null}function pn(mn,gn){mn===void 0&&(mn=!1),gn===void 0&&(gn=1),fn();const{left:yn,top:xn,width:En,height:bn}=_e.getBoundingClientRect();if(mn||e(),!En||!bn)return;const vn=floor(xn),Pn=floor(hn.clientWidth-(yn+En)),Tn=floor(hn.clientHeight-(xn+bn)),In=floor(yn),Sn={rootMargin:-vn+"px "+-Pn+"px "+-Tn+"px "+-In+"px",threshold:max$1(0,min(1,gn))||1};let Dn=!0;function $n(Fn){const Gn=Fn[0].intersectionRatio;if(Gn!==gn){if(!Dn)return pn();Gn?pn(!1,Gn):dn=setTimeout(()=>{pn(!1,1e-7)},1e3)}Dn=!1}try{un=new IntersectionObserver($n,{...Sn,root:hn.ownerDocument})}catch{un=new IntersectionObserver($n,Sn)}un.observe(_e)}return pn(!0),fn}function autoUpdate(_e,e,un,dn){dn===void 0&&(dn={});const{ancestorScroll:hn=!0,ancestorResize:fn=!0,elementResize:pn=typeof ResizeObserver=="function",layoutShift:mn=typeof IntersectionObserver=="function",animationFrame:gn=!1}=dn,yn=unwrapElement(_e),xn=hn||fn?[...yn?getOverflowAncestors(yn):[],...getOverflowAncestors(e)]:[];xn.forEach(Rn=>{hn&&Rn.addEventListener("scroll",un,{passive:!0}),fn&&Rn.addEventListener("resize",un)});const En=yn&&mn?observeMove(yn,un):null;let bn=-1,vn=null;pn&&(vn=new ResizeObserver(Rn=>{let[Sn]=Rn;Sn&&Sn.target===yn&&vn&&(vn.unobserve(e),cancelAnimationFrame(bn),bn=requestAnimationFrame(()=>{var Dn;(Dn=vn)==null||Dn.observe(e)})),un()}),yn&&!gn&&vn.observe(yn),vn.observe(e));let Pn,Tn=gn?getBoundingClientRect(_e):null;gn&&In();function In(){const Rn=getBoundingClientRect(_e);Tn&&(Rn.x!==Tn.x||Rn.y!==Tn.y||Rn.width!==Tn.width||Rn.height!==Tn.height)&&un(),Tn=Rn,Pn=requestAnimationFrame(In)}return un(),()=>{var Rn;xn.forEach(Sn=>{hn&&Sn.removeEventListener("scroll",un),fn&&Sn.removeEventListener("resize",un)}),En==null||En(),(Rn=vn)==null||Rn.disconnect(),vn=null,gn&&cancelAnimationFrame(Pn)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_e,e,un)=>{const dn=new Map,hn={platform,...un},fn={...hn.platform,_c:dn};return computePosition$1(_e,e,{...hn,platform:fn})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual$1(_e,e){if(_e===e)return!0;if(typeof _e!=typeof e)return!1;if(typeof _e=="function"&&_e.toString()===e.toString())return!0;let un,dn,hn;if(_e&&e&&typeof _e=="object"){if(Array.isArray(_e)){if(un=_e.length,un!==e.length)return!1;for(dn=un;dn--!==0;)if(!deepEqual$1(_e[dn],e[dn]))return!1;return!0}if(hn=Object.keys(_e),un=hn.length,un!==Object.keys(e).length)return!1;for(dn=un;dn--!==0;)if(!{}.hasOwnProperty.call(e,hn[dn]))return!1;for(dn=un;dn--!==0;){const fn=hn[dn];if(!(fn==="_owner"&&_e.$$typeof)&&!deepEqual$1(_e[fn],e[fn]))return!1}return!0}return _e!==_e&&e!==e}function getDPR(_e){return typeof window>"u"?1:(_e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_e,e){const un=getDPR(_e);return Math.round(e*un)/un}function useLatestRef(_e){const e=reactExports.useRef(_e);return index(()=>{e.current=_e}),e}function useFloating(_e){_e===void 0&&(_e={});const{placement:e="bottom",strategy:un="absolute",middleware:dn=[],platform:hn,elements:{reference:fn,floating:pn}={},transform:mn=!0,whileElementsMounted:gn,open:yn}=_e,[xn,En]=reactExports.useState({x:0,y:0,strategy:un,placement:e,middlewareData:{},isPositioned:!1}),[bn,vn]=reactExports.useState(dn);deepEqual$1(bn,dn)||vn(dn);const[Pn,Tn]=reactExports.useState(null),[In,Rn]=reactExports.useState(null),Sn=reactExports.useCallback(tr=>{tr!==Gn.current&&(Gn.current=tr,Tn(tr))},[]),Dn=reactExports.useCallback(tr=>{tr!==kn.current&&(kn.current=tr,Rn(tr))},[]),$n=fn||Pn,Fn=pn||In,Gn=reactExports.useRef(null),kn=reactExports.useRef(null),Nn=reactExports.useRef(xn),Ln=gn!=null,zn=useLatestRef(gn),Cn=useLatestRef(hn),Mn=useLatestRef(yn),Bn=reactExports.useCallback(()=>{if(!Gn.current||!kn.current)return;const tr={placement:e,strategy:un,middleware:bn};Cn.current&&(tr.platform=Cn.current),computePosition(Gn.current,kn.current,tr).then(Jn=>{const ar={...Jn,isPositioned:Mn.current!==!1};Xn.current&&!deepEqual$1(Nn.current,ar)&&(Nn.current=ar,reactDomExports.flushSync(()=>{En(ar)}))})},[bn,e,un,Cn,Mn]);index(()=>{yn===!1&&Nn.current.isPositioned&&(Nn.current.isPositioned=!1,En(tr=>({...tr,isPositioned:!1})))},[yn]);const Xn=reactExports.useRef(!1);index(()=>(Xn.current=!0,()=>{Xn.current=!1}),[]),index(()=>{if($n&&(Gn.current=$n),Fn&&(kn.current=Fn),$n&&Fn){if(zn.current)return zn.current($n,Fn,Bn);Bn()}},[$n,Fn,Bn,zn,Ln]);const nr=reactExports.useMemo(()=>({reference:Gn,floating:kn,setReference:Sn,setFloating:Dn}),[Sn,Dn]),sr=reactExports.useMemo(()=>({reference:$n,floating:Fn}),[$n,Fn]),lr=reactExports.useMemo(()=>{const tr={position:un,left:0,top:0};if(!sr.floating)return tr;const Jn=roundByDPR(sr.floating,xn.x),ar=roundByDPR(sr.floating,xn.y);return mn?{...tr,transform:"translate("+Jn+"px, "+ar+"px)",...getDPR(sr.floating)>=1.5&&{willChange:"transform"}}:{position:un,left:Jn,top:ar}},[un,mn,sr.floating,xn.x,xn.y]);return reactExports.useMemo(()=>({...xn,update:Bn,refs:nr,elements:sr,floatingStyles:lr}),[xn,Bn,nr,sr,lr])}const arrow$1=_e=>{function e(un){return{}.hasOwnProperty.call(un,"current")}return{name:"arrow",options:_e,fn(un){const{element:dn,padding:hn}=typeof _e=="function"?_e(un):_e;return dn&&e(dn)?dn.current!=null?arrow$2({element:dn.current,padding:hn}).fn(un):{}:dn?arrow$2({element:dn,padding:hn}).fn(un):{}}}},offset=(_e,e)=>({...offset$1(_e),options:[_e,e]}),shift=(_e,e)=>({...shift$1(_e),options:[_e,e]}),limitShift=(_e,e)=>({...limitShift$1(_e),options:[_e,e]}),flip=(_e,e)=>({...flip$1(_e),options:[_e,e]}),size=(_e,e)=>({...size$1(_e),options:[_e,e]}),hide=(_e,e)=>({...hide$1(_e),options:[_e,e]}),arrow=(_e,e)=>({...arrow$1(_e),options:[_e,e]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((_e,e)=>{const{children:un,width:dn=10,height:hn=5,...fn}=_e;return jsxRuntimeExports.jsx(Primitive.svg,{...fn,ref:e,width:dn,height:hn,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_e.asChild?un:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$5=Arrow$1;function createContextScope$2(_e,e=[]){let un=[];function dn(fn,pn){const mn=reactExports.createContext(pn),gn=un.length;un=[...un,pn];function yn(En){const{scope:bn,children:vn,...Pn}=En,Tn=(bn==null?void 0:bn[_e][gn])||mn,In=reactExports.useMemo(()=>Pn,Object.values(Pn));return jsxRuntimeExports.jsx(Tn.Provider,{value:In,children:vn})}function xn(En,bn){const vn=(bn==null?void 0:bn[_e][gn])||mn,Pn=reactExports.useContext(vn);if(Pn)return Pn;if(pn!==void 0)return pn;throw new Error(`\`${En}\` must be used within \`${fn}\``)}return yn.displayName=fn+"Provider",[yn,xn]}const hn=()=>{const fn=un.map(pn=>reactExports.createContext(pn));return function(mn){const gn=(mn==null?void 0:mn[_e])||fn;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...mn,[_e]:gn}}),[mn,gn])}};return hn.scopeName=_e,[dn,composeContextScopes$2(hn,...e)]}function composeContextScopes$2(..._e){const e=_e[0];if(_e.length===1)return e;const un=()=>{const dn=_e.map(hn=>({useScope:hn(),scopeName:hn.scopeName}));return function(fn){const pn=dn.reduce((mn,{useScope:gn,scopeName:yn})=>{const En=gn(fn)[`__scope${yn}`];return{...mn,...En}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:pn}),[pn])}};return un.scopeName=e.scopeName,un}function useSize(_e){const[e,un]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_e){un({width:_e.offsetWidth,height:_e.offsetHeight});const dn=new ResizeObserver(hn=>{if(!Array.isArray(hn)||!hn.length)return;const fn=hn[0];let pn,mn;if("borderBoxSize"in fn){const gn=fn.borderBoxSize,yn=Array.isArray(gn)?gn[0]:gn;pn=yn.inlineSize,mn=yn.blockSize}else pn=_e.offsetWidth,mn=_e.offsetHeight;un({width:pn,height:mn})});return dn.observe(_e,{box:"border-box"}),()=>dn.unobserve(_e)}else un(void 0)},[_e]),e}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope$2(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_e=>{const{__scopePopper:e,children:un}=_e,[dn,hn]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:e,anchor:dn,onAnchorChange:hn,children:un})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((_e,e)=>{const{__scopePopper:un,virtualRef:dn,...hn}=_e,fn=usePopperContext(ANCHOR_NAME,un),pn=reactExports.useRef(null),mn=useComposedRefs(e,pn);return reactExports.useEffect(()=>{fn.onAnchorChange((dn==null?void 0:dn.current)||pn.current)}),dn?null:jsxRuntimeExports.jsx(Primitive.div,{...hn,ref:mn})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$4="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$4),PopperContent=reactExports.forwardRef((_e,e)=>{var Zn,ir,fr,br,Tr,Ir;const{__scopePopper:un,side:dn="bottom",sideOffset:hn=0,align:fn="center",alignOffset:pn=0,arrowPadding:mn=0,avoidCollisions:gn=!0,collisionBoundary:yn=[],collisionPadding:xn=0,sticky:En="partial",hideWhenDetached:bn=!1,updatePositionStrategy:vn="optimized",onPlaced:Pn,...Tn}=_e,In=usePopperContext(CONTENT_NAME$4,un),[Rn,Sn]=reactExports.useState(null),Dn=useComposedRefs(e,Mr=>Sn(Mr)),[$n,Fn]=reactExports.useState(null),Gn=useSize($n),kn=(Gn==null?void 0:Gn.width)??0,Nn=(Gn==null?void 0:Gn.height)??0,Ln=dn+(fn!=="center"?"-"+fn:""),zn=typeof xn=="number"?xn:{top:0,right:0,bottom:0,left:0,...xn},Cn=Array.isArray(yn)?yn:[yn],Mn=Cn.length>0,Bn={padding:zn,boundary:Cn.filter(isNotNull),altBoundary:Mn},{refs:Xn,floatingStyles:nr,placement:sr,isPositioned:lr,middlewareData:tr}=useFloating({strategy:"fixed",placement:Ln,whileElementsMounted:(...Mr)=>autoUpdate(...Mr,{animationFrame:vn==="always"}),elements:{reference:In.anchor},middleware:[offset({mainAxis:hn+Nn,alignmentAxis:pn}),gn&&shift({mainAxis:!0,crossAxis:!1,limiter:En==="partial"?limitShift():void 0,...Bn}),gn&&flip({...Bn}),size({...Bn,apply:({elements:Mr,rects:qr,availableWidth:Ar,availableHeight:or})=>{const{width:jr,height:cr}=qr.reference,hr=Mr.floating.style;hr.setProperty("--radix-popper-available-width",`${Ar}px`),hr.setProperty("--radix-popper-available-height",`${or}px`),hr.setProperty("--radix-popper-anchor-width",`${jr}px`),hr.setProperty("--radix-popper-anchor-height",`${cr}px`)}}),$n&&arrow({element:$n,padding:mn}),transformOrigin({arrowWidth:kn,arrowHeight:Nn}),bn&&hide({strategy:"referenceHidden",...Bn})]}),[Jn,ar]=getSideAndAlignFromPlacement(sr),gr=useCallbackRef$1(Pn);useLayoutEffect2(()=>{lr&&(gr==null||gr())},[lr,gr]);const qn=(Zn=tr.arrow)==null?void 0:Zn.x,On=(ir=tr.arrow)==null?void 0:ir.y,Un=((fr=tr.arrow)==null?void 0:fr.centerOffset)!==0,[Yn,er]=reactExports.useState();return useLayoutEffect2(()=>{Rn&&er(window.getComputedStyle(Rn).zIndex)},[Rn]),jsxRuntimeExports.jsx("div",{ref:Xn.setFloating,"data-radix-popper-content-wrapper":"",style:{...nr,transform:lr?nr.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Yn,"--radix-popper-transform-origin":[(br=tr.transformOrigin)==null?void 0:br.x,(Tr=tr.transformOrigin)==null?void 0:Tr.y].join(" "),...((Ir=tr.hide)==null?void 0:Ir.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:_e.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:un,placedSide:Jn,onArrowChange:Fn,arrowX:qn,arrowY:On,shouldHideArrow:Un,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Jn,"data-align":ar,...Tn,ref:Dn,style:{...Tn.style,animation:lr?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$4;var ARROW_NAME$2="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(e,un){const{__scopePopper:dn,...hn}=e,fn=useContentContext(ARROW_NAME$2,dn),pn=OPPOSITE_SIDE[fn.placedSide];return jsxRuntimeExports.jsx("span",{ref:fn.onArrowChange,style:{position:"absolute",left:fn.arrowX,top:fn.arrowY,[pn]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[fn.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[fn.placedSide],visibility:fn.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$5,{...hn,ref:un,style:{...hn.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$2;function isNotNull(_e){return _e!==null}var transformOrigin=_e=>({name:"transformOrigin",options:_e,fn(e){var In,Rn,Sn;const{placement:un,rects:dn,middlewareData:hn}=e,pn=((In=hn.arrow)==null?void 0:In.centerOffset)!==0,mn=pn?0:_e.arrowWidth,gn=pn?0:_e.arrowHeight,[yn,xn]=getSideAndAlignFromPlacement(un),En={start:"0%",center:"50%",end:"100%"}[xn],bn=(((Rn=hn.arrow)==null?void 0:Rn.x)??0)+mn/2,vn=(((Sn=hn.arrow)==null?void 0:Sn.y)??0)+gn/2;let Pn="",Tn="";return yn==="bottom"?(Pn=pn?En:`${bn}px`,Tn=`${-gn}px`):yn==="top"?(Pn=pn?En:`${bn}px`,Tn=`${dn.floating.height+gn}px`):yn==="right"?(Pn=`${-gn}px`,Tn=pn?En:`${vn}px`):yn==="left"&&(Pn=`${dn.floating.width+gn}px`,Tn=pn?En:`${vn}px`),{data:{x:Pn,y:Tn}}}});function getSideAndAlignFromPlacement(_e){const[e,un="center"]=_e.split("-");return[e,un]}var Root2$3=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope$3("Tooltip",[createPopperScope]),usePopperScope$1=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=_e=>{const{__scopeTooltip:e,delayDuration:un=DEFAULT_DELAY_DURATION,skipDelayDuration:dn=300,disableHoverableContent:hn=!1,children:fn}=_e,[pn,mn]=reactExports.useState(!0),gn=reactExports.useRef(!1),yn=reactExports.useRef(0);return reactExports.useEffect(()=>{const xn=yn.current;return()=>window.clearTimeout(xn)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:e,isOpenDelayed:pn,delayDuration:un,onOpen:reactExports.useCallback(()=>{window.clearTimeout(yn.current),mn(!1)},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(yn.current),yn.current=window.setTimeout(()=>mn(!0),dn)},[dn]),isPointerInTransitRef:gn,onPointerInTransitChange:reactExports.useCallback(xn=>{gn.current=xn},[]),disableHoverableContent:hn,children:fn})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),TRIGGER_NAME$3="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((_e,e)=>{const{__scopeTooltip:un,...dn}=_e,hn=useTooltipContext(TRIGGER_NAME$3,un),fn=useTooltipProviderContext(TRIGGER_NAME$3,un),pn=usePopperScope$1(un),mn=reactExports.useRef(null),gn=useComposedRefs(e,mn,hn.onTriggerChange),yn=reactExports.useRef(!1),xn=reactExports.useRef(!1),En=reactExports.useCallback(()=>yn.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",En),[En]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...pn,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":hn.open?hn.contentId:void 0,"data-state":hn.stateAttribute,...dn,ref:gn,onPointerMove:composeEventHandlers(_e.onPointerMove,bn=>{bn.pointerType!=="touch"&&!xn.current&&!fn.isPointerInTransitRef.current&&(hn.onTriggerEnter(),xn.current=!0)}),onPointerLeave:composeEventHandlers(_e.onPointerLeave,()=>{hn.onTriggerLeave(),xn.current=!1}),onPointerDown:composeEventHandlers(_e.onPointerDown,()=>{yn.current=!0,document.addEventListener("pointerup",En,{once:!0})}),onFocus:composeEventHandlers(_e.onFocus,()=>{yn.current||hn.onOpen()}),onBlur:composeEventHandlers(_e.onBlur,hn.onClose),onClick:composeEventHandlers(_e.onClick,hn.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME$3;var PORTAL_NAME$2="TooltipPortal",[PortalProvider$1,usePortalContext$1]=createTooltipContext(PORTAL_NAME$2,{forceMount:void 0}),CONTENT_NAME$3="TooltipContent",TooltipContent$1=reactExports.forwardRef((_e,e)=>{const un=usePortalContext$1(CONTENT_NAME$3,_e.__scopeTooltip),{forceMount:dn=un.forceMount,side:hn="top",...fn}=_e,pn=useTooltipContext(CONTENT_NAME$3,_e.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:dn||pn.open,children:pn.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:hn,...fn,ref:e}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:hn,...fn,ref:e})})}),TooltipContentHoverable=reactExports.forwardRef((_e,e)=>{const un=useTooltipContext(CONTENT_NAME$3,_e.__scopeTooltip),dn=useTooltipProviderContext(CONTENT_NAME$3,_e.__scopeTooltip),hn=reactExports.useRef(null),fn=useComposedRefs(e,hn),[pn,mn]=reactExports.useState(null),{trigger:gn,onClose:yn}=un,xn=hn.current,{onPointerInTransitChange:En}=dn,bn=reactExports.useCallback(()=>{mn(null),En(!1)},[En]),vn=reactExports.useCallback((Pn,Tn)=>{const In=Pn.currentTarget,Rn={x:Pn.clientX,y:Pn.clientY},Sn=getExitSideFromRect(Rn,In.getBoundingClientRect()),Dn=getPaddedExitPoints(Rn,Sn),$n=getPointsFromRect(Tn.getBoundingClientRect()),Fn=getHull([...Dn,...$n]);mn(Fn),En(!0)},[En]);return reactExports.useEffect(()=>()=>bn(),[bn]),reactExports.useEffect(()=>{if(gn&&xn){const Pn=In=>vn(In,xn),Tn=In=>vn(In,gn);return gn.addEventListener("pointerleave",Pn),xn.addEventListener("pointerleave",Tn),()=>{gn.removeEventListener("pointerleave",Pn),xn.removeEventListener("pointerleave",Tn)}}},[gn,xn,vn,bn]),reactExports.useEffect(()=>{if(pn){const Pn=Tn=>{const In=Tn.target,Rn={x:Tn.clientX,y:Tn.clientY},Sn=(gn==null?void 0:gn.contains(In))||(xn==null?void 0:xn.contains(In)),Dn=!isPointInPolygon(Rn,pn);Sn?bn():Dn&&(bn(),yn())};return document.addEventListener("pointermove",Pn),()=>document.removeEventListener("pointermove",Pn)}},[gn,xn,pn,yn,bn]),jsxRuntimeExports.jsx(TooltipContentImpl,{..._e,ref:fn})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef((_e,e)=>{const{__scopeTooltip:un,children:dn,"aria-label":hn,onEscapeKeyDown:fn,onPointerDownOutside:pn,...mn}=_e,gn=useTooltipContext(CONTENT_NAME$3,un),yn=usePopperScope$1(un),{onClose:xn}=gn;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,xn),()=>document.removeEventListener(TOOLTIP_OPEN,xn)),[xn]),reactExports.useEffect(()=>{if(gn.trigger){const En=bn=>{const vn=bn.target;vn!=null&&vn.contains(gn.trigger)&&xn()};return window.addEventListener("scroll",En,{capture:!0}),()=>window.removeEventListener("scroll",En,{capture:!0})}},[gn.trigger,xn]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:fn,onPointerDownOutside:pn,onFocusOutside:En=>En.preventDefault(),onDismiss:xn,children:jsxRuntimeExports.jsxs(Content$2,{"data-state":gn.stateAttribute,...yn,...mn,ref:e,style:{...mn.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:dn}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:un,isInside:!0,children:jsxRuntimeExports.jsx(Root$6,{id:gn.contentId,role:"tooltip",children:hn||dn})})]})})});TooltipContent$1.displayName=CONTENT_NAME$3;var ARROW_NAME$1="TooltipArrow",TooltipArrow=reactExports.forwardRef((_e,e)=>{const{__scopeTooltip:un,...dn}=_e,hn=usePopperScope$1(un);return useVisuallyHiddenContentContext(ARROW_NAME$1,un).isInside?null:jsxRuntimeExports.jsx(Arrow,{...hn,...dn,ref:e})});TooltipArrow.displayName=ARROW_NAME$1;function getExitSideFromRect(_e,e){const un=Math.abs(e.top-_e.y),dn=Math.abs(e.bottom-_e.y),hn=Math.abs(e.right-_e.x),fn=Math.abs(e.left-_e.x);switch(Math.min(un,dn,hn,fn)){case fn:return"left";case hn:return"right";case un:return"top";case dn:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(_e,e,un=5){const dn=[];switch(e){case"top":dn.push({x:_e.x-un,y:_e.y+un},{x:_e.x+un,y:_e.y+un});break;case"bottom":dn.push({x:_e.x-un,y:_e.y-un},{x:_e.x+un,y:_e.y-un});break;case"left":dn.push({x:_e.x+un,y:_e.y-un},{x:_e.x+un,y:_e.y+un});break;case"right":dn.push({x:_e.x-un,y:_e.y-un},{x:_e.x-un,y:_e.y+un});break}return dn}function getPointsFromRect(_e){const{top:e,right:un,bottom:dn,left:hn}=_e;return[{x:hn,y:e},{x:un,y:e},{x:un,y:dn},{x:hn,y:dn}]}function isPointInPolygon(_e,e){const{x:un,y:dn}=_e;let hn=!1;for(let fn=0,pn=e.length-1;fn<e.length;pn=fn++){const mn=e[fn].x,gn=e[fn].y,yn=e[pn].x,xn=e[pn].y;gn>dn!=xn>dn&&un<(yn-mn)*(dn-gn)/(xn-gn)+mn&&(hn=!hn)}return hn}function getHull(_e){const e=_e.slice();return e.sort((un,dn)=>un.x<dn.x?-1:un.x>dn.x?1:un.y<dn.y?-1:un.y>dn.y?1:0),getHullPresorted(e)}function getHullPresorted(_e){if(_e.length<=1)return _e.slice();const e=[];for(let dn=0;dn<_e.length;dn++){const hn=_e[dn];for(;e.length>=2;){const fn=e[e.length-1],pn=e[e.length-2];if((fn.x-pn.x)*(hn.y-pn.y)>=(fn.y-pn.y)*(hn.x-pn.x))e.pop();else break}e.push(hn)}e.pop();const un=[];for(let dn=_e.length-1;dn>=0;dn--){const hn=_e[dn];for(;un.length>=2;){const fn=un[un.length-1],pn=un[un.length-2];if((fn.x-pn.x)*(hn.y-pn.y)>=(fn.y-pn.y)*(hn.x-pn.x))un.pop();else break}un.push(hn)}return un.pop(),e.length===1&&un.length===1&&e[0].x===un[0].x&&e[0].y===un[0].y?e:e.concat(un)}var Provider$1=TooltipProvider$1,Content2$1=TooltipContent$1;const TooltipProvider=Provider$1,TooltipContent=reactExports.forwardRef(({className:_e,sideOffset:e=4,...un},dn)=>jsxRuntimeExports.jsx(Content2$1,{ref:dn,sideOffset:e,className:cn$1("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_e),...un}));TooltipContent.displayName=Content2$1.displayName;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(_e){return this.listeners.add(_e),this.onSubscribe(),()=>{this.listeners.delete(_e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$1(){}function functionalUpdate(_e,e){return typeof _e=="function"?_e(e):_e}function isValidTimeout(_e){return typeof _e=="number"&&_e>=0&&_e!==1/0}function timeUntilStale(_e,e){return Math.max(_e+(e||0)-Date.now(),0)}function resolveStaleTime(_e,e){return typeof _e=="function"?_e(e):_e}function resolveEnabled(_e,e){return typeof _e=="function"?_e(e):_e}function matchQuery(_e,e){const{type:un="all",exact:dn,fetchStatus:hn,predicate:fn,queryKey:pn,stale:mn}=_e;if(pn){if(dn){if(e.queryHash!==hashQueryKeyByOptions(pn,e.options))return!1}else if(!partialMatchKey(e.queryKey,pn))return!1}if(un!=="all"){const gn=e.isActive();if(un==="active"&&!gn||un==="inactive"&&gn)return!1}return!(typeof mn=="boolean"&&e.isStale()!==mn||hn&&hn!==e.state.fetchStatus||fn&&!fn(e))}function matchMutation(_e,e){const{exact:un,status:dn,predicate:hn,mutationKey:fn}=_e;if(fn){if(!e.options.mutationKey)return!1;if(un){if(hashKey(e.options.mutationKey)!==hashKey(fn))return!1}else if(!partialMatchKey(e.options.mutationKey,fn))return!1}return!(dn&&e.state.status!==dn||hn&&!hn(e))}function hashQueryKeyByOptions(_e,e){return((e==null?void 0:e.queryKeyHashFn)||hashKey)(_e)}function hashKey(_e){return JSON.stringify(_e,(e,un)=>isPlainObject(un)?Object.keys(un).sort().reduce((dn,hn)=>(dn[hn]=un[hn],dn),{}):un)}function partialMatchKey(_e,e){return _e===e?!0:typeof _e!=typeof e?!1:_e&&e&&typeof _e=="object"&&typeof e=="object"?!Object.keys(e).some(un=>!partialMatchKey(_e[un],e[un])):!1}function replaceEqualDeep(_e,e){if(_e===e)return _e;const un=isPlainArray(_e)&&isPlainArray(e);if(un||isPlainObject(_e)&&isPlainObject(e)){const dn=un?_e:Object.keys(_e),hn=dn.length,fn=un?e:Object.keys(e),pn=fn.length,mn=un?[]:{};let gn=0;for(let yn=0;yn<pn;yn++){const xn=un?yn:fn[yn];(!un&&dn.includes(xn)||un)&&_e[xn]===void 0&&e[xn]===void 0?(mn[xn]=void 0,gn++):(mn[xn]=replaceEqualDeep(_e[xn],e[xn]),mn[xn]===_e[xn]&&_e[xn]!==void 0&&gn++)}return hn===pn&&gn===hn?_e:mn}return e}function isPlainArray(_e){return Array.isArray(_e)&&_e.length===Object.keys(_e).length}function isPlainObject(_e){if(!hasObjectPrototype(_e))return!1;const e=_e.constructor;if(e===void 0)return!0;const un=e.prototype;return!(!hasObjectPrototype(un)||!un.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(_e)!==Object.prototype)}function hasObjectPrototype(_e){return Object.prototype.toString.call(_e)==="[object Object]"}function sleep$1(_e){return new Promise(e=>{setTimeout(e,_e)})}function replaceData(_e,e,un){return typeof un.structuralSharing=="function"?un.structuralSharing(_e,e):un.structuralSharing!==!1?replaceEqualDeep(_e,e):e}function addToEnd(_e,e,un=0){const dn=[..._e,e];return un&&dn.length>un?dn.slice(1):dn}function addToStart(_e,e,un=0){const dn=[e,..._e];return un&&dn.length>un?dn.slice(0,-1):dn}var skipToken=Symbol();function ensureQueryFn(_e,e){return!_e.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!_e.queryFn||_e.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${_e.queryHash}'`)):_e.queryFn}var dp,Uu,qp,Oy,FocusManager=(Oy=class extends Subscribable{constructor(){super();Br(this,dp);Br(this,Uu);Br(this,qp);Fr(this,qp,e=>{if(!isServer&&window.addEventListener){const un=()=>e();return window.addEventListener("visibilitychange",un,!1),()=>{window.removeEventListener("visibilitychange",un)}}})}onSubscribe(){Hn(this,Uu)||this.setEventListener(Hn(this,qp))}onUnsubscribe(){var e;this.hasListeners()||((e=Hn(this,Uu))==null||e.call(this),Fr(this,Uu,void 0))}setEventListener(e){var un;Fr(this,qp,e),(un=Hn(this,Uu))==null||un.call(this),Fr(this,Uu,e(dn=>{typeof dn=="boolean"?this.setFocused(dn):this.onFocus()}))}setFocused(e){Hn(this,dp)!==e&&(Fr(this,dp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(un=>{un(e)})}isFocused(){var e;return typeof Hn(this,dp)=="boolean"?Hn(this,dp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},dp=new WeakMap,Uu=new WeakMap,qp=new WeakMap,Oy),focusManager=new FocusManager,Hp,zu,Wp,Fy,OnlineManager=(Fy=class extends Subscribable{constructor(){super();Br(this,Hp,!0);Br(this,zu);Br(this,Wp);Fr(this,Wp,e=>{if(!isServer&&window.addEventListener){const un=()=>e(!0),dn=()=>e(!1);return window.addEventListener("online",un,!1),window.addEventListener("offline",dn,!1),()=>{window.removeEventListener("online",un),window.removeEventListener("offline",dn)}}})}onSubscribe(){Hn(this,zu)||this.setEventListener(Hn(this,Wp))}onUnsubscribe(){var e;this.hasListeners()||((e=Hn(this,zu))==null||e.call(this),Fr(this,zu,void 0))}setEventListener(e){var un;Fr(this,Wp,e),(un=Hn(this,zu))==null||un.call(this),Fr(this,zu,e(this.setOnline.bind(this)))}setOnline(e){Hn(this,Hp)!==e&&(Fr(this,Hp,e),this.listeners.forEach(dn=>{dn(e)}))}isOnline(){return Hn(this,Hp)}},Hp=new WeakMap,zu=new WeakMap,Wp=new WeakMap,Fy),onlineManager=new OnlineManager;function pendingThenable(){let _e,e;const un=new Promise((hn,fn)=>{_e=hn,e=fn});un.status="pending",un.catch(()=>{});function dn(hn){Object.assign(un,hn),delete un.resolve,delete un.reject}return un.resolve=hn=>{dn({status:"fulfilled",value:hn}),_e(hn)},un.reject=hn=>{dn({status:"rejected",reason:hn}),e(hn)},un}function defaultRetryDelay(_e){return Math.min(1e3*2**_e,3e4)}function canFetch(_e){return(_e??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(_e){super("CancelledError"),this.revert=_e==null?void 0:_e.revert,this.silent=_e==null?void 0:_e.silent}};function isCancelledError(_e){return _e instanceof CancelledError}function createRetryer(_e){let e=!1,un=0,dn=!1,hn;const fn=pendingThenable(),pn=Tn=>{var In;dn||(bn(new CancelledError(Tn)),(In=_e.abort)==null||In.call(_e))},mn=()=>{e=!0},gn=()=>{e=!1},yn=()=>focusManager.isFocused()&&(_e.networkMode==="always"||onlineManager.isOnline())&&_e.canRun(),xn=()=>canFetch(_e.networkMode)&&_e.canRun(),En=Tn=>{var In;dn||(dn=!0,(In=_e.onSuccess)==null||In.call(_e,Tn),hn==null||hn(),fn.resolve(Tn))},bn=Tn=>{var In;dn||(dn=!0,(In=_e.onError)==null||In.call(_e,Tn),hn==null||hn(),fn.reject(Tn))},vn=()=>new Promise(Tn=>{var In;hn=Rn=>{(dn||yn())&&Tn(Rn)},(In=_e.onPause)==null||In.call(_e)}).then(()=>{var Tn;hn=void 0,dn||(Tn=_e.onContinue)==null||Tn.call(_e)}),Pn=()=>{if(dn)return;let Tn;const In=un===0?_e.initialPromise:void 0;try{Tn=In??_e.fn()}catch(Rn){Tn=Promise.reject(Rn)}Promise.resolve(Tn).then(En).catch(Rn=>{var Gn;if(dn)return;const Sn=_e.retry??(isServer?0:3),Dn=_e.retryDelay??defaultRetryDelay,$n=typeof Dn=="function"?Dn(un,Rn):Dn,Fn=Sn===!0||typeof Sn=="number"&&un<Sn||typeof Sn=="function"&&Sn(un,Rn);if(e||!Fn){bn(Rn);return}un++,(Gn=_e.onFail)==null||Gn.call(_e,un,Rn),sleep$1($n).then(()=>yn()?void 0:vn()).then(()=>{e?bn(Rn):Pn()})})};return{promise:fn,cancel:pn,continue:()=>(hn==null||hn(),fn),cancelRetry:mn,continueRetry:gn,canStart:xn,start:()=>(xn()?Pn():vn().then(Pn),fn)}}function createNotifyManager(){let _e=[],e=0,un=mn=>{mn()},dn=mn=>{mn()},hn=mn=>setTimeout(mn,0);const fn=mn=>{e?_e.push(mn):hn(()=>{un(mn)})},pn=()=>{const mn=_e;_e=[],mn.length&&hn(()=>{dn(()=>{mn.forEach(gn=>{un(gn)})})})};return{batch:mn=>{let gn;e++;try{gn=mn()}finally{e--,e||pn()}return gn},batchCalls:mn=>(...gn)=>{fn(()=>{mn(...gn)})},schedule:fn,setNotifyFunction:mn=>{un=mn},setBatchNotifyFunction:mn=>{dn=mn},setScheduler:mn=>{hn=mn}}}var notifyManager=createNotifyManager(),hp,Vy,Removable=(Vy=class{constructor(){Br(this,hp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&Fr(this,hp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(_e){this.gcTime=Math.max(this.gcTime||0,_e??(isServer?1/0:5*60*1e3))}clearGcTimeout(){Hn(this,hp)&&(clearTimeout(Hn(this,hp)),Fr(this,hp,void 0))}},hp=new WeakMap,Vy),Gp,Kp,_l,ko,Am,fp,Ll,uu,$y,Query$1=($y=class extends Removable{constructor(un){super();Br(this,Ll);Br(this,Gp);Br(this,Kp);Br(this,_l);Br(this,ko);Br(this,Am);Br(this,fp);Fr(this,fp,!1),Fr(this,Am,un.defaultOptions),this.setOptions(un.options),this.observers=[],Fr(this,_l,un.cache),this.queryKey=un.queryKey,this.queryHash=un.queryHash,Fr(this,Gp,getDefaultState$1(this.options)),this.state=un.state??Hn(this,Gp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var un;return(un=Hn(this,ko))==null?void 0:un.promise}setOptions(un){this.options={...Hn(this,Am),...un},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Hn(this,_l).remove(this)}setData(un,dn){const hn=replaceData(this.state.data,un,this.options);return Or(this,Ll,uu).call(this,{data:hn,type:"success",dataUpdatedAt:dn==null?void 0:dn.updatedAt,manual:dn==null?void 0:dn.manual}),hn}setState(un,dn){Or(this,Ll,uu).call(this,{type:"setState",state:un,setStateOptions:dn})}cancel(un){var hn,fn;const dn=(hn=Hn(this,ko))==null?void 0:hn.promise;return(fn=Hn(this,ko))==null||fn.cancel(un),dn?dn.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Hn(this,Gp))}isActive(){return this.observers.some(un=>resolveEnabled(un.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(un=>un.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(un=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,un)}onFocus(){var dn;const un=this.observers.find(hn=>hn.shouldFetchOnWindowFocus());un==null||un.refetch({cancelRefetch:!1}),(dn=Hn(this,ko))==null||dn.continue()}onOnline(){var dn;const un=this.observers.find(hn=>hn.shouldFetchOnReconnect());un==null||un.refetch({cancelRefetch:!1}),(dn=Hn(this,ko))==null||dn.continue()}addObserver(un){this.observers.includes(un)||(this.observers.push(un),this.clearGcTimeout(),Hn(this,_l).notify({type:"observerAdded",query:this,observer:un}))}removeObserver(un){this.observers.includes(un)&&(this.observers=this.observers.filter(dn=>dn!==un),this.observers.length||(Hn(this,ko)&&(Hn(this,fp)?Hn(this,ko).cancel({revert:!0}):Hn(this,ko).cancelRetry()),this.scheduleGc()),Hn(this,_l).notify({type:"observerRemoved",query:this,observer:un}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Or(this,Ll,uu).call(this,{type:"invalidate"})}fetch(un,dn){var yn,xn,En;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(dn!=null&&dn.cancelRefetch))this.cancel({silent:!0});else if(Hn(this,ko))return Hn(this,ko).continueRetry(),Hn(this,ko).promise}if(un&&this.setOptions(un),!this.options.queryFn){const bn=this.observers.find(vn=>vn.options.queryFn);bn&&this.setOptions(bn.options)}const hn=new AbortController,fn=bn=>{Object.defineProperty(bn,"signal",{enumerable:!0,get:()=>(Fr(this,fp,!0),hn.signal)})},pn=()=>{const bn=ensureQueryFn(this.options,dn),vn={queryKey:this.queryKey,meta:this.meta};return fn(vn),Fr(this,fp,!1),this.options.persister?this.options.persister(bn,vn,this):bn(vn)},mn={fetchOptions:dn,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:pn};fn(mn),(yn=this.options.behavior)==null||yn.onFetch(mn,this),Fr(this,Kp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((xn=mn.fetchOptions)==null?void 0:xn.meta))&&Or(this,Ll,uu).call(this,{type:"fetch",meta:(En=mn.fetchOptions)==null?void 0:En.meta});const gn=bn=>{var vn,Pn,Tn,In;isCancelledError(bn)&&bn.silent||Or(this,Ll,uu).call(this,{type:"error",error:bn}),isCancelledError(bn)||((Pn=(vn=Hn(this,_l).config).onError)==null||Pn.call(vn,bn,this),(In=(Tn=Hn(this,_l).config).onSettled)==null||In.call(Tn,this.state.data,bn,this)),this.scheduleGc()};return Fr(this,ko,createRetryer({initialPromise:dn==null?void 0:dn.initialPromise,fn:mn.fetchFn,abort:hn.abort.bind(hn),onSuccess:bn=>{var vn,Pn,Tn,In;if(bn===void 0){gn(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(bn)}catch(Rn){gn(Rn);return}(Pn=(vn=Hn(this,_l).config).onSuccess)==null||Pn.call(vn,bn,this),(In=(Tn=Hn(this,_l).config).onSettled)==null||In.call(Tn,bn,this.state.error,this),this.scheduleGc()},onError:gn,onFail:(bn,vn)=>{Or(this,Ll,uu).call(this,{type:"failed",failureCount:bn,error:vn})},onPause:()=>{Or(this,Ll,uu).call(this,{type:"pause"})},onContinue:()=>{Or(this,Ll,uu).call(this,{type:"continue"})},retry:mn.options.retry,retryDelay:mn.options.retryDelay,networkMode:mn.options.networkMode,canRun:()=>!0})),Hn(this,ko).start()}},Gp=new WeakMap,Kp=new WeakMap,_l=new WeakMap,ko=new WeakMap,Am=new WeakMap,fp=new WeakMap,Ll=new WeakSet,uu=function(un){const dn=hn=>{switch(un.type){case"failed":return{...hn,fetchFailureCount:un.failureCount,fetchFailureReason:un.error};case"pause":return{...hn,fetchStatus:"paused"};case"continue":return{...hn,fetchStatus:"fetching"};case"fetch":return{...hn,...fetchState(hn.data,this.options),fetchMeta:un.meta??null};case"success":return{...hn,data:un.data,dataUpdateCount:hn.dataUpdateCount+1,dataUpdatedAt:un.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!un.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const fn=un.error;return isCancelledError(fn)&&fn.revert&&Hn(this,Kp)?{...Hn(this,Kp),fetchStatus:"idle"}:{...hn,error:fn,errorUpdateCount:hn.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:hn.fetchFailureCount+1,fetchFailureReason:fn,fetchStatus:"idle",status:"error"};case"invalidate":return{...hn,isInvalidated:!0};case"setState":return{...hn,...un.state}}};this.state=dn(this.state),notifyManager.batch(()=>{this.observers.forEach(hn=>{hn.onQueryUpdate()}),Hn(this,_l).notify({query:this,type:"updated",action:un})})},$y);function fetchState(_e,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",..._e===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(_e){const e=typeof _e.initialData=="function"?_e.initialData():_e.initialData,un=e!==void 0,dn=un?typeof _e.initialDataUpdatedAt=="function"?_e.initialDataUpdatedAt():_e.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:un?dn??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:un?"success":"pending",fetchStatus:"idle"}}var Wl,By,QueryCache=(By=class extends Subscribable{constructor(e={}){super();Br(this,Wl);this.config=e,Fr(this,Wl,new Map)}build(e,un,dn){const hn=un.queryKey,fn=un.queryHash??hashQueryKeyByOptions(hn,un);let pn=this.get(fn);return pn||(pn=new Query$1({cache:this,queryKey:hn,queryHash:fn,options:e.defaultQueryOptions(un),state:dn,defaultOptions:e.getQueryDefaults(hn)}),this.add(pn)),pn}add(e){Hn(this,Wl).has(e.queryHash)||(Hn(this,Wl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const un=Hn(this,Wl).get(e.queryHash);un&&(e.destroy(),un===e&&Hn(this,Wl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Hn(this,Wl).get(e)}getAll(){return[...Hn(this,Wl).values()]}find(e){const un={exact:!0,...e};return this.getAll().find(dn=>matchQuery(un,dn))}findAll(e={}){const un=this.getAll();return Object.keys(e).length>0?un.filter(dn=>matchQuery(e,dn)):un}notify(e){notifyManager.batch(()=>{this.listeners.forEach(un=>{un(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Wl=new WeakMap,By),Gl,Fo,pp,Kl,Bu,Uy,Mutation$1=(Uy=class extends Removable{constructor(un){super();Br(this,Kl);Br(this,Gl);Br(this,Fo);Br(this,pp);this.mutationId=un.mutationId,Fr(this,Fo,un.mutationCache),Fr(this,Gl,[]),this.state=un.state||getDefaultState(),this.setOptions(un.options),this.scheduleGc()}setOptions(un){this.options=un,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(un){Hn(this,Gl).includes(un)||(Hn(this,Gl).push(un),this.clearGcTimeout(),Hn(this,Fo).notify({type:"observerAdded",mutation:this,observer:un}))}removeObserver(un){Fr(this,Gl,Hn(this,Gl).filter(dn=>dn!==un)),this.scheduleGc(),Hn(this,Fo).notify({type:"observerRemoved",mutation:this,observer:un})}optionalRemove(){Hn(this,Gl).length||(this.state.status==="pending"?this.scheduleGc():Hn(this,Fo).remove(this))}continue(){var un;return((un=Hn(this,pp))==null?void 0:un.continue())??this.execute(this.state.variables)}async execute(un){var fn,pn,mn,gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn,Sn,Dn,$n,Fn,Gn,kn,Nn;Fr(this,pp,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(un):Promise.reject(new Error("No mutationFn found")),onFail:(Ln,zn)=>{Or(this,Kl,Bu).call(this,{type:"failed",failureCount:Ln,error:zn})},onPause:()=>{Or(this,Kl,Bu).call(this,{type:"pause"})},onContinue:()=>{Or(this,Kl,Bu).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Hn(this,Fo).canRun(this)}));const dn=this.state.status==="pending",hn=!Hn(this,pp).canStart();try{if(!dn){Or(this,Kl,Bu).call(this,{type:"pending",variables:un,isPaused:hn}),await((pn=(fn=Hn(this,Fo).config).onMutate)==null?void 0:pn.call(fn,un,this));const zn=await((gn=(mn=this.options).onMutate)==null?void 0:gn.call(mn,un));zn!==this.state.context&&Or(this,Kl,Bu).call(this,{type:"pending",context:zn,variables:un,isPaused:hn})}const Ln=await Hn(this,pp).start();return await((xn=(yn=Hn(this,Fo).config).onSuccess)==null?void 0:xn.call(yn,Ln,un,this.state.context,this)),await((bn=(En=this.options).onSuccess)==null?void 0:bn.call(En,Ln,un,this.state.context)),await((Pn=(vn=Hn(this,Fo).config).onSettled)==null?void 0:Pn.call(vn,Ln,null,this.state.variables,this.state.context,this)),await((In=(Tn=this.options).onSettled)==null?void 0:In.call(Tn,Ln,null,un,this.state.context)),Or(this,Kl,Bu).call(this,{type:"success",data:Ln}),Ln}catch(Ln){try{throw await((Sn=(Rn=Hn(this,Fo).config).onError)==null?void 0:Sn.call(Rn,Ln,un,this.state.context,this)),await(($n=(Dn=this.options).onError)==null?void 0:$n.call(Dn,Ln,un,this.state.context)),await((Gn=(Fn=Hn(this,Fo).config).onSettled)==null?void 0:Gn.call(Fn,void 0,Ln,this.state.variables,this.state.context,this)),await((Nn=(kn=this.options).onSettled)==null?void 0:Nn.call(kn,void 0,Ln,un,this.state.context)),Ln}finally{Or(this,Kl,Bu).call(this,{type:"error",error:Ln})}}finally{Hn(this,Fo).runNext(this)}}},Gl=new WeakMap,Fo=new WeakMap,pp=new WeakMap,Kl=new WeakSet,Bu=function(un){const dn=hn=>{switch(un.type){case"failed":return{...hn,failureCount:un.failureCount,failureReason:un.error};case"pause":return{...hn,isPaused:!0};case"continue":return{...hn,isPaused:!1};case"pending":return{...hn,context:un.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:un.isPaused,status:"pending",variables:un.variables,submittedAt:Date.now()};case"success":return{...hn,data:un.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...hn,data:void 0,error:un.error,failureCount:hn.failureCount+1,failureReason:un.error,isPaused:!1,status:"error"}}};this.state=dn(this.state),notifyManager.batch(()=>{Hn(this,Gl).forEach(hn=>{hn.onMutationUpdate(un)}),Hn(this,Fo).notify({mutation:this,type:"updated",action:un})})},Uy);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xo,Rm,zy,MutationCache=(zy=class extends Subscribable{constructor(e={}){super();Br(this,Xo);Br(this,Rm);this.config=e,Fr(this,Xo,new Map),Fr(this,Rm,Date.now())}build(e,un,dn){const hn=new Mutation$1({mutationCache:this,mutationId:++$u(this,Rm)._,options:e.defaultMutationOptions(un),state:dn});return this.add(hn),hn}add(e){const un=scopeFor(e),dn=Hn(this,Xo).get(un)??[];dn.push(e),Hn(this,Xo).set(un,dn),this.notify({type:"added",mutation:e})}remove(e){var dn;const un=scopeFor(e);if(Hn(this,Xo).has(un)){const hn=(dn=Hn(this,Xo).get(un))==null?void 0:dn.filter(fn=>fn!==e);hn&&(hn.length===0?Hn(this,Xo).delete(un):Hn(this,Xo).set(un,hn))}this.notify({type:"removed",mutation:e})}canRun(e){var dn;const un=(dn=Hn(this,Xo).get(scopeFor(e)))==null?void 0:dn.find(hn=>hn.state.status==="pending");return!un||un===e}runNext(e){var dn;const un=(dn=Hn(this,Xo).get(scopeFor(e)))==null?void 0:dn.find(hn=>hn!==e&&hn.state.isPaused);return(un==null?void 0:un.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Hn(this,Xo).values()].flat()}find(e){const un={exact:!0,...e};return this.getAll().find(dn=>matchMutation(un,dn))}findAll(e={}){return this.getAll().filter(un=>matchMutation(e,un))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(un=>{un(e)})})}resumePausedMutations(){const e=this.getAll().filter(un=>un.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(un=>un.continue().catch(noop$1))))}},Xo=new WeakMap,Rm=new WeakMap,zy);function scopeFor(_e){var e;return((e=_e.options.scope)==null?void 0:e.id)??String(_e.mutationId)}function infiniteQueryBehavior(_e){return{onFetch:(e,un)=>{var xn,En,bn,vn,Pn;const dn=e.options,hn=(bn=(En=(xn=e.fetchOptions)==null?void 0:xn.meta)==null?void 0:En.fetchMore)==null?void 0:bn.direction,fn=((vn=e.state.data)==null?void 0:vn.pages)||[],pn=((Pn=e.state.data)==null?void 0:Pn.pageParams)||[];let mn={pages:[],pageParams:[]},gn=0;const yn=async()=>{let Tn=!1;const In=Dn=>{Object.defineProperty(Dn,"signal",{enumerable:!0,get:()=>(e.signal.aborted?Tn=!0:e.signal.addEventListener("abort",()=>{Tn=!0}),e.signal)})},Rn=ensureQueryFn(e.options,e.fetchOptions),Sn=async(Dn,$n,Fn)=>{if(Tn)return Promise.reject();if($n==null&&Dn.pages.length)return Promise.resolve(Dn);const Gn={queryKey:e.queryKey,pageParam:$n,direction:Fn?"backward":"forward",meta:e.options.meta};In(Gn);const kn=await Rn(Gn),{maxPages:Nn}=e.options,Ln=Fn?addToStart:addToEnd;return{pages:Ln(Dn.pages,kn,Nn),pageParams:Ln(Dn.pageParams,$n,Nn)}};if(hn&&fn.length){const Dn=hn==="backward",$n=Dn?getPreviousPageParam:getNextPageParam,Fn={pages:fn,pageParams:pn},Gn=$n(dn,Fn);mn=await Sn(Fn,Gn,Dn)}else{const Dn=_e??fn.length;do{const $n=gn===0?pn[0]??dn.initialPageParam:getNextPageParam(dn,mn);if(gn>0&&$n==null)break;mn=await Sn(mn,$n),gn++}while(gn<Dn)}return mn};e.options.persister?e.fetchFn=()=>{var Tn,In;return(In=(Tn=e.options).persister)==null?void 0:In.call(Tn,yn,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},un)}:e.fetchFn=yn}}}function getNextPageParam(_e,{pages:e,pageParams:un}){const dn=e.length-1;return e.length>0?_e.getNextPageParam(e[dn],e,un[dn],un):void 0}function getPreviousPageParam(_e,{pages:e,pageParams:un}){var dn;return e.length>0?(dn=_e.getPreviousPageParam)==null?void 0:dn.call(_e,e[0],e,un[0],un):void 0}var go,qu,Hu,Yp,Xp,Wu,Qp,Jp,qy,QueryClient=(qy=class{constructor(_e={}){Br(this,go);Br(this,qu);Br(this,Hu);Br(this,Yp);Br(this,Xp);Br(this,Wu);Br(this,Qp);Br(this,Jp);Fr(this,go,_e.queryCache||new QueryCache),Fr(this,qu,_e.mutationCache||new MutationCache),Fr(this,Hu,_e.defaultOptions||{}),Fr(this,Yp,new Map),Fr(this,Xp,new Map),Fr(this,Wu,0)}mount(){$u(this,Wu)._++,Hn(this,Wu)===1&&(Fr(this,Qp,focusManager.subscribe(async _e=>{_e&&(await this.resumePausedMutations(),Hn(this,go).onFocus())})),Fr(this,Jp,onlineManager.subscribe(async _e=>{_e&&(await this.resumePausedMutations(),Hn(this,go).onOnline())})))}unmount(){var _e,e;$u(this,Wu)._--,Hn(this,Wu)===0&&((_e=Hn(this,Qp))==null||_e.call(this),Fr(this,Qp,void 0),(e=Hn(this,Jp))==null||e.call(this),Fr(this,Jp,void 0))}isFetching(_e){return Hn(this,go).findAll({..._e,fetchStatus:"fetching"}).length}isMutating(_e){return Hn(this,qu).findAll({..._e,status:"pending"}).length}getQueryData(_e){var un;const e=this.defaultQueryOptions({queryKey:_e});return(un=Hn(this,go).get(e.queryHash))==null?void 0:un.state.data}ensureQueryData(_e){const e=this.getQueryData(_e.queryKey);if(e===void 0)return this.fetchQuery(_e);{const un=this.defaultQueryOptions(_e),dn=Hn(this,go).build(this,un);return _e.revalidateIfStale&&dn.isStaleByTime(resolveStaleTime(un.staleTime,dn))&&this.prefetchQuery(un),Promise.resolve(e)}}getQueriesData(_e){return Hn(this,go).findAll(_e).map(({queryKey:e,state:un})=>{const dn=un.data;return[e,dn]})}setQueryData(_e,e,un){const dn=this.defaultQueryOptions({queryKey:_e}),hn=Hn(this,go).get(dn.queryHash),fn=hn==null?void 0:hn.state.data,pn=functionalUpdate(e,fn);if(pn!==void 0)return Hn(this,go).build(this,dn).setData(pn,{...un,manual:!0})}setQueriesData(_e,e,un){return notifyManager.batch(()=>Hn(this,go).findAll(_e).map(({queryKey:dn})=>[dn,this.setQueryData(dn,e,un)]))}getQueryState(_e){var un;const e=this.defaultQueryOptions({queryKey:_e});return(un=Hn(this,go).get(e.queryHash))==null?void 0:un.state}removeQueries(_e){const e=Hn(this,go);notifyManager.batch(()=>{e.findAll(_e).forEach(un=>{e.remove(un)})})}resetQueries(_e,e){const un=Hn(this,go),dn={type:"active",..._e};return notifyManager.batch(()=>(un.findAll(_e).forEach(hn=>{hn.reset()}),this.refetchQueries(dn,e)))}cancelQueries(_e={},e={}){const un={revert:!0,...e},dn=notifyManager.batch(()=>Hn(this,go).findAll(_e).map(hn=>hn.cancel(un)));return Promise.all(dn).then(noop$1).catch(noop$1)}invalidateQueries(_e={},e={}){return notifyManager.batch(()=>{if(Hn(this,go).findAll(_e).forEach(dn=>{dn.invalidate()}),_e.refetchType==="none")return Promise.resolve();const un={..._e,type:_e.refetchType??_e.type??"active"};return this.refetchQueries(un,e)})}refetchQueries(_e={},e){const un={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},dn=notifyManager.batch(()=>Hn(this,go).findAll(_e).filter(hn=>!hn.isDisabled()).map(hn=>{let fn=hn.fetch(void 0,un);return un.throwOnError||(fn=fn.catch(noop$1)),hn.state.fetchStatus==="paused"?Promise.resolve():fn}));return Promise.all(dn).then(noop$1)}fetchQuery(_e){const e=this.defaultQueryOptions(_e);e.retry===void 0&&(e.retry=!1);const un=Hn(this,go).build(this,e);return un.isStaleByTime(resolveStaleTime(e.staleTime,un))?un.fetch(e):Promise.resolve(un.state.data)}prefetchQuery(_e){return this.fetchQuery(_e).then(noop$1).catch(noop$1)}fetchInfiniteQuery(_e){return _e.behavior=infiniteQueryBehavior(_e.pages),this.fetchQuery(_e)}prefetchInfiniteQuery(_e){return this.fetchInfiniteQuery(_e).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(_e){return _e.behavior=infiniteQueryBehavior(_e.pages),this.ensureQueryData(_e)}resumePausedMutations(){return onlineManager.isOnline()?Hn(this,qu).resumePausedMutations():Promise.resolve()}getQueryCache(){return Hn(this,go)}getMutationCache(){return Hn(this,qu)}getDefaultOptions(){return Hn(this,Hu)}setDefaultOptions(_e){Fr(this,Hu,_e)}setQueryDefaults(_e,e){Hn(this,Yp).set(hashKey(_e),{queryKey:_e,defaultOptions:e})}getQueryDefaults(_e){const e=[...Hn(this,Yp).values()];let un={};return e.forEach(dn=>{partialMatchKey(_e,dn.queryKey)&&(un={...un,...dn.defaultOptions})}),un}setMutationDefaults(_e,e){Hn(this,Xp).set(hashKey(_e),{mutationKey:_e,defaultOptions:e})}getMutationDefaults(_e){const e=[...Hn(this,Xp).values()];let un={};return e.forEach(dn=>{partialMatchKey(_e,dn.mutationKey)&&(un={...un,...dn.defaultOptions})}),un}defaultQueryOptions(_e){if(_e._defaulted)return _e;const e={...Hn(this,Hu).queries,...this.getQueryDefaults(_e.queryKey),..._e,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(_e){return _e!=null&&_e._defaulted?_e:{...Hn(this,Hu).mutations,...(_e==null?void 0:_e.mutationKey)&&this.getMutationDefaults(_e.mutationKey),..._e,_defaulted:!0}}clear(){Hn(this,go).clear(),Hn(this,qu).clear()}},go=new WeakMap,qu=new WeakMap,Hu=new WeakMap,Yp=new WeakMap,Xp=new WeakMap,Wu=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,qy),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:_e,children:e})=>(reactExports.useEffect(()=>(_e.mount(),()=>{_e.unmount()}),[_e]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:_e,children:e}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(_e){const e=[];let un=0;for(let dn=0;dn<_e.length;dn++){let hn=_e.charCodeAt(dn);hn<128?e[un++]=hn:hn<2048?(e[un++]=hn>>6|192,e[un++]=hn&63|128):(hn&64512)===55296&&dn+1<_e.length&&(_e.charCodeAt(dn+1)&64512)===56320?(hn=65536+((hn&1023)<<10)+(_e.charCodeAt(++dn)&1023),e[un++]=hn>>18|240,e[un++]=hn>>12&63|128,e[un++]=hn>>6&63|128,e[un++]=hn&63|128):(e[un++]=hn>>12|224,e[un++]=hn>>6&63|128,e[un++]=hn&63|128)}return e},byteArrayToString=function(_e){const e=[];let un=0,dn=0;for(;un<_e.length;){const hn=_e[un++];if(hn<128)e[dn++]=String.fromCharCode(hn);else if(hn>191&&hn<224){const fn=_e[un++];e[dn++]=String.fromCharCode((hn&31)<<6|fn&63)}else if(hn>239&&hn<365){const fn=_e[un++],pn=_e[un++],mn=_e[un++],gn=((hn&7)<<18|(fn&63)<<12|(pn&63)<<6|mn&63)-65536;e[dn++]=String.fromCharCode(55296+(gn>>10)),e[dn++]=String.fromCharCode(56320+(gn&1023))}else{const fn=_e[un++],pn=_e[un++];e[dn++]=String.fromCharCode((hn&15)<<12|(fn&63)<<6|pn&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(_e,e){if(!Array.isArray(_e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const un=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,dn=[];for(let hn=0;hn<_e.length;hn+=3){const fn=_e[hn],pn=hn+1<_e.length,mn=pn?_e[hn+1]:0,gn=hn+2<_e.length,yn=gn?_e[hn+2]:0,xn=fn>>2,En=(fn&3)<<4|mn>>4;let bn=(mn&15)<<2|yn>>6,vn=yn&63;gn||(vn=64,pn||(bn=64)),dn.push(un[xn],un[En],un[bn],un[vn])}return dn.join("")},encodeString(_e,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(_e):this.encodeByteArray(stringToByteArray$1(_e),e)},decodeString(_e,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(_e):byteArrayToString(this.decodeStringToByteArray(_e,e))},decodeStringToByteArray(_e,e){this.init_();const un=e?this.charToByteMapWebSafe_:this.charToByteMap_,dn=[];for(let hn=0;hn<_e.length;){const fn=un[_e.charAt(hn++)],mn=hn<_e.length?un[_e.charAt(hn)]:0;++hn;const yn=hn<_e.length?un[_e.charAt(hn)]:64;++hn;const En=hn<_e.length?un[_e.charAt(hn)]:64;if(++hn,fn==null||mn==null||yn==null||En==null)throw new DecodeBase64StringError;const bn=fn<<2|mn>>4;if(dn.push(bn),yn!==64){const vn=mn<<4&240|yn>>2;if(dn.push(vn),En!==64){const Pn=yn<<6&192|En;dn.push(Pn)}}}return dn},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let _e=0;_e<this.ENCODED_VALS.length;_e++)this.byteToCharMap_[_e]=this.ENCODED_VALS.charAt(_e),this.charToByteMap_[this.byteToCharMap_[_e]]=_e,this.byteToCharMapWebSafe_[_e]=this.ENCODED_VALS_WEBSAFE.charAt(_e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[_e]]=_e,_e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(_e)]=_e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(_e)]=_e)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(_e){const e=stringToByteArray$1(_e);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(_e){return base64Encode(_e).replace(/\./g,"")},base64Decode=function(_e){try{return base64.decodeString(_e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const _e=define_process_env_default.__FIREBASE_DEFAULTS__;if(_e)return JSON.parse(_e)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let _e;try{_e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=_e&&base64Decode(_e[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(_e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${_e}`);return}},getDefaultEmulatorHost=_e=>{var e,un;return(un=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||un===void 0?void 0:un[_e]},getDefaultEmulatorHostnameAndPort=_e=>{const e=getDefaultEmulatorHost(_e);if(!e)return;const un=e.lastIndexOf(":");if(un<=0||un+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const dn=parseInt(e.substring(un+1),10);return e[0]==="["?[e.substring(1,un-1),dn]:[e.substring(0,un),dn]},getDefaultAppConfig=()=>{var _e;return(_e=getDefaults())===null||_e===void 0?void 0:_e.config},getExperimentalSetting=_e=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${_e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,un)=>{this.resolve=e,this.reject=un})}wrapCallback(e){return(un,dn)=>{un?this.reject(un):this.resolve(dn),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(un):e(un,dn))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(_e){return _e.endsWith(".cloudworkstations.dev")}async function pingServer(_e){return(await fetch(_e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(_e,e){if(_e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const un={alg:"none",type:"JWT"},dn=e||"demo-project",hn=_e.iat||0,fn=_e.sub||_e.user_id;if(!fn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pn=Object.assign({iss:`https://securetoken.google.com/${dn}`,aud:dn,iat:hn,exp:hn+3600,auth_time:hn,sub:fn,user_id:fn,firebase:{sign_in_provider:"custom",identities:{}}},_e);return[base64urlEncodeWithoutPadding(JSON.stringify(un)),base64urlEncodeWithoutPadding(JSON.stringify(pn)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const _e={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?_e.emulator.push(e):_e.prod.push(e);return _e}function getOrCreateEl(_e){let e=document.getElementById(_e),un=!1;return e||(e=document.createElement("div"),e.setAttribute("id",_e),un=!0),{created:un,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(_e,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[_e]===e||emulatorStatus[_e]||previouslyDismissed)return;emulatorStatus[_e]=e;function un(bn){return`__firebase__banner__${bn}`}const dn="__firebase__banner",fn=getEmulatorSummary().prod.length>0;function pn(){const bn=document.getElementById(dn);bn&&bn.remove()}function mn(bn){bn.style.display="flex",bn.style.background="#7faaf0",bn.style.position="fixed",bn.style.bottom="5px",bn.style.left="5px",bn.style.padding=".5em",bn.style.borderRadius="5px",bn.style.alignItems="center"}function gn(bn,vn){bn.setAttribute("width","24"),bn.setAttribute("id",vn),bn.setAttribute("height","24"),bn.setAttribute("viewBox","0 0 24 24"),bn.setAttribute("fill","none"),bn.style.marginLeft="-6px"}function yn(){const bn=document.createElement("span");return bn.style.cursor="pointer",bn.style.marginLeft="16px",bn.style.fontSize="24px",bn.innerHTML=" &times;",bn.onclick=()=>{previouslyDismissed=!0,pn()},bn}function xn(bn,vn){bn.setAttribute("id",vn),bn.innerText="Learn more",bn.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",bn.setAttribute("target","__blank"),bn.style.paddingLeft="5px",bn.style.textDecoration="underline"}function En(){const bn=getOrCreateEl(dn),vn=un("text"),Pn=document.getElementById(vn)||document.createElement("span"),Tn=un("learnmore"),In=document.getElementById(Tn)||document.createElement("a"),Rn=un("preprendIcon"),Sn=document.getElementById(Rn)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(bn.created){const Dn=bn.element;mn(Dn),xn(In,Tn);const $n=yn();gn(Sn,Rn),Dn.append(Sn,Pn,In,$n),document.body.appendChild(Dn)}fn?(Pn.innerText="Preview backend disconnected.",Sn.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Sn.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Pn.innerText="Preview backend running in this workspace."),Pn.setAttribute("id",vn)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",En):En()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var _e;const e=(_e=getDefaults())===null||_e===void 0?void 0:_e.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const _e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof _e=="object"&&_e.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const _e=getUA();return _e.indexOf("MSIE ")>=0||_e.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((_e,e)=>{try{let un=!0;const dn="validate-browser-context-for-indexeddb-analytics-module",hn=self.indexedDB.open(dn);hn.onsuccess=()=>{hn.result.close(),un||self.indexedDB.deleteDatabase(dn),_e(!0)},hn.onupgradeneeded=()=>{un=!1},hn.onerror=()=>{var fn;e(((fn=hn.error)===null||fn===void 0?void 0:fn.message)||"")}}catch(un){e(un)}})}function areCookiesEnabled(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,un,dn){super(un),this.code=e,this.customData=dn,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,un,dn){this.service=e,this.serviceName=un,this.errors=dn}create(e,...un){const dn=un[0]||{},hn=`${this.service}/${e}`,fn=this.errors[e],pn=fn?replaceTemplate(fn,dn):"Error",mn=`${this.serviceName}: ${pn} (${hn}).`;return new FirebaseError(hn,mn,dn)}}function replaceTemplate(_e,e){return _e.replace(PATTERN,(un,dn)=>{const hn=e[dn];return hn!=null?String(hn):`<${dn}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(_e){for(const e in _e)if(Object.prototype.hasOwnProperty.call(_e,e))return!1;return!0}function deepEqual(_e,e){if(_e===e)return!0;const un=Object.keys(_e),dn=Object.keys(e);for(const hn of un){if(!dn.includes(hn))return!1;const fn=_e[hn],pn=e[hn];if(isObject(fn)&&isObject(pn)){if(!deepEqual(fn,pn))return!1}else if(fn!==pn)return!1}for(const hn of dn)if(!un.includes(hn))return!1;return!0}function isObject(_e){return _e!==null&&typeof _e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(_e){const e=[];for(const[un,dn]of Object.entries(_e))Array.isArray(dn)?dn.forEach(hn=>{e.push(encodeURIComponent(un)+"="+encodeURIComponent(hn))}):e.push(encodeURIComponent(un)+"="+encodeURIComponent(dn));return e.length?"&"+e.join("&"):""}function createSubscribe(_e,e){const un=new ObserverProxy(_e,e);return un.subscribe.bind(un)}class ObserverProxy{constructor(e,un){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=un,this.task.then(()=>{e(this)}).catch(dn=>{this.error(dn)})}next(e){this.forEachObserver(un=>{un.next(e)})}error(e){this.forEachObserver(un=>{un.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,un,dn){let hn;if(e===void 0&&un===void 0&&dn===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?hn=e:hn={next:e,error:un,complete:dn},hn.next===void 0&&(hn.next=noop),hn.error===void 0&&(hn.error=noop),hn.complete===void 0&&(hn.complete=noop);const fn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?hn.error(this.finalError):hn.complete()}catch{}}),this.observers.push(hn),fn}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let un=0;un<this.observers.length;un++)this.sendOne(un,e)}sendOne(e,un){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{un(this.observers[e])}catch(dn){typeof console<"u"&&console.error&&console.error(dn)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(_e,e){if(typeof _e!="object"||_e===null)return!1;for(const un of e)if(un in _e&&typeof _e[un]=="function")return!0;return!1}function noop(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_INTERVAL_MILLIS=1e3,DEFAULT_BACKOFF_FACTOR=2,MAX_VALUE_MILLIS=4*60*60*1e3,RANDOM_FACTOR=.5;function calculateBackoffMillis(_e,e=DEFAULT_INTERVAL_MILLIS,un=DEFAULT_BACKOFF_FACTOR){const dn=e*Math.pow(un,_e),hn=Math.round(RANDOM_FACTOR*dn*(Math.random()-.5)*2);return Math.min(MAX_VALUE_MILLIS,dn+hn)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(_e){return _e&&_e._delegate?_e._delegate:_e}class Component{constructor(e,un,dn){this.name=e,this.instanceFactory=un,this.type=dn,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,un){this.name=e,this.container=un,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const un=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(un)){const dn=new Deferred;if(this.instancesDeferred.set(un,dn),this.isInitialized(un)||this.shouldAutoInitialize())try{const hn=this.getOrInitializeService({instanceIdentifier:un});hn&&dn.resolve(hn)}catch{}}return this.instancesDeferred.get(un).promise}getImmediate(e){var un;const dn=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),hn=(un=e==null?void 0:e.optional)!==null&&un!==void 0?un:!1;if(this.isInitialized(dn)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:dn})}catch(fn){if(hn)return null;throw fn}else{if(hn)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[un,dn]of this.instancesDeferred.entries()){const hn=this.normalizeInstanceIdentifier(un);try{const fn=this.getOrInitializeService({instanceIdentifier:hn});dn.resolve(fn)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(un=>"INTERNAL"in un).map(un=>un.INTERNAL.delete()),...e.filter(un=>"_delete"in un).map(un=>un._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:un={}}=e,dn=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(dn))throw Error(`${this.name}(${dn}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const hn=this.getOrInitializeService({instanceIdentifier:dn,options:un});for(const[fn,pn]of this.instancesDeferred.entries()){const mn=this.normalizeInstanceIdentifier(fn);dn===mn&&pn.resolve(hn)}return hn}onInit(e,un){var dn;const hn=this.normalizeInstanceIdentifier(un),fn=(dn=this.onInitCallbacks.get(hn))!==null&&dn!==void 0?dn:new Set;fn.add(e),this.onInitCallbacks.set(hn,fn);const pn=this.instances.get(hn);return pn&&e(pn,hn),()=>{fn.delete(e)}}invokeOnInitCallbacks(e,un){const dn=this.onInitCallbacks.get(un);if(dn)for(const hn of dn)try{hn(e,un)}catch{}}getOrInitializeService({instanceIdentifier:e,options:un={}}){let dn=this.instances.get(e);if(!dn&&this.component&&(dn=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:un}),this.instances.set(e,dn),this.instancesOptions.set(e,un),this.invokeOnInitCallbacks(dn,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,dn)}catch{}return dn||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(_e){return _e===DEFAULT_ENTRY_NAME$1?void 0:_e}function isComponentEager(_e){return _e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const un=this.getProvider(e.name);if(un.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);un.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const un=new Provider(e,this);return this.providers.set(e,un),un}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(_e){_e[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(_e,e,...un)=>{if(e<_e.logLevel)return;const dn=new Date().toISOString(),hn=ConsoleMethod[e];if(hn)console[hn](`[${dn}]  ${_e.name}:`,...un);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(_e,e)=>e.some(un=>_e instanceof un);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(_e){const e=new Promise((un,dn)=>{const hn=()=>{_e.removeEventListener("success",fn),_e.removeEventListener("error",pn)},fn=()=>{un(wrap(_e.result)),hn()},pn=()=>{dn(_e.error),hn()};_e.addEventListener("success",fn),_e.addEventListener("error",pn)});return e.then(un=>{un instanceof IDBCursor&&cursorRequestMap.set(un,_e)}).catch(()=>{}),reverseTransformCache.set(e,_e),e}function cacheDonePromiseForTransaction(_e){if(transactionDoneMap.has(_e))return;const e=new Promise((un,dn)=>{const hn=()=>{_e.removeEventListener("complete",fn),_e.removeEventListener("error",pn),_e.removeEventListener("abort",pn)},fn=()=>{un(),hn()},pn=()=>{dn(_e.error||new DOMException("AbortError","AbortError")),hn()};_e.addEventListener("complete",fn),_e.addEventListener("error",pn),_e.addEventListener("abort",pn)});transactionDoneMap.set(_e,e)}let idbProxyTraps={get(_e,e,un){if(_e instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(_e);if(e==="objectStoreNames")return _e.objectStoreNames||transactionStoreNamesMap.get(_e);if(e==="store")return un.objectStoreNames[1]?void 0:un.objectStore(un.objectStoreNames[0])}return wrap(_e[e])},set(_e,e,un){return _e[e]=un,!0},has(_e,e){return _e instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in _e}};function replaceTraps(_e){idbProxyTraps=_e(idbProxyTraps)}function wrapFunction(_e){return _e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...un){const dn=_e.call(unwrap(this),e,...un);return transactionStoreNamesMap.set(dn,e.sort?e.sort():[e]),wrap(dn)}:getCursorAdvanceMethods().includes(_e)?function(...e){return _e.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(_e.apply(unwrap(this),e))}}function transformCachableValue(_e){return typeof _e=="function"?wrapFunction(_e):(_e instanceof IDBTransaction&&cacheDonePromiseForTransaction(_e),instanceOfAny(_e,getIdbProxyableTypes())?new Proxy(_e,idbProxyTraps):_e)}function wrap(_e){if(_e instanceof IDBRequest)return promisifyRequest(_e);if(transformCache.has(_e))return transformCache.get(_e);const e=transformCachableValue(_e);return e!==_e&&(transformCache.set(_e,e),reverseTransformCache.set(e,_e)),e}const unwrap=_e=>reverseTransformCache.get(_e);function openDB(_e,e,{blocked:un,upgrade:dn,blocking:hn,terminated:fn}={}){const pn=indexedDB.open(_e,e),mn=wrap(pn);return dn&&pn.addEventListener("upgradeneeded",gn=>{dn(wrap(pn.result),gn.oldVersion,gn.newVersion,wrap(pn.transaction),gn)}),un&&pn.addEventListener("blocked",gn=>un(gn.oldVersion,gn.newVersion,gn)),mn.then(gn=>{fn&&gn.addEventListener("close",()=>fn()),hn&&gn.addEventListener("versionchange",yn=>hn(yn.oldVersion,yn.newVersion,yn))}).catch(()=>{}),mn}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(_e,e){if(!(_e instanceof IDBDatabase&&!(e in _e)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const un=e.replace(/FromIndex$/,""),dn=e!==un,hn=writeMethods.includes(un);if(!(un in(dn?IDBIndex:IDBObjectStore).prototype)||!(hn||readMethods.includes(un)))return;const fn=async function(pn,...mn){const gn=this.transaction(pn,hn?"readwrite":"readonly");let yn=gn.store;return dn&&(yn=yn.index(mn.shift())),(await Promise.all([yn[un](...mn),hn&&gn.done]))[0]};return cachedMethods.set(e,fn),fn}replaceTraps(_e=>({..._e,get:(e,un,dn)=>getMethod(e,un)||_e.get(e,un,dn),has:(e,un)=>!!getMethod(e,un)||_e.has(e,un)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(un=>{if(isVersionServiceProvider(un)){const dn=un.getImmediate();return`${dn.library}/${dn.version}`}else return null}).filter(un=>un).join(" ")}}function isVersionServiceProvider(_e){const e=_e.getComponent();return(e==null?void 0:e.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4$1="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$5="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4$1]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(_e,e){try{_e.container.addComponent(e)}catch(un){logger$1.debug(`Component ${e.name} failed to register with FirebaseApp ${_e.name}`,un)}}function _registerComponent(_e){const e=_e.name;if(_components.has(e))return logger$1.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,_e);for(const un of _apps.values())_addComponent(un,_e);for(const un of _serverApps.values())_addComponent(un,_e);return!0}function _getProvider(_e,e){const un=_e.container.getProvider("heartbeat").getImmediate({optional:!0});return un&&un.triggerHeartbeat(),_e.container.getProvider(e)}function _isFirebaseServerApp(_e){return _e==null?!1:_e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS$1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS$1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,un,dn){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},un),this._name=un.name,this._automaticDataCollectionEnabled=un.automaticDataCollectionEnabled,this._container=dn,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$5;function initializeApp(_e,e={}){let un=_e;typeof e!="object"&&(e={name:e});const dn=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0},e),hn=dn.name;if(typeof hn!="string"||!hn)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(hn)});if(un||(un=getDefaultAppConfig()),!un)throw ERROR_FACTORY$2.create("no-options");const fn=_apps.get(hn);if(fn){if(deepEqual(un,fn.options)&&deepEqual(dn,fn.config))return fn;throw ERROR_FACTORY$2.create("duplicate-app",{appName:hn})}const pn=new ComponentContainer(hn);for(const gn of _components.values())pn.addComponent(gn);const mn=new FirebaseAppImpl(un,dn,pn);return _apps.set(hn,mn),mn}function getApp(_e=DEFAULT_ENTRY_NAME){const e=_apps.get(_e);if(!e&&_e===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY$2.create("no-app",{appName:_e});return e}function registerVersion(_e,e,un){var dn;let hn=(dn=PLATFORM_LOG_STRING[_e])!==null&&dn!==void 0?dn:_e;un&&(hn+=`-${un}`);const fn=hn.match(/\s|\//),pn=e.match(/\s|\//);if(fn||pn){const mn=[`Unable to register library "${hn}" with version "${e}":`];fn&&mn.push(`library name "${hn}" contains illegal characters (whitespace or "/")`),fn&&pn&&mn.push("and"),pn&&mn.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger$1.warn(mn.join(" "));return}_registerComponent(new Component(`${hn}-version`,()=>({library:hn,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(_e,e)=>{switch(e){case 0:try{_e.createObjectStore(STORE_NAME)}catch(un){console.warn(un)}}}}).catch(_e=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:_e.message})})),dbPromise$1}async function readHeartbeatsFromIndexedDB(_e){try{const un=(await getDbPromise$1()).transaction(STORE_NAME),dn=await un.objectStore(STORE_NAME).get(computeKey(_e));return await un.done,dn}catch(e){if(e instanceof FirebaseError)logger$1.warn(e.message);else{const un=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});logger$1.warn(un.message)}}}async function writeHeartbeatsToIndexedDB(_e,e){try{const dn=(await getDbPromise$1()).transaction(STORE_NAME,"readwrite");await dn.objectStore(STORE_NAME).put(e,computeKey(_e)),await dn.done}catch(un){if(un instanceof FirebaseError)logger$1.warn(un.message);else{const dn=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:un==null?void 0:un.message});logger$1.warn(dn.message)}}}function computeKey(_e){return`${_e.name}!${_e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const un=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(un),this._heartbeatsCachePromise=this._storage.read().then(dn=>(this._heartbeatsCache=dn,dn))}async triggerHeartbeat(){var e,un;try{const hn=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((un=this._heartbeatsCache)===null||un===void 0?void 0:un.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===fn||this._heartbeatsCache.heartbeats.some(pn=>pn.date===fn))return;if(this._heartbeatsCache.heartbeats.push({date:fn,agent:hn}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const pn=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(pn,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(dn){logger$1.warn(dn)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const un=getUTCDateString(),{heartbeatsToSend:dn,unsentEntries:hn}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),fn=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:dn}));return this._heartbeatsCache.lastSentHeartbeatDate=un,hn.length>0?(this._heartbeatsCache.heartbeats=hn,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),fn}catch(un){return logger$1.warn(un),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(_e,e=MAX_HEADER_BYTES){const un=[];let dn=_e.slice();for(const hn of _e){const fn=un.find(pn=>pn.agent===hn.agent);if(fn){if(fn.dates.push(hn.date),countBytes(un)>e){fn.dates.pop();break}}else if(un.push({agent:hn.agent,dates:[hn.date]}),countBytes(un)>e){un.pop();break}dn=dn.slice(1)}return{heartbeatsToSend:un,unsentEntries:dn}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const un=await readHeartbeatsFromIndexedDB(this.app);return un!=null&&un.heartbeats?un:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var un;if(await this._canUseIndexedDBPromise){const hn=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(un=e.lastSentHeartbeatDate)!==null&&un!==void 0?un:hn.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var un;if(await this._canUseIndexedDBPromise){const hn=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(un=e.lastSentHeartbeatDate)!==null&&un!==void 0?un:hn.lastSentHeartbeatDate,heartbeats:[...hn.heartbeats,...e.heartbeats]})}else return}}function countBytes(_e){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:_e})).length}function getEarliestHeartbeatIdx(_e){if(_e.length===0)return-1;let e=0,un=_e[0].date;for(let dn=1;dn<_e.length;dn++)_e[dn].date<un&&(un=_e[dn].date,e=dn);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(_e){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,_e),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var un,dn=1,hn=arguments.length;dn<hn;dn++){un=arguments[dn];for(var fn in un)Object.prototype.hasOwnProperty.call(un,fn)&&(e[fn]=un[fn])}return e},__assign$1.apply(this,arguments)};function __rest(_e,e){var un={};for(var dn in _e)Object.prototype.hasOwnProperty.call(_e,dn)&&e.indexOf(dn)<0&&(un[dn]=_e[dn]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var hn=0,dn=Object.getOwnPropertySymbols(_e);hn<dn.length;hn++)e.indexOf(dn[hn])<0&&Object.prototype.propertyIsEnumerable.call(_e,dn[hn])&&(un[dn[hn]]=_e[dn[hn]]);return un}function __spreadArray(_e,e,un){if(un||arguments.length===2)for(var dn=0,hn=e.length,fn;dn<hn;dn++)(fn||!(dn in e))&&(fn||(fn=Array.prototype.slice.call(e,0,dn)),fn[dn]=e[dn]);return _e.concat(fn||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(_e,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${_e}`,...e)}function _logError(_e,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${_e}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(_e,...e){throw createErrorInternal(_e,...e)}function _createError(_e,...e){return createErrorInternal(_e,...e)}function _errorWithCustomMessage(_e,e,un){const dn=Object.assign(Object.assign({},prodErrorMap()),{[e]:un});return new ErrorFactory("auth","Firebase",dn).create(e,{appName:_e.name})}function _serverAppCurrentUserOperationNotSupportedError(_e){return _errorWithCustomMessage(_e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(_e,...e){if(typeof _e!="string"){const un=e[0],dn=[...e.slice(1)];return dn[0]&&(dn[0].appName=_e.name),_e._errorFactory.create(un,...dn)}return _DEFAULT_AUTH_ERROR_FACTORY.create(_e,...e)}function _assert(_e,e,...un){if(!_e)throw createErrorInternal(e,...un)}function debugFail(_e){const e="INTERNAL ASSERTION FAILED: "+_e;throw _logError(e),new Error(e)}function debugAssert(_e,e){_e||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var _e;return typeof self<"u"&&((_e=self.location)===null||_e===void 0?void 0:_e.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var _e;return typeof self<"u"&&((_e=self.location)===null||_e===void 0?void 0:_e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const _e=navigator;return _e.languages&&_e.languages[0]||_e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,un){this.shortDelay=e,this.longDelay=un,debugAssert(un>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(_e,e){debugAssert(_e.emulator,"Emulator should always be set here");const{url:un}=_e.emulator;return e?`${un}${e.startsWith("/")?e.slice(1):e}`:un}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,un,dn){this.fetchImpl=e,un&&(this.headersImpl=un),dn&&(this.responseImpl=dn)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(_e,e){return _e.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:_e.tenantId}):e}async function _performApiRequest(_e,e,un,dn,hn={}){return _performFetchWithErrorHandling(_e,hn,async()=>{let fn={},pn={};dn&&(e==="GET"?pn=dn:fn={body:JSON.stringify(dn)});const mn=querystring(Object.assign({key:_e.config.apiKey},pn)).slice(1),gn=await _e._getAdditionalHeaders();gn["Content-Type"]="application/json",_e.languageCode&&(gn["X-Firebase-Locale"]=_e.languageCode);const yn=Object.assign({method:e,headers:gn},fn);return isCloudflareWorker()||(yn.referrerPolicy="no-referrer"),_e.emulatorConfig&&isCloudWorkstation(_e.emulatorConfig.host)&&(yn.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(_e,_e.config.apiHost,un,mn),yn)})}async function _performFetchWithErrorHandling(_e,e,un){_e._canInitEmulator=!1;const dn=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const hn=new NetworkTimeout(_e),fn=await Promise.race([un(),hn.promise]);hn.clearNetworkTimeout();const pn=await fn.json();if("needConfirmation"in pn)throw _makeTaggedError(_e,"account-exists-with-different-credential",pn);if(fn.ok&&!("errorMessage"in pn))return pn;{const mn=fn.ok?pn.errorMessage:pn.error.message,[gn,yn]=mn.split(" : ");if(gn==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(_e,"credential-already-in-use",pn);if(gn==="EMAIL_EXISTS")throw _makeTaggedError(_e,"email-already-in-use",pn);if(gn==="USER_DISABLED")throw _makeTaggedError(_e,"user-disabled",pn);const xn=dn[gn]||gn.toLowerCase().replace(/[_\s]+/g,"-");if(yn)throw _errorWithCustomMessage(_e,xn,yn);_fail(_e,xn)}}catch(hn){if(hn instanceof FirebaseError)throw hn;_fail(_e,"network-request-failed",{message:String(hn)})}}async function _performSignInRequest(_e,e,un,dn,hn={}){const fn=await _performApiRequest(_e,e,un,dn,hn);return"mfaPendingCredential"in fn&&_fail(_e,"multi-factor-auth-required",{_serverResponse:fn}),fn}async function _getFinalTarget(_e,e,un,dn){const hn=`${e}${un}?${dn}`,fn=_e,pn=fn.config.emulator?_emulatorUrl(_e.config,hn):`${_e.config.apiScheme}://${hn}`;return CookieAuthProxiedEndpoints.includes(un)&&(await fn._persistenceManagerAvailable,fn._getPersistenceType()==="COOKIE")?fn._getPersistence()._getFinalTarget(pn).toString():pn}function _parseEnforcementState(_e){switch(_e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((un,dn)=>{this.timer=setTimeout(()=>dn(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(_e,e,un){const dn={appName:_e.name};un.email&&(dn.email=un.email),un.phoneNumber&&(dn.phoneNumber=un.phoneNumber);const hn=_createError(_e,e,dn);return hn.customData._tokenResponse=un,hn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isV2(_e){return _e!==void 0&&_e.getResponse!==void 0}function isEnterprise(_e){return _e!==void 0&&_e.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const un of this.recaptchaEnforcementState)if(un.provider&&un.provider===e)return _parseEnforcementState(un.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getRecaptchaParams(_e){return(await _performApiRequest(_e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function getRecaptchaConfig(_e,e){return _performApiRequest(_e,"GET","/v2/recaptchaConfig",_addTidIfNecessary(_e,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(_e,e){return _performApiRequest(_e,"POST","/v1/accounts:delete",e)}async function getAccountInfo(_e,e){return _performApiRequest(_e,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(_e){if(_e)try{const e=new Date(Number(_e));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(_e,e=!1){const un=getModularInstance(_e),dn=await un.getIdToken(e),hn=_parseToken(dn);_assert(hn&&hn.exp&&hn.auth_time&&hn.iat,un.auth,"internal-error");const fn=typeof hn.firebase=="object"?hn.firebase:void 0,pn=fn==null?void 0:fn.sign_in_provider;return{claims:hn,token:dn,authTime:utcTimestampToDateString(secondsStringToMilliseconds(hn.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(hn.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(hn.exp)),signInProvider:pn||null,signInSecondFactor:(fn==null?void 0:fn.sign_in_second_factor)||null}}function secondsStringToMilliseconds(_e){return Number(_e)*1e3}function _parseToken(_e){const[e,un,dn]=_e.split(".");if(e===void 0||un===void 0||dn===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const hn=base64Decode(un);return hn?JSON.parse(hn):(_logError("Failed to decode base64 JWT payload"),null)}catch(hn){return _logError("Caught error parsing JWT payload as JSON",hn==null?void 0:hn.toString()),null}}function _tokenExpiresIn(_e){const e=_parseToken(_e);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(_e,e,un=!1){if(un)return e;try{return await e}catch(dn){throw dn instanceof FirebaseError&&isUserInvalidated(dn)&&_e.auth.currentUser===_e&&await _e.auth.signOut(),dn}}function isUserInvalidated({code:_e}){return _e==="auth/user-disabled"||_e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var un;if(e){const dn=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),dn}else{this.errorBackoff=3e4;const hn=((un=this.user.stsTokenManager.expirationTime)!==null&&un!==void 0?un:0)-Date.now()-3e5;return Math.max(0,hn)}}schedule(e=!1){if(!this.isRunning)return;const un=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},un)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,un){this.createdAt=e,this.lastLoginAt=un,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(_e){var e;const un=_e.auth,dn=await _e.getIdToken(),hn=await _logoutIfInvalidated(_e,getAccountInfo(un,{idToken:dn}));_assert(hn==null?void 0:hn.users.length,un,"internal-error");const fn=hn.users[0];_e._notifyReloadListener(fn);const pn=!((e=fn.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(fn.providerUserInfo):[],mn=mergeProviderData(_e.providerData,pn),gn=_e.isAnonymous,yn=!(_e.email&&fn.passwordHash)&&!(mn!=null&&mn.length),xn=gn?yn:!1,En={uid:fn.localId,displayName:fn.displayName||null,photoURL:fn.photoUrl||null,email:fn.email||null,emailVerified:fn.emailVerified||!1,phoneNumber:fn.phoneNumber||null,tenantId:fn.tenantId||null,providerData:mn,metadata:new UserMetadata(fn.createdAt,fn.lastLoginAt),isAnonymous:xn};Object.assign(_e,En)}async function reload(_e){const e=getModularInstance(_e);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(_e,e){return[..._e.filter(dn=>!e.some(hn=>hn.providerId===dn.providerId)),...e]}function extractProviderData(_e){return _e.map(e=>{var{providerId:un}=e,dn=__rest(e,["providerId"]);return{providerId:un,uid:dn.rawId||"",displayName:dn.displayName||null,email:dn.email||null,phoneNumber:dn.phoneNumber||null,photoURL:dn.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(_e,e){const un=await _performFetchWithErrorHandling(_e,{},async()=>{const dn=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:hn,apiKey:fn}=_e.config,pn=await _getFinalTarget(_e,hn,"/v1/token",`key=${fn}`),mn=await _e._getAdditionalHeaders();mn["Content-Type"]="application/x-www-form-urlencoded";const gn={method:"POST",headers:mn,body:dn};return _e.emulatorConfig&&isCloudWorkstation(_e.emulatorConfig.host)&&(gn.credentials="include"),FetchProvider.fetch()(pn,gn)});return{accessToken:un.access_token,expiresIn:un.expires_in,refreshToken:un.refresh_token}}async function revokeToken(_e,e){return _performApiRequest(_e,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(_e,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const un="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,un)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const un=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,un)}async getToken(e,un=!1){return!un&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,un){const{accessToken:dn,refreshToken:hn,expiresIn:fn}=await requestStsToken(e,un);this.updateTokensAndExpiration(dn,hn,Number(fn))}updateTokensAndExpiration(e,un,dn){this.refreshToken=un||null,this.accessToken=e||null,this.expirationTime=Date.now()+dn*1e3}static fromJSON(e,un){const{refreshToken:dn,accessToken:hn,expirationTime:fn}=un,pn=new StsTokenManager;return dn&&(_assert(typeof dn=="string","internal-error",{appName:e}),pn.refreshToken=dn),hn&&(_assert(typeof hn=="string","internal-error",{appName:e}),pn.accessToken=hn),fn&&(_assert(typeof fn=="number","internal-error",{appName:e}),pn.expirationTime=fn),pn}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(_e,e){_assert(typeof _e=="string"||typeof _e>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:un,auth:dn,stsTokenManager:hn}=e,fn=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=un,this.auth=dn,this.stsTokenManager=hn,this.accessToken=hn.accessToken,this.displayName=fn.displayName||null,this.email=fn.email||null,this.emailVerified=fn.emailVerified||!1,this.phoneNumber=fn.phoneNumber||null,this.photoURL=fn.photoURL||null,this.isAnonymous=fn.isAnonymous||!1,this.tenantId=fn.tenantId||null,this.providerData=fn.providerData?[...fn.providerData]:[],this.metadata=new UserMetadata(fn.createdAt||void 0,fn.lastLoginAt||void 0)}async getIdToken(e){const un=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(un,this.auth,"internal-error"),this.accessToken!==un&&(this.accessToken=un,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),un}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(un=>Object.assign({},un)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const un=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return un.metadata._copy(this.metadata),un}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,un=!1){let dn=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),dn=!0),un&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),dn&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,un){var dn,hn,fn,pn,mn,gn,yn,xn;const En=(dn=un.displayName)!==null&&dn!==void 0?dn:void 0,bn=(hn=un.email)!==null&&hn!==void 0?hn:void 0,vn=(fn=un.phoneNumber)!==null&&fn!==void 0?fn:void 0,Pn=(pn=un.photoURL)!==null&&pn!==void 0?pn:void 0,Tn=(mn=un.tenantId)!==null&&mn!==void 0?mn:void 0,In=(gn=un._redirectEventId)!==null&&gn!==void 0?gn:void 0,Rn=(yn=un.createdAt)!==null&&yn!==void 0?yn:void 0,Sn=(xn=un.lastLoginAt)!==null&&xn!==void 0?xn:void 0,{uid:Dn,emailVerified:$n,isAnonymous:Fn,providerData:Gn,stsTokenManager:kn}=un;_assert(Dn&&kn,e,"internal-error");const Nn=StsTokenManager.fromJSON(this.name,kn);_assert(typeof Dn=="string",e,"internal-error"),assertStringOrUndefined(En,e.name),assertStringOrUndefined(bn,e.name),_assert(typeof $n=="boolean",e,"internal-error"),_assert(typeof Fn=="boolean",e,"internal-error"),assertStringOrUndefined(vn,e.name),assertStringOrUndefined(Pn,e.name),assertStringOrUndefined(Tn,e.name),assertStringOrUndefined(In,e.name),assertStringOrUndefined(Rn,e.name),assertStringOrUndefined(Sn,e.name);const Ln=new UserImpl({uid:Dn,auth:e,email:bn,emailVerified:$n,displayName:En,isAnonymous:Fn,photoURL:Pn,phoneNumber:vn,tenantId:Tn,stsTokenManager:Nn,createdAt:Rn,lastLoginAt:Sn});return Gn&&Array.isArray(Gn)&&(Ln.providerData=Gn.map(zn=>Object.assign({},zn))),In&&(Ln._redirectEventId=In),Ln}static async _fromIdTokenResponse(e,un,dn=!1){const hn=new StsTokenManager;hn.updateFromServerResponse(un);const fn=new UserImpl({uid:un.localId,auth:e,stsTokenManager:hn,isAnonymous:dn});return await _reloadWithoutSaving(fn),fn}static async _fromGetAccountInfoResponse(e,un,dn){const hn=un.users[0];_assert(hn.localId!==void 0,"internal-error");const fn=hn.providerUserInfo!==void 0?extractProviderData(hn.providerUserInfo):[],pn=!(hn.email&&hn.passwordHash)&&!(fn!=null&&fn.length),mn=new StsTokenManager;mn.updateFromIdToken(dn);const gn=new UserImpl({uid:hn.localId,auth:e,stsTokenManager:mn,isAnonymous:pn}),yn={uid:hn.localId,displayName:hn.displayName||null,photoURL:hn.photoUrl||null,email:hn.email||null,emailVerified:hn.emailVerified||!1,phoneNumber:hn.phoneNumber||null,tenantId:hn.tenantId||null,providerData:fn,metadata:new UserMetadata(hn.createdAt,hn.lastLoginAt),isAnonymous:!(hn.email&&hn.passwordHash)&&!(fn!=null&&fn.length)};return Object.assign(gn,yn),gn}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(_e){debugAssert(_e instanceof Function,"Expected a class definition");let e=instanceCache.get(_e);return e?(debugAssert(e instanceof _e,"Instance stored in cache mismatched with class"),e):(e=new _e,instanceCache.set(_e,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,un){this.storage[e]=un}async _get(e){const un=this.storage[e];return un===void 0?null:un}async _remove(e){delete this.storage[e]}_addListener(e,un){}_removeListener(e,un){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(_e,e,un){return`firebase:${_e}:${e}:${un}`}class PersistenceUserManager{constructor(e,un,dn){this.persistence=e,this.auth=un,this.userKey=dn;const{config:hn,name:fn}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,hn.apiKey,fn),this.fullPersistenceKey=_persistenceKeyName("persistence",hn.apiKey,fn),this.boundEventHandler=un._onStorageEvent.bind(un),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const un=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return un?UserImpl._fromGetAccountInfoResponse(this.auth,un,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const un=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,un)return this.setCurrentUser(un)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,un,dn="authUser"){if(!un.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,dn);const hn=(await Promise.all(un.map(async yn=>{if(await yn._isAvailable())return yn}))).filter(yn=>yn);let fn=hn[0]||_getInstance(inMemoryPersistence);const pn=_persistenceKeyName(dn,e.config.apiKey,e.name);let mn=null;for(const yn of un)try{const xn=await yn._get(pn);if(xn){let En;if(typeof xn=="string"){const bn=await getAccountInfo(e,{idToken:xn}).catch(()=>{});if(!bn)break;En=await UserImpl._fromGetAccountInfoResponse(e,bn,xn)}else En=UserImpl._fromJSON(e,xn);yn!==fn&&(mn=En),fn=yn;break}}catch{}const gn=hn.filter(yn=>yn._shouldAllowMigration);return!fn._shouldAllowMigration||!gn.length?new PersistenceUserManager(fn,e,dn):(fn=gn[0],mn&&await fn._set(pn,mn.toJSON()),await Promise.all(un.map(async yn=>{if(yn!==fn)try{await yn._remove(pn)}catch{}})),new PersistenceUserManager(fn,e,dn))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(_e){const e=_e.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const un=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,dn=_e.match(un);if((dn==null?void 0:dn.length)===2)return dn[1]}return"Other"}function _isFirefox(_e=getUA()){return/firefox\//i.test(_e)}function _isSafari(_e=getUA()){const e=_e.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(_e=getUA()){return/crios\//i.test(_e)}function _isIEMobile(_e=getUA()){return/iemobile/i.test(_e)}function _isAndroid(_e=getUA()){return/android/i.test(_e)}function _isBlackBerry(_e=getUA()){return/blackberry/i.test(_e)}function _isWebOS(_e=getUA()){return/webos/i.test(_e)}function _isIOS(_e=getUA()){return/iphone|ipad|ipod/i.test(_e)||/macintosh/i.test(_e)&&/mobile/i.test(_e)}function _isIOSStandalone(_e=getUA()){var e;return _isIOS(_e)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(_e=getUA()){return _isIOS(_e)||_isAndroid(_e)||_isWebOS(_e)||_isBlackBerry(_e)||/windows phone/i.test(_e)||_isIEMobile(_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(_e,e=[]){let un;switch(_e){case"Browser":un=_getBrowserName(getUA());break;case"Worker":un=`${_getBrowserName(getUA())}-${_e}`;break;default:un=_e}const dn=e.length?e.join(","):"FirebaseCore-web";return`${un}/JsCore/${SDK_VERSION}/${dn}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,un){const dn=fn=>new Promise((pn,mn)=>{try{const gn=e(fn);pn(gn)}catch(gn){mn(gn)}});dn.onAbort=un,this.queue.push(dn);const hn=this.queue.length-1;return()=>{this.queue[hn]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const un=[];try{for(const dn of this.queue)await dn(e),dn.onAbort&&un.push(dn.onAbort)}catch(dn){un.reverse();for(const hn of un)try{hn()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:dn==null?void 0:dn.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(_e,e={}){return _performApiRequest(_e,"GET","/v2/passwordPolicy",_addTidIfNecessary(_e,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var un,dn,hn,fn;const pn=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(un=pn.minPasswordLength)!==null&&un!==void 0?un:MINIMUM_MIN_PASSWORD_LENGTH,pn.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=pn.maxPasswordLength),pn.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=pn.containsLowercaseCharacter),pn.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=pn.containsUppercaseCharacter),pn.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=pn.containsNumericCharacter),pn.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=pn.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(hn=(dn=e.allowedNonAlphanumericCharacters)===null||dn===void 0?void 0:dn.join(""))!==null&&hn!==void 0?hn:"",this.forceUpgradeOnSignin=(fn=e.forceUpgradeOnSignin)!==null&&fn!==void 0?fn:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var un,dn,hn,fn,pn,mn;const gn={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,gn),this.validatePasswordCharacterOptions(e,gn),gn.isValid&&(gn.isValid=(un=gn.meetsMinPasswordLength)!==null&&un!==void 0?un:!0),gn.isValid&&(gn.isValid=(dn=gn.meetsMaxPasswordLength)!==null&&dn!==void 0?dn:!0),gn.isValid&&(gn.isValid=(hn=gn.containsLowercaseLetter)!==null&&hn!==void 0?hn:!0),gn.isValid&&(gn.isValid=(fn=gn.containsUppercaseLetter)!==null&&fn!==void 0?fn:!0),gn.isValid&&(gn.isValid=(pn=gn.containsNumericCharacter)!==null&&pn!==void 0?pn:!0),gn.isValid&&(gn.isValid=(mn=gn.containsNonAlphanumericCharacter)!==null&&mn!==void 0?mn:!0),gn}validatePasswordLengthOptions(e,un){const dn=this.customStrengthOptions.minPasswordLength,hn=this.customStrengthOptions.maxPasswordLength;dn&&(un.meetsMinPasswordLength=e.length>=dn),hn&&(un.meetsMaxPasswordLength=e.length<=hn)}validatePasswordCharacterOptions(e,un){this.updatePasswordCharacterOptionsStatuses(un,!1,!1,!1,!1);let dn;for(let hn=0;hn<e.length;hn++)dn=e.charAt(hn),this.updatePasswordCharacterOptionsStatuses(un,dn>="a"&&dn<="z",dn>="A"&&dn<="Z",dn>="0"&&dn<="9",this.allowedNonAlphanumericCharacters.includes(dn))}updatePasswordCharacterOptionsStatuses(e,un,dn,hn,fn){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=un)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=dn)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=hn)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=fn))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,un,dn,hn){this.app=e,this.heartbeatServiceProvider=un,this.appCheckServiceProvider=dn,this.config=hn,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=hn.sdkClientVersion,this._persistenceManagerAvailable=new Promise(fn=>this._resolvePersistenceManagerAvailable=fn)}_initializeWithPersistence(e,un){return un&&(this._popupRedirectResolver=_getInstance(un)),this._initializationPromise=this.queue(async()=>{var dn,hn,fn;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),(dn=this._resolvePersistenceManagerAvailable)===null||dn===void 0||dn.call(this),!this._deleted)){if(!((hn=this._popupRedirectResolver)===null||hn===void 0)&&hn._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(un),this.lastNotifiedUid=((fn=this.currentUser)===null||fn===void 0?void 0:fn.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const un=await getAccountInfo(this,{idToken:e}),dn=await UserImpl._fromGetAccountInfoResponse(this,un,e);await this.directlySetCurrentUser(dn)}catch(un){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",un),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var un;if(_isFirebaseServerApp(this.app)){const pn=this.app.settings.authIdToken;return pn?new Promise(mn=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(pn).then(mn,mn))}):this.directlySetCurrentUser(null)}const dn=await this.assertedPersistence.getCurrentUser();let hn=dn,fn=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const pn=(un=this.redirectUser)===null||un===void 0?void 0:un._redirectEventId,mn=hn==null?void 0:hn._redirectEventId,gn=await this.tryRedirectSignIn(e);(!pn||pn===mn)&&(gn!=null&&gn.user)&&(hn=gn.user,fn=!0)}if(!hn)return this.directlySetCurrentUser(null);if(!hn._redirectEventId){if(fn)try{await this.beforeStateQueue.runMiddleware(hn)}catch(pn){hn=dn,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(pn))}return hn?this.reloadAndSetCurrentUserOrClear(hn):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===hn._redirectEventId?this.directlySetCurrentUser(hn):this.reloadAndSetCurrentUserOrClear(hn)}async tryRedirectSignIn(e){let un=null;try{un=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return un}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(un){if((un==null?void 0:un.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const un=e?getModularInstance(e):null;return un&&_assert(un.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(un&&un._clone(this))}async _updateCurrentUser(e,un=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),un||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const un=this._getPasswordPolicyInternal();return un.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):un.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),un=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=un:this._tenantPasswordPolicies[this.tenantId]=un}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,un,dn){return this.registerStateListener(this.authStateSubscription,e,un,dn)}beforeAuthStateChanged(e,un){return this.beforeStateQueue.pushCallback(e,un)}onIdTokenChanged(e,un,dn){return this.registerStateListener(this.idTokenSubscription,e,un,dn)}authStateReady(){return new Promise((e,un)=>{if(this.currentUser)e();else{const dn=this.onAuthStateChanged(()=>{dn(),e()},un)}})}async revokeAccessToken(e){if(this.currentUser){const un=await this.currentUser.getIdToken(),dn={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:un};this.tenantId!=null&&(dn.tenantId=this.tenantId),await revokeToken(this,dn)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,un){const dn=await this.getOrInitRedirectPersistenceManager(un);return e===null?dn.removeCurrentUser():dn.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const un=e&&_getInstance(e)||this._popupRedirectResolver;_assert(un,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(un._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var un,dn;return this._isInitialized&&await this.queue(async()=>{}),((un=this._currentUser)===null||un===void 0?void 0:un._redirectEventId)===e?this._currentUser:((dn=this.redirectUser)===null||dn===void 0?void 0:dn._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,un;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const dn=(un=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&un!==void 0?un:null;this.lastNotifiedUid!==dn&&(this.lastNotifiedUid=dn,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,un,dn,hn){if(this._deleted)return()=>{};const fn=typeof un=="function"?un:un.next.bind(un);let pn=!1;const mn=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(mn,this,"internal-error"),mn.then(()=>{pn||fn(this.currentUser)}),typeof un=="function"){const gn=e.addObserver(un,dn,hn);return()=>{pn=!0,gn()}}else{const gn=e.addObserver(un);return()=>{pn=!0,gn()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const un={"X-Client-Version":this.clientVersion};this.app.options.appId&&(un["X-Firebase-gmpid"]=this.app.options.appId);const dn=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());dn&&(un["X-Firebase-Client"]=dn);const hn=await this._getAppCheckToken();return hn&&(un["X-Firebase-AppCheck"]=hn),un}async _getAppCheckToken(){var e;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const un=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return un!=null&&un.error&&_logWarn(`Error while retrieving App Check token: ${un.error}`),un==null?void 0:un.token}}function _castAuth(_e){return getModularInstance(_e)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(un=>this.observer=un)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(_e){externalJSProvider=_e}function _loadJS(_e){return externalJSProvider.loadJS(_e)}function _recaptchaV2ScriptUrl(){return externalJSProvider.recaptchaV2Script}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(_e){return`__${_e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _SOLVE_TIME_MS=500,_EXPIRATION_TIME_MS=6e4,_WIDGET_ID_START=1e12;class MockReCaptcha{constructor(e){this.auth=e,this.counter=_WIDGET_ID_START,this._widgets=new Map}render(e,un){const dn=this.counter;return this._widgets.set(dn,new MockWidget(e,this.auth.name,un||{})),this.counter++,dn}reset(e){var un;const dn=e||_WIDGET_ID_START;(un=this._widgets.get(dn))===null||un===void 0||un.delete(),this._widgets.delete(dn)}getResponse(e){var un;const dn=e||_WIDGET_ID_START;return((un=this._widgets.get(dn))===null||un===void 0?void 0:un.getResponse())||""}async execute(e){var un;const dn=e||_WIDGET_ID_START;return(un=this._widgets.get(dn))===null||un===void 0||un.execute(),""}}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,un){return Promise.resolve("token")}render(e,un){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,un){return Promise.resolve("token")}render(e,un){return""}}class MockWidget{constructor(e,un,dn){this.params=dn,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const hn=typeof e=="string"?document.getElementById(e):e;_assert(hn,"argument-error",{appName:un}),this.container=hn,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=generateRandomAlphaNumericString(50);const{callback:e,"expired-callback":un}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,un)try{un()}catch{}this.isVisible&&this.execute()},_EXPIRATION_TIME_MS)},_SOLVE_TIME_MS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function generateRandomAlphaNumericString(_e){const e=[],un="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let dn=0;dn<_e;dn++)e.push(un.charAt(Math.floor(Math.random()*un.length)));return e.join("")}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",un=!1){async function dn(fn){if(!un){if(fn.tenantId==null&&fn._agentRecaptchaConfig!=null)return fn._agentRecaptchaConfig.siteKey;if(fn.tenantId!=null&&fn._tenantRecaptchaConfigs[fn.tenantId]!==void 0)return fn._tenantRecaptchaConfigs[fn.tenantId].siteKey}return new Promise(async(pn,mn)=>{getRecaptchaConfig(fn,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(gn=>{if(gn.recaptchaKey===void 0)mn(new Error("recaptcha Enterprise site key undefined"));else{const yn=new RecaptchaConfig(gn);return fn.tenantId==null?fn._agentRecaptchaConfig=yn:fn._tenantRecaptchaConfigs[fn.tenantId]=yn,pn(yn.siteKey)}}).catch(gn=>{mn(gn)})})}function hn(fn,pn,mn){const gn=window.grecaptcha;isEnterprise(gn)?gn.enterprise.ready(()=>{gn.enterprise.execute(fn,{action:e}).then(yn=>{pn(yn)}).catch(()=>{pn(FAKE_TOKEN)})}):mn(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((fn,pn)=>{dn(this.auth).then(mn=>{if(!un&&isEnterprise(window.grecaptcha))hn(mn,fn,pn);else{if(typeof window>"u"){pn(new Error("RecaptchaVerifier is only supported in browser"));return}let gn=_recaptchaEnterpriseScriptUrl();gn.length!==0&&(gn+=mn),_loadJS(gn).then(()=>{hn(mn,fn,pn)}).catch(yn=>{pn(yn)})}}).catch(mn=>{pn(mn)})})}}async function injectRecaptchaFields(_e,e,un,dn=!1,hn=!1){const fn=new RecaptchaEnterpriseVerifier(_e);let pn;if(hn)pn=FAKE_TOKEN;else try{pn=await fn.verify(un)}catch{pn=await fn.verify(un,!0)}const mn=Object.assign({},e);if(un==="mfaSmsEnrollment"||un==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in mn){const gn=mn.phoneEnrollmentInfo.phoneNumber,yn=mn.phoneEnrollmentInfo.recaptchaToken;Object.assign(mn,{phoneEnrollmentInfo:{phoneNumber:gn,recaptchaToken:yn,captchaResponse:pn,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in mn){const gn=mn.phoneSignInInfo.recaptchaToken;Object.assign(mn,{phoneSignInInfo:{recaptchaToken:gn,captchaResponse:pn,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return mn}return dn?Object.assign(mn,{captchaResp:pn}):Object.assign(mn,{captchaResponse:pn}),Object.assign(mn,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(mn,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),mn}async function handleRecaptchaFlow(_e,e,un,dn,hn){var fn;if(!((fn=_e._getRecaptchaConfig())===null||fn===void 0)&&fn.isProviderEnabled("PHONE_PROVIDER")){const pn=await injectRecaptchaFields(_e,e,un);return dn(_e,pn).catch(async mn=>{var gn;if(((gn=_e._getRecaptchaConfig())===null||gn===void 0?void 0:gn.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(mn.code==="auth/missing-recaptcha-token"||mn.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${un} flow.`);const yn=await injectRecaptchaFields(_e,e,un,!1,!0);return dn(_e,yn)}return Promise.reject(mn)})}else{const pn=await injectRecaptchaFields(_e,e,un,!1,!0);return dn(_e,pn)}}async function _initializeRecaptchaConfig(_e){const e=_castAuth(_e),un=await getRecaptchaConfig(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),dn=new RecaptchaConfig(un);e.tenantId==null?e._agentRecaptchaConfig=dn:e._tenantRecaptchaConfigs[e.tenantId]=dn,dn.isAnyProviderEnabled()&&new RecaptchaEnterpriseVerifier(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(_e,e){const un=_getProvider(_e,"auth");if(un.isInitialized()){const hn=un.getImmediate(),fn=un.getOptions();if(deepEqual(fn,e??{}))return hn;_fail(hn,"already-initialized")}return un.initialize({options:e})}function _initializeAuthInstance(_e,e){const un=(e==null?void 0:e.persistence)||[],dn=(Array.isArray(un)?un:[un]).map(_getInstance);e!=null&&e.errorMap&&_e._updateErrorMap(e.errorMap),_e._initializeWithPersistence(dn,e==null?void 0:e.popupRedirectResolver)}function connectAuthEmulator(_e,e,un){const dn=_castAuth(_e);_assert(/^https?:\/\//.test(e),dn,"invalid-emulator-scheme");const hn=!1,fn=extractProtocol(e),{host:pn,port:mn}=extractHostAndPort(e),gn=mn===null?"":`:${mn}`,yn={url:`${fn}//${pn}${gn}/`},xn=Object.freeze({host:pn,port:mn,protocol:fn.replace(":",""),options:Object.freeze({disableWarnings:hn})});if(!dn._canInitEmulator){_assert(dn.config.emulator&&dn.emulatorConfig,dn,"emulator-config-failed"),_assert(deepEqual(yn,dn.config.emulator)&&deepEqual(xn,dn.emulatorConfig),dn,"emulator-config-failed");return}dn.config.emulator=yn,dn.emulatorConfig=xn,dn.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(pn)?(pingServer(`${fn}//${pn}${gn}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(_e){const e=_e.indexOf(":");return e<0?"":_e.substr(0,e+1)}function extractHostAndPort(_e){const e=extractProtocol(_e),un=/(\/\/)?([^?#/]+)/.exec(_e.substr(e.length));if(!un)return{host:"",port:null};const dn=un[2].split("@").pop()||"",hn=/^(\[[^\]]+\])(:|$)/.exec(dn);if(hn){const fn=hn[1];return{host:fn,port:parsePort(dn.substr(fn.length+1))}}else{const[fn,pn]=dn.split(":");return{host:fn,port:parsePort(pn)}}}function parsePort(_e){if(!_e)return null;const e=Number(_e);return isNaN(e)?null:e}function emitEmulatorWarning(){function _e(){const e=document.createElement("p"),un=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",un.position="fixed",un.width="100%",un.backgroundColor="#ffffff",un.border=".1em solid #000000",un.color="#b50000",un.bottom="0px",un.left="0px",un.margin="0px",un.zIndex="10000",un.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_e):_e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,un){this.providerId=e,this.signInMethod=un}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,un){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(_e,e){return _performSignInRequest(_e,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(_e,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const un=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(un.idToken=e.idToken),e.accessToken&&(un.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(un.nonce=e.nonce),e.pendingToken&&(un.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(un.accessToken=e.oauthToken,un.secret=e.oauthTokenSecret):_fail("argument-error"),un}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const un=typeof e=="string"?JSON.parse(e):e,{providerId:dn,signInMethod:hn}=un,fn=__rest(un,["providerId","signInMethod"]);if(!dn||!hn)return null;const pn=new OAuthCredential(dn,hn);return pn.idToken=fn.idToken||void 0,pn.accessToken=fn.accessToken||void 0,pn.secret=fn.secret,pn.nonce=fn.nonce,pn.pendingToken=fn.pendingToken||null,pn}_getIdTokenResponse(e){const un=this.buildRequest();return signInWithIdp(e,un)}_linkToIdToken(e,un){const dn=this.buildRequest();return dn.idToken=un,signInWithIdp(e,dn)}_getReauthenticationResolver(e){const un=this.buildRequest();return un.autoCreate=!1,signInWithIdp(e,un)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const un={};this.idToken&&(un.id_token=this.idToken),this.accessToken&&(un.access_token=this.accessToken),this.secret&&(un.oauth_token_secret=this.secret),un.providerId=this.providerId,this.nonce&&!this.pendingToken&&(un.nonce=this.nonce),e.postBody=querystring(un)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sendPhoneVerificationCode(_e,e){return _performApiRequest(_e,"POST","/v1/accounts:sendVerificationCode",_addTidIfNecessary(_e,e))}async function signInWithPhoneNumber$1(_e,e){return _performSignInRequest(_e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(_e,e))}async function linkWithPhoneNumber$1(_e,e){const un=await _performSignInRequest(_e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(_e,e));if(un.temporaryProof)throw _makeTaggedError(_e,"account-exists-with-different-credential",un);return un}const VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_={USER_NOT_FOUND:"user-not-found"};async function verifyPhoneNumberForExisting(_e,e){const un=Object.assign(Object.assign({},e),{operation:"REAUTH"});return _performSignInRequest(_e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(_e,un),VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PhoneAuthCredential extends AuthCredential{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,un){return new PhoneAuthCredential({verificationId:e,verificationCode:un})}static _fromTokenResponse(e,un){return new PhoneAuthCredential({phoneNumber:e,temporaryProof:un})}_getIdTokenResponse(e){return signInWithPhoneNumber$1(e,this._makeVerificationRequest())}_linkToIdToken(e,un){return linkWithPhoneNumber$1(e,Object.assign({idToken:un},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return verifyPhoneNumberForExisting(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:un,verificationId:dn,verificationCode:hn}=this.params;return e&&un?{temporaryProof:e,phoneNumber:un}:{sessionInfo:dn,code:hn}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:un,verificationCode:dn,phoneNumber:hn,temporaryProof:fn}=e;return!dn&&!un&&!hn&&!fn?null:new PhoneAuthCredential({verificationId:un,verificationCode:dn,phoneNumber:hn,temporaryProof:fn})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,un){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:un})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:un,oauthAccessToken:dn}=e;if(!un&&!dn)return null;try{return GoogleAuthProvider.credential(un,dn)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,un){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:un})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:un,oauthTokenSecret:dn}=e;if(!un||!dn)return null;try{return TwitterAuthProvider.credential(un,dn)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,un,dn,hn=!1){const fn=await UserImpl._fromIdTokenResponse(e,dn,hn),pn=providerIdForResponse(dn);return new UserCredentialImpl({user:fn,providerId:pn,_tokenResponse:dn,operationType:un})}static async _forOperation(e,un,dn){await e._updateTokensIfNecessary(dn,!0);const hn=providerIdForResponse(dn);return new UserCredentialImpl({user:e,providerId:hn,_tokenResponse:dn,operationType:un})}}function providerIdForResponse(_e){return _e.providerId?_e.providerId:"phoneNumber"in _e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,un,dn,hn){var fn;super(un.code,un.message),this.operationType=dn,this.user=hn,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(fn=e.tenantId)!==null&&fn!==void 0?fn:void 0,_serverResponse:un.customData._serverResponse,operationType:dn}}static _fromErrorAndOperation(e,un,dn,hn){return new MultiFactorError(e,un,dn,hn)}}function _processCredentialSavingMfaContextIfNecessary(_e,e,un,dn){return(e==="reauthenticate"?un._getReauthenticationResolver(_e):un._getIdTokenResponse(_e)).catch(fn=>{throw fn.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(_e,fn,e,dn):fn})}async function _link$1(_e,e,un=!1){const dn=await _logoutIfInvalidated(_e,e._linkToIdToken(_e.auth,await _e.getIdToken()),un);return UserCredentialImpl._forOperation(_e,"link",dn)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(_e,e,un=!1){const{auth:dn}=_e;if(_isFirebaseServerApp(dn.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(dn));const hn="reauthenticate";try{const fn=await _logoutIfInvalidated(_e,_processCredentialSavingMfaContextIfNecessary(dn,hn,e,_e),un);_assert(fn.idToken,dn,"internal-error");const pn=_parseToken(fn.idToken);_assert(pn,dn,"internal-error");const{sub:mn}=pn;return _assert(_e.uid===mn,dn,"user-mismatch"),UserCredentialImpl._forOperation(_e,hn,fn)}catch(fn){throw(fn==null?void 0:fn.code)==="auth/user-not-found"&&_fail(dn,"user-mismatch"),fn}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(_e,e,un=!1){if(_isFirebaseServerApp(_e.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(_e));const dn="signIn",hn=await _processCredentialSavingMfaContextIfNecessary(_e,dn,e),fn=await UserCredentialImpl._fromIdTokenResponse(_e,dn,hn);return un||await _e._updateCurrentUser(fn.user),fn}async function signInWithCredential(_e,e){return _signInWithCredential(_castAuth(_e),e)}function onIdTokenChanged(_e,e,un,dn){return getModularInstance(_e).onIdTokenChanged(e,un,dn)}function beforeAuthStateChanged(_e,e,un){return getModularInstance(_e).beforeAuthStateChanged(e,un)}function onAuthStateChanged(_e,e,un,dn){return getModularInstance(_e).onAuthStateChanged(e,un,dn)}function signOut(_e){return getModularInstance(_e).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function startEnrollPhoneMfa(_e,e){return _performApiRequest(_e,"POST","/v2/accounts/mfaEnrollment:start",_addTidIfNecessary(_e,e))}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,un){this.storageRetriever=e,this.type=un}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,un){return this.storage.setItem(e,JSON.stringify(un)),Promise.resolve()}_get(e){const un=this.storage.getItem(e);return Promise.resolve(un?JSON.parse(un):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,un)=>this.onStorageEvent(e,un),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const un of Object.keys(this.listeners)){const dn=this.storage.getItem(un),hn=this.localCache[un];dn!==hn&&e(un,hn,dn)}}onStorageEvent(e,un=!1){if(!e.key){this.forAllChangedKeys((pn,mn,gn)=>{this.notifyListeners(pn,gn)});return}const dn=e.key;un?this.detachListener():this.stopPolling();const hn=()=>{const pn=this.storage.getItem(dn);!un&&this.localCache[dn]===pn||this.notifyListeners(dn,pn)},fn=this.storage.getItem(dn);_isIE10()&&fn!==e.newValue&&e.newValue!==e.oldValue?setTimeout(hn,IE10_LOCAL_STORAGE_SYNC_DELAY):hn()}notifyListeners(e,un){this.localCache[e]=un;const dn=this.listeners[e];if(dn)for(const hn of Array.from(dn))hn(un&&JSON.parse(un))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,un,dn)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:un,newValue:dn}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,un){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(un)}_removeListener(e,un){this.listeners[e]&&(this.listeners[e].delete(un),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,un){await super._set(e,un),this.localCache[e]=JSON.stringify(un)}async _get(e){const un=await super._get(e);return this.localCache[e]=JSON.stringify(un),un}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,un){}_removeListener(e,un){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(_e){return Promise.all(_e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(un){return{fulfilled:!1,reason:un}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const un=this.receivers.find(hn=>hn.isListeningto(e));if(un)return un;const dn=new Receiver(e);return this.receivers.push(dn),dn}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const un=e,{eventId:dn,eventType:hn,data:fn}=un.data,pn=this.handlersMap[hn];if(!(pn!=null&&pn.size))return;un.ports[0].postMessage({status:"ack",eventId:dn,eventType:hn});const mn=Array.from(pn).map(async yn=>yn(un.origin,fn)),gn=await _allSettled(mn);un.ports[0].postMessage({status:"done",eventId:dn,eventType:hn,response:gn})}_subscribe(e,un){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(un)}_unsubscribe(e,un){this.handlersMap[e]&&un&&this.handlersMap[e].delete(un),(!un||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(_e="",e=10){let un="";for(let dn=0;dn<e;dn++)un+=Math.floor(Math.random()*10);return _e+un}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,un,dn=50){const hn=typeof MessageChannel<"u"?new MessageChannel:null;if(!hn)throw new Error("connection_unavailable");let fn,pn;return new Promise((mn,gn)=>{const yn=_generateEventId("",20);hn.port1.start();const xn=setTimeout(()=>{gn(new Error("unsupported_event"))},dn);pn={messageChannel:hn,onMessage(En){const bn=En;if(bn.data.eventId===yn)switch(bn.data.status){case"ack":clearTimeout(xn),fn=setTimeout(()=>{gn(new Error("timeout"))},3e3);break;case"done":clearTimeout(fn),mn(bn.data.response);break;default:clearTimeout(xn),clearTimeout(fn),gn(new Error("invalid_response"));break}}},this.handlers.add(pn),hn.port1.addEventListener("message",pn.onMessage),this.target.postMessage({eventType:e,eventId:yn,data:un},[hn.port2])}).finally(()=>{pn&&this.removeMessageHandler(pn)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(_e){_window().location.href=_e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var _e;return((_e=navigator==null?void 0:navigator.serviceWorker)===null||_e===void 0?void 0:_e.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,un)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{un(this.request.error)})})}}function getObjectStore(_e,e){return _e.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const _e=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(_e).toPromise()}function _openDatabase(){const _e=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,un)=>{_e.addEventListener("error",()=>{un(_e.error)}),_e.addEventListener("upgradeneeded",()=>{const dn=_e.result;try{dn.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(hn){un(hn)}}),_e.addEventListener("success",async()=>{const dn=_e.result;dn.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(dn):(dn.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(_e,e,un){const dn=getObjectStore(_e,!0).put({[DB_DATA_KEYPATH]:e,value:un});return new DBPromise(dn).toPromise()}async function getObject(_e,e){const un=getObjectStore(_e,!1).get(e),dn=await new DBPromise(un).toPromise();return dn===void 0?null:dn.value}function _deleteObject(_e,e){const un=getObjectStore(_e,!0).delete(e);return new DBPromise(un).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let un=0;for(;;)try{const dn=await this._openDb();return await e(dn)}catch(dn){if(un++>_TRANSACTION_RETRY_COUNT)throw dn;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,un)=>({keyProcessed:(await this._poll()).includes(un.key)})),this.receiver._subscribe("ping",async(e,un)=>["keyChanged"])}async initializeSender(){var e,un;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const dn=await this.sender._send("ping",{},800);dn&&!((e=dn[0])===null||e===void 0)&&e.fulfilled&&!((un=dn[0])===null||un===void 0)&&un.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,un){return this._withPendingWrite(async()=>(await this._withRetries(dn=>_putObject(dn,e,un)),this.localCache[e]=un,this.notifyServiceWorker(e)))}async _get(e){const un=await this._withRetries(dn=>getObject(dn,e));return this.localCache[e]=un,un}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(un=>_deleteObject(un,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(hn=>{const fn=getObjectStore(hn,!1).getAll();return new DBPromise(fn).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const un=[],dn=new Set;if(e.length!==0)for(const{fbase_key:hn,value:fn}of e)dn.add(hn),JSON.stringify(this.localCache[hn])!==JSON.stringify(fn)&&(this.notifyListeners(hn,fn),un.push(hn));for(const hn of Object.keys(this.localCache))this.localCache[hn]&&!dn.has(hn)&&(this.notifyListeners(hn,null),un.push(hn));return un}notifyListeners(e,un){this.localCache[e]=un;const dn=this.listeners[e];if(dn)for(const hn of Array.from(dn))hn(un)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,un){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(un)}_removeListener(e,un){this.listeners[e]&&(this.listeners[e].delete(un),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function startSignInPhoneMfa(_e,e){return _performApiRequest(_e,"POST","/v2/accounts/mfaSignIn:start",_addTidIfNecessary(_e,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _JSLOAD_CALLBACK=_generateCallbackName("rcb"),NETWORK_TIMEOUT_DELAY=new Delay(3e4,6e4);class ReCaptchaLoaderImpl{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=_window().grecaptcha)===null||e===void 0)&&e.render)}load(e,un=""){return _assert(isHostLanguageValid(un),e,"argument-error"),this.shouldResolveImmediately(un)&&isV2(_window().grecaptcha)?Promise.resolve(_window().grecaptcha):new Promise((dn,hn)=>{const fn=_window().setTimeout(()=>{hn(_createError(e,"network-request-failed"))},NETWORK_TIMEOUT_DELAY.get());_window()[_JSLOAD_CALLBACK]=()=>{_window().clearTimeout(fn),delete _window()[_JSLOAD_CALLBACK];const mn=_window().grecaptcha;if(!mn||!isV2(mn)){hn(_createError(e,"internal-error"));return}const gn=mn.render;mn.render=(yn,xn)=>{const En=gn(yn,xn);return this.counter++,En},this.hostLanguage=un,dn(mn)};const pn=`${_recaptchaV2ScriptUrl()}?${querystring({onload:_JSLOAD_CALLBACK,render:"explicit",hl:un})}`;_loadJS(pn).catch(()=>{clearTimeout(fn),hn(_createError(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var un;return!!(!((un=_window().grecaptcha)===null||un===void 0)&&un.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function isHostLanguageValid(_e){return _e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_e)}class MockReCaptchaLoaderImpl{async load(e){return new MockReCaptcha(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECAPTCHA_VERIFIER_TYPE="recaptcha",DEFAULT_PARAMS={theme:"light",type:"image"};class RecaptchaVerifier{constructor(e,un,dn=Object.assign({},DEFAULT_PARAMS)){this.parameters=dn,this.type=RECAPTCHA_VERIFIER_TYPE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_castAuth(e),this.isInvisible=this.parameters.size==="invisible",_assert(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const hn=typeof un=="string"?document.getElementById(un):un;_assert(hn,this.auth,"argument-error"),this.container=hn,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new MockReCaptchaLoaderImpl:new ReCaptchaLoaderImpl,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),un=this.getAssertedRecaptcha(),dn=un.getResponse(e);return dn||new Promise(hn=>{const fn=pn=>{pn&&(this.tokenChangeListeners.delete(fn),hn(pn))};this.tokenChangeListeners.add(fn),this.isInvisible&&un.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){_assert(!this.parameters.sitekey,this.auth,"argument-error"),_assert(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_assert(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return un=>{if(this.tokenChangeListeners.forEach(dn=>dn(un)),typeof e=="function")e(un);else if(typeof e=="string"){const dn=_window()[e];typeof dn=="function"&&dn(un)}}}assertNotDestroyed(){_assert(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const un=document.createElement("div");e.appendChild(un),e=un}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){_assert(_isHttpOrHttps()&&!_isWorker(),this.auth,"internal-error"),await domReady(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await getRecaptchaParams(this.auth);_assert(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return _assert(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function domReady(){let _e=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}_e=()=>e(),window.addEventListener("load",_e)}).catch(e=>{throw _e&&window.removeEventListener("load",_e),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ConfirmationResultImpl{constructor(e,un){this.verificationId=e,this.onConfirmation=un}confirm(e){const un=PhoneAuthCredential._fromVerification(this.verificationId,e);return this.onConfirmation(un)}}async function signInWithPhoneNumber(_e,e,un){if(_isFirebaseServerApp(_e.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(_e));const dn=_castAuth(_e),hn=await _verifyPhoneNumber(dn,e,getModularInstance(un));return new ConfirmationResultImpl(hn,fn=>signInWithCredential(dn,fn))}async function _verifyPhoneNumber(_e,e,un){var dn;if(!_e._getRecaptchaConfig())try{await _initializeRecaptchaConfig(_e)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let hn;if(typeof e=="string"?hn={phoneNumber:e}:hn=e,"session"in hn){const fn=hn.session;if("phoneNumber"in hn){_assert(fn.type==="enroll",_e,"internal-error");const pn={idToken:fn.credential,phoneEnrollmentInfo:{phoneNumber:hn.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await handleRecaptchaFlow(_e,pn,"mfaSmsEnrollment",async(xn,En)=>{if(En.phoneEnrollmentInfo.captchaResponse===FAKE_TOKEN){_assert((un==null?void 0:un.type)===RECAPTCHA_VERIFIER_TYPE,xn,"argument-error");const bn=await injectRecaptchaV2Token(xn,En,un);return startEnrollPhoneMfa(xn,bn)}return startEnrollPhoneMfa(xn,En)},"PHONE_PROVIDER").catch(xn=>Promise.reject(xn))).phoneSessionInfo.sessionInfo}else{_assert(fn.type==="signin",_e,"internal-error");const pn=((dn=hn.multiFactorHint)===null||dn===void 0?void 0:dn.uid)||hn.multiFactorUid;_assert(pn,_e,"missing-multi-factor-info");const mn={mfaPendingCredential:fn.credential,mfaEnrollmentId:pn,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await handleRecaptchaFlow(_e,mn,"mfaSmsSignIn",async(En,bn)=>{if(bn.phoneSignInInfo.captchaResponse===FAKE_TOKEN){_assert((un==null?void 0:un.type)===RECAPTCHA_VERIFIER_TYPE,En,"argument-error");const vn=await injectRecaptchaV2Token(En,bn,un);return startSignInPhoneMfa(En,vn)}return startSignInPhoneMfa(En,bn)},"PHONE_PROVIDER").catch(En=>Promise.reject(En))).phoneResponseInfo.sessionInfo}}else{const fn={phoneNumber:hn.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await handleRecaptchaFlow(_e,fn,"sendVerificationCode",async(yn,xn)=>{if(xn.captchaResponse===FAKE_TOKEN){_assert((un==null?void 0:un.type)===RECAPTCHA_VERIFIER_TYPE,yn,"argument-error");const En=await injectRecaptchaV2Token(yn,xn,un);return sendPhoneVerificationCode(yn,En)}return sendPhoneVerificationCode(yn,xn)},"PHONE_PROVIDER").catch(yn=>Promise.reject(yn))).sessionInfo}}finally{un==null||un._reset()}}async function injectRecaptchaV2Token(_e,e,un){_assert(un.type===RECAPTCHA_VERIFIER_TYPE,_e,"argument-error");const dn=await un.verify();_assert(typeof dn=="string",_e,"argument-error");const hn=Object.assign({},e);if("phoneEnrollmentInfo"in hn){const fn=hn.phoneEnrollmentInfo.phoneNumber,pn=hn.phoneEnrollmentInfo.captchaResponse,mn=hn.phoneEnrollmentInfo.clientType,gn=hn.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(hn,{phoneEnrollmentInfo:{phoneNumber:fn,recaptchaToken:dn,captchaResponse:pn,clientType:mn,recaptchaVersion:gn}}),hn}else if("phoneSignInInfo"in hn){const fn=hn.phoneSignInInfo.captchaResponse,pn=hn.phoneSignInInfo.clientType,mn=hn.phoneSignInInfo.recaptchaVersion;return Object.assign(hn,{phoneSignInInfo:{recaptchaToken:dn,captchaResponse:fn,clientType:pn,recaptchaVersion:mn}}),hn}else return Object.assign(hn,{recaptchaToken:dn}),hn}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(_e,e){return e?_getInstance(e):(_assert(_e._popupRedirectResolver,_e,"argument-error"),_e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,un){return signInWithIdp(e,this._buildIdpRequest(un))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const un={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(un.idToken=e),un}}function _signIn(_e){return _signInWithCredential(_e.auth,new IdpCredential(_e),_e.bypassAuthState)}function _reauth(_e){const{auth:e,user:un}=_e;return _assert(un,e,"internal-error"),_reauthenticate(un,new IdpCredential(_e),_e.bypassAuthState)}async function _link(_e){const{auth:e,user:un}=_e;return _assert(un,e,"internal-error"),_link$1(un,new IdpCredential(_e),_e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,un,dn,hn,fn=!1){this.auth=e,this.resolver=dn,this.user=hn,this.bypassAuthState=fn,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(un)?un:[un]}execute(){return new Promise(async(e,un)=>{this.pendingPromise={resolve:e,reject:un};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(dn){this.reject(dn)}})}async onAuthEvent(e){const{urlResponse:un,sessionId:dn,postBody:hn,tenantId:fn,error:pn,type:mn}=e;if(pn){this.reject(pn);return}const gn={auth:this.auth,requestUri:un,sessionId:dn,tenantId:fn||void 0,postBody:hn||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(mn)(gn))}catch(yn){this.reject(yn)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,un,dn,hn,fn){super(e,un,hn,fn),this.provider=dn,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(un=>{this.reject(un)}),this.resolver._isIframeWebStorageSupported(this.auth,un=>{un||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var un,dn;if(!((dn=(un=this.authWindow)===null||un===void 0?void 0:un.window)===null||dn===void 0)&&dn.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,un,dn=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],un,void 0,dn),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const dn=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(dn)}catch(un){e=()=>Promise.reject(un)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const un=await this.auth._redirectUserForId(e.eventId);if(un)return this.user=un,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(_e,e){const un=pendingRedirectKey(e),dn=resolverPersistence(_e);if(!await dn._isAvailable())return!1;const hn=await dn._get(un)==="true";return await dn._remove(un),hn}function _overrideRedirectResult(_e,e){redirectOutcomeMap.set(_e._key(),e)}function resolverPersistence(_e){return _getInstance(_e._redirectPersistence)}function pendingRedirectKey(_e){return _persistenceKeyName(PENDING_REDIRECT_KEY,_e.config.apiKey,_e.name)}async function _getRedirectResult(_e,e,un=!1){if(_isFirebaseServerApp(_e.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(_e));const dn=_castAuth(_e),hn=_withDefaultResolver(dn,e),pn=await new RedirectAction(dn,hn,un).execute();return pn&&!un&&(delete pn.user._redirectEventId,await dn._persistUserIfCurrent(pn.user),await dn._setRedirectUser(null,e)),pn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let un=!1;return this.consumers.forEach(dn=>{this.isEventForConsumer(e,dn)&&(un=!0,this.sendToConsumer(e,dn),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,un||(this.queuedRedirectEvent=e,un=!0)),un}sendToConsumer(e,un){var dn;if(e.error&&!isNullRedirectEvent(e)){const hn=((dn=e.error.code)===null||dn===void 0?void 0:dn.split("auth/")[1])||"internal-error";un.onError(_createError(this.auth,hn))}else un.onAuthEvent(e)}isEventForConsumer(e,un){const dn=un.eventId===null||!!e.eventId&&e.eventId===un.eventId;return un.filter.includes(e.type)&&dn}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(_e){return[_e.type,_e.eventId,_e.sessionId,_e.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:_e,error:e}){return _e==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function isRedirectEvent(_e){switch(_e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(_e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(_e,e={}){return _performApiRequest(_e,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(_e){if(_e.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(_e);for(const un of e)try{if(matchDomain(un))return}catch{}_fail(_e,"unauthorized-domain")}function matchDomain(_e){const e=_getCurrentUrl(),{protocol:un,hostname:dn}=new URL(e);if(_e.startsWith("chrome-extension://")){const pn=new URL(_e);return pn.hostname===""&&dn===""?un==="chrome-extension:"&&_e.replace("chrome-extension://","")===e.replace("chrome-extension://",""):un==="chrome-extension:"&&pn.hostname===dn}if(!HTTP_REGEX.test(un))return!1;if(IP_ADDRESS_REGEX.test(_e))return dn===_e;const hn=_e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+hn+"|"+hn+")$","i").test(dn)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const _e=_window().___jsl;if(_e!=null&&_e.H){for(const e of Object.keys(_e.H))if(_e.H[e].r=_e.H[e].r||[],_e.H[e].L=_e.H[e].L||[],_e.H[e].r=[..._e.H[e].L],_e.CP)for(let un=0;un<_e.CP.length;un++)_e.CP[un]=null}}function loadGapi(_e){return new Promise((e,un)=>{var dn,hn,fn;function pn(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),un(_createError(_e,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((hn=(dn=_window().gapi)===null||dn===void 0?void 0:dn.iframes)===null||hn===void 0)&&hn.Iframe)e(gapi.iframes.getContext());else if(!((fn=_window().gapi)===null||fn===void 0)&&fn.load)pn();else{const mn=_generateCallbackName("iframefcb");return _window()[mn]=()=>{gapi.load?pn():un(_createError(_e,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${mn}`).catch(gn=>un(gn))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(_e){return cachedGApiLoader=cachedGApiLoader||loadGapi(_e),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(_e){const e=_e.config;_assert(e.authDomain,_e,"auth-domain-config-required");const un=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${_e.config.authDomain}/${IFRAME_PATH}`,dn={apiKey:e.apiKey,appName:_e.name,v:SDK_VERSION},hn=EID_FROM_APIHOST.get(_e.config.apiHost);hn&&(dn.eid=hn);const fn=_e._getFrameworks();return fn.length&&(dn.fw=fn.join(",")),`${un}?${querystring(dn).slice(1)}`}async function _openIframe(_e){const e=await _loadGapi(_e),un=_window().gapi;return _assert(un,_e,"internal-error"),e.open({where:document.body,url:getIframeUrl(_e),messageHandlersFilter:un.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},dn=>new Promise(async(hn,fn)=>{await dn.restyle({setHideOnLeave:!1});const pn=_createError(_e,"network-request-failed"),mn=_window().setTimeout(()=>{fn(pn)},PING_TIMEOUT.get());function gn(){_window().clearTimeout(mn),hn(dn)}dn.ping(gn).then(gn,()=>{fn(pn)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(_e,e,un,dn=DEFAULT_WIDTH,hn=DEFAULT_HEIGHT){const fn=Math.max((window.screen.availHeight-hn)/2,0).toString(),pn=Math.max((window.screen.availWidth-dn)/2,0).toString();let mn="";const gn=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:dn.toString(),height:hn.toString(),top:fn,left:pn}),yn=getUA().toLowerCase();un&&(mn=_isChromeIOS(yn)?TARGET_BLANK:un),_isFirefox(yn)&&(e=e||FIREFOX_EMPTY_URL,gn.scrollbars="yes");const xn=Object.entries(gn).reduce((bn,[vn,Pn])=>`${bn}${vn}=${Pn},`,"");if(_isIOSStandalone(yn)&&mn!=="_self")return openAsNewWindowIOS(e||"",mn),new AuthPopup(null);const En=window.open(e||"",mn,xn);_assert(En,_e,"popup-blocked");try{En.focus()}catch{}return new AuthPopup(En)}function openAsNewWindowIOS(_e,e){const un=document.createElement("a");un.href=_e,un.target=e;const dn=document.createEvent("MouseEvent");dn.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),un.dispatchEvent(dn)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(_e,e,un,dn,hn,fn){_assert(_e.config.authDomain,_e,"auth-domain-config-required"),_assert(_e.config.apiKey,_e,"invalid-api-key");const pn={apiKey:_e.config.apiKey,appName:_e.name,authType:un,redirectUrl:dn,v:SDK_VERSION,eventId:hn};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(_e.languageCode),pn.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(pn.customParameters=JSON.stringify(e.getCustomParameters()));for(const[xn,En]of Object.entries({}))pn[xn]=En}if(e instanceof BaseOAuthProvider){const xn=e.getScopes().filter(En=>En!=="");xn.length>0&&(pn.scopes=xn.join(","))}_e.tenantId&&(pn.tid=_e.tenantId);const mn=pn;for(const xn of Object.keys(mn))mn[xn]===void 0&&delete mn[xn];const gn=await _e._getAppCheckToken(),yn=gn?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(gn)}`:"";return`${getHandlerBase(_e)}?${querystring(mn).slice(1)}${yn}`}function getHandlerBase({config:_e}){return _e.emulator?_emulatorUrl(_e,EMULATOR_WIDGET_PATH):`https://${_e.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,un,dn,hn){var fn;debugAssert((fn=this.eventManagers[e._key()])===null||fn===void 0?void 0:fn.manager,"_initialize() not called before _openPopup()");const pn=await _getRedirectUrl(e,un,dn,_getCurrentUrl(),hn);return _open(e,pn,_generateEventId())}async _openRedirect(e,un,dn,hn){await this._originValidation(e);const fn=await _getRedirectUrl(e,un,dn,_getCurrentUrl(),hn);return _setWindowLocation(fn),new Promise(()=>{})}_initialize(e){const un=e._key();if(this.eventManagers[un]){const{manager:hn,promise:fn}=this.eventManagers[un];return hn?Promise.resolve(hn):(debugAssert(fn,"If manager is not set, promise should be"),fn)}const dn=this.initAndGetManager(e);return this.eventManagers[un]={promise:dn},dn.catch(()=>{delete this.eventManagers[un]}),dn}async initAndGetManager(e){const un=await _openIframe(e),dn=new AuthEventManager(e);return un.register("authEvent",hn=>(_assert(hn==null?void 0:hn.authEvent,e,"invalid-auth-event"),{status:dn.onEvent(hn.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:dn},this.iframes[e._key()]=un,dn}_isIframeWebStorageSupported(e,un){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},hn=>{var fn;const pn=(fn=hn==null?void 0:hn[0])===null||fn===void 0?void 0:fn[WEB_STORAGE_SUPPORT_KEY];pn!==void 0&&un(!!pn),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const un=e._key();return this.originValidationPromises[un]||(this.originValidationPromises[un]=_validateOrigin(e)),this.originValidationPromises[un]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$4="@firebase/auth",version$4="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const un=this.auth.onIdTokenChanged(dn=>{e((dn==null?void 0:dn.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,un),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const un=this.internalListeners.get(e);un&&(this.internalListeners.delete(e),un(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(_e){switch(_e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(_e){_registerComponent(new Component("auth",(e,{options:un})=>{const dn=e.getProvider("app").getImmediate(),hn=e.getProvider("heartbeat"),fn=e.getProvider("app-check-internal"),{apiKey:pn,authDomain:mn}=dn.options;_assert(pn&&!pn.includes(":"),"invalid-api-key",{appName:dn.name});const gn={apiKey:pn,authDomain:mn,clientPlatform:_e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(_e)},yn=new AuthImpl(dn,hn,fn,gn);return _initializeAuthInstance(yn,un),yn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,un,dn)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const un=_castAuth(e.getProvider("auth").getImmediate());return(dn=>new AuthInterop(dn))(un)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$4,version$4,getVersionForPlatform(_e)),registerVersion(name$4,version$4,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=_e=>async e=>{const un=e&&await e.getIdTokenResult(),dn=un&&(new Date().getTime()-Date.parse(un.issuedAtTime))/1e3;if(dn&&dn>authIdTokenMaxAge)return;const hn=un==null?void 0:un.token;lastPostedIdToken!==hn&&(lastPostedIdToken=hn,await fetch(_e,{method:hn?"POST":"DELETE",headers:hn?{Authorization:`Bearer ${hn}`}:{}}))};function getAuth(_e=getApp()){const e=_getProvider(_e,"auth");if(e.isInitialized())return e.getImmediate();const un=initializeAuth(_e,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),dn=getExperimentalSetting("authTokenSyncURL");if(dn&&typeof isSecureContext=="boolean"&&isSecureContext){const fn=new URL(dn,location.origin);if(location.origin===fn.origin){const pn=mintCookieFactory(fn.toString());beforeAuthStateChanged(un,pn,()=>pn(un.currentUser)),onIdTokenChanged(un,mn=>pn(mn))}}const hn=getDefaultEmulatorHost("auth");return hn&&connectAuthEmulator(un,`http://${hn}`),un}function getScriptParentElement(){var _e,e;return(e=(_e=document.getElementsByTagName("head"))===null||_e===void 0?void 0:_e[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(_e){return new Promise((e,un)=>{const dn=document.createElement("script");dn.setAttribute("src",_e),dn.onload=e,dn.onerror=hn=>{const fn=_createError("internal-error");fn.customData=hn,un(fn)},dn.type="text/javascript",dn.charset="UTF-8",getScriptParentElement().appendChild(dn)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(_e,e,un,dn){function hn(fn){return fn instanceof un?fn:new un(function(pn){pn(fn)})}return new(un||(un=Promise))(function(fn,pn){function mn(xn){try{yn(dn.next(xn))}catch(En){pn(En)}}function gn(xn){try{yn(dn.throw(xn))}catch(En){pn(En)}}function yn(xn){xn.done?fn(xn.value):hn(xn.value).then(mn,gn)}yn((dn=dn.apply(_e,[])).next())})}function __generator(_e,e){var un={label:0,sent:function(){if(fn[0]&1)throw fn[1];return fn[1]},trys:[],ops:[]},dn,hn,fn,pn;return pn={next:mn(0),throw:mn(1),return:mn(2)},typeof Symbol=="function"&&(pn[Symbol.iterator]=function(){return this}),pn;function mn(yn){return function(xn){return gn([yn,xn])}}function gn(yn){if(dn)throw new TypeError("Generator is already executing.");for(;un;)try{if(dn=1,hn&&(fn=yn[0]&2?hn.return:yn[0]?hn.throw||((fn=hn.return)&&fn.call(hn),0):hn.next)&&!(fn=fn.call(hn,yn[1])).done)return fn;switch(hn=0,fn&&(yn=[yn[0]&2,fn.value]),yn[0]){case 0:case 1:fn=yn;break;case 4:return un.label++,{value:yn[1],done:!1};case 5:un.label++,hn=yn[1],yn=[0];continue;case 7:yn=un.ops.pop(),un.trys.pop();continue;default:if(fn=un.trys,!(fn=fn.length>0&&fn[fn.length-1])&&(yn[0]===6||yn[0]===2)){un=0;continue}if(yn[0]===3&&(!fn||yn[1]>fn[0]&&yn[1]<fn[3])){un.label=yn[1];break}if(yn[0]===6&&un.label<fn[1]){un.label=fn[1],fn=yn;break}if(fn&&un.label<fn[2]){un.label=fn[2],un.ops.push(yn);break}fn[2]&&un.ops.pop(),un.trys.pop();continue}yn=e.call(_e,un)}catch(xn){yn=[6,xn],hn=0}finally{dn=fn=0}if(yn[0]&5)throw yn[1];return{value:yn[0]?yn[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign=function(){return __assign=Object.assign||function(e){for(var un,dn=1,hn=arguments.length;dn<hn;dn++){un=arguments[dn];for(var fn in un)Object.prototype.hasOwnProperty.call(un,fn)&&(e[fn]=un[fn])}return e},__assign.apply(this,arguments)},defaultState=function(_e){return{loading:_e==null,value:_e}},reducer=function(){return function(_e,e){switch(e.type){case"error":return __assign(__assign({},_e),{error:e.error,loading:!1,value:void 0});case"reset":return defaultState(e.defaultValue);case"value":return __assign(__assign({},_e),{error:void 0,loading:!1,value:e.value});default:return _e}}},useLoadingValue=function(_e){var e=_e?_e():void 0,un=reactExports.useReducer(reducer(),defaultState(e)),dn=un[0],hn=un[1],fn=reactExports.useCallback(function(){var gn=_e?_e():void 0;hn({type:"reset",defaultValue:gn})},[_e]),pn=reactExports.useCallback(function(gn){hn({type:"error",error:gn})},[]),mn=reactExports.useCallback(function(gn){hn({type:"value",value:gn})},[]);return reactExports.useMemo(function(){return{error:dn.error,loading:dn.loading,reset:fn,setError:pn,setValue:mn,value:dn.value}},[dn.error,dn.loading,fn,pn,mn,dn.value])},useAuthState=function(_e,e){var un=useLoadingValue(function(){return _e.currentUser}),dn=un.error,hn=un.loading,fn=un.setError,pn=un.setValue,mn=un.value;return reactExports.useEffect(function(){var gn=onAuthStateChanged(_e,function(yn){return __awaiter(void 0,void 0,void 0,function(){var xn;return __generator(this,function(En){switch(En.label){case 0:return[3,4];case 1:return En.trys.push([1,3,,4]),[4,e.onUserChanged(yn)];case 2:return En.sent(),[3,4];case 3:return xn=En.sent(),fn(xn),[3,4];case 4:return pn(yn),[2]}})})},fn);return function(){gn()}},[_e]),[mn,hn,dn]},name$3="firebase",version$3="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$3,version$3,"app");const name$2="@firebase/installations",version$2="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$2}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=60*60*1e3,SERVICE="installations",SERVICE_NAME="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(_e){return _e instanceof FirebaseError&&_e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:_e}){return`${INSTALLATIONS_API_URL}/projects/${_e}/installations`}function extractAuthTokenInfoFromResponse(_e){return{token:_e.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(_e.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(_e,e){const dn=(await e.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:_e,serverCode:dn.code,serverMessage:dn.message,serverStatus:dn.status})}function getHeaders$1({apiKey:_e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":_e})}function getHeadersWithAuth(_e,{refreshToken:e}){const un=getHeaders$1(_e);return un.append("Authorization",getAuthorizationHeader(e)),un}async function retryIfServerError(_e){const e=await _e();return e.status>=500&&e.status<600?_e():e}function getExpiresInFromResponseExpiresIn(_e){return Number(_e.replace("s","000"))}function getAuthorizationHeader(_e){return`${INTERNAL_AUTH_VERSION} ${_e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:_e,heartbeatServiceProvider:e},{fid:un}){const dn=getInstallationsEndpoint(_e),hn=getHeaders$1(_e),fn=e.getImmediate({optional:!0});if(fn){const yn=await fn.getHeartbeatsHeader();yn&&hn.append("x-firebase-client",yn)}const pn={fid:un,authVersion:INTERNAL_AUTH_VERSION,appId:_e.appId,sdkVersion:PACKAGE_VERSION},mn={method:"POST",headers:hn,body:JSON.stringify(pn)},gn=await retryIfServerError(()=>fetch(dn,mn));if(gn.ok){const yn=await gn.json();return{fid:yn.fid||un,registrationStatus:2,refreshToken:yn.refreshToken,authToken:extractAuthTokenInfoFromResponse(yn.authToken)}}else throw await getErrorFromResponse("Create Installation",gn)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep(_e){return new Promise(e=>{setTimeout(e,_e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(_e){return btoa(String.fromCharCode(..._e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const _e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(_e),_e[0]=112+_e[0]%16;const un=encode(_e);return VALID_FID_PATTERN.test(un)?un:INVALID_FID}catch{return INVALID_FID}}function encode(_e){return bufferToBase64UrlSafe(_e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey(_e){return`${_e.appName}!${_e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(_e,e){const un=getKey(_e);callFidChangeCallbacks(un,e),broadcastFidChange(un,e)}function callFidChangeCallbacks(_e,e){const un=fidChangeCallbacks.get(_e);if(un)for(const dn of un)dn(e)}function broadcastFidChange(_e,e){const un=getBroadcastChannel();un&&un.postMessage({key:_e,fid:e}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=_e=>{callFidChangeCallbacks(_e.data.key,_e.data.fid)}),broadcastChannel}function closeBroadcastChannel(){fidChangeCallbacks.size===0&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(_e,e)=>{switch(e){case 0:_e.createObjectStore(OBJECT_STORE_NAME)}}})),dbPromise}async function set(_e,e){const un=getKey(_e),hn=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),fn=hn.objectStore(OBJECT_STORE_NAME),pn=await fn.get(un);return await fn.put(e,un),await hn.done,(!pn||pn.fid!==e.fid)&&fidChanged(_e,e.fid),e}async function remove(_e){const e=getKey(_e),dn=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");await dn.objectStore(OBJECT_STORE_NAME).delete(e),await dn.done}async function update(_e,e){const un=getKey(_e),hn=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),fn=hn.objectStore(OBJECT_STORE_NAME),pn=await fn.get(un),mn=e(pn);return mn===void 0?await fn.delete(un):await fn.put(mn,un),await hn.done,mn&&(!pn||pn.fid!==mn.fid)&&fidChanged(_e,mn.fid),mn}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(_e){let e;const un=await update(_e.appConfig,dn=>{const hn=updateOrCreateInstallationEntry(dn),fn=triggerRegistrationIfNecessary(_e,hn);return e=fn.registrationPromise,fn.installationEntry});return un.fid===INVALID_FID?{installationEntry:await e}:{installationEntry:un,registrationPromise:e}}function updateOrCreateInstallationEntry(_e){const e=_e||{fid:generateFid(),registrationStatus:0};return clearTimedOutRequest(e)}function triggerRegistrationIfNecessary(_e,e){if(e.registrationStatus===0){if(!navigator.onLine){const hn=Promise.reject(ERROR_FACTORY$1.create("app-offline"));return{installationEntry:e,registrationPromise:hn}}const un={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},dn=registerInstallation(_e,un);return{installationEntry:un,registrationPromise:dn}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:waitUntilFidRegistration(_e)}:{installationEntry:e}}async function registerInstallation(_e,e){try{const un=await createInstallationRequest(_e,e);return set(_e.appConfig,un)}catch(un){throw isServerError(un)&&un.customData.serverCode===409?await remove(_e.appConfig):await set(_e.appConfig,{fid:e.fid,registrationStatus:0}),un}}async function waitUntilFidRegistration(_e){let e=await updateInstallationRequest(_e.appConfig);for(;e.registrationStatus===1;)await sleep(100),e=await updateInstallationRequest(_e.appConfig);if(e.registrationStatus===0){const{installationEntry:un,registrationPromise:dn}=await getInstallationEntry(_e);return dn||un}return e}function updateInstallationRequest(_e){return update(_e,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(_e){return hasInstallationRequestTimedOut(_e)?{fid:_e.fid,registrationStatus:0}:_e}function hasInstallationRequestTimedOut(_e){return _e.registrationStatus===1&&_e.registrationTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:_e,heartbeatServiceProvider:e},un){const dn=getGenerateAuthTokenEndpoint(_e,un),hn=getHeadersWithAuth(_e,un),fn=e.getImmediate({optional:!0});if(fn){const yn=await fn.getHeartbeatsHeader();yn&&hn.append("x-firebase-client",yn)}const pn={installation:{sdkVersion:PACKAGE_VERSION,appId:_e.appId}},mn={method:"POST",headers:hn,body:JSON.stringify(pn)},gn=await retryIfServerError(()=>fetch(dn,mn));if(gn.ok){const yn=await gn.json();return extractAuthTokenInfoFromResponse(yn)}else throw await getErrorFromResponse("Generate Auth Token",gn)}function getGenerateAuthTokenEndpoint(_e,{fid:e}){return`${getInstallationsEndpoint(_e)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(_e,e=!1){let un;const dn=await update(_e.appConfig,fn=>{if(!isEntryRegistered(fn))throw ERROR_FACTORY$1.create("not-registered");const pn=fn.authToken;if(!e&&isAuthTokenValid(pn))return fn;if(pn.requestStatus===1)return un=waitUntilAuthTokenRequest(_e,e),fn;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const mn=makeAuthTokenRequestInProgressEntry(fn);return un=fetchAuthTokenFromServer(_e,mn),mn}});return un?await un:dn.authToken}async function waitUntilAuthTokenRequest(_e,e){let un=await updateAuthTokenRequest(_e.appConfig);for(;un.authToken.requestStatus===1;)await sleep(100),un=await updateAuthTokenRequest(_e.appConfig);const dn=un.authToken;return dn.requestStatus===0?refreshAuthToken(_e,e):dn}function updateAuthTokenRequest(_e){return update(_e,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");const un=e.authToken;return hasAuthTokenRequestTimedOut(un)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function fetchAuthTokenFromServer(_e,e){try{const un=await generateAuthTokenRequest(_e,e),dn=Object.assign(Object.assign({},e),{authToken:un});return await set(_e.appConfig,dn),un}catch(un){if(isServerError(un)&&(un.customData.serverCode===401||un.customData.serverCode===404))await remove(_e.appConfig);else{const dn=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await set(_e.appConfig,dn)}throw un}}function isEntryRegistered(_e){return _e!==void 0&&_e.registrationStatus===2}function isAuthTokenValid(_e){return _e.requestStatus===2&&!isAuthTokenExpired(_e)}function isAuthTokenExpired(_e){const e=Date.now();return e<_e.creationTime||_e.creationTime+_e.expiresIn<e+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(_e){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},_e),{authToken:e})}function hasAuthTokenRequestTimedOut(_e){return _e.requestStatus===1&&_e.requestTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(_e){const e=_e,{installationEntry:un,registrationPromise:dn}=await getInstallationEntry(e);return dn?dn.catch(console.error):refreshAuthToken(e).catch(console.error),un.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken(_e,e=!1){const un=_e;return await completeInstallationRegistration(un),(await refreshAuthToken(un,e)).token}async function completeInstallationRegistration(_e){const{registrationPromise:e}=await getInstallationEntry(_e);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(_e){if(!_e||!_e.options)throw getMissingValueError("App Configuration");if(!_e.name)throw getMissingValueError("App Name");const e=["projectId","apiKey","appId"];for(const un of e)if(!_e.options[un])throw getMissingValueError(un);return{appName:_e.name,projectId:_e.options.projectId,apiKey:_e.options.apiKey,appId:_e.options.appId}}function getMissingValueError(_e){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:_e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=_e=>{const e=_e.getProvider("app").getImmediate(),un=extractAppConfig(e),dn=_getProvider(e,"heartbeat");return{app:e,appConfig:un,heartbeatServiceProvider:dn,_delete:()=>Promise.resolve()}},internalFactory=_e=>{const e=_e.getProvider("app").getImmediate(),un=_getProvider(e,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(un),getToken:hn=>getToken(un,hn)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations();registerVersion(name$2,version$2);registerVersion(name$2,version$2,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANALYTICS_TYPE="analytics",GA_FID_KEY="firebase_id",ORIGIN_KEY="origin",FETCH_TIMEOUT_MILLIS=60*1e3,DYNAMIC_CONFIG_URL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GTAG_URL="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ERROR_FACTORY=new ErrorFactory("analytics","Analytics",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createGtagTrustedTypesScriptURL(_e){if(!_e.startsWith(GTAG_URL)){const e=ERROR_FACTORY.create("invalid-gtag-resource",{gtagURL:_e});return logger.warn(e.message),""}return _e}function promiseAllSettled(_e){return Promise.all(_e.map(e=>e.catch(un=>un)))}function createTrustedTypesPolicy(_e,e){let un;return window.trustedTypes&&(un=window.trustedTypes.createPolicy(_e,e)),un}function insertScriptTag(_e,e){const un=createTrustedTypesPolicy("firebase-js-sdk-policy",{createScriptURL:createGtagTrustedTypesScriptURL}),dn=document.createElement("script"),hn=`${GTAG_URL}?l=${_e}&id=${e}`;dn.src=un?un==null?void 0:un.createScriptURL(hn):hn,dn.async=!0,document.head.appendChild(dn)}function getOrCreateDataLayer(_e){let e=[];return Array.isArray(window[_e])?e=window[_e]:window[_e]=e,e}async function gtagOnConfig(_e,e,un,dn,hn,fn){const pn=dn[hn];try{if(pn)await e[pn];else{const gn=(await promiseAllSettled(un)).find(yn=>yn.measurementId===hn);gn&&await e[gn.appId]}}catch(mn){logger.error(mn)}_e("config",hn,fn)}async function gtagOnEvent(_e,e,un,dn,hn){try{let fn=[];if(hn&&hn.send_to){let pn=hn.send_to;Array.isArray(pn)||(pn=[pn]);const mn=await promiseAllSettled(un);for(const gn of pn){const yn=mn.find(En=>En.measurementId===gn),xn=yn&&e[yn.appId];if(xn)fn.push(xn);else{fn=[];break}}}fn.length===0&&(fn=Object.values(e)),await Promise.all(fn),_e("event",dn,hn||{})}catch(fn){logger.error(fn)}}function wrapGtag(_e,e,un,dn){async function hn(fn,...pn){try{if(fn==="event"){const[mn,gn]=pn;await gtagOnEvent(_e,e,un,mn,gn)}else if(fn==="config"){const[mn,gn]=pn;await gtagOnConfig(_e,e,un,dn,mn,gn)}else if(fn==="consent"){const[mn,gn]=pn;_e("consent",mn,gn)}else if(fn==="get"){const[mn,gn,yn]=pn;_e("get",mn,gn,yn)}else if(fn==="set"){const[mn]=pn;_e("set",mn)}else _e(fn,...pn)}catch(mn){logger.error(mn)}}return hn}function wrapOrCreateGtag(_e,e,un,dn,hn){let fn=function(...pn){window[dn].push(arguments)};return window[hn]&&typeof window[hn]=="function"&&(fn=window[hn]),window[hn]=wrapGtag(fn,_e,e,un),{gtagCore:fn,wrappedGtag:window[hn]}}function findGtagScriptOnPage(_e){const e=window.document.getElementsByTagName("script");for(const un of Object.values(e))if(un.src&&un.src.includes(GTAG_URL)&&un.src.includes(_e))return un;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LONG_RETRY_FACTOR=30,BASE_INTERVAL_MILLIS=1e3;class RetryData{constructor(e={},un=BASE_INTERVAL_MILLIS){this.throttleMetadata=e,this.intervalMillis=un}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,un){this.throttleMetadata[e]=un}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const defaultRetryData=new RetryData;function getHeaders(_e){return new Headers({Accept:"application/json","x-goog-api-key":_e})}async function fetchDynamicConfig(_e){var e;const{appId:un,apiKey:dn}=_e,hn={method:"GET",headers:getHeaders(dn)},fn=DYNAMIC_CONFIG_URL.replace("{app-id}",un),pn=await fetch(fn,hn);if(pn.status!==200&&pn.status!==304){let mn="";try{const gn=await pn.json();!((e=gn.error)===null||e===void 0)&&e.message&&(mn=gn.error.message)}catch{}throw ERROR_FACTORY.create("config-fetch-failed",{httpStatus:pn.status,responseMessage:mn})}return pn.json()}async function fetchDynamicConfigWithRetry(_e,e=defaultRetryData,un){const{appId:dn,apiKey:hn,measurementId:fn}=_e.options;if(!dn)throw ERROR_FACTORY.create("no-app-id");if(!hn){if(fn)return{measurementId:fn,appId:dn};throw ERROR_FACTORY.create("no-api-key")}const pn=e.getThrottleMetadata(dn)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mn=new AnalyticsAbortSignal;return setTimeout(async()=>{mn.abort()},FETCH_TIMEOUT_MILLIS),attemptFetchDynamicConfigWithRetry({appId:dn,apiKey:hn,measurementId:fn},pn,mn,e)}async function attemptFetchDynamicConfigWithRetry(_e,{throttleEndTimeMillis:e,backoffCount:un},dn,hn=defaultRetryData){var fn;const{appId:pn,measurementId:mn}=_e;try{await setAbortableTimeout(dn,e)}catch(gn){if(mn)return logger.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${gn==null?void 0:gn.message}]`),{appId:pn,measurementId:mn};throw gn}try{const gn=await fetchDynamicConfig(_e);return hn.deleteThrottleMetadata(pn),gn}catch(gn){const yn=gn;if(!isRetriableError(yn)){if(hn.deleteThrottleMetadata(pn),mn)return logger.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${yn==null?void 0:yn.message}]`),{appId:pn,measurementId:mn};throw gn}const xn=Number((fn=yn==null?void 0:yn.customData)===null||fn===void 0?void 0:fn.httpStatus)===503?calculateBackoffMillis(un,hn.intervalMillis,LONG_RETRY_FACTOR):calculateBackoffMillis(un,hn.intervalMillis),En={throttleEndTimeMillis:Date.now()+xn,backoffCount:un+1};return hn.setThrottleMetadata(pn,En),logger.debug(`Calling attemptFetch again in ${xn} millis`),attemptFetchDynamicConfigWithRetry(_e,En,dn,hn)}}function setAbortableTimeout(_e,e){return new Promise((un,dn)=>{const hn=Math.max(e-Date.now(),0),fn=setTimeout(un,hn);_e.addEventListener(()=>{clearTimeout(fn),dn(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function isRetriableError(_e){if(!(_e instanceof FirebaseError)||!_e.customData)return!1;const e=Number(_e.customData.httpStatus);return e===429||e===500||e===503||e===504}class AnalyticsAbortSignal{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function logEvent$1(_e,e,un,dn,hn){if(hn&&hn.global){_e("event",un,dn);return}else{const fn=await e,pn=Object.assign(Object.assign({},dn),{send_to:fn});_e("event",un,pn)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function validateIndexedDB(){if(isIndexedDBAvailable())try{await validateIndexedDBOpenable()}catch(_e){return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:_e==null?void 0:_e.toString()}).message),!1}else return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _initializeAnalytics(_e,e,un,dn,hn,fn,pn){var mn;const gn=fetchDynamicConfigWithRetry(_e);gn.then(vn=>{un[vn.measurementId]=vn.appId,_e.options.measurementId&&vn.measurementId!==_e.options.measurementId&&logger.warn(`The measurement ID in the local Firebase config (${_e.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>logger.error(vn)),e.push(gn);const yn=validateIndexedDB().then(vn=>{if(vn)return dn.getId()}),[xn,En]=await Promise.all([gn,yn]);findGtagScriptOnPage(fn)||insertScriptTag(fn,xn.measurementId),hn("js",new Date);const bn=(mn=pn==null?void 0:pn.config)!==null&&mn!==void 0?mn:{};return bn[ORIGIN_KEY]="firebase",bn.update=!0,En!=null&&(bn[GA_FID_KEY]=En),hn("config",xn.measurementId,bn),xn.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AnalyticsService{constructor(e){this.app=e}_delete(){return delete initializationPromisesMap[this.app.options.appId],Promise.resolve()}}let initializationPromisesMap={},dynamicConfigPromisesList=[];const measurementIdToAppId={};let dataLayerName="dataLayer",gtagName="gtag",gtagCoreFunction,wrappedGtagFunction,globalInitDone=!1;function warnOnBrowserContextMismatch(){const _e=[];if(isBrowserExtension()&&_e.push("This is a browser extension environment."),areCookiesEnabled()||_e.push("Cookies are not available."),_e.length>0){const e=_e.map((dn,hn)=>`(${hn+1}) ${dn}`).join(" "),un=ERROR_FACTORY.create("invalid-analytics-context",{errorInfo:e});logger.warn(un.message)}}function factory$1(_e,e,un){warnOnBrowserContextMismatch();const dn=_e.options.appId;if(!dn)throw ERROR_FACTORY.create("no-app-id");if(!_e.options.apiKey)if(_e.options.measurementId)logger.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${_e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ERROR_FACTORY.create("no-api-key");if(initializationPromisesMap[dn]!=null)throw ERROR_FACTORY.create("already-exists",{id:dn});if(!globalInitDone){getOrCreateDataLayer(dataLayerName);const{wrappedGtag:fn,gtagCore:pn}=wrapOrCreateGtag(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagName);wrappedGtagFunction=fn,gtagCoreFunction=pn,globalInitDone=!0}return initializationPromisesMap[dn]=_initializeAnalytics(_e,dynamicConfigPromisesList,measurementIdToAppId,e,gtagCoreFunction,dataLayerName,un),new AnalyticsService(_e)}function getAnalytics(_e=getApp()){_e=getModularInstance(_e);const e=_getProvider(_e,ANALYTICS_TYPE);return e.isInitialized()?e.getImmediate():initializeAnalytics(_e)}function initializeAnalytics(_e,e={}){const un=_getProvider(_e,ANALYTICS_TYPE);if(un.isInitialized()){const hn=un.getImmediate();if(deepEqual(e,un.getOptions()))return hn;throw ERROR_FACTORY.create("already-initialized")}return un.initialize({options:e})}function logEvent(_e,e,un,dn){_e=getModularInstance(_e),logEvent$1(wrappedGtagFunction,initializationPromisesMap[_e.app.options.appId],e,un,dn).catch(hn=>logger.error(hn))}const name$1="@firebase/analytics",version$1="0.10.16";function registerAnalytics(){_registerComponent(new Component(ANALYTICS_TYPE,(e,{options:un})=>{const dn=e.getProvider("app").getImmediate(),hn=e.getProvider("installations-internal").getImmediate();return factory$1(dn,hn,un)},"PUBLIC")),_registerComponent(new Component("analytics-internal",_e,"PRIVATE")),registerVersion(name$1,version$1),registerVersion(name$1,version$1,"esm2017");function _e(e){try{const un=e.getProvider(ANALYTICS_TYPE).getImmediate();return{logEvent:(dn,hn,fn)=>logEvent(un,dn,hn,fn)}}catch(un){throw ERROR_FACTORY.create("interop-component-reg-failed",{reason:un})}}}registerAnalytics();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var _e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(kn,Nn){function Ln(){}Ln.prototype=Nn.prototype,kn.D=Nn.prototype,kn.prototype=new Ln,kn.prototype.constructor=kn,kn.C=function(zn,Cn,Mn){for(var Bn=Array(arguments.length-2),Xn=2;Xn<arguments.length;Xn++)Bn[Xn-2]=arguments[Xn];return Nn.prototype[Cn].apply(zn,Bn)}}function un(){this.blockSize=-1}function dn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(dn,un),dn.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function hn(kn,Nn,Ln){Ln||(Ln=0);var zn=Array(16);if(typeof Nn=="string")for(var Cn=0;16>Cn;++Cn)zn[Cn]=Nn.charCodeAt(Ln++)|Nn.charCodeAt(Ln++)<<8|Nn.charCodeAt(Ln++)<<16|Nn.charCodeAt(Ln++)<<24;else for(Cn=0;16>Cn;++Cn)zn[Cn]=Nn[Ln++]|Nn[Ln++]<<8|Nn[Ln++]<<16|Nn[Ln++]<<24;Nn=kn.g[0],Ln=kn.g[1],Cn=kn.g[2];var Mn=kn.g[3],Bn=Nn+(Mn^Ln&(Cn^Mn))+zn[0]+3614090360&4294967295;Nn=Ln+(Bn<<7&4294967295|Bn>>>25),Bn=Mn+(Cn^Nn&(Ln^Cn))+zn[1]+3905402710&4294967295,Mn=Nn+(Bn<<12&4294967295|Bn>>>20),Bn=Cn+(Ln^Mn&(Nn^Ln))+zn[2]+606105819&4294967295,Cn=Mn+(Bn<<17&4294967295|Bn>>>15),Bn=Ln+(Nn^Cn&(Mn^Nn))+zn[3]+3250441966&4294967295,Ln=Cn+(Bn<<22&4294967295|Bn>>>10),Bn=Nn+(Mn^Ln&(Cn^Mn))+zn[4]+4118548399&4294967295,Nn=Ln+(Bn<<7&4294967295|Bn>>>25),Bn=Mn+(Cn^Nn&(Ln^Cn))+zn[5]+1200080426&4294967295,Mn=Nn+(Bn<<12&4294967295|Bn>>>20),Bn=Cn+(Ln^Mn&(Nn^Ln))+zn[6]+2821735955&4294967295,Cn=Mn+(Bn<<17&4294967295|Bn>>>15),Bn=Ln+(Nn^Cn&(Mn^Nn))+zn[7]+4249261313&4294967295,Ln=Cn+(Bn<<22&4294967295|Bn>>>10),Bn=Nn+(Mn^Ln&(Cn^Mn))+zn[8]+1770035416&4294967295,Nn=Ln+(Bn<<7&4294967295|Bn>>>25),Bn=Mn+(Cn^Nn&(Ln^Cn))+zn[9]+2336552879&4294967295,Mn=Nn+(Bn<<12&4294967295|Bn>>>20),Bn=Cn+(Ln^Mn&(Nn^Ln))+zn[10]+4294925233&4294967295,Cn=Mn+(Bn<<17&4294967295|Bn>>>15),Bn=Ln+(Nn^Cn&(Mn^Nn))+zn[11]+2304563134&4294967295,Ln=Cn+(Bn<<22&4294967295|Bn>>>10),Bn=Nn+(Mn^Ln&(Cn^Mn))+zn[12]+1804603682&4294967295,Nn=Ln+(Bn<<7&4294967295|Bn>>>25),Bn=Mn+(Cn^Nn&(Ln^Cn))+zn[13]+4254626195&4294967295,Mn=Nn+(Bn<<12&4294967295|Bn>>>20),Bn=Cn+(Ln^Mn&(Nn^Ln))+zn[14]+2792965006&4294967295,Cn=Mn+(Bn<<17&4294967295|Bn>>>15),Bn=Ln+(Nn^Cn&(Mn^Nn))+zn[15]+1236535329&4294967295,Ln=Cn+(Bn<<22&4294967295|Bn>>>10),Bn=Nn+(Cn^Mn&(Ln^Cn))+zn[1]+4129170786&4294967295,Nn=Ln+(Bn<<5&4294967295|Bn>>>27),Bn=Mn+(Ln^Cn&(Nn^Ln))+zn[6]+3225465664&4294967295,Mn=Nn+(Bn<<9&4294967295|Bn>>>23),Bn=Cn+(Nn^Ln&(Mn^Nn))+zn[11]+643717713&4294967295,Cn=Mn+(Bn<<14&4294967295|Bn>>>18),Bn=Ln+(Mn^Nn&(Cn^Mn))+zn[0]+3921069994&4294967295,Ln=Cn+(Bn<<20&4294967295|Bn>>>12),Bn=Nn+(Cn^Mn&(Ln^Cn))+zn[5]+3593408605&4294967295,Nn=Ln+(Bn<<5&4294967295|Bn>>>27),Bn=Mn+(Ln^Cn&(Nn^Ln))+zn[10]+38016083&4294967295,Mn=Nn+(Bn<<9&4294967295|Bn>>>23),Bn=Cn+(Nn^Ln&(Mn^Nn))+zn[15]+3634488961&4294967295,Cn=Mn+(Bn<<14&4294967295|Bn>>>18),Bn=Ln+(Mn^Nn&(Cn^Mn))+zn[4]+3889429448&4294967295,Ln=Cn+(Bn<<20&4294967295|Bn>>>12),Bn=Nn+(Cn^Mn&(Ln^Cn))+zn[9]+568446438&4294967295,Nn=Ln+(Bn<<5&4294967295|Bn>>>27),Bn=Mn+(Ln^Cn&(Nn^Ln))+zn[14]+3275163606&4294967295,Mn=Nn+(Bn<<9&4294967295|Bn>>>23),Bn=Cn+(Nn^Ln&(Mn^Nn))+zn[3]+4107603335&4294967295,Cn=Mn+(Bn<<14&4294967295|Bn>>>18),Bn=Ln+(Mn^Nn&(Cn^Mn))+zn[8]+1163531501&4294967295,Ln=Cn+(Bn<<20&4294967295|Bn>>>12),Bn=Nn+(Cn^Mn&(Ln^Cn))+zn[13]+2850285829&4294967295,Nn=Ln+(Bn<<5&4294967295|Bn>>>27),Bn=Mn+(Ln^Cn&(Nn^Ln))+zn[2]+4243563512&4294967295,Mn=Nn+(Bn<<9&4294967295|Bn>>>23),Bn=Cn+(Nn^Ln&(Mn^Nn))+zn[7]+1735328473&4294967295,Cn=Mn+(Bn<<14&4294967295|Bn>>>18),Bn=Ln+(Mn^Nn&(Cn^Mn))+zn[12]+2368359562&4294967295,Ln=Cn+(Bn<<20&4294967295|Bn>>>12),Bn=Nn+(Ln^Cn^Mn)+zn[5]+4294588738&4294967295,Nn=Ln+(Bn<<4&4294967295|Bn>>>28),Bn=Mn+(Nn^Ln^Cn)+zn[8]+2272392833&4294967295,Mn=Nn+(Bn<<11&4294967295|Bn>>>21),Bn=Cn+(Mn^Nn^Ln)+zn[11]+1839030562&4294967295,Cn=Mn+(Bn<<16&4294967295|Bn>>>16),Bn=Ln+(Cn^Mn^Nn)+zn[14]+4259657740&4294967295,Ln=Cn+(Bn<<23&4294967295|Bn>>>9),Bn=Nn+(Ln^Cn^Mn)+zn[1]+2763975236&4294967295,Nn=Ln+(Bn<<4&4294967295|Bn>>>28),Bn=Mn+(Nn^Ln^Cn)+zn[4]+1272893353&4294967295,Mn=Nn+(Bn<<11&4294967295|Bn>>>21),Bn=Cn+(Mn^Nn^Ln)+zn[7]+4139469664&4294967295,Cn=Mn+(Bn<<16&4294967295|Bn>>>16),Bn=Ln+(Cn^Mn^Nn)+zn[10]+3200236656&4294967295,Ln=Cn+(Bn<<23&4294967295|Bn>>>9),Bn=Nn+(Ln^Cn^Mn)+zn[13]+681279174&4294967295,Nn=Ln+(Bn<<4&4294967295|Bn>>>28),Bn=Mn+(Nn^Ln^Cn)+zn[0]+3936430074&4294967295,Mn=Nn+(Bn<<11&4294967295|Bn>>>21),Bn=Cn+(Mn^Nn^Ln)+zn[3]+3572445317&4294967295,Cn=Mn+(Bn<<16&4294967295|Bn>>>16),Bn=Ln+(Cn^Mn^Nn)+zn[6]+76029189&4294967295,Ln=Cn+(Bn<<23&4294967295|Bn>>>9),Bn=Nn+(Ln^Cn^Mn)+zn[9]+3654602809&4294967295,Nn=Ln+(Bn<<4&4294967295|Bn>>>28),Bn=Mn+(Nn^Ln^Cn)+zn[12]+3873151461&4294967295,Mn=Nn+(Bn<<11&4294967295|Bn>>>21),Bn=Cn+(Mn^Nn^Ln)+zn[15]+530742520&4294967295,Cn=Mn+(Bn<<16&4294967295|Bn>>>16),Bn=Ln+(Cn^Mn^Nn)+zn[2]+3299628645&4294967295,Ln=Cn+(Bn<<23&4294967295|Bn>>>9),Bn=Nn+(Cn^(Ln|~Mn))+zn[0]+4096336452&4294967295,Nn=Ln+(Bn<<6&4294967295|Bn>>>26),Bn=Mn+(Ln^(Nn|~Cn))+zn[7]+1126891415&4294967295,Mn=Nn+(Bn<<10&4294967295|Bn>>>22),Bn=Cn+(Nn^(Mn|~Ln))+zn[14]+2878612391&4294967295,Cn=Mn+(Bn<<15&4294967295|Bn>>>17),Bn=Ln+(Mn^(Cn|~Nn))+zn[5]+4237533241&4294967295,Ln=Cn+(Bn<<21&4294967295|Bn>>>11),Bn=Nn+(Cn^(Ln|~Mn))+zn[12]+1700485571&4294967295,Nn=Ln+(Bn<<6&4294967295|Bn>>>26),Bn=Mn+(Ln^(Nn|~Cn))+zn[3]+2399980690&4294967295,Mn=Nn+(Bn<<10&4294967295|Bn>>>22),Bn=Cn+(Nn^(Mn|~Ln))+zn[10]+4293915773&4294967295,Cn=Mn+(Bn<<15&4294967295|Bn>>>17),Bn=Ln+(Mn^(Cn|~Nn))+zn[1]+2240044497&4294967295,Ln=Cn+(Bn<<21&4294967295|Bn>>>11),Bn=Nn+(Cn^(Ln|~Mn))+zn[8]+1873313359&4294967295,Nn=Ln+(Bn<<6&4294967295|Bn>>>26),Bn=Mn+(Ln^(Nn|~Cn))+zn[15]+4264355552&4294967295,Mn=Nn+(Bn<<10&4294967295|Bn>>>22),Bn=Cn+(Nn^(Mn|~Ln))+zn[6]+2734768916&4294967295,Cn=Mn+(Bn<<15&4294967295|Bn>>>17),Bn=Ln+(Mn^(Cn|~Nn))+zn[13]+1309151649&4294967295,Ln=Cn+(Bn<<21&4294967295|Bn>>>11),Bn=Nn+(Cn^(Ln|~Mn))+zn[4]+4149444226&4294967295,Nn=Ln+(Bn<<6&4294967295|Bn>>>26),Bn=Mn+(Ln^(Nn|~Cn))+zn[11]+3174756917&4294967295,Mn=Nn+(Bn<<10&4294967295|Bn>>>22),Bn=Cn+(Nn^(Mn|~Ln))+zn[2]+718787259&4294967295,Cn=Mn+(Bn<<15&4294967295|Bn>>>17),Bn=Ln+(Mn^(Cn|~Nn))+zn[9]+3951481745&4294967295,kn.g[0]=kn.g[0]+Nn&4294967295,kn.g[1]=kn.g[1]+(Cn+(Bn<<21&4294967295|Bn>>>11))&4294967295,kn.g[2]=kn.g[2]+Cn&4294967295,kn.g[3]=kn.g[3]+Mn&4294967295}dn.prototype.u=function(kn,Nn){Nn===void 0&&(Nn=kn.length);for(var Ln=Nn-this.blockSize,zn=this.B,Cn=this.h,Mn=0;Mn<Nn;){if(Cn==0)for(;Mn<=Ln;)hn(this,kn,Mn),Mn+=this.blockSize;if(typeof kn=="string"){for(;Mn<Nn;)if(zn[Cn++]=kn.charCodeAt(Mn++),Cn==this.blockSize){hn(this,zn),Cn=0;break}}else for(;Mn<Nn;)if(zn[Cn++]=kn[Mn++],Cn==this.blockSize){hn(this,zn),Cn=0;break}}this.h=Cn,this.o+=Nn},dn.prototype.v=function(){var kn=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);kn[0]=128;for(var Nn=1;Nn<kn.length-8;++Nn)kn[Nn]=0;var Ln=8*this.o;for(Nn=kn.length-8;Nn<kn.length;++Nn)kn[Nn]=Ln&255,Ln/=256;for(this.u(kn),kn=Array(16),Nn=Ln=0;4>Nn;++Nn)for(var zn=0;32>zn;zn+=8)kn[Ln++]=this.g[Nn]>>>zn&255;return kn};function fn(kn,Nn){var Ln=mn;return Object.prototype.hasOwnProperty.call(Ln,kn)?Ln[kn]:Ln[kn]=Nn(kn)}function pn(kn,Nn){this.h=Nn;for(var Ln=[],zn=!0,Cn=kn.length-1;0<=Cn;Cn--){var Mn=kn[Cn]|0;zn&&Mn==Nn||(Ln[Cn]=Mn,zn=!1)}this.g=Ln}var mn={};function gn(kn){return-128<=kn&&128>kn?fn(kn,function(Nn){return new pn([Nn|0],0>Nn?-1:0)}):new pn([kn|0],0>kn?-1:0)}function yn(kn){if(isNaN(kn)||!isFinite(kn))return En;if(0>kn)return In(yn(-kn));for(var Nn=[],Ln=1,zn=0;kn>=Ln;zn++)Nn[zn]=kn/Ln|0,Ln*=4294967296;return new pn(Nn,0)}function xn(kn,Nn){if(kn.length==0)throw Error("number format error: empty string");if(Nn=Nn||10,2>Nn||36<Nn)throw Error("radix out of range: "+Nn);if(kn.charAt(0)=="-")return In(xn(kn.substring(1),Nn));if(0<=kn.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ln=yn(Math.pow(Nn,8)),zn=En,Cn=0;Cn<kn.length;Cn+=8){var Mn=Math.min(8,kn.length-Cn),Bn=parseInt(kn.substring(Cn,Cn+Mn),Nn);8>Mn?(Mn=yn(Math.pow(Nn,Mn)),zn=zn.j(Mn).add(yn(Bn))):(zn=zn.j(Ln),zn=zn.add(yn(Bn)))}return zn}var En=gn(0),bn=gn(1),vn=gn(16777216);_e=pn.prototype,_e.m=function(){if(Tn(this))return-In(this).m();for(var kn=0,Nn=1,Ln=0;Ln<this.g.length;Ln++){var zn=this.i(Ln);kn+=(0<=zn?zn:4294967296+zn)*Nn,Nn*=4294967296}return kn},_e.toString=function(kn){if(kn=kn||10,2>kn||36<kn)throw Error("radix out of range: "+kn);if(Pn(this))return"0";if(Tn(this))return"-"+In(this).toString(kn);for(var Nn=yn(Math.pow(kn,6)),Ln=this,zn="";;){var Cn=$n(Ln,Nn).g;Ln=Rn(Ln,Cn.j(Nn));var Mn=((0<Ln.g.length?Ln.g[0]:Ln.h)>>>0).toString(kn);if(Ln=Cn,Pn(Ln))return Mn+zn;for(;6>Mn.length;)Mn="0"+Mn;zn=Mn+zn}},_e.i=function(kn){return 0>kn?0:kn<this.g.length?this.g[kn]:this.h};function Pn(kn){if(kn.h!=0)return!1;for(var Nn=0;Nn<kn.g.length;Nn++)if(kn.g[Nn]!=0)return!1;return!0}function Tn(kn){return kn.h==-1}_e.l=function(kn){return kn=Rn(this,kn),Tn(kn)?-1:Pn(kn)?0:1};function In(kn){for(var Nn=kn.g.length,Ln=[],zn=0;zn<Nn;zn++)Ln[zn]=~kn.g[zn];return new pn(Ln,~kn.h).add(bn)}_e.abs=function(){return Tn(this)?In(this):this},_e.add=function(kn){for(var Nn=Math.max(this.g.length,kn.g.length),Ln=[],zn=0,Cn=0;Cn<=Nn;Cn++){var Mn=zn+(this.i(Cn)&65535)+(kn.i(Cn)&65535),Bn=(Mn>>>16)+(this.i(Cn)>>>16)+(kn.i(Cn)>>>16);zn=Bn>>>16,Mn&=65535,Bn&=65535,Ln[Cn]=Bn<<16|Mn}return new pn(Ln,Ln[Ln.length-1]&-2147483648?-1:0)};function Rn(kn,Nn){return kn.add(In(Nn))}_e.j=function(kn){if(Pn(this)||Pn(kn))return En;if(Tn(this))return Tn(kn)?In(this).j(In(kn)):In(In(this).j(kn));if(Tn(kn))return In(this.j(In(kn)));if(0>this.l(vn)&&0>kn.l(vn))return yn(this.m()*kn.m());for(var Nn=this.g.length+kn.g.length,Ln=[],zn=0;zn<2*Nn;zn++)Ln[zn]=0;for(zn=0;zn<this.g.length;zn++)for(var Cn=0;Cn<kn.g.length;Cn++){var Mn=this.i(zn)>>>16,Bn=this.i(zn)&65535,Xn=kn.i(Cn)>>>16,nr=kn.i(Cn)&65535;Ln[2*zn+2*Cn]+=Bn*nr,Sn(Ln,2*zn+2*Cn),Ln[2*zn+2*Cn+1]+=Mn*nr,Sn(Ln,2*zn+2*Cn+1),Ln[2*zn+2*Cn+1]+=Bn*Xn,Sn(Ln,2*zn+2*Cn+1),Ln[2*zn+2*Cn+2]+=Mn*Xn,Sn(Ln,2*zn+2*Cn+2)}for(zn=0;zn<Nn;zn++)Ln[zn]=Ln[2*zn+1]<<16|Ln[2*zn];for(zn=Nn;zn<2*Nn;zn++)Ln[zn]=0;return new pn(Ln,0)};function Sn(kn,Nn){for(;(kn[Nn]&65535)!=kn[Nn];)kn[Nn+1]+=kn[Nn]>>>16,kn[Nn]&=65535,Nn++}function Dn(kn,Nn){this.g=kn,this.h=Nn}function $n(kn,Nn){if(Pn(Nn))throw Error("division by zero");if(Pn(kn))return new Dn(En,En);if(Tn(kn))return Nn=$n(In(kn),Nn),new Dn(In(Nn.g),In(Nn.h));if(Tn(Nn))return Nn=$n(kn,In(Nn)),new Dn(In(Nn.g),Nn.h);if(30<kn.g.length){if(Tn(kn)||Tn(Nn))throw Error("slowDivide_ only works with positive integers.");for(var Ln=bn,zn=Nn;0>=zn.l(kn);)Ln=Fn(Ln),zn=Fn(zn);var Cn=Gn(Ln,1),Mn=Gn(zn,1);for(zn=Gn(zn,2),Ln=Gn(Ln,2);!Pn(zn);){var Bn=Mn.add(zn);0>=Bn.l(kn)&&(Cn=Cn.add(Ln),Mn=Bn),zn=Gn(zn,1),Ln=Gn(Ln,1)}return Nn=Rn(kn,Cn.j(Nn)),new Dn(Cn,Nn)}for(Cn=En;0<=kn.l(Nn);){for(Ln=Math.max(1,Math.floor(kn.m()/Nn.m())),zn=Math.ceil(Math.log(Ln)/Math.LN2),zn=48>=zn?1:Math.pow(2,zn-48),Mn=yn(Ln),Bn=Mn.j(Nn);Tn(Bn)||0<Bn.l(kn);)Ln-=zn,Mn=yn(Ln),Bn=Mn.j(Nn);Pn(Mn)&&(Mn=bn),Cn=Cn.add(Mn),kn=Rn(kn,Bn)}return new Dn(Cn,kn)}_e.A=function(kn){return $n(this,kn).h},_e.and=function(kn){for(var Nn=Math.max(this.g.length,kn.g.length),Ln=[],zn=0;zn<Nn;zn++)Ln[zn]=this.i(zn)&kn.i(zn);return new pn(Ln,this.h&kn.h)},_e.or=function(kn){for(var Nn=Math.max(this.g.length,kn.g.length),Ln=[],zn=0;zn<Nn;zn++)Ln[zn]=this.i(zn)|kn.i(zn);return new pn(Ln,this.h|kn.h)},_e.xor=function(kn){for(var Nn=Math.max(this.g.length,kn.g.length),Ln=[],zn=0;zn<Nn;zn++)Ln[zn]=this.i(zn)^kn.i(zn);return new pn(Ln,this.h^kn.h)};function Fn(kn){for(var Nn=kn.g.length+1,Ln=[],zn=0;zn<Nn;zn++)Ln[zn]=kn.i(zn)<<1|kn.i(zn-1)>>>31;return new pn(Ln,kn.h)}function Gn(kn,Nn){var Ln=Nn>>5;Nn%=32;for(var zn=kn.g.length-Ln,Cn=[],Mn=0;Mn<zn;Mn++)Cn[Mn]=0<Nn?kn.i(Mn+Ln)>>>Nn|kn.i(Mn+Ln+1)<<32-Nn:kn.i(Mn+Ln);return new pn(Cn,kn.h)}dn.prototype.digest=dn.prototype.v,dn.prototype.reset=dn.prototype.s,dn.prototype.update=dn.prototype.u,Md5=dn,pn.prototype.add=pn.prototype.add,pn.prototype.multiply=pn.prototype.j,pn.prototype.modulo=pn.prototype.A,pn.prototype.compare=pn.prototype.l,pn.prototype.toNumber=pn.prototype.m,pn.prototype.toString=pn.prototype.toString,pn.prototype.getBits=pn.prototype.i,pn.fromNumber=yn,pn.fromString=xn,Integer=pn}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode$1,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var _e,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(An,Kn,rr){return An==Array.prototype||An==Object.prototype||(An[Kn]=rr.value),An};function un(An){An=[typeof globalThis=="object"&&globalThis,An,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var Kn=0;Kn<An.length;++Kn){var rr=An[Kn];if(rr&&rr.Math==Math)return rr}throw Error("Cannot find global object")}var dn=un(this);function hn(An,Kn){if(Kn)e:{var rr=dn;An=An.split(".");for(var yr=0;yr<An.length-1;yr++){var Yr=An[yr];if(!(Yr in rr))break e;rr=rr[Yr]}An=An[An.length-1],yr=rr[An],Kn=Kn(yr),Kn!=yr&&Kn!=null&&e(rr,An,{configurable:!0,writable:!0,value:Kn})}}function fn(An,Kn){An instanceof String&&(An+="");var rr=0,yr=!1,Yr={next:function(){if(!yr&&rr<An.length){var os=rr++;return{value:Kn(os,An[os]),done:!1}}return yr=!0,{done:!0,value:void 0}}};return Yr[Symbol.iterator]=function(){return Yr},Yr}hn("Array.prototype.values",function(An){return An||function(){return fn(this,function(Kn,rr){return rr})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var pn=pn||{},mn=this||self;function gn(An){var Kn=typeof An;return Kn=Kn!="object"?Kn:An?Array.isArray(An)?"array":Kn:"null",Kn=="array"||Kn=="object"&&typeof An.length=="number"}function yn(An){var Kn=typeof An;return Kn=="object"&&An!=null||Kn=="function"}function xn(An,Kn,rr){return An.call.apply(An.bind,arguments)}function En(An,Kn,rr){if(!An)throw Error();if(2<arguments.length){var yr=Array.prototype.slice.call(arguments,2);return function(){var Yr=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Yr,yr),An.apply(Kn,Yr)}}return function(){return An.apply(Kn,arguments)}}function bn(An,Kn,rr){return bn=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xn:En,bn.apply(null,arguments)}function vn(An,Kn){var rr=Array.prototype.slice.call(arguments,1);return function(){var yr=rr.slice();return yr.push.apply(yr,arguments),An.apply(this,yr)}}function Pn(An,Kn){function rr(){}rr.prototype=Kn.prototype,An.aa=Kn.prototype,An.prototype=new rr,An.prototype.constructor=An,An.Qb=function(yr,Yr,os){for(var bs=Array(arguments.length-2),Ws=2;Ws<arguments.length;Ws++)bs[Ws-2]=arguments[Ws];return Kn.prototype[Yr].apply(yr,bs)}}function Tn(An){const Kn=An.length;if(0<Kn){const rr=Array(Kn);for(let yr=0;yr<Kn;yr++)rr[yr]=An[yr];return rr}return[]}function In(An,Kn){for(let rr=1;rr<arguments.length;rr++){const yr=arguments[rr];if(gn(yr)){const Yr=An.length||0,os=yr.length||0;An.length=Yr+os;for(let bs=0;bs<os;bs++)An[Yr+bs]=yr[bs]}else An.push(yr)}}class Rn{constructor(Kn,rr){this.i=Kn,this.j=rr,this.h=0,this.g=null}get(){let Kn;return 0<this.h?(this.h--,Kn=this.g,this.g=Kn.next,Kn.next=null):Kn=this.i(),Kn}}function Sn(An){return/^[\s\xa0]*$/.test(An)}function Dn(){var An=mn.navigator;return An&&(An=An.userAgent)?An:""}function $n(An){return $n[" "](An),An}$n[" "]=function(){};var Fn=Dn().indexOf("Gecko")!=-1&&!(Dn().toLowerCase().indexOf("webkit")!=-1&&Dn().indexOf("Edge")==-1)&&!(Dn().indexOf("Trident")!=-1||Dn().indexOf("MSIE")!=-1)&&Dn().indexOf("Edge")==-1;function Gn(An,Kn,rr){for(const yr in An)Kn.call(rr,An[yr],yr,An)}function kn(An,Kn){for(const rr in An)Kn.call(void 0,An[rr],rr,An)}function Nn(An){const Kn={};for(const rr in An)Kn[rr]=An[rr];return Kn}const Ln="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zn(An,Kn){let rr,yr;for(let Yr=1;Yr<arguments.length;Yr++){yr=arguments[Yr];for(rr in yr)An[rr]=yr[rr];for(let os=0;os<Ln.length;os++)rr=Ln[os],Object.prototype.hasOwnProperty.call(yr,rr)&&(An[rr]=yr[rr])}}function Cn(An){var Kn=1;An=An.split(":");const rr=[];for(;0<Kn&&An.length;)rr.push(An.shift()),Kn--;return An.length&&rr.push(An.join(":")),rr}function Mn(An){mn.setTimeout(()=>{throw An},0)}function Bn(){var An=Jn;let Kn=null;return An.g&&(Kn=An.g,An.g=An.g.next,An.g||(An.h=null),Kn.next=null),Kn}class Xn{constructor(){this.h=this.g=null}add(Kn,rr){const yr=nr.get();yr.set(Kn,rr),this.h?this.h.next=yr:this.g=yr,this.h=yr}}var nr=new Rn(()=>new sr,An=>An.reset());class sr{constructor(){this.next=this.g=this.h=null}set(Kn,rr){this.h=Kn,this.g=rr,this.next=null}reset(){this.next=this.g=this.h=null}}let lr,tr=!1,Jn=new Xn,ar=()=>{const An=mn.Promise.resolve(void 0);lr=()=>{An.then(gr)}};var gr=()=>{for(var An;An=Bn();){try{An.h.call(An.g)}catch(rr){Mn(rr)}var Kn=nr;Kn.j(An),100>Kn.h&&(Kn.h++,An.next=Kn.g,Kn.g=An)}tr=!1};function qn(){this.s=this.s,this.C=this.C}qn.prototype.s=!1,qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function On(An,Kn){this.type=An,this.g=this.target=Kn,this.defaultPrevented=!1}On.prototype.h=function(){this.defaultPrevented=!0};var Un=function(){if(!mn.addEventListener||!Object.defineProperty)return!1;var An=!1,Kn=Object.defineProperty({},"passive",{get:function(){An=!0}});try{const rr=()=>{};mn.addEventListener("test",rr,Kn),mn.removeEventListener("test",rr,Kn)}catch{}return An}();function Yn(An,Kn){if(On.call(this,An?An.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,An){var rr=this.type=An.type,yr=An.changedTouches&&An.changedTouches.length?An.changedTouches[0]:null;if(this.target=An.target||An.srcElement,this.g=Kn,Kn=An.relatedTarget){if(Fn){e:{try{$n(Kn.nodeName);var Yr=!0;break e}catch{}Yr=!1}Yr||(Kn=null)}}else rr=="mouseover"?Kn=An.fromElement:rr=="mouseout"&&(Kn=An.toElement);this.relatedTarget=Kn,yr?(this.clientX=yr.clientX!==void 0?yr.clientX:yr.pageX,this.clientY=yr.clientY!==void 0?yr.clientY:yr.pageY,this.screenX=yr.screenX||0,this.screenY=yr.screenY||0):(this.clientX=An.clientX!==void 0?An.clientX:An.pageX,this.clientY=An.clientY!==void 0?An.clientY:An.pageY,this.screenX=An.screenX||0,this.screenY=An.screenY||0),this.button=An.button,this.key=An.key||"",this.ctrlKey=An.ctrlKey,this.altKey=An.altKey,this.shiftKey=An.shiftKey,this.metaKey=An.metaKey,this.pointerId=An.pointerId||0,this.pointerType=typeof An.pointerType=="string"?An.pointerType:er[An.pointerType]||"",this.state=An.state,this.i=An,An.defaultPrevented&&Yn.aa.h.call(this)}}Pn(Yn,On);var er={2:"touch",3:"pen",4:"mouse"};Yn.prototype.h=function(){Yn.aa.h.call(this);var An=this.i;An.preventDefault?An.preventDefault():An.returnValue=!1};var Zn="closure_listenable_"+(1e6*Math.random()|0),ir=0;function fr(An,Kn,rr,yr,Yr){this.listener=An,this.proxy=null,this.src=Kn,this.type=rr,this.capture=!!yr,this.ha=Yr,this.key=++ir,this.da=this.fa=!1}function br(An){An.da=!0,An.listener=null,An.proxy=null,An.src=null,An.ha=null}function Tr(An){this.src=An,this.g={},this.h=0}Tr.prototype.add=function(An,Kn,rr,yr,Yr){var os=An.toString();An=this.g[os],An||(An=this.g[os]=[],this.h++);var bs=Mr(An,Kn,yr,Yr);return-1<bs?(Kn=An[bs],rr||(Kn.fa=!1)):(Kn=new fr(Kn,this.src,os,!!yr,Yr),Kn.fa=rr,An.push(Kn)),Kn};function Ir(An,Kn){var rr=Kn.type;if(rr in An.g){var yr=An.g[rr],Yr=Array.prototype.indexOf.call(yr,Kn,void 0),os;(os=0<=Yr)&&Array.prototype.splice.call(yr,Yr,1),os&&(br(Kn),An.g[rr].length==0&&(delete An.g[rr],An.h--))}}function Mr(An,Kn,rr,yr){for(var Yr=0;Yr<An.length;++Yr){var os=An[Yr];if(!os.da&&os.listener==Kn&&os.capture==!!rr&&os.ha==yr)return Yr}return-1}var qr="closure_lm_"+(1e6*Math.random()|0),Ar={};function or(An,Kn,rr,yr,Yr){if(Array.isArray(Kn)){for(var os=0;os<Kn.length;os++)or(An,Kn[os],rr,yr,Yr);return null}return rr=Nr(rr),An&&An[Zn]?An.K(Kn,rr,yn(yr)?!!yr.capture:!!yr,Yr):jr(An,Kn,rr,!1,yr,Yr)}function jr(An,Kn,rr,yr,Yr,os){if(!Kn)throw Error("Invalid event type");var bs=yn(Yr)?!!Yr.capture:!!Yr,Ws=Hr(An);if(Ws||(An[qr]=Ws=new Tr(An)),rr=Ws.add(Kn,rr,yr,bs,os),rr.proxy)return rr;if(yr=cr(),rr.proxy=yr,yr.src=An,yr.listener=rr,An.addEventListener)Un||(Yr=bs),Yr===void 0&&(Yr=!1),An.addEventListener(Kn.toString(),yr,Yr);else if(An.attachEvent)An.attachEvent(Pr(Kn.toString()),yr);else if(An.addListener&&An.removeListener)An.addListener(yr);else throw Error("addEventListener and attachEvent are unavailable.");return rr}function cr(){function An(rr){return Kn.call(An.src,An.listener,rr)}const Kn=kr;return An}function hr(An,Kn,rr,yr,Yr){if(Array.isArray(Kn))for(var os=0;os<Kn.length;os++)hr(An,Kn[os],rr,yr,Yr);else yr=yn(yr)?!!yr.capture:!!yr,rr=Nr(rr),An&&An[Zn]?(An=An.i,Kn=String(Kn).toString(),Kn in An.g&&(os=An.g[Kn],rr=Mr(os,rr,yr,Yr),-1<rr&&(br(os[rr]),Array.prototype.splice.call(os,rr,1),os.length==0&&(delete An.g[Kn],An.h--)))):An&&(An=Hr(An))&&(Kn=An.g[Kn.toString()],An=-1,Kn&&(An=Mr(Kn,rr,yr,Yr)),(rr=-1<An?Kn[An]:null)&&wr(rr))}function wr(An){if(typeof An!="number"&&An&&!An.da){var Kn=An.src;if(Kn&&Kn[Zn])Ir(Kn.i,An);else{var rr=An.type,yr=An.proxy;Kn.removeEventListener?Kn.removeEventListener(rr,yr,An.capture):Kn.detachEvent?Kn.detachEvent(Pr(rr),yr):Kn.addListener&&Kn.removeListener&&Kn.removeListener(yr),(rr=Hr(Kn))?(Ir(rr,An),rr.h==0&&(rr.src=null,Kn[qr]=null)):br(An)}}}function Pr(An){return An in Ar?Ar[An]:Ar[An]="on"+An}function kr(An,Kn){if(An.da)An=!0;else{Kn=new Yn(Kn,this);var rr=An.listener,yr=An.ha||An.src;An.fa&&wr(An),An=rr.call(yr,Kn)}return An}function Hr(An){return An=An[qr],An instanceof Tr?An:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nr(An){return typeof An=="function"?An:(An[Kr]||(An[Kr]=function(Kn){return An.handleEvent(Kn)}),An[Kr])}function ns(){qn.call(this),this.i=new Tr(this),this.M=this,this.F=null}Pn(ns,qn),ns.prototype[Zn]=!0,ns.prototype.removeEventListener=function(An,Kn,rr,yr){hr(this,An,Kn,rr,yr)};function ts(An,Kn){var rr,yr=An.F;if(yr)for(rr=[];yr;yr=yr.F)rr.push(yr);if(An=An.M,yr=Kn.type||Kn,typeof Kn=="string")Kn=new On(Kn,An);else if(Kn instanceof On)Kn.target=Kn.target||An;else{var Yr=Kn;Kn=new On(yr,An),zn(Kn,Yr)}if(Yr=!0,rr)for(var os=rr.length-1;0<=os;os--){var bs=Kn.g=rr[os];Yr=Ps(bs,yr,!0,Kn)&&Yr}if(bs=Kn.g=An,Yr=Ps(bs,yr,!0,Kn)&&Yr,Yr=Ps(bs,yr,!1,Kn)&&Yr,rr)for(os=0;os<rr.length;os++)bs=Kn.g=rr[os],Yr=Ps(bs,yr,!1,Kn)&&Yr}ns.prototype.N=function(){if(ns.aa.N.call(this),this.i){var An=this.i,Kn;for(Kn in An.g){for(var rr=An.g[Kn],yr=0;yr<rr.length;yr++)br(rr[yr]);delete An.g[Kn],An.h--}}this.F=null},ns.prototype.K=function(An,Kn,rr,yr){return this.i.add(String(An),Kn,!1,rr,yr)},ns.prototype.L=function(An,Kn,rr,yr){return this.i.add(String(An),Kn,!0,rr,yr)};function Ps(An,Kn,rr,yr){if(Kn=An.i.g[String(Kn)],!Kn)return!0;Kn=Kn.concat();for(var Yr=!0,os=0;os<Kn.length;++os){var bs=Kn[os];if(bs&&!bs.da&&bs.capture==rr){var Ws=bs.listener,Ys=bs.ha||bs.src;bs.fa&&Ir(An.i,bs),Yr=Ws.call(Ys,yr)!==!1&&Yr}}return Yr&&!yr.defaultPrevented}function ps(An,Kn,rr){if(typeof An=="function")rr&&(An=bn(An,rr));else if(An&&typeof An.handleEvent=="function")An=bn(An.handleEvent,An);else throw Error("Invalid listener argument");return 2147483647<Number(Kn)?-1:mn.setTimeout(An,Kn||0)}function Cs(An){An.g=ps(()=>{An.g=null,An.i&&(An.i=!1,Cs(An))},An.l);const Kn=An.h;An.h=null,An.m.apply(null,Kn)}class as extends qn{constructor(Kn,rr){super(),this.m=Kn,this.l=rr,this.h=null,this.i=!1,this.g=null}j(Kn){this.h=arguments,this.g?this.i=!0:Cs(this)}N(){super.N(),this.g&&(mn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(An){qn.call(this),this.h=An,this.g={}}Pn(Ss,qn);var js=[];function Bs(An){Gn(An.g,function(Kn,rr){this.g.hasOwnProperty(rr)&&wr(Kn)},An),An.g={}}Ss.prototype.N=function(){Ss.aa.N.call(this),Bs(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var es=mn.JSON.stringify,Vr=mn.JSON.parse,Wr=class{stringify(An){return mn.JSON.stringify(An,void 0)}parse(An){return mn.JSON.parse(An,void 0)}};function is(){}is.prototype.h=null;function ks(An){return An.h||(An.h=An.i())}function ws(){}var Rr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zr(){On.call(this,"d")}Pn(Zr,On);function ds(){On.call(this,"c")}Pn(ds,On);var fs={},vs=null;function Ts(){return vs=vs||new ns}fs.La="serverreachability";function Er(An){On.call(this,fs.La,An)}Pn(Er,On);function vr(An){const Kn=Ts();ts(Kn,new Er(Kn))}fs.STAT_EVENT="statevent";function Lr(An,Kn){On.call(this,fs.STAT_EVENT,An),this.stat=Kn}Pn(Lr,On);function Dr(An){const Kn=Ts();ts(Kn,new Lr(Kn,An))}fs.Ma="timingevent";function Jr(An,Kn){On.call(this,fs.Ma,An),this.size=Kn}Pn(Jr,On);function ls(An,Kn){if(typeof An!="function")throw Error("Fn must not be null and must be a function");return mn.setTimeout(function(){An()},Kn)}function cs(){this.g=!0}cs.prototype.xa=function(){this.g=!1};function Rs(An,Kn,rr,yr,Yr,os){An.info(function(){if(An.g)if(os)for(var bs="",Ws=os.split("&"),Ys=0;Ys<Ws.length;Ys++){var Gs=Ws[Ys].split("=");if(1<Gs.length){var to=Gs[0];Gs=Gs[1];var ao=to.split("_");bs=2<=ao.length&&ao[1]=="type"?bs+(to+"="+Gs+"&"):bs+(to+"=redacted&")}}else bs=null;else bs=os;return"XMLHTTP REQ ("+yr+") [attempt "+Yr+"]: "+Kn+`
`+rr+`
`+bs})}function As(An,Kn,rr,yr,Yr,os,bs){An.info(function(){return"XMLHTTP RESP ("+yr+") [ attempt "+Yr+"]: "+Kn+`
`+rr+`
`+os+" "+bs})}function gs(An,Kn,rr,yr){An.info(function(){return"XMLHTTP TEXT ("+Kn+"): "+Ns(An,rr)+(yr?" "+yr:"")})}function $s(An,Kn){An.info(function(){return"TIMEOUT: "+Kn})}cs.prototype.info=function(){};function Ns(An,Kn){if(!An.g)return Kn;if(!Kn)return null;try{var rr=JSON.parse(Kn);if(rr){for(An=0;An<rr.length;An++)if(Array.isArray(rr[An])){var yr=rr[An];if(!(2>yr.length)){var Yr=yr[1];if(Array.isArray(Yr)&&!(1>Yr.length)){var os=Yr[0];if(os!="noop"&&os!="stop"&&os!="close")for(var bs=1;bs<Yr.length;bs++)Yr[bs]=""}}}}return es(rr)}catch{return Kn}}var Is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Os={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vs;function Us(){}Pn(Us,is),Us.prototype.g=function(){return new XMLHttpRequest},Us.prototype.i=function(){return{}},Vs=new Us;function zs(An,Kn,rr,yr){this.j=An,this.i=Kn,this.l=rr,this.R=yr||1,this.U=new Ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zs}function Zs(){this.i=null,this.g="",this.h=!1}var Qs={},vo={};function bo(An,Kn,rr){An.L=1,An.v=Jl(Lo(Kn)),An.m=rr,An.P=!0,Ro(An,null)}function Ro(An,Kn){An.F=Date.now(),hu(An),An.A=Lo(An.v);var rr=An.A,yr=An.R;Array.isArray(yr)||(yr=[String(yr)]),Hs(rr.i,"t",yr),An.C=0,rr=An.j.J,An.h=new Zs,An.g=ur(An.j,rr?Kn:null,!An.m),0<An.O&&(An.M=new as(bn(An.Y,An,An.g),An.O)),Kn=An.U,rr=An.g,yr=An.ca;var Yr="readystatechange";Array.isArray(Yr)||(Yr&&(js[0]=Yr.toString()),Yr=js);for(var os=0;os<Yr.length;os++){var bs=or(rr,Yr[os],yr||Kn.handleEvent,!1,Kn.h||Kn);if(!bs)break;Kn.g[bs.key]=bs}Kn=An.H?Nn(An.H):{},An.m?(An.u||(An.u="POST"),Kn["Content-Type"]="application/x-www-form-urlencoded",An.g.ea(An.A,An.u,An.m,Kn)):(An.u="GET",An.g.ea(An.A,An.u,null,Kn)),vr(),Rs(An.i,An.u,An.A,An.l,An.R,An.m)}zs.prototype.ca=function(An){An=An.target;const Kn=this.M;Kn&&wo(An)==3?Kn.j():this.Y(An)},zs.prototype.Y=function(An){try{if(An==this.g)e:{const ao=wo(this.g);var Kn=this.g.Ba();const Il=this.g.Z();if(!(3>ao)&&(ao!=3||this.g&&(this.h.h||this.g.oa()||Ap(this.g)))){this.J||ao!=4||Kn==7||(Kn==8||0>=Il?vr(3):vr(2)),Ml(this);var rr=this.g.Z();this.X=rr;t:if(Qo(this)){var yr=Ap(this.g);An="";var Yr=yr.length,os=wo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){El(this),Dl(this);var bs="";break t}this.h.i=new mn.TextDecoder}for(Kn=0;Kn<Yr;Kn++)this.h.h=!0,An+=this.h.i.decode(yr[Kn],{stream:!(os&&Kn==Yr-1)});yr.length=0,this.h.g+=An,this.C=0,bs=this.h.g}else bs=this.g.oa();if(this.o=rr==200,As(this.i,this.u,this.A,this.l,this.R,ao,rr),this.o){if(this.T&&!this.K){t:{if(this.g){var Ws,Ys=this.g;if((Ws=Ys.g?Ys.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sn(Ws)){var Gs=Ws;break t}}Gs=null}if(rr=Gs)gs(this.i,this.l,rr,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yl(this,rr);else{this.o=!1,this.s=3,Dr(12),El(this),Dl(this);break e}}if(this.P){rr=!0;let Io;for(;!this.J&&this.C<bs.length;)if(Io=mp(this,bs),Io==vo){ao==4&&(this.s=4,Dr(14),rr=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Io==Qs){this.s=4,Dr(15),gs(this.i,this.l,bs,"[Invalid Chunk]"),rr=!1;break}else gs(this.i,this.l,Io,null),Yl(this,Io);if(Qo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ao!=4||bs.length!=0||this.h.h||(this.s=1,Dr(16),rr=!1),this.o=this.o&&rr,!rr)gs(this.i,this.l,bs,"[Invalid Chunked Response]"),El(this),Dl(this);else if(0<bs.length&&!this.W){this.W=!0;var to=this.j;to.g==this&&to.ba&&!to.M&&(to.j.info("Great, no buffering proxy detected. Bytes received: "+bs.length),Tu(to),to.M=!0,Dr(11))}}else gs(this.i,this.l,bs,null),Yl(this,bs);ao==4&&El(this),this.o&&!this.J&&(ao==4?Bl(this.j,this):(this.o=!1,hu(this)))}else Vl(this.g),rr==400&&0<bs.indexOf("Unknown SID")?(this.s=3,Dr(12)):(this.s=0,Dr(13)),El(this),Dl(this)}}}catch{}finally{}};function Qo(An){return An.g?An.u=="GET"&&An.L!=2&&An.j.Ca:!1}function mp(An,Kn){var rr=An.C,yr=Kn.indexOf(`
`,rr);return yr==-1?vo:(rr=Number(Kn.substring(rr,yr)),isNaN(rr)?Qs:(yr+=1,yr+rr>Kn.length?vo:(Kn=Kn.slice(yr,yr+rr),An.C=yr+rr,Kn)))}zs.prototype.cancel=function(){this.J=!0,El(this)};function hu(An){An.S=Date.now()+An.I,gp(An,An.I)}function gp(An,Kn){if(An.B!=null)throw Error("WatchDog timer not null");An.B=ls(bn(An.ba,An),Kn)}function Ml(An){An.B&&(mn.clearTimeout(An.B),An.B=null)}zs.prototype.ba=function(){this.B=null;const An=Date.now();0<=An-this.S?($s(this.i,this.A),this.L!=2&&(vr(),Dr(17)),El(this),this.s=2,Dl(this)):gp(this,this.S-An)};function Dl(An){An.j.G==0||An.J||Bl(An.j,An)}function El(An){Ml(An);var Kn=An.M;Kn&&typeof Kn.ma=="function"&&Kn.ma(),An.M=null,Bs(An.U),An.g&&(Kn=An.g,An.g=null,Kn.abort(),Kn.ma())}function Yl(An,Kn){try{var rr=An.j;if(rr.G!=0&&(rr.g==An||Ku(rr.h,An))){if(!An.K&&Ku(rr.h,An)&&rr.G==3){try{var yr=rr.Da.g.parse(Kn)}catch{yr=null}if(Array.isArray(yr)&&yr.length==3){var Yr=yr;if(Yr[0]==0){e:if(!rr.u){if(rr.g)if(rr.g.F+3e3<An.F)Pl(rr),bu(rr);else break e;nu(rr),Dr(18)}}else rr.za=Yr[1],0<rr.za-rr.T&&37500>Yr[2]&&rr.F&&rr.v==0&&!rr.C&&(rr.C=ls(bn(rr.Za,rr),6e3));if(1>=Xl(rr.h)&&rr.ca){try{rr.ca()}catch{}rr.ca=void 0}}else jo(rr,11)}else if((An.K||rr.g==An)&&Pl(rr),!Sn(Kn))for(Yr=rr.Da.g.parse(Kn),Kn=0;Kn<Yr.length;Kn++){let Gs=Yr[Kn];if(rr.T=Gs[0],Gs=Gs[1],rr.G==2)if(Gs[0]=="c"){rr.K=Gs[1],rr.ia=Gs[2];const to=Gs[3];to!=null&&(rr.la=to,rr.j.info("VER="+rr.la));const ao=Gs[4];ao!=null&&(rr.Aa=ao,rr.j.info("SVER="+rr.Aa));const Il=Gs[5];Il!=null&&typeof Il=="number"&&0<Il&&(yr=1.5*Il,rr.L=yr,rr.j.info("backChannelRequestTimeoutMs_="+yr)),yr=rr;const Io=An.g;if(Io){const Ul=Io.g?Io.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ul){var os=yr.h;os.g||Ul.indexOf("spdy")==-1&&Ul.indexOf("quic")==-1&&Ul.indexOf("h2")==-1||(os.j=os.l,os.g=new Set,os.h&&(ho(os,os.h),os.h=null))}if(yr.D){const zl=Io.g?Io.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(yr.ya=zl,no(yr.I,yr.D,zl))}}rr.G=3,rr.l&&rr.l.ua(),rr.ba&&(rr.R=Date.now()-An.F,rr.j.info("Handshake RTT: "+rr.R+"ms")),yr=rr;var bs=An;if(yr.qa=Vn(yr,yr.J?yr.ia:null,yr.W),bs.K){Yu(yr.h,bs);var Ws=bs,Ys=yr.L;Ys&&(Ws.I=Ys),Ws.B&&(Ml(Ws),hu(Ws)),yr.g=bs}else Ru(yr);0<rr.i.length&&wu(rr)}else Gs[0]!="stop"&&Gs[0]!="close"||jo(rr,7);else rr.G==3&&(Gs[0]=="stop"||Gs[0]=="close"?Gs[0]=="stop"?jo(rr,7):Sl(rr):Gs[0]!="noop"&&rr.l&&rr.l.ta(Gs),rr.v=0)}}vr(4)}catch{}}var Zp=class{constructor(An,Kn){this.g=An,this.map=Kn}};function Gu(An){this.l=An||10,mn.PerformanceNavigationTiming?(An=mn.performance.getEntriesByType("navigation"),An=0<An.length&&(An[0].nextHopProtocol=="hq"||An[0].nextHopProtocol=="h2")):An=!!(mn.chrome&&mn.chrome.loadTimes&&mn.chrome.loadTimes()&&mn.chrome.loadTimes().wasFetchedViaSpdy),this.j=An?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yp(An){return An.h?!0:An.g?An.g.size>=An.j:!1}function Xl(An){return An.h?1:An.g?An.g.size:0}function Ku(An,Kn){return An.h?An.h==Kn:An.g?An.g.has(Kn):!1}function ho(An,Kn){An.g?An.g.add(Kn):An.h=Kn}function Yu(An,Kn){An.h&&An.h==Kn?An.h=null:An.g&&An.g.has(Kn)&&An.g.delete(Kn)}Gu.prototype.cancel=function(){if(this.i=Xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const An of this.g.values())An.cancel();this.g.clear()}};function Xu(An){if(An.h!=null)return An.i.concat(An.h.D);if(An.g!=null&&An.g.size!==0){let Kn=An.i;for(const rr of An.g.values())Kn=Kn.concat(rr.D);return Kn}return Tn(An.i)}function xp(An){if(An.V&&typeof An.V=="function")return An.V();if(typeof Map<"u"&&An instanceof Map||typeof Set<"u"&&An instanceof Set)return Array.from(An.values());if(typeof An=="string")return An.split("");if(gn(An)){for(var Kn=[],rr=An.length,yr=0;yr<rr;yr++)Kn.push(An[yr]);return Kn}Kn=[],rr=0;for(yr in An)Kn[rr++]=An[yr];return Kn}function Qu(An){if(An.na&&typeof An.na=="function")return An.na();if(!An.V||typeof An.V!="function"){if(typeof Map<"u"&&An instanceof Map)return Array.from(An.keys());if(!(typeof Set<"u"&&An instanceof Set)){if(gn(An)||typeof An=="string"){var Kn=[];An=An.length;for(var rr=0;rr<An;rr++)Kn.push(rr);return Kn}Kn=[],rr=0;for(const yr in An)Kn[rr++]=yr;return Kn}}}function vp(An,Kn){if(An.forEach&&typeof An.forEach=="function")An.forEach(Kn,void 0);else if(gn(An)||typeof An=="string")Array.prototype.forEach.call(An,Kn,void 0);else for(var rr=Qu(An),yr=xp(An),Yr=yr.length,os=0;os<Yr;os++)Kn.call(void 0,yr[os],rr&&rr[os],An)}var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fu(An,Kn){if(An){An=An.split("&");for(var rr=0;rr<An.length;rr++){var yr=An[rr].indexOf("="),Yr=null;if(0<=yr){var os=An[rr].substring(0,yr);Yr=An[rr].substring(yr+1)}else os=An[rr];Kn(os,Yr?decodeURIComponent(Yr.replace(/\+/g," ")):"")}}}function po(An){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,An instanceof po){this.h=An.h,Ql(this,An.j),this.o=An.o,this.g=An.g,pu(this,An.s),this.l=An.l;var Kn=An.i,rr=new Ol;rr.i=Kn.i,Kn.g&&(rr.g=new Map(Kn.g),rr.h=Kn.h),Ju(this,rr),this.m=An.m}else An&&(Kn=String(An).match(Vo))?(this.h=!1,Ql(this,Kn[1]||"",!0),this.o=Zl(Kn[2]||""),this.g=Zl(Kn[3]||"",!0),pu(this,Kn[4]),this.l=Zl(Kn[5]||"",!0),Ju(this,Kn[6]||"",!0),this.m=Zl(Kn[7]||"")):(this.h=!1,this.i=new Ol(null,this.h))}po.prototype.toString=function(){var An=[],Kn=this.j;Kn&&An.push(wl(Kn,_p,!0),":");var rr=this.g;return(rr||Kn=="file")&&(An.push("//"),(Kn=this.o)&&An.push(wl(Kn,_p,!0),"@"),An.push(encodeURIComponent(String(rr)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),rr=this.s,rr!=null&&An.push(":",String(rr))),(rr=this.l)&&(this.g&&rr.charAt(0)!="/"&&An.push("/"),An.push(wl(rr,rr.charAt(0)=="/"?Al:tm,!0))),(rr=this.i.toString())&&An.push("?",rr),(rr=this.m)&&An.push("#",wl(rr,gu)),An.join("")};function Lo(An){return new po(An)}function Ql(An,Kn,rr){An.j=rr?Zl(Kn,!0):Kn,An.j&&(An.j=An.j.replace(/:$/,""))}function pu(An,Kn){if(Kn){if(Kn=Number(Kn),isNaN(Kn)||0>Kn)throw Error("Bad port number "+Kn);An.s=Kn}else An.s=null}function Ju(An,Kn,rr){Kn instanceof Ol?(An.i=Kn,nm(An.i,An.h)):(rr||(Kn=wl(Kn,mu)),An.i=new Ol(Kn,An.h))}function no(An,Kn,rr){An.i.set(Kn,rr)}function Jl(An){return no(An,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),An}function Zl(An,Kn){return An?Kn?decodeURI(An.replace(/%25/g,"%2525")):decodeURIComponent(An):""}function wl(An,Kn,rr){return typeof An=="string"?(An=encodeURI(An).replace(Kn,em),rr&&(An=An.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),An):null}function em(An){return An=An.charCodeAt(0),"%"+(An>>4&15).toString(16)+(An&15).toString(16)}var _p=/[#\/\?@]/g,tm=/[#\?:]/g,Al=/[#\?]/g,mu=/[#\?@]/g,gu=/#/g;function Ol(An,Kn){this.h=this.g=null,this.i=An||null,this.j=!!Kn}function fo(An){An.g||(An.g=new Map,An.h=0,An.i&&fu(An.i,function(Kn,rr){An.add(decodeURIComponent(Kn.replace(/\+/g," ")),rr)}))}_e=Ol.prototype,_e.add=function(An,Kn){fo(this),this.i=null,An=Fl(this,An);var rr=this.g.get(An);return rr||this.g.set(An,rr=[]),rr.push(Kn),this.h+=1,this};function Ep(An,Kn){fo(An),Kn=Fl(An,Kn),An.g.has(Kn)&&(An.i=null,An.h-=An.g.get(Kn).length,An.g.delete(Kn))}function Zu(An,Kn){return fo(An),Kn=Fl(An,Kn),An.g.has(Kn)}_e.forEach=function(An,Kn){fo(this),this.g.forEach(function(rr,yr){rr.forEach(function(Yr){An.call(Kn,Yr,yr,this)},this)},this)},_e.na=function(){fo(this);const An=Array.from(this.g.values()),Kn=Array.from(this.g.keys()),rr=[];for(let yr=0;yr<Kn.length;yr++){const Yr=An[yr];for(let os=0;os<Yr.length;os++)rr.push(Kn[yr])}return rr},_e.V=function(An){fo(this);let Kn=[];if(typeof An=="string")Zu(this,An)&&(Kn=Kn.concat(this.g.get(Fl(this,An))));else{An=Array.from(this.g.values());for(let rr=0;rr<An.length;rr++)Kn=Kn.concat(An[rr])}return Kn},_e.set=function(An,Kn){return fo(this),this.i=null,An=Fl(this,An),Zu(this,An)&&(this.h-=this.g.get(An).length),this.g.set(An,[Kn]),this.h+=1,this},_e.get=function(An,Kn){return An?(An=this.V(An),0<An.length?String(An[0]):Kn):Kn};function Hs(An,Kn,rr){Ep(An,Kn),0<rr.length&&(An.i=null,An.g.set(Fl(An,Kn),Tn(rr)),An.h+=rr.length)}_e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const An=[],Kn=Array.from(this.g.keys());for(var rr=0;rr<Kn.length;rr++){var yr=Kn[rr];const os=encodeURIComponent(String(yr)),bs=this.V(yr);for(yr=0;yr<bs.length;yr++){var Yr=os;bs[yr]!==""&&(Yr+="="+encodeURIComponent(String(bs[yr]))),An.push(Yr)}}return this.i=An.join("&")};function Fl(An,Kn){return Kn=String(Kn),An.j&&(Kn=Kn.toLowerCase()),Kn}function nm(An,Kn){Kn&&!An.j&&(fo(An),An.i=null,An.g.forEach(function(rr,yr){var Yr=yr.toLowerCase();yr!=Yr&&(Ep(this,yr),Hs(this,Yr,rr))},An)),An.j=Kn}function Jo(An,Kn){const rr=new cs;if(mn.Image){const yr=new Image;yr.onload=vn(qo,rr,"TestLoadImage: loaded",!0,Kn,yr),yr.onerror=vn(qo,rr,"TestLoadImage: error",!1,Kn,yr),yr.onabort=vn(qo,rr,"TestLoadImage: abort",!1,Kn,yr),yr.ontimeout=vn(qo,rr,"TestLoadImage: timeout",!1,Kn,yr),mn.setTimeout(function(){yr.ontimeout&&yr.ontimeout()},1e4),yr.src=An}else Kn(!1)}function bp(An,Kn){const rr=new cs,yr=new AbortController,Yr=setTimeout(()=>{yr.abort(),qo(rr,"TestPingServer: timeout",!1,Kn)},1e4);fetch(An,{signal:yr.signal}).then(os=>{clearTimeout(Yr),os.ok?qo(rr,"TestPingServer: ok",!0,Kn):qo(rr,"TestPingServer: server error",!1,Kn)}).catch(()=>{clearTimeout(Yr),qo(rr,"TestPingServer: error",!1,Kn)})}function qo(An,Kn,rr,yr,Yr){try{Yr&&(Yr.onload=null,Yr.onerror=null,Yr.onabort=null,Yr.ontimeout=null),yr(rr)}catch{}}function yu(){this.g=new Wr}function _d(An,Kn,rr){const yr=rr||"";try{vp(An,function(Yr,os){let bs=Yr;yn(Yr)&&(bs=es(Yr)),Kn.push(yr+os+"="+encodeURIComponent(bs))})}catch(Yr){throw Kn.push(yr+"type="+encodeURIComponent("_badmap")),Yr}}function xu(An){this.l=An.Ub||null,this.j=An.eb||!1}Pn(xu,is),xu.prototype.g=function(){return new vu(this.l,this.j)},xu.prototype.i=function(An){return function(){return An}}({});function vu(An,Kn){ns.call(this),this.D=An,this.o=Kn,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Pn(vu,ns),_e=vu.prototype,_e.open=function(An,Kn){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=An,this.A=Kn,this.readyState=1,Ho(this)},_e.send=function(An){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Kn={headers:this.u,method:this.B,credentials:this.m,cache:void 0};An&&(Kn.body=An),(this.D||mn).fetch(new Request(this.A,Kn)).then(this.Sa.bind(this),this.ga.bind(this))},_e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rl(this)),this.readyState=0},_e.Sa=function(An){if(this.g&&(this.l=An,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=An.headers,this.readyState=2,Ho(this)),this.g&&(this.readyState=3,Ho(this),this.g)))if(this.responseType==="arraybuffer")An.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof mn.ReadableStream<"u"&&"body"in An){if(this.j=An.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wp(this)}else An.text().then(this.Ra.bind(this),this.ga.bind(this))};function wp(An){An.j.read().then(An.Pa.bind(An)).catch(An.ga.bind(An))}_e.Pa=function(An){if(this.g){if(this.o&&An.value)this.response.push(An.value);else if(!this.o){var Kn=An.value?An.value:new Uint8Array(0);(Kn=this.v.decode(Kn,{stream:!An.done}))&&(this.response=this.responseText+=Kn)}An.done?Rl(this):Ho(this),this.readyState==3&&wp(this)}},_e.Ra=function(An){this.g&&(this.response=this.responseText=An,Rl(this))},_e.Qa=function(An){this.g&&(this.response=An,Rl(this))},_e.ga=function(){this.g&&Rl(this)};function Rl(An){An.readyState=4,An.l=null,An.j=null,An.v=null,Ho(An)}_e.setRequestHeader=function(An,Kn){this.u.append(An,Kn)},_e.getResponseHeader=function(An){return this.h&&this.h.get(An.toLowerCase())||""},_e.getAllResponseHeaders=function(){if(!this.h)return"";const An=[],Kn=this.h.entries();for(var rr=Kn.next();!rr.done;)rr=rr.value,An.push(rr[0]+": "+rr[1]),rr=Kn.next();return An.join(`\r
`)};function Ho(An){An.onreadystatechange&&An.onreadystatechange.call(An)}Object.defineProperty(vu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(An){this.m=An?"include":"same-origin"}});function Tl(An){let Kn="";return Gn(An,function(rr,yr){Kn+=yr,Kn+=":",Kn+=rr,Kn+=`\r
`}),Kn}function _h(An,Kn,rr){e:{for(yr in rr){var yr=!1;break e}yr=!0}yr||(rr=Tl(rr),typeof An=="string"?rr!=null&&encodeURIComponent(String(rr)):no(An,Kn,rr))}function eo(An){ns.call(this),this.headers=new Map,this.o=An||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Pn(eo,ns);var _f=/^https?$/i,_u=["POST","PUT"];_e=eo.prototype,_e.Ha=function(An){this.J=An},_e.ea=function(An,Kn,rr,yr){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+An);Kn=Kn?Kn.toUpperCase():"GET",this.D=An,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vs.g(),this.v=this.o?ks(this.o):ks(Vs),this.g.onreadystatechange=bn(this.Ea,this);try{this.B=!0,this.g.open(Kn,String(An),!0),this.B=!1}catch(os){ep(this,os);return}if(An=rr||"",rr=new Map(this.headers),yr)if(Object.getPrototypeOf(yr)===Object.prototype)for(var Yr in yr)rr.set(Yr,yr[Yr]);else if(typeof yr.keys=="function"&&typeof yr.get=="function")for(const os of yr.keys())rr.set(os,yr.get(os));else throw Error("Unknown input type for opt_headers: "+String(yr));yr=Array.from(rr.keys()).find(os=>os.toLowerCase()=="content-type"),Yr=mn.FormData&&An instanceof mn.FormData,!(0<=Array.prototype.indexOf.call(_u,Kn,void 0))||yr||Yr||rr.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[os,bs]of rr)this.g.setRequestHeader(os,bs);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wo(this),this.u=!0,this.g.send(An),this.u=!1}catch(os){ep(this,os)}};function ep(An,Kn){An.h=!1,An.g&&(An.j=!0,An.g.abort(),An.j=!1),An.l=Kn,An.m=5,tp(An),_c(An)}function tp(An){An.A||(An.A=!0,ts(An,"complete"),ts(An,"error"))}_e.abort=function(An){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=An||7,ts(this,"complete"),ts(this,"abort"),_c(this))},_e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_c(this,!0)),eo.aa.N.call(this)},_e.Ea=function(){this.s||(this.B||this.u||this.j?np(this):this.bb())},_e.bb=function(){np(this)};function np(An){if(An.h&&typeof pn<"u"&&(!An.v[1]||wo(An)!=4||An.Z()!=2)){if(An.u&&wo(An)==4)ps(An.Ea,0,An);else if(ts(An,"readystatechange"),wo(An)==4){An.h=!1;try{const bs=An.Z();e:switch(bs){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Kn=!0;break e;default:Kn=!1}var rr;if(!(rr=Kn)){var yr;if(yr=bs===0){var Yr=String(An.D).match(Vo)[1]||null;!Yr&&mn.self&&mn.self.location&&(Yr=mn.self.location.protocol.slice(0,-1)),yr=!_f.test(Yr?Yr.toLowerCase():"")}rr=yr}if(rr)ts(An,"complete"),ts(An,"success");else{An.m=6;try{var os=2<wo(An)?An.g.statusText:""}catch{os=""}An.l=os+" ["+An.Z()+"]",tp(An)}}finally{_c(An)}}}}function _c(An,Kn){if(An.g){Wo(An);const rr=An.g,yr=An.v[0]?()=>{}:null;An.g=null,An.v=null,Kn||ts(An,"ready");try{rr.onreadystatechange=yr}catch{}}}function Wo(An){An.I&&(mn.clearTimeout(An.I),An.I=null)}_e.isActive=function(){return!!this.g};function wo(An){return An.g?An.g.readyState:0}_e.Z=function(){try{return 2<wo(this)?this.g.status:-1}catch{return-1}},_e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},_e.Oa=function(An){if(this.g){var Kn=this.g.responseText;return An&&Kn.indexOf(An)==0&&(Kn=Kn.substring(An.length)),Vr(Kn)}};function Ap(An){try{if(!An.g)return null;if("response"in An.g)return An.g.response;switch(An.H){case"":case"text":return An.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in An.g)return An.g.mozResponseArrayBuffer}return null}catch{return null}}function Vl(An){const Kn={};An=(An.g&&2<=wo(An)&&An.g.getAllResponseHeaders()||"").split(`\r
`);for(let yr=0;yr<An.length;yr++){if(Sn(An[yr]))continue;var rr=Cn(An[yr]);const Yr=rr[0];if(rr=rr[1],typeof rr!="string")continue;rr=rr.trim();const os=Kn[Yr]||[];Kn[Yr]=os,os.push(rr)}kn(Kn,function(yr){return yr.join(", ")})}_e.Ba=function(){return this.m},_e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(An,Kn,rr){return rr&&rr.internalChannelParams&&rr.internalChannelParams[An]||Kn}function Eu(An){this.Aa=0,this.i=[],this.j=new cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,An),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,An),this.cb=Po("retryDelaySeedMs",1e4,An),this.Wa=Po("forwardChannelMaxRetries",2,An),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,An),this.pa=An&&An.xmlHttpFactory||void 0,this.Xa=An&&An.Tb||void 0,this.Ca=An&&An.useFetchStreams||!1,this.L=void 0,this.J=An&&An.supportsCrossDomainXhr||!1,this.K="",this.h=new Gu(An&&An.concurrentRequestLimit),this.Da=new yu,this.P=An&&An.fastHandshake||!1,this.O=An&&An.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=An&&An.Rb||!1,An&&An.xa&&this.j.xa(),An&&An.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&An&&An.detectBufferingProxy||!1,this.ja=void 0,An&&An.longPollingTimeout&&0<An.longPollingTimeout&&(this.ja=An.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}_e=Eu.prototype,_e.la=8,_e.G=1,_e.connect=function(An,Kn,rr,yr){Dr(0),this.W=An,this.H=Kn||{},rr&&yr!==void 0&&(this.H.OSID=rr,this.H.OAID=yr),this.F=this.X,this.I=Vn(this,null,this.W),wu(this)};function Sl(An){if(eu(An),An.G==3){var Kn=An.U++,rr=Lo(An.I);if(no(rr,"SID",An.K),no(rr,"RID",Kn),no(rr,"TYPE","terminate"),$l(An,rr),Kn=new zs(An,An.j,Kn),Kn.L=2,Kn.v=Jl(Lo(rr)),rr=!1,mn.navigator&&mn.navigator.sendBeacon)try{rr=mn.navigator.sendBeacon(Kn.v.toString(),"")}catch{}!rr&&mn.Image&&(new Image().src=Kn.v,rr=!0),rr||(Kn.g=ur(Kn.j,null),Kn.g.ea(Kn.v)),Kn.F=Date.now(),hu(Kn)}Pu(An)}function bu(An){An.g&&(Tu(An),An.g.cancel(),An.g=null)}function eu(An){bu(An),An.u&&(mn.clearTimeout(An.u),An.u=null),Pl(An),An.h.cancel(),An.s&&(typeof An.s=="number"&&mn.clearTimeout(An.s),An.s=null)}function wu(An){if(!yp(An.h)&&!An.s){An.s=!0;var Kn=An.Ga;lr||ar(),tr||(lr(),tr=!0),Jn.add(Kn,An),An.B=0}}function rp(An,Kn){return Xl(An.h)>=An.h.j-(An.s?1:0)?!1:An.s?(An.i=Kn.D.concat(An.i),!0):An.G==1||An.G==2||An.B>=(An.Va?0:An.Wa)?!1:(An.s=ls(bn(An.Ga,An,Kn),Su(An,An.B)),An.B++,!0)}_e.Ga=function(An){if(this.s)if(this.s=null,this.G==1){if(!An){this.U=Math.floor(1e5*Math.random()),An=this.U++;const Yr=new zs(this,this.j,An);let os=this.o;if(this.S&&(os?(os=Nn(os),zn(os,this.S)):os=this.S),this.m!==null||this.O||(Yr.H=os,os=null),this.P)e:{for(var Kn=0,rr=0;rr<this.i.length;rr++){t:{var yr=this.i[rr];if("__data__"in yr.map&&(yr=yr.map.__data__,typeof yr=="string")){yr=yr.length;break t}yr=void 0}if(yr===void 0)break;if(Kn+=yr,4096<Kn){Kn=rr;break e}if(Kn===4096||rr===this.i.length-1){Kn=rr+1;break e}}Kn=1e3}else Kn=1e3;Kn=tu(this,Yr,Kn),rr=Lo(this.I),no(rr,"RID",An),no(rr,"CVER",22),this.D&&no(rr,"X-HTTP-Session-Id",this.D),$l(this,rr),os&&(this.O?Kn="headers="+encodeURIComponent(String(Tl(os)))+"&"+Kn:this.m&&_h(rr,this.m,os)),ho(this.h,Yr),this.Ua&&no(rr,"TYPE","init"),this.P?(no(rr,"$req",Kn),no(rr,"SID","null"),Yr.T=!0,bo(Yr,rr,null)):bo(Yr,rr,Kn),this.G=2}}else this.G==3&&(An?Au(this,An):this.i.length==0||yp(this.h)||Au(this))};function Au(An,Kn){var rr;Kn?rr=Kn.l:rr=An.U++;const yr=Lo(An.I);no(yr,"SID",An.K),no(yr,"RID",rr),no(yr,"AID",An.T),$l(An,yr),An.m&&An.o&&_h(yr,An.m,An.o),rr=new zs(An,An.j,rr,An.B+1),An.m===null&&(rr.H=An.o),Kn&&(An.i=Kn.D.concat(An.i)),Kn=tu(An,rr,1e3),rr.I=Math.round(.5*An.wa)+Math.round(.5*An.wa*Math.random()),ho(An.h,rr),bo(rr,yr,Kn)}function $l(An,Kn){An.H&&Gn(An.H,function(rr,yr){no(Kn,yr,rr)}),An.l&&vp({},function(rr,yr){no(Kn,yr,rr)})}function tu(An,Kn,rr){rr=Math.min(An.i.length,rr);var yr=An.l?bn(An.l.Na,An.l,An):null;e:{var Yr=An.i;let os=-1;for(;;){const bs=["count="+rr];os==-1?0<rr?(os=Yr[0].g,bs.push("ofs="+os)):os=0:bs.push("ofs="+os);let Ws=!0;for(let Ys=0;Ys<rr;Ys++){let Gs=Yr[Ys].g;const to=Yr[Ys].map;if(Gs-=os,0>Gs)os=Math.max(0,Yr[Ys].g-100),Ws=!1;else try{_d(to,bs,"req"+Gs+"_")}catch{yr&&yr(to)}}if(Ws){yr=bs.join("&");break e}}}return An=An.i.splice(0,rr),Kn.D=An,yr}function Ru(An){if(!An.g&&!An.u){An.Y=1;var Kn=An.Fa;lr||ar(),tr||(lr(),tr=!0),Jn.add(Kn,An),An.v=0}}function nu(An){return An.g||An.u||3<=An.v?!1:(An.Y++,An.u=ls(bn(An.Fa,An),Su(An,An.v)),An.v++,!0)}_e.Fa=function(){if(this.u=null,Rp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var An=2*this.R;this.j.info("BP detection timer enabled: "+An),this.A=ls(bn(this.ab,this),An)}},_e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dr(10),bu(this),Rp(this))};function Tu(An){An.A!=null&&(mn.clearTimeout(An.A),An.A=null)}function Rp(An){An.g=new zs(An,An.j,"rpc",An.Y),An.m===null&&(An.g.H=An.o),An.g.O=0;var Kn=Lo(An.qa);no(Kn,"RID","rpc"),no(Kn,"SID",An.K),no(Kn,"AID",An.T),no(Kn,"CI",An.F?"0":"1"),!An.F&&An.ja&&no(Kn,"TO",An.ja),no(Kn,"TYPE","xmlhttp"),$l(An,Kn),An.m&&An.o&&_h(Kn,An.m,An.o),An.L&&(An.g.I=An.L);var rr=An.g;An=An.ia,rr.L=1,rr.v=Jl(Lo(Kn)),rr.m=null,rr.P=!0,Ro(rr,An)}_e.Za=function(){this.C!=null&&(this.C=null,bu(this),nu(this),Dr(19))};function Pl(An){An.C!=null&&(mn.clearTimeout(An.C),An.C=null)}function Bl(An,Kn){var rr=null;if(An.g==Kn){Pl(An),Tu(An),An.g=null;var yr=2}else if(Ku(An.h,Kn))rr=Kn.D,Yu(An.h,Kn),yr=1;else return;if(An.G!=0){if(Kn.o)if(yr==1){rr=Kn.m?Kn.m.length:0,Kn=Date.now()-Kn.F;var Yr=An.B;yr=Ts(),ts(yr,new Jr(yr,rr)),wu(An)}else Ru(An);else if(Yr=Kn.s,Yr==3||Yr==0&&0<Kn.X||!(yr==1&&rp(An,Kn)||yr==2&&nu(An)))switch(rr&&0<rr.length&&(Kn=An.h,Kn.i=Kn.i.concat(rr)),Yr){case 1:jo(An,5);break;case 4:jo(An,10);break;case 3:jo(An,6);break;default:jo(An,2)}}}function Su(An,Kn){let rr=An.Ta+Math.floor(Math.random()*An.cb);return An.isActive()||(rr*=2),rr*Kn}function jo(An,Kn){if(An.j.info("Error code "+Kn),Kn==2){var rr=bn(An.fb,An),yr=An.Xa;const Yr=!yr;yr=new po(yr||"//www.google.com/images/cleardot.gif"),mn.location&&mn.location.protocol=="http"||Ql(yr,"https"),Jl(yr),Yr?Jo(yr.toString(),rr):bp(yr.toString(),rr)}else Dr(2);An.G=0,An.l&&An.l.sa(Kn),Pu(An),eu(An)}_e.fb=function(An){An?(this.j.info("Successfully pinged google.com"),Dr(2)):(this.j.info("Failed to ping google.com"),Dr(1))};function Pu(An){if(An.G=0,An.ka=[],An.l){const Kn=Xu(An.h);(Kn.length!=0||An.i.length!=0)&&(In(An.ka,Kn),In(An.ka,An.i),An.h.i.length=0,Tn(An.i),An.i.length=0),An.l.ra()}}function Vn(An,Kn,rr){var yr=rr instanceof po?Lo(rr):new po(rr);if(yr.g!="")Kn&&(yr.g=Kn+"."+yr.g),pu(yr,yr.s);else{var Yr=mn.location;yr=Yr.protocol,Kn=Kn?Kn+"."+Yr.hostname:Yr.hostname,Yr=+Yr.port;var os=new po(null);yr&&Ql(os,yr),Kn&&(os.g=Kn),Yr&&pu(os,Yr),rr&&(os.l=rr),yr=os}return rr=An.D,Kn=An.ya,rr&&Kn&&no(yr,rr,Kn),no(yr,"VER",An.la),$l(An,yr),yr}function ur(An,Kn,rr){if(Kn&&!An.J)throw Error("Can't create secondary domain capable XhrIo object.");return Kn=An.Ca&&!An.pa?new eo(new xu({eb:rr})):new eo(An.pa),Kn.Ha(An.J),Kn}_e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cr(){}_e=Cr.prototype,_e.ua=function(){},_e.ta=function(){},_e.sa=function(){},_e.ra=function(){},_e.isActive=function(){return!0},_e.Na=function(){};function $r(){}$r.prototype.g=function(An,Kn){return new Xr(An,Kn)};function Xr(An,Kn){ns.call(this),this.g=new Eu(Kn),this.l=An,this.h=Kn&&Kn.messageUrlParams||null,An=Kn&&Kn.messageHeaders||null,Kn&&Kn.clientProtocolHeaderRequired&&(An?An["X-Client-Protocol"]="webchannel":An={"X-Client-Protocol":"webchannel"}),this.g.o=An,An=Kn&&Kn.initMessageHeaders||null,Kn&&Kn.messageContentType&&(An?An["X-WebChannel-Content-Type"]=Kn.messageContentType:An={"X-WebChannel-Content-Type":Kn.messageContentType}),Kn&&Kn.va&&(An?An["X-WebChannel-Client-Profile"]=Kn.va:An={"X-WebChannel-Client-Profile":Kn.va}),this.g.S=An,(An=Kn&&Kn.Sb)&&!Sn(An)&&(this.g.m=An),this.v=Kn&&Kn.supportsCrossDomainXhr||!1,this.u=Kn&&Kn.sendRawJson||!1,(Kn=Kn&&Kn.httpSessionIdParam)&&!Sn(Kn)&&(this.g.D=Kn,An=this.h,An!==null&&Kn in An&&(An=this.h,Kn in An&&delete An[Kn])),this.j=new Ms(this)}Pn(Xr,ns),Xr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xr.prototype.close=function(){Sl(this.g)},Xr.prototype.o=function(An){var Kn=this.g;if(typeof An=="string"){var rr={};rr.__data__=An,An=rr}else this.u&&(rr={},rr.__data__=es(An),An=rr);Kn.i.push(new Zp(Kn.Ya++,An)),Kn.G==3&&wu(Kn)},Xr.prototype.N=function(){this.g.l=null,delete this.j,Sl(this.g),delete this.g,Xr.aa.N.call(this)};function hs(An){Zr.call(this),An.__headers__&&(this.headers=An.__headers__,this.statusCode=An.__status__,delete An.__headers__,delete An.__status__);var Kn=An.__sm__;if(Kn){e:{for(const rr in Kn){An=rr;break e}An=void 0}(this.i=An)&&(An=this.i,Kn=Kn!==null&&An in Kn?Kn[An]:void 0),this.data=Kn}else this.data=An}Pn(hs,Zr);function Es(){ds.call(this),this.status=1}Pn(Es,ds);function Ms(An){this.g=An}Pn(Ms,Cr),Ms.prototype.ua=function(){ts(this.g,"a")},Ms.prototype.ta=function(An){ts(this.g,new hs(An))},Ms.prototype.sa=function(An){ts(this.g,new Es)},Ms.prototype.ra=function(){ts(this.g,"b")},$r.prototype.createWebChannel=$r.prototype.g,Xr.prototype.send=Xr.prototype.o,Xr.prototype.open=Xr.prototype.m,Xr.prototype.close=Xr.prototype.close,createWebChannelTransport=function(){return new $r},getStatEventTarget=function(){return Ts()},Event$1=fs,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,ErrorCode$1=Is,Os.COMPLETE="complete",EventType=Os,ws.EventType=Rr,Rr.OPEN="a",Rr.CLOSE="b",Rr.ERROR="c",Rr.MESSAGE="d",ns.prototype.listen=ns.prototype.K,WebChannel=ws,eo.prototype.listenOnce=eo.prototype.L,eo.prototype.getLastError=eo.prototype.Ka,eo.prototype.getLastErrorCode=eo.prototype.Ba,eo.prototype.getStatus=eo.prototype.Z,eo.prototype.getResponseJson=eo.prototype.Oa,eo.prototype.getResponseText=eo.prototype.oa,eo.prototype.send=eo.prototype.ea,eo.prototype.setWithCredentials=eo.prototype.Ha,XhrIo=eo}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F$1="@firebase/firestore",M$1="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$2="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(_e,...e){if(O$1.logLevel<=LogLevel.DEBUG){const un=e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x$2}): ${_e}`,...un)}}function __PRIVATE_logError(_e,...e){if(O$1.logLevel<=LogLevel.ERROR){const un=e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x$2}): ${_e}`,...un)}}function __PRIVATE_logWarn(_e,...e){if(O$1.logLevel<=LogLevel.WARN){const un=e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x$2}): ${_e}`,...un)}}function __PRIVATE_argToString(_e){if(typeof _e=="string")return _e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(un){return JSON.stringify(un)}(_e)}catch{return _e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(_e,e,un){let dn="Unexpected state";typeof e=="string"?dn=e:un=e,__PRIVATE__fail(_e,dn,un)}function __PRIVATE__fail(_e,e,un){let dn=`FIRESTORE (${x$2}) INTERNAL ASSERTION FAILED: ${e} (ID: ${_e.toString(16)})`;if(un!==void 0)try{dn+=" CONTEXT: "+JSON.stringify(un)}catch{dn+=" CONTEXT: "+un}throw __PRIVATE_logError(dn),new Error(dn)}function __PRIVATE_hardAssert(_e,e,un,dn){let hn="Unexpected state";typeof un=="string"?hn=un:dn=un,_e||__PRIVATE__fail(e,hn,dn)}function __PRIVATE_debugCast(_e,e){return _e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,un){super(e,un),this.code=e,this.message=un,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,un)=>{this.resolve=e,this.reject=un})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,un){this.user=un,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,un){e.enqueueRetryable(()=>un(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,un){this.changeListener=un,e.enqueueRetryable(()=>un(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,un){__PRIVATE_hardAssert(this.o===void 0,42304);let dn=this.i;const hn=gn=>this.i!==dn?(dn=this.i,un(gn)):Promise.resolve();let fn=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),fn.resolve(),fn=new __PRIVATE_Deferred,e.enqueueRetryable(()=>hn(this.currentUser))};const pn=()=>{const gn=fn;e.enqueueRetryable(async()=>{await gn.promise,await hn(this.currentUser)})},mn=gn=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=gn,this.o&&(this.auth.addAuthTokenListener(this.o),pn())};this.t.onInit(gn=>mn(gn)),setTimeout(()=>{if(!this.auth){const gn=this.t.getImmediate({optional:!0});gn?mn(gn):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),fn.resolve(),fn=new __PRIVATE_Deferred)}},0),pn()}getToken(){const e=this.i,un=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(un).then(dn=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):dn?(__PRIVATE_hardAssert(typeof dn.accessToken=="string",31837,{l:dn}),new __PRIVATE_OAuthToken(dn.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,un,dn){this.P=e,this.T=un,this.I=dn,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,un,dn){this.P=e,this.T=un,this.I=dn}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,un){e.enqueueRetryable(()=>un(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,un){this.V=un,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,un){__PRIVATE_hardAssert(this.o===void 0,3512);const dn=fn=>{fn.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${fn.error.message}`);const pn=fn.token!==this.m;return this.m=fn.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${pn?"new":"existing"} token.`),pn?un(fn.token):Promise.resolve()};this.o=fn=>{e.enqueueRetryable(()=>dn(fn))};const hn=fn=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=fn,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(fn=>hn(fn)),setTimeout(()=>{if(!this.appCheck){const fn=this.V.getImmediate({optional:!0});fn?hn(fn):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(un=>un?(__PRIVATE_hardAssert(typeof un.token=="string",44558,{tokenResult:un}),this.m=un.token,new AppCheckToken(un.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(_e){const e=typeof self<"u"&&(self.crypto||self.msCrypto),un=new Uint8Array(_e);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(un);else for(let dn=0;dn<_e;dn++)un[dn]=Math.floor(256*Math.random());return un}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",un=62*Math.floor(4.129032258064516);let dn="";for(;dn.length<20;){const hn=__PRIVATE_randomBytes(40);for(let fn=0;fn<hn.length;++fn)dn.length<20&&hn[fn]<un&&(dn+=e.charAt(hn[fn]%62))}return dn}}function __PRIVATE_primitiveComparator(_e,e){return _e<e?-1:_e>e?1:0}function __PRIVATE_compareUtf8Strings(_e,e){let un=0;for(;un<_e.length&&un<e.length;){const dn=_e.codePointAt(un),hn=e.codePointAt(un);if(dn!==hn){if(dn<128&&hn<128)return __PRIVATE_primitiveComparator(dn,hn);{const fn=__PRIVATE_newTextEncoder(),pn=__PRIVATE_compareByteArrays$1(fn.encode(__PRIVATE_getUtf8SafeSubstring(_e,un)),fn.encode(__PRIVATE_getUtf8SafeSubstring(e,un)));return pn!==0?pn:__PRIVATE_primitiveComparator(dn,hn)}}un+=dn>65535?2:1}return __PRIVATE_primitiveComparator(_e.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(_e,e){return _e.codePointAt(e)>65535?_e.substring(e,e+2):_e.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(_e,e){for(let un=0;un<_e.length&&un<e.length;++un)if(_e[un]!==e[un])return __PRIVATE_primitiveComparator(_e[un],e[un]);return __PRIVATE_primitiveComparator(_e.length,e.length)}function __PRIVATE_arrayEquals(_e,e,un){return _e.length===e.length&&_e.every((dn,hn)=>un(dn,e[hn]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$1=-62135596800,L$1=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const un=Math.floor(e/1e3),dn=Math.floor((e-1e3*un)*L$1);return new Timestamp(un,dn)}constructor(e,un){if(this.seconds=e,this.nanoseconds=un,un<0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+un);if(un>=1e9)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+un);if(e<B$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L$1}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-B$1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$1="__name__";class BasePath{constructor(e,un,dn){un===void 0?un=0:un>e.length&&fail(637,{offset:un,range:e.length}),dn===void 0?dn=e.length-un:dn>e.length-un&&fail(1746,{length:dn,range:e.length-un}),this.segments=e,this.offset=un,this.len=dn}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const un=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(dn=>{un.push(dn)}):un.push(e),this.construct(un)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let un=0;un<this.length;un++)if(this.get(un)!==e.get(un))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let un=0;un<this.length;un++)if(this.get(un)!==e.get(un))return!1;return!0}forEach(e){for(let un=this.offset,dn=this.limit();un<dn;un++)e(this.segments[un])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,un){const dn=Math.min(e.length,un.length);for(let hn=0;hn<dn;hn++){const fn=BasePath.compareSegments(e.get(hn),un.get(hn));if(fn!==0)return fn}return __PRIVATE_primitiveComparator(e.length,un.length)}static compareSegments(e,un){const dn=BasePath.isNumericId(e),hn=BasePath.isNumericId(un);return dn&&!hn?-1:!dn&&hn?1:dn&&hn?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(un)):__PRIVATE_compareUtf8Strings(e,un)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,un,dn){return new ResourcePath(e,un,dn)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const un=[];for(const dn of e){if(dn.indexOf("//")>=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid segment (${dn}). Paths must not contain // in them.`);un.push(...dn.split("/").filter(hn=>hn.length>0))}return new ResourcePath(un)}static emptyPath(){return new ResourcePath([])}}const q$1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,un,dn){return new FieldPath$1(e,un,dn)}static isValidIdentifier(e){return q$1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k$1}static keyField(){return new FieldPath$1([k$1])}static fromServerFormat(e){const un=[];let dn="",hn=0;const fn=()=>{if(dn.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);un.push(dn),dn=""};let pn=!1;for(;hn<e.length;){const mn=e[hn];if(mn==="\\"){if(hn+1===e.length)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const gn=e[hn+1];if(gn!=="\\"&&gn!=="."&&gn!=="`")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);dn+=gn,hn+=2}else mn==="`"?(pn=!pn,hn++):mn!=="."||pn?(dn+=mn,hn++):(fn(),hn++)}if(fn(),pn)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(un)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,un){return ResourcePath.comparator(e.path,un.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(_e,e){const un=_e.toTimestamp().seconds,dn=_e.toTimestamp().nanoseconds+1,hn=SnapshotVersion.fromTimestamp(dn===1e9?new Timestamp(un+1,0):new Timestamp(un,dn));return new IndexOffset(hn,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(_e){return new IndexOffset(_e.readTime,_e.key,Q$1)}class IndexOffset{constructor(e,un,dn){this.readTime=e,this.documentKey=un,this.largestBatchId=dn}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),Q$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),Q$1)}}function __PRIVATE_indexOffsetComparator(_e,e){let un=_e.readTime.compareTo(e.readTime);return un!==0?un:(un=DocumentKey.comparator(_e.documentKey,e.documentKey),un!==0?un:__PRIVATE_primitiveComparator(_e.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(_e){if(_e.code!==N$1.FAILED_PRECONDITION||_e.message!==$$1)throw _e;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(un=>{this.isDone=!0,this.result=un,this.nextCallback&&this.nextCallback(un)},un=>{this.isDone=!0,this.error=un,this.catchCallback&&this.catchCallback(un)})}catch(e){return this.next(void 0,e)}next(e,un){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(un,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((dn,hn)=>{this.nextCallback=fn=>{this.wrapSuccess(e,fn).next(dn,hn)},this.catchCallback=fn=>{this.wrapFailure(un,fn).next(dn,hn)}})}toPromise(){return new Promise((e,un)=>{this.next(e,un)})}wrapUserFunction(e){try{const un=e();return un instanceof PersistencePromise?un:PersistencePromise.resolve(un)}catch(un){return PersistencePromise.reject(un)}}wrapSuccess(e,un){return e?this.wrapUserFunction(()=>e(un)):PersistencePromise.resolve(un)}wrapFailure(e,un){return e?this.wrapUserFunction(()=>e(un)):PersistencePromise.reject(un)}static resolve(e){return new PersistencePromise((un,dn)=>{un(e)})}static reject(e){return new PersistencePromise((un,dn)=>{dn(e)})}static waitFor(e){return new PersistencePromise((un,dn)=>{let hn=0,fn=0,pn=!1;e.forEach(mn=>{++hn,mn.next(()=>{++fn,pn&&fn===hn&&un()},gn=>dn(gn))}),pn=!0,fn===hn&&un()})}static or(e){let un=PersistencePromise.resolve(!1);for(const dn of e)un=un.next(hn=>hn?PersistencePromise.resolve(hn):dn());return un}static forEach(e,un){const dn=[];return e.forEach((hn,fn)=>{dn.push(un.call(this,hn,fn))}),this.waitFor(dn)}static mapArray(e,un){return new PersistencePromise((dn,hn)=>{const fn=e.length,pn=new Array(fn);let mn=0;for(let gn=0;gn<fn;gn++){const yn=gn;un(e[yn]).next(xn=>{pn[yn]=xn,++mn,mn===fn&&dn(pn)},xn=>hn(xn))}})}static doWhile(e,un){return new PersistencePromise((dn,hn)=>{const fn=()=>{e()===!0?un().next(()=>{fn()},hn):dn()};fn()})}}function __PRIVATE_getAndroidVersion(_e){const e=_e.match(/Android ([\d.]+)/i),un=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(un)}function __PRIVATE_isIndexedDbTransactionError(_e){return _e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,un){this.previousValue=e,un&&(un.sequenceNumberHandler=dn=>this.ue(dn),this.ce=dn=>un.writeSequenceNumber(dn))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}__PRIVATE_ListenSequence.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$1=-1;function __PRIVATE_isNullOrUndefined(_e){return _e==null}function __PRIVATE_isNegativeZero(_e){return _e===0&&1/_e==-1/0}function isSafeInteger(_e){return typeof _e=="number"&&Number.isInteger(_e)&&!__PRIVATE_isNegativeZero(_e)&&_e<=Number.MAX_SAFE_INTEGER&&_e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$1="";function __PRIVATE_encodeResourcePath(_e){let e="";for(let un=0;un<_e.length;un++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(_e.get(un),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(_e,e){let un=e;const dn=_e.length;for(let hn=0;hn<dn;hn++){const fn=_e.charAt(hn);switch(fn){case"\0":un+="";break;case z$1:un+="";break;default:un+=fn}}return un}function __PRIVATE_encodeSeparator(_e){return _e+z$1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(_e){let e=0;for(const un in _e)Object.prototype.hasOwnProperty.call(_e,un)&&e++;return e}function forEach(_e,e){for(const un in _e)Object.prototype.hasOwnProperty.call(_e,un)&&e(un,_e[un])}function isEmpty(_e){for(const e in _e)if(Object.prototype.hasOwnProperty.call(_e,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,un){this.comparator=e,this.root=un||LLRBNode.EMPTY}insert(e,un){return new SortedMap(this.comparator,this.root.insert(e,un,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let un=this.root;for(;!un.isEmpty();){const dn=this.comparator(e,un.key);if(dn===0)return un.value;dn<0?un=un.left:dn>0&&(un=un.right)}return null}indexOf(e){let un=0,dn=this.root;for(;!dn.isEmpty();){const hn=this.comparator(e,dn.key);if(hn===0)return un+dn.left.size;hn<0?dn=dn.left:(un+=dn.left.size+1,dn=dn.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((un,dn)=>(e(un,dn),!1))}toString(){const e=[];return this.inorderTraversal((un,dn)=>(e.push(`${un}:${dn}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,un,dn,hn){this.isReverse=hn,this.nodeStack=[];let fn=1;for(;!e.isEmpty();)if(fn=un?dn(e.key,un):1,un&&hn&&(fn*=-1),fn<0)e=this.isReverse?e.left:e.right;else{if(fn===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const un={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return un}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,un,dn,hn,fn){this.key=e,this.value=un,this.color=dn??LLRBNode.RED,this.left=hn??LLRBNode.EMPTY,this.right=fn??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,un,dn,hn,fn){return new LLRBNode(e??this.key,un??this.value,dn??this.color,hn??this.left,fn??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,un,dn){let hn=this;const fn=dn(e,hn.key);return hn=fn<0?hn.copy(null,null,null,hn.left.insert(e,un,dn),null):fn===0?hn.copy(null,un,null,null,null):hn.copy(null,null,null,null,hn.right.insert(e,un,dn)),hn.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,un){let dn,hn=this;if(un(e,hn.key)<0)hn.left.isEmpty()||hn.left.isRed()||hn.left.left.isRed()||(hn=hn.moveRedLeft()),hn=hn.copy(null,null,null,hn.left.remove(e,un),null);else{if(hn.left.isRed()&&(hn=hn.rotateRight()),hn.right.isEmpty()||hn.right.isRed()||hn.right.left.isRed()||(hn=hn.moveRedRight()),un(e,hn.key)===0){if(hn.right.isEmpty())return LLRBNode.EMPTY;dn=hn.right.min(),hn=hn.copy(dn.key,dn.value,null,null,hn.right.removeMin())}hn=hn.copy(null,null,null,null,hn.right.remove(e,un))}return hn.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),un=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,un)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,un,dn,hn,fn){return this}insert(e,un,dn){return new LLRBNode(e,un)}remove(e,un){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((un,dn)=>(e(un),!1))}forEachInRange(e,un){const dn=this.data.getIteratorFrom(e[0]);for(;dn.hasNext();){const hn=dn.getNext();if(this.comparator(hn.key,e[1])>=0)return;un(hn.key)}}forEachWhile(e,un){let dn;for(dn=un!==void 0?this.data.getIteratorFrom(un):this.data.getIterator();dn.hasNext();)if(!e(dn.getNext().key))return}firstAfterOrEqual(e){const un=this.data.getIteratorFrom(e);return un.hasNext()?un.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let un=this;return un.size<e.size&&(un=e,e=this),e.forEach(dn=>{un=un.add(dn)}),un}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const un=this.data.getIterator(),dn=e.data.getIterator();for(;un.hasNext();){const hn=un.getNext().key,fn=dn.getNext().key;if(this.comparator(hn,fn)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(un=>{e.push(un)}),e}toString(){const e=[];return this.forEach(un=>e.push(un)),"SortedSet("+e.toString()+")"}copy(e){const un=new SortedSet(this.comparator);return un.data=e,un}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let un=new SortedSet(FieldPath$1.comparator);for(const dn of this.fields)un=un.add(dn);for(const dn of e)un=un.add(dn);return new FieldMask(un.toArray())}covers(e){for(const un of this.fields)if(un.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(un,dn)=>un.isEqual(dn))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const un=function(hn){try{return atob(hn)}catch(fn){throw typeof DOMException<"u"&&fn instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+fn):fn}}(e);return new ByteString(un)}static fromUint8Array(e){const un=function(hn){let fn="";for(let pn=0;pn<hn.length;++pn)fn+=String.fromCharCode(hn[pn]);return fn}(e);return new ByteString(un)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(un){return btoa(un)}(this.binaryString)}toUint8Array(){return function(un){const dn=new Uint8Array(un.length);for(let hn=0;hn<un.length;hn++)dn[hn]=un.charCodeAt(hn);return dn}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const it$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(_e){if(__PRIVATE_hardAssert(!!_e,39018),typeof _e=="string"){let e=0;const un=it$1.exec(_e);if(__PRIVATE_hardAssert(!!un,46558,{timestamp:_e}),un[1]){let hn=un[1];hn=(hn+"000000000").substr(0,9),e=Number(hn)}const dn=new Date(_e);return{seconds:Math.floor(dn.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(_e.seconds),nanos:__PRIVATE_normalizeNumber(_e.nanos)}}function __PRIVATE_normalizeNumber(_e){return typeof _e=="number"?_e:typeof _e=="string"?Number(_e):0}function __PRIVATE_normalizeByteString(_e){return typeof _e=="string"?ByteString.fromBase64String(_e):ByteString.fromUint8Array(_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st$1="server_timestamp",ot$1="__type__",_t$1="__previous_value__",at$1="__local_write_time__";function __PRIVATE_isServerTimestamp(_e){var e,un;return((un=(((e=_e==null?void 0:_e.mapValue)===null||e===void 0?void 0:e.fields)||{})[ot$1])===null||un===void 0?void 0:un.stringValue)===st$1}function __PRIVATE_getPreviousValue(_e){const e=_e.mapValue.fields[_t$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(_e){const e=__PRIVATE_normalizeTimestamp(_e.mapValue.fields[at$1].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,un,dn,hn,fn,pn,mn,gn,yn,xn){this.databaseId=e,this.appId=un,this.persistenceKey=dn,this.host=hn,this.ssl=fn,this.forceLongPolling=pn,this.autoDetectLongPolling=mn,this.longPollingOptions=gn,this.useFetchStreams=yn,this.isUsingEmulator=xn}}const ut$1="(default)";class DatabaseId{constructor(e,un){this.projectId=e,this.database=un||ut$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===ut$1}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct$1="__type__",lt$1="__max__",ht$1={mapValue:{fields:{__type__:{stringValue:lt$1}}}},Pt$1="__vector__",Tt$1="value";function __PRIVATE_typeOrder(_e){return"nullValue"in _e?0:"booleanValue"in _e?1:"integerValue"in _e||"doubleValue"in _e?2:"timestampValue"in _e?3:"stringValue"in _e?5:"bytesValue"in _e?6:"referenceValue"in _e?7:"geoPointValue"in _e?8:"arrayValue"in _e?9:"mapValue"in _e?__PRIVATE_isServerTimestamp(_e)?4:__PRIVATE_isMaxValue(_e)?9007199254740991:__PRIVATE_isVectorValue(_e)?10:11:fail(28295,{value:_e})}function __PRIVATE_valueEquals(_e,e){if(_e===e)return!0;const un=__PRIVATE_typeOrder(_e);if(un!==__PRIVATE_typeOrder(e))return!1;switch(un){case 0:case 9007199254740991:return!0;case 1:return _e.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(_e).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(hn,fn){if(typeof hn.timestampValue=="string"&&typeof fn.timestampValue=="string"&&hn.timestampValue.length===fn.timestampValue.length)return hn.timestampValue===fn.timestampValue;const pn=__PRIVATE_normalizeTimestamp(hn.timestampValue),mn=__PRIVATE_normalizeTimestamp(fn.timestampValue);return pn.seconds===mn.seconds&&pn.nanos===mn.nanos}(_e,e);case 5:return _e.stringValue===e.stringValue;case 6:return function(hn,fn){return __PRIVATE_normalizeByteString(hn.bytesValue).isEqual(__PRIVATE_normalizeByteString(fn.bytesValue))}(_e,e);case 7:return _e.referenceValue===e.referenceValue;case 8:return function(hn,fn){return __PRIVATE_normalizeNumber(hn.geoPointValue.latitude)===__PRIVATE_normalizeNumber(fn.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(hn.geoPointValue.longitude)===__PRIVATE_normalizeNumber(fn.geoPointValue.longitude)}(_e,e);case 2:return function(hn,fn){if("integerValue"in hn&&"integerValue"in fn)return __PRIVATE_normalizeNumber(hn.integerValue)===__PRIVATE_normalizeNumber(fn.integerValue);if("doubleValue"in hn&&"doubleValue"in fn){const pn=__PRIVATE_normalizeNumber(hn.doubleValue),mn=__PRIVATE_normalizeNumber(fn.doubleValue);return pn===mn?__PRIVATE_isNegativeZero(pn)===__PRIVATE_isNegativeZero(mn):isNaN(pn)&&isNaN(mn)}return!1}(_e,e);case 9:return __PRIVATE_arrayEquals(_e.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(hn,fn){const pn=hn.mapValue.fields||{},mn=fn.mapValue.fields||{};if(__PRIVATE_objectSize(pn)!==__PRIVATE_objectSize(mn))return!1;for(const gn in pn)if(pn.hasOwnProperty(gn)&&(mn[gn]===void 0||!__PRIVATE_valueEquals(pn[gn],mn[gn])))return!1;return!0}(_e,e);default:return fail(52216,{left:_e})}}function __PRIVATE_arrayValueContains(_e,e){return(_e.values||[]).find(un=>__PRIVATE_valueEquals(un,e))!==void 0}function __PRIVATE_valueCompare(_e,e){if(_e===e)return 0;const un=__PRIVATE_typeOrder(_e),dn=__PRIVATE_typeOrder(e);if(un!==dn)return __PRIVATE_primitiveComparator(un,dn);switch(un){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(_e.booleanValue,e.booleanValue);case 2:return function(fn,pn){const mn=__PRIVATE_normalizeNumber(fn.integerValue||fn.doubleValue),gn=__PRIVATE_normalizeNumber(pn.integerValue||pn.doubleValue);return mn<gn?-1:mn>gn?1:mn===gn?0:isNaN(mn)?isNaN(gn)?0:-1:1}(_e,e);case 3:return __PRIVATE_compareTimestamps(_e.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(_e),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(_e.stringValue,e.stringValue);case 6:return function(fn,pn){const mn=__PRIVATE_normalizeByteString(fn),gn=__PRIVATE_normalizeByteString(pn);return mn.compareTo(gn)}(_e.bytesValue,e.bytesValue);case 7:return function(fn,pn){const mn=fn.split("/"),gn=pn.split("/");for(let yn=0;yn<mn.length&&yn<gn.length;yn++){const xn=__PRIVATE_primitiveComparator(mn[yn],gn[yn]);if(xn!==0)return xn}return __PRIVATE_primitiveComparator(mn.length,gn.length)}(_e.referenceValue,e.referenceValue);case 8:return function(fn,pn){const mn=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(fn.latitude),__PRIVATE_normalizeNumber(pn.latitude));return mn!==0?mn:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(fn.longitude),__PRIVATE_normalizeNumber(pn.longitude))}(_e.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(_e.arrayValue,e.arrayValue);case 10:return function(fn,pn){var mn,gn,yn,xn;const En=fn.fields||{},bn=pn.fields||{},vn=(mn=En[Tt$1])===null||mn===void 0?void 0:mn.arrayValue,Pn=(gn=bn[Tt$1])===null||gn===void 0?void 0:gn.arrayValue,Tn=__PRIVATE_primitiveComparator(((yn=vn==null?void 0:vn.values)===null||yn===void 0?void 0:yn.length)||0,((xn=Pn==null?void 0:Pn.values)===null||xn===void 0?void 0:xn.length)||0);return Tn!==0?Tn:__PRIVATE_compareArrays(vn,Pn)}(_e.mapValue,e.mapValue);case 11:return function(fn,pn){if(fn===ht$1.mapValue&&pn===ht$1.mapValue)return 0;if(fn===ht$1.mapValue)return 1;if(pn===ht$1.mapValue)return-1;const mn=fn.fields||{},gn=Object.keys(mn),yn=pn.fields||{},xn=Object.keys(yn);gn.sort(),xn.sort();for(let En=0;En<gn.length&&En<xn.length;++En){const bn=__PRIVATE_compareUtf8Strings(gn[En],xn[En]);if(bn!==0)return bn;const vn=__PRIVATE_valueCompare(mn[gn[En]],yn[xn[En]]);if(vn!==0)return vn}return __PRIVATE_primitiveComparator(gn.length,xn.length)}(_e.mapValue,e.mapValue);default:throw fail(23264,{Pe:un})}}function __PRIVATE_compareTimestamps(_e,e){if(typeof _e=="string"&&typeof e=="string"&&_e.length===e.length)return __PRIVATE_primitiveComparator(_e,e);const un=__PRIVATE_normalizeTimestamp(_e),dn=__PRIVATE_normalizeTimestamp(e),hn=__PRIVATE_primitiveComparator(un.seconds,dn.seconds);return hn!==0?hn:__PRIVATE_primitiveComparator(un.nanos,dn.nanos)}function __PRIVATE_compareArrays(_e,e){const un=_e.values||[],dn=e.values||[];for(let hn=0;hn<un.length&&hn<dn.length;++hn){const fn=__PRIVATE_valueCompare(un[hn],dn[hn]);if(fn)return fn}return __PRIVATE_primitiveComparator(un.length,dn.length)}function canonicalId(_e){return __PRIVATE_canonifyValue(_e)}function __PRIVATE_canonifyValue(_e){return"nullValue"in _e?"null":"booleanValue"in _e?""+_e.booleanValue:"integerValue"in _e?""+_e.integerValue:"doubleValue"in _e?""+_e.doubleValue:"timestampValue"in _e?function(un){const dn=__PRIVATE_normalizeTimestamp(un);return`time(${dn.seconds},${dn.nanos})`}(_e.timestampValue):"stringValue"in _e?_e.stringValue:"bytesValue"in _e?function(un){return __PRIVATE_normalizeByteString(un).toBase64()}(_e.bytesValue):"referenceValue"in _e?function(un){return DocumentKey.fromName(un).toString()}(_e.referenceValue):"geoPointValue"in _e?function(un){return`geo(${un.latitude},${un.longitude})`}(_e.geoPointValue):"arrayValue"in _e?function(un){let dn="[",hn=!0;for(const fn of un.values||[])hn?hn=!1:dn+=",",dn+=__PRIVATE_canonifyValue(fn);return dn+"]"}(_e.arrayValue):"mapValue"in _e?function(un){const dn=Object.keys(un.fields||{}).sort();let hn="{",fn=!0;for(const pn of dn)fn?fn=!1:hn+=",",hn+=`${pn}:${__PRIVATE_canonifyValue(un.fields[pn])}`;return hn+"}"}(_e.mapValue):fail(61005,{value:_e})}function __PRIVATE_estimateByteSize(_e){switch(__PRIVATE_typeOrder(_e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(_e);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*_e.stringValue.length;case 6:return __PRIVATE_normalizeByteString(_e.bytesValue).approximateByteSize();case 7:return _e.referenceValue.length;case 9:return function(dn){return(dn.values||[]).reduce((hn,fn)=>hn+__PRIVATE_estimateByteSize(fn),0)}(_e.arrayValue);case 10:case 11:return function(dn){let hn=0;return forEach(dn.fields,(fn,pn)=>{hn+=fn.length+__PRIVATE_estimateByteSize(pn)}),hn}(_e.mapValue);default:throw fail(13486,{value:_e})}}function __PRIVATE_refValue(_e,e){return{referenceValue:`projects/${_e.projectId}/databases/${_e.database}/documents/${e.path.canonicalString()}`}}function isInteger(_e){return!!_e&&"integerValue"in _e}function isArray(_e){return!!_e&&"arrayValue"in _e}function __PRIVATE_isNullValue(_e){return!!_e&&"nullValue"in _e}function __PRIVATE_isNanValue(_e){return!!_e&&"doubleValue"in _e&&isNaN(Number(_e.doubleValue))}function __PRIVATE_isMapValue(_e){return!!_e&&"mapValue"in _e}function __PRIVATE_isVectorValue(_e){var e,un;return((un=(((e=_e==null?void 0:_e.mapValue)===null||e===void 0?void 0:e.fields)||{})[ct$1])===null||un===void 0?void 0:un.stringValue)===Pt$1}function __PRIVATE_deepClone(_e){if(_e.geoPointValue)return{geoPointValue:Object.assign({},_e.geoPointValue)};if(_e.timestampValue&&typeof _e.timestampValue=="object")return{timestampValue:Object.assign({},_e.timestampValue)};if(_e.mapValue){const e={mapValue:{fields:{}}};return forEach(_e.mapValue.fields,(un,dn)=>e.mapValue.fields[un]=__PRIVATE_deepClone(dn)),e}if(_e.arrayValue){const e={arrayValue:{values:[]}};for(let un=0;un<(_e.arrayValue.values||[]).length;++un)e.arrayValue.values[un]=__PRIVATE_deepClone(_e.arrayValue.values[un]);return e}return Object.assign({},_e)}function __PRIVATE_isMaxValue(_e){return(((_e.mapValue||{}).fields||{}).__type__||{}).stringValue===lt$1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let un=this.value;for(let dn=0;dn<e.length-1;++dn)if(un=(un.mapValue.fields||{})[e.get(dn)],!__PRIVATE_isMapValue(un))return null;return un=(un.mapValue.fields||{})[e.lastSegment()],un||null}}set(e,un){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(un)}setAll(e){let un=FieldPath$1.emptyPath(),dn={},hn=[];e.forEach((pn,mn)=>{if(!un.isImmediateParentOf(mn)){const gn=this.getFieldsMap(un);this.applyChanges(gn,dn,hn),dn={},hn=[],un=mn.popLast()}pn?dn[mn.lastSegment()]=__PRIVATE_deepClone(pn):hn.push(mn.lastSegment())});const fn=this.getFieldsMap(un);this.applyChanges(fn,dn,hn)}delete(e){const un=this.field(e.popLast());__PRIVATE_isMapValue(un)&&un.mapValue.fields&&delete un.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let un=this.value;un.mapValue.fields||(un.mapValue={fields:{}});for(let dn=0;dn<e.length;++dn){let hn=un.mapValue.fields[e.get(dn)];__PRIVATE_isMapValue(hn)&&hn.mapValue.fields||(hn={mapValue:{fields:{}}},un.mapValue.fields[e.get(dn)]=hn),un=hn}return un.mapValue.fields}applyChanges(e,un,dn){forEach(un,(hn,fn)=>e[hn]=fn);for(const hn of dn)delete e[hn]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(_e){const e=[];return forEach(_e.fields,(un,dn)=>{const hn=new FieldPath$1([un]);if(__PRIVATE_isMapValue(dn)){const fn=__PRIVATE_extractFieldMask(dn.mapValue).fields;if(fn.length===0)e.push(hn);else for(const pn of fn)e.push(hn.child(pn))}else e.push(hn)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,un,dn,hn,fn,pn,mn){this.key=e,this.documentType=un,this.version=dn,this.readTime=hn,this.createTime=fn,this.data=pn,this.documentState=mn}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,un,dn,hn){return new MutableDocument(e,1,un,SnapshotVersion.min(),dn,hn,0)}static newNoDocument(e,un){return new MutableDocument(e,2,un,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,un){return new MutableDocument(e,3,un,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,un){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=un,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,un){this.position=e,this.inclusive=un}}function __PRIVATE_boundCompareToDocument(_e,e,un){let dn=0;for(let hn=0;hn<_e.position.length;hn++){const fn=e[hn],pn=_e.position[hn];if(fn.field.isKeyField()?dn=DocumentKey.comparator(DocumentKey.fromName(pn.referenceValue),un.key):dn=__PRIVATE_valueCompare(pn,un.data.field(fn.field)),fn.dir==="desc"&&(dn*=-1),dn!==0)break}return dn}function __PRIVATE_boundEquals(_e,e){if(_e===null)return e===null;if(e===null||_e.inclusive!==e.inclusive||_e.position.length!==e.position.length)return!1;for(let un=0;un<_e.position.length;un++)if(!__PRIVATE_valueEquals(_e.position[un],e.position[un]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,un="asc"){this.field=e,this.dir=un}}function __PRIVATE_orderByEquals(_e,e){return _e.dir===e.dir&&_e.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,un,dn){super(),this.field=e,this.op=un,this.value=dn}static create(e,un,dn){return e.isKeyField()?un==="in"||un==="not-in"?this.createKeyFieldInFilter(e,un,dn):new __PRIVATE_KeyFieldFilter(e,un,dn):un==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,dn):un==="in"?new __PRIVATE_InFilter(e,dn):un==="not-in"?new __PRIVATE_NotInFilter(e,dn):un==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,dn):new FieldFilter(e,un,dn)}static createKeyFieldInFilter(e,un,dn){return un==="in"?new __PRIVATE_KeyFieldInFilter(e,dn):new __PRIVATE_KeyFieldNotInFilter(e,dn)}matches(e){const un=e.data.field(this.field);return this.op==="!="?un!==null&&un.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(un,this.value)):un!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(un)&&this.matchesComparison(__PRIVATE_valueCompare(un,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,un){super(),this.filters=e,this.op=un,this.Te=null}static create(e,un){return new CompositeFilter(e,un)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(un=>!un.matches(e))===void 0:this.filters.find(un=>un.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,un)=>e.concat(un.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(_e){return _e.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(_e){return __PRIVATE_compositeFilterIsFlat(_e)&&__PRIVATE_compositeFilterIsConjunction(_e)}function __PRIVATE_compositeFilterIsFlat(_e){for(const e of _e.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(_e){if(_e instanceof FieldFilter)return _e.field.canonicalString()+_e.op.toString()+canonicalId(_e.value);if(__PRIVATE_compositeFilterIsFlatConjunction(_e))return _e.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=_e.filters.map(un=>__PRIVATE_canonifyFilter(un)).join(",");return`${_e.op}(${e})`}}function __PRIVATE_filterEquals(_e,e){return _e instanceof FieldFilter?function(dn,hn){return hn instanceof FieldFilter&&dn.op===hn.op&&dn.field.isEqual(hn.field)&&__PRIVATE_valueEquals(dn.value,hn.value)}(_e,e):_e instanceof CompositeFilter?function(dn,hn){return hn instanceof CompositeFilter&&dn.op===hn.op&&dn.filters.length===hn.filters.length?dn.filters.reduce((fn,pn,mn)=>fn&&__PRIVATE_filterEquals(pn,hn.filters[mn]),!0):!1}(_e,e):void fail(19439)}function __PRIVATE_stringifyFilter(_e){return _e instanceof FieldFilter?function(un){return`${un.field.canonicalString()} ${un.op} ${canonicalId(un.value)}`}(_e):_e instanceof CompositeFilter?function(un){return un.op.toString()+" {"+un.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(_e):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,un,dn){super(e,un,dn),this.key=DocumentKey.fromName(dn.referenceValue)}matches(e){const un=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(un)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,un){super(e,"in",un),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",un)}matches(e){return this.keys.some(un=>un.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,un){super(e,"not-in",un),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",un)}matches(e){return!this.keys.some(un=>un.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(_e,e){var un;return(((un=e.arrayValue)===null||un===void 0?void 0:un.values)||[]).map(dn=>DocumentKey.fromName(dn.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,un){super(e,"array-contains",un)}matches(e){const un=e.data.field(this.field);return isArray(un)&&__PRIVATE_arrayValueContains(un.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,un){super(e,"in",un)}matches(e){const un=e.data.field(this.field);return un!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,un)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,un){super(e,"not-in",un)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const un=e.data.field(this.field);return un!==null&&un.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,un)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,un){super(e,"array-contains-any",un)}matches(e){const un=e.data.field(this.field);return!(!isArray(un)||!un.arrayValue.values)&&un.arrayValue.values.some(dn=>__PRIVATE_arrayValueContains(this.value.arrayValue,dn))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,un=null,dn=[],hn=[],fn=null,pn=null,mn=null){this.path=e,this.collectionGroup=un,this.orderBy=dn,this.filters=hn,this.limit=fn,this.startAt=pn,this.endAt=mn,this.Ie=null}}function __PRIVATE_newTarget(_e,e=null,un=[],dn=[],hn=null,fn=null,pn=null){return new __PRIVATE_TargetImpl(_e,e,un,dn,hn,fn,pn)}function __PRIVATE_canonifyTarget(_e){const e=__PRIVATE_debugCast(_e);if(e.Ie===null){let un=e.path.canonicalString();e.collectionGroup!==null&&(un+="|cg:"+e.collectionGroup),un+="|f:",un+=e.filters.map(dn=>__PRIVATE_canonifyFilter(dn)).join(","),un+="|ob:",un+=e.orderBy.map(dn=>function(fn){return fn.field.canonicalString()+fn.dir}(dn)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(un+="|l:",un+=e.limit),e.startAt&&(un+="|lb:",un+=e.startAt.inclusive?"b:":"a:",un+=e.startAt.position.map(dn=>canonicalId(dn)).join(",")),e.endAt&&(un+="|ub:",un+=e.endAt.inclusive?"a:":"b:",un+=e.endAt.position.map(dn=>canonicalId(dn)).join(",")),e.Ie=un}return e.Ie}function __PRIVATE_targetEquals(_e,e){if(_e.limit!==e.limit||_e.orderBy.length!==e.orderBy.length)return!1;for(let un=0;un<_e.orderBy.length;un++)if(!__PRIVATE_orderByEquals(_e.orderBy[un],e.orderBy[un]))return!1;if(_e.filters.length!==e.filters.length)return!1;for(let un=0;un<_e.filters.length;un++)if(!__PRIVATE_filterEquals(_e.filters[un],e.filters[un]))return!1;return _e.collectionGroup===e.collectionGroup&&!!_e.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(_e.startAt,e.startAt)&&__PRIVATE_boundEquals(_e.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(_e){return DocumentKey.isDocumentKey(_e.path)&&_e.collectionGroup===null&&_e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,un=null,dn=[],hn=[],fn=null,pn="F",mn=null,gn=null){this.path=e,this.collectionGroup=un,this.explicitOrderBy=dn,this.filters=hn,this.limit=fn,this.limitType=pn,this.startAt=mn,this.endAt=gn,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(_e,e,un,dn,hn,fn,pn,mn){return new __PRIVATE_QueryImpl(_e,e,un,dn,hn,fn,pn,mn)}function __PRIVATE_newQueryForPath(_e){return new __PRIVATE_QueryImpl(_e)}function __PRIVATE_queryMatchesAllDocuments(_e){return _e.filters.length===0&&_e.limit===null&&_e.startAt==null&&_e.endAt==null&&(_e.explicitOrderBy.length===0||_e.explicitOrderBy.length===1&&_e.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(_e){return _e.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(_e){const e=__PRIVATE_debugCast(_e);if(e.Ee===null){e.Ee=[];const un=new Set;for(const fn of e.explicitOrderBy)e.Ee.push(fn),un.add(fn.field.canonicalString());const dn=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(pn){let mn=new SortedSet(FieldPath$1.comparator);return pn.filters.forEach(gn=>{gn.getFlattenedFilters().forEach(yn=>{yn.isInequality()&&(mn=mn.add(yn.field))})}),mn})(e).forEach(fn=>{un.has(fn.canonicalString())||fn.isKeyField()||e.Ee.push(new OrderBy(fn,dn))}),un.has(FieldPath$1.keyField().canonicalString())||e.Ee.push(new OrderBy(FieldPath$1.keyField(),dn))}return e.Ee}function __PRIVATE_queryToTarget(_e){const e=__PRIVATE_debugCast(_e);return e.de||(e.de=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(_e))),e.de}function __PRIVATE__queryToTarget(_e,e){if(_e.limitType==="F")return __PRIVATE_newTarget(_e.path,_e.collectionGroup,e,_e.filters,_e.limit,_e.startAt,_e.endAt);{e=e.map(hn=>{const fn=hn.dir==="desc"?"asc":"desc";return new OrderBy(hn.field,fn)});const un=_e.endAt?new Bound(_e.endAt.position,_e.endAt.inclusive):null,dn=_e.startAt?new Bound(_e.startAt.position,_e.startAt.inclusive):null;return __PRIVATE_newTarget(_e.path,_e.collectionGroup,e,_e.filters,_e.limit,un,dn)}}function __PRIVATE_queryWithAddedFilter(_e,e){const un=_e.filters.concat([e]);return new __PRIVATE_QueryImpl(_e.path,_e.collectionGroup,_e.explicitOrderBy.slice(),un,_e.limit,_e.limitType,_e.startAt,_e.endAt)}function __PRIVATE_queryWithLimit(_e,e,un){return new __PRIVATE_QueryImpl(_e.path,_e.collectionGroup,_e.explicitOrderBy.slice(),_e.filters.slice(),e,un,_e.startAt,_e.endAt)}function __PRIVATE_queryEquals(_e,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(_e),__PRIVATE_queryToTarget(e))&&_e.limitType===e.limitType}function __PRIVATE_canonifyQuery(_e){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(_e))}|lt:${_e.limitType}`}function __PRIVATE_stringifyQuery(_e){return`Query(target=${function(un){let dn=un.path.canonicalString();return un.collectionGroup!==null&&(dn+=" collectionGroup="+un.collectionGroup),un.filters.length>0&&(dn+=`, filters: [${un.filters.map(hn=>__PRIVATE_stringifyFilter(hn)).join(", ")}]`),__PRIVATE_isNullOrUndefined(un.limit)||(dn+=", limit: "+un.limit),un.orderBy.length>0&&(dn+=`, orderBy: [${un.orderBy.map(hn=>function(pn){return`${pn.field.canonicalString()} (${pn.dir})`}(hn)).join(", ")}]`),un.startAt&&(dn+=", startAt: ",dn+=un.startAt.inclusive?"b:":"a:",dn+=un.startAt.position.map(hn=>canonicalId(hn)).join(",")),un.endAt&&(dn+=", endAt: ",dn+=un.endAt.inclusive?"a:":"b:",dn+=un.endAt.position.map(hn=>canonicalId(hn)).join(",")),`Target(${dn})`}(__PRIVATE_queryToTarget(_e))}; limitType=${_e.limitType})`}function __PRIVATE_queryMatches(_e,e){return e.isFoundDocument()&&function(dn,hn){const fn=hn.key.path;return dn.collectionGroup!==null?hn.key.hasCollectionId(dn.collectionGroup)&&dn.path.isPrefixOf(fn):DocumentKey.isDocumentKey(dn.path)?dn.path.isEqual(fn):dn.path.isImmediateParentOf(fn)}(_e,e)&&function(dn,hn){for(const fn of __PRIVATE_queryNormalizedOrderBy(dn))if(!fn.field.isKeyField()&&hn.data.field(fn.field)===null)return!1;return!0}(_e,e)&&function(dn,hn){for(const fn of dn.filters)if(!fn.matches(hn))return!1;return!0}(_e,e)&&function(dn,hn){return!(dn.startAt&&!function(pn,mn,gn){const yn=__PRIVATE_boundCompareToDocument(pn,mn,gn);return pn.inclusive?yn<=0:yn<0}(dn.startAt,__PRIVATE_queryNormalizedOrderBy(dn),hn)||dn.endAt&&!function(pn,mn,gn){const yn=__PRIVATE_boundCompareToDocument(pn,mn,gn);return pn.inclusive?yn>=0:yn>0}(dn.endAt,__PRIVATE_queryNormalizedOrderBy(dn),hn))}(_e,e)}function __PRIVATE_queryCollectionGroup(_e){return _e.collectionGroup||(_e.path.length%2==1?_e.path.lastSegment():_e.path.get(_e.path.length-2))}function __PRIVATE_newQueryComparator(_e){return(e,un)=>{let dn=!1;for(const hn of __PRIVATE_queryNormalizedOrderBy(_e)){const fn=__PRIVATE_compareDocs(hn,e,un);if(fn!==0)return fn;dn=dn||hn.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(_e,e,un){const dn=_e.field.isKeyField()?DocumentKey.comparator(e.key,un.key):function(fn,pn,mn){const gn=pn.data.field(fn),yn=mn.data.field(fn);return gn!==null&&yn!==null?__PRIVATE_valueCompare(gn,yn):fail(42886)}(_e.field,e,un);switch(_e.dir){case"asc":return dn;case"desc":return-1*dn;default:return fail(19790,{direction:_e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,un){this.mapKeyFn=e,this.equalsFn=un,this.inner={},this.innerSize=0}get(e){const un=this.mapKeyFn(e),dn=this.inner[un];if(dn!==void 0){for(const[hn,fn]of dn)if(this.equalsFn(hn,e))return fn}}has(e){return this.get(e)!==void 0}set(e,un){const dn=this.mapKeyFn(e),hn=this.inner[dn];if(hn===void 0)return this.inner[dn]=[[e,un]],void this.innerSize++;for(let fn=0;fn<hn.length;fn++)if(this.equalsFn(hn[fn][0],e))return void(hn[fn]=[e,un]);hn.push([e,un]),this.innerSize++}delete(e){const un=this.mapKeyFn(e),dn=this.inner[un];if(dn===void 0)return!1;for(let hn=0;hn<dn.length;hn++)if(this.equalsFn(dn[hn][0],e))return dn.length===1?delete this.inner[un]:dn.splice(hn,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(un,dn)=>{for(const[hn,fn]of dn)e(hn,fn)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return dt$1}const At$1=new SortedMap(DocumentKey.comparator);function documentMap(..._e){let e=At$1;for(const un of _e)e=e.insert(un.key,un);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(_e){let e=At$1;return _e.forEach((un,dn)=>e=e.insert(un,dn.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(_e=>_e.toString(),(_e,e)=>_e.isEqual(e))}const Rt$1=new SortedMap(DocumentKey.comparator),Vt$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(..._e){let e=Vt$1;for(const un of _e)e=e.add(un);return e}const mt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return mt$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(_e,e){if(_e.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(_e){return{integerValue:""+_e}}function toNumber(_e,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(_e,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(_e,e,un){return _e instanceof __PRIVATE_ServerTimestampTransform?function(hn,fn){const pn={fields:{[ot$1]:{stringValue:st$1},[at$1]:{timestampValue:{seconds:hn.seconds,nanos:hn.nanoseconds}}}};return fn&&__PRIVATE_isServerTimestamp(fn)&&(fn=__PRIVATE_getPreviousValue(fn)),fn&&(pn.fields[_t$1]=fn),{mapValue:pn}}(un,e):_e instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(_e,e):_e instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(_e,e):function(hn,fn){const pn=__PRIVATE_computeTransformOperationBaseValue(hn,fn),mn=asNumber(pn)+asNumber(hn.Re);return isInteger(pn)&&isInteger(hn.Re)?__PRIVATE_toInteger(mn):__PRIVATE_toDouble(hn.serializer,mn)}(_e,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(_e,e,un){return _e instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(_e,e):_e instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(_e,e):un}function __PRIVATE_computeTransformOperationBaseValue(_e,e){return _e instanceof __PRIVATE_NumericIncrementTransformOperation?function(dn){return isInteger(dn)||function(fn){return!!fn&&"doubleValue"in fn}(dn)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(_e,e){const un=__PRIVATE_coercedFieldValuesArray(e);for(const dn of _e.elements)un.some(hn=>__PRIVATE_valueEquals(hn,dn))||un.push(dn);return{arrayValue:{values:un}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(_e,e){let un=__PRIVATE_coercedFieldValuesArray(e);for(const dn of _e.elements)un=un.filter(hn=>!__PRIVATE_valueEquals(hn,dn));return{arrayValue:{values:un}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,un){super(),this.serializer=e,this.Re=un}}function asNumber(_e){return __PRIVATE_normalizeNumber(_e.integerValue||_e.doubleValue)}function __PRIVATE_coercedFieldValuesArray(_e){return isArray(_e)&&_e.arrayValue.values?_e.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(_e,e){return _e.field.isEqual(e.field)&&function(dn,hn){return dn instanceof __PRIVATE_ArrayUnionTransformOperation&&hn instanceof __PRIVATE_ArrayUnionTransformOperation||dn instanceof __PRIVATE_ArrayRemoveTransformOperation&&hn instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(dn.elements,hn.elements,__PRIVATE_valueEquals):dn instanceof __PRIVATE_NumericIncrementTransformOperation&&hn instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(dn.Re,hn.Re):dn instanceof __PRIVATE_ServerTimestampTransform&&hn instanceof __PRIVATE_ServerTimestampTransform}(_e.transform,e.transform)}class MutationResult{constructor(e,un){this.version=e,this.transformResults=un}}class Precondition{constructor(e,un){this.updateTime=e,this.exists=un}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(_e,e){return _e.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(_e.updateTime):_e.exists===void 0||_e.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(_e,e){if(!_e.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return _e.isNoDocument()?new __PRIVATE_DeleteMutation(_e.key,Precondition.none()):new __PRIVATE_SetMutation(_e.key,_e.data,Precondition.none());{const un=_e.data,dn=ObjectValue.empty();let hn=new SortedSet(FieldPath$1.comparator);for(let fn of e.fields)if(!hn.has(fn)){let pn=un.field(fn);pn===null&&fn.length>1&&(fn=fn.popLast(),pn=un.field(fn)),pn===null?dn.delete(fn):dn.set(fn,pn),hn=hn.add(fn)}return new __PRIVATE_PatchMutation(_e.key,dn,new FieldMask(hn.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(_e,e,un){_e instanceof __PRIVATE_SetMutation?function(hn,fn,pn){const mn=hn.value.clone(),gn=__PRIVATE_serverTransformResults(hn.fieldTransforms,fn,pn.transformResults);mn.setAll(gn),fn.convertToFoundDocument(pn.version,mn).setHasCommittedMutations()}(_e,e,un):_e instanceof __PRIVATE_PatchMutation?function(hn,fn,pn){if(!__PRIVATE_preconditionIsValidForDocument(hn.precondition,fn))return void fn.convertToUnknownDocument(pn.version);const mn=__PRIVATE_serverTransformResults(hn.fieldTransforms,fn,pn.transformResults),gn=fn.data;gn.setAll(__PRIVATE_getPatch(hn)),gn.setAll(mn),fn.convertToFoundDocument(pn.version,gn).setHasCommittedMutations()}(_e,e,un):function(hn,fn,pn){fn.convertToNoDocument(pn.version).setHasCommittedMutations()}(0,e,un)}function __PRIVATE_mutationApplyToLocalView(_e,e,un,dn){return _e instanceof __PRIVATE_SetMutation?function(fn,pn,mn,gn){if(!__PRIVATE_preconditionIsValidForDocument(fn.precondition,pn))return mn;const yn=fn.value.clone(),xn=__PRIVATE_localTransformResults(fn.fieldTransforms,gn,pn);return yn.setAll(xn),pn.convertToFoundDocument(pn.version,yn).setHasLocalMutations(),null}(_e,e,un,dn):_e instanceof __PRIVATE_PatchMutation?function(fn,pn,mn,gn){if(!__PRIVATE_preconditionIsValidForDocument(fn.precondition,pn))return mn;const yn=__PRIVATE_localTransformResults(fn.fieldTransforms,gn,pn),xn=pn.data;return xn.setAll(__PRIVATE_getPatch(fn)),xn.setAll(yn),pn.convertToFoundDocument(pn.version,xn).setHasLocalMutations(),mn===null?null:mn.unionWith(fn.fieldMask.fields).unionWith(fn.fieldTransforms.map(En=>En.field))}(_e,e,un,dn):function(fn,pn,mn){return __PRIVATE_preconditionIsValidForDocument(fn.precondition,pn)?(pn.convertToNoDocument(pn.version).setHasLocalMutations(),null):mn}(_e,e,un)}function __PRIVATE_mutationExtractBaseValue(_e,e){let un=null;for(const dn of _e.fieldTransforms){const hn=e.data.field(dn.field),fn=__PRIVATE_computeTransformOperationBaseValue(dn.transform,hn||null);fn!=null&&(un===null&&(un=ObjectValue.empty()),un.set(dn.field,fn))}return un||null}function __PRIVATE_mutationEquals(_e,e){return _e.type===e.type&&!!_e.key.isEqual(e.key)&&!!_e.precondition.isEqual(e.precondition)&&!!function(dn,hn){return dn===void 0&&hn===void 0||!(!dn||!hn)&&__PRIVATE_arrayEquals(dn,hn,(fn,pn)=>__PRIVATE_fieldTransformEquals(fn,pn))}(_e.fieldTransforms,e.fieldTransforms)&&(_e.type===0?_e.value.isEqual(e.value):_e.type!==1||_e.data.isEqual(e.data)&&_e.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,un,dn,hn=[]){super(),this.key=e,this.value=un,this.precondition=dn,this.fieldTransforms=hn,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,un,dn,hn,fn=[]){super(),this.key=e,this.data=un,this.fieldMask=dn,this.precondition=hn,this.fieldTransforms=fn,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(_e){const e=new Map;return _e.fieldMask.fields.forEach(un=>{if(!un.isEmpty()){const dn=_e.data.field(un);e.set(un,dn)}}),e}function __PRIVATE_serverTransformResults(_e,e,un){const dn=new Map;__PRIVATE_hardAssert(_e.length===un.length,32656,{Ve:un.length,me:_e.length});for(let hn=0;hn<un.length;hn++){const fn=_e[hn],pn=fn.transform,mn=e.data.field(fn.field);dn.set(fn.field,__PRIVATE_applyTransformOperationToRemoteDocument(pn,mn,un[hn]))}return dn}function __PRIVATE_localTransformResults(_e,e,un){const dn=new Map;for(const hn of _e){const fn=hn.transform,pn=un.data.field(hn.field);dn.set(hn.field,__PRIVATE_applyTransformOperationToLocalView(fn,pn,e))}return dn}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,un){super(),this.key=e,this.precondition=un,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,un){super(),this.key=e,this.precondition=un,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,un,dn,hn){this.batchId=e,this.localWriteTime=un,this.baseMutations=dn,this.mutations=hn}applyToRemoteDocument(e,un){const dn=un.mutationResults;for(let hn=0;hn<this.mutations.length;hn++){const fn=this.mutations[hn];fn.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(fn,e,dn[hn])}}applyToLocalView(e,un){for(const dn of this.baseMutations)dn.key.isEqual(e.key)&&(un=__PRIVATE_mutationApplyToLocalView(dn,e,un,this.localWriteTime));for(const dn of this.mutations)dn.key.isEqual(e.key)&&(un=__PRIVATE_mutationApplyToLocalView(dn,e,un,this.localWriteTime));return un}applyToLocalDocumentSet(e,un){const dn=__PRIVATE_newMutationMap();return this.mutations.forEach(hn=>{const fn=e.get(hn.key),pn=fn.overlayedDocument;let mn=this.applyToLocalView(pn,fn.mutatedFields);mn=un.has(hn.key)?null:mn;const gn=__PRIVATE_calculateOverlayMutation(pn,mn);gn!==null&&dn.set(hn.key,gn),pn.isValidDocument()||pn.convertToNoDocument(SnapshotVersion.min())}),dn}keys(){return this.mutations.reduce((e,un)=>e.add(un.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(un,dn)=>__PRIVATE_mutationEquals(un,dn))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(un,dn)=>__PRIVATE_mutationEquals(un,dn))}}class MutationBatchResult{constructor(e,un,dn,hn){this.batch=e,this.commitVersion=un,this.mutationResults=dn,this.docVersions=hn}static from(e,un,dn){__PRIVATE_hardAssert(e.mutations.length===dn.length,58842,{fe:e.mutations.length,ge:dn.length});let hn=function(){return Rt$1}();const fn=e.mutations;for(let pn=0;pn<fn.length;pn++)hn=hn.insert(fn[pn].key,dn[pn].version);return new MutationBatchResult(e,un,dn,hn)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Overlay$1=class{constructor(e,un){this.largestBatchId=e,this.mutation=un}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,un){this.count=e,this.unchangedNames=un}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft$1,gt$1;function __PRIVATE_isPermanentError(_e){switch(_e){case N$1.OK:return fail(64938);case N$1.CANCELLED:case N$1.UNKNOWN:case N$1.DEADLINE_EXCEEDED:case N$1.RESOURCE_EXHAUSTED:case N$1.INTERNAL:case N$1.UNAVAILABLE:case N$1.UNAUTHENTICATED:return!1;case N$1.INVALID_ARGUMENT:case N$1.NOT_FOUND:case N$1.ALREADY_EXISTS:case N$1.PERMISSION_DENIED:case N$1.FAILED_PRECONDITION:case N$1.ABORTED:case N$1.OUT_OF_RANGE:case N$1.UNIMPLEMENTED:case N$1.DATA_LOSS:return!0;default:return fail(15467,{code:_e})}}function __PRIVATE_mapCodeFromRpcCode(_e){if(_e===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$1.UNKNOWN;switch(_e){case ft$1.OK:return N$1.OK;case ft$1.CANCELLED:return N$1.CANCELLED;case ft$1.UNKNOWN:return N$1.UNKNOWN;case ft$1.DEADLINE_EXCEEDED:return N$1.DEADLINE_EXCEEDED;case ft$1.RESOURCE_EXHAUSTED:return N$1.RESOURCE_EXHAUSTED;case ft$1.INTERNAL:return N$1.INTERNAL;case ft$1.UNAVAILABLE:return N$1.UNAVAILABLE;case ft$1.UNAUTHENTICATED:return N$1.UNAUTHENTICATED;case ft$1.INVALID_ARGUMENT:return N$1.INVALID_ARGUMENT;case ft$1.NOT_FOUND:return N$1.NOT_FOUND;case ft$1.ALREADY_EXISTS:return N$1.ALREADY_EXISTS;case ft$1.PERMISSION_DENIED:return N$1.PERMISSION_DENIED;case ft$1.FAILED_PRECONDITION:return N$1.FAILED_PRECONDITION;case ft$1.ABORTED:return N$1.ABORTED;case ft$1.OUT_OF_RANGE:return N$1.OUT_OF_RANGE;case ft$1.UNIMPLEMENTED:return N$1.UNIMPLEMENTED;case ft$1.DATA_LOSS:return N$1.DATA_LOSS;default:return fail(39323,{code:_e})}}(gt$1=ft$1||(ft$1={}))[gt$1.OK=0]="OK",gt$1[gt$1.CANCELLED=1]="CANCELLED",gt$1[gt$1.UNKNOWN=2]="UNKNOWN",gt$1[gt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt$1[gt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt$1[gt$1.NOT_FOUND=5]="NOT_FOUND",gt$1[gt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt$1[gt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt$1[gt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt$1[gt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt$1[gt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt$1[gt$1.ABORTED=10]="ABORTED",gt$1[gt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt$1[gt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt$1[gt$1.INTERNAL=13]="INTERNAL",gt$1[gt$1.UNAVAILABLE=14]="UNAVAILABLE",gt$1[gt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(_e){const e=__PRIVATE_newTextEncoder().encode(_e),un=new Md5;return un.update(e),new Uint8Array(un.digest())}function __PRIVATE_get64BitUints(_e){const e=new DataView(_e.buffer),un=e.getUint32(0,!0),dn=e.getUint32(4,!0),hn=e.getUint32(8,!0),fn=e.getUint32(12,!0);return[new Integer([un,dn],0),new Integer([hn,fn],0)]}class BloomFilter{constructor(e,un,dn){if(this.bitmap=e,this.padding=un,this.hashCount=dn,un<0||un>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${un}`);if(dn<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${dn}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${dn}`);if(e.length===0&&un!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${un}`);this.pe=8*e.length-un,this.ye=Integer.fromNumber(this.pe)}we(e,un,dn){let hn=e.add(un.multiply(Integer.fromNumber(dn)));return hn.compare(yt$1)===1&&(hn=new Integer([hn.getBits(0),hn.getBits(1)],0)),hn.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const un=__PRIVATE_getMd5HashValue(e),[dn,hn]=__PRIVATE_get64BitUints(un);for(let fn=0;fn<this.hashCount;fn++){const pn=this.we(dn,hn,fn);if(!this.be(pn))return!1}return!0}static create(e,un,dn){const hn=e%8==0?0:8-e%8,fn=new Uint8Array(Math.ceil(e/8)),pn=new BloomFilter(fn,hn,un);return dn.forEach(mn=>pn.insert(mn)),pn}insert(e){if(this.pe===0)return;const un=__PRIVATE_getMd5HashValue(e),[dn,hn]=__PRIVATE_get64BitUints(un);for(let fn=0;fn<this.hashCount;fn++){const pn=this.we(dn,hn,fn);this.Se(pn)}}Se(e){const un=Math.floor(e/8),dn=e%8;this.bitmap[un]|=1<<dn}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,un,dn,hn,fn){this.snapshotVersion=e,this.targetChanges=un,this.targetMismatches=dn,this.documentUpdates=hn,this.resolvedLimboDocuments=fn}static createSynthesizedRemoteEventForCurrentChange(e,un,dn){const hn=new Map;return hn.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,un,dn)),new RemoteEvent(SnapshotVersion.min(),hn,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,un,dn,hn,fn){this.resumeToken=e,this.current=un,this.addedDocuments=dn,this.modifiedDocuments=hn,this.removedDocuments=fn}static createSynthesizedTargetChangeForCurrentChange(e,un,dn){return new TargetChange(dn,un,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,un,dn,hn){this.De=e,this.removedTargetIds=un,this.key=dn,this.ve=hn}}class __PRIVATE_ExistenceFilterChange{constructor(e,un){this.targetId=e,this.Ce=un}}class __PRIVATE_WatchTargetChange{constructor(e,un,dn=ByteString.EMPTY_BYTE_STRING,hn=null){this.state=e,this.targetIds=un,this.resumeToken=dn,this.cause=hn}}class __PRIVATE_TargetState{constructor(){this.Fe=0,this.Me=__PRIVATE_snapshotChangesMap(),this.xe=ByteString.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=__PRIVATE_documentKeySet(),un=__PRIVATE_documentKeySet(),dn=__PRIVATE_documentKeySet();return this.Me.forEach((hn,fn)=>{switch(fn){case 0:e=e.add(hn);break;case 2:un=un.add(hn);break;case 1:dn=dn.add(hn);break;default:fail(38017,{changeType:fn})}}),new TargetChange(this.xe,this.Oe,e,un,dn)}Qe(){this.Ne=!1,this.Me=__PRIVATE_snapshotChangesMap()}$e(e,un){this.Ne=!0,this.Me=this.Me.insert(e,un)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,__PRIVATE_hardAssert(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.ze=e,this.je=new Map,this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator)}Xe(e){for(const un of e.De)e.ve&&e.ve.isFoundDocument()?this.et(un,e.ve):this.tt(un,e.key,e.ve);for(const un of e.removedTargetIds)this.tt(un,e.key,e.ve)}nt(e){this.forEachTarget(e,un=>{const dn=this.rt(un);switch(e.state){case 0:this.it(un)&&dn.ke(e.resumeToken);break;case 1:dn.We(),dn.Be||dn.Qe(),dn.ke(e.resumeToken);break;case 2:dn.We(),dn.Be||this.removeTarget(un);break;case 3:this.it(un)&&(dn.Ge(),dn.ke(e.resumeToken));break;case 4:this.it(un)&&(this.st(un),dn.ke(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,un){e.targetIds.length>0?e.targetIds.forEach(un):this.je.forEach((dn,hn)=>{this.it(hn)&&un(hn)})}ot(e){const un=e.targetId,dn=e.Ce.count,hn=this._t(un);if(hn){const fn=hn.target;if(__PRIVATE_targetIsDocumentTarget(fn))if(dn===0){const pn=new DocumentKey(fn.path);this.tt(un,pn,MutableDocument.newNoDocument(pn,SnapshotVersion.min()))}else __PRIVATE_hardAssert(dn===1,20013,{expectedCount:dn});else{const pn=this.ut(un);if(pn!==dn){const mn=this.ct(e),gn=mn?this.lt(mn,e,pn):1;if(gn!==0){this.st(un);const yn=gn===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(un,yn)}}}}}ct(e){const un=e.Ce.unchangedNames;if(!un||!un.bits)return null;const{bits:{bitmap:dn="",padding:hn=0},hashCount:fn=0}=un;let pn,mn;try{pn=__PRIVATE_normalizeByteString(dn).toUint8Array()}catch(gn){if(gn instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+gn.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw gn}try{mn=new BloomFilter(pn,hn,fn)}catch(gn){return __PRIVATE_logWarn(gn instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",gn),null}return mn.pe===0?null:mn}lt(e,un,dn){return un.Ce.count===dn-this.Tt(e,un.targetId)?0:2}Tt(e,un){const dn=this.ze.getRemoteKeysForTarget(un);let hn=0;return dn.forEach(fn=>{const pn=this.ze.Pt(),mn=`projects/${pn.projectId}/databases/${pn.database}/documents/${fn.path.canonicalString()}`;e.mightContain(mn)||(this.tt(un,fn,null),hn++)}),hn}It(e){const un=new Map;this.je.forEach((fn,pn)=>{const mn=this._t(pn);if(mn){if(fn.current&&__PRIVATE_targetIsDocumentTarget(mn.target)){const gn=new DocumentKey(mn.target.path);this.Et(gn).has(pn)||this.dt(pn,gn)||this.tt(pn,gn,MutableDocument.newNoDocument(gn,e))}fn.Le&&(un.set(pn,fn.qe()),fn.Qe())}});let dn=__PRIVATE_documentKeySet();this.Ye.forEach((fn,pn)=>{let mn=!0;pn.forEachWhile(gn=>{const yn=this._t(gn);return!yn||yn.purpose==="TargetPurposeLimboResolution"||(mn=!1,!1)}),mn&&(dn=dn.add(fn))}),this.He.forEach((fn,pn)=>pn.setReadTime(e));const hn=new RemoteEvent(e,un,this.Ze,this.He,dn);return this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator),hn}et(e,un){if(!this.it(e))return;const dn=this.dt(e,un.key)?2:0;this.rt(e).$e(un.key,dn),this.He=this.He.insert(un.key,un),this.Je=this.Je.insert(un.key,this.Et(un.key).add(e)),this.Ye=this.Ye.insert(un.key,this.At(un.key).add(e))}tt(e,un,dn){if(!this.it(e))return;const hn=this.rt(e);this.dt(e,un)?hn.$e(un,1):hn.Ue(un),this.Ye=this.Ye.insert(un,this.At(un).delete(e)),this.Ye=this.Ye.insert(un,this.At(un).add(e)),dn&&(this.He=this.He.insert(un,dn))}removeTarget(e){this.je.delete(e)}ut(e){const un=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+un.addedDocuments.size-un.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let un=this.je.get(e);return un||(un=new __PRIVATE_TargetState,this.je.set(e,un)),un}At(e){let un=this.Ye.get(e);return un||(un=new SortedSet(__PRIVATE_primitiveComparator),this.Ye=this.Ye.insert(e,un)),un}Et(e){let un=this.Je.get(e);return un||(un=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,un)),un}it(e){const un=this._t(e)!==null;return un||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),un}_t(e){const un=this.je.get(e);return un&&un.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new __PRIVATE_TargetState),this.ze.getRemoteKeysForTarget(e).forEach(un=>{this.tt(e,un,null)})}dt(e,un){return this.ze.getRemoteKeysForTarget(e).has(un)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const wt$1={asc:"ASCENDING",desc:"DESCENDING"},bt$1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},St={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,un){this.databaseId=e,this.useProto3Json=un}}function __PRIVATE_toInt32Proto(_e,e){return _e.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(_e,e){return _e.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(_e,e){return _e.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(_e,e){return toTimestamp(_e,e.toTimestamp())}function __PRIVATE_fromVersion(_e){return __PRIVATE_hardAssert(!!_e,49232),SnapshotVersion.fromTimestamp(function(un){const dn=__PRIVATE_normalizeTimestamp(un);return new Timestamp(dn.seconds,dn.nanos)}(_e))}function __PRIVATE_toResourceName(_e,e){return __PRIVATE_toResourcePath(_e,e).canonicalString()}function __PRIVATE_toResourcePath(_e,e){const un=function(hn){return new ResourcePath(["projects",hn.projectId,"databases",hn.database])}(_e).child("documents");return e===void 0?un:un.child(e)}function __PRIVATE_fromResourceName(_e){const e=ResourcePath.fromString(_e);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(_e,e){return __PRIVATE_toResourceName(_e.databaseId,e.path)}function fromName(_e,e){const un=__PRIVATE_fromResourceName(e);if(un.get(1)!==_e.databaseId.projectId)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+un.get(1)+" vs "+_e.databaseId.projectId);if(un.get(3)!==_e.databaseId.database)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+un.get(3)+" vs "+_e.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(un))}function __PRIVATE_toQueryPath(_e,e){return __PRIVATE_toResourceName(_e.databaseId,e)}function __PRIVATE_fromQueryPath(_e){const e=__PRIVATE_fromResourceName(_e);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(_e){return new ResourcePath(["projects",_e.databaseId.projectId,"databases",_e.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(_e){return __PRIVATE_hardAssert(_e.length>4&&_e.get(4)==="documents",29091,{key:_e.toString()}),_e.popFirst(5)}function __PRIVATE_toMutationDocument(_e,e,un){return{name:__PRIVATE_toName(_e,e),fields:un.value.mapValue.fields}}function __PRIVATE_fromWatchChange(_e,e){let un;if("targetChange"in e){e.targetChange;const dn=function(yn){return yn==="NO_CHANGE"?0:yn==="ADD"?1:yn==="REMOVE"?2:yn==="CURRENT"?3:yn==="RESET"?4:fail(39313,{state:yn})}(e.targetChange.targetChangeType||"NO_CHANGE"),hn=e.targetChange.targetIds||[],fn=function(yn,xn){return yn.useProto3Json?(__PRIVATE_hardAssert(xn===void 0||typeof xn=="string",58123),ByteString.fromBase64String(xn||"")):(__PRIVATE_hardAssert(xn===void 0||xn instanceof Buffer||xn instanceof Uint8Array,16193),ByteString.fromUint8Array(xn||new Uint8Array))}(_e,e.targetChange.resumeToken),pn=e.targetChange.cause,mn=pn&&function(yn){const xn=yn.code===void 0?N$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(yn.code);return new FirestoreError(xn,yn.message||"")}(pn);un=new __PRIVATE_WatchTargetChange(dn,hn,fn,mn||null)}else if("documentChange"in e){e.documentChange;const dn=e.documentChange;dn.document,dn.document.name,dn.document.updateTime;const hn=fromName(_e,dn.document.name),fn=__PRIVATE_fromVersion(dn.document.updateTime),pn=dn.document.createTime?__PRIVATE_fromVersion(dn.document.createTime):SnapshotVersion.min(),mn=new ObjectValue({mapValue:{fields:dn.document.fields}}),gn=MutableDocument.newFoundDocument(hn,fn,pn,mn),yn=dn.targetIds||[],xn=dn.removedTargetIds||[];un=new __PRIVATE_DocumentWatchChange(yn,xn,gn.key,gn)}else if("documentDelete"in e){e.documentDelete;const dn=e.documentDelete;dn.document;const hn=fromName(_e,dn.document),fn=dn.readTime?__PRIVATE_fromVersion(dn.readTime):SnapshotVersion.min(),pn=MutableDocument.newNoDocument(hn,fn),mn=dn.removedTargetIds||[];un=new __PRIVATE_DocumentWatchChange([],mn,pn.key,pn)}else if("documentRemove"in e){e.documentRemove;const dn=e.documentRemove;dn.document;const hn=fromName(_e,dn.document),fn=dn.removedTargetIds||[];un=new __PRIVATE_DocumentWatchChange([],fn,hn,null)}else{if(!("filter"in e))return fail(11601,{Vt:e});{e.filter;const dn=e.filter;dn.targetId;const{count:hn=0,unchangedNames:fn}=dn,pn=new ExistenceFilter(hn,fn),mn=dn.targetId;un=new __PRIVATE_ExistenceFilterChange(mn,pn)}}return un}function toMutation(_e,e){let un;if(e instanceof __PRIVATE_SetMutation)un={update:__PRIVATE_toMutationDocument(_e,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)un={delete:__PRIVATE_toName(_e,e.key)};else if(e instanceof __PRIVATE_PatchMutation)un={update:__PRIVATE_toMutationDocument(_e,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{ft:e.type});un={verify:__PRIVATE_toName(_e,e.key)}}return e.fieldTransforms.length>0&&(un.updateTransforms=e.fieldTransforms.map(dn=>function(fn,pn){const mn=pn.transform;if(mn instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:pn.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(mn instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:pn.field.canonicalString(),appendMissingElements:{values:mn.elements}};if(mn instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:pn.field.canonicalString(),removeAllFromArray:{values:mn.elements}};if(mn instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:pn.field.canonicalString(),increment:mn.Re};throw fail(20930,{transform:pn.transform})}(0,dn))),e.precondition.isNone||(un.currentDocument=function(hn,fn){return fn.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(hn,fn.updateTime)}:fn.exists!==void 0?{exists:fn.exists}:fail(27497)}(_e,e.precondition)),un}function __PRIVATE_fromWriteResults(_e,e){return _e&&_e.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),_e.map(un=>function(hn,fn){let pn=hn.updateTime?__PRIVATE_fromVersion(hn.updateTime):__PRIVATE_fromVersion(fn);return pn.isEqual(SnapshotVersion.min())&&(pn=__PRIVATE_fromVersion(fn)),new MutationResult(pn,hn.transformResults||[])}(un,e))):[]}function __PRIVATE_toDocumentsTarget(_e,e){return{documents:[__PRIVATE_toQueryPath(_e,e.path)]}}function __PRIVATE_toQueryTarget(_e,e){const un={structuredQuery:{}},dn=e.path;let hn;e.collectionGroup!==null?(hn=dn,un.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(hn=dn.popLast(),un.structuredQuery.from=[{collectionId:dn.lastSegment()}]),un.parent=__PRIVATE_toQueryPath(_e,hn);const fn=function(yn){if(yn.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(yn,"and"))}(e.filters);fn&&(un.structuredQuery.where=fn);const pn=function(yn){if(yn.length!==0)return yn.map(xn=>function(bn){return{field:__PRIVATE_toFieldPathReference(bn.field),direction:__PRIVATE_toDirection(bn.dir)}}(xn))}(e.orderBy);pn&&(un.structuredQuery.orderBy=pn);const mn=__PRIVATE_toInt32Proto(_e,e.limit);return mn!==null&&(un.structuredQuery.limit=mn),e.startAt&&(un.structuredQuery.startAt=function(yn){return{before:yn.inclusive,values:yn.position}}(e.startAt)),e.endAt&&(un.structuredQuery.endAt=function(yn){return{before:!yn.inclusive,values:yn.position}}(e.endAt)),{gt:un,parent:hn}}function __PRIVATE_convertQueryTargetToQuery(_e){let e=__PRIVATE_fromQueryPath(_e.parent);const un=_e.structuredQuery,dn=un.from?un.from.length:0;let hn=null;if(dn>0){__PRIVATE_hardAssert(dn===1,65062);const xn=un.from[0];xn.allDescendants?hn=xn.collectionId:e=e.child(xn.collectionId)}let fn=[];un.where&&(fn=function(En){const bn=__PRIVATE_fromFilter(En);return bn instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(bn)?bn.getFilters():[bn]}(un.where));let pn=[];un.orderBy&&(pn=function(En){return En.map(bn=>function(Pn){return new OrderBy(__PRIVATE_fromFieldPathReference(Pn.field),function(In){switch(In){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Pn.direction))}(bn))}(un.orderBy));let mn=null;un.limit&&(mn=function(En){let bn;return bn=typeof En=="object"?En.value:En,__PRIVATE_isNullOrUndefined(bn)?null:bn}(un.limit));let gn=null;un.startAt&&(gn=function(En){const bn=!!En.before,vn=En.values||[];return new Bound(vn,bn)}(un.startAt));let yn=null;return un.endAt&&(yn=function(En){const bn=!En.before,vn=En.values||[];return new Bound(vn,bn)}(un.endAt)),__PRIVATE_newQuery(e,hn,pn,fn,mn,"F",gn,yn)}function __PRIVATE_toListenRequestLabels(_e,e){const un=function(hn){switch(hn){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:hn})}}(e.purpose);return un==null?null:{"goog-listen-tags":un}}function __PRIVATE_fromFilter(_e){return _e.unaryFilter!==void 0?function(un){switch(un.unaryFilter.op){case"IS_NAN":const dn=__PRIVATE_fromFieldPathReference(un.unaryFilter.field);return FieldFilter.create(dn,"==",{doubleValue:NaN});case"IS_NULL":const hn=__PRIVATE_fromFieldPathReference(un.unaryFilter.field);return FieldFilter.create(hn,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const fn=__PRIVATE_fromFieldPathReference(un.unaryFilter.field);return FieldFilter.create(fn,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const pn=__PRIVATE_fromFieldPathReference(un.unaryFilter.field);return FieldFilter.create(pn,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(_e):_e.fieldFilter!==void 0?function(un){return FieldFilter.create(__PRIVATE_fromFieldPathReference(un.fieldFilter.field),function(hn){switch(hn){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(un.fieldFilter.op),un.fieldFilter.value)}(_e):_e.compositeFilter!==void 0?function(un){return CompositeFilter.create(un.compositeFilter.filters.map(dn=>__PRIVATE_fromFilter(dn)),function(hn){switch(hn){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(un.compositeFilter.op))}(_e):fail(30097,{filter:_e})}function __PRIVATE_toDirection(_e){return wt$1[_e]}function __PRIVATE_toOperatorName(_e){return bt$1[_e]}function __PRIVATE_toCompositeOperatorName(_e){return St[_e]}function __PRIVATE_toFieldPathReference(_e){return{fieldPath:_e.canonicalString()}}function __PRIVATE_fromFieldPathReference(_e){return FieldPath$1.fromServerFormat(_e.fieldPath)}function __PRIVATE_toFilter(_e){return _e instanceof FieldFilter?function(un){if(un.op==="=="){if(__PRIVATE_isNanValue(un.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(un.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(un.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(un.field),op:"IS_NULL"}}}else if(un.op==="!="){if(__PRIVATE_isNanValue(un.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(un.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(un.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(un.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(un.field),op:__PRIVATE_toOperatorName(un.op),value:un.value}}}(_e):_e instanceof CompositeFilter?function(un){const dn=un.getFilters().map(hn=>__PRIVATE_toFilter(hn));return dn.length===1?dn[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(un.op),filters:dn}}}(_e):fail(54877,{filter:_e})}function __PRIVATE_toDocumentMask(_e){const e=[];return _e.fields.forEach(un=>e.push(un.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(_e){return _e.length>=4&&_e.get(0)==="projects"&&_e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,un,dn,hn,fn=SnapshotVersion.min(),pn=SnapshotVersion.min(),mn=ByteString.EMPTY_BYTE_STRING,gn=null){this.target=e,this.targetId=un,this.purpose=dn,this.sequenceNumber=hn,this.snapshotVersion=fn,this.lastLimboFreeSnapshotVersion=pn,this.resumeToken=mn,this.expectedCount=gn}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,un){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,un,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.wt=e}}function __PRIVATE_fromBundledQuery(_e){const e=__PRIVATE_convertQueryTargetToQuery({parent:_e.parent,structuredQuery:_e.structuredQuery});return _e.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,un){return this.Cn.add(un),PersistencePromise.resolve()}getCollectionParents(e,un){return PersistencePromise.resolve(this.Cn.getEntries(un))}addFieldIndex(e,un){return PersistencePromise.resolve()}deleteFieldIndex(e,un){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,un){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,un){return PersistencePromise.resolve(null)}getIndexType(e,un){return PersistencePromise.resolve(0)}getFieldIndexes(e,un){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,un){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,un){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,un,dn){return PersistencePromise.resolve()}updateIndexEntries(e,un){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const un=e.lastSegment(),dn=e.popLast(),hn=this.index[un]||new SortedSet(ResourcePath.comparator),fn=!hn.has(dn);return this.index[un]=hn.add(dn),fn}has(e){const un=e.lastSegment(),dn=e.popLast(),hn=this.index[un];return hn&&hn.has(dn)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft$1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mt$1=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,un,dn){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=un,this.maximumSequenceNumbersToCollect=dn}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Mt$1,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new __PRIVATE_TargetIdGenerator(0)}static lr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt$1="LruGarbageCollector",Ot$1=1048576;function __PRIVATE_bufferEntryComparator([_e,e],[un,dn]){const hn=__PRIVATE_primitiveComparator(_e,un);return hn===0?__PRIVATE_primitiveComparator(e,dn):hn}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Er=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.dr=0}Ar(){return++this.dr}Rr(e){const un=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(un);else{const dn=this.buffer.last();__PRIVATE_bufferEntryComparator(un,dn)<0&&(this.buffer=this.buffer.delete(dn).add(un))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,un,dn){this.garbageCollector=e,this.asyncQueue=un,this.localStore=dn,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){__PRIVATE_logDebug(xt$1,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(un){__PRIVATE_isIndexedDbTransactionError(un)?__PRIVATE_logDebug(xt$1,"Ignoring IndexedDB error during garbage collection: ",un):await __PRIVATE_ignoreIfPrimaryLeaseLoss(un)}await this.mr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,un){this.gr=e,this.params=un}calculateTargetCount(e,un){return this.gr.pr(e).next(dn=>Math.floor(un/100*dn))}nthSequenceNumber(e,un){if(un===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.le);const dn=new __PRIVATE_RollingSequenceNumberBuffer(un);return this.gr.forEachTarget(e,hn=>dn.Rr(hn.sequenceNumber)).next(()=>this.gr.yr(e,hn=>dn.Rr(hn))).next(()=>dn.maxValue)}removeTargets(e,un,dn){return this.gr.removeTargets(e,un,dn)}removeOrphanedDocuments(e,un){return this.gr.removeOrphanedDocuments(e,un)}collect(e,un){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(Ft$1)):this.getCacheSize(e).next(dn=>dn<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${dn} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ft$1):this.wr(e,un))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,un){let dn,hn,fn,pn,mn,gn,yn;const xn=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(En=>(En>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${En}`),hn=this.params.maximumSequenceNumbersToCollect):hn=En,pn=Date.now(),this.nthSequenceNumber(e,hn))).next(En=>(dn=En,mn=Date.now(),this.removeTargets(e,dn,un))).next(En=>(fn=En,gn=Date.now(),this.removeOrphanedDocuments(e,dn))).next(En=>(yn=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${pn-xn}ms
	Determined least recently used ${hn} in `+(mn-pn)+`ms
	Removed ${fn} targets in `+(gn-mn)+`ms
	Removed ${En} documents in `+(yn-gn)+`ms
Total Duration: ${yn-xn}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:hn,targetsRemoved:fn,documentsRemoved:En})))}}function __PRIVATE_newLruGarbageCollector(_e,e){return new __PRIVATE_LruGarbageCollectorImpl(_e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,un)=>e.isEqual(un)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,un){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(un))}getEntry(e,un){this.assertNotApplied();const dn=this.changes.get(un);return dn!==void 0?PersistencePromise.resolve(dn):this.getFromCache(e,un)}getEntries(e,un){return this.getAllFromCache(e,un)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,un){this.overlayedDocument=e,this.mutatedFields=un}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,un,dn,hn){this.remoteDocumentCache=e,this.mutationQueue=un,this.documentOverlayCache=dn,this.indexManager=hn}getDocument(e,un){let dn=null;return this.documentOverlayCache.getOverlay(e,un).next(hn=>(dn=hn,this.remoteDocumentCache.getEntry(e,un))).next(hn=>(dn!==null&&__PRIVATE_mutationApplyToLocalView(dn.mutation,hn,FieldMask.empty(),Timestamp.now()),hn))}getDocuments(e,un){return this.remoteDocumentCache.getEntries(e,un).next(dn=>this.getLocalViewOfDocuments(e,dn,__PRIVATE_documentKeySet()).next(()=>dn))}getLocalViewOfDocuments(e,un,dn=__PRIVATE_documentKeySet()){const hn=__PRIVATE_newOverlayMap();return this.populateOverlays(e,hn,un).next(()=>this.computeViews(e,un,hn,dn).next(fn=>{let pn=documentMap();return fn.forEach((mn,gn)=>{pn=pn.insert(mn,gn.overlayedDocument)}),pn}))}getOverlayedDocuments(e,un){const dn=__PRIVATE_newOverlayMap();return this.populateOverlays(e,dn,un).next(()=>this.computeViews(e,un,dn,__PRIVATE_documentKeySet()))}populateOverlays(e,un,dn){const hn=[];return dn.forEach(fn=>{un.has(fn)||hn.push(fn)}),this.documentOverlayCache.getOverlays(e,hn).next(fn=>{fn.forEach((pn,mn)=>{un.set(pn,mn)})})}computeViews(e,un,dn,hn){let fn=__PRIVATE_mutableDocumentMap();const pn=__PRIVATE_newDocumentKeyMap(),mn=function(){return __PRIVATE_newDocumentKeyMap()}();return un.forEach((gn,yn)=>{const xn=dn.get(yn.key);hn.has(yn.key)&&(xn===void 0||xn.mutation instanceof __PRIVATE_PatchMutation)?fn=fn.insert(yn.key,yn):xn!==void 0?(pn.set(yn.key,xn.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(xn.mutation,yn,xn.mutation.getFieldMask(),Timestamp.now())):pn.set(yn.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,fn).next(gn=>(gn.forEach((yn,xn)=>pn.set(yn,xn)),un.forEach((yn,xn)=>{var En;return mn.set(yn,new OverlayedDocument(xn,(En=pn.get(yn))!==null&&En!==void 0?En:null))}),mn))}recalculateAndSaveOverlays(e,un){const dn=__PRIVATE_newDocumentKeyMap();let hn=new SortedMap((pn,mn)=>pn-mn),fn=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,un).next(pn=>{for(const mn of pn)mn.keys().forEach(gn=>{const yn=un.get(gn);if(yn===null)return;let xn=dn.get(gn)||FieldMask.empty();xn=mn.applyToLocalView(yn,xn),dn.set(gn,xn);const En=(hn.get(mn.batchId)||__PRIVATE_documentKeySet()).add(gn);hn=hn.insert(mn.batchId,En)})}).next(()=>{const pn=[],mn=hn.getReverseIterator();for(;mn.hasNext();){const gn=mn.getNext(),yn=gn.key,xn=gn.value,En=__PRIVATE_newMutationMap();xn.forEach(bn=>{if(!fn.has(bn)){const vn=__PRIVATE_calculateOverlayMutation(un.get(bn),dn.get(bn));vn!==null&&En.set(bn,vn),fn=fn.add(bn)}}),pn.push(this.documentOverlayCache.saveOverlays(e,yn,En))}return PersistencePromise.waitFor(pn)}).next(()=>dn)}recalculateAndSaveOverlaysForDocumentKeys(e,un){return this.remoteDocumentCache.getEntries(e,un).next(dn=>this.recalculateAndSaveOverlays(e,dn))}getDocumentsMatchingQuery(e,un,dn,hn){return function(pn){return DocumentKey.isDocumentKey(pn.path)&&pn.collectionGroup===null&&pn.filters.length===0}(un)?this.getDocumentsMatchingDocumentQuery(e,un.path):__PRIVATE_isCollectionGroupQuery(un)?this.getDocumentsMatchingCollectionGroupQuery(e,un,dn,hn):this.getDocumentsMatchingCollectionQuery(e,un,dn,hn)}getNextDocuments(e,un,dn,hn){return this.remoteDocumentCache.getAllFromCollectionGroup(e,un,dn,hn).next(fn=>{const pn=hn-fn.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,un,dn.largestBatchId,hn-fn.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let mn=Q$1,gn=fn;return pn.next(yn=>PersistencePromise.forEach(yn,(xn,En)=>(mn<En.largestBatchId&&(mn=En.largestBatchId),fn.get(xn)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,xn).next(bn=>{gn=gn.insert(xn,bn)}))).next(()=>this.populateOverlays(e,yn,fn)).next(()=>this.computeViews(e,gn,yn,__PRIVATE_documentKeySet())).next(xn=>({batchId:mn,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(xn)})))})}getDocumentsMatchingDocumentQuery(e,un){return this.getDocument(e,new DocumentKey(un)).next(dn=>{let hn=documentMap();return dn.isFoundDocument()&&(hn=hn.insert(dn.key,dn)),hn})}getDocumentsMatchingCollectionGroupQuery(e,un,dn,hn){const fn=un.collectionGroup;let pn=documentMap();return this.indexManager.getCollectionParents(e,fn).next(mn=>PersistencePromise.forEach(mn,gn=>{const yn=function(En,bn){return new __PRIVATE_QueryImpl(bn,null,En.explicitOrderBy.slice(),En.filters.slice(),En.limit,En.limitType,En.startAt,En.endAt)}(un,gn.child(fn));return this.getDocumentsMatchingCollectionQuery(e,yn,dn,hn).next(xn=>{xn.forEach((En,bn)=>{pn=pn.insert(En,bn)})})}).next(()=>pn))}getDocumentsMatchingCollectionQuery(e,un,dn,hn){let fn;return this.documentOverlayCache.getOverlaysForCollection(e,un.path,dn.largestBatchId).next(pn=>(fn=pn,this.remoteDocumentCache.getDocumentsMatchingQuery(e,un,dn,fn,hn))).next(pn=>{fn.forEach((gn,yn)=>{const xn=yn.getKey();pn.get(xn)===null&&(pn=pn.insert(xn,MutableDocument.newInvalidDocument(xn)))});let mn=documentMap();return pn.forEach((gn,yn)=>{const xn=fn.get(gn);xn!==void 0&&__PRIVATE_mutationApplyToLocalView(xn.mutation,yn,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(un,yn)&&(mn=mn.insert(gn,yn))}),mn})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,un){return PersistencePromise.resolve(this.kr.get(un))}saveBundleMetadata(e,un){return this.kr.set(un.id,function(hn){return{id:hn.id,version:hn.version,createTime:__PRIVATE_fromVersion(hn.createTime)}}(un)),PersistencePromise.resolve()}getNamedQuery(e,un){return PersistencePromise.resolve(this.qr.get(un))}saveNamedQuery(e,un){return this.qr.set(un.name,function(hn){return{name:hn.name,query:__PRIVATE_fromBundledQuery(hn.bundledQuery),readTime:__PRIVATE_fromVersion(hn.readTime)}}(un)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Qr=new Map}getOverlay(e,un){return PersistencePromise.resolve(this.overlays.get(un))}getOverlays(e,un){const dn=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(un,hn=>this.getOverlay(e,hn).next(fn=>{fn!==null&&dn.set(hn,fn)})).next(()=>dn)}saveOverlays(e,un,dn){return dn.forEach((hn,fn)=>{this.St(e,un,fn)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,un,dn){const hn=this.Qr.get(dn);return hn!==void 0&&(hn.forEach(fn=>this.overlays=this.overlays.remove(fn)),this.Qr.delete(dn)),PersistencePromise.resolve()}getOverlaysForCollection(e,un,dn){const hn=__PRIVATE_newOverlayMap(),fn=un.length+1,pn=new DocumentKey(un.child("")),mn=this.overlays.getIteratorFrom(pn);for(;mn.hasNext();){const gn=mn.getNext().value,yn=gn.getKey();if(!un.isPrefixOf(yn.path))break;yn.path.length===fn&&gn.largestBatchId>dn&&hn.set(gn.getKey(),gn)}return PersistencePromise.resolve(hn)}getOverlaysForCollectionGroup(e,un,dn,hn){let fn=new SortedMap((yn,xn)=>yn-xn);const pn=this.overlays.getIterator();for(;pn.hasNext();){const yn=pn.getNext().value;if(yn.getKey().getCollectionGroup()===un&&yn.largestBatchId>dn){let xn=fn.get(yn.largestBatchId);xn===null&&(xn=__PRIVATE_newOverlayMap(),fn=fn.insert(yn.largestBatchId,xn)),xn.set(yn.getKey(),yn)}}const mn=__PRIVATE_newOverlayMap(),gn=fn.getIterator();for(;gn.hasNext()&&(gn.getNext().value.forEach((yn,xn)=>mn.set(yn,xn)),!(mn.size()>=hn)););return PersistencePromise.resolve(mn)}St(e,un,dn){const hn=this.overlays.get(dn.key);if(hn!==null){const pn=this.Qr.get(hn.largestBatchId).delete(dn.key);this.Qr.set(hn.largestBatchId,pn)}this.overlays=this.overlays.insert(dn.key,new Overlay$1(un,dn));let fn=this.Qr.get(un);fn===void 0&&(fn=__PRIVATE_documentKeySet(),this.Qr.set(un,fn)),this.Qr.set(un,fn.add(dn.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,un){return this.sessionToken=un,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.$r=new SortedSet(__PRIVATE_DocReference.Ur),this.Kr=new SortedSet(__PRIVATE_DocReference.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,un){const dn=new __PRIVATE_DocReference(e,un);this.$r=this.$r.add(dn),this.Kr=this.Kr.add(dn)}Gr(e,un){e.forEach(dn=>this.addReference(dn,un))}removeReference(e,un){this.zr(new __PRIVATE_DocReference(e,un))}jr(e,un){e.forEach(dn=>this.removeReference(dn,un))}Hr(e){const un=new DocumentKey(new ResourcePath([])),dn=new __PRIVATE_DocReference(un,e),hn=new __PRIVATE_DocReference(un,e+1),fn=[];return this.Kr.forEachInRange([dn,hn],pn=>{this.zr(pn),fn.push(pn.key)}),fn}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const un=new DocumentKey(new ResourcePath([])),dn=new __PRIVATE_DocReference(un,e),hn=new __PRIVATE_DocReference(un,e+1);let fn=__PRIVATE_documentKeySet();return this.Kr.forEachInRange([dn,hn],pn=>{fn=fn.add(pn.key)}),fn}containsKey(e){const un=new __PRIVATE_DocReference(e,0),dn=this.$r.firstAfterOrEqual(un);return dn!==null&&e.isEqual(dn.key)}}class __PRIVATE_DocReference{constructor(e,un){this.key=e,this.Zr=un}static Ur(e,un){return DocumentKey.comparator(e.key,un.key)||__PRIVATE_primitiveComparator(e.Zr,un.Zr)}static Wr(e,un){return __PRIVATE_primitiveComparator(e.Zr,un.Zr)||DocumentKey.comparator(e.key,un.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,un){this.indexManager=e,this.referenceDelegate=un,this.mutationQueue=[],this.nr=1,this.Xr=new SortedSet(__PRIVATE_DocReference.Ur)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,un,dn,hn){const fn=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const pn=new MutationBatch(fn,un,dn,hn);this.mutationQueue.push(pn);for(const mn of hn)this.Xr=this.Xr.add(new __PRIVATE_DocReference(mn.key,fn)),this.indexManager.addToCollectionParentIndex(e,mn.key.path.popLast());return PersistencePromise.resolve(pn)}lookupMutationBatch(e,un){return PersistencePromise.resolve(this.ei(un))}getNextMutationBatchAfterBatchId(e,un){const dn=un+1,hn=this.ti(dn),fn=hn<0?0:hn;return PersistencePromise.resolve(this.mutationQueue.length>fn?this.mutationQueue[fn]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?G$1:this.nr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,un){const dn=new __PRIVATE_DocReference(un,0),hn=new __PRIVATE_DocReference(un,Number.POSITIVE_INFINITY),fn=[];return this.Xr.forEachInRange([dn,hn],pn=>{const mn=this.ei(pn.Zr);fn.push(mn)}),PersistencePromise.resolve(fn)}getAllMutationBatchesAffectingDocumentKeys(e,un){let dn=new SortedSet(__PRIVATE_primitiveComparator);return un.forEach(hn=>{const fn=new __PRIVATE_DocReference(hn,0),pn=new __PRIVATE_DocReference(hn,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([fn,pn],mn=>{dn=dn.add(mn.Zr)})}),PersistencePromise.resolve(this.ni(dn))}getAllMutationBatchesAffectingQuery(e,un){const dn=un.path,hn=dn.length+1;let fn=dn;DocumentKey.isDocumentKey(fn)||(fn=fn.child(""));const pn=new __PRIVATE_DocReference(new DocumentKey(fn),0);let mn=new SortedSet(__PRIVATE_primitiveComparator);return this.Xr.forEachWhile(gn=>{const yn=gn.key.path;return!!dn.isPrefixOf(yn)&&(yn.length===hn&&(mn=mn.add(gn.Zr)),!0)},pn),PersistencePromise.resolve(this.ni(mn))}ni(e){const un=[];return e.forEach(dn=>{const hn=this.ei(dn);hn!==null&&un.push(hn)}),un}removeMutationBatch(e,un){__PRIVATE_hardAssert(this.ri(un.batchId,"removed")===0,55003),this.mutationQueue.shift();let dn=this.Xr;return PersistencePromise.forEach(un.mutations,hn=>{const fn=new __PRIVATE_DocReference(hn.key,un.batchId);return dn=dn.delete(fn),this.referenceDelegate.markPotentiallyOrphaned(e,hn.key)}).next(()=>{this.Xr=dn})}sr(e){}containsKey(e,un){const dn=new __PRIVATE_DocReference(un,0),hn=this.Xr.firstAfterOrEqual(dn);return PersistencePromise.resolve(un.isEqual(hn&&hn.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ri(e,un){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const un=this.ti(e);return un<0||un>=this.mutationQueue.length?null:this.mutationQueue[un]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ii=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,un){const dn=un.key,hn=this.docs.get(dn),fn=hn?hn.size:0,pn=this.ii(un);return this.docs=this.docs.insert(dn,{document:un.mutableCopy(),size:pn}),this.size+=pn-fn,this.indexManager.addToCollectionParentIndex(e,dn.path.popLast())}removeEntry(e){const un=this.docs.get(e);un&&(this.docs=this.docs.remove(e),this.size-=un.size)}getEntry(e,un){const dn=this.docs.get(un);return PersistencePromise.resolve(dn?dn.document.mutableCopy():MutableDocument.newInvalidDocument(un))}getEntries(e,un){let dn=__PRIVATE_mutableDocumentMap();return un.forEach(hn=>{const fn=this.docs.get(hn);dn=dn.insert(hn,fn?fn.document.mutableCopy():MutableDocument.newInvalidDocument(hn))}),PersistencePromise.resolve(dn)}getDocumentsMatchingQuery(e,un,dn,hn){let fn=__PRIVATE_mutableDocumentMap();const pn=un.path,mn=new DocumentKey(pn.child("__id-9223372036854775808__")),gn=this.docs.getIteratorFrom(mn);for(;gn.hasNext();){const{key:yn,value:{document:xn}}=gn.getNext();if(!pn.isPrefixOf(yn.path))break;yn.path.length>pn.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(xn),dn)<=0||(hn.has(xn.key)||__PRIVATE_queryMatches(un,xn))&&(fn=fn.insert(xn.key,xn.mutableCopy()))}return PersistencePromise.resolve(fn)}getAllFromCollectionGroup(e,un,dn,hn){fail(9500)}si(e,un){return PersistencePromise.forEach(this.docs,dn=>un(dn))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Br=e}applyChanges(e){const un=[];return this.changes.forEach((dn,hn)=>{hn.isValidDocument()?un.push(this.Br.addEntry(e,hn)):this.Br.removeEntry(dn)}),PersistencePromise.waitFor(un)}getFromCache(e,un){return this.Br.getEntry(e,un)}getAllFromCache(e,un){return this.Br.getEntries(e,un)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.oi=new ObjectMap(un=>__PRIVATE_canonifyTarget(un),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this._i=0,this.ai=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ui=__PRIVATE_TargetIdGenerator.cr()}forEachTarget(e,un){return this.oi.forEach((dn,hn)=>un(hn)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,un,dn){return dn&&(this.lastRemoteSnapshotVersion=dn),un>this._i&&(this._i=un),PersistencePromise.resolve()}Tr(e){this.oi.set(e.target,e);const un=e.targetId;un>this.highestTargetId&&(this.ui=new __PRIVATE_TargetIdGenerator(un),this.highestTargetId=un),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,un){return this.Tr(un),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,un){return this.Tr(un),PersistencePromise.resolve()}removeTargetData(e,un){return this.oi.delete(un.target),this.ai.Hr(un.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,un,dn){let hn=0;const fn=[];return this.oi.forEach((pn,mn)=>{mn.sequenceNumber<=un&&dn.get(mn.targetId)===null&&(this.oi.delete(pn),fn.push(this.removeMatchingKeysForTargetId(e,mn.targetId)),hn++)}),PersistencePromise.waitFor(fn).next(()=>hn)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,un){const dn=this.oi.get(un)||null;return PersistencePromise.resolve(dn)}addMatchingKeys(e,un,dn){return this.ai.Gr(un,dn),PersistencePromise.resolve()}removeMatchingKeys(e,un,dn){this.ai.jr(un,dn);const hn=this.persistence.referenceDelegate,fn=[];return hn&&un.forEach(pn=>{fn.push(hn.markPotentiallyOrphaned(e,pn))}),PersistencePromise.waitFor(fn)}removeMatchingKeysForTargetId(e,un){return this.ai.Hr(un),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,un){const dn=this.ai.Yr(un);return PersistencePromise.resolve(dn)}containsKey(e,un){return PersistencePromise.resolve(this.ai.containsKey(un))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,un){this.ci={},this.overlays={},this.li=new __PRIVATE_ListenSequence(0),this.hi=!1,this.hi=!0,this.Pi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Ti=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(hn){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(hn)}(dn=>this.referenceDelegate.Ii(dn)),this.serializer=new __PRIVATE_LocalSerializer(un),this.Ei=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let un=this.overlays[e.toKey()];return un||(un=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=un),un}getMutationQueue(e,un){let dn=this.ci[e.toKey()];return dn||(dn=new __PRIVATE_MemoryMutationQueue(un,this.referenceDelegate),this.ci[e.toKey()]=dn),dn}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,un,dn){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const hn=new __PRIVATE_MemoryTransaction(this.li.next());return this.referenceDelegate.di(),dn(hn).next(fn=>this.referenceDelegate.Ai(hn).next(()=>fn)).toPromise().then(fn=>(hn.raiseOnCommittedEvent(),fn))}Ri(e,un){return PersistencePromise.or(Object.values(this.ci).map(dn=>()=>dn.containsKey(e,un)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Vi=new __PRIVATE_ReferenceSet,this.mi=null}static fi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get gi(){if(this.mi)return this.mi;throw fail(60996)}addReference(e,un,dn){return this.Vi.addReference(dn,un),this.gi.delete(dn.toString()),PersistencePromise.resolve()}removeReference(e,un,dn){return this.Vi.removeReference(dn,un),this.gi.add(dn.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,un){return this.gi.add(un.toString()),PersistencePromise.resolve()}removeTarget(e,un){this.Vi.Hr(un.targetId).forEach(hn=>this.gi.add(hn.toString()));const dn=this.persistence.getTargetCache();return dn.getMatchingKeysForTargetId(e,un.targetId).next(hn=>{hn.forEach(fn=>this.gi.add(fn.toString()))}).next(()=>dn.removeTargetData(e,un))}di(){this.mi=new Set}Ai(e){const un=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.gi,dn=>{const hn=DocumentKey.fromPath(dn);return this.pi(e,hn).next(fn=>{fn||un.removeEntry(hn,SnapshotVersion.min())})}).next(()=>(this.mi=null,un.apply(e)))}updateLimboDocument(e,un){return this.pi(e,un).next(dn=>{dn?this.gi.delete(un.toString()):this.gi.add(un.toString())})}Ii(e){return 0}pi(e,un){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Vi.containsKey(un)),()=>this.persistence.getTargetCache().containsKey(e,un),()=>this.persistence.Ri(e,un)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,un){this.persistence=e,this.yi=new ObjectMap(dn=>__PRIVATE_encodeResourcePath(dn.path),(dn,hn)=>dn.isEqual(hn)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,un)}static fi(e,un){return new __PRIVATE_MemoryLruDelegate(e,un)}di(){}Ai(e){return PersistencePromise.resolve()}forEachTarget(e,un){return this.persistence.getTargetCache().forEachTarget(e,un)}pr(e){const un=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(dn=>un.next(hn=>dn+hn))}br(e){let un=0;return this.yr(e,dn=>{un++}).next(()=>un)}yr(e,un){return PersistencePromise.forEach(this.yi,(dn,hn)=>this.Dr(e,dn,hn).next(fn=>fn?PersistencePromise.resolve():un(hn)))}removeTargets(e,un,dn){return this.persistence.getTargetCache().removeTargets(e,un,dn)}removeOrphanedDocuments(e,un){let dn=0;const hn=this.persistence.getRemoteDocumentCache(),fn=hn.newChangeBuffer();return hn.si(e,pn=>this.Dr(e,pn,un).next(mn=>{mn||(dn++,fn.removeEntry(pn,SnapshotVersion.min()))})).next(()=>fn.apply(e)).next(()=>dn)}markPotentiallyOrphaned(e,un){return this.yi.set(un,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,un){const dn=un.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,dn)}addReference(e,un,dn){return this.yi.set(dn,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,un,dn){return this.yi.set(dn,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,un){return this.yi.set(un,e.currentSequenceNumber),PersistencePromise.resolve()}Ii(e){let un=e.key.toString().length;return e.isFoundDocument()&&(un+=__PRIVATE_estimateByteSize(e.data.value)),un}Dr(e,un,dn){return PersistencePromise.or([()=>this.persistence.Ri(e,un),()=>this.persistence.getTargetCache().containsKey(e,un),()=>{const hn=this.yi.get(un);return PersistencePromise.resolve(hn!==void 0&&hn>dn)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,un,dn,hn){this.targetId=e,this.fromCache=un,this.ds=dn,this.As=hn}static Rs(e,un){let dn=__PRIVATE_documentKeySet(),hn=__PRIVATE_documentKeySet();for(const fn of un.docChanges)switch(fn.type){case 0:dn=dn.add(fn.doc.key);break;case 1:hn=hn.add(fn.doc.key)}return new __PRIVATE_LocalViewChanges(e,un.fromCache,dn,hn)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,un){this.ys=e,this.indexManager=un,this.Vs=!0}getDocumentsMatchingQuery(e,un,dn,hn){const fn={result:null};return this.ws(e,un).next(pn=>{fn.result=pn}).next(()=>{if(!fn.result)return this.bs(e,un,hn,dn).next(pn=>{fn.result=pn})}).next(()=>{if(fn.result)return;const pn=new QueryContext;return this.Ss(e,un,pn).next(mn=>{if(fn.result=mn,this.fs)return this.Ds(e,un,pn,mn.size)})}).next(()=>fn.result)}Ds(e,un,dn,hn){return dn.documentReadCount<this.gs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(un),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(un),"scans",dn.documentReadCount,"local documents and returns",hn,"documents as results."),dn.documentReadCount>this.ps*hn?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(un),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(un))):PersistencePromise.resolve())}ws(e,un){if(__PRIVATE_queryMatchesAllDocuments(un))return PersistencePromise.resolve(null);let dn=__PRIVATE_queryToTarget(un);return this.indexManager.getIndexType(e,dn).next(hn=>hn===0?null:(un.limit!==null&&hn===1&&(un=__PRIVATE_queryWithLimit(un,null,"F"),dn=__PRIVATE_queryToTarget(un)),this.indexManager.getDocumentsMatchingTarget(e,dn).next(fn=>{const pn=__PRIVATE_documentKeySet(...fn);return this.ys.getDocuments(e,pn).next(mn=>this.indexManager.getMinOffset(e,dn).next(gn=>{const yn=this.vs(un,mn);return this.Cs(un,yn,pn,gn.readTime)?this.ws(e,__PRIVATE_queryWithLimit(un,null,"F")):this.Fs(e,yn,un,gn)}))})))}bs(e,un,dn,hn){return __PRIVATE_queryMatchesAllDocuments(un)||hn.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ys.getDocuments(e,dn).next(fn=>{const pn=this.vs(un,fn);return this.Cs(un,pn,dn,hn)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",hn.toString(),__PRIVATE_stringifyQuery(un)),this.Fs(e,pn,un,__PRIVATE_newIndexOffsetSuccessorFromReadTime(hn,Q$1)).next(mn=>mn))})}vs(e,un){let dn=new SortedSet(__PRIVATE_newQueryComparator(e));return un.forEach((hn,fn)=>{__PRIVATE_queryMatches(e,fn)&&(dn=dn.add(fn))}),dn}Cs(e,un,dn,hn){if(e.limit===null)return!1;if(dn.size!==un.size)return!0;const fn=e.limitType==="F"?un.last():un.first();return!!fn&&(fn.hasPendingWrites||fn.version.compareTo(hn)>0)}Ss(e,un,dn){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(un)),this.ys.getDocumentsMatchingQuery(e,un,IndexOffset.min(),dn)}Fs(e,un,dn,hn){return this.ys.getDocumentsMatchingQuery(e,dn,hn).next(fn=>(un.forEach(pn=>{fn=fn.insert(pn.key,pn)}),fn))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt$1="LocalStore",$t$1=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,un,dn,hn){this.persistence=e,this.Ms=un,this.serializer=hn,this.xs=new SortedMap(__PRIVATE_primitiveComparator),this.Os=new ObjectMap(fn=>__PRIVATE_canonifyTarget(fn),__PRIVATE_targetEquals),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(dn)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",un=>e.collect(un,this.xs))}}function __PRIVATE_newLocalStore(_e,e,un,dn){return new __PRIVATE_LocalStoreImpl(_e,e,un,dn)}async function __PRIVATE_localStoreHandleUserChange(_e,e){const un=__PRIVATE_debugCast(_e);return await un.persistence.runTransaction("Handle user change","readonly",dn=>{let hn;return un.mutationQueue.getAllMutationBatches(dn).next(fn=>(hn=fn,un.Ls(e),un.mutationQueue.getAllMutationBatches(dn))).next(fn=>{const pn=[],mn=[];let gn=__PRIVATE_documentKeySet();for(const yn of hn){pn.push(yn.batchId);for(const xn of yn.mutations)gn=gn.add(xn.key)}for(const yn of fn){mn.push(yn.batchId);for(const xn of yn.mutations)gn=gn.add(xn.key)}return un.localDocuments.getDocuments(dn,gn).next(yn=>({ks:yn,removedBatchIds:pn,addedBatchIds:mn}))})})}function __PRIVATE_localStoreAcknowledgeBatch(_e,e){const un=__PRIVATE_debugCast(_e);return un.persistence.runTransaction("Acknowledge batch","readwrite-primary",dn=>{const hn=e.batch.keys(),fn=un.Bs.newChangeBuffer({trackRemovals:!0});return function(mn,gn,yn,xn){const En=yn.batch,bn=En.keys();let vn=PersistencePromise.resolve();return bn.forEach(Pn=>{vn=vn.next(()=>xn.getEntry(gn,Pn)).next(Tn=>{const In=yn.docVersions.get(Pn);__PRIVATE_hardAssert(In!==null,48541),Tn.version.compareTo(In)<0&&(En.applyToRemoteDocument(Tn,yn),Tn.isValidDocument()&&(Tn.setReadTime(yn.commitVersion),xn.addEntry(Tn)))})}),vn.next(()=>mn.mutationQueue.removeMutationBatch(gn,En))}(un,dn,e,fn).next(()=>fn.apply(dn)).next(()=>un.mutationQueue.performConsistencyCheck(dn)).next(()=>un.documentOverlayCache.removeOverlaysForBatchId(dn,hn,e.batch.batchId)).next(()=>un.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(dn,function(mn){let gn=__PRIVATE_documentKeySet();for(let yn=0;yn<mn.mutationResults.length;++yn)mn.mutationResults[yn].transformResults.length>0&&(gn=gn.add(mn.batch.mutations[yn].key));return gn}(e))).next(()=>un.localDocuments.getDocuments(dn,hn))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(_e){const e=__PRIVATE_debugCast(_e);return e.persistence.runTransaction("Get last remote snapshot version","readonly",un=>e.Ti.getLastRemoteSnapshotVersion(un))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(_e,e){const un=__PRIVATE_debugCast(_e),dn=e.snapshotVersion;let hn=un.xs;return un.persistence.runTransaction("Apply remote event","readwrite-primary",fn=>{const pn=un.Bs.newChangeBuffer({trackRemovals:!0});hn=un.xs;const mn=[];e.targetChanges.forEach((xn,En)=>{const bn=hn.get(En);if(!bn)return;mn.push(un.Ti.removeMatchingKeys(fn,xn.removedDocuments,En).next(()=>un.Ti.addMatchingKeys(fn,xn.addedDocuments,En)));let vn=bn.withSequenceNumber(fn.currentSequenceNumber);e.targetMismatches.get(En)!==null?vn=vn.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):xn.resumeToken.approximateByteSize()>0&&(vn=vn.withResumeToken(xn.resumeToken,dn)),hn=hn.insert(En,vn),function(Tn,In,Rn){return Tn.resumeToken.approximateByteSize()===0||In.snapshotVersion.toMicroseconds()-Tn.snapshotVersion.toMicroseconds()>=$t$1?!0:Rn.addedDocuments.size+Rn.modifiedDocuments.size+Rn.removedDocuments.size>0}(bn,vn,xn)&&mn.push(un.Ti.updateTargetData(fn,vn))});let gn=__PRIVATE_mutableDocumentMap(),yn=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(xn=>{e.resolvedLimboDocuments.has(xn)&&mn.push(un.persistence.referenceDelegate.updateLimboDocument(fn,xn))}),mn.push(__PRIVATE_populateDocumentChangeBuffer(fn,pn,e.documentUpdates).next(xn=>{gn=xn.qs,yn=xn.Qs})),!dn.isEqual(SnapshotVersion.min())){const xn=un.Ti.getLastRemoteSnapshotVersion(fn).next(En=>un.Ti.setTargetsMetadata(fn,fn.currentSequenceNumber,dn));mn.push(xn)}return PersistencePromise.waitFor(mn).next(()=>pn.apply(fn)).next(()=>un.localDocuments.getLocalViewOfDocuments(fn,gn,yn)).next(()=>gn)}).then(fn=>(un.xs=hn,fn))}function __PRIVATE_populateDocumentChangeBuffer(_e,e,un){let dn=__PRIVATE_documentKeySet(),hn=__PRIVATE_documentKeySet();return un.forEach(fn=>dn=dn.add(fn)),e.getEntries(_e,dn).next(fn=>{let pn=__PRIVATE_mutableDocumentMap();return un.forEach((mn,gn)=>{const yn=fn.get(mn);gn.isFoundDocument()!==yn.isFoundDocument()&&(hn=hn.add(mn)),gn.isNoDocument()&&gn.version.isEqual(SnapshotVersion.min())?(e.removeEntry(mn,gn.readTime),pn=pn.insert(mn,gn)):!yn.isValidDocument()||gn.version.compareTo(yn.version)>0||gn.version.compareTo(yn.version)===0&&yn.hasPendingWrites?(e.addEntry(gn),pn=pn.insert(mn,gn)):__PRIVATE_logDebug(Qt$1,"Ignoring outdated watch update for ",mn,". Current version:",yn.version," Watch version:",gn.version)}),{qs:pn,Qs:hn}})}function __PRIVATE_localStoreGetNextMutationBatch(_e,e){const un=__PRIVATE_debugCast(_e);return un.persistence.runTransaction("Get next mutation batch","readonly",dn=>(e===void 0&&(e=G$1),un.mutationQueue.getNextMutationBatchAfterBatchId(dn,e)))}function __PRIVATE_localStoreAllocateTarget(_e,e){const un=__PRIVATE_debugCast(_e);return un.persistence.runTransaction("Allocate target","readwrite",dn=>{let hn;return un.Ti.getTargetData(dn,e).next(fn=>fn?(hn=fn,PersistencePromise.resolve(hn)):un.Ti.allocateTargetId(dn).next(pn=>(hn=new TargetData(e,pn,"TargetPurposeListen",dn.currentSequenceNumber),un.Ti.addTargetData(dn,hn).next(()=>hn))))}).then(dn=>{const hn=un.xs.get(dn.targetId);return(hn===null||dn.snapshotVersion.compareTo(hn.snapshotVersion)>0)&&(un.xs=un.xs.insert(dn.targetId,dn),un.Os.set(e,dn.targetId)),dn})}async function __PRIVATE_localStoreReleaseTarget(_e,e,un){const dn=__PRIVATE_debugCast(_e),hn=dn.xs.get(e),fn=un?"readwrite":"readwrite-primary";try{un||await dn.persistence.runTransaction("Release target",fn,pn=>dn.persistence.referenceDelegate.removeTarget(pn,hn))}catch(pn){if(!__PRIVATE_isIndexedDbTransactionError(pn))throw pn;__PRIVATE_logDebug(Qt$1,`Failed to update sequence numbers for target ${e}: ${pn}`)}dn.xs=dn.xs.remove(e),dn.Os.delete(hn.target)}function __PRIVATE_localStoreExecuteQuery(_e,e,un){const dn=__PRIVATE_debugCast(_e);let hn=SnapshotVersion.min(),fn=__PRIVATE_documentKeySet();return dn.persistence.runTransaction("Execute query","readwrite",pn=>function(gn,yn,xn){const En=__PRIVATE_debugCast(gn),bn=En.Os.get(xn);return bn!==void 0?PersistencePromise.resolve(En.xs.get(bn)):En.Ti.getTargetData(yn,xn)}(dn,pn,__PRIVATE_queryToTarget(e)).next(mn=>{if(mn)return hn=mn.lastLimboFreeSnapshotVersion,dn.Ti.getMatchingKeysForTargetId(pn,mn.targetId).next(gn=>{fn=gn})}).next(()=>dn.Ms.getDocumentsMatchingQuery(pn,e,un?hn:SnapshotVersion.min(),un?fn:__PRIVATE_documentKeySet())).next(mn=>(__PRIVATE_setMaxReadTime(dn,__PRIVATE_queryCollectionGroup(e),mn),{documents:mn,$s:fn})))}function __PRIVATE_setMaxReadTime(_e,e,un){let dn=_e.Ns.get(e)||SnapshotVersion.min();un.forEach((hn,fn)=>{fn.readTime.compareTo(dn)>0&&(dn=fn.readTime)}),_e.Ns.set(e,dn)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.xo=new __PRIVATE_LocalClientState,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,un,dn){}addLocalQueryTarget(e,un=!0){return un&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,un,dn){this.Oo[e]=un}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,un,dn){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt$1=null;function __PRIVATE_generateUniqueDebugId(){return jt$1===null?jt$1=function(){return 268435456+Math.round(2147483648*Math.random())}():jt$1++,"0x"+jt$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht$1="RestConnection",Jt$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const un=e.ssl?"https":"http",dn=encodeURIComponent(this.databaseId.projectId),hn=encodeURIComponent(this.databaseId.database);this.Ko=un+"://"+e.host,this.Wo=`projects/${dn}/databases/${hn}`,this.Go=this.databaseId.database===ut$1?`project_id=${dn}`:`project_id=${dn}&database_id=${hn}`}zo(e,un,dn,hn,fn){const pn=__PRIVATE_generateUniqueDebugId(),mn=this.jo(e,un.toUriEncodedString());__PRIVATE_logDebug(Ht$1,`Sending RPC '${e}' ${pn}:`,mn,dn);const gn={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(gn,hn,fn);const{host:yn}=new URL(mn),xn=isCloudWorkstation(yn);return this.Jo(e,mn,gn,dn,xn).then(En=>(__PRIVATE_logDebug(Ht$1,`Received RPC '${e}' ${pn}: `,En),En),En=>{throw __PRIVATE_logWarn(Ht$1,`RPC '${e}' ${pn} failed with error: `,En,"url: ",mn,"request:",dn),En})}Yo(e,un,dn,hn,fn,pn){return this.zo(e,un,dn,hn,fn)}Ho(e,un,dn){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x$2}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),un&&un.headers.forEach((hn,fn)=>e[fn]=hn),dn&&dn.headers.forEach((hn,fn)=>e[fn]=hn)}jo(e,un){const dn=Jt$1[e];return`${this.Ko}/v1/${un}:${dn}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,un,dn,hn,fn){const pn=__PRIVATE_generateUniqueDebugId();return new Promise((mn,gn)=>{const yn=new XhrIo;yn.setWithCredentials(!0),yn.listenOnce(EventType.COMPLETE,()=>{try{switch(yn.getLastErrorCode()){case ErrorCode$1.NO_ERROR:const En=yn.getResponseJson();__PRIVATE_logDebug(Yt$1,`XHR for RPC '${e}' ${pn} received:`,JSON.stringify(En)),mn(En);break;case ErrorCode$1.TIMEOUT:__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${pn} timed out`),gn(new FirestoreError(N$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode$1.HTTP_ERROR:const bn=yn.getStatus();if(__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${pn} failed with status:`,bn,"response text:",yn.getResponseText()),bn>0){let vn=yn.getResponseJson();Array.isArray(vn)&&(vn=vn[0]);const Pn=vn==null?void 0:vn.error;if(Pn&&Pn.status&&Pn.message){const Tn=function(Rn){const Sn=Rn.toLowerCase().replace(/_/g,"-");return Object.values(N$1).indexOf(Sn)>=0?Sn:N$1.UNKNOWN}(Pn.status);gn(new FirestoreError(Tn,Pn.message))}else gn(new FirestoreError(N$1.UNKNOWN,"Server responded with status "+yn.getStatus()))}else gn(new FirestoreError(N$1.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{h_:e,streamId:pn,P_:yn.getLastErrorCode(),T_:yn.getLastError()})}}finally{__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${pn} completed.`)}});const xn=JSON.stringify(hn);__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${pn} sending request:`,hn),yn.send(un,"POST",xn,dn,15)})}I_(e,un,dn){const hn=__PRIVATE_generateUniqueDebugId(),fn=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],pn=createWebChannelTransport(),mn=getStatEventTarget(),gn={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},yn=this.longPollingOptions.timeoutSeconds;yn!==void 0&&(gn.longPollingTimeout=Math.round(1e3*yn)),this.useFetchStreams&&(gn.useFetchStreams=!0),this.Ho(gn.initMessageHeaders,un,dn),gn.encodeInitMessageHeaders=!0;const xn=fn.join("");__PRIVATE_logDebug(Yt$1,`Creating RPC '${e}' stream ${hn}: ${xn}`,gn);const En=pn.createWebChannel(xn,gn);this.E_(En);let bn=!1,vn=!1;const Pn=new __PRIVATE_StreamBridge({Zo:In=>{vn?__PRIVATE_logDebug(Yt$1,`Not sending because RPC '${e}' stream ${hn} is closed:`,In):(bn||(__PRIVATE_logDebug(Yt$1,`Opening RPC '${e}' stream ${hn} transport.`),En.open(),bn=!0),__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${hn} sending:`,In),En.send(In))},Xo:()=>En.close()}),Tn=(In,Rn,Sn)=>{In.listen(Rn,Dn=>{try{Sn(Dn)}catch($n){setTimeout(()=>{throw $n},0)}})};return Tn(En,WebChannel.EventType.OPEN,()=>{vn||(__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${hn} transport opened.`),Pn.__())}),Tn(En,WebChannel.EventType.CLOSE,()=>{vn||(vn=!0,__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${hn} transport closed`),Pn.u_(),this.d_(En))}),Tn(En,WebChannel.EventType.ERROR,In=>{vn||(vn=!0,__PRIVATE_logWarn(Yt$1,`RPC '${e}' stream ${hn} transport errored. Name:`,In.name,"Message:",In.message),Pn.u_(new FirestoreError(N$1.UNAVAILABLE,"The operation could not be completed")))}),Tn(En,WebChannel.EventType.MESSAGE,In=>{var Rn;if(!vn){const Sn=In.data[0];__PRIVATE_hardAssert(!!Sn,16349);const Dn=Sn,$n=(Dn==null?void 0:Dn.error)||((Rn=Dn[0])===null||Rn===void 0?void 0:Rn.error);if($n){__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${hn} received error:`,$n);const Fn=$n.status;let Gn=function(Ln){const zn=ft$1[Ln];if(zn!==void 0)return __PRIVATE_mapCodeFromRpcCode(zn)}(Fn),kn=$n.message;Gn===void 0&&(Gn=N$1.INTERNAL,kn="Unknown error status: "+Fn+" with message "+$n.message),vn=!0,Pn.u_(new FirestoreError(Gn,kn)),En.close()}else __PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${hn} received:`,Sn),Pn.c_(Sn)}}),Tn(mn,Event$1.STAT_EVENT,In=>{In.stat===Stat.PROXY?__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${hn} detected buffering proxy`):In.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${hn} detected no buffering proxy`)}),setTimeout(()=>{Pn.a_()},0),Pn}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(un=>un===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(_e){return new JsonProtoSerializer(_e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,un,dn=1e3,hn=1.5,fn=6e4){this.xi=e,this.timerId=un,this.A_=dn,this.R_=hn,this.V_=fn,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const un=Math.floor(this.m_+this.w_()),dn=Math.max(0,Date.now()-this.g_),hn=Math.max(0,un-dn);hn>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${hn} ms (base delay: ${this.m_} ms, delay with jitter: ${un} ms, last attempt: ${dn} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,hn,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,un,dn,hn,fn,pn,mn,gn){this.xi=e,this.S_=dn,this.D_=hn,this.connection=fn,this.authCredentialsProvider=pn,this.appCheckCredentialsProvider=mn,this.listener=gn,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new __PRIVATE_ExponentialBackoff(e,un)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,un){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():un&&un.code===N$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(un.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):un&&un.code===N$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(un)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),un=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([dn,hn])=>{this.v_===un&&this.z_(dn,hn)},dn=>{e(()=>{const hn=new FirestoreError(N$1.UNKNOWN,"Fetching auth token failed: "+dn.message);return this.j_(hn)})})}z_(e,un){const dn=this.G_(this.v_);this.stream=this.H_(e,un),this.stream.e_(()=>{dn(()=>this.listener.e_())}),this.stream.n_(()=>{dn(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(hn=>{dn(()=>this.j_(hn))}),this.stream.onMessage(hn=>{dn(()=>++this.M_==1?this.J_(hn):this.onNext(hn))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return __PRIVATE_logDebug(Zt$1,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return un=>{this.xi.enqueueAndForget(()=>this.v_===e?un():(__PRIVATE_logDebug(Zt$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,un,dn,hn,fn,pn){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",un,dn,hn,pn),this.serializer=fn}H_(e,un){return this.connection.I_("Listen",e,un)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const un=__PRIVATE_fromWatchChange(this.serializer,e),dn=function(fn){if(!("targetChange"in fn))return SnapshotVersion.min();const pn=fn.targetChange;return pn.targetIds&&pn.targetIds.length?SnapshotVersion.min():pn.readTime?__PRIVATE_fromVersion(pn.readTime):SnapshotVersion.min()}(e);return this.listener.Y_(un,dn)}Z_(e){const un={};un.database=__PRIVATE_getEncodedDatabaseId(this.serializer),un.addTarget=function(fn,pn){let mn;const gn=pn.target;if(mn=__PRIVATE_targetIsDocumentTarget(gn)?{documents:__PRIVATE_toDocumentsTarget(fn,gn)}:{query:__PRIVATE_toQueryTarget(fn,gn).gt},mn.targetId=pn.targetId,pn.resumeToken.approximateByteSize()>0){mn.resumeToken=__PRIVATE_toBytes(fn,pn.resumeToken);const yn=__PRIVATE_toInt32Proto(fn,pn.expectedCount);yn!==null&&(mn.expectedCount=yn)}else if(pn.snapshotVersion.compareTo(SnapshotVersion.min())>0){mn.readTime=toTimestamp(fn,pn.snapshotVersion.toTimestamp());const yn=__PRIVATE_toInt32Proto(fn,pn.expectedCount);yn!==null&&(mn.expectedCount=yn)}return mn}(this.serializer,e);const dn=__PRIVATE_toListenRequestLabels(this.serializer,e);dn&&(un.labels=dn),this.Q_(un)}X_(e){const un={};un.database=__PRIVATE_getEncodedDatabaseId(this.serializer),un.removeTarget=e,this.Q_(un)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,un,dn,hn,fn,pn){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",un,dn,hn,pn),this.serializer=fn}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,un){return this.connection.I_("Write",e,un)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const un=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),dn=__PRIVATE_fromVersion(e.commitTime);return this.listener.ra(dn,un)}ia(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.Q_(e)}ta(e){const un={streamToken:this.lastStreamToken,writes:e.map(dn=>toMutation(this.serializer,dn))};this.Q_(un)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,un,dn,hn){super(),this.authCredentials=e,this.appCheckCredentials=un,this.connection=dn,this.serializer=hn,this.sa=!1}oa(){if(this.sa)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,un,dn,hn){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([fn,pn])=>this.connection.zo(e,__PRIVATE_toResourcePath(un,dn),hn,fn,pn)).catch(fn=>{throw fn.name==="FirebaseError"?(fn.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),fn):new FirestoreError(N$1.UNKNOWN,fn.toString())})}Yo(e,un,dn,hn,fn){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([pn,mn])=>this.connection.Yo(e,__PRIVATE_toResourcePath(un,dn),hn,pn,mn,fn)).catch(pn=>{throw pn.name==="FirebaseError"?(pn.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),pn):new FirestoreError(N$1.UNKNOWN,pn.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,un){this.asyncQueue=e,this.onlineStateHandler=un,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const un=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(__PRIVATE_logError(un),this.ua=!1):__PRIVATE_logDebug("OnlineStateTracker",un)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,un,dn,hn,fn){this.localStore=e,this.datastore=un,this.asyncQueue=dn,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=fn,this.Ra.No(pn=>{dn.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Xt$1,"Restarting streams for network reachability change."),await async function(gn){const yn=__PRIVATE_debugCast(gn);yn.da.add(4),await __PRIVATE_disableNetworkInternal(yn),yn.Va.set("Unknown"),yn.da.delete(4),await __PRIVATE_enableNetworkInternal(yn)}(this))})}),this.Va=new __PRIVATE_OnlineStateTracker(dn,hn)}}async function __PRIVATE_enableNetworkInternal(_e){if(__PRIVATE_canUseNetwork(_e))for(const e of _e.Aa)await e(!0)}async function __PRIVATE_disableNetworkInternal(_e){for(const e of _e.Aa)await e(!1)}function __PRIVATE_remoteStoreListen(_e,e){const un=__PRIVATE_debugCast(_e);un.Ea.has(e.targetId)||(un.Ea.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(un)?__PRIVATE_startWatchStream(un):__PRIVATE_ensureWatchStream(un).N_()&&__PRIVATE_sendWatchRequest(un,e))}function __PRIVATE_remoteStoreUnlisten(_e,e){const un=__PRIVATE_debugCast(_e),dn=__PRIVATE_ensureWatchStream(un);un.Ea.delete(e),dn.N_()&&__PRIVATE_sendUnwatchRequest(un,e),un.Ea.size===0&&(dn.N_()?dn.k_():__PRIVATE_canUseNetwork(un)&&un.Va.set("Unknown"))}function __PRIVATE_sendWatchRequest(_e,e){if(_e.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const un=_e.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(un)}__PRIVATE_ensureWatchStream(_e).Z_(e)}function __PRIVATE_sendUnwatchRequest(_e,e){_e.ma.Ke(e),__PRIVATE_ensureWatchStream(_e).X_(e)}function __PRIVATE_startWatchStream(_e){_e.ma=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>_e.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>_e.Ea.get(e)||null,Pt:()=>_e.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(_e).start(),_e.Va.ca()}function __PRIVATE_shouldStartWatchStream(_e){return __PRIVATE_canUseNetwork(_e)&&!__PRIVATE_ensureWatchStream(_e).O_()&&_e.Ea.size>0}function __PRIVATE_canUseNetwork(_e){return __PRIVATE_debugCast(_e).da.size===0}function __PRIVATE_cleanUpWatchStreamState(_e){_e.ma=void 0}async function __PRIVATE_onWatchStreamConnected(_e){_e.Va.set("Online")}async function __PRIVATE_onWatchStreamOpen(_e){_e.Ea.forEach((e,un)=>{__PRIVATE_sendWatchRequest(_e,e)})}async function __PRIVATE_onWatchStreamClose(_e,e){__PRIVATE_cleanUpWatchStreamState(_e),__PRIVATE_shouldStartWatchStream(_e)?(_e.Va.Pa(e),__PRIVATE_startWatchStream(_e)):_e.Va.set("Unknown")}async function __PRIVATE_onWatchStreamChange(_e,e,un){if(_e.Va.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(hn,fn){const pn=fn.cause;for(const mn of fn.targetIds)hn.Ea.has(mn)&&(await hn.remoteSyncer.rejectListen(mn,pn),hn.Ea.delete(mn),hn.ma.removeTarget(mn))}(_e,e)}catch(dn){__PRIVATE_logDebug(Xt$1,"Failed to remove targets %s: %s ",e.targetIds.join(","),dn),await __PRIVATE_disableNetworkUntilRecovery(_e,dn)}else if(e instanceof __PRIVATE_DocumentWatchChange?_e.ma.Xe(e):e instanceof __PRIVATE_ExistenceFilterChange?_e.ma.ot(e):_e.ma.nt(e),!un.isEqual(SnapshotVersion.min()))try{const dn=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(_e.localStore);un.compareTo(dn)>=0&&await function(fn,pn){const mn=fn.ma.It(pn);return mn.targetChanges.forEach((gn,yn)=>{if(gn.resumeToken.approximateByteSize()>0){const xn=fn.Ea.get(yn);xn&&fn.Ea.set(yn,xn.withResumeToken(gn.resumeToken,pn))}}),mn.targetMismatches.forEach((gn,yn)=>{const xn=fn.Ea.get(gn);if(!xn)return;fn.Ea.set(gn,xn.withResumeToken(ByteString.EMPTY_BYTE_STRING,xn.snapshotVersion)),__PRIVATE_sendUnwatchRequest(fn,gn);const En=new TargetData(xn.target,gn,yn,xn.sequenceNumber);__PRIVATE_sendWatchRequest(fn,En)}),fn.remoteSyncer.applyRemoteEvent(mn)}(_e,un)}catch(dn){__PRIVATE_logDebug(Xt$1,"Failed to raise snapshot:",dn),await __PRIVATE_disableNetworkUntilRecovery(_e,dn)}}async function __PRIVATE_disableNetworkUntilRecovery(_e,e,un){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;_e.da.add(1),await __PRIVATE_disableNetworkInternal(_e),_e.Va.set("Offline"),un||(un=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(_e.localStore)),_e.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(Xt$1,"Retrying IndexedDB access"),await un(),_e.da.delete(1),await __PRIVATE_enableNetworkInternal(_e)})}function __PRIVATE_executeWithRecovery(_e,e){return e().catch(un=>__PRIVATE_disableNetworkUntilRecovery(_e,un,e))}async function __PRIVATE_fillWritePipeline(_e){const e=__PRIVATE_debugCast(_e),un=__PRIVATE_ensureWriteStream(e);let dn=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:G$1;for(;__PRIVATE_canAddToWritePipeline(e);)try{const hn=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,dn);if(hn===null){e.Ia.length===0&&un.k_();break}dn=hn.batchId,__PRIVATE_addToWritePipeline(e,hn)}catch(hn){await __PRIVATE_disableNetworkUntilRecovery(e,hn)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(_e){return __PRIVATE_canUseNetwork(_e)&&_e.Ia.length<10}function __PRIVATE_addToWritePipeline(_e,e){_e.Ia.push(e);const un=__PRIVATE_ensureWriteStream(_e);un.N_()&&un.ea&&un.ta(e.mutations)}function __PRIVATE_shouldStartWriteStream(_e){return __PRIVATE_canUseNetwork(_e)&&!__PRIVATE_ensureWriteStream(_e).O_()&&_e.Ia.length>0}function __PRIVATE_startWriteStream(_e){__PRIVATE_ensureWriteStream(_e).start()}async function __PRIVATE_onWriteStreamOpen(_e){__PRIVATE_ensureWriteStream(_e).ia()}async function __PRIVATE_onWriteHandshakeComplete(_e){const e=__PRIVATE_ensureWriteStream(_e);for(const un of _e.Ia)e.ta(un.mutations)}async function __PRIVATE_onMutationResult(_e,e,un){const dn=_e.Ia.shift(),hn=MutationBatchResult.from(dn,e,un);await __PRIVATE_executeWithRecovery(_e,()=>_e.remoteSyncer.applySuccessfulWrite(hn)),await __PRIVATE_fillWritePipeline(_e)}async function __PRIVATE_onWriteStreamClose(_e,e){e&&__PRIVATE_ensureWriteStream(_e).ea&&await async function(dn,hn){if(function(pn){return __PRIVATE_isPermanentError(pn)&&pn!==N$1.ABORTED}(hn.code)){const fn=dn.Ia.shift();__PRIVATE_ensureWriteStream(dn).L_(),await __PRIVATE_executeWithRecovery(dn,()=>dn.remoteSyncer.rejectFailedWrite(fn.batchId,hn)),await __PRIVATE_fillWritePipeline(dn)}}(_e,e),__PRIVATE_shouldStartWriteStream(_e)&&__PRIVATE_startWriteStream(_e)}async function __PRIVATE_remoteStoreHandleCredentialChange(_e,e){const un=__PRIVATE_debugCast(_e);un.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Xt$1,"RemoteStore received new credentials");const dn=__PRIVATE_canUseNetwork(un);un.da.add(3),await __PRIVATE_disableNetworkInternal(un),dn&&un.Va.set("Unknown"),await un.remoteSyncer.handleCredentialChange(e),un.da.delete(3),await __PRIVATE_enableNetworkInternal(un)}async function __PRIVATE_remoteStoreApplyPrimaryState(_e,e){const un=__PRIVATE_debugCast(_e);e?(un.da.delete(2),await __PRIVATE_enableNetworkInternal(un)):e||(un.da.add(2),await __PRIVATE_disableNetworkInternal(un),un.Va.set("Unknown"))}function __PRIVATE_ensureWatchStream(_e){return _e.fa||(_e.fa=function(un,dn,hn){const fn=__PRIVATE_debugCast(un);return fn.oa(),new __PRIVATE_PersistentListenStream(dn,fn.connection,fn.authCredentials,fn.appCheckCredentials,fn.serializer,hn)}(_e.datastore,_e.asyncQueue,{e_:__PRIVATE_onWatchStreamConnected.bind(null,_e),n_:__PRIVATE_onWatchStreamOpen.bind(null,_e),i_:__PRIVATE_onWatchStreamClose.bind(null,_e),Y_:__PRIVATE_onWatchStreamChange.bind(null,_e)}),_e.Aa.push(async e=>{e?(_e.fa.L_(),__PRIVATE_shouldStartWatchStream(_e)?__PRIVATE_startWatchStream(_e):_e.Va.set("Unknown")):(await _e.fa.stop(),__PRIVATE_cleanUpWatchStreamState(_e))})),_e.fa}function __PRIVATE_ensureWriteStream(_e){return _e.ga||(_e.ga=function(un,dn,hn){const fn=__PRIVATE_debugCast(un);return fn.oa(),new __PRIVATE_PersistentWriteStream(dn,fn.connection,fn.authCredentials,fn.appCheckCredentials,fn.serializer,hn)}(_e.datastore,_e.asyncQueue,{e_:()=>Promise.resolve(),n_:__PRIVATE_onWriteStreamOpen.bind(null,_e),i_:__PRIVATE_onWriteStreamClose.bind(null,_e),na:__PRIVATE_onWriteHandshakeComplete.bind(null,_e),ra:__PRIVATE_onMutationResult.bind(null,_e)}),_e.Aa.push(async e=>{e?(_e.ga.L_(),await __PRIVATE_fillWritePipeline(_e)):(await _e.ga.stop(),_e.Ia.length>0&&(__PRIVATE_logDebug(Xt$1,`Stopping write stream with ${_e.Ia.length} pending writes`),_e.Ia=[]))})),_e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,un,dn,hn,fn){this.asyncQueue=e,this.timerId=un,this.targetTimeMs=dn,this.op=hn,this.removalCallback=fn,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(pn=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,un,dn,hn,fn){const pn=Date.now()+dn,mn=new DelayedOperation(e,un,pn,hn,fn);return mn.start(dn),mn}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(_e,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${_e}`),__PRIVATE_isIndexedDbTransactionError(_e))return new FirestoreError(N$1.UNAVAILABLE,`${e}: ${_e}`);throw _e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(un,dn)=>e(un,dn)||DocumentKey.comparator(un.key,dn.key):(un,dn)=>DocumentKey.comparator(un.key,dn.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const un=this.keyedMap.get(e);return un?this.sortedSet.indexOf(un):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((un,dn)=>(e(un),!1))}add(e){const un=this.delete(e.key);return un.copy(un.keyedMap.insert(e.key,e),un.sortedSet.insert(e,null))}delete(e){const un=this.get(e);return un?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(un)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const un=this.sortedSet.getIterator(),dn=e.sortedSet.getIterator();for(;un.hasNext();){const hn=un.getNext().key,fn=dn.getNext().key;if(!hn.isEqual(fn))return!1}return!0}toString(){const e=[];return this.forEach(un=>{e.push(un.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,un){const dn=new DocumentSet;return dn.comparator=this.comparator,dn.keyedMap=e,dn.sortedSet=un,dn}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.pa=new SortedMap(DocumentKey.comparator)}track(e){const un=e.doc.key,dn=this.pa.get(un);dn?e.type!==0&&dn.type===3?this.pa=this.pa.insert(un,e):e.type===3&&dn.type!==1?this.pa=this.pa.insert(un,{type:dn.type,doc:e.doc}):e.type===2&&dn.type===2?this.pa=this.pa.insert(un,{type:2,doc:e.doc}):e.type===2&&dn.type===0?this.pa=this.pa.insert(un,{type:0,doc:e.doc}):e.type===1&&dn.type===0?this.pa=this.pa.remove(un):e.type===1&&dn.type===2?this.pa=this.pa.insert(un,{type:1,doc:dn.doc}):e.type===0&&dn.type===1?this.pa=this.pa.insert(un,{type:2,doc:e.doc}):fail(63341,{Vt:e,ya:dn}):this.pa=this.pa.insert(un,e)}wa(){const e=[];return this.pa.inorderTraversal((un,dn)=>{e.push(dn)}),e}}class ViewSnapshot{constructor(e,un,dn,hn,fn,pn,mn,gn,yn){this.query=e,this.docs=un,this.oldDocs=dn,this.docChanges=hn,this.mutatedKeys=fn,this.fromCache=pn,this.syncStateChanged=mn,this.excludesMetadataChanges=gn,this.hasCachedResults=yn}static fromInitialDocuments(e,un,dn,hn,fn){const pn=[];return un.forEach(mn=>{pn.push({type:0,doc:mn})}),new ViewSnapshot(e,un,DocumentSet.emptySet(un),pn,dn,hn,!0,!1,fn)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const un=this.docChanges,dn=e.docChanges;if(un.length!==dn.length)return!1;for(let hn=0;hn<un.length;hn++)if(un[hn].type!==dn[hn].type||!un[hn].doc.isEqual(dn[hn].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(un,dn){const hn=__PRIVATE_debugCast(un),fn=hn.queries;hn.queries=__PRIVATE_newQueriesObjectMap(),fn.forEach((pn,mn)=>{for(const gn of mn.Sa)gn.onError(dn)})})(this,new FirestoreError(N$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(_e=>__PRIVATE_canonifyQuery(_e),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(_e,e){const un=__PRIVATE_debugCast(_e);let dn=3;const hn=e.query;let fn=un.queries.get(hn);fn?!fn.Da()&&e.va()&&(dn=2):(fn=new __PRIVATE_QueryListenersInfo,dn=e.va()?0:1);try{switch(dn){case 0:fn.ba=await un.onListen(hn,!0);break;case 1:fn.ba=await un.onListen(hn,!1);break;case 2:await un.onFirstRemoteStoreListen(hn)}}catch(pn){const mn=__PRIVATE_wrapInUserErrorIfRecoverable(pn,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(mn)}un.queries.set(hn,fn),fn.Sa.push(e),e.Fa(un.onlineState),fn.ba&&e.Ma(fn.ba)&&__PRIVATE_raiseSnapshotsInSyncEvent(un)}async function __PRIVATE_eventManagerUnlisten(_e,e){const un=__PRIVATE_debugCast(_e),dn=e.query;let hn=3;const fn=un.queries.get(dn);if(fn){const pn=fn.Sa.indexOf(e);pn>=0&&(fn.Sa.splice(pn,1),fn.Sa.length===0?hn=e.va()?0:1:!fn.Da()&&e.va()&&(hn=2))}switch(hn){case 0:return un.queries.delete(dn),un.onUnlisten(dn,!0);case 1:return un.queries.delete(dn),un.onUnlisten(dn,!1);case 2:return un.onLastRemoteStoreUnlisten(dn);default:return}}function __PRIVATE_eventManagerOnWatchChange(_e,e){const un=__PRIVATE_debugCast(_e);let dn=!1;for(const hn of e){const fn=hn.query,pn=un.queries.get(fn);if(pn){for(const mn of pn.Sa)mn.Ma(hn)&&(dn=!0);pn.ba=hn}}dn&&__PRIVATE_raiseSnapshotsInSyncEvent(un)}function __PRIVATE_eventManagerOnWatchError(_e,e,un){const dn=__PRIVATE_debugCast(_e),hn=dn.queries.get(e);if(hn)for(const fn of hn.Sa)fn.onError(un);dn.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(_e){_e.Ca.forEach(e=>{e.next()})}var en,tn;(tn=en||(en={})).xa="default",tn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,un,dn){this.query=e,this.Oa=un,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=dn||{}}Ma(e){if(!this.options.includeMetadataChanges){const dn=[];for(const hn of e.docChanges)hn.type!==3&&dn.push(hn);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,dn,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let un=!1;return this.Na?this.La(e)&&(this.Oa.next(e),un=!0):this.ka(e,this.onlineState)&&(this.qa(e),un=!0),this.Ba=e,un}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let un=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),un=!0),un}ka(e,un){if(!e.fromCache||!this.va())return!0;const dn=un!=="Offline";return(!this.options.Qa||!dn)&&(!e.docs.isEmpty()||e.hasCachedResults||un==="Offline")}La(e){if(e.docChanges.length>0)return!0;const un=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!un)&&this.options.includeMetadataChanges===!0}qa(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==en.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,un){this.query=e,this.Ha=un,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Za=__PRIVATE_newQueryComparator(e),this.Xa=new DocumentSet(this.Za)}get eu(){return this.Ha}tu(e,un){const dn=un?un.nu:new __PRIVATE_DocumentChangeSet,hn=un?un.Xa:this.Xa;let fn=un?un.mutatedKeys:this.mutatedKeys,pn=hn,mn=!1;const gn=this.query.limitType==="F"&&hn.size===this.query.limit?hn.last():null,yn=this.query.limitType==="L"&&hn.size===this.query.limit?hn.first():null;if(e.inorderTraversal((xn,En)=>{const bn=hn.get(xn),vn=__PRIVATE_queryMatches(this.query,En)?En:null,Pn=!!bn&&this.mutatedKeys.has(bn.key),Tn=!!vn&&(vn.hasLocalMutations||this.mutatedKeys.has(vn.key)&&vn.hasCommittedMutations);let In=!1;bn&&vn?bn.data.isEqual(vn.data)?Pn!==Tn&&(dn.track({type:3,doc:vn}),In=!0):this.ru(bn,vn)||(dn.track({type:2,doc:vn}),In=!0,(gn&&this.Za(vn,gn)>0||yn&&this.Za(vn,yn)<0)&&(mn=!0)):!bn&&vn?(dn.track({type:0,doc:vn}),In=!0):bn&&!vn&&(dn.track({type:1,doc:bn}),In=!0,(gn||yn)&&(mn=!0)),In&&(vn?(pn=pn.add(vn),fn=Tn?fn.add(xn):fn.delete(xn)):(pn=pn.delete(xn),fn=fn.delete(xn)))}),this.query.limit!==null)for(;pn.size>this.query.limit;){const xn=this.query.limitType==="F"?pn.last():pn.first();pn=pn.delete(xn.key),fn=fn.delete(xn.key),dn.track({type:1,doc:xn})}return{Xa:pn,nu:dn,Cs:mn,mutatedKeys:fn}}ru(e,un){return e.hasLocalMutations&&un.hasCommittedMutations&&!un.hasLocalMutations}applyChanges(e,un,dn,hn){const fn=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const pn=e.nu.wa();pn.sort((xn,En)=>function(vn,Pn){const Tn=In=>{switch(In){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Vt:In})}};return Tn(vn)-Tn(Pn)}(xn.type,En.type)||this.Za(xn.doc,En.doc)),this.iu(dn),hn=hn!=null&&hn;const mn=un&&!hn?this.su():[],gn=this.Ya.size===0&&this.current&&!hn?1:0,yn=gn!==this.Ja;return this.Ja=gn,pn.length!==0||yn?{snapshot:new ViewSnapshot(this.query,e.Xa,fn,pn,e.mutatedKeys,gn===0,yn,!1,!!dn&&dn.resumeToken.approximateByteSize()>0),ou:mn}:{ou:mn}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(un=>this.Ha=this.Ha.add(un)),e.modifiedDocuments.forEach(un=>{}),e.removedDocuments.forEach(un=>this.Ha=this.Ha.delete(un)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=__PRIVATE_documentKeySet(),this.Xa.forEach(dn=>{this._u(dn.key)&&(this.Ya=this.Ya.add(dn.key))});const un=[];return e.forEach(dn=>{this.Ya.has(dn)||un.push(new __PRIVATE_RemovedLimboDocument(dn))}),this.Ya.forEach(dn=>{e.has(dn)||un.push(new __PRIVATE_AddedLimboDocument(dn))}),un}au(e){this.Ha=e.$s,this.Ya=__PRIVATE_documentKeySet();const un=this.tu(e.documents);return this.applyChanges(un,!0)}uu(){return ViewSnapshot.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const nn="SyncEngine";class __PRIVATE_QueryView{constructor(e,un,dn){this.query=e,this.targetId=un,this.view=dn}}class LimboResolution{constructor(e){this.key=e,this.cu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,un,dn,hn,fn,pn){this.localStore=e,this.remoteStore=un,this.eventManager=dn,this.sharedClientState=hn,this.currentUser=fn,this.maxConcurrentLimboResolutions=pn,this.lu={},this.hu=new ObjectMap(mn=>__PRIVATE_canonifyQuery(mn),__PRIVATE_queryEquals),this.Pu=new Map,this.Tu=new Set,this.Iu=new SortedMap(DocumentKey.comparator),this.Eu=new Map,this.du=new __PRIVATE_ReferenceSet,this.Au={},this.Ru=new Map,this.Vu=__PRIVATE_TargetIdGenerator.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function __PRIVATE_syncEngineListen(_e,e,un=!0){const dn=__PRIVATE_ensureWatchCallbacks(_e);let hn;const fn=dn.hu.get(e);return fn?(dn.sharedClientState.addLocalQueryTarget(fn.targetId),hn=fn.view.uu()):hn=await __PRIVATE_allocateTargetAndMaybeListen(dn,e,un,!0),hn}async function __PRIVATE_triggerRemoteStoreListen(_e,e){const un=__PRIVATE_ensureWatchCallbacks(_e);await __PRIVATE_allocateTargetAndMaybeListen(un,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(_e,e,un,dn){const hn=await __PRIVATE_localStoreAllocateTarget(_e.localStore,__PRIVATE_queryToTarget(e)),fn=hn.targetId,pn=_e.sharedClientState.addLocalQueryTarget(fn,un);let mn;return dn&&(mn=await __PRIVATE_initializeViewAndComputeSnapshot(_e,e,fn,pn==="current",hn.resumeToken)),_e.isPrimaryClient&&un&&__PRIVATE_remoteStoreListen(_e.remoteStore,hn),mn}async function __PRIVATE_initializeViewAndComputeSnapshot(_e,e,un,dn,hn){_e.fu=(En,bn,vn)=>async function(Tn,In,Rn,Sn){let Dn=In.view.tu(Rn);Dn.Cs&&(Dn=await __PRIVATE_localStoreExecuteQuery(Tn.localStore,In.query,!1).then(({documents:kn})=>In.view.tu(kn,Dn)));const $n=Sn&&Sn.targetChanges.get(In.targetId),Fn=Sn&&Sn.targetMismatches.get(In.targetId)!=null,Gn=In.view.applyChanges(Dn,Tn.isPrimaryClient,$n,Fn);return __PRIVATE_updateTrackedLimbos(Tn,In.targetId,Gn.ou),Gn.snapshot}(_e,En,bn,vn);const fn=await __PRIVATE_localStoreExecuteQuery(_e.localStore,e,!0),pn=new __PRIVATE_View(e,fn.$s),mn=pn.tu(fn.documents),gn=TargetChange.createSynthesizedTargetChangeForCurrentChange(un,dn&&_e.onlineState!=="Offline",hn),yn=pn.applyChanges(mn,_e.isPrimaryClient,gn);__PRIVATE_updateTrackedLimbos(_e,un,yn.ou);const xn=new __PRIVATE_QueryView(e,un,pn);return _e.hu.set(e,xn),_e.Pu.has(un)?_e.Pu.get(un).push(e):_e.Pu.set(un,[e]),yn.snapshot}async function __PRIVATE_syncEngineUnlisten(_e,e,un){const dn=__PRIVATE_debugCast(_e),hn=dn.hu.get(e),fn=dn.Pu.get(hn.targetId);if(fn.length>1)return dn.Pu.set(hn.targetId,fn.filter(pn=>!__PRIVATE_queryEquals(pn,e))),void dn.hu.delete(e);dn.isPrimaryClient?(dn.sharedClientState.removeLocalQueryTarget(hn.targetId),dn.sharedClientState.isActiveQueryTarget(hn.targetId)||await __PRIVATE_localStoreReleaseTarget(dn.localStore,hn.targetId,!1).then(()=>{dn.sharedClientState.clearQueryState(hn.targetId),un&&__PRIVATE_remoteStoreUnlisten(dn.remoteStore,hn.targetId),__PRIVATE_removeAndCleanupTarget(dn,hn.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(dn,hn.targetId),await __PRIVATE_localStoreReleaseTarget(dn.localStore,hn.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(_e,e){const un=__PRIVATE_debugCast(_e),dn=un.hu.get(e),hn=un.Pu.get(dn.targetId);un.isPrimaryClient&&hn.length===1&&(un.sharedClientState.removeLocalQueryTarget(dn.targetId),__PRIVATE_remoteStoreUnlisten(un.remoteStore,dn.targetId))}async function __PRIVATE_syncEngineWrite(_e,e,un){const dn=__PRIVATE_syncEngineEnsureWriteCallbacks(_e);try{const hn=await function(pn,mn){const gn=__PRIVATE_debugCast(pn),yn=Timestamp.now(),xn=mn.reduce((vn,Pn)=>vn.add(Pn.key),__PRIVATE_documentKeySet());let En,bn;return gn.persistence.runTransaction("Locally write mutations","readwrite",vn=>{let Pn=__PRIVATE_mutableDocumentMap(),Tn=__PRIVATE_documentKeySet();return gn.Bs.getEntries(vn,xn).next(In=>{Pn=In,Pn.forEach((Rn,Sn)=>{Sn.isValidDocument()||(Tn=Tn.add(Rn))})}).next(()=>gn.localDocuments.getOverlayedDocuments(vn,Pn)).next(In=>{En=In;const Rn=[];for(const Sn of mn){const Dn=__PRIVATE_mutationExtractBaseValue(Sn,En.get(Sn.key).overlayedDocument);Dn!=null&&Rn.push(new __PRIVATE_PatchMutation(Sn.key,Dn,__PRIVATE_extractFieldMask(Dn.value.mapValue),Precondition.exists(!0)))}return gn.mutationQueue.addMutationBatch(vn,yn,Rn,mn)}).next(In=>{bn=In;const Rn=In.applyToLocalDocumentSet(En,Tn);return gn.documentOverlayCache.saveOverlays(vn,In.batchId,Rn)})}).then(()=>({batchId:bn.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(En)}))}(dn.localStore,e);dn.sharedClientState.addPendingMutation(hn.batchId),function(pn,mn,gn){let yn=pn.Au[pn.currentUser.toKey()];yn||(yn=new SortedMap(__PRIVATE_primitiveComparator)),yn=yn.insert(mn,gn),pn.Au[pn.currentUser.toKey()]=yn}(dn,hn.batchId,un),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(dn,hn.changes),await __PRIVATE_fillWritePipeline(dn.remoteStore)}catch(hn){const fn=__PRIVATE_wrapInUserErrorIfRecoverable(hn,"Failed to persist write");un.reject(fn)}}async function __PRIVATE_syncEngineApplyRemoteEvent(_e,e){const un=__PRIVATE_debugCast(_e);try{const dn=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(un.localStore,e);e.targetChanges.forEach((hn,fn)=>{const pn=un.Eu.get(fn);pn&&(__PRIVATE_hardAssert(hn.addedDocuments.size+hn.modifiedDocuments.size+hn.removedDocuments.size<=1,22616),hn.addedDocuments.size>0?pn.cu=!0:hn.modifiedDocuments.size>0?__PRIVATE_hardAssert(pn.cu,14607):hn.removedDocuments.size>0&&(__PRIVATE_hardAssert(pn.cu,42227),pn.cu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(un,dn,e)}catch(dn){await __PRIVATE_ignoreIfPrimaryLeaseLoss(dn)}}function __PRIVATE_syncEngineApplyOnlineStateChange(_e,e,un){const dn=__PRIVATE_debugCast(_e);if(dn.isPrimaryClient&&un===0||!dn.isPrimaryClient&&un===1){const hn=[];dn.hu.forEach((fn,pn)=>{const mn=pn.view.Fa(e);mn.snapshot&&hn.push(mn.snapshot)}),function(pn,mn){const gn=__PRIVATE_debugCast(pn);gn.onlineState=mn;let yn=!1;gn.queries.forEach((xn,En)=>{for(const bn of En.Sa)bn.Fa(mn)&&(yn=!0)}),yn&&__PRIVATE_raiseSnapshotsInSyncEvent(gn)}(dn.eventManager,e),hn.length&&dn.lu.Y_(hn),dn.onlineState=e,dn.isPrimaryClient&&dn.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(_e,e,un){const dn=__PRIVATE_debugCast(_e);dn.sharedClientState.updateQueryState(e,"rejected",un);const hn=dn.Eu.get(e),fn=hn&&hn.key;if(fn){let pn=new SortedMap(DocumentKey.comparator);pn=pn.insert(fn,MutableDocument.newNoDocument(fn,SnapshotVersion.min()));const mn=__PRIVATE_documentKeySet().add(fn),gn=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),pn,mn);await __PRIVATE_syncEngineApplyRemoteEvent(dn,gn),dn.Iu=dn.Iu.remove(fn),dn.Eu.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(dn)}else await __PRIVATE_localStoreReleaseTarget(dn.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(dn,e,un)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(_e,e){const un=__PRIVATE_debugCast(_e),dn=e.batch.batchId;try{const hn=await __PRIVATE_localStoreAcknowledgeBatch(un.localStore,e);__PRIVATE_processUserCallback(un,dn,null),__PRIVATE_triggerPendingWritesCallbacks(un,dn),un.sharedClientState.updateMutationState(dn,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(un,hn)}catch(hn){await __PRIVATE_ignoreIfPrimaryLeaseLoss(hn)}}async function __PRIVATE_syncEngineRejectFailedWrite(_e,e,un){const dn=__PRIVATE_debugCast(_e);try{const hn=await function(pn,mn){const gn=__PRIVATE_debugCast(pn);return gn.persistence.runTransaction("Reject batch","readwrite-primary",yn=>{let xn;return gn.mutationQueue.lookupMutationBatch(yn,mn).next(En=>(__PRIVATE_hardAssert(En!==null,37113),xn=En.keys(),gn.mutationQueue.removeMutationBatch(yn,En))).next(()=>gn.mutationQueue.performConsistencyCheck(yn)).next(()=>gn.documentOverlayCache.removeOverlaysForBatchId(yn,xn,mn)).next(()=>gn.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(yn,xn)).next(()=>gn.localDocuments.getDocuments(yn,xn))})}(dn.localStore,e);__PRIVATE_processUserCallback(dn,e,un),__PRIVATE_triggerPendingWritesCallbacks(dn,e),dn.sharedClientState.updateMutationState(e,"rejected",un),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(dn,hn)}catch(hn){await __PRIVATE_ignoreIfPrimaryLeaseLoss(hn)}}function __PRIVATE_triggerPendingWritesCallbacks(_e,e){(_e.Ru.get(e)||[]).forEach(un=>{un.resolve()}),_e.Ru.delete(e)}function __PRIVATE_processUserCallback(_e,e,un){const dn=__PRIVATE_debugCast(_e);let hn=dn.Au[dn.currentUser.toKey()];if(hn){const fn=hn.get(e);fn&&(un?fn.reject(un):fn.resolve(),hn=hn.remove(e)),dn.Au[dn.currentUser.toKey()]=hn}}function __PRIVATE_removeAndCleanupTarget(_e,e,un=null){_e.sharedClientState.removeLocalQueryTarget(e);for(const dn of _e.Pu.get(e))_e.hu.delete(dn),un&&_e.lu.gu(dn,un);_e.Pu.delete(e),_e.isPrimaryClient&&_e.du.Hr(e).forEach(dn=>{_e.du.containsKey(dn)||__PRIVATE_removeLimboTarget(_e,dn)})}function __PRIVATE_removeLimboTarget(_e,e){_e.Tu.delete(e.path.canonicalString());const un=_e.Iu.get(e);un!==null&&(__PRIVATE_remoteStoreUnlisten(_e.remoteStore,un),_e.Iu=_e.Iu.remove(e),_e.Eu.delete(un),__PRIVATE_pumpEnqueuedLimboResolutions(_e))}function __PRIVATE_updateTrackedLimbos(_e,e,un){for(const dn of un)dn instanceof __PRIVATE_AddedLimboDocument?(_e.du.addReference(dn.key,e),__PRIVATE_trackLimboChange(_e,dn)):dn instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(nn,"Document no longer in limbo: "+dn.key),_e.du.removeReference(dn.key,e),_e.du.containsKey(dn.key)||__PRIVATE_removeLimboTarget(_e,dn.key)):fail(19791,{pu:dn})}function __PRIVATE_trackLimboChange(_e,e){const un=e.key,dn=un.path.canonicalString();_e.Iu.get(un)||_e.Tu.has(dn)||(__PRIVATE_logDebug(nn,"New document in limbo: "+un),_e.Tu.add(dn),__PRIVATE_pumpEnqueuedLimboResolutions(_e))}function __PRIVATE_pumpEnqueuedLimboResolutions(_e){for(;_e.Tu.size>0&&_e.Iu.size<_e.maxConcurrentLimboResolutions;){const e=_e.Tu.values().next().value;_e.Tu.delete(e);const un=new DocumentKey(ResourcePath.fromString(e)),dn=_e.Vu.next();_e.Eu.set(dn,new LimboResolution(un)),_e.Iu=_e.Iu.insert(un,dn),__PRIVATE_remoteStoreListen(_e.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(un.path)),dn,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.le))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(_e,e,un){const dn=__PRIVATE_debugCast(_e),hn=[],fn=[],pn=[];dn.hu.isEmpty()||(dn.hu.forEach((mn,gn)=>{pn.push(dn.fu(gn,e,un).then(yn=>{var xn;if((yn||un)&&dn.isPrimaryClient){const En=yn?!yn.fromCache:(xn=un==null?void 0:un.targetChanges.get(gn.targetId))===null||xn===void 0?void 0:xn.current;dn.sharedClientState.updateQueryState(gn.targetId,En?"current":"not-current")}if(yn){hn.push(yn);const En=__PRIVATE_LocalViewChanges.Rs(gn.targetId,yn);fn.push(En)}}))}),await Promise.all(pn),dn.lu.Y_(hn),await async function(gn,yn){const xn=__PRIVATE_debugCast(gn);try{await xn.persistence.runTransaction("notifyLocalViewChanges","readwrite",En=>PersistencePromise.forEach(yn,bn=>PersistencePromise.forEach(bn.ds,vn=>xn.persistence.referenceDelegate.addReference(En,bn.targetId,vn)).next(()=>PersistencePromise.forEach(bn.As,vn=>xn.persistence.referenceDelegate.removeReference(En,bn.targetId,vn)))))}catch(En){if(!__PRIVATE_isIndexedDbTransactionError(En))throw En;__PRIVATE_logDebug(Qt$1,"Failed to update sequence numbers: "+En)}for(const En of yn){const bn=En.targetId;if(!En.fromCache){const vn=xn.xs.get(bn),Pn=vn.snapshotVersion,Tn=vn.withLastLimboFreeSnapshotVersion(Pn);xn.xs=xn.xs.insert(bn,Tn)}}}(dn.localStore,fn))}async function __PRIVATE_syncEngineHandleCredentialChange(_e,e){const un=__PRIVATE_debugCast(_e);if(!un.currentUser.isEqual(e)){__PRIVATE_logDebug(nn,"User change. New user:",e.toKey());const dn=await __PRIVATE_localStoreHandleUserChange(un.localStore,e);un.currentUser=e,function(fn,pn){fn.Ru.forEach(mn=>{mn.forEach(gn=>{gn.reject(new FirestoreError(N$1.CANCELLED,pn))})}),fn.Ru.clear()}(un,"'waitForPendingWrites' promise is rejected due to a user change."),un.sharedClientState.handleUserChange(e,dn.removedBatchIds,dn.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(un,dn.ks)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(_e,e){const un=__PRIVATE_debugCast(_e),dn=un.Eu.get(e);if(dn&&dn.cu)return __PRIVATE_documentKeySet().add(dn.key);{let hn=__PRIVATE_documentKeySet();const fn=un.Pu.get(e);if(!fn)return hn;for(const pn of fn){const mn=un.hu.get(pn);hn=hn.unionWith(mn.view.eu)}return hn}}function __PRIVATE_ensureWatchCallbacks(_e){const e=__PRIVATE_debugCast(_e);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.lu.Y_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.lu.gu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(_e){const e=__PRIVATE_debugCast(_e);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,un){return null}Cu(e,un){return null}Du(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Su(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.fi,this.serializer)}bu(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,un;(e=this.gcScheduler)===null||e===void 0||e.stop(),(un=this.indexBackfillerScheduler)===null||un===void 0||un.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}vu(e,un){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const dn=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(dn,e.asyncQueue,un)}Su(e){const un=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(dn=>__PRIVATE_MemoryLruDelegate.fi(dn,un),this.serializer)}}class OnlineComponentProvider{async initialize(e,un){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(un),this.remoteStore=this.createRemoteStore(un),this.eventManager=this.createEventManager(un),this.syncEngine=this.createSyncEngine(un,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=dn=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,dn,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const un=__PRIVATE_newSerializer(e.databaseInfo.databaseId),dn=function(fn){return new __PRIVATE_WebChannelConnection(fn)}(e.databaseInfo);return function(fn,pn,mn,gn){return new __PRIVATE_DatastoreImpl(fn,pn,mn,gn)}(e.authCredentials,e.appCheckCredentials,dn,un)}createRemoteStore(e){return function(dn,hn,fn,pn,mn){return new __PRIVATE_RemoteStoreImpl(dn,hn,fn,pn,mn)}(this.localStore,this.datastore,e.asyncQueue,un=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,un,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,un){return function(hn,fn,pn,mn,gn,yn,xn){const En=new __PRIVATE_SyncEngineImpl(hn,fn,pn,mn,gn,yn);return xn&&(En.mu=!0),En}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,un)}async terminate(){var e,un;await async function(hn){const fn=__PRIVATE_debugCast(hn);__PRIVATE_logDebug(Xt$1,"RemoteStore shutting down."),fn.da.add(5),await __PRIVATE_disableNetworkInternal(fn),fn.Ra.shutdown(),fn.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(un=this.eventManager)===null||un===void 0||un.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,un){setTimeout(()=>{this.muted||e(un)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="FirestoreClient";class FirestoreClient{constructor(e,un,dn,hn,fn){this.authCredentials=e,this.appCheckCredentials=un,this.asyncQueue=dn,this.databaseInfo=hn,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=fn,this.authCredentials.start(dn,async pn=>{__PRIVATE_logDebug(rn,"Received user=",pn.uid),await this.authCredentialListener(pn),this.user=pn}),this.appCheckCredentials.start(dn,pn=>(__PRIVATE_logDebug(rn,"Received new app check token=",pn),this.appCheckCredentialListener(pn,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(un){const dn=__PRIVATE_wrapInUserErrorIfRecoverable(un,"Failed to shutdown persistence");e.reject(dn)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(_e,e){_e.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(rn,"Initializing OfflineComponentProvider");const un=_e.configuration;await e.initialize(un);let dn=un.initialUser;_e.setCredentialChangeListener(async hn=>{dn.isEqual(hn)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,hn),dn=hn)}),e.persistence.setDatabaseDeletedListener(()=>_e.terminate()),_e._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(_e,e){_e.asyncQueue.verifyOperationInProgress();const un=await __PRIVATE_ensureOfflineComponents(_e);__PRIVATE_logDebug(rn,"Initializing OnlineComponentProvider"),await e.initialize(un,_e.configuration),_e.setCredentialChangeListener(dn=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,dn)),_e.setAppCheckTokenChangeListener((dn,hn)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,hn)),_e._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(_e){if(!_e._offlineComponents)if(_e._uninitializedComponentsProvider){__PRIVATE_logDebug(rn,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(_e,_e._uninitializedComponentsProvider._offline)}catch(e){const un=e;if(!function(hn){return hn.name==="FirebaseError"?hn.code===N$1.FAILED_PRECONDITION||hn.code===N$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&hn instanceof DOMException)||hn.code===22||hn.code===20||hn.code===11}(un))throw un;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+un),await __PRIVATE_setOfflineComponentProvider(_e,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(rn,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(_e,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return _e._offlineComponents}async function __PRIVATE_ensureOnlineComponents(_e){return _e._onlineComponents||(_e._uninitializedComponentsProvider?(__PRIVATE_logDebug(rn,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(_e,_e._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(rn,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(_e,new OnlineComponentProvider))),_e._onlineComponents}function __PRIVATE_getSyncEngine(_e){return __PRIVATE_ensureOnlineComponents(_e).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(_e){const e=await __PRIVATE_ensureOnlineComponents(_e),un=e.eventManager;return un.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),un.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),un.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),un.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),un}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(_e,e,un={}){const dn=new __PRIVATE_Deferred;return _e.asyncQueue.enqueueAndForget(async()=>function(fn,pn,mn,gn,yn){const xn=new __PRIVATE_AsyncObserver({next:bn=>{xn.xu(),pn.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(fn,En)),bn.fromCache&&gn.source==="server"?yn.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):yn.resolve(bn)},error:bn=>yn.reject(bn)}),En=new __PRIVATE_QueryListener(mn,xn,{includeMetadataChanges:!0,Qa:!0});return __PRIVATE_eventManagerListen(fn,En)}(await __PRIVATE_getEventManager(_e),_e.asyncQueue,e,un,dn)),dn.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(_e){const e={};return _e.timeoutSeconds!==void 0&&(e.timeoutSeconds=_e.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(_e,e,un){if(!un)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${_e}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(_e,e,un,dn){if(e===!0&&dn===!0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`${_e} and ${un} cannot be used together.`)}function __PRIVATE_validateDocumentPath(_e){if(!DocumentKey.isDocumentKey(_e))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${_e} has ${_e.length}.`)}function __PRIVATE_validateCollectionPath(_e){if(DocumentKey.isDocumentKey(_e))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${_e} has ${_e.length}.`)}function __PRIVATE_valueDescription(_e){if(_e===void 0)return"undefined";if(_e===null)return"null";if(typeof _e=="string")return _e.length>20&&(_e=`${_e.substring(0,20)}...`),JSON.stringify(_e);if(typeof _e=="number"||typeof _e=="boolean")return""+_e;if(typeof _e=="object"){if(_e instanceof Array)return"an array";{const e=function(dn){return dn.constructor?dn.constructor.name:null}(_e);return e?`a custom ${e} object`:"an object"}}return typeof _e=="function"?"a function":fail(12329,{type:typeof _e})}function __PRIVATE_cast(_e,e){if("_delegate"in _e&&(_e=_e._delegate),!(_e instanceof e)){if(e.name===_e.constructor.name)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const un=__PRIVATE_valueDescription(_e);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${un}`)}}return _e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="firestore.googleapis.com",_n=!0;class FirestoreSettingsImpl{constructor(e){var un,dn;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on,this.ssl=_n}else this.host=e.host,this.ssl=(un=e.ssl)!==null&&un!==void 0?un:_n;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ot$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((dn=e.experimentalLongPollingOptions)!==null&&dn!==void 0?dn:{}),function(fn){if(fn.timeoutSeconds!==void 0){if(isNaN(fn.timeoutSeconds))throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${fn.timeoutSeconds} (must not be NaN)`);if(fn.timeoutSeconds<5)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${fn.timeoutSeconds} (minimum allowed value is 5)`);if(fn.timeoutSeconds>30)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${fn.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(dn,hn){return dn.timeoutSeconds===hn.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,un,dn,hn){this._authCredentials=e,this._appCheckCredentials=un,this._databaseId=dn,this._app=hn,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(dn){if(!dn)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(dn.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(dn.sessionIndex||"0",dn.iamToken||null,dn.authTokenFactory||null);case"provider":return dn.client;default:throw new FirestoreError(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(un){const dn=sn.get(un);dn&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),sn.delete(un),dn.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(_e,e,un,dn={}){var hn;_e=__PRIVATE_cast(_e,Firestore$1);const fn=isCloudWorkstation(e),pn=_e._getSettings(),mn=Object.assign(Object.assign({},pn),{emulatorOptions:_e._getEmulatorOptions()}),gn=`${e}:${un}`;fn&&(pingServer(`https://${gn}`),updateEmulatorBanner("Firestore",!0)),pn.host!==on&&pn.host!==gn&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const yn=Object.assign(Object.assign({},pn),{host:gn,ssl:fn,emulatorOptions:dn});if(!deepEqual(yn,mn)&&(_e._setSettings(yn),dn.mockUserToken)){let xn,En;if(typeof dn.mockUserToken=="string")xn=dn.mockUserToken,En=User.MOCK_USER;else{xn=createMockUserToken(dn.mockUserToken,(hn=_e._app)===null||hn===void 0?void 0:hn.options.projectId);const bn=dn.mockUserToken.sub||dn.mockUserToken.user_id;if(!bn)throw new FirestoreError(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");En=new User(bn)}_e._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(xn,En))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,un,dn){this.converter=un,this._query=dn,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,un,dn){this.converter=un,this._key=dn,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}}class CollectionReference extends Query{constructor(e,un,dn){super(e,un,__PRIVATE_newQueryForPath(dn)),this._path=dn,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(_e,e,...un){if(_e=getModularInstance(_e),__PRIVATE_validateNonEmptyArgument("collection","path",e),_e instanceof Firestore$1){const dn=ResourcePath.fromString(e,...un);return __PRIVATE_validateCollectionPath(dn),new CollectionReference(_e,null,dn)}{if(!(_e instanceof DocumentReference||_e instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const dn=_e._path.child(ResourcePath.fromString(e,...un));return __PRIVATE_validateCollectionPath(dn),new CollectionReference(_e.firestore,null,dn)}}function doc(_e,e,...un){if(_e=getModularInstance(_e),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),_e instanceof Firestore$1){const dn=ResourcePath.fromString(e,...un);return __PRIVATE_validateDocumentPath(dn),new DocumentReference(_e,null,new DocumentKey(dn))}{if(!(_e instanceof DocumentReference||_e instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const dn=_e._path.child(ResourcePath.fromString(e,...un));return __PRIVATE_validateDocumentPath(dn),new DocumentReference(_e.firestore,_e instanceof CollectionReference?_e.converter:null,new DocumentKey(dn))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.rc=()=>{const dn=getDocument();dn&&__PRIVATE_logDebug(an,"Visibility state changed to "+dn.visibilityState),this.x_.b_()},this.sc=e;const un=getDocument();un&&typeof un.addEventListener=="function"&&un.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const un=getDocument();un&&typeof un.removeEventListener=="function"&&un.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const un=new __PRIVATE_Deferred;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(un.resolve,un.reject),un.promise)).then(()=>un.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(an,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const un=this.sc.then(()=>(this.ec=!0,e().catch(dn=>{throw this.Xu=dn,this.ec=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(dn)),dn}).then(dn=>(this.ec=!1,dn))));return this.sc=un,un}enqueueAfterDelay(e,un,dn){this.oc(),this.nc.indexOf(e)>-1&&(un=0);const hn=DelayedOperation.createAndSchedule(this,e,un,dn,fn=>this.uc(fn));return this.Zu.push(hn),hn}oc(){this.Xu&&fail(47125,{cc:__PRIVATE_getMessageOrStack(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const un of this.Zu)if(un.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((un,dn)=>un.targetTimeMs-dn.targetTimeMs);for(const un of this.Zu)if(un.skipDelay(),e!=="all"&&un.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const un=this.Zu.indexOf(e);this.Zu.splice(un,1)}}function __PRIVATE_getMessageOrStack(_e){let e=_e.message||"";return _e.stack&&(e=_e.stack.includes(_e.message)?_e.stack:_e.message+`
`+_e.stack),e}class Firestore extends Firestore$1{constructor(e,un,dn,hn){super(e,un,dn,hn),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(hn==null?void 0:hn.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(_e,e){const un=typeof _e=="object"?_e:getApp(),dn=typeof _e=="string"?_e:ut$1,hn=_getProvider(un,"firestore").getImmediate({identifier:dn});if(!hn._initialized){const fn=getDefaultEmulatorHostnameAndPort("firestore");fn&&connectFirestoreEmulator(hn,...fn)}return hn}function ensureFirestoreConfigured(_e){if(_e._terminated)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.");return _e._firestoreClient||__PRIVATE_configureFirestore(_e),_e._firestoreClient}function __PRIVATE_configureFirestore(_e){var e,un,dn;const hn=_e._freezeSettings(),fn=function(mn,gn,yn,xn){return new DatabaseInfo(mn,gn,yn,xn.host,xn.ssl,xn.experimentalForceLongPolling,xn.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(xn.experimentalLongPollingOptions),xn.useFetchStreams,xn.isUsingEmulator)}(_e._databaseId,((e=_e._app)===null||e===void 0?void 0:e.options.appId)||"",_e._persistenceKey,hn);_e._componentsProvider||!((un=hn.localCache)===null||un===void 0)&&un._offlineComponentProvider&&(!((dn=hn.localCache)===null||dn===void 0)&&dn._onlineComponentProvider)&&(_e._componentsProvider={_offline:hn.localCache._offlineComponentProvider,_online:hn.localCache._onlineComponentProvider}),_e._firestoreClient=new FirestoreClient(_e._authCredentials,_e._appCheckCredentials,_e._queue,fn,_e._componentsProvider&&function(mn){const gn=mn==null?void 0:mn._online.build();return{_offline:mn==null?void 0:mn._offline.build(gn),_online:gn}}(_e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(un){throw new FirestoreError(N$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+un)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let un=0;un<e.length;++un)if(e[un].length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,un){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(un)||un<-180||un>180)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+un);this._lat=e,this._long=un}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(un=>un)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(dn,hn){if(dn.length!==hn.length)return!1;for(let fn=0;fn<dn.length;++fn)if(dn[fn]!==hn[fn])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=/^__.*__$/;class ParsedSetData{constructor(e,un,dn){this.data=e,this.fieldMask=un,this.fieldTransforms=dn}toMutation(e,un){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,un,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,un,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,un,dn){this.data=e,this.fieldMask=un,this.fieldTransforms=dn}toMutation(e,un){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,un,this.fieldTransforms)}}function __PRIVATE_isWrite(_e){switch(_e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ic:_e})}}class __PRIVATE_ParseContextImpl{constructor(e,un,dn,hn,fn,pn){this.settings=e,this.databaseId=un,this.serializer=dn,this.ignoreUndefinedProperties=hn,fn===void 0&&this.Ec(),this.fieldTransforms=fn||[],this.fieldMask=pn||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var un;const dn=(un=this.path)===null||un===void 0?void 0:un.child(e),hn=this.dc({path:dn,Rc:!1});return hn.Vc(e),hn}mc(e){var un;const dn=(un=this.path)===null||un===void 0?void 0:un.child(e),hn=this.dc({path:dn,Rc:!1});return hn.Ec(),hn}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(un=>e.isPrefixOf(un))!==void 0||this.fieldTransforms.find(un=>e.isPrefixOf(un.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ic)&&cn.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,un,dn){this.databaseId=e,this.ignoreUndefinedProperties=un,this.serializer=dn||__PRIVATE_newSerializer(e)}bc(e,un,dn,hn=!1){return new __PRIVATE_ParseContextImpl({Ic:e,methodName:un,wc:dn,path:FieldPath$1.emptyPath(),Rc:!1,yc:hn},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(_e){const e=_e._freezeSettings(),un=__PRIVATE_newSerializer(_e._databaseId);return new __PRIVATE_UserDataReader(_e._databaseId,!!e.ignoreUndefinedProperties,un)}function __PRIVATE_parseSetData(_e,e,un,dn,hn,fn={}){const pn=_e.bc(fn.merge||fn.mergeFields?2:0,e,un,hn);__PRIVATE_validatePlainObject("Data must be an object, but it was:",pn,dn);const mn=__PRIVATE_parseObject(dn,pn);let gn,yn;if(fn.merge)gn=new FieldMask(pn.fieldMask),yn=pn.fieldTransforms;else if(fn.mergeFields){const xn=[];for(const En of fn.mergeFields){const bn=__PRIVATE_fieldPathFromArgument$1(e,En,un);if(!pn.contains(bn))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Field '${bn}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(xn,bn)||xn.push(bn)}gn=new FieldMask(xn),yn=pn.fieldTransforms.filter(En=>gn.covers(En.field))}else gn=null,yn=pn.fieldTransforms;return new ParsedSetData(new ObjectValue(mn),gn,yn)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}function __PRIVATE_parseUpdateData(_e,e,un,dn){const hn=_e.bc(1,e,un);__PRIVATE_validatePlainObject("Data must be an object, but it was:",hn,dn);const fn=[],pn=ObjectValue.empty();forEach(dn,(gn,yn)=>{const xn=__PRIVATE_fieldPathFromDotSeparatedString(e,gn,un);yn=getModularInstance(yn);const En=hn.mc(xn);if(yn instanceof __PRIVATE_DeleteFieldValueImpl)fn.push(xn);else{const bn=__PRIVATE_parseData(yn,En);bn!=null&&(fn.push(xn),pn.set(xn,bn))}});const mn=new FieldMask(fn);return new ParsedUpdateData(pn,mn,hn.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(_e,e,un,dn,hn,fn){const pn=_e.bc(1,e,un),mn=[__PRIVATE_fieldPathFromArgument$1(e,dn,un)],gn=[hn];if(fn.length%2!=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let bn=0;bn<fn.length;bn+=2)mn.push(__PRIVATE_fieldPathFromArgument$1(e,fn[bn])),gn.push(fn[bn+1]);const yn=[],xn=ObjectValue.empty();for(let bn=mn.length-1;bn>=0;--bn)if(!__PRIVATE_fieldMaskContains(yn,mn[bn])){const vn=mn[bn];let Pn=gn[bn];Pn=getModularInstance(Pn);const Tn=pn.mc(vn);if(Pn instanceof __PRIVATE_DeleteFieldValueImpl)yn.push(vn);else{const In=__PRIVATE_parseData(Pn,Tn);In!=null&&(yn.push(vn),xn.set(vn,In))}}const En=new FieldMask(yn);return new ParsedUpdateData(xn,En,pn.fieldTransforms)}function __PRIVATE_parseQueryValue(_e,e,un,dn=!1){return __PRIVATE_parseData(un,_e.bc(dn?4:3,e))}function __PRIVATE_parseData(_e,e){if(__PRIVATE_looksLikeJsonObject(_e=getModularInstance(_e)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,_e),__PRIVATE_parseObject(_e,e);if(_e instanceof FieldValue)return function(dn,hn){if(!__PRIVATE_isWrite(hn.Ic))throw hn.gc(`${dn._methodName}() can only be used with update() and set()`);if(!hn.path)throw hn.gc(`${dn._methodName}() is not currently supported inside arrays`);const fn=dn._toFieldTransform(hn);fn&&hn.fieldTransforms.push(fn)}(_e,e),null;if(_e===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),_e instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(dn,hn){const fn=[];let pn=0;for(const mn of dn){let gn=__PRIVATE_parseData(mn,hn.fc(pn));gn==null&&(gn={nullValue:"NULL_VALUE"}),fn.push(gn),pn++}return{arrayValue:{values:fn}}}(_e,e)}return function(dn,hn){if((dn=getModularInstance(dn))===null)return{nullValue:"NULL_VALUE"};if(typeof dn=="number")return toNumber(hn.serializer,dn);if(typeof dn=="boolean")return{booleanValue:dn};if(typeof dn=="string")return{stringValue:dn};if(dn instanceof Date){const fn=Timestamp.fromDate(dn);return{timestampValue:toTimestamp(hn.serializer,fn)}}if(dn instanceof Timestamp){const fn=new Timestamp(dn.seconds,1e3*Math.floor(dn.nanoseconds/1e3));return{timestampValue:toTimestamp(hn.serializer,fn)}}if(dn instanceof GeoPoint)return{geoPointValue:{latitude:dn.latitude,longitude:dn.longitude}};if(dn instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(hn.serializer,dn._byteString)};if(dn instanceof DocumentReference){const fn=hn.databaseId,pn=dn.firestore._databaseId;if(!pn.isEqual(fn))throw hn.gc(`Document reference is for database ${pn.projectId}/${pn.database} but should be for database ${fn.projectId}/${fn.database}`);return{referenceValue:__PRIVATE_toResourceName(dn.firestore._databaseId||hn.databaseId,dn._key.path)}}if(dn instanceof VectorValue)return function(pn,mn){return{mapValue:{fields:{[ct$1]:{stringValue:Pt$1},[Tt$1]:{arrayValue:{values:pn.toArray().map(yn=>{if(typeof yn!="number")throw mn.gc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(mn.serializer,yn)})}}}}}}(dn,hn);throw hn.gc(`Unsupported field value: ${__PRIVATE_valueDescription(dn)}`)}(_e,e)}function __PRIVATE_parseObject(_e,e){const un={};return isEmpty(_e)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(_e,(dn,hn)=>{const fn=__PRIVATE_parseData(hn,e.Ac(dn));fn!=null&&(un[dn]=fn)}),{mapValue:{fields:un}}}function __PRIVATE_looksLikeJsonObject(_e){return!(typeof _e!="object"||_e===null||_e instanceof Array||_e instanceof Date||_e instanceof Timestamp||_e instanceof GeoPoint||_e instanceof Bytes||_e instanceof DocumentReference||_e instanceof FieldValue||_e instanceof VectorValue)}function __PRIVATE_validatePlainObject(_e,e,un){if(!__PRIVATE_looksLikeJsonObject(un)||!function(hn){return typeof hn=="object"&&hn!==null&&(Object.getPrototypeOf(hn)===Object.prototype||Object.getPrototypeOf(hn)===null)}(un)){const dn=__PRIVATE_valueDescription(un);throw dn==="an object"?e.gc(_e+" a custom object"):e.gc(_e+" "+dn)}}function __PRIVATE_fieldPathFromArgument$1(_e,e,un){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(_e,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",_e,!1,void 0,un)}const ln$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(_e,e,un){if(e.search(ln$1)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,_e,!1,void 0,un);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,_e,!1,void 0,un)}}function __PRIVATE_createError(_e,e,un,dn,hn){const fn=dn&&!dn.isEmpty(),pn=hn!==void 0;let mn=`Function ${e}() called with invalid data`;un&&(mn+=" (via `toFirestore()`)"),mn+=". ";let gn="";return(fn||pn)&&(gn+=" (found",fn&&(gn+=` in field ${dn}`),pn&&(gn+=` in document ${hn}`),gn+=")"),new FirestoreError(N$1.INVALID_ARGUMENT,mn+_e+gn)}function __PRIVATE_fieldMaskContains(_e,e){return _e.some(un=>un.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,un,dn,hn,fn){this._firestore=e,this._userDataWriter=un,this._key=dn,this._document=hn,this._converter=fn}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const un=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(un!==null)return this._userDataWriter.convertValue(un)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(_e,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(_e,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(_e){if(_e.limitType==="L"&&_e.explicitOrderBy.length===0)throw new FirestoreError(N$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(_e,e,...un){let dn=[];e instanceof AppliableConstraint&&dn.push(e),dn=dn.concat(un),function(fn){const pn=fn.filter(gn=>gn instanceof QueryCompositeFilterConstraint).length,mn=fn.filter(gn=>gn instanceof QueryFieldFilterConstraint).length;if(pn>1||pn>0&&mn>0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(dn);for(const hn of dn)_e=hn._apply(_e);return _e}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,un,dn){super(),this._field=e,this._op=un,this._value=dn,this.type="where"}static _create(e,un,dn){return new QueryFieldFilterConstraint(e,un,dn)}_apply(e){const un=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,un),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,un))}_parse(e){const un=__PRIVATE_newUserDataReader(e.firestore);return function(fn,pn,mn,gn,yn,xn,En){let bn;if(yn.isKeyField()){if(xn==="array-contains"||xn==="array-contains-any")throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${xn}' queries on documentId().`);if(xn==="in"||xn==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(En,xn);const Pn=[];for(const Tn of En)Pn.push(__PRIVATE_parseDocumentIdValue(gn,fn,Tn));bn={arrayValue:{values:Pn}}}else bn=__PRIVATE_parseDocumentIdValue(gn,fn,En)}else xn!=="in"&&xn!=="not-in"&&xn!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(En,xn),bn=__PRIVATE_parseQueryValue(mn,pn,En,xn==="in"||xn==="not-in");return FieldFilter.create(yn,xn,bn)}(e._query,"where",un,e.firestore._databaseId,this._field,this._op,this._value)}}function where(_e,e,un){const dn=e,hn=__PRIVATE_fieldPathFromArgument("where",_e);return QueryFieldFilterConstraint._create(hn,dn,un)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,un){super(),this.type=e,this._queryConstraints=un}static _create(e,un){return new QueryCompositeFilterConstraint(e,un)}_parse(e){const un=this._queryConstraints.map(dn=>dn._parse(e)).filter(dn=>dn.getFilters().length>0);return un.length===1?un[0]:CompositeFilter.create(un,this._getOperator())}_apply(e){const un=this._parse(e);return un.getFilters().length===0?e:(function(hn,fn){let pn=hn;const mn=fn.getFlattenedFilters();for(const gn of mn)__PRIVATE_validateNewFieldFilter(pn,gn),pn=__PRIVATE_queryWithAddedFilter(pn,gn)}(e._query,un),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,un)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,un){super(),this._field=e,this._direction=un,this.type="orderBy"}static _create(e,un){return new QueryOrderByConstraint(e,un)}_apply(e){const un=function(hn,fn,pn){if(hn.startAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(hn.endAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(fn,pn)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(hn,fn){const pn=hn.explicitOrderBy.concat([fn]);return new __PRIVATE_QueryImpl(hn.path,hn.collectionGroup,pn,hn.filters.slice(),hn.limit,hn.limitType,hn.startAt,hn.endAt)}(e._query,un))}}function orderBy(_e,e="asc"){const un=e,dn=__PRIVATE_fieldPathFromArgument("orderBy",_e);return QueryOrderByConstraint._create(dn,un)}function __PRIVATE_parseDocumentIdValue(_e,e,un){if(typeof(un=getModularInstance(un))=="string"){if(un==="")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&un.indexOf("/")!==-1)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${un}' contains a '/' character.`);const dn=e.path.child(ResourcePath.fromString(un));if(!DocumentKey.isDocumentKey(dn))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${dn}' is not because it has an odd number of segments (${dn.length}).`);return __PRIVATE_refValue(_e,new DocumentKey(dn))}if(un instanceof DocumentReference)return __PRIVATE_refValue(_e,un._key);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(un)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(_e,e){if(!Array.isArray(_e)||_e.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(_e,e){const un=function(hn,fn){for(const pn of hn)for(const mn of pn.getFlattenedFilters())if(fn.indexOf(mn.op)>=0)return mn.op;return null}(_e.filters,function(hn){switch(hn){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(un!==null)throw un===e.op?new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${un.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,un="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,un);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,un);case 11:return this.convertObject(e.mapValue,un);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,un){return this.convertObjectMap(e.fields,un)}convertObjectMap(e,un="none"){const dn={};return forEach(e,(hn,fn)=>{dn[hn]=this.convertValue(fn,un)}),dn}convertVectorValue(e){var un,dn,hn;const fn=(hn=(dn=(un=e.fields)===null||un===void 0?void 0:un[Tt$1].arrayValue)===null||dn===void 0?void 0:dn.values)===null||hn===void 0?void 0:hn.map(pn=>__PRIVATE_normalizeNumber(pn.doubleValue));return new VectorValue(fn)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,un){return(e.values||[]).map(dn=>this.convertValue(dn,un))}convertServerTimestamp(e,un){switch(un){case"previous":const dn=__PRIVATE_getPreviousValue(e);return dn==null?null:this.convertValue(dn,un);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const un=__PRIVATE_normalizeTimestamp(e);return new Timestamp(un.seconds,un.nanos)}convertDocumentKey(e,un){const dn=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(dn),9688,{name:e});const hn=new DatabaseId(dn.get(1),dn.get(3)),fn=new DocumentKey(dn.popFirst(5));return hn.isEqual(un)||__PRIVATE_logError(`Document ${fn} contains a document reference within a different database (${hn.projectId}/${hn.database}) which is not supported. It will be treated as a reference in the current database (${un.projectId}/${un.database}) instead.`),fn}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(_e,e,un){let dn;return dn=_e?_e.toFirestore(e):e,dn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(e,un){this.hasPendingWrites=e,this.fromCache=un}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,un,dn,hn,fn,pn){super(e,un,dn,hn,pn),this._firestore=e,this._firestoreImpl=e,this.metadata=fn}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const un=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(un,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,un={}){if(this._document){const dn=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(dn!==null)return this._userDataWriter.convertValue(dn,un.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,un,dn,hn){this._firestore=e,this._userDataWriter=un,this._snapshot=hn,this.metadata=new SnapshotMetadata(hn.hasPendingWrites,hn.fromCache),this.query=dn}get docs(){const e=[];return this.forEach(un=>e.push(un)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,un){this._snapshot.docs.forEach(dn=>{e.call(un,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,dn.key,dn,new SnapshotMetadata(this._snapshot.mutatedKeys.has(dn.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const un=!!e.includeMetadataChanges;if(un&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===un||(this._cachedChanges=function(hn,fn){if(hn._snapshot.oldDocs.isEmpty()){let pn=0;return hn._snapshot.docChanges.map(mn=>{const gn=new QueryDocumentSnapshot(hn._firestore,hn._userDataWriter,mn.doc.key,mn.doc,new SnapshotMetadata(hn._snapshot.mutatedKeys.has(mn.doc.key),hn._snapshot.fromCache),hn.query.converter);return mn.doc,{type:"added",doc:gn,oldIndex:-1,newIndex:pn++}})}{let pn=hn._snapshot.oldDocs;return hn._snapshot.docChanges.filter(mn=>fn||mn.type!==3).map(mn=>{const gn=new QueryDocumentSnapshot(hn._firestore,hn._userDataWriter,mn.doc.key,mn.doc,new SnapshotMetadata(hn._snapshot.mutatedKeys.has(mn.doc.key),hn._snapshot.fromCache),hn.query.converter);let yn=-1,xn=-1;return mn.type!==0&&(yn=pn.indexOf(mn.doc.key),pn=pn.delete(mn.doc.key)),mn.type!==1&&(pn=pn.add(mn.doc),xn=pn.indexOf(mn.doc.key)),{type:__PRIVATE_resultChangeType(mn.type),doc:gn,oldIndex:yn,newIndex:xn}})}}(this,un),this._cachedChangesIncludeMetadataChanges=un),this._cachedChanges}}function __PRIVATE_resultChangeType(_e){switch(_e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:_e})}}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const un=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,un)}}function getDocs(_e){_e=__PRIVATE_cast(_e,Query);const e=__PRIVATE_cast(_e.firestore,Firestore),un=ensureFirestoreConfigured(e),dn=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(_e._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(un,_e._query).then(hn=>new QuerySnapshot(e,dn,_e,hn))}function updateDoc(_e,e,un,...dn){_e=__PRIVATE_cast(_e,DocumentReference);const hn=__PRIVATE_cast(_e.firestore,Firestore),fn=__PRIVATE_newUserDataReader(hn);let pn;return pn=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(fn,"updateDoc",_e._key,e,un,dn):__PRIVATE_parseUpdateData(fn,"updateDoc",_e._key,e),executeWrite(hn,[pn.toMutation(_e._key,Precondition.exists(!0))])}function deleteDoc(_e){return executeWrite(__PRIVATE_cast(_e.firestore,Firestore),[new __PRIVATE_DeleteMutation(_e._key,Precondition.none())])}function addDoc(_e,e){const un=__PRIVATE_cast(_e.firestore,Firestore),dn=doc(_e),hn=__PRIVATE_applyFirestoreDataConverter(_e.converter,e);return executeWrite(un,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(_e.firestore),"addDoc",dn._key,hn,_e.converter!==null,{}).toMutation(dn._key,Precondition.exists(!1))]).then(()=>dn)}function executeWrite(_e,e){return function(dn,hn){const fn=new __PRIVATE_Deferred;return dn.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(dn),hn,fn)),fn.promise}(ensureFirestoreConfigured(_e),e)}(function(e,un=!0){(function(hn){x$2=hn})(SDK_VERSION),_registerComponent(new Component("firestore",(dn,{instanceIdentifier:hn,options:fn})=>{const pn=dn.getProvider("app").getImmediate(),mn=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(dn.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(pn,dn.getProvider("app-check-internal")),function(yn,xn){if(!Object.prototype.hasOwnProperty.apply(yn.options,["projectId"]))throw new FirestoreError(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(yn.options.projectId,xn)}(pn,hn),pn);return fn=Object.assign({useFetchStreams:un},fn),mn._setSettings(fn),mn},"PUBLIC").setMultipleInstances(!0)),registerVersion(F$1,M$1,e),registerVersion(F$1,M$1,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(e,un,dn=0){super(prependCode(e),`Firebase Storage: ${un} (${prependCode(e)})`),this.status_=dn,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(_e){_e.UNKNOWN="unknown",_e.OBJECT_NOT_FOUND="object-not-found",_e.BUCKET_NOT_FOUND="bucket-not-found",_e.PROJECT_NOT_FOUND="project-not-found",_e.QUOTA_EXCEEDED="quota-exceeded",_e.UNAUTHENTICATED="unauthenticated",_e.UNAUTHORIZED="unauthorized",_e.UNAUTHORIZED_APP="unauthorized-app",_e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",_e.INVALID_CHECKSUM="invalid-checksum",_e.CANCELED="canceled",_e.INVALID_EVENT_NAME="invalid-event-name",_e.INVALID_URL="invalid-url",_e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",_e.NO_DEFAULT_BUCKET="no-default-bucket",_e.CANNOT_SLICE_BLOB="cannot-slice-blob",_e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",_e.NO_DOWNLOAD_URL="no-download-url",_e.INVALID_ARGUMENT="invalid-argument",_e.INVALID_ARGUMENT_COUNT="invalid-argument-count",_e.APP_DELETED="app-deleted",_e.INVALID_ROOT_OPERATION="invalid-root-operation",_e.INVALID_FORMAT="invalid-format",_e.INTERNAL_ERROR="internal-error",_e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(_e){return"storage/"+_e}function unknown(){const _e="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,_e)}function objectNotFound(_e){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+_e+"' does not exist.")}function quotaExceeded(_e){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+_e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const _e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,_e)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(_e){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+_e+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(_e){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+_e+"'.")}function invalidDefaultBucket(_e){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+_e+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function missingPolyFill(_e){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${_e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument(_e){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,_e)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(_e){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+_e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(_e,e){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+_e+"': "+e)}function internalError(_e){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+_e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(e,un){this.bucket=e,this.path_=un}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,un){let dn;try{dn=Location.makeFromUrl(e,un)}catch{return new Location(e,"")}if(dn.path==="")return dn;throw invalidDefaultBucket(e)}static makeFromUrl(e,un){let dn=null;const hn="([A-Za-z0-9.\\-_]+)";function fn($n){$n.path.charAt($n.path.length-1)==="/"&&($n.path_=$n.path_.slice(0,-1))}const pn="(/(.*))?$",mn=new RegExp("^gs://"+hn+pn,"i"),gn={bucket:1,path:3};function yn($n){$n.path_=decodeURIComponent($n.path)}const xn="v[A-Za-z0-9_]+",En=un.replace(/[.]/g,"\\."),bn="(/([^?#]*).*)?$",vn=new RegExp(`^https?://${En}/${xn}/b/${hn}/o${bn}`,"i"),Pn={bucket:1,path:3},Tn=un===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":un,In="([^?#]*)",Rn=new RegExp(`^https?://${Tn}/${hn}/${In}`,"i"),Dn=[{regex:mn,indices:gn,postModify:fn},{regex:vn,indices:Pn,postModify:yn},{regex:Rn,indices:{bucket:1,path:2},postModify:yn}];for(let $n=0;$n<Dn.length;$n++){const Fn=Dn[$n],Gn=Fn.regex.exec(e);if(Gn){const kn=Gn[Fn.indices.bucket];let Nn=Gn[Fn.indices.path];Nn||(Nn=""),dn=new Location(kn,Nn),Fn.postModify(dn);break}}if(dn==null)throw invalidUrl(e);return dn}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(_e,e,un){let dn=1,hn=null,fn=null,pn=!1,mn=0;function gn(){return mn===2}let yn=!1;function xn(...In){yn||(yn=!0,e.apply(null,In))}function En(In){hn=setTimeout(()=>{hn=null,_e(vn,gn())},In)}function bn(){fn&&clearTimeout(fn)}function vn(In,...Rn){if(yn){bn();return}if(In){bn(),xn.call(null,In,...Rn);return}if(gn()||pn){bn(),xn.call(null,In,...Rn);return}dn<64&&(dn*=2);let Dn;mn===1?(mn=2,Dn=0):Dn=(dn+Math.random())*1e3,En(Dn)}let Pn=!1;function Tn(In){Pn||(Pn=!0,bn(),!yn&&(hn!==null?(In||(mn=2),clearTimeout(hn),En(0)):In||(mn=1)))}return En(0),fn=setTimeout(()=>{pn=!0,Tn(!0)},un),Tn}function stop(_e){_e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(_e){return _e!==void 0}function isNonArrayObject(_e){return typeof _e=="object"&&!Array.isArray(_e)}function isString(_e){return typeof _e=="string"||_e instanceof String}function isNativeBlob(_e){return isNativeBlobDefined()&&_e instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"}function validateNumber(_e,e,un,dn){if(dn<e)throw invalidArgument(`Invalid value for '${_e}'. Expected ${e} or greater.`);if(dn>un)throw invalidArgument(`Invalid value for '${_e}'. Expected ${un} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(_e,e,un){let dn=e;return un==null&&(dn=`https://${e}`),`${un}://${dn}/v0${_e}`}function makeQueryString(_e){const e=encodeURIComponent;let un="?";for(const dn in _e)if(_e.hasOwnProperty(dn)){const hn=e(dn)+"="+e(_e[dn]);un=un+hn+"&"}return un=un.slice(0,-1),un}var ErrorCode;(function(_e){_e[_e.NO_ERROR=0]="NO_ERROR",_e[_e.NETWORK_ERROR=1]="NETWORK_ERROR",_e[_e.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(_e,e){const un=_e>=500&&_e<600,hn=[408,429].indexOf(_e)!==-1,fn=e.indexOf(_e)!==-1;return un||hn||fn}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(e,un,dn,hn,fn,pn,mn,gn,yn,xn,En,bn=!0,vn=!1){this.url_=e,this.method_=un,this.headers_=dn,this.body_=hn,this.successCodes_=fn,this.additionalRetryCodes_=pn,this.callback_=mn,this.errorCallback_=gn,this.timeout_=yn,this.progressCallback_=xn,this.connectionFactory_=En,this.retry=bn,this.isUsingEmulator=vn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Pn,Tn)=>{this.resolve_=Pn,this.reject_=Tn,this.start_()})}start_(){const e=(dn,hn)=>{if(hn){dn(!1,new RequestEndStatus(!1,null,!0));return}const fn=this.connectionFactory_();this.pendingConnection_=fn;const pn=mn=>{const gn=mn.loaded,yn=mn.lengthComputable?mn.total:-1;this.progressCallback_!==null&&this.progressCallback_(gn,yn)};this.progressCallback_!==null&&fn.addUploadProgressListener(pn),fn.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&fn.removeUploadProgressListener(pn),this.pendingConnection_=null;const mn=fn.getErrorCode()===ErrorCode.NO_ERROR,gn=fn.getStatus();if(!mn||isRetryStatusCode(gn,this.additionalRetryCodes_)&&this.retry){const xn=fn.getErrorCode()===ErrorCode.ABORT;dn(!1,new RequestEndStatus(!1,null,xn));return}const yn=this.successCodes_.indexOf(gn)!==-1;dn(!0,new RequestEndStatus(yn,fn))})},un=(dn,hn)=>{const fn=this.resolve_,pn=this.reject_,mn=hn.connection;if(hn.wasSuccessCode)try{const gn=this.callback_(mn,mn.getResponse());isJustDef(gn)?fn(gn):fn()}catch(gn){pn(gn)}else if(mn!==null){const gn=unknown();gn.serverResponse=mn.getErrorText(),this.errorCallback_?pn(this.errorCallback_(mn,gn)):pn(gn)}else if(hn.canceled){const gn=this.appDelete_?appDeleted():canceled();pn(gn)}else{const gn=retryLimitExceeded();pn(gn)}};this.canceled_?un(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(e,un,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,un,dn){this.wasSuccessCode=e,this.connection=un,this.canceled=!!dn}}function addAuthHeader_(_e,e){e!==null&&e.length>0&&(_e.Authorization="Firebase "+e)}function addVersionHeader_(_e,e){_e["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function addGmpidHeader_(_e,e){e&&(_e["X-Firebase-GMPID"]=e)}function addAppCheckHeader_(_e,e){e!==null&&(_e["X-Firebase-AppCheck"]=e)}function makeRequest(_e,e,un,dn,hn,fn,pn=!0,mn=!1){const gn=makeQueryString(_e.urlParams),yn=_e.url+gn,xn=Object.assign({},_e.headers);return addGmpidHeader_(xn,e),addAuthHeader_(xn,un),addVersionHeader_(xn,fn),addAppCheckHeader_(xn,dn),new NetworkRequest(yn,_e.method,xn,_e.body,_e.successCodes,_e.additionalRetryCodes,_e.handler,_e.errorHandler,_e.timeout,_e.progressCallback,hn,pn,mn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(..._e){const e=getBlobBuilder();if(e!==void 0){const un=new e;for(let dn=0;dn<_e.length;dn++)un.append(_e[dn]);return un.getBlob()}else{if(isNativeBlobDefined())return new Blob(_e);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(_e,e,un){return _e.webkitSlice?_e.webkitSlice(e,un):_e.mozSlice?_e.mozSlice(e,un):_e.slice?_e.slice(e,un):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(_e){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(_e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(e,un){this.data=e,this.contentType=un||null}}function dataFromString(_e,e){switch(_e){case StringFormat.RAW:return new StringData(utf8Bytes_(e));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(_e,e));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(e),dataURLContentType_(e))}throw unknown()}function utf8Bytes_(_e){const e=[];for(let un=0;un<_e.length;un++){let dn=_e.charCodeAt(un);if(dn<=127)e.push(dn);else if(dn<=2047)e.push(192|dn>>6,128|dn&63);else if((dn&64512)===55296)if(!(un<_e.length-1&&(_e.charCodeAt(un+1)&64512)===56320))e.push(239,191,189);else{const fn=dn,pn=_e.charCodeAt(++un);dn=65536|(fn&1023)<<10|pn&1023,e.push(240|dn>>18,128|dn>>12&63,128|dn>>6&63,128|dn&63)}else(dn&64512)===56320?e.push(239,191,189):e.push(224|dn>>12,128|dn>>6&63,128|dn&63)}return new Uint8Array(e)}function percentEncodedBytes_(_e){let e;try{e=decodeURIComponent(_e)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(e)}function base64Bytes_(_e,e){switch(_e){case StringFormat.BASE64:{const hn=e.indexOf("-")!==-1,fn=e.indexOf("_")!==-1;if(hn||fn)throw invalidFormat(_e,"Invalid character '"+(hn?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const hn=e.indexOf("+")!==-1,fn=e.indexOf("/")!==-1;if(hn||fn)throw invalidFormat(_e,"Invalid character '"+(hn?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let un;try{un=decodeBase64(e)}catch(hn){throw hn.message.includes("polyfill")?hn:invalidFormat(_e,"Invalid character found")}const dn=new Uint8Array(un.length);for(let hn=0;hn<un.length;hn++)dn[hn]=un.charCodeAt(hn);return dn}class DataURLParts{constructor(e){this.base64=!1,this.contentType=null;const un=e.match(/^data:([^,]+)?,/);if(un===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const dn=un[1]||null;dn!=null&&(this.base64=endsWith(dn,";base64"),this.contentType=this.base64?dn.substring(0,dn.length-7):dn),this.rest=e.substring(e.indexOf(",")+1)}}function dataURLBytes_(_e){const e=new DataURLParts(_e);return e.base64?base64Bytes_(StringFormat.BASE64,e.rest):percentEncodedBytes_(e.rest)}function dataURLContentType_(_e){return new DataURLParts(_e).contentType}function endsWith(_e,e){return _e.length>=e.length?_e.substring(_e.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(e,un){let dn=0,hn="";isNativeBlob(e)?(this.data_=e,dn=e.size,hn=e.type):e instanceof ArrayBuffer?(un?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),dn=this.data_.length):e instanceof Uint8Array&&(un?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),dn=e.length),this.size_=dn,this.type_=hn}size(){return this.size_}type(){return this.type_}slice(e,un){if(isNativeBlob(this.data_)){const dn=this.data_,hn=sliceBlob(dn,e,un);return hn===null?null:new FbsBlob(hn)}else{const dn=new Uint8Array(this.data_.buffer,e,un-e);return new FbsBlob(dn,!0)}}static getBlob(...e){if(isNativeBlobDefined()){const un=e.map(dn=>dn instanceof FbsBlob?dn.data_:dn);return new FbsBlob(getBlob$1.apply(null,un))}else{const un=e.map(pn=>isString(pn)?dataFromString(StringFormat.RAW,pn).data:pn.data_);let dn=0;un.forEach(pn=>{dn+=pn.byteLength});const hn=new Uint8Array(dn);let fn=0;return un.forEach(pn=>{for(let mn=0;mn<pn.length;mn++)hn[fn++]=pn[mn]}),new FbsBlob(hn,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(_e){let e;try{e=JSON.parse(_e)}catch{return null}return isNonArrayObject(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(_e){if(_e.length===0)return null;const e=_e.lastIndexOf("/");return e===-1?"":_e.slice(0,e)}function child(_e,e){const un=e.split("/").filter(dn=>dn.length>0).join("/");return _e.length===0?un:_e+"/"+un}function lastComponent(_e){const e=_e.lastIndexOf("/",_e.length-2);return e===-1?_e:_e.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(_e,e){return e}class Mapping{constructor(e,un,dn,hn){this.server=e,this.local=un||e,this.writable=!!dn,this.xform=hn||noXform_}}let mappings_=null;function xformPath(_e){return!isString(_e)||_e.length<2?_e:lastComponent(_e)}function getMappings(){if(mappings_)return mappings_;const _e=[];_e.push(new Mapping("bucket")),_e.push(new Mapping("generation")),_e.push(new Mapping("metageneration")),_e.push(new Mapping("name","fullPath",!0));function e(fn,pn){return xformPath(pn)}const un=new Mapping("name");un.xform=e,_e.push(un);function dn(fn,pn){return pn!==void 0?Number(pn):pn}const hn=new Mapping("size");return hn.xform=dn,_e.push(hn),_e.push(new Mapping("timeCreated")),_e.push(new Mapping("updated")),_e.push(new Mapping("md5Hash",null,!0)),_e.push(new Mapping("cacheControl",null,!0)),_e.push(new Mapping("contentDisposition",null,!0)),_e.push(new Mapping("contentEncoding",null,!0)),_e.push(new Mapping("contentLanguage",null,!0)),_e.push(new Mapping("contentType",null,!0)),_e.push(new Mapping("metadata","customMetadata",!0)),mappings_=_e,mappings_}function addRef(_e,e){function un(){const dn=_e.bucket,hn=_e.fullPath,fn=new Location(dn,hn);return e._makeStorageReference(fn)}Object.defineProperty(_e,"ref",{get:un})}function fromResource(_e,e,un){const dn={};dn.type="file";const hn=un.length;for(let fn=0;fn<hn;fn++){const pn=un[fn];dn[pn.local]=pn.xform(dn,e[pn.server])}return addRef(dn,_e),dn}function fromResourceString(_e,e,un){const dn=jsonObjectOrNull(e);return dn===null?null:fromResource(_e,dn,un)}function downloadUrlFromResourceString(_e,e,un,dn){const hn=jsonObjectOrNull(e);if(hn===null||!isString(hn.downloadTokens))return null;const fn=hn.downloadTokens;if(fn.length===0)return null;const pn=encodeURIComponent;return fn.split(",").map(yn=>{const xn=_e.bucket,En=_e.fullPath,bn="/b/"+pn(xn)+"/o/"+pn(En),vn=makeUrl(bn,un,dn),Pn=makeQueryString({alt:"media",token:yn});return vn+Pn})[0]}function toResourceString(_e,e){const un={},dn=e.length;for(let hn=0;hn<dn;hn++){const fn=e[hn];fn.writable&&(un[fn.server]=_e[fn.local])}return JSON.stringify(un)}class RequestInfo{constructor(e,un,dn,hn){this.url=e,this.method=un,this.handler=dn,this.timeout=hn,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(_e){if(!_e)throw unknown()}function metadataHandler(_e,e){function un(dn,hn){const fn=fromResourceString(_e,hn,e);return handlerCheck(fn!==null),fn}return un}function downloadUrlHandler(_e,e){function un(dn,hn){const fn=fromResourceString(_e,hn,e);return handlerCheck(fn!==null),downloadUrlFromResourceString(fn,hn,_e.host,_e._protocol)}return un}function sharedErrorHandler(_e){function e(un,dn){let hn;return un.getStatus()===401?un.getErrorText().includes("Firebase App Check token is invalid")?hn=unauthorizedApp():hn=unauthenticated():un.getStatus()===402?hn=quotaExceeded(_e.bucket):un.getStatus()===403?hn=unauthorized(_e.path):hn=dn,hn.status=un.getStatus(),hn.serverResponse=dn.serverResponse,hn}return e}function objectErrorHandler(_e){const e=sharedErrorHandler(_e);function un(dn,hn){let fn=e(dn,hn);return dn.getStatus()===404&&(fn=objectNotFound(_e.path)),fn.serverResponse=hn.serverResponse,fn}return un}function getDownloadUrl(_e,e,un){const dn=e.fullServerUrl(),hn=makeUrl(dn,_e.host,_e._protocol),fn="GET",pn=_e.maxOperationRetryTime,mn=new RequestInfo(hn,fn,downloadUrlHandler(_e,un),pn);return mn.errorHandler=objectErrorHandler(e),mn}function deleteObject$2(_e,e){const un=e.fullServerUrl(),dn=makeUrl(un,_e.host,_e._protocol),hn="DELETE",fn=_e.maxOperationRetryTime;function pn(gn,yn){}const mn=new RequestInfo(dn,hn,pn,fn);return mn.successCodes=[200,204],mn.errorHandler=objectErrorHandler(e),mn}function determineContentType_(_e,e){return _e&&_e.contentType||e&&e.type()||"application/octet-stream"}function metadataForUpload_(_e,e,un){const dn=Object.assign({},un);return dn.fullPath=_e.path,dn.size=e.size(),dn.contentType||(dn.contentType=determineContentType_(null,e)),dn}function multipartUpload(_e,e,un,dn,hn){const fn=e.bucketOnlyServerUrl(),pn={"X-Goog-Upload-Protocol":"multipart"};function mn(){let Dn="";for(let $n=0;$n<2;$n++)Dn=Dn+Math.random().toString().slice(2);return Dn}const gn=mn();pn["Content-Type"]="multipart/related; boundary="+gn;const yn=metadataForUpload_(e,dn,hn),xn=toResourceString(yn,un),En="--"+gn+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+xn+`\r
--`+gn+`\r
Content-Type: `+yn.contentType+`\r
\r
`,bn=`\r
--`+gn+"--",vn=FbsBlob.getBlob(En,dn,bn);if(vn===null)throw cannotSliceBlob();const Pn={name:yn.fullPath},Tn=makeUrl(fn,_e.host,_e._protocol),In="POST",Rn=_e.maxUploadRetryTime,Sn=new RequestInfo(Tn,In,metadataHandler(_e,un),Rn);return Sn.urlParams=Pn,Sn.headers=pn,Sn.body=vn.uploadData(),Sn.errorHandler=sharedErrorHandler(e),Sn}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,un,dn,hn,fn){if(this.sent_)throw internalError("cannot .send() more than once");if(isCloudWorkstation(e)&&dn&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(un,e,!0),fn!==void 0)for(const pn in fn)fn.hasOwnProperty(pn)&&this.xhr_.setRequestHeader(pn,fn[pn].toString());return hn!==void 0?this.xhr_.send(hn):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(e,un){this._service=e,un instanceof Location?this._location=un:this._location=Location.makeFromUrl(un,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,un){return new Reference(e,un)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(e===null)return null;const un=new Location(this._location.bucket,e);return new Reference(this._service,un)}_throwIfRoot(e){if(this._location.path==="")throw invalidRootOperation(e)}}function uploadBytes$1(_e,e,un){_e._throwIfRoot("uploadBytes");const dn=multipartUpload(_e.storage,_e._location,getMappings(),new FbsBlob(e,!0),un);return _e.storage.makeRequestWithTokens(dn,newTextConnection).then(hn=>({metadata:hn,ref:_e}))}function getDownloadURL$1(_e){_e._throwIfRoot("getDownloadURL");const e=getDownloadUrl(_e.storage,_e._location,getMappings());return _e.storage.makeRequestWithTokens(e,newTextConnection).then(un=>{if(un===null)throw noDownloadURL();return un})}function deleteObject$1(_e){_e._throwIfRoot("deleteObject");const e=deleteObject$2(_e.storage,_e._location);return _e.storage.makeRequestWithTokens(e,newTextConnection)}function _getChild$1(_e,e){const un=child(_e._location.path,e),dn=new Location(_e._location.bucket,un);return new Reference(_e.storage,dn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(_e){return/^[A-Za-z]+:\/\//.test(_e)}function refFromURL(_e,e){return new Reference(_e,e)}function refFromPath(_e,e){if(_e instanceof FirebaseStorageImpl){const un=_e;if(un._bucket==null)throw noDefaultBucket();const dn=new Reference(un,un._bucket);return e!=null?refFromPath(dn,e):dn}else return e!==void 0?_getChild$1(_e,e):_e}function ref$1(_e,e){if(e&&isUrl(e)){if(_e instanceof FirebaseStorageImpl)return refFromURL(_e,e);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(_e,e)}function extractBucket(_e,e){const un=e==null?void 0:e[CONFIG_STORAGE_BUCKET_KEY];return un==null?null:Location.makeFromBucketSpec(un,_e)}function connectStorageEmulator$1(_e,e,un,dn={}){_e.host=`${e}:${un}`;const hn=isCloudWorkstation(e);hn&&(pingServer(`https://${_e.host}/b`),updateEmulatorBanner("Storage",!0)),_e._isUsingEmulator=!0,_e._protocol=hn?"https":"http";const{mockUserToken:fn}=dn;fn&&(_e._overrideAuthToken=typeof fn=="string"?fn:createMockUserToken(fn,_e.app.options.projectId))}class FirebaseStorageImpl{constructor(e,un,dn,hn,fn,pn=!1){this.app=e,this._authProvider=un,this._appCheckProvider=dn,this._url=hn,this._firebaseVersion=fn,this._isUsingEmulator=pn,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,hn!=null?this._bucket=Location.makeFromBucketSpec(hn,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const un=await e.getToken();if(un!==null)return un.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,un,dn,hn,fn=!0){if(this._deleted)return new FailRequest(appDeleted());{const pn=makeRequest(e,this._appId,dn,hn,un,this._firebaseVersion,fn,this._isUsingEmulator);return this._requests.add(pn),pn.getPromise().then(()=>this._requests.delete(pn),()=>this._requests.delete(pn)),pn}}async makeRequestWithTokens(e,un){const[dn,hn]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,un,dn,hn).getPromise()}}const name="@firebase/storage",version="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytes(_e,e,un){return _e=getModularInstance(_e),uploadBytes$1(_e,e,un)}function getDownloadURL(_e){return _e=getModularInstance(_e),getDownloadURL$1(_e)}function deleteObject(_e){return _e=getModularInstance(_e),deleteObject$1(_e)}function ref(_e,e){return _e=getModularInstance(_e),ref$1(_e,e)}function getStorage(_e=getApp(),e){_e=getModularInstance(_e);const dn=_getProvider(_e,STORAGE_TYPE).getImmediate({identifier:e}),hn=getDefaultEmulatorHostnameAndPort("storage");return hn&&connectStorageEmulator(dn,...hn),dn}function connectStorageEmulator(_e,e,un,dn={}){connectStorageEmulator$1(_e,e,un,dn)}function factory(_e,{instanceIdentifier:e}){const un=_e.getProvider("app").getImmediate(),dn=_e.getProvider("auth-internal"),hn=_e.getProvider("app-check-internal");return new FirebaseStorageImpl(un,dn,hn,e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version,""),registerVersion(name,version,"esm2017")}registerStorage();const firebaseConfig={apiKey:"AIzaSyAf3ak-5S-1ZhSGxKfPiMy2or-83dNFB5c",authDomain:"study-ai-12fcd.firebaseapp.com",projectId:"study-ai-12fcd",storageBucket:"study-ai-12fcd.firebasestorage.app",messagingSenderId:"747684597937",appId:"1:747684597937:web:9b815b9b649fdb1c751290",measurementId:"G-RGLEE1R25B"},app=initializeApp(firebaseConfig);getAnalytics(app);const auth=getAuth(app),db=getFirestore(app),storage=getStorage(app),buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:_e,variant:e,size:un,asChild:dn=!1,...hn},fn)=>{const pn=dn?Slot:"button";return jsxRuntimeExports.jsx(pn,{className:cn$1(buttonVariants({variant:e,size:un,className:_e})),ref:fn,...hn})});Button.displayName="Button";const badgeVariants=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:_e,variant:e,...un}){return jsxRuntimeExports.jsx("div",{className:cn$1(badgeVariants({variant:e}),_e),...un})}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((_e,e)=>{const{loop:un=!1,trapped:dn=!1,onMountAutoFocus:hn,onUnmountAutoFocus:fn,...pn}=_e,[mn,gn]=reactExports.useState(null),yn=useCallbackRef$1(hn),xn=useCallbackRef$1(fn),En=reactExports.useRef(null),bn=useComposedRefs(e,Tn=>gn(Tn)),vn=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(dn){let Tn=function(Dn){if(vn.paused||!mn)return;const $n=Dn.target;mn.contains($n)?En.current=$n:focus(En.current,{select:!0})},In=function(Dn){if(vn.paused||!mn)return;const $n=Dn.relatedTarget;$n!==null&&(mn.contains($n)||focus(En.current,{select:!0}))},Rn=function(Dn){if(document.activeElement===document.body)for(const Fn of Dn)Fn.removedNodes.length>0&&focus(mn)};document.addEventListener("focusin",Tn),document.addEventListener("focusout",In);const Sn=new MutationObserver(Rn);return mn&&Sn.observe(mn,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",Tn),document.removeEventListener("focusout",In),Sn.disconnect()}}},[dn,mn,vn.paused]),reactExports.useEffect(()=>{if(mn){focusScopesStack.add(vn);const Tn=document.activeElement;if(!mn.contains(Tn)){const Rn=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);mn.addEventListener(AUTOFOCUS_ON_MOUNT,yn),mn.dispatchEvent(Rn),Rn.defaultPrevented||(focusFirst$1(removeLinks(getTabbableCandidates(mn)),{select:!0}),document.activeElement===Tn&&focus(mn))}return()=>{mn.removeEventListener(AUTOFOCUS_ON_MOUNT,yn),setTimeout(()=>{const Rn=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);mn.addEventListener(AUTOFOCUS_ON_UNMOUNT,xn),mn.dispatchEvent(Rn),Rn.defaultPrevented||focus(Tn??document.body,{select:!0}),mn.removeEventListener(AUTOFOCUS_ON_UNMOUNT,xn),focusScopesStack.remove(vn)},0)}}},[mn,yn,xn,vn]);const Pn=reactExports.useCallback(Tn=>{if(!un&&!dn||vn.paused)return;const In=Tn.key==="Tab"&&!Tn.altKey&&!Tn.ctrlKey&&!Tn.metaKey,Rn=document.activeElement;if(In&&Rn){const Sn=Tn.currentTarget,[Dn,$n]=getTabbableEdges(Sn);Dn&&$n?!Tn.shiftKey&&Rn===$n?(Tn.preventDefault(),un&&focus(Dn,{select:!0})):Tn.shiftKey&&Rn===Dn&&(Tn.preventDefault(),un&&focus($n,{select:!0})):Rn===Sn&&Tn.preventDefault()}},[un,dn,vn.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...pn,ref:bn,onKeyDown:Pn})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$1(_e,{select:e=!1}={}){const un=document.activeElement;for(const dn of _e)if(focus(dn,{select:e}),document.activeElement!==un)return}function getTabbableEdges(_e){const e=getTabbableCandidates(_e),un=findVisible(e,_e),dn=findVisible(e.reverse(),_e);return[un,dn]}function getTabbableCandidates(_e){const e=[],un=document.createTreeWalker(_e,NodeFilter.SHOW_ELEMENT,{acceptNode:dn=>{const hn=dn.tagName==="INPUT"&&dn.type==="hidden";return dn.disabled||dn.hidden||hn?NodeFilter.FILTER_SKIP:dn.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;un.nextNode();)e.push(un.currentNode);return e}function findVisible(_e,e){for(const un of _e)if(!isHidden(un,{upTo:e}))return un}function isHidden(_e,{upTo:e}){if(getComputedStyle(_e).visibility==="hidden")return!0;for(;_e;){if(e!==void 0&&_e===e)return!1;if(getComputedStyle(_e).display==="none")return!0;_e=_e.parentElement}return!1}function isSelectableInput(_e){return _e instanceof HTMLInputElement&&"select"in _e}function focus(_e,{select:e=!1}={}){if(_e&&_e.focus){const un=document.activeElement;_e.focus({preventScroll:!0}),_e!==un&&isSelectableInput(_e)&&e&&_e.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let _e=[];return{add(e){const un=_e[0];e!==un&&(un==null||un.pause()),_e=arrayRemove(_e,e),_e.unshift(e)},remove(e){var un;_e=arrayRemove(_e,e),(un=_e[0])==null||un.resume()}}}function arrayRemove(_e,e){const un=[..._e],dn=un.indexOf(e);return dn!==-1&&un.splice(dn,1),un}function removeLinks(_e){return _e.filter(e=>e.tagName!=="A")}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const _e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_e[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",_e[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),count--}},[])}function createFocusGuard(){const _e=document.createElement("span");return _e.setAttribute("data-radix-focus-guard",""),_e.tabIndex=0,_e.style.outline="none",_e.style.opacity="0",_e.style.position="fixed",_e.style.pointerEvents="none",_e}var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_e,e){return typeof _e=="function"?_e(e):_e&&(_e.current=e),_e}function useCallbackRef(_e,e){var un=reactExports.useState(function(){return{value:_e,callback:e,facade:{get current(){return un.value},set current(dn){var hn=un.value;hn!==dn&&(un.value=dn,un.callback(dn,hn))}}}})[0];return un.callback=e,un.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(_e,e){var un=useCallbackRef(null,function(dn){return _e.forEach(function(hn){return assignRef(hn,dn)})});return useIsomorphicLayoutEffect(function(){var dn=currentValues.get(un);if(dn){var hn=new Set(dn),fn=new Set(_e),pn=un.current;hn.forEach(function(mn){fn.has(mn)||assignRef(mn,null)}),fn.forEach(function(mn){hn.has(mn)||assignRef(mn,pn)})}currentValues.set(un,_e)},[_e]),un}function ItoI(_e){return _e}function innerCreateMedium(_e,e){e===void 0&&(e=ItoI);var un=[],dn=!1,hn={read:function(){if(dn)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return un.length?un[un.length-1]:_e},useMedium:function(fn){var pn=e(fn,dn);return un.push(pn),function(){un=un.filter(function(mn){return mn!==pn})}},assignSyncMedium:function(fn){for(dn=!0;un.length;){var pn=un;un=[],pn.forEach(fn)}un={push:function(mn){return fn(mn)},filter:function(){return un}}},assignMedium:function(fn){dn=!0;var pn=[];if(un.length){var mn=un;un=[],mn.forEach(fn),pn=un}var gn=function(){var xn=pn;pn=[],xn.forEach(fn)},yn=function(){return Promise.resolve().then(gn)};yn(),un={push:function(xn){pn.push(xn),yn()},filter:function(xn){return pn=pn.filter(xn),un}}}};return hn}function createSidecarMedium(_e){_e===void 0&&(_e={});var e=innerCreateMedium(null);return e.options=__assign$1({async:!0,ssr:!1},_e),e}var SideCar$1=function(_e){var e=_e.sideCar,un=__rest(_e,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var dn=e.read();if(!dn)throw new Error("Sidecar medium not found");return reactExports.createElement(dn,__assign$1({},un))};SideCar$1.isSideCarExport=!0;function exportSidecar(_e,e){return _e.useMedium(e),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(_e,e){var un=reactExports.useRef(null),dn=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),hn=dn[0],fn=dn[1],pn=_e.forwardProps,mn=_e.children,gn=_e.className,yn=_e.removeScrollBar,xn=_e.enabled,En=_e.shards,bn=_e.sideCar,vn=_e.noIsolation,Pn=_e.inert,Tn=_e.allowPinchZoom,In=_e.as,Rn=In===void 0?"div":In,Sn=_e.gapMode,Dn=__rest(_e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),$n=bn,Fn=useMergeRefs([un,e]),Gn=__assign$1(__assign$1({},Dn),hn);return reactExports.createElement(reactExports.Fragment,null,xn&&reactExports.createElement($n,{sideCar:effectCar,removeScrollBar:yn,shards:En,noIsolation:vn,inert:Pn,setCallbacks:fn,allowPinchZoom:!!Tn,lockRef:un,gapMode:Sn}),pn?reactExports.cloneElement(reactExports.Children.only(mn),__assign$1(__assign$1({},Gn),{ref:Fn})):reactExports.createElement(Rn,__assign$1({},Gn,{className:gn,ref:Fn}),mn))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _e=document.createElement("style");_e.type="text/css";var e=getNonce();return e&&_e.setAttribute("nonce",e),_e}function injectStyles(_e,e){_e.styleSheet?_e.styleSheet.cssText=e:_e.appendChild(document.createTextNode(e))}function insertStyleTag(_e){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(_e)}var stylesheetSingleton=function(){var _e=0,e=null;return{add:function(un){_e==0&&(e=makeStyleTag())&&(injectStyles(e,un),insertStyleTag(e)),_e++},remove:function(){_e--,!_e&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var _e=stylesheetSingleton();return function(e,un){reactExports.useEffect(function(){return _e.add(e),function(){_e.remove()}},[e&&un])}},styleSingleton=function(){var _e=styleHookSingleton(),e=function(un){var dn=un.styles,hn=un.dynamic;return _e(dn,hn),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse=function(_e){return parseInt(_e||"",10)||0},getOffset=function(_e){var e=window.getComputedStyle(document.body),un=e[_e==="padding"?"paddingLeft":"marginLeft"],dn=e[_e==="padding"?"paddingTop":"marginTop"],hn=e[_e==="padding"?"paddingRight":"marginRight"];return[parse(un),parse(dn),parse(hn)]},getGapWidth=function(_e){if(_e===void 0&&(_e="margin"),typeof window>"u")return zeroGap;var e=getOffset(_e),un=document.documentElement.clientWidth,dn=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,dn-un+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(_e,e,un,dn){var hn=_e.left,fn=_e.top,pn=_e.right,mn=_e.gap;return un===void 0&&(un="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(dn,`;
   padding-right: `).concat(mn,"px ").concat(dn,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(dn,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(dn,";"),un==="margin"&&`
    padding-left: `.concat(hn,`px;
    padding-top: `).concat(fn,`px;
    padding-right: `).concat(pn,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(mn,"px ").concat(dn,`;
    `),un==="padding"&&"padding-right: ".concat(mn,"px ").concat(dn,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(mn,"px ").concat(dn,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(mn,"px ").concat(dn,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(dn,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(dn,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(mn,`px;
  }
`)},getCurrentUseCounter=function(){var _e=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(_e)?_e:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var _e=getCurrentUseCounter()-1;_e<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,_e.toString())}},[])},RemoveScrollBar=function(_e){var e=_e.noRelative,un=_e.noImportant,dn=_e.gapMode,hn=dn===void 0?"margin":dn;useLockAttribute();var fn=reactExports.useMemo(function(){return getGapWidth(hn)},[hn]);return reactExports.createElement(Style,{styles:getStyles(fn,!e,hn,un?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_e){return _e.tagName==="TEXTAREA"},elementCanBeScrolled=function(_e,e){if(!(_e instanceof Element))return!1;var un=window.getComputedStyle(_e);return un[e]!=="hidden"&&!(un.overflowY===un.overflowX&&!alwaysContainsScroll(_e)&&un[e]==="visible")},elementCouldBeVScrolled=function(_e){return elementCanBeScrolled(_e,"overflowY")},elementCouldBeHScrolled=function(_e){return elementCanBeScrolled(_e,"overflowX")},locationCouldBeScrolled=function(_e,e){var un=e.ownerDocument,dn=e;do{typeof ShadowRoot<"u"&&dn instanceof ShadowRoot&&(dn=dn.host);var hn=elementCouldBeScrolled(_e,dn);if(hn){var fn=getScrollVariables(_e,dn),pn=fn[1],mn=fn[2];if(pn>mn)return!0}dn=dn.parentNode}while(dn&&dn!==un.body);return!1},getVScrollVariables=function(_e){var e=_e.scrollTop,un=_e.scrollHeight,dn=_e.clientHeight;return[e,un,dn]},getHScrollVariables=function(_e){var e=_e.scrollLeft,un=_e.scrollWidth,dn=_e.clientWidth;return[e,un,dn]},elementCouldBeScrolled=function(_e,e){return _e==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(_e,e){return _e==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(_e,e){return _e==="h"&&e==="rtl"?-1:1},handleScroll=function(_e,e,un,dn,hn){var fn=getDirectionFactor(_e,window.getComputedStyle(e).direction),pn=fn*dn,mn=un.target,gn=e.contains(mn),yn=!1,xn=pn>0,En=0,bn=0;do{var vn=getScrollVariables(_e,mn),Pn=vn[0],Tn=vn[1],In=vn[2],Rn=Tn-In-fn*Pn;(Pn||Rn)&&elementCouldBeScrolled(_e,mn)&&(En+=Rn,bn+=Pn),mn instanceof ShadowRoot?mn=mn.host:mn=mn.parentNode}while(!gn&&mn!==document.body||gn&&(e.contains(mn)||e===mn));return(xn&&(Math.abs(En)<1||!hn)||!xn&&(Math.abs(bn)<1||!hn))&&(yn=!0),yn},getTouchXY=function(_e){return"changedTouches"in _e?[_e.changedTouches[0].clientX,_e.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_e){return[_e.deltaX,_e.deltaY]},extractRef=function(_e){return _e&&"current"in _e?_e.current:_e},deltaCompare=function(_e,e){return _e[0]===e[0]&&_e[1]===e[1]},generateStyle=function(_e){return`
  .block-interactivity-`.concat(_e,` {pointer-events: none;}
  .allow-interactivity-`).concat(_e,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(_e){var e=reactExports.useRef([]),un=reactExports.useRef([0,0]),dn=reactExports.useRef(),hn=reactExports.useState(idCounter++)[0],fn=reactExports.useState(styleSingleton)[0],pn=reactExports.useRef(_e);reactExports.useEffect(function(){pn.current=_e},[_e]),reactExports.useEffect(function(){if(_e.inert){document.body.classList.add("block-interactivity-".concat(hn));var Tn=__spreadArray([_e.lockRef.current],(_e.shards||[]).map(extractRef),!0).filter(Boolean);return Tn.forEach(function(In){return In.classList.add("allow-interactivity-".concat(hn))}),function(){document.body.classList.remove("block-interactivity-".concat(hn)),Tn.forEach(function(In){return In.classList.remove("allow-interactivity-".concat(hn))})}}},[_e.inert,_e.lockRef.current,_e.shards]);var mn=reactExports.useCallback(function(Tn,In){if("touches"in Tn&&Tn.touches.length===2||Tn.type==="wheel"&&Tn.ctrlKey)return!pn.current.allowPinchZoom;var Rn=getTouchXY(Tn),Sn=un.current,Dn="deltaX"in Tn?Tn.deltaX:Sn[0]-Rn[0],$n="deltaY"in Tn?Tn.deltaY:Sn[1]-Rn[1],Fn,Gn=Tn.target,kn=Math.abs(Dn)>Math.abs($n)?"h":"v";if("touches"in Tn&&kn==="h"&&Gn.type==="range")return!1;var Nn=locationCouldBeScrolled(kn,Gn);if(!Nn)return!0;if(Nn?Fn=kn:(Fn=kn==="v"?"h":"v",Nn=locationCouldBeScrolled(kn,Gn)),!Nn)return!1;if(!dn.current&&"changedTouches"in Tn&&(Dn||$n)&&(dn.current=Fn),!Fn)return!0;var Ln=dn.current||Fn;return handleScroll(Ln,In,Tn,Ln==="h"?Dn:$n,!0)},[]),gn=reactExports.useCallback(function(Tn){var In=Tn;if(!(!lockStack.length||lockStack[lockStack.length-1]!==fn)){var Rn="deltaY"in In?getDeltaXY(In):getTouchXY(In),Sn=e.current.filter(function(Fn){return Fn.name===In.type&&(Fn.target===In.target||In.target===Fn.shadowParent)&&deltaCompare(Fn.delta,Rn)})[0];if(Sn&&Sn.should){In.cancelable&&In.preventDefault();return}if(!Sn){var Dn=(pn.current.shards||[]).map(extractRef).filter(Boolean).filter(function(Fn){return Fn.contains(In.target)}),$n=Dn.length>0?mn(In,Dn[0]):!pn.current.noIsolation;$n&&In.cancelable&&In.preventDefault()}}},[]),yn=reactExports.useCallback(function(Tn,In,Rn,Sn){var Dn={name:Tn,delta:In,target:Rn,should:Sn,shadowParent:getOutermostShadowParent(Rn)};e.current.push(Dn),setTimeout(function(){e.current=e.current.filter(function($n){return $n!==Dn})},1)},[]),xn=reactExports.useCallback(function(Tn){un.current=getTouchXY(Tn),dn.current=void 0},[]),En=reactExports.useCallback(function(Tn){yn(Tn.type,getDeltaXY(Tn),Tn.target,mn(Tn,_e.lockRef.current))},[]),bn=reactExports.useCallback(function(Tn){yn(Tn.type,getTouchXY(Tn),Tn.target,mn(Tn,_e.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(fn),_e.setCallbacks({onScrollCapture:En,onWheelCapture:En,onTouchMoveCapture:bn}),document.addEventListener("wheel",gn,nonPassive),document.addEventListener("touchmove",gn,nonPassive),document.addEventListener("touchstart",xn,nonPassive),function(){lockStack=lockStack.filter(function(Tn){return Tn!==fn}),document.removeEventListener("wheel",gn,nonPassive),document.removeEventListener("touchmove",gn,nonPassive),document.removeEventListener("touchstart",xn,nonPassive)}},[]);var vn=_e.removeScrollBar,Pn=_e.inert;return reactExports.createElement(reactExports.Fragment,null,Pn?reactExports.createElement(fn,{styles:generateStyle(hn)}):null,vn?reactExports.createElement(RemoveScrollBar,{gapMode:_e.gapMode}):null)}function getOutermostShadowParent(_e){for(var e=null;_e!==null;)_e instanceof ShadowRoot&&(e=_e.host,_e=_e.host),_e=_e.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_e,e){return reactExports.createElement(RemoveScroll,__assign$1({},_e,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var getDefaultParent=function(_e){if(typeof document>"u")return null;var e=Array.isArray(_e)?_e[0]:_e;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_e){return _e&&(_e.host||unwrapHost(_e.parentNode))},correctTargets=function(_e,e){return e.map(function(un){if(_e.contains(un))return un;var dn=unwrapHost(un);return dn&&_e.contains(dn)?dn:(console.error("aria-hidden",un,"in not contained inside",_e,". Doing nothing"),null)}).filter(function(un){return!!un})},applyAttributeToOthers=function(_e,e,un,dn){var hn=correctTargets(e,Array.isArray(_e)?_e:[_e]);markerMap[un]||(markerMap[un]=new WeakMap);var fn=markerMap[un],pn=[],mn=new Set,gn=new Set(hn),yn=function(En){!En||mn.has(En)||(mn.add(En),yn(En.parentNode))};hn.forEach(yn);var xn=function(En){!En||gn.has(En)||Array.prototype.forEach.call(En.children,function(bn){if(mn.has(bn))xn(bn);else try{var vn=bn.getAttribute(dn),Pn=vn!==null&&vn!=="false",Tn=(counterMap.get(bn)||0)+1,In=(fn.get(bn)||0)+1;counterMap.set(bn,Tn),fn.set(bn,In),pn.push(bn),Tn===1&&Pn&&uncontrolledNodes.set(bn,!0),In===1&&bn.setAttribute(un,"true"),Pn||bn.setAttribute(dn,"true")}catch(Rn){console.error("aria-hidden: cannot operate on ",bn,Rn)}})};return xn(e),mn.clear(),lockCount++,function(){pn.forEach(function(En){var bn=counterMap.get(En)-1,vn=fn.get(En)-1;counterMap.set(En,bn),fn.set(En,vn),bn||(uncontrolledNodes.has(En)||En.removeAttribute(dn),uncontrolledNodes.delete(En)),vn||En.removeAttribute(un)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_e,e,un){un===void 0&&(un="data-aria-hidden");var dn=Array.from(Array.isArray(_e)?_e:[_e]),hn=getDefaultParent(_e);return hn?(dn.push.apply(dn,Array.from(hn.querySelectorAll("[aria-live]"))),applyAttributeToOthers(dn,hn,un,"aria-hidden")):function(){return null}},DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope$3(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=_e=>{const{__scopeDialog:e,children:un,open:dn,defaultOpen:hn,onOpenChange:fn,modal:pn=!0}=_e,mn=reactExports.useRef(null),gn=reactExports.useRef(null),[yn=!1,xn]=useControllableState({prop:dn,defaultProp:hn,onChange:fn});return jsxRuntimeExports.jsx(DialogProvider,{scope:e,triggerRef:mn,contentRef:gn,contentId:useId(),titleId:useId(),descriptionId:useId(),open:yn,onOpenChange:xn,onOpenToggle:reactExports.useCallback(()=>xn(En=>!En),[xn]),modal:pn,children:un})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME$2="DialogTrigger",DialogTrigger=reactExports.forwardRef((_e,e)=>{const{__scopeDialog:un,...dn}=_e,hn=useDialogContext(TRIGGER_NAME$2,un),fn=useComposedRefs(e,hn.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":hn.open,"aria-controls":hn.contentId,"data-state":getState$1(hn.open),...dn,ref:fn,onClick:composeEventHandlers(_e.onClick,hn.onOpenToggle)})});DialogTrigger.displayName=TRIGGER_NAME$2;var PORTAL_NAME$1="DialogPortal",[PortalProvider,usePortalContext]=createDialogContext(PORTAL_NAME$1,{forceMount:void 0}),DialogPortal$1=_e=>{const{__scopeDialog:e,forceMount:un,children:dn,container:hn}=_e,fn=useDialogContext(PORTAL_NAME$1,e);return jsxRuntimeExports.jsx(PortalProvider,{scope:e,forceMount:un,children:reactExports.Children.map(dn,pn=>jsxRuntimeExports.jsx(Presence,{present:un||fn.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:hn,children:pn})}))})};DialogPortal$1.displayName=PORTAL_NAME$1;var OVERLAY_NAME="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((_e,e)=>{const un=usePortalContext(OVERLAY_NAME,_e.__scopeDialog),{forceMount:dn=un.forceMount,...hn}=_e,fn=useDialogContext(OVERLAY_NAME,_e.__scopeDialog);return fn.modal?jsxRuntimeExports.jsx(Presence,{present:dn||fn.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...hn,ref:e})}):null});DialogOverlay$1.displayName=OVERLAY_NAME;var DialogOverlayImpl=reactExports.forwardRef((_e,e)=>{const{__scopeDialog:un,...dn}=_e,hn=useDialogContext(OVERLAY_NAME,un);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,shards:[hn.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(hn.open),...dn,ref:e,style:{pointerEvents:"auto",...dn.style}})})}),CONTENT_NAME$2="DialogContent",DialogContent$1=reactExports.forwardRef((_e,e)=>{const un=usePortalContext(CONTENT_NAME$2,_e.__scopeDialog),{forceMount:dn=un.forceMount,...hn}=_e,fn=useDialogContext(CONTENT_NAME$2,_e.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:dn||fn.open,children:fn.modal?jsxRuntimeExports.jsx(DialogContentModal,{...hn,ref:e}):jsxRuntimeExports.jsx(DialogContentNonModal,{...hn,ref:e})})});DialogContent$1.displayName=CONTENT_NAME$2;var DialogContentModal=reactExports.forwardRef((_e,e)=>{const un=useDialogContext(CONTENT_NAME$2,_e.__scopeDialog),dn=reactExports.useRef(null),hn=useComposedRefs(e,un.contentRef,dn);return reactExports.useEffect(()=>{const fn=dn.current;if(fn)return hideOthers(fn)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{..._e,ref:hn,trapFocus:un.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(_e.onCloseAutoFocus,fn=>{var pn;fn.preventDefault(),(pn=un.triggerRef.current)==null||pn.focus()}),onPointerDownOutside:composeEventHandlers(_e.onPointerDownOutside,fn=>{const pn=fn.detail.originalEvent,mn=pn.button===0&&pn.ctrlKey===!0;(pn.button===2||mn)&&fn.preventDefault()}),onFocusOutside:composeEventHandlers(_e.onFocusOutside,fn=>fn.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((_e,e)=>{const un=useDialogContext(CONTENT_NAME$2,_e.__scopeDialog),dn=reactExports.useRef(!1),hn=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{..._e,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:fn=>{var pn,mn;(pn=_e.onCloseAutoFocus)==null||pn.call(_e,fn),fn.defaultPrevented||(dn.current||(mn=un.triggerRef.current)==null||mn.focus(),fn.preventDefault()),dn.current=!1,hn.current=!1},onInteractOutside:fn=>{var gn,yn;(gn=_e.onInteractOutside)==null||gn.call(_e,fn),fn.defaultPrevented||(dn.current=!0,fn.detail.originalEvent.type==="pointerdown"&&(hn.current=!0));const pn=fn.target;((yn=un.triggerRef.current)==null?void 0:yn.contains(pn))&&fn.preventDefault(),fn.detail.originalEvent.type==="focusin"&&hn.current&&fn.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((_e,e)=>{const{__scopeDialog:un,trapFocus:dn,onOpenAutoFocus:hn,onCloseAutoFocus:fn,...pn}=_e,mn=useDialogContext(CONTENT_NAME$2,un),gn=reactExports.useRef(null),yn=useComposedRefs(e,gn);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:dn,onMountAutoFocus:hn,onUnmountAutoFocus:fn,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:mn.contentId,"aria-describedby":mn.descriptionId,"aria-labelledby":mn.titleId,"data-state":getState$1(mn.open),...pn,ref:yn,onDismiss:()=>mn.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:mn.titleId}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:gn,descriptionId:mn.descriptionId})]})]})}),TITLE_NAME="DialogTitle",DialogTitle$1=reactExports.forwardRef((_e,e)=>{const{__scopeDialog:un,...dn}=_e,hn=useDialogContext(TITLE_NAME,un);return jsxRuntimeExports.jsx(Primitive.h2,{id:hn.titleId,...dn,ref:e})});DialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="DialogDescription",DialogDescription$1=reactExports.forwardRef((_e,e)=>{const{__scopeDialog:un,...dn}=_e,hn=useDialogContext(DESCRIPTION_NAME,un);return jsxRuntimeExports.jsx(Primitive.p,{id:hn.descriptionId,...dn,ref:e})});DialogDescription$1.displayName=DESCRIPTION_NAME;var CLOSE_NAME="DialogClose",DialogClose=reactExports.forwardRef((_e,e)=>{const{__scopeDialog:un,...dn}=_e,hn=useDialogContext(CLOSE_NAME,un);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...dn,ref:e,onClick:composeEventHandlers(_e.onClick,()=>hn.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME;function getState$1(_e){return _e?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$2,titleName:TITLE_NAME,docsSlug:"dialog"}),TitleWarning=({titleId:_e})=>{const e=useWarningContext(TITLE_WARNING_NAME),un=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return reactExports.useEffect(()=>{_e&&(document.getElementById(_e)||console.error(un))},[un,_e]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning=({contentRef:_e,descriptionId:e})=>{const dn=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var fn;const hn=(fn=_e.current)==null?void 0:fn.getAttribute("aria-describedby");e&&hn&&(document.getElementById(e)||console.warn(dn))},[dn,_e,e]),null},Root$4=Dialog$1,Portal$1=DialogPortal$1,Overlay=DialogOverlay$1,Content$1=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose;const Dialog=Root$4,DialogPortal=Portal$1,DialogOverlay=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Overlay,{ref:un,className:cn$1("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",_e),...e}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:_e,children:e,...un},dn)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content$1,{ref:dn,className:cn$1("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",_e),...un,children:[e,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content$1.displayName;const DialogHeader=({className:_e,...e})=>jsxRuntimeExports.jsx("div",{className:cn$1("flex flex-col space-y-1.5 text-center sm:text-left",_e),...e});DialogHeader.displayName="DialogHeader";const DialogTitle=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Title,{ref:un,className:cn$1("text-lg font-semibold leading-none tracking-tight",_e),...e}));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Description,{ref:un,className:cn$1("text-sm text-muted-foreground",_e),...e}));DialogDescription.displayName=Description.displayName;const Input=reactExports.forwardRef(({className:_e,type:e,...un},dn)=>jsxRuntimeExports.jsx("input",{type:e,className:cn$1("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",_e),ref:dn,...un}));Input.displayName="Input";var NAME="Label",Label$2=reactExports.forwardRef((_e,e)=>jsxRuntimeExports.jsx(Primitive.label,{..._e,ref:e,onMouseDown:un=>{var hn;un.target.closest("button, input, select, textarea")||((hn=_e.onMouseDown)==null||hn.call(_e,un),!un.defaultPrevented&&un.detail>1&&un.preventDefault())}}));Label$2.displayName=NAME;var Root$3=Label$2;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$1=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Root$3,{ref:un,className:cn$1(labelVariants(),_e),...e}));Label$1.displayName=Root$3.displayName;function createContextScope$1(_e,e=[]){let un=[];function dn(fn,pn){const mn=reactExports.createContext(pn),gn=un.length;un=[...un,pn];function yn(En){const{scope:bn,children:vn,...Pn}=En,Tn=(bn==null?void 0:bn[_e][gn])||mn,In=reactExports.useMemo(()=>Pn,Object.values(Pn));return jsxRuntimeExports.jsx(Tn.Provider,{value:In,children:vn})}function xn(En,bn){const vn=(bn==null?void 0:bn[_e][gn])||mn,Pn=reactExports.useContext(vn);if(Pn)return Pn;if(pn!==void 0)return pn;throw new Error(`\`${En}\` must be used within \`${fn}\``)}return yn.displayName=fn+"Provider",[yn,xn]}const hn=()=>{const fn=un.map(pn=>reactExports.createContext(pn));return function(mn){const gn=(mn==null?void 0:mn[_e])||fn;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...mn,[_e]:gn}}),[mn,gn])}};return hn.scopeName=_e,[dn,composeContextScopes$1(hn,...e)]}function composeContextScopes$1(..._e){const e=_e[0];if(_e.length===1)return e;const un=()=>{const dn=_e.map(hn=>({useScope:hn(),scopeName:hn.scopeName}));return function(fn){const pn=dn.reduce((mn,{useScope:gn,scopeName:yn})=>{const En=gn(fn)[`__scope${yn}`];return{...mn,...En}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:pn}),[pn])}};return un.scopeName=e.scopeName,un}var DirectionContext=reactExports.createContext(void 0);function useDirection(_e){const e=reactExports.useContext(DirectionContext);return _e||e||"ltr"}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$1="RovingFocusGroup",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(GROUP_NAME$1),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope$1(GROUP_NAME$1,[createCollectionScope$1]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$1),RovingFocusGroup=reactExports.forwardRef((_e,e)=>jsxRuntimeExports.jsx(Collection$1.Provider,{scope:_e.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:_e.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{..._e,ref:e})})}));RovingFocusGroup.displayName=GROUP_NAME$1;var RovingFocusGroupImpl=reactExports.forwardRef((_e,e)=>{const{__scopeRovingFocusGroup:un,orientation:dn,loop:hn=!1,dir:fn,currentTabStopId:pn,defaultCurrentTabStopId:mn,onCurrentTabStopIdChange:gn,onEntryFocus:yn,preventScrollOnEntryFocus:xn=!1,...En}=_e,bn=reactExports.useRef(null),vn=useComposedRefs(e,bn),Pn=useDirection(fn),[Tn=null,In]=useControllableState({prop:pn,defaultProp:mn,onChange:gn}),[Rn,Sn]=reactExports.useState(!1),Dn=useCallbackRef$1(yn),$n=useCollection$1(un),Fn=reactExports.useRef(!1),[Gn,kn]=reactExports.useState(0);return reactExports.useEffect(()=>{const Nn=bn.current;if(Nn)return Nn.addEventListener(ENTRY_FOCUS,Dn),()=>Nn.removeEventListener(ENTRY_FOCUS,Dn)},[Dn]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:un,orientation:dn,dir:Pn,loop:hn,currentTabStopId:Tn,onItemFocus:reactExports.useCallback(Nn=>In(Nn),[In]),onItemShiftTab:reactExports.useCallback(()=>Sn(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>kn(Nn=>Nn+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>kn(Nn=>Nn-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:Rn||Gn===0?-1:0,"data-orientation":dn,...En,ref:vn,style:{outline:"none",..._e.style},onMouseDown:composeEventHandlers(_e.onMouseDown,()=>{Fn.current=!0}),onFocus:composeEventHandlers(_e.onFocus,Nn=>{const Ln=!Fn.current;if(Nn.target===Nn.currentTarget&&Ln&&!Rn){const zn=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(Nn.currentTarget.dispatchEvent(zn),!zn.defaultPrevented){const Cn=$n().filter(sr=>sr.focusable),Mn=Cn.find(sr=>sr.active),Bn=Cn.find(sr=>sr.id===Tn),nr=[Mn,Bn,...Cn].filter(Boolean).map(sr=>sr.ref.current);focusFirst(nr,xn)}}Fn.current=!1}),onBlur:composeEventHandlers(_e.onBlur,()=>Sn(!1))})})}),ITEM_NAME$2="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((_e,e)=>{const{__scopeRovingFocusGroup:un,focusable:dn=!0,active:hn=!1,tabStopId:fn,...pn}=_e,mn=useId(),gn=fn||mn,yn=useRovingFocusContext(ITEM_NAME$2,un),xn=yn.currentTabStopId===gn,En=useCollection$1(un),{onFocusableItemAdd:bn,onFocusableItemRemove:vn}=yn;return reactExports.useEffect(()=>{if(dn)return bn(),()=>vn()},[dn,bn,vn]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:un,id:gn,focusable:dn,active:hn,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:xn?0:-1,"data-orientation":yn.orientation,...pn,ref:e,onMouseDown:composeEventHandlers(_e.onMouseDown,Pn=>{dn?yn.onItemFocus(gn):Pn.preventDefault()}),onFocus:composeEventHandlers(_e.onFocus,()=>yn.onItemFocus(gn)),onKeyDown:composeEventHandlers(_e.onKeyDown,Pn=>{if(Pn.key==="Tab"&&Pn.shiftKey){yn.onItemShiftTab();return}if(Pn.target!==Pn.currentTarget)return;const Tn=getFocusIntent(Pn,yn.orientation,yn.dir);if(Tn!==void 0){if(Pn.metaKey||Pn.ctrlKey||Pn.altKey||Pn.shiftKey)return;Pn.preventDefault();let Rn=En().filter(Sn=>Sn.focusable).map(Sn=>Sn.ref.current);if(Tn==="last")Rn.reverse();else if(Tn==="prev"||Tn==="next"){Tn==="prev"&&Rn.reverse();const Sn=Rn.indexOf(Pn.currentTarget);Rn=yn.loop?wrapArray$1(Rn,Sn+1):Rn.slice(Sn+1)}setTimeout(()=>focusFirst(Rn))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$2;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(_e,e){return e!=="rtl"?_e:_e==="ArrowLeft"?"ArrowRight":_e==="ArrowRight"?"ArrowLeft":_e}function getFocusIntent(_e,e,un){const dn=getDirectionAwareKey(_e.key,un);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(dn))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(dn)))return MAP_KEY_TO_FOCUS_INTENT[dn]}function focusFirst(_e,e=!1){const un=document.activeElement;for(const dn of _e)if(dn===un||(dn.focus({preventScroll:e}),document.activeElement!==un))return}function wrapArray$1(_e,e){return _e.map((un,dn)=>_e[(e+dn)%_e.length])}var Root$2=RovingFocusGroup,Item$1=RovingFocusGroupItem,TABS_NAME="Tabs",[createTabsContext,createTabsScope]=createContextScope$3(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope$1=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((_e,e)=>{const{__scopeTabs:un,value:dn,onValueChange:hn,defaultValue:fn,orientation:pn="horizontal",dir:mn,activationMode:gn="automatic",...yn}=_e,xn=useDirection(mn),[En,bn]=useControllableState({prop:dn,onChange:hn,defaultProp:fn});return jsxRuntimeExports.jsx(TabsProvider,{scope:un,baseId:useId(),value:En,onValueChange:bn,orientation:pn,dir:xn,activationMode:gn,children:jsxRuntimeExports.jsx(Primitive.div,{dir:xn,"data-orientation":pn,...yn,ref:e})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((_e,e)=>{const{__scopeTabs:un,loop:dn=!0,...hn}=_e,fn=useTabsContext(TAB_LIST_NAME,un),pn=useRovingFocusGroupScope$1(un);return jsxRuntimeExports.jsx(Root$2,{asChild:!0,...pn,orientation:fn.orientation,dir:fn.dir,loop:dn,children:jsxRuntimeExports.jsx(Primitive.div,{role:"tablist","aria-orientation":fn.orientation,...hn,ref:e})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME$1="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((_e,e)=>{const{__scopeTabs:un,value:dn,disabled:hn=!1,...fn}=_e,pn=useTabsContext(TRIGGER_NAME$1,un),mn=useRovingFocusGroupScope$1(un),gn=makeTriggerId(pn.baseId,dn),yn=makeContentId(pn.baseId,dn),xn=dn===pn.value;return jsxRuntimeExports.jsx(Item$1,{asChild:!0,...mn,focusable:!hn,active:xn,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"tab","aria-selected":xn,"aria-controls":yn,"data-state":xn?"active":"inactive","data-disabled":hn?"":void 0,disabled:hn,id:gn,...fn,ref:e,onMouseDown:composeEventHandlers(_e.onMouseDown,En=>{!hn&&En.button===0&&En.ctrlKey===!1?pn.onValueChange(dn):En.preventDefault()}),onKeyDown:composeEventHandlers(_e.onKeyDown,En=>{[" ","Enter"].includes(En.key)&&pn.onValueChange(dn)}),onFocus:composeEventHandlers(_e.onFocus,()=>{const En=pn.activationMode!=="manual";!xn&&!hn&&En&&pn.onValueChange(dn)})})})});TabsTrigger$1.displayName=TRIGGER_NAME$1;var CONTENT_NAME$1="TabsContent",TabsContent$1=reactExports.forwardRef((_e,e)=>{const{__scopeTabs:un,value:dn,forceMount:hn,children:fn,...pn}=_e,mn=useTabsContext(CONTENT_NAME$1,un),gn=makeTriggerId(mn.baseId,dn),yn=makeContentId(mn.baseId,dn),xn=dn===mn.value,En=reactExports.useRef(xn);return reactExports.useEffect(()=>{const bn=requestAnimationFrame(()=>En.current=!1);return()=>cancelAnimationFrame(bn)},[]),jsxRuntimeExports.jsx(Presence,{present:hn||xn,children:({present:bn})=>jsxRuntimeExports.jsx(Primitive.div,{"data-state":xn?"active":"inactive","data-orientation":mn.orientation,role:"tabpanel","aria-labelledby":gn,hidden:!bn,id:yn,tabIndex:0,...pn,ref:e,style:{..._e.style,animationDuration:En.current?"0s":void 0},children:bn&&fn})})});TabsContent$1.displayName=CONTENT_NAME$1;function makeTriggerId(_e,e){return`${_e}-trigger-${e}`}function makeContentId(_e,e){return`${_e}-content-${e}`}var Root2$2=Tabs$1,List=TabsList$1,Trigger$1=TabsTrigger$1,Content=TabsContent$1;const Tabs=Root2$2,TabsList=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(List,{ref:un,className:cn$1("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",_e),...e}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Trigger$1,{ref:un,className:cn$1("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",_e),...e}));TabsTrigger.displayName=Trigger$1.displayName;const TabsContent=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Content,{ref:un,className:cn$1("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",_e),...e}));TabsContent.displayName=Content.displayName;const AuthModal=({isOpen:_e,onClose:e,onSuccess:un})=>{const[dn,hn]=reactExports.useState(""),[fn,pn]=reactExports.useState(""),[mn,gn]=reactExports.useState(!1),[yn,xn]=reactExports.useState(null),En=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new RecaptchaVerifier(auth,"recaptcha-container",{size:"invisible",callback:()=>{}}))},bn=async()=>{if(!dn.trim()){Jt$2.error("Please enter a valid phone number");return}gn(!0);try{En();const Rn=`+91${dn}`,Sn=await signInWithPhoneNumber(auth,Rn,window.recaptchaVerifier);xn(Sn),Jt$2.success("OTP sent successfully!")}catch(Rn){console.error("OTP sending error:",Rn),Rn.code==="auth/configuration-not-found"?Jt$2.error("Phone authentication not configured. Please enable it in Firebase Console."):Jt$2.error(Rn.message||"Failed to send OTP. Please try again.")}finally{gn(!1)}},vn=async()=>{if(!fn.trim()||!yn){Jt$2.error("Please enter the OTP");return}gn(!0);try{await yn.confirm(fn),Jt$2.success("Phone number verified successfully!"),un(),e(),Pn()}catch(Rn){console.error("OTP verification error:",Rn),Jt$2.error("Invalid OTP. Please try again.")}finally{gn(!1)}},Pn=()=>{hn(""),pn(""),xn(null)},Tn=()=>{Pn(),e()},In=Rn=>{const Sn=Rn.target.value.replace(/\D/g,"");Sn.length<=10&&hn(Sn)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Dialog,{open:_e,onOpenChange:Tn,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md w-[95%] max-w-[400px] mx-auto",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl md:text-2xl font-bold text-center",children:"Welcome to Ram's AI"}),jsxRuntimeExports.jsx(DialogDescription,{className:"text-center text-sm md:text-base",children:"Sign in with your phone number to save your progress"})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"login",className:"w-full",children:[jsxRuntimeExports.jsx(TabsList,{className:"grid w-full grid-cols-1",children:jsxRuntimeExports.jsx(TabsTrigger,{value:"login",children:"Phone Login"})}),jsxRuntimeExports.jsx(TabsContent,{value:"login",className:"space-y-4",children:yn?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"otp",children:"Enter OTP"}),jsxRuntimeExports.jsx(Input,{id:"otp",type:"text",placeholder:"Enter 6-digit OTP",value:fn,onChange:Rn=>pn(Rn.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"w-full text-center text-lg tracking-widest"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["OTP sent to +91",dn]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Button,{onClick:vn,disabled:mn||fn.length!==6,className:"w-full bg-gradient-to-r from-green-600 to-blue-600",children:mn?"Verifying...":"Verify OTP"}),jsxRuntimeExports.jsx(Button,{onClick:()=>xn(null),variant:"outline",className:"w-full",children:"Change Phone Number"})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"phone",children:"Phone Number"}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center px-3 bg-gray-100 border border-r-0 border-gray-300 rounded-l-md",children:jsxRuntimeExports.jsx("span",{className:"text-gray-600 font-medium",children:"+91"})}),jsxRuntimeExports.jsx(Input,{id:"phone",type:"tel",placeholder:"9876543210",value:dn,onChange:In,className:"rounded-l-none flex-1",maxLength:10})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Enter your 10-digit mobile number"})]}),jsxRuntimeExports.jsx(Button,{onClick:bn,disabled:mn||dn.length!==10,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600",children:mn?"Sending OTP...":"Send OTP"}),jsxRuntimeExports.jsx("div",{className:"text-center text-xs text-red-600",children:"Note: Phone authentication needs to be enabled in Firebase Console first"})]})})]})]})}),jsxRuntimeExports.jsx("div",{id:"recaptcha-container"})]})},NavigationHeader=({currentView:_e,onViewChange:e})=>{var xn;const[un,dn]=useAuthState(auth),[hn,fn]=reactExports.useState(!1),[pn,mn]=reactExports.useState(!1),gn=async()=>{try{await signOut(auth),Jt$2.success("Logged out successfully"),e("study")}catch{Jt$2.error("Failed to logout")}},yn=[{id:"study",label:"Study Assistant",icon:Brain},{id:"arivu",label:"Arivu Chat",icon:MessageCircle},{id:"history",label:"Study History",icon:History},{id:"profile",label:"Profile",icon:Settings}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("header",{className:"bg-white/95 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-50 shadow-xl transition-all duration-300",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-14 md:h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-md pulse-glow",children:jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5 md:h-6 md:w-6 text-white"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{className:"text-lg md:text-xl font-bold gradient-text",children:"Ram's AI"})})]}),jsxRuntimeExports.jsx("nav",{className:"hidden md:flex items-center gap-2 lg:gap-4",children:yn.map(En=>jsxRuntimeExports.jsxs(Button,{variant:_e===En.id?"default":"ghost",onClick:()=>e(En.id),className:`flex items-center gap-2 px-2 lg:px-3 py-2 rounded-lg transition-all duration-300 ${_e===En.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-md transform scale-105":"text-gray-700 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm hover:scale-102"}`,children:[jsxRuntimeExports.jsx(En.icon,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden lg:inline text-sm font-medium",children:En.label})]},En.id))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[un?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"hidden sm:block text-right",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["+91",(xn=un.phoneNumber)==null?void 0:xn.replace("+91","")]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:"Verified"})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:gn,className:"flex items-center gap-2 border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300 transition-all duration-300 hover:scale-105",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}):jsxRuntimeExports.jsxs(Button,{onClick:()=>fn(!0),className:"btn-primary flex items-center gap-2 px-3 md:px-4",disabled:dn,size:"sm",children:[jsxRuntimeExports.jsx(User$1,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Login"})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"md:hidden text-blue-600 hover:text-blue-700 hover:bg-blue-50 p-2",onClick:()=>mn(!pn),children:pn?jsxRuntimeExports.jsx(X$1,{className:"h-5 w-5"}):jsxRuntimeExports.jsx(Menu,{className:"h-5 w-5"})})]})]}),pn&&jsxRuntimeExports.jsx("nav",{className:"md:hidden py-4 border-t border-gray-200/50 bg-white/98 backdrop-blur-xl animate-fadeInUp shadow-lg",children:jsxRuntimeExports.jsx("div",{className:"space-y-2 px-2",children:yn.map(En=>jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:()=>{e(En.id),mn(!1)},className:`w-full justify-start flex items-center gap-3 px-4 py-3 rounded-xl ${_e===En.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg transform scale-102":"text-gray-700 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"} transition-all duration-300`,children:[jsxRuntimeExports.jsx(En.icon,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:En.label})]},En.id))})})]})}),jsxRuntimeExports.jsx(AuthModal,{isOpen:hn,onClose:()=>fn(!1),onSuccess:()=>{Jt$2.success("Welcome to Ram's AI!")}})]})},Card=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx("div",{ref:un,className:cn$1("rounded-lg border bg-card text-card-foreground shadow-sm",_e),...e}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx("div",{ref:un,className:cn$1("flex flex-col space-y-1.5 p-6",_e),...e}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx("h3",{ref:un,className:cn$1("text-2xl font-semibold leading-none tracking-tight",_e),...e}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx("p",{ref:un,className:cn$1("text-sm text-muted-foreground",_e),...e}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx("div",{ref:un,className:cn$1("p-6 pt-0",_e),...e}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx("div",{ref:un,className:cn$1("flex items-center p-6 pt-0",_e),...e}));CardFooter.displayName="CardFooter";function commonjsRequire(_e){throw new Error('Could not dynamically require "'+_e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,un){module.exports=e.pdfjsLib=un()})(globalThis,()=>(()=>{var __webpack_modules__=[,(_e,e)=>{var Bs;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=Jn,e.bytesToString=Tr,e.createValidAbsoluteUrl=gr,e.getModificationDate=ts,e.getUuid=Ss,e.getVerbosityLevel=nr,e.info=sr,e.isArrayBuffer=Nr,e.isArrayEqual=ns,e.isNodeJS=void 0,e.normalizeUnicode=as,e.objectFromMap=Ar,e.objectSize=qr,e.setVerbosityLevel=Xn,e.shadow=qn,e.string32=Mr,e.stringToBytes=Ir,e.stringToPDFString=kr,e.stringToUTF8String=Hr,e.unreachable=tr,e.utf8StringToString=Kr,e.warn=lr;const un=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=un;const dn=[1,0,0,1,0,0];e.IDENTITY_MATRIX=dn;const hn=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=hn;const fn=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=fn;const pn=1.35;e.LINE_FACTOR=pn;const mn=.35;e.LINE_DESCENT_FACTOR=mn;const gn=mn/pn;e.BASELINE_FACTOR=gn;const yn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=yn;const xn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=xn;const En="pdfjs_internal_editor_";e.AnnotationEditorPrefix=En;const bn={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=bn;const vn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=vn;const Pn={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=Pn;const Tn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=Tn;const In={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=In;const Rn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=Rn;const Sn={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=Sn;const Dn={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=Dn;const $n={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=$n;const Fn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=Fn;const Gn={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=Gn;const kn={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=kn;const Nn={O:"PageOpen",C:"PageClose"};e.PageActionEventType=Nn;const Ln={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=Ln;const zn={NONE:0,BINARY:1};e.CMapCompressionType=zn;const Cn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Cn;const Mn={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Mn;let Bn=Ln.WARNINGS;function Xn(es){Number.isInteger(es)&&(Bn=es)}function nr(){return Bn}function sr(es){Bn>=Ln.INFOS&&console.log(`Info: ${es}`)}function lr(es){Bn>=Ln.WARNINGS&&console.log(`Warning: ${es}`)}function tr(es){throw new Error(es)}function Jn(es,Vr){es||tr(Vr)}function ar(es){switch(es==null?void 0:es.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function gr(es,Vr=null,Wr=null){if(!es)return null;try{if(Wr&&typeof es=="string"){if(Wr.addDefaultProtocol&&es.startsWith("www.")){const ks=es.match(/\./g);(ks==null?void 0:ks.length)>=2&&(es=`http://${es}`)}if(Wr.tryConvertEncoding)try{es=Hr(es)}catch{}}const is=Vr?new URL(es,Vr):new URL(es);if(ar(is))return is}catch{}return null}function qn(es,Vr,Wr,is=!1){return Object.defineProperty(es,Vr,{value:Wr,enumerable:!is,configurable:!0,writable:!1}),Wr}const On=function(){function Vr(Wr,is){this.constructor===Vr&&tr("Cannot initialize BaseException."),this.message=Wr,this.name=is}return Vr.prototype=new Error,Vr.constructor=Vr,Vr}();e.BaseException=On;class Un extends On{constructor(Vr,Wr){super(Vr,"PasswordException"),this.code=Wr}}e.PasswordException=Un;class Yn extends On{constructor(Vr,Wr){super(Vr,"UnknownErrorException"),this.details=Wr}}e.UnknownErrorException=Yn;class er extends On{constructor(Vr){super(Vr,"InvalidPDFException")}}e.InvalidPDFException=er;class Zn extends On{constructor(Vr){super(Vr,"MissingPDFException")}}e.MissingPDFException=Zn;class ir extends On{constructor(Vr,Wr){super(Vr,"UnexpectedResponseException"),this.status=Wr}}e.UnexpectedResponseException=ir;class fr extends On{constructor(Vr){super(Vr,"FormatError")}}e.FormatError=fr;class br extends On{constructor(Vr){super(Vr,"AbortException")}}e.AbortException=br;function Tr(es){(typeof es!="object"||(es==null?void 0:es.length)===void 0)&&tr("Invalid argument for bytesToString");const Vr=es.length,Wr=8192;if(Vr<Wr)return String.fromCharCode.apply(null,es);const is=[];for(let ks=0;ks<Vr;ks+=Wr){const ws=Math.min(ks+Wr,Vr),Rr=es.subarray(ks,ws);is.push(String.fromCharCode.apply(null,Rr))}return is.join("")}function Ir(es){typeof es!="string"&&tr("Invalid argument for stringToBytes");const Vr=es.length,Wr=new Uint8Array(Vr);for(let is=0;is<Vr;++is)Wr[is]=es.charCodeAt(is)&255;return Wr}function Mr(es){return String.fromCharCode(es>>24&255,es>>16&255,es>>8&255,es&255)}function qr(es){return Object.keys(es).length}function Ar(es){const Vr=Object.create(null);for(const[Wr,is]of es)Vr[Wr]=is;return Vr}function or(){const es=new Uint8Array(4);return es[0]=1,new Uint32Array(es.buffer,0,1)[0]===1}function jr(){try{return new Function(""),!0}catch{return!1}}class cr{static get isLittleEndian(){return qn(this,"isLittleEndian",or())}static get isEvalSupported(){return qn(this,"isEvalSupported",jr())}static get isOffscreenCanvasSupported(){return qn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?qn(this,"platform",{isWin:!1,isMac:!1}):qn(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Vr,Wr;return qn(this,"isCSSRoundSupported",(Wr=(Vr=globalThis.CSS)==null?void 0:Vr.supports)==null?void 0:Wr.call(Vr,"width: round(1.5px, 1px)"))}}e.FeatureTest=cr;const hr=[...Array(256).keys()].map(es=>es.toString(16).padStart(2,"0"));class wr{static makeHexColor(Vr,Wr,is){return`#${hr[Vr]}${hr[Wr]}${hr[is]}`}static scaleMinMax(Vr,Wr){let is;Vr[0]?(Vr[0]<0&&(is=Wr[0],Wr[0]=Wr[1],Wr[1]=is),Wr[0]*=Vr[0],Wr[1]*=Vr[0],Vr[3]<0&&(is=Wr[2],Wr[2]=Wr[3],Wr[3]=is),Wr[2]*=Vr[3],Wr[3]*=Vr[3]):(is=Wr[0],Wr[0]=Wr[2],Wr[2]=is,is=Wr[1],Wr[1]=Wr[3],Wr[3]=is,Vr[1]<0&&(is=Wr[2],Wr[2]=Wr[3],Wr[3]=is),Wr[2]*=Vr[1],Wr[3]*=Vr[1],Vr[2]<0&&(is=Wr[0],Wr[0]=Wr[1],Wr[1]=is),Wr[0]*=Vr[2],Wr[1]*=Vr[2]),Wr[0]+=Vr[4],Wr[1]+=Vr[4],Wr[2]+=Vr[5],Wr[3]+=Vr[5]}static transform(Vr,Wr){return[Vr[0]*Wr[0]+Vr[2]*Wr[1],Vr[1]*Wr[0]+Vr[3]*Wr[1],Vr[0]*Wr[2]+Vr[2]*Wr[3],Vr[1]*Wr[2]+Vr[3]*Wr[3],Vr[0]*Wr[4]+Vr[2]*Wr[5]+Vr[4],Vr[1]*Wr[4]+Vr[3]*Wr[5]+Vr[5]]}static applyTransform(Vr,Wr){const is=Vr[0]*Wr[0]+Vr[1]*Wr[2]+Wr[4],ks=Vr[0]*Wr[1]+Vr[1]*Wr[3]+Wr[5];return[is,ks]}static applyInverseTransform(Vr,Wr){const is=Wr[0]*Wr[3]-Wr[1]*Wr[2],ks=(Vr[0]*Wr[3]-Vr[1]*Wr[2]+Wr[2]*Wr[5]-Wr[4]*Wr[3])/is,ws=(-Vr[0]*Wr[1]+Vr[1]*Wr[0]+Wr[4]*Wr[1]-Wr[5]*Wr[0])/is;return[ks,ws]}static getAxialAlignedBoundingBox(Vr,Wr){const is=this.applyTransform(Vr,Wr),ks=this.applyTransform(Vr.slice(2,4),Wr),ws=this.applyTransform([Vr[0],Vr[3]],Wr),Rr=this.applyTransform([Vr[2],Vr[1]],Wr);return[Math.min(is[0],ks[0],ws[0],Rr[0]),Math.min(is[1],ks[1],ws[1],Rr[1]),Math.max(is[0],ks[0],ws[0],Rr[0]),Math.max(is[1],ks[1],ws[1],Rr[1])]}static inverseTransform(Vr){const Wr=Vr[0]*Vr[3]-Vr[1]*Vr[2];return[Vr[3]/Wr,-Vr[1]/Wr,-Vr[2]/Wr,Vr[0]/Wr,(Vr[2]*Vr[5]-Vr[4]*Vr[3])/Wr,(Vr[4]*Vr[1]-Vr[5]*Vr[0])/Wr]}static singularValueDecompose2dScale(Vr){const Wr=[Vr[0],Vr[2],Vr[1],Vr[3]],is=Vr[0]*Wr[0]+Vr[1]*Wr[2],ks=Vr[0]*Wr[1]+Vr[1]*Wr[3],ws=Vr[2]*Wr[0]+Vr[3]*Wr[2],Rr=Vr[2]*Wr[1]+Vr[3]*Wr[3],Zr=(is+Rr)/2,ds=Math.sqrt((is+Rr)**2-4*(is*Rr-ws*ks))/2,fs=Zr+ds||1,vs=Zr-ds||1;return[Math.sqrt(fs),Math.sqrt(vs)]}static normalizeRect(Vr){const Wr=Vr.slice(0);return Vr[0]>Vr[2]&&(Wr[0]=Vr[2],Wr[2]=Vr[0]),Vr[1]>Vr[3]&&(Wr[1]=Vr[3],Wr[3]=Vr[1]),Wr}static intersect(Vr,Wr){const is=Math.max(Math.min(Vr[0],Vr[2]),Math.min(Wr[0],Wr[2])),ks=Math.min(Math.max(Vr[0],Vr[2]),Math.max(Wr[0],Wr[2]));if(is>ks)return null;const ws=Math.max(Math.min(Vr[1],Vr[3]),Math.min(Wr[1],Wr[3])),Rr=Math.min(Math.max(Vr[1],Vr[3]),Math.max(Wr[1],Wr[3]));return ws>Rr?null:[is,ws,ks,Rr]}static bezierBoundingBox(Vr,Wr,is,ks,ws,Rr,Zr,ds){const fs=[],vs=[[],[]];let Ts,Er,vr,Lr,Dr,Jr,ls,cs;for(let $s=0;$s<2;++$s){if($s===0?(Er=6*Vr-12*is+6*ws,Ts=-3*Vr+9*is-9*ws+3*Zr,vr=3*is-3*Vr):(Er=6*Wr-12*ks+6*Rr,Ts=-3*Wr+9*ks-9*Rr+3*ds,vr=3*ks-3*Wr),Math.abs(Ts)<1e-12){if(Math.abs(Er)<1e-12)continue;Lr=-vr/Er,0<Lr&&Lr<1&&fs.push(Lr);continue}ls=Er*Er-4*vr*Ts,cs=Math.sqrt(ls),!(ls<0)&&(Dr=(-Er+cs)/(2*Ts),0<Dr&&Dr<1&&fs.push(Dr),Jr=(-Er-cs)/(2*Ts),0<Jr&&Jr<1&&fs.push(Jr))}let Rs=fs.length,As;const gs=Rs;for(;Rs--;)Lr=fs[Rs],As=1-Lr,vs[0][Rs]=As*As*As*Vr+3*As*As*Lr*is+3*As*Lr*Lr*ws+Lr*Lr*Lr*Zr,vs[1][Rs]=As*As*As*Wr+3*As*As*Lr*ks+3*As*Lr*Lr*Rr+Lr*Lr*Lr*ds;return vs[0][gs]=Vr,vs[1][gs]=Wr,vs[0][gs+1]=Zr,vs[1][gs+1]=ds,vs[0].length=vs[1].length=gs+2,[Math.min(...vs[0]),Math.min(...vs[1]),Math.max(...vs[0]),Math.max(...vs[1])]}}e.Util=wr;const Pr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function kr(es){if(es[0]>=""){let Wr;if(es[0]===""&&es[1]===""?Wr="utf-16be":es[0]===""&&es[1]===""?Wr="utf-16le":es[0]===""&&es[1]===""&&es[2]===""&&(Wr="utf-8"),Wr)try{const is=new TextDecoder(Wr,{fatal:!0}),ks=Ir(es);return is.decode(ks)}catch(is){lr(`stringToPDFString: "${is}".`)}}const Vr=[];for(let Wr=0,is=es.length;Wr<is;Wr++){const ks=Pr[es.charCodeAt(Wr)];Vr.push(ks?String.fromCharCode(ks):es.charAt(Wr))}return Vr.join("")}function Hr(es){return decodeURIComponent(escape(es))}function Kr(es){return unescape(encodeURIComponent(es))}function Nr(es){return typeof es=="object"&&(es==null?void 0:es.byteLength)!==void 0}function ns(es,Vr){if(es.length!==Vr.length)return!1;for(let Wr=0,is=es.length;Wr<is;Wr++)if(es[Wr]!==Vr[Wr])return!1;return!0}function ts(es=new Date){return[es.getUTCFullYear().toString(),(es.getUTCMonth()+1).toString().padStart(2,"0"),es.getUTCDate().toString().padStart(2,"0"),es.getUTCHours().toString().padStart(2,"0"),es.getUTCMinutes().toString().padStart(2,"0"),es.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ps{constructor(){Br(this,Bs,!1);this.promise=new Promise((Vr,Wr)=>{this.resolve=is=>{Fr(this,Bs,!0),Vr(is)},this.reject=is=>{Fr(this,Bs,!0),Wr(is)}})}get settled(){return Hn(this,Bs)}}Bs=new WeakMap,e.PromiseCapability=Ps;let ps=null,Cs=null;function as(es){return ps||(ps=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Cs=new Map([["","t"]])),es.replaceAll(ps,(Vr,Wr,is)=>Wr?Wr.normalize("NFKC"):Cs.get(is))}function Ss(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const es=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(es);else for(let Vr=0;Vr<32;Vr++)es[Vr]=Math.floor(Math.random()*255);return Tr(es)}const js="pdfjs_internal_id_";e.AnnotationPrefix=js},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var _e,un,dn,hn,Vp,Xm,mn,gn,yn,xn,En,bn,vn,Pn,Tn,Qm,Rn,Sn,P0,$n,Fn;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(kn){if(typeof kn=="string"||kn instanceof URL?kn={url:kn}:(0,_util.isArrayBuffer)(kn)&&(kn={data:kn}),typeof kn!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!kn.url&&!kn.data&&!kn.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const Nn=new PDFDocumentLoadingTask,{docId:Ln}=Nn,zn=kn.url?getUrlProp(kn.url):null,Cn=kn.data?getDataProp(kn.data):null,Mn=kn.httpHeaders||null,Bn=kn.withCredentials===!0,Xn=kn.password??null,nr=kn.range instanceof PDFDataRangeTransport?kn.range:null,sr=Number.isInteger(kn.rangeChunkSize)&&kn.rangeChunkSize>0?kn.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let lr=kn.worker instanceof PDFWorker?kn.worker:null;const tr=kn.verbosity,Jn=typeof kn.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(kn.docBaseUrl)?kn.docBaseUrl:null,ar=typeof kn.cMapUrl=="string"?kn.cMapUrl:null,gr=kn.cMapPacked!==!1,qn=kn.CMapReaderFactory||DefaultCMapReaderFactory,On=typeof kn.standardFontDataUrl=="string"?kn.standardFontDataUrl:null,Un=kn.StandardFontDataFactory||DefaultStandardFontDataFactory,Yn=kn.stopAtErrors!==!0,er=Number.isInteger(kn.maxImageSize)&&kn.maxImageSize>-1?kn.maxImageSize:-1,Zn=kn.isEvalSupported!==!1,ir=typeof kn.isOffscreenCanvasSupported=="boolean"?kn.isOffscreenCanvasSupported:!_util.isNodeJS,fr=Number.isInteger(kn.canvasMaxAreaInBytes)?kn.canvasMaxAreaInBytes:-1,br=typeof kn.disableFontFace=="boolean"?kn.disableFontFace:_util.isNodeJS,Tr=kn.fontExtraProperties===!0,Ir=kn.enableXfa===!0,Mr=kn.ownerDocument||globalThis.document,qr=kn.disableRange===!0,Ar=kn.disableStream===!0,or=kn.disableAutoFetch===!0,jr=kn.pdfBug===!0,cr=nr?nr.length:kn.length??NaN,hr=typeof kn.useSystemFonts=="boolean"?kn.useSystemFonts:!_util.isNodeJS&&!br,wr=typeof kn.useWorkerFetch=="boolean"?kn.useWorkerFetch:qn===_display_utils.DOMCMapReaderFactory&&Un===_display_utils.DOMStandardFontDataFactory&&ar&&On&&(0,_display_utils.isValidFetchUrl)(ar,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(On,document.baseURI),Pr=kn.canvasFactory||new DefaultCanvasFactory({ownerDocument:Mr}),kr=kn.filterFactory||new DefaultFilterFactory({docId:Ln,ownerDocument:Mr}),Hr=null;(0,_util.setVerbosityLevel)(tr);const Kr={canvasFactory:Pr,filterFactory:kr};if(wr||(Kr.cMapReaderFactory=new qn({baseUrl:ar,isCompressed:gr}),Kr.standardFontDataFactory=new Un({baseUrl:On})),!lr){const ts={verbosity:tr,port:_worker_options.GlobalWorkerOptions.workerPort};lr=ts.port?PDFWorker.fromPort(ts):new PDFWorker(ts),Nn._worker=lr}const Nr={docId:Ln,apiVersion:"3.11.174",data:Cn,password:Xn,disableAutoFetch:or,rangeChunkSize:sr,length:cr,docBaseUrl:Jn,enableXfa:Ir,evaluatorOptions:{maxImageSize:er,disableFontFace:br,ignoreErrors:Yn,isEvalSupported:Zn,isOffscreenCanvasSupported:ir,canvasMaxAreaInBytes:fr,fontExtraProperties:Tr,useSystemFonts:hr,cMapUrl:wr?ar:null,standardFontDataUrl:wr?On:null}},ns={ignoreErrors:Yn,isEvalSupported:Zn,disableFontFace:br,fontExtraProperties:Tr,enableXfa:Ir,ownerDocument:Mr,disableAutoFetch:or,pdfBug:jr,styleElement:Hr};return lr.promise.then(function(){if(Nn.destroyed)throw new Error("Loading aborted");const ts=_fetchDocument(lr,Nr),Ps=new Promise(function(ps){let Cs;nr?Cs=new _transport_stream.PDFDataTransportStream({length:cr,initialData:nr.initialData,progressiveDone:nr.progressiveDone,contentDispositionFilename:nr.contentDispositionFilename,disableRange:qr,disableStream:Ar},nr):Cn||(Cs=(Ss=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ss):(0,_display_utils.isValidFetchUrl)(Ss.url)?new _displayFetch_stream.PDFFetchStream(Ss):new _displayNetwork.PDFNetworkStream(Ss))({url:zn,length:cr,httpHeaders:Mn,withCredentials:Bn,rangeChunkSize:sr,disableRange:qr,disableStream:Ar})),ps(Cs)});return Promise.all([ts,Ps]).then(function([ps,Cs]){if(Nn.destroyed)throw new Error("Loading aborted");const as=new _message_handler.MessageHandler(Ln,ps,lr.port),Ss=new WorkerTransport(as,Nn,Cs,ns,Kr);Nn._transport=Ss,as.send("Ready",null)})}).catch(Nn._capability.reject),Nn}async function _fetchDocument(kn,Nn){if(kn.destroyed)throw new Error("Worker was destroyed");const Ln=await kn.messageHandler.sendWithPromise("GetDocRequest",Nn,Nn.data?[Nn.data.buffer]:null);if(kn.destroyed)throw new Error("Worker was destroyed");return Ln}function getUrlProp(kn){if(kn instanceof URL)return kn.href;try{return new URL(kn,window.location).href}catch{if(_util.isNodeJS&&typeof kn=="string")return kn}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(kn){if(_util.isNodeJS&&typeof Buffer<"u"&&kn instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(kn instanceof Uint8Array&&kn.byteLength===kn.buffer.byteLength)return kn;if(typeof kn=="string")return(0,_util.stringToBytes)(kn);if(typeof kn=="object"&&!isNaN(kn==null?void 0:kn.length)||(0,_util.isArrayBuffer)(kn))return new Uint8Array(kn);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${$u(e,_e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var Nn,Ln,zn;this.destroyed=!0;try{(Nn=this._worker)!=null&&Nn.port&&(this._worker._pendingDestroy=!0),await((Ln=this._transport)==null?void 0:Ln.destroy())}catch(Cn){throw(zn=this._worker)!=null&&zn.port&&delete this._worker._pendingDestroy,Cn}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_e=new WeakMap,Br(e,_e,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(Nn,Ln,zn=!1,Cn=null){this.length=Nn,this.initialData=Ln,this.progressiveDone=zn,this.contentDispositionFilename=Cn,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(Nn){this._rangeListeners.push(Nn)}addProgressListener(Nn){this._progressListeners.push(Nn)}addProgressiveReadListener(Nn){this._progressiveReadListeners.push(Nn)}addProgressiveDoneListener(Nn){this._progressiveDoneListeners.push(Nn)}onDataRange(Nn,Ln){for(const zn of this._rangeListeners)zn(Nn,Ln)}onDataProgress(Nn,Ln){this._readyCapability.promise.then(()=>{for(const zn of this._progressListeners)zn(Nn,Ln)})}onDataProgressiveRead(Nn){this._readyCapability.promise.then(()=>{for(const Ln of this._progressiveReadListeners)Ln(Nn)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const Nn of this._progressiveDoneListeners)Nn()})}transportReady(){this._readyCapability.resolve()}requestDataRange(Nn,Ln){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(Nn,Ln){this._pdfInfo=Nn,this._transport=Ln,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(zn=>{if(!zn)return zn;const Cn=[];for(const Mn in zn)Cn.push(...zn[Mn]);return Cn}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(Nn){return this._transport.getPage(Nn)}getPageIndex(Nn){return this._transport.getPageIndex(Nn)}getDestinations(){return this._transport.getDestinations()}getDestination(Nn){return this._transport.getDestination(Nn)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(Nn=!1){return this._transport.startCleanup(Nn||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(Nn,Ln,zn,Cn=!1){Br(this,hn);Br(this,un,null);Br(this,dn,!1);this._pageIndex=Nn,this._pageInfo=Ln,this._transport=zn,this._stats=Cn?new _display_utils.StatTimer:null,this._pdfBug=Cn,this.commonObjs=zn.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:Nn,rotation:Ln=this.rotate,offsetX:zn=0,offsetY:Cn=0,dontFlip:Mn=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:Nn,rotation:Ln,offsetX:zn,offsetY:Cn,dontFlip:Mn})}getAnnotations({intent:Nn="display"}={}){const Ln=this._transport.getRenderingIntent(Nn);return this._transport.getAnnotations(this._pageIndex,Ln.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var Nn;return((Nn=this._transport._htmlForXfa)==null?void 0:Nn.children[this._pageIndex])||null}render({canvasContext:Nn,viewport:Ln,intent:zn="display",annotationMode:Cn=_util.AnnotationMode.ENABLE,transform:Mn=null,background:Bn=null,optionalContentConfigPromise:Xn=null,annotationCanvasMap:nr=null,pageColors:sr=null,printAnnotationStorage:lr=null}){var Un,Yn;(Un=this._stats)==null||Un.time("Overall");const tr=this._transport.getRenderingIntent(zn,Cn,lr);Fr(this,dn,!1),Or(this,hn,Xm).call(this),Xn||(Xn=this._transport.getOptionalContentConfig());let Jn=this._intentStates.get(tr.cacheKey);Jn||(Jn=Object.create(null),this._intentStates.set(tr.cacheKey,Jn)),Jn.streamReaderCancelTimeout&&(clearTimeout(Jn.streamReaderCancelTimeout),Jn.streamReaderCancelTimeout=null);const ar=!!(tr.renderingIntent&_util.RenderingIntentFlag.PRINT);Jn.displayReadyCapability||(Jn.displayReadyCapability=new _util.PromiseCapability,Jn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Yn=this._stats)==null||Yn.time("Page Request"),this._pumpOperatorList(tr));const gr=er=>{var Zn,ir;Jn.renderTasks.delete(qn),(this._maybeCleanupAfterRender||ar)&&Fr(this,dn,!0),Or(this,hn,Vp).call(this,!ar),er?(qn.capability.reject(er),this._abortOperatorList({intentState:Jn,reason:er instanceof Error?er:new Error(er)})):qn.capability.resolve(),(Zn=this._stats)==null||Zn.timeEnd("Rendering"),(ir=this._stats)==null||ir.timeEnd("Overall")},qn=new InternalRenderTask({callback:gr,params:{canvasContext:Nn,viewport:Ln,transform:Mn,background:Bn},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:nr,operatorList:Jn.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ar,pdfBug:this._pdfBug,pageColors:sr});(Jn.renderTasks||(Jn.renderTasks=new Set)).add(qn);const On=qn.task;return Promise.all([Jn.displayReadyCapability.promise,Xn]).then(([er,Zn])=>{var ir;if(this.destroyed){gr();return}(ir=this._stats)==null||ir.time("Rendering"),qn.initializeGraphics({transparency:er,optionalContentConfig:Zn}),qn.operatorListChanged()}).catch(gr),On}getOperatorList({intent:Nn="display",annotationMode:Ln=_util.AnnotationMode.ENABLE,printAnnotationStorage:zn=null}={}){var nr;function Cn(){Bn.operatorList.lastChunk&&(Bn.opListReadCapability.resolve(Bn.operatorList),Bn.renderTasks.delete(Xn))}const Mn=this._transport.getRenderingIntent(Nn,Ln,zn,!0);let Bn=this._intentStates.get(Mn.cacheKey);Bn||(Bn=Object.create(null),this._intentStates.set(Mn.cacheKey,Bn));let Xn;return Bn.opListReadCapability||(Xn=Object.create(null),Xn.operatorListChanged=Cn,Bn.opListReadCapability=new _util.PromiseCapability,(Bn.renderTasks||(Bn.renderTasks=new Set)).add(Xn),Bn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(nr=this._stats)==null||nr.time("Page Request"),this._pumpOperatorList(Mn)),Bn.opListReadCapability.promise}streamTextContent({includeMarkedContent:Nn=!1,disableNormalization:Ln=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:Nn===!0,disableNormalization:Ln===!0},{highWaterMark:100,size(Cn){return Cn.items.length}})}getTextContent(Nn={}){if(this._transport._htmlForXfa)return this.getXfa().then(zn=>_xfa_text.XfaText.textContent(zn));const Ln=this.streamTextContent(Nn);return new Promise(function(zn,Cn){function Mn(){Bn.read().then(function({value:nr,done:sr}){if(sr){zn(Xn);return}Object.assign(Xn.styles,nr.styles),Xn.items.push(...nr.items),Mn()},Cn)}const Bn=Ln.getReader(),Xn={items:[],styles:Object.create(null)};Mn()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const Nn=[];for(const Ln of this._intentStates.values())if(this._abortOperatorList({intentState:Ln,reason:new Error("Page was destroyed."),force:!0}),!Ln.opListReadCapability)for(const zn of Ln.renderTasks)Nn.push(zn.completed),zn.cancel();return this.objs.clear(),Fr(this,dn,!1),Or(this,hn,Xm).call(this),Promise.all(Nn)}cleanup(Nn=!1){Fr(this,dn,!0);const Ln=Or(this,hn,Vp).call(this,!1);return Nn&&Ln&&this._stats&&(this._stats=new _display_utils.StatTimer),Ln}_startRenderPage(Nn,Ln){var Cn,Mn;const zn=this._intentStates.get(Ln);zn&&((Cn=this._stats)==null||Cn.timeEnd("Page Request"),(Mn=zn.displayReadyCapability)==null||Mn.resolve(Nn))}_renderPageChunk(Nn,Ln){for(let zn=0,Cn=Nn.length;zn<Cn;zn++)Ln.operatorList.fnArray.push(Nn.fnArray[zn]),Ln.operatorList.argsArray.push(Nn.argsArray[zn]);Ln.operatorList.lastChunk=Nn.lastChunk,Ln.operatorList.separateAnnots=Nn.separateAnnots;for(const zn of Ln.renderTasks)zn.operatorListChanged();Nn.lastChunk&&Or(this,hn,Vp).call(this,!0)}_pumpOperatorList({renderingIntent:Nn,cacheKey:Ln,annotationStorageSerializable:zn}){const{map:Cn,transfers:Mn}=zn,Xn=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Nn,cacheKey:Ln,annotationStorage:Cn},Mn).getReader(),nr=this._intentStates.get(Ln);nr.streamReader=Xn;const sr=()=>{Xn.read().then(({value:lr,done:tr})=>{if(tr){nr.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(lr,nr),sr())},lr=>{if(nr.streamReader=null,!this._transport.destroyed){if(nr.operatorList){nr.operatorList.lastChunk=!0;for(const tr of nr.renderTasks)tr.operatorListChanged();Or(this,hn,Vp).call(this,!0)}if(nr.displayReadyCapability)nr.displayReadyCapability.reject(lr);else if(nr.opListReadCapability)nr.opListReadCapability.reject(lr);else throw lr}})};sr()}_abortOperatorList({intentState:Nn,reason:Ln,force:zn=!1}){if(Nn.streamReader){if(Nn.streamReaderCancelTimeout&&(clearTimeout(Nn.streamReaderCancelTimeout),Nn.streamReaderCancelTimeout=null),!zn){if(Nn.renderTasks.size>0)return;if(Ln instanceof _display_utils.RenderingCancelledException){let Cn=RENDERING_CANCELLED_TIMEOUT;Ln.extraDelay>0&&Ln.extraDelay<1e3&&(Cn+=Ln.extraDelay),Nn.streamReaderCancelTimeout=setTimeout(()=>{Nn.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:Nn,reason:Ln,force:!0})},Cn);return}}if(Nn.streamReader.cancel(new _util.AbortException(Ln.message)).catch(()=>{}),Nn.streamReader=null,!this._transport.destroyed){for(const[Cn,Mn]of this._intentStates)if(Mn===Nn){this._intentStates.delete(Cn);break}this.cleanup()}}}get stats(){return this._stats}}un=new WeakMap,dn=new WeakMap,hn=new WeakSet,Vp=function(Nn=!1){if(Or(this,hn,Xm).call(this),!Hn(this,dn)||this.destroyed)return!1;if(Nn)return Fr(this,un,setTimeout(()=>{Fr(this,un,null),Or(this,hn,Vp).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Ln,operatorList:zn}of this._intentStates.values())if(Ln.size>0||!zn.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Fr(this,dn,!1),!0},Xm=function(){Hn(this,un)&&(clearTimeout(Hn(this,un)),Fr(this,un,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Br(this,mn,new Set);Br(this,gn,Promise.resolve())}postMessage(Nn,Ln){const zn={data:structuredClone(Nn,Ln?{transfer:Ln}:null)};Hn(this,gn).then(()=>{for(const Cn of Hn(this,mn))Cn.call(this,zn)})}addEventListener(Nn,Ln){Hn(this,mn).add(Ln)}removeEventListener(Nn,Ln){Hn(this,mn).delete(Ln)}terminate(){Hn(this,mn).clear()}}mn=new WeakMap,gn=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const kn=(yn=document==null?void 0:document.currentScript)==null?void 0:yn.src;kn&&(PDFWorkerUtil.fallbackWorkerSrc=kn.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(kn,Nn){let Ln;try{if(Ln=new URL(kn),!Ln.origin||Ln.origin==="null")return!1}catch{return!1}const zn=new URL(Nn,Ln);return Ln.origin===zn.origin},PDFWorkerUtil.createCDNWrapper=function(kn){const Nn=`importScripts("${kn}");`;return URL.createObjectURL(new Blob([Nn]))}}const _PDFWorker=class _PDFWorker{constructor({name:kn=null,port:Nn=null,verbosity:Ln=(0,_util.getVerbosityLevel)()}={}){var zn;if(this.name=kn,this.destroyed=!1,this.verbosity=Ln,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,Nn){if((zn=Hn(_PDFWorker,xn))!=null&&zn.has(Nn))throw new Error("Cannot use more than one PDFWorker per port.");(Hn(_PDFWorker,xn)||Fr(_PDFWorker,xn,new WeakMap)).set(Nn,this),this._initializeFromPort(Nn);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(kn){this._port=kn,this._messageHandler=new _message_handler.MessageHandler("main","worker",kn),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:kn}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,kn)||(kn=PDFWorkerUtil.createCDNWrapper(new URL(kn,window.location).href));const Nn=new Worker(kn),Ln=new _message_handler.MessageHandler("main","worker",Nn),zn=()=>{Nn.removeEventListener("error",Cn),Ln.destroy(),Nn.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Cn=()=>{this._webWorker||zn()};Nn.addEventListener("error",Cn),Ln.on("test",Bn=>{if(Nn.removeEventListener("error",Cn),this.destroyed){zn();return}Bn?(this._messageHandler=Ln,this._port=Nn,this._webWorker=Nn,this._readyCapability.resolve(),Ln.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Ln.destroy(),Nn.terminate())}),Ln.on("ready",Bn=>{if(Nn.removeEventListener("error",Cn),this.destroyed){zn();return}try{Mn()}catch{this._setupFakeWorker()}});const Mn=()=>{const Bn=new Uint8Array;Ln.send("test",Bn,[Bn.buffer])};Mn();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(kn=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const Nn=new LoopbackPort;this._port=Nn;const Ln=`fake${PDFWorkerUtil.fakeWorkerId++}`,zn=new _message_handler.MessageHandler(Ln+"_worker",Ln,Nn);kn.setup(zn,Nn);const Cn=new _message_handler.MessageHandler(Ln,Ln+"_worker",Nn);this._messageHandler=Cn,this._readyCapability.resolve(),Cn.send("configure",{verbosity:this.verbosity})}).catch(kn=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${kn.message}".`))})}destroy(){var kn;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(kn=Hn(_PDFWorker,xn))==null||kn.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(kn){var Ln;if(!(kn!=null&&kn.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const Nn=(Ln=Hn(this,xn))==null?void 0:Ln.get(kn.port);if(Nn){if(Nn._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return Nn}return new _PDFWorker(kn)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var kn;try{return((kn=globalThis.pdfjsWorker)==null?void 0:kn.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};xn=new WeakMap,Br(_PDFWorker,xn);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(Nn,Ln,zn,Cn,Mn){Br(this,Tn);Br(this,En,new Map);Br(this,bn,new Map);Br(this,vn,new Map);Br(this,Pn,null);this.messageHandler=Nn,this.loadingTask=Ln,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Cn.ownerDocument,styleElement:Cn.styleElement}),this._params=Cn,this.canvasFactory=Mn.canvasFactory,this.filterFactory=Mn.filterFactory,this.cMapReaderFactory=Mn.cMapReaderFactory,this.standardFontDataFactory=Mn.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=zn,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(Nn,Ln=_util.AnnotationMode.ENABLE,zn=null,Cn=!1){let Mn=_util.RenderingIntentFlag.DISPLAY,Bn=_annotation_storage.SerializableEmpty;switch(Nn){case"any":Mn=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Mn=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${Nn}`)}switch(Ln){case _util.AnnotationMode.DISABLE:Mn+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Mn+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Mn+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Bn=(Mn&_util.RenderingIntentFlag.PRINT&&zn instanceof _annotation_storage.PrintAnnotationStorage?zn:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Ln}`)}return Cn&&(Mn+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Mn,cacheKey:`${Mn}_${Bn.hash}`,annotationStorageSerializable:Bn}}destroy(){var zn;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(zn=Hn(this,Pn))==null||zn.reject(new Error("Worker was destroyed during onPassword callback"));const Nn=[];for(const Cn of Hn(this,bn).values())Nn.push(Cn._destroy());Hn(this,bn).clear(),Hn(this,vn).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Ln=this.messageHandler.sendWithPromise("Terminate",null);return Nn.push(Ln),Promise.all(Nn).then(()=>{var Cn;this.commonObjs.clear(),this.fontLoader.clear(),Hn(this,En).clear(),this.filterFactory.destroy(),(Cn=this._networkStream)==null||Cn.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:Nn,loadingTask:Ln}=this;Nn.on("GetReader",(zn,Cn)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Mn=>{this._lastProgress={loaded:Mn.loaded,total:Mn.total}},Cn.onPull=()=>{this._fullReader.read().then(function({value:Mn,done:Bn}){if(Bn){Cn.close();return}(0,_util.assert)(Mn instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Cn.enqueue(new Uint8Array(Mn),1,[Mn])}).catch(Mn=>{Cn.error(Mn)})},Cn.onCancel=Mn=>{this._fullReader.cancel(Mn),Cn.ready.catch(Bn=>{if(!this.destroyed)throw Bn})}}),Nn.on("ReaderHeadersReady",zn=>{const Cn=new _util.PromiseCapability,Mn=this._fullReader;return Mn.headersReady.then(()=>{var Bn;(!Mn.isStreamingSupported||!Mn.isRangeSupported)&&(this._lastProgress&&((Bn=Ln.onProgress)==null||Bn.call(Ln,this._lastProgress)),Mn.onProgress=Xn=>{var nr;(nr=Ln.onProgress)==null||nr.call(Ln,{loaded:Xn.loaded,total:Xn.total})}),Cn.resolve({isStreamingSupported:Mn.isStreamingSupported,isRangeSupported:Mn.isRangeSupported,contentLength:Mn.contentLength})},Cn.reject),Cn.promise}),Nn.on("GetRangeReader",(zn,Cn)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Mn=this._networkStream.getRangeReader(zn.begin,zn.end);if(!Mn){Cn.close();return}Cn.onPull=()=>{Mn.read().then(function({value:Bn,done:Xn}){if(Xn){Cn.close();return}(0,_util.assert)(Bn instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Cn.enqueue(new Uint8Array(Bn),1,[Bn])}).catch(Bn=>{Cn.error(Bn)})},Cn.onCancel=Bn=>{Mn.cancel(Bn),Cn.ready.catch(Xn=>{if(!this.destroyed)throw Xn})}}),Nn.on("GetDoc",({pdfInfo:zn})=>{this._numPages=zn.numPages,this._htmlForXfa=zn.htmlForXfa,delete zn.htmlForXfa,Ln._capability.resolve(new PDFDocumentProxy(zn,this))}),Nn.on("DocException",function(zn){let Cn;switch(zn.name){case"PasswordException":Cn=new _util.PasswordException(zn.message,zn.code);break;case"InvalidPDFException":Cn=new _util.InvalidPDFException(zn.message);break;case"MissingPDFException":Cn=new _util.MissingPDFException(zn.message);break;case"UnexpectedResponseException":Cn=new _util.UnexpectedResponseException(zn.message,zn.status);break;case"UnknownErrorException":Cn=new _util.UnknownErrorException(zn.message,zn.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Ln._capability.reject(Cn)}),Nn.on("PasswordRequest",zn=>{if(Fr(this,Pn,new _util.PromiseCapability),Ln.onPassword){const Cn=Mn=>{Mn instanceof Error?Hn(this,Pn).reject(Mn):Hn(this,Pn).resolve({password:Mn})};try{Ln.onPassword(Cn,zn.code)}catch(Mn){Hn(this,Pn).reject(Mn)}}else Hn(this,Pn).reject(new _util.PasswordException(zn.message,zn.code));return Hn(this,Pn).promise}),Nn.on("DataLoaded",zn=>{var Cn;(Cn=Ln.onProgress)==null||Cn.call(Ln,{loaded:zn.length,total:zn.length}),this.downloadInfoCapability.resolve(zn)}),Nn.on("StartRenderPage",zn=>{if(this.destroyed)return;Hn(this,bn).get(zn.pageIndex)._startRenderPage(zn.transparency,zn.cacheKey)}),Nn.on("commonobj",([zn,Cn,Mn])=>{var Bn;if(!this.destroyed&&!this.commonObjs.has(zn))switch(Cn){case"Font":const Xn=this._params;if("error"in Mn){const lr=Mn.error;(0,_util.warn)(`Error during font loading: ${lr}`),this.commonObjs.resolve(zn,lr);break}const nr=Xn.pdfBug&&((Bn=globalThis.FontInspector)!=null&&Bn.enabled)?(lr,tr)=>globalThis.FontInspector.fontAdded(lr,tr):null,sr=new _font_loader.FontFaceObject(Mn,{isEvalSupported:Xn.isEvalSupported,disableFontFace:Xn.disableFontFace,ignoreErrors:Xn.ignoreErrors,inspectFont:nr});this.fontLoader.bind(sr).catch(lr=>Nn.sendWithPromise("FontFallback",{id:zn})).finally(()=>{!Xn.fontExtraProperties&&sr.data&&(sr.data=null),this.commonObjs.resolve(zn,sr)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(zn,Mn);break;default:throw new Error(`Got unknown common object type ${Cn}`)}}),Nn.on("obj",([zn,Cn,Mn,Bn])=>{var nr;if(this.destroyed)return;const Xn=Hn(this,bn).get(Cn);if(!Xn.objs.has(zn))switch(Mn){case"Image":if(Xn.objs.resolve(zn,Bn),Bn){let sr;if(Bn.bitmap){const{width:lr,height:tr}=Bn;sr=lr*tr*4}else sr=((nr=Bn.data)==null?void 0:nr.length)||0;sr>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Xn._maybeCleanupAfterRender=!0)}break;case"Pattern":Xn.objs.resolve(zn,Bn);break;default:throw new Error(`Got unknown object type ${Mn}`)}}),Nn.on("DocProgress",zn=>{var Cn;this.destroyed||(Cn=Ln.onProgress)==null||Cn.call(Ln,{loaded:zn.loaded,total:zn.total})}),Nn.on("FetchBuiltInCMap",zn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(zn):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),Nn.on("FetchStandardFontData",zn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(zn):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var zn;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:Nn,transfers:Ln}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:Nn,filename:((zn=this._fullReader)==null?void 0:zn.filename)??null},Ln).finally(()=>{this.annotationStorage.resetModified()})}getPage(Nn){if(!Number.isInteger(Nn)||Nn<=0||Nn>this._numPages)return Promise.reject(new Error("Invalid page request."));const Ln=Nn-1,zn=Hn(this,vn).get(Ln);if(zn)return zn;const Cn=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Ln}).then(Mn=>{if(this.destroyed)throw new Error("Transport destroyed");const Bn=new PDFPageProxy(Ln,Mn,this,this._params.pdfBug);return Hn(this,bn).set(Ln,Bn),Bn});return Hn(this,vn).set(Ln,Cn),Cn}getPageIndex(Nn){return typeof Nn!="object"||Nn===null||!Number.isInteger(Nn.num)||Nn.num<0||!Number.isInteger(Nn.gen)||Nn.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:Nn.num,gen:Nn.gen})}getAnnotations(Nn,Ln){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:Nn,intent:Ln})}getFieldObjects(){return Or(this,Tn,Qm).call(this,"GetFieldObjects")}hasJSActions(){return Or(this,Tn,Qm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(Nn){return typeof Nn!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:Nn})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Or(this,Tn,Qm).call(this,"GetDocJSActions")}getPageJSActions(Nn){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:Nn})}getStructTree(Nn){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:Nn})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(Nn=>new _optional_content_config.OptionalContentConfig(Nn))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const Nn="GetMetadata",Ln=Hn(this,En).get(Nn);if(Ln)return Ln;const zn=this.messageHandler.sendWithPromise(Nn,null).then(Cn=>{var Mn,Bn;return{info:Cn[0],metadata:Cn[1]?new _metadata.Metadata(Cn[1]):null,contentDispositionFilename:((Mn=this._fullReader)==null?void 0:Mn.filename)??null,contentLength:((Bn=this._fullReader)==null?void 0:Bn.contentLength)??null}});return Hn(this,En).set(Nn,zn),zn}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(Nn=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Ln of Hn(this,bn).values())if(!Ln.cleanup())throw new Error(`startCleanup: Page ${Ln.pageNumber} is currently rendering.`);this.commonObjs.clear(),Nn||this.fontLoader.clear(),Hn(this,En).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:Nn,enableXfa:Ln}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:Nn,enableXfa:Ln})}}En=new WeakMap,bn=new WeakMap,vn=new WeakMap,Pn=new WeakMap,Tn=new WeakSet,Qm=function(Nn,Ln=null){const zn=Hn(this,En).get(Nn);if(zn)return zn;const Cn=this.messageHandler.sendWithPromise(Nn,Ln);return Hn(this,En).set(Nn,Cn),Cn};class PDFObjects{constructor(){Br(this,Sn);Br(this,Rn,Object.create(null))}get(Nn,Ln=null){if(Ln){const Cn=Or(this,Sn,P0).call(this,Nn);return Cn.capability.promise.then(()=>Ln(Cn.data)),null}const zn=Hn(this,Rn)[Nn];if(!(zn!=null&&zn.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${Nn}.`);return zn.data}has(Nn){const Ln=Hn(this,Rn)[Nn];return(Ln==null?void 0:Ln.capability.settled)||!1}resolve(Nn,Ln=null){const zn=Or(this,Sn,P0).call(this,Nn);zn.data=Ln,zn.capability.resolve()}clear(){var Nn;for(const Ln in Hn(this,Rn)){const{data:zn}=Hn(this,Rn)[Ln];(Nn=zn==null?void 0:zn.bitmap)==null||Nn.close()}Fr(this,Rn,Object.create(null))}}Rn=new WeakMap,Sn=new WeakSet,P0=function(Nn){var Ln;return(Ln=Hn(this,Rn))[Nn]||(Ln[Nn]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(Nn){Br(this,$n,null);Fr(this,$n,Nn),this.onContinue=null}get promise(){return Hn(this,$n).capability.promise}cancel(Nn=0){Hn(this,$n).cancel(null,Nn)}get separateAnnots(){const{separateAnnots:Nn}=Hn(this,$n).operatorList;if(!Nn)return!1;const{annotationCanvasMap:Ln}=Hn(this,$n);return Nn.form||Nn.canvas&&(Ln==null?void 0:Ln.size)>0}}$n=new WeakMap,exports.RenderTask=RenderTask;const Gn=class Gn{constructor({callback:Nn,params:Ln,objs:zn,commonObjs:Cn,annotationCanvasMap:Mn,operatorList:Bn,pageIndex:Xn,canvasFactory:nr,filterFactory:sr,useRequestAnimationFrame:lr=!1,pdfBug:tr=!1,pageColors:Jn=null}){this.callback=Nn,this.params=Ln,this.objs=zn,this.commonObjs=Cn,this.annotationCanvasMap=Mn,this.operatorListIdx=null,this.operatorList=Bn,this._pageIndex=Xn,this.canvasFactory=nr,this.filterFactory=sr,this._pdfBug=tr,this.pageColors=Jn,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=lr===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Ln.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Nn=!1,optionalContentConfig:Ln}){var Xn,nr;if(this.cancelled)return;if(this._canvas){if(Hn(Gn,Fn).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Hn(Gn,Fn).add(this._canvas)}this._pdfBug&&((Xn=globalThis.StepperManager)!=null&&Xn.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:zn,viewport:Cn,transform:Mn,background:Bn}=this.params;this.gfx=new _canvas.CanvasGraphics(zn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Ln},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Mn,viewport:Cn,transparency:Nn,background:Bn}),this.operatorListIdx=0,this.graphicsReady=!0,(nr=this.graphicsReadyCallback)==null||nr.call(this)}cancel(Nn=null,Ln=0){var zn;this.running=!1,this.cancelled=!0,(zn=this.gfx)==null||zn.endDrawing(),Hn(Gn,Fn).delete(this._canvas),this.callback(Nn||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Ln))}operatorListChanged(){var Nn;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(Nn=this.stepper)==null||Nn.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Hn(Gn,Fn).delete(this._canvas),this.callback())))}};Fn=new WeakMap,Br(Gn,Fn,new WeakSet);let InternalRenderTask=Gn;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(_e,e,un)=>{var yn,xn,En,Hy,vn;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var dn=un(1),hn=un(4),fn=un(8);const pn=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=pn;class mn{constructor(){Br(this,En);Br(this,yn,!1);Br(this,xn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(Tn,In){const Rn=Hn(this,xn).get(Tn);return Rn===void 0?In:Object.assign(In,Rn)}getRawValue(Tn){return Hn(this,xn).get(Tn)}remove(Tn){if(Hn(this,xn).delete(Tn),Hn(this,xn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const In of Hn(this,xn).values())if(In instanceof hn.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(Tn,In){const Rn=Hn(this,xn).get(Tn);let Sn=!1;if(Rn!==void 0)for(const[Dn,$n]of Object.entries(In))Rn[Dn]!==$n&&(Sn=!0,Rn[Dn]=$n);else Sn=!0,Hn(this,xn).set(Tn,In);Sn&&Or(this,En,Hy).call(this),In instanceof hn.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(In.constructor._type)}has(Tn){return Hn(this,xn).has(Tn)}getAll(){return Hn(this,xn).size>0?(0,dn.objectFromMap)(Hn(this,xn)):null}setAll(Tn){for(const[In,Rn]of Object.entries(Tn))this.setValue(In,Rn)}get size(){return Hn(this,xn).size}resetModified(){Hn(this,yn)&&(Fr(this,yn,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new gn(this)}get serializable(){if(Hn(this,xn).size===0)return pn;const Tn=new Map,In=new fn.MurmurHash3_64,Rn=[],Sn=Object.create(null);let Dn=!1;for(const[$n,Fn]of Hn(this,xn)){const Gn=Fn instanceof hn.AnnotationEditor?Fn.serialize(!1,Sn):Fn;Gn&&(Tn.set($n,Gn),In.update(`${$n}:${JSON.stringify(Gn)}`),Dn||(Dn=!!Gn.bitmap))}if(Dn)for(const $n of Tn.values())$n.bitmap&&Rn.push($n.bitmap);return Tn.size>0?{map:Tn,hash:In.hexdigest(),transfers:Rn}:pn}}yn=new WeakMap,xn=new WeakMap,En=new WeakSet,Hy=function(){Hn(this,yn)||(Fr(this,yn,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=mn;class gn extends mn{constructor(In){super();Br(this,vn);const{map:Rn,hash:Sn,transfers:Dn}=In.serializable,$n=structuredClone(Rn,Dn?{transfer:Dn}:null);Fr(this,vn,{map:$n,hash:Sn,transfers:Dn})}get print(){(0,dn.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return Hn(this,vn)}}vn=new WeakMap,e.PrintAnnotationStorage=gn},(_e,e,un)=>{var gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn,Sn,Dn,$n,Fn,Gn,I0,C0,Ln,N0,j0,Wy,Gy,Ky,k0,Yy;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var dn=un(5),hn=un(1),fn=un(6);const lr=class lr{constructor(Jn){Br(this,Gn);Br(this,gn,"");Br(this,yn,!1);Br(this,xn,null);Br(this,En,null);Br(this,bn,null);Br(this,vn,!1);Br(this,Pn,null);Br(this,Tn,this.focusin.bind(this));Br(this,In,this.focusout.bind(this));Br(this,Rn,!1);Br(this,Sn,!1);Br(this,Dn,!1);io(this,"_initialOptions",Object.create(null));io(this,"_uiManager",null);io(this,"_focusEventsAllowed",!0);io(this,"_l10nPromise",null);Br(this,$n,!1);Br(this,Fn,lr._zIndex++);this.constructor===lr&&(0,hn.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Jn.parent,this.id=Jn.id,this.width=this.height=null,this.pageIndex=Jn.parent.pageIndex,this.name=Jn.name,this.div=null,this._uiManager=Jn.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Jn.isCentered,this._structTreeParentId=null;const{rotation:ar,rawDims:{pageWidth:gr,pageHeight:qn,pageX:On,pageY:Un}}=this.parent.viewport;this.rotation=ar,this.pageRotation=(360+ar-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[gr,qn],this.pageTranslation=[On,Un];const[Yn,er]=this.parentDimensions;this.x=Jn.x/Yn,this.y=Jn.y/er,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,hn.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Jn){const ar=new mn({id:Jn.parent.getNextId(),parent:Jn.parent,uiManager:Jn._uiManager});ar.annotationElementId=Jn.annotationElementId,ar.deleted=!0,ar._uiManager.addToAnnotationStorage(ar)}static initialize(Jn,ar=null){if(lr._l10nPromise||(lr._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(qn=>[qn,Jn.get(qn)]))),ar!=null&&ar.strings)for(const qn of ar.strings)lr._l10nPromise.set(qn,Jn.get(qn));if(lr._borderLineWidth!==-1)return;const gr=getComputedStyle(document.documentElement);lr._borderLineWidth=parseFloat(gr.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Jn,ar){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Jn){return!1}static paste(Jn,ar){(0,hn.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Hn(this,$n)}set _isDraggable(Jn){var ar;Fr(this,$n,Jn),(ar=this.div)==null||ar.classList.toggle("draggable",Jn)}center(){const[Jn,ar]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*ar/(Jn*2),this.y+=this.width*Jn/(ar*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*ar/(Jn*2),this.y-=this.width*Jn/(ar*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Jn){this._uiManager.addCommands(Jn)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Hn(this,Fn)}setParent(Jn){Jn!==null&&(this.pageIndex=Jn.pageIndex,this.pageDimensions=Jn.pageDimensions),this.parent=Jn}focusin(Jn){this._focusEventsAllowed&&(Hn(this,Rn)?Fr(this,Rn,!1):this.parent.setSelected(this))}focusout(Jn){var gr;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const ar=Jn.relatedTarget;ar!=null&&ar.closest(`#${this.id}`)||(Jn.preventDefault(),(gr=this.parent)!=null&&gr.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Jn,ar,gr,qn){const[On,Un]=this.parentDimensions;[gr,qn]=this.screenToPageTranslation(gr,qn),this.x=(Jn+gr)/On,this.y=(ar+qn)/Un,this.fixAndSetPosition()}translate(Jn,ar){Or(this,Gn,I0).call(this,this.parentDimensions,Jn,ar)}translateInPage(Jn,ar){Or(this,Gn,I0).call(this,this.pageDimensions,Jn,ar),this.div.scrollIntoView({block:"nearest"})}drag(Jn,ar){const[gr,qn]=this.parentDimensions;if(this.x+=Jn/gr,this.y+=ar/qn,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Zn,y:ir}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Zn,ir)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:On,y:Un}=this;const[Yn,er]=Or(this,Gn,C0).call(this);On+=Yn,Un+=er,this.div.style.left=`${(100*On).toFixed(2)}%`,this.div.style.top=`${(100*Un).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Jn,ar]=this.pageDimensions;let{x:gr,y:qn,width:On,height:Un}=this;switch(On*=Jn,Un*=ar,gr*=Jn,qn*=ar,this.rotation){case 0:gr=Math.max(0,Math.min(Jn-On,gr)),qn=Math.max(0,Math.min(ar-Un,qn));break;case 90:gr=Math.max(0,Math.min(Jn-Un,gr)),qn=Math.min(ar,Math.max(On,qn));break;case 180:gr=Math.min(Jn,Math.max(On,gr)),qn=Math.min(ar,Math.max(Un,qn));break;case 270:gr=Math.min(Jn,Math.max(Un,gr)),qn=Math.max(0,Math.min(ar-On,qn));break}this.x=gr/=Jn,this.y=qn/=ar;const[Yn,er]=Or(this,Gn,C0).call(this);gr+=Yn,qn+=er;const{style:Zn}=this.div;Zn.left=`${(100*gr).toFixed(2)}%`,Zn.top=`${(100*qn).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Jn,ar){var gr;return Or(gr=lr,Ln,N0).call(gr,Jn,ar,this.parentRotation)}pageTranslationToScreen(Jn,ar){var gr;return Or(gr=lr,Ln,N0).call(gr,Jn,ar,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Jn,pageDimensions:[ar,gr]}=this,qn=ar*Jn,On=gr*Jn;return hn.FeatureTest.isCSSRoundSupported?[Math.round(qn),Math.round(On)]:[qn,On]}setDims(Jn,ar){var On;const[gr,qn]=this.parentDimensions;this.div.style.width=`${(100*Jn/gr).toFixed(2)}%`,Hn(this,vn)||(this.div.style.height=`${(100*ar/qn).toFixed(2)}%`),(On=Hn(this,xn))==null||On.classList.toggle("small",Jn<lr.SMALL_EDITOR_SIZE||ar<lr.SMALL_EDITOR_SIZE)}fixDims(){const{style:Jn}=this.div,{height:ar,width:gr}=Jn,qn=gr.endsWith("%"),On=!Hn(this,vn)&&ar.endsWith("%");if(qn&&On)return;const[Un,Yn]=this.parentDimensions;qn||(Jn.width=`${(100*parseFloat(gr)/Un).toFixed(2)}%`),!Hn(this,vn)&&!On&&(Jn.height=`${(100*parseFloat(ar)/Yn).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(Hn(this,xn))return;const Jn=Fr(this,xn,document.createElement("button"));Jn.className="altText";const ar=await lr._l10nPromise.get("editor_alt_text_button_label");Jn.textContent=ar,Jn.setAttribute("aria-label",ar),Jn.tabIndex="0",Jn.addEventListener("contextmenu",fn.noContextMenu),Jn.addEventListener("pointerdown",gr=>gr.stopPropagation()),Jn.addEventListener("click",gr=>{gr.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Jn.addEventListener("keydown",gr=>{gr.target===Jn&&gr.key==="Enter"&&(gr.preventDefault(),this._uiManager.editAltText(this))}),Or(this,Gn,k0).call(this),this.div.append(Jn),lr.SMALL_EDITOR_SIZE||(lr.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Jn.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:Hn(this,gn),decorative:Hn(this,yn)}}set altTextData({altText:Jn,decorative:ar}){Hn(this,gn)===Jn&&Hn(this,yn)===ar||(Fr(this,gn,Jn),Fr(this,yn,ar),Or(this,Gn,k0).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",Hn(this,Tn)),this.div.addEventListener("focusout",Hn(this,In));const[Jn,ar]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*ar/Jn).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Jn/ar).toFixed(2)}%`);const[gr,qn]=this.getInitialTranslation();return this.translate(gr,qn),(0,dn.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Jn){const{isMac:ar}=hn.FeatureTest.platform;if(Jn.button!==0||Jn.ctrlKey&&ar){Jn.preventDefault();return}Fr(this,Rn,!0),Or(this,Gn,Yy).call(this,Jn)}moveInDOM(){var Jn;(Jn=this.parent)==null||Jn.moveEditorInDOM(this)}_setParentAndPosition(Jn,ar,gr){Jn.changeParent(this),this.x=ar,this.y=gr,this.fixAndSetPosition()}getRect(Jn,ar){const gr=this.parentScale,[qn,On]=this.pageDimensions,[Un,Yn]=this.pageTranslation,er=Jn/gr,Zn=ar/gr,ir=this.x*qn,fr=this.y*On,br=this.width*qn,Tr=this.height*On;switch(this.rotation){case 0:return[ir+er+Un,On-fr-Zn-Tr+Yn,ir+er+br+Un,On-fr-Zn+Yn];case 90:return[ir+Zn+Un,On-fr+er+Yn,ir+Zn+Tr+Un,On-fr+er+br+Yn];case 180:return[ir-er-br+Un,On-fr+Zn+Yn,ir-er+Un,On-fr+Zn+Tr+Yn];case 270:return[ir-Zn-Tr+Un,On-fr-er-br+Yn,ir-Zn+Un,On-fr-er+Yn];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Jn,ar){const[gr,qn,On,Un]=Jn,Yn=On-gr,er=Un-qn;switch(this.rotation){case 0:return[gr,ar-Un,Yn,er];case 90:return[gr,ar-qn,er,Yn];case 180:return[On,ar-qn,Yn,er];case 270:return[On,ar-Un,er,Yn];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Fr(this,Dn,!0)}disableEditMode(){Fr(this,Dn,!1)}isInEditMode(){return Hn(this,Dn)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Jn,ar;(Jn=this.div)==null||Jn.addEventListener("focusin",Hn(this,Tn)),(ar=this.div)==null||ar.addEventListener("focusout",Hn(this,In))}serialize(Jn=!1,ar=null){(0,hn.unreachable)("An editor must be serializable")}static deserialize(Jn,ar,gr){const qn=new this.prototype.constructor({parent:ar,id:ar.getNextId(),uiManager:gr});qn.rotation=Jn.rotation;const[On,Un]=qn.pageDimensions,[Yn,er,Zn,ir]=qn.getRectInCurrentCoords(Jn.rect,Un);return qn.x=Yn/On,qn.y=er/Un,qn.width=Zn/On,qn.height=ir/Un,qn}remove(){var Jn;this.div.removeEventListener("focusin",Hn(this,Tn)),this.div.removeEventListener("focusout",Hn(this,In)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Jn=Hn(this,xn))==null||Jn.remove(),Fr(this,xn,null),Fr(this,En,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Or(this,Gn,Wy).call(this),Hn(this,Pn).classList.remove("hidden"))}select(){var Jn;this.makeResizable(),(Jn=this.div)==null||Jn.classList.add("selectedEditor")}unselect(){var Jn,ar,gr;(Jn=Hn(this,Pn))==null||Jn.classList.add("hidden"),(ar=this.div)==null||ar.classList.remove("selectedEditor"),(gr=this.div)!=null&&gr.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Jn,ar){}disableEditing(){Hn(this,xn)&&(Hn(this,xn).hidden=!0)}enableEditing(){Hn(this,xn)&&(Hn(this,xn).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return Hn(this,Sn)}set isEditing(Jn){Fr(this,Sn,Jn),this.parent&&(Jn?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Jn,ar){Fr(this,vn,!0);const gr=Jn/ar,{style:qn}=this.div;qn.aspectRatio=gr,qn.height="auto"}static get MIN_SIZE(){return 16}};gn=new WeakMap,yn=new WeakMap,xn=new WeakMap,En=new WeakMap,bn=new WeakMap,vn=new WeakMap,Pn=new WeakMap,Tn=new WeakMap,In=new WeakMap,Rn=new WeakMap,Sn=new WeakMap,Dn=new WeakMap,$n=new WeakMap,Fn=new WeakMap,Gn=new WeakSet,I0=function([Jn,ar],gr,qn){[gr,qn]=this.screenToPageTranslation(gr,qn),this.x+=gr/Jn,this.y+=qn/ar,this.fixAndSetPosition()},C0=function(){const[Jn,ar]=this.parentDimensions,{_borderLineWidth:gr}=lr,qn=gr/Jn,On=gr/ar;switch(this.rotation){case 90:return[-qn,On];case 180:return[qn,On];case 270:return[qn,-On];default:return[-qn,-On]}},Ln=new WeakSet,N0=function(Jn,ar,gr){switch(gr){case 90:return[ar,-Jn];case 180:return[-Jn,-ar];case 270:return[-ar,Jn];default:return[Jn,ar]}},j0=function(Jn){switch(Jn){case 90:{const[ar,gr]=this.pageDimensions;return[0,-ar/gr,gr/ar,0]}case 180:return[-1,0,0,-1];case 270:{const[ar,gr]=this.pageDimensions;return[0,ar/gr,-gr/ar,0]}default:return[1,0,0,1]}},Wy=function(){if(Hn(this,Pn))return;Fr(this,Pn,document.createElement("div")),Hn(this,Pn).classList.add("resizers");const Jn=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Jn.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const ar of Jn){const gr=document.createElement("div");Hn(this,Pn).append(gr),gr.classList.add("resizer",ar),gr.addEventListener("pointerdown",Or(this,Gn,Gy).bind(this,ar)),gr.addEventListener("contextmenu",fn.noContextMenu)}this.div.prepend(Hn(this,Pn))},Gy=function(Jn,ar){ar.preventDefault();const{isMac:gr}=hn.FeatureTest.platform;if(ar.button!==0||ar.ctrlKey&&gr)return;const qn=Or(this,Gn,Ky).bind(this,Jn),On=this._isDraggable;this._isDraggable=!1;const Un={passive:!0,capture:!0};window.addEventListener("pointermove",qn,Un);const Yn=this.x,er=this.y,Zn=this.width,ir=this.height,fr=this.parent.div.style.cursor,br=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(ar.target).cursor;const Tr=()=>{this._isDraggable=On,window.removeEventListener("pointerup",Tr),window.removeEventListener("blur",Tr),window.removeEventListener("pointermove",qn,Un),this.parent.div.style.cursor=fr,this.div.style.cursor=br;const Ir=this.x,Mr=this.y,qr=this.width,Ar=this.height;Ir===Yn&&Mr===er&&qr===Zn&&Ar===ir||this.addCommands({cmd:()=>{this.width=qr,this.height=Ar,this.x=Ir,this.y=Mr;const[or,jr]=this.parentDimensions;this.setDims(or*qr,jr*Ar),this.fixAndSetPosition()},undo:()=>{this.width=Zn,this.height=ir,this.x=Yn,this.y=er;const[or,jr]=this.parentDimensions;this.setDims(or*Zn,jr*ir),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Tr),window.addEventListener("blur",Tr)},Ky=function(Jn,ar){const[gr,qn]=this.parentDimensions,On=this.x,Un=this.y,Yn=this.width,er=this.height,Zn=lr.MIN_SIZE/gr,ir=lr.MIN_SIZE/qn,fr=as=>Math.round(as*1e4)/1e4,br=Or(this,Gn,j0).call(this,this.rotation),Tr=(as,Ss)=>[br[0]*as+br[2]*Ss,br[1]*as+br[3]*Ss],Ir=Or(this,Gn,j0).call(this,360-this.rotation),Mr=(as,Ss)=>[Ir[0]*as+Ir[2]*Ss,Ir[1]*as+Ir[3]*Ss];let qr,Ar,or=!1,jr=!1;switch(Jn){case"topLeft":or=!0,qr=(as,Ss)=>[0,0],Ar=(as,Ss)=>[as,Ss];break;case"topMiddle":qr=(as,Ss)=>[as/2,0],Ar=(as,Ss)=>[as/2,Ss];break;case"topRight":or=!0,qr=(as,Ss)=>[as,0],Ar=(as,Ss)=>[0,Ss];break;case"middleRight":jr=!0,qr=(as,Ss)=>[as,Ss/2],Ar=(as,Ss)=>[0,Ss/2];break;case"bottomRight":or=!0,qr=(as,Ss)=>[as,Ss],Ar=(as,Ss)=>[0,0];break;case"bottomMiddle":qr=(as,Ss)=>[as/2,Ss],Ar=(as,Ss)=>[as/2,0];break;case"bottomLeft":or=!0,qr=(as,Ss)=>[0,Ss],Ar=(as,Ss)=>[as,0];break;case"middleLeft":jr=!0,qr=(as,Ss)=>[0,Ss/2],Ar=(as,Ss)=>[as,Ss/2];break}const cr=qr(Yn,er),hr=Ar(Yn,er);let wr=Tr(...hr);const Pr=fr(On+wr[0]),kr=fr(Un+wr[1]);let Hr=1,Kr=1,[Nr,ns]=this.screenToPageTranslation(ar.movementX,ar.movementY);if([Nr,ns]=Mr(Nr/gr,ns/qn),or){const as=Math.hypot(Yn,er);Hr=Kr=Math.max(Math.min(Math.hypot(hr[0]-cr[0]-Nr,hr[1]-cr[1]-ns)/as,1/Yn,1/er),Zn/Yn,ir/er)}else jr?Hr=Math.max(Zn,Math.min(1,Math.abs(hr[0]-cr[0]-Nr)))/Yn:Kr=Math.max(ir,Math.min(1,Math.abs(hr[1]-cr[1]-ns)))/er;const ts=fr(Yn*Hr),Ps=fr(er*Kr);wr=Tr(...Ar(ts,Ps));const ps=Pr-wr[0],Cs=kr-wr[1];this.width=ts,this.height=Ps,this.x=ps,this.y=Cs,this.setDims(gr*ts,qn*Ps),this.fixAndSetPosition()},k0=async function(){var gr;const Jn=Hn(this,xn);if(!Jn)return;if(!Hn(this,gn)&&!Hn(this,yn)){Jn.classList.remove("done"),(gr=Hn(this,En))==null||gr.remove();return}lr._l10nPromise.get("editor_alt_text_edit_button_label").then(qn=>{Jn.setAttribute("aria-label",qn)});let ar=Hn(this,En);if(!ar){Fr(this,En,ar=document.createElement("span")),ar.className="tooltip",ar.setAttribute("role","tooltip");const qn=ar.id=`alt-text-tooltip-${this.id}`;Jn.setAttribute("aria-describedby",qn);const On=100;Jn.addEventListener("mouseenter",()=>{Fr(this,bn,setTimeout(()=>{Fr(this,bn,null),Hn(this,En).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},On))}),Jn.addEventListener("mouseleave",()=>{var Un;clearTimeout(Hn(this,bn)),Fr(this,bn,null),(Un=Hn(this,En))==null||Un.classList.remove("show")})}Jn.classList.add("done"),ar.innerText=Hn(this,yn)?await lr._l10nPromise.get("editor_alt_text_decorative_tooltip"):Hn(this,gn),ar.parentNode||Jn.append(ar)},Yy=function(Jn){if(!this._isDraggable)return;const ar=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let gr,qn;ar&&(gr={passive:!0,capture:!0},qn=Un=>{const[Yn,er]=this.screenToPageTranslation(Un.movementX,Un.movementY);this._uiManager.dragSelectedEditors(Yn,er)},window.addEventListener("pointermove",qn,gr));const On=()=>{if(window.removeEventListener("pointerup",On),window.removeEventListener("blur",On),ar&&window.removeEventListener("pointermove",qn,gr),Fr(this,Rn,!1),!this._uiManager.endDragSession()){const{isMac:Un}=hn.FeatureTest.platform;Jn.ctrlKey&&!Un||Jn.shiftKey||Jn.metaKey&&Un?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",On),window.addEventListener("blur",On)},Br(lr,Ln),io(lr,"_borderLineWidth",-1),io(lr,"_colorManager",new dn.ColorManager),io(lr,"_zIndex",1),io(lr,"SMALL_EDITOR_SIZE",0);let pn=lr;e.AnnotationEditor=pn;class mn extends pn{constructor(Jn){super(Jn),this.annotationElementId=Jn.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(_e,e,un)=>{var vn,Pn,Tn,In,Rn,L0,$n,Fn,Gn,kn,Nn,Xy,Cn,Mn,Bn,Xn,nr,sr,lr,tr,Jn,ar,gr,qn,On,Un,Yn,er,Zn,ir,fr,br,Tr,Ir,Mr,qr,Ar,or,jr,cr,hr,wr,Pr,kr,Hr,Kr,Nr,Qy,M0,D0,Jm,O0,F0,xl,ym,Jy,Zy,V0,xm,$0;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=fn,e.opacityToHex=pn;var dn=un(1),hn=un(6);function fn(ws,Rr,Zr){for(const ds of Zr)Rr.addEventListener(ds,ws[ds].bind(ws))}function pn(ws){return Math.round(Math.min(255,Math.max(1,255*ws))).toString(16).padStart(2,"0")}class mn{constructor(){Br(this,vn,0)}getId(){return`${dn.AnnotationEditorPrefix}${$u(this,vn)._++}`}}vn=new WeakMap;const Dn=class Dn{constructor(){Br(this,Rn);Br(this,Pn,(0,dn.getUuid)());Br(this,Tn,0);Br(this,In,null)}static get _isSVGFittingCanvas(){const Rr='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ds=new OffscreenCanvas(1,3).getContext("2d"),fs=new Image;fs.src=Rr;const vs=fs.decode().then(()=>(ds.drawImage(fs,0,0,1,1,0,0,1,3),new Uint32Array(ds.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,dn.shadow)(this,"_isSVGFittingCanvas",vs)}async getFromFile(Rr){const{lastModified:Zr,name:ds,size:fs,type:vs}=Rr;return Or(this,Rn,L0).call(this,`${Zr}_${ds}_${fs}_${vs}`,Rr)}async getFromUrl(Rr){return Or(this,Rn,L0).call(this,Rr,Rr)}async getFromId(Rr){Hn(this,In)||Fr(this,In,new Map);const Zr=Hn(this,In).get(Rr);return Zr?Zr.bitmap?(Zr.refCounter+=1,Zr):Zr.file?this.getFromFile(Zr.file):this.getFromUrl(Zr.url):null}getSvgUrl(Rr){const Zr=Hn(this,In).get(Rr);return Zr!=null&&Zr.isSvg?Zr.svgUrl:null}deleteId(Rr){Hn(this,In)||Fr(this,In,new Map);const Zr=Hn(this,In).get(Rr);Zr&&(Zr.refCounter-=1,Zr.refCounter===0&&(Zr.bitmap=null))}isValidId(Rr){return Rr.startsWith(`image_${Hn(this,Pn)}_`)}};Pn=new WeakMap,Tn=new WeakMap,In=new WeakMap,Rn=new WeakSet,L0=async function(Rr,Zr){Hn(this,In)||Fr(this,In,new Map);let ds=Hn(this,In).get(Rr);if(ds===null)return null;if(ds!=null&&ds.bitmap)return ds.refCounter+=1,ds;try{ds||(ds={bitmap:null,id:`image_${Hn(this,Pn)}_${$u(this,Tn)._++}`,refCounter:0,isSvg:!1});let fs;if(typeof Zr=="string"){ds.url=Zr;const vs=await fetch(Zr);if(!vs.ok)throw new Error(vs.statusText);fs=await vs.blob()}else fs=ds.file=Zr;if(fs.type==="image/svg+xml"){const vs=Dn._isSVGFittingCanvas,Ts=new FileReader,Er=new Image,vr=new Promise((Lr,Dr)=>{Er.onload=()=>{ds.bitmap=Er,ds.isSvg=!0,Lr()},Ts.onload=async()=>{const Jr=ds.svgUrl=Ts.result;Er.src=await vs?`${Jr}#svgView(preserveAspectRatio(none))`:Jr},Er.onerror=Ts.onerror=Dr});Ts.readAsDataURL(fs),await vr}else ds.bitmap=await createImageBitmap(fs);ds.refCounter=1}catch(fs){console.error(fs),ds=null}return Hn(this,In).set(Rr,ds),ds&&Hn(this,In).set(ds.id,ds),ds};let gn=Dn;class yn{constructor(Rr=128){Br(this,$n,[]);Br(this,Fn,!1);Br(this,Gn);Br(this,kn,-1);Fr(this,Gn,Rr)}add({cmd:Rr,undo:Zr,mustExec:ds,type:fs=NaN,overwriteIfSameType:vs=!1,keepUndo:Ts=!1}){if(ds&&Rr(),Hn(this,Fn))return;const Er={cmd:Rr,undo:Zr,type:fs};if(Hn(this,kn)===-1){Hn(this,$n).length>0&&(Hn(this,$n).length=0),Fr(this,kn,0),Hn(this,$n).push(Er);return}if(vs&&Hn(this,$n)[Hn(this,kn)].type===fs){Ts&&(Er.undo=Hn(this,$n)[Hn(this,kn)].undo),Hn(this,$n)[Hn(this,kn)]=Er;return}const vr=Hn(this,kn)+1;vr===Hn(this,Gn)?Hn(this,$n).splice(0,1):(Fr(this,kn,vr),vr<Hn(this,$n).length&&Hn(this,$n).splice(vr)),Hn(this,$n).push(Er)}undo(){Hn(this,kn)!==-1&&(Fr(this,Fn,!0),Hn(this,$n)[Hn(this,kn)].undo(),Fr(this,Fn,!1),Fr(this,kn,Hn(this,kn)-1))}redo(){Hn(this,kn)<Hn(this,$n).length-1&&(Fr(this,kn,Hn(this,kn)+1),Fr(this,Fn,!0),Hn(this,$n)[Hn(this,kn)].cmd(),Fr(this,Fn,!1))}hasSomethingToUndo(){return Hn(this,kn)!==-1}hasSomethingToRedo(){return Hn(this,kn)<Hn(this,$n).length-1}destroy(){Fr(this,$n,null)}}$n=new WeakMap,Fn=new WeakMap,Gn=new WeakMap,kn=new WeakMap,e.CommandManager=yn;class xn{constructor(Rr){Br(this,Nn);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Zr}=dn.FeatureTest.platform;for(const[ds,fs,vs={}]of Rr)for(const Ts of ds){const Er=Ts.startsWith("mac+");Zr&&Er?(this.callbacks.set(Ts.slice(4),{callback:fs,options:vs}),this.allKeys.add(Ts.split("+").at(-1))):!Zr&&!Er&&(this.callbacks.set(Ts,{callback:fs,options:vs}),this.allKeys.add(Ts.split("+").at(-1)))}}exec(Rr,Zr){if(!this.allKeys.has(Zr.key))return;const ds=this.callbacks.get(Or(this,Nn,Xy).call(this,Zr));if(!ds)return;const{callback:fs,options:{bubbles:vs=!1,args:Ts=[],checker:Er=null}}=ds;Er&&!Er(Rr,Zr)||(fs.bind(Rr,...Ts)(),vs||(Zr.stopPropagation(),Zr.preventDefault()))}}Nn=new WeakSet,Xy=function(Rr){Rr.altKey&&this.buffer.push("alt"),Rr.ctrlKey&&this.buffer.push("ctrl"),Rr.metaKey&&this.buffer.push("meta"),Rr.shiftKey&&this.buffer.push("shift"),this.buffer.push(Rr.key);const Zr=this.buffer.join("+");return this.buffer.length=0,Zr},e.KeyboardManager=xn;const zn=class zn{get _colors(){const Rr=new Map([["CanvasText",null],["Canvas",null]]);return(0,hn.getColorValues)(Rr),(0,dn.shadow)(this,"_colors",Rr)}convert(Rr){const Zr=(0,hn.getRGB)(Rr);if(!window.matchMedia("(forced-colors: active)").matches)return Zr;for(const[ds,fs]of this._colors)if(fs.every((vs,Ts)=>vs===Zr[Ts]))return zn._colorsMapping.get(ds);return Zr}getHexCode(Rr){const Zr=this._colors.get(Rr);return Zr?dn.Util.makeHexColor(...Zr):Rr}};io(zn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let En=zn;e.ColorManager=En;const ks=class ks{constructor(Rr,Zr,ds,fs,vs,Ts){Br(this,Nr);Br(this,Cn,null);Br(this,Mn,new Map);Br(this,Bn,new Map);Br(this,Xn,null);Br(this,nr,null);Br(this,sr,new yn);Br(this,lr,0);Br(this,tr,new Set);Br(this,Jn,null);Br(this,ar,null);Br(this,gr,new Set);Br(this,qn,null);Br(this,On,new mn);Br(this,Un,!1);Br(this,Yn,!1);Br(this,er,null);Br(this,Zn,dn.AnnotationEditorType.NONE);Br(this,ir,new Set);Br(this,fr,null);Br(this,br,this.blur.bind(this));Br(this,Tr,this.focus.bind(this));Br(this,Ir,this.copy.bind(this));Br(this,Mr,this.cut.bind(this));Br(this,qr,this.paste.bind(this));Br(this,Ar,this.keydown.bind(this));Br(this,or,this.onEditingAction.bind(this));Br(this,jr,this.onPageChanging.bind(this));Br(this,cr,this.onScaleChanging.bind(this));Br(this,hr,this.onRotationChanging.bind(this));Br(this,wr,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Br(this,Pr,[0,0]);Br(this,kr,null);Br(this,Hr,null);Br(this,Kr,null);Fr(this,Hr,Rr),Fr(this,Kr,Zr),Fr(this,Xn,ds),this._eventBus=fs,this._eventBus._on("editingaction",Hn(this,or)),this._eventBus._on("pagechanging",Hn(this,jr)),this._eventBus._on("scalechanging",Hn(this,cr)),this._eventBus._on("rotationchanging",Hn(this,hr)),Fr(this,nr,vs.annotationStorage),Fr(this,qn,vs.filterFactory),Fr(this,fr,Ts),this.viewParameters={realScale:hn.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Rr=ks.prototype,Zr=vs=>{const{activeElement:Ts}=document;return Ts&&Hn(vs,Hr).contains(Ts)&&vs.hasSomethingToControl()},ds=this.TRANSLATE_SMALL,fs=this.TRANSLATE_BIG;return(0,dn.shadow)(this,"_keyboardManager",new xn([[["ctrl+a","mac+meta+a"],Rr.selectAll],[["ctrl+z","mac+meta+z"],Rr.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Rr.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Rr.delete],[["Escape","mac+Escape"],Rr.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Rr.translateSelectedEditors,{args:[-ds,0],checker:Zr}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Rr.translateSelectedEditors,{args:[-fs,0],checker:Zr}],[["ArrowRight","mac+ArrowRight"],Rr.translateSelectedEditors,{args:[ds,0],checker:Zr}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Rr.translateSelectedEditors,{args:[fs,0],checker:Zr}],[["ArrowUp","mac+ArrowUp"],Rr.translateSelectedEditors,{args:[0,-ds],checker:Zr}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Rr.translateSelectedEditors,{args:[0,-fs],checker:Zr}],[["ArrowDown","mac+ArrowDown"],Rr.translateSelectedEditors,{args:[0,ds],checker:Zr}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Rr.translateSelectedEditors,{args:[0,fs],checker:Zr}]]))}destroy(){Or(this,Nr,Jm).call(this),Or(this,Nr,M0).call(this),this._eventBus._off("editingaction",Hn(this,or)),this._eventBus._off("pagechanging",Hn(this,jr)),this._eventBus._off("scalechanging",Hn(this,cr)),this._eventBus._off("rotationchanging",Hn(this,hr));for(const Rr of Hn(this,Bn).values())Rr.destroy();Hn(this,Bn).clear(),Hn(this,Mn).clear(),Hn(this,gr).clear(),Fr(this,Cn,null),Hn(this,ir).clear(),Hn(this,sr).destroy(),Hn(this,Xn).destroy()}get hcmFilter(){return(0,dn.shadow)(this,"hcmFilter",Hn(this,fr)?Hn(this,qn).addHCMFilter(Hn(this,fr).foreground,Hn(this,fr).background):"none")}get direction(){return(0,dn.shadow)(this,"direction",getComputedStyle(Hn(this,Hr)).direction)}editAltText(Rr){var Zr;(Zr=Hn(this,Xn))==null||Zr.editAltText(this,Rr)}onPageChanging({pageNumber:Rr}){Fr(this,lr,Rr-1)}focusMainContainer(){Hn(this,Hr).focus()}findParent(Rr,Zr){for(const ds of Hn(this,Bn).values()){const{x:fs,y:vs,width:Ts,height:Er}=ds.div.getBoundingClientRect();if(Rr>=fs&&Rr<=fs+Ts&&Zr>=vs&&Zr<=vs+Er)return ds}return null}disableUserSelect(Rr=!1){Hn(this,Kr).classList.toggle("noUserSelect",Rr)}addShouldRescale(Rr){Hn(this,gr).add(Rr)}removeShouldRescale(Rr){Hn(this,gr).delete(Rr)}onScaleChanging({scale:Rr}){this.commitOrRemove(),this.viewParameters.realScale=Rr*hn.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Zr of Hn(this,gr))Zr.onScaleChanging()}onRotationChanging({pagesRotation:Rr}){this.commitOrRemove(),this.viewParameters.rotation=Rr}addToAnnotationStorage(Rr){!Rr.isEmpty()&&Hn(this,nr)&&!Hn(this,nr).has(Rr.id)&&Hn(this,nr).setValue(Rr.id,Rr)}blur(){if(!this.hasSelection)return;const{activeElement:Rr}=document;for(const Zr of Hn(this,ir))if(Zr.div.contains(Rr)){Fr(this,er,[Zr,Rr]),Zr._focusEventsAllowed=!1;break}}focus(){if(!Hn(this,er))return;const[Rr,Zr]=Hn(this,er);Fr(this,er,null),Zr.addEventListener("focusin",()=>{Rr._focusEventsAllowed=!0},{once:!0}),Zr.focus()}addEditListeners(){Or(this,Nr,D0).call(this),Or(this,Nr,O0).call(this)}removeEditListeners(){Or(this,Nr,Jm).call(this),Or(this,Nr,F0).call(this)}copy(Rr){var ds;if(Rr.preventDefault(),(ds=Hn(this,Cn))==null||ds.commitOrRemove(),!this.hasSelection)return;const Zr=[];for(const fs of Hn(this,ir)){const vs=fs.serialize(!0);vs&&Zr.push(vs)}Zr.length!==0&&Rr.clipboardData.setData("application/pdfjs",JSON.stringify(Zr))}cut(Rr){this.copy(Rr),this.delete()}paste(Rr){Rr.preventDefault();const{clipboardData:Zr}=Rr;for(const vs of Zr.items)for(const Ts of Hn(this,ar))if(Ts.isHandlingMimeForPasting(vs.type)){Ts.paste(vs,this.currentLayer);return}let ds=Zr.getData("application/pdfjs");if(!ds)return;try{ds=JSON.parse(ds)}catch(vs){(0,dn.warn)(`paste: "${vs.message}".`);return}if(!Array.isArray(ds))return;this.unselectAll();const fs=this.currentLayer;try{const vs=[];for(const vr of ds){const Lr=fs.deserialize(vr);if(!Lr)return;vs.push(Lr)}const Ts=()=>{for(const vr of vs)Or(this,Nr,V0).call(this,vr);Or(this,Nr,$0).call(this,vs)},Er=()=>{for(const vr of vs)vr.remove()};this.addCommands({cmd:Ts,undo:Er,mustExec:!0})}catch(vs){(0,dn.warn)(`paste: "${vs.message}".`)}}keydown(Rr){var Zr;(Zr=this.getActive())!=null&&Zr.shouldGetKeyboardEvents()||ks._keyboardManager.exec(this,Rr)}onEditingAction(Rr){["undo","redo","delete","selectAll"].includes(Rr.name)&&this[Rr.name]()}setEditingState(Rr){Rr?(Or(this,Nr,Qy).call(this),Or(this,Nr,D0).call(this),Or(this,Nr,O0).call(this),Or(this,Nr,xl).call(this,{isEditing:Hn(this,Zn)!==dn.AnnotationEditorType.NONE,isEmpty:Or(this,Nr,xm).call(this),hasSomethingToUndo:Hn(this,sr).hasSomethingToUndo(),hasSomethingToRedo:Hn(this,sr).hasSomethingToRedo(),hasSelectedEditor:!1})):(Or(this,Nr,M0).call(this),Or(this,Nr,Jm).call(this),Or(this,Nr,F0).call(this),Or(this,Nr,xl).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Rr){if(!Hn(this,ar)){Fr(this,ar,Rr);for(const Zr of Hn(this,ar))Or(this,Nr,ym).call(this,Zr.defaultPropertiesToUpdate)}}getId(){return Hn(this,On).getId()}get currentLayer(){return Hn(this,Bn).get(Hn(this,lr))}getLayer(Rr){return Hn(this,Bn).get(Rr)}get currentPageIndex(){return Hn(this,lr)}addLayer(Rr){Hn(this,Bn).set(Rr.pageIndex,Rr),Hn(this,Un)?Rr.enable():Rr.disable()}removeLayer(Rr){Hn(this,Bn).delete(Rr.pageIndex)}updateMode(Rr,Zr=null){if(Hn(this,Zn)!==Rr){if(Fr(this,Zn,Rr),Rr===dn.AnnotationEditorType.NONE){this.setEditingState(!1),Or(this,Nr,Zy).call(this);return}this.setEditingState(!0),Or(this,Nr,Jy).call(this),this.unselectAll();for(const ds of Hn(this,Bn).values())ds.updateMode(Rr);if(Zr){for(const ds of Hn(this,Mn).values())if(ds.annotationElementId===Zr){this.setSelected(ds),ds.enterInEditMode();break}}}}updateToolbar(Rr){Rr!==Hn(this,Zn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Rr})}updateParams(Rr,Zr){if(Hn(this,ar)){if(Rr===dn.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Rr);return}for(const ds of Hn(this,ir))ds.updateParams(Rr,Zr);for(const ds of Hn(this,ar))ds.updateDefaultParams(Rr,Zr)}}enableWaiting(Rr=!1){if(Hn(this,Yn)!==Rr){Fr(this,Yn,Rr);for(const Zr of Hn(this,Bn).values())Rr?Zr.disableClick():Zr.enableClick(),Zr.div.classList.toggle("waiting",Rr)}}getEditors(Rr){const Zr=[];for(const ds of Hn(this,Mn).values())ds.pageIndex===Rr&&Zr.push(ds);return Zr}getEditor(Rr){return Hn(this,Mn).get(Rr)}addEditor(Rr){Hn(this,Mn).set(Rr.id,Rr)}removeEditor(Rr){var Zr;Hn(this,Mn).delete(Rr.id),this.unselect(Rr),(!Rr.annotationElementId||!Hn(this,tr).has(Rr.annotationElementId))&&((Zr=Hn(this,nr))==null||Zr.remove(Rr.id))}addDeletedAnnotationElement(Rr){Hn(this,tr).add(Rr.annotationElementId),Rr.deleted=!0}isDeletedAnnotationElement(Rr){return Hn(this,tr).has(Rr)}removeDeletedAnnotationElement(Rr){Hn(this,tr).delete(Rr.annotationElementId),Rr.deleted=!1}setActiveEditor(Rr){Hn(this,Cn)!==Rr&&(Fr(this,Cn,Rr),Rr&&Or(this,Nr,ym).call(this,Rr.propertiesToUpdate))}toggleSelected(Rr){if(Hn(this,ir).has(Rr)){Hn(this,ir).delete(Rr),Rr.unselect(),Or(this,Nr,xl).call(this,{hasSelectedEditor:this.hasSelection});return}Hn(this,ir).add(Rr),Rr.select(),Or(this,Nr,ym).call(this,Rr.propertiesToUpdate),Or(this,Nr,xl).call(this,{hasSelectedEditor:!0})}setSelected(Rr){for(const Zr of Hn(this,ir))Zr!==Rr&&Zr.unselect();Hn(this,ir).clear(),Hn(this,ir).add(Rr),Rr.select(),Or(this,Nr,ym).call(this,Rr.propertiesToUpdate),Or(this,Nr,xl).call(this,{hasSelectedEditor:!0})}isSelected(Rr){return Hn(this,ir).has(Rr)}unselect(Rr){Rr.unselect(),Hn(this,ir).delete(Rr),Or(this,Nr,xl).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Hn(this,ir).size!==0}undo(){Hn(this,sr).undo(),Or(this,Nr,xl).call(this,{hasSomethingToUndo:Hn(this,sr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Or(this,Nr,xm).call(this)})}redo(){Hn(this,sr).redo(),Or(this,Nr,xl).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Hn(this,sr).hasSomethingToRedo(),isEmpty:Or(this,Nr,xm).call(this)})}addCommands(Rr){Hn(this,sr).add(Rr),Or(this,Nr,xl).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Or(this,Nr,xm).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Rr=[...Hn(this,ir)],Zr=()=>{for(const fs of Rr)fs.remove()},ds=()=>{for(const fs of Rr)Or(this,Nr,V0).call(this,fs)};this.addCommands({cmd:Zr,undo:ds,mustExec:!0})}commitOrRemove(){var Rr;(Rr=Hn(this,Cn))==null||Rr.commitOrRemove()}hasSomethingToControl(){return Hn(this,Cn)||this.hasSelection}selectAll(){for(const Rr of Hn(this,ir))Rr.commit();Or(this,Nr,$0).call(this,Hn(this,Mn).values())}unselectAll(){if(Hn(this,Cn)){Hn(this,Cn).commitOrRemove();return}if(this.hasSelection){for(const Rr of Hn(this,ir))Rr.unselect();Hn(this,ir).clear(),Or(this,Nr,xl).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Rr,Zr,ds=!1){if(ds||this.commitOrRemove(),!this.hasSelection)return;Hn(this,Pr)[0]+=Rr,Hn(this,Pr)[1]+=Zr;const[fs,vs]=Hn(this,Pr),Ts=[...Hn(this,ir)],Er=1e3;Hn(this,kr)&&clearTimeout(Hn(this,kr)),Fr(this,kr,setTimeout(()=>{Fr(this,kr,null),Hn(this,Pr)[0]=Hn(this,Pr)[1]=0,this.addCommands({cmd:()=>{for(const vr of Ts)Hn(this,Mn).has(vr.id)&&vr.translateInPage(fs,vs)},undo:()=>{for(const vr of Ts)Hn(this,Mn).has(vr.id)&&vr.translateInPage(-fs,-vs)},mustExec:!1})},Er));for(const vr of Ts)vr.translateInPage(Rr,Zr)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Fr(this,Jn,new Map);for(const Rr of Hn(this,ir))Hn(this,Jn).set(Rr,{savedX:Rr.x,savedY:Rr.y,savedPageIndex:Rr.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Hn(this,Jn))return!1;this.disableUserSelect(!1);const Rr=Hn(this,Jn);Fr(this,Jn,null);let Zr=!1;for(const[{x:fs,y:vs,pageIndex:Ts},Er]of Rr)Er.newX=fs,Er.newY=vs,Er.newPageIndex=Ts,Zr||(Zr=fs!==Er.savedX||vs!==Er.savedY||Ts!==Er.savedPageIndex);if(!Zr)return!1;const ds=(fs,vs,Ts,Er)=>{if(Hn(this,Mn).has(fs.id)){const vr=Hn(this,Bn).get(Er);vr?fs._setParentAndPosition(vr,vs,Ts):(fs.pageIndex=Er,fs.x=vs,fs.y=Ts)}};return this.addCommands({cmd:()=>{for(const[fs,{newX:vs,newY:Ts,newPageIndex:Er}]of Rr)ds(fs,vs,Ts,Er)},undo:()=>{for(const[fs,{savedX:vs,savedY:Ts,savedPageIndex:Er}]of Rr)ds(fs,vs,Ts,Er)},mustExec:!0}),!0}dragSelectedEditors(Rr,Zr){if(Hn(this,Jn))for(const ds of Hn(this,Jn).keys())ds.drag(Rr,Zr)}rebuild(Rr){if(Rr.parent===null){const Zr=this.getLayer(Rr.pageIndex);Zr?(Zr.changeParent(Rr),Zr.addOrRebuild(Rr)):(this.addEditor(Rr),this.addToAnnotationStorage(Rr),Rr.rebuild())}else Rr.parent.addOrRebuild(Rr)}isActive(Rr){return Hn(this,Cn)===Rr}getActive(){return Hn(this,Cn)}getMode(){return Hn(this,Zn)}get imageManager(){return(0,dn.shadow)(this,"imageManager",new gn)}};Cn=new WeakMap,Mn=new WeakMap,Bn=new WeakMap,Xn=new WeakMap,nr=new WeakMap,sr=new WeakMap,lr=new WeakMap,tr=new WeakMap,Jn=new WeakMap,ar=new WeakMap,gr=new WeakMap,qn=new WeakMap,On=new WeakMap,Un=new WeakMap,Yn=new WeakMap,er=new WeakMap,Zn=new WeakMap,ir=new WeakMap,fr=new WeakMap,br=new WeakMap,Tr=new WeakMap,Ir=new WeakMap,Mr=new WeakMap,qr=new WeakMap,Ar=new WeakMap,or=new WeakMap,jr=new WeakMap,cr=new WeakMap,hr=new WeakMap,wr=new WeakMap,Pr=new WeakMap,kr=new WeakMap,Hr=new WeakMap,Kr=new WeakMap,Nr=new WeakSet,Qy=function(){window.addEventListener("focus",Hn(this,Tr)),window.addEventListener("blur",Hn(this,br))},M0=function(){window.removeEventListener("focus",Hn(this,Tr)),window.removeEventListener("blur",Hn(this,br))},D0=function(){window.addEventListener("keydown",Hn(this,Ar),{capture:!0})},Jm=function(){window.removeEventListener("keydown",Hn(this,Ar),{capture:!0})},O0=function(){document.addEventListener("copy",Hn(this,Ir)),document.addEventListener("cut",Hn(this,Mr)),document.addEventListener("paste",Hn(this,qr))},F0=function(){document.removeEventListener("copy",Hn(this,Ir)),document.removeEventListener("cut",Hn(this,Mr)),document.removeEventListener("paste",Hn(this,qr))},xl=function(Rr){Object.entries(Rr).some(([ds,fs])=>Hn(this,wr)[ds]!==fs)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Hn(this,wr),Rr)})},ym=function(Rr){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Rr})},Jy=function(){if(!Hn(this,Un)){Fr(this,Un,!0);for(const Rr of Hn(this,Bn).values())Rr.enable()}},Zy=function(){if(this.unselectAll(),Hn(this,Un)){Fr(this,Un,!1);for(const Rr of Hn(this,Bn).values())Rr.disable()}},V0=function(Rr){const Zr=Hn(this,Bn).get(Rr.pageIndex);Zr?Zr.addOrRebuild(Rr):this.addEditor(Rr)},xm=function(){if(Hn(this,Mn).size===0)return!0;if(Hn(this,Mn).size===1)for(const Rr of Hn(this,Mn).values())return Rr.isEmpty();return!1},$0=function(Rr){Hn(this,ir).clear();for(const Zr of Rr)Zr.isEmpty()||(Hn(this,ir).add(Zr),Zr.select());Or(this,Nr,xl).call(this,{hasSelectedEditor:!0})},io(ks,"TRANSLATE_SMALL",1),io(ks,"TRANSLATE_BIG",10);let bn=ks;e.AnnotationEditorUIManager=bn},(_e,e,un)=>{var lr,tr,Jn,ar,gr,qn,On,Un,Yn,er,Zn,ir,$p,Bp,B0,Zm,_g,vm,_m;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=kn,e.getColorValues=Mn,e.getCurrentTransform=Bn,e.getCurrentTransformInverse=Xn,e.getFilenameFromUrl=Rn,e.getPdfFilenameFromUrl=Sn,e.getRGB=Cn,e.getXfaPageViewport=zn,e.isDataScheme=Tn,e.isPdfFile=In,e.isValidFetchUrl=$n,e.loadScript=Gn,e.noContextMenu=Fn,e.setLayerDimensions=nr;var dn=un(7),hn=un(1);const fn="http://www.w3.org/2000/svg",sr=class sr{};io(sr,"CSS",96),io(sr,"PDF",72),io(sr,"PDF_TO_CSS_UNITS",sr.CSS/sr.PDF);let pn=sr;e.PixelsPerInch=pn;class mn extends dn.BaseFilterFactory{constructor({docId:cr,ownerDocument:hr=globalThis.document}={}){super();Br(this,ir);Br(this,lr);Br(this,tr);Br(this,Jn);Br(this,ar);Br(this,gr);Br(this,qn);Br(this,On);Br(this,Un);Br(this,Yn);Br(this,er);Br(this,Zn,0);Fr(this,Jn,cr),Fr(this,ar,hr)}addFilter(cr){if(!cr)return"none";let hr=Hn(this,ir,$p).get(cr);if(hr)return hr;let wr,Pr,kr,Hr;if(cr.length===1){const ts=cr[0],Ps=new Array(256);for(let ps=0;ps<256;ps++)Ps[ps]=ts[ps]/255;Hr=wr=Pr=kr=Ps.join(",")}else{const[ts,Ps,ps]=cr,Cs=new Array(256),as=new Array(256),Ss=new Array(256);for(let js=0;js<256;js++)Cs[js]=ts[js]/255,as[js]=Ps[js]/255,Ss[js]=ps[js]/255;wr=Cs.join(","),Pr=as.join(","),kr=Ss.join(","),Hr=`${wr}${Pr}${kr}`}if(hr=Hn(this,ir,$p).get(Hr),hr)return Hn(this,ir,$p).set(cr,hr),hr;const Kr=`g_${Hn(this,Jn)}_transfer_map_${$u(this,Zn)._++}`,Nr=`url(#${Kr})`;Hn(this,ir,$p).set(cr,Nr),Hn(this,ir,$p).set(Hr,Nr);const ns=Or(this,ir,Zm).call(this,Kr);return Or(this,ir,vm).call(this,wr,Pr,kr,ns),Nr}addHCMFilter(cr,hr){var Ps;const wr=`${cr}-${hr}`;if(Hn(this,qn)===wr)return Hn(this,On);if(Fr(this,qn,wr),Fr(this,On,"none"),(Ps=Hn(this,gr))==null||Ps.remove(),!cr||!hr)return Hn(this,On);const Pr=Or(this,ir,_m).call(this,cr);cr=hn.Util.makeHexColor(...Pr);const kr=Or(this,ir,_m).call(this,hr);if(hr=hn.Util.makeHexColor(...kr),Hn(this,ir,Bp).style.color="",cr==="#000000"&&hr==="#ffffff"||cr===hr)return Hn(this,On);const Hr=new Array(256);for(let ps=0;ps<=255;ps++){const Cs=ps/255;Hr[ps]=Cs<=.03928?Cs/12.92:((Cs+.055)/1.055)**2.4}const Kr=Hr.join(","),Nr=`g_${Hn(this,Jn)}_hcm_filter`,ns=Fr(this,Un,Or(this,ir,Zm).call(this,Nr));Or(this,ir,vm).call(this,Kr,Kr,Kr,ns),Or(this,ir,B0).call(this,ns);const ts=(ps,Cs)=>{const as=Pr[ps]/255,Ss=kr[ps]/255,js=new Array(Cs+1);for(let Bs=0;Bs<=Cs;Bs++)js[Bs]=as+Bs/Cs*(Ss-as);return js.join(",")};return Or(this,ir,vm).call(this,ts(0,5),ts(1,5),ts(2,5),ns),Fr(this,On,`url(#${Nr})`),Hn(this,On)}addHighlightHCMFilter(cr,hr,wr,Pr){var Ss;const kr=`${cr}-${hr}-${wr}-${Pr}`;if(Hn(this,Yn)===kr)return Hn(this,er);if(Fr(this,Yn,kr),Fr(this,er,"none"),(Ss=Hn(this,Un))==null||Ss.remove(),!cr||!hr)return Hn(this,er);const[Hr,Kr]=[cr,hr].map(Or(this,ir,_m).bind(this));let Nr=Math.round(.2126*Hr[0]+.7152*Hr[1]+.0722*Hr[2]),ns=Math.round(.2126*Kr[0]+.7152*Kr[1]+.0722*Kr[2]),[ts,Ps]=[wr,Pr].map(Or(this,ir,_m).bind(this));ns<Nr&&([Nr,ns,ts,Ps]=[ns,Nr,Ps,ts]),Hn(this,ir,Bp).style.color="";const ps=(js,Bs,es)=>{const Vr=new Array(256),Wr=(ns-Nr)/es,is=js/255,ks=(Bs-js)/(255*es);let ws=0;for(let Rr=0;Rr<=es;Rr++){const Zr=Math.round(Nr+Rr*Wr),ds=is+Rr*ks;for(let fs=ws;fs<=Zr;fs++)Vr[fs]=ds;ws=Zr+1}for(let Rr=ws;Rr<256;Rr++)Vr[Rr]=Vr[ws-1];return Vr.join(",")},Cs=`g_${Hn(this,Jn)}_hcm_highlight_filter`,as=Fr(this,Un,Or(this,ir,Zm).call(this,Cs));return Or(this,ir,B0).call(this,as),Or(this,ir,vm).call(this,ps(ts[0],Ps[0],5),ps(ts[1],Ps[1],5),ps(ts[2],Ps[2],5),as),Fr(this,er,`url(#${Cs})`),Hn(this,er)}destroy(cr=!1){cr&&(Hn(this,On)||Hn(this,er))||(Hn(this,tr)&&(Hn(this,tr).parentNode.parentNode.remove(),Fr(this,tr,null)),Hn(this,lr)&&(Hn(this,lr).clear(),Fr(this,lr,null)),Fr(this,Zn,0))}}lr=new WeakMap,tr=new WeakMap,Jn=new WeakMap,ar=new WeakMap,gr=new WeakMap,qn=new WeakMap,On=new WeakMap,Un=new WeakMap,Yn=new WeakMap,er=new WeakMap,Zn=new WeakMap,ir=new WeakSet,$p=function(){return Hn(this,lr)||Fr(this,lr,new Map)},Bp=function(){if(!Hn(this,tr)){const cr=Hn(this,ar).createElement("div"),{style:hr}=cr;hr.visibility="hidden",hr.contain="strict",hr.width=hr.height=0,hr.position="absolute",hr.top=hr.left=0,hr.zIndex=-1;const wr=Hn(this,ar).createElementNS(fn,"svg");wr.setAttribute("width",0),wr.setAttribute("height",0),Fr(this,tr,Hn(this,ar).createElementNS(fn,"defs")),cr.append(wr),wr.append(Hn(this,tr)),Hn(this,ar).body.append(cr)}return Hn(this,tr)},B0=function(cr){const hr=Hn(this,ar).createElementNS(fn,"feColorMatrix");hr.setAttribute("type","matrix"),hr.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),cr.append(hr)},Zm=function(cr){const hr=Hn(this,ar).createElementNS(fn,"filter");return hr.setAttribute("color-interpolation-filters","sRGB"),hr.setAttribute("id",cr),Hn(this,ir,Bp).append(hr),hr},_g=function(cr,hr,wr){const Pr=Hn(this,ar).createElementNS(fn,hr);Pr.setAttribute("type","discrete"),Pr.setAttribute("tableValues",wr),cr.append(Pr)},vm=function(cr,hr,wr,Pr){const kr=Hn(this,ar).createElementNS(fn,"feComponentTransfer");Pr.append(kr),Or(this,ir,_g).call(this,kr,"feFuncR",cr),Or(this,ir,_g).call(this,kr,"feFuncG",hr),Or(this,ir,_g).call(this,kr,"feFuncB",wr)},_m=function(cr){return Hn(this,ir,Bp).style.color=cr,Cn(getComputedStyle(Hn(this,ir,Bp)).getPropertyValue("color"))},e.DOMFilterFactory=mn;class gn extends dn.BaseCanvasFactory{constructor({ownerDocument:jr=globalThis.document}={}){super(),this._document=jr}_createCanvas(jr,cr){const hr=this._document.createElement("canvas");return hr.width=jr,hr.height=cr,hr}}e.DOMCanvasFactory=gn;async function yn(or,jr=!1){if($n(or,document.baseURI)){const cr=await fetch(or);if(!cr.ok)throw new Error(cr.statusText);return jr?new Uint8Array(await cr.arrayBuffer()):(0,hn.stringToBytes)(await cr.text())}return new Promise((cr,hr)=>{const wr=new XMLHttpRequest;wr.open("GET",or,!0),jr&&(wr.responseType="arraybuffer"),wr.onreadystatechange=()=>{if(wr.readyState===XMLHttpRequest.DONE){if(wr.status===200||wr.status===0){let Pr;if(jr&&wr.response?Pr=new Uint8Array(wr.response):!jr&&wr.responseText&&(Pr=(0,hn.stringToBytes)(wr.responseText)),Pr){cr(Pr);return}}hr(new Error(wr.statusText))}},wr.send(null)})}class xn extends dn.BaseCMapReaderFactory{_fetchData(jr,cr){return yn(jr,this.isCompressed).then(hr=>({cMapData:hr,compressionType:cr}))}}e.DOMCMapReaderFactory=xn;class En extends dn.BaseStandardFontDataFactory{_fetchData(jr){return yn(jr,!0)}}e.DOMStandardFontDataFactory=En;class bn extends dn.BaseSVGFactory{_createSVG(jr){return document.createElementNS(fn,jr)}}e.DOMSVGFactory=bn;class vn{constructor({viewBox:jr,scale:cr,rotation:hr,offsetX:wr=0,offsetY:Pr=0,dontFlip:kr=!1}){this.viewBox=jr,this.scale=cr,this.rotation=hr,this.offsetX=wr,this.offsetY=Pr;const Hr=(jr[2]+jr[0])/2,Kr=(jr[3]+jr[1])/2;let Nr,ns,ts,Ps;switch(hr%=360,hr<0&&(hr+=360),hr){case 180:Nr=-1,ns=0,ts=0,Ps=1;break;case 90:Nr=0,ns=1,ts=1,Ps=0;break;case 270:Nr=0,ns=-1,ts=-1,Ps=0;break;case 0:Nr=1,ns=0,ts=0,Ps=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}kr&&(ts=-ts,Ps=-Ps);let ps,Cs,as,Ss;Nr===0?(ps=Math.abs(Kr-jr[1])*cr+wr,Cs=Math.abs(Hr-jr[0])*cr+Pr,as=(jr[3]-jr[1])*cr,Ss=(jr[2]-jr[0])*cr):(ps=Math.abs(Hr-jr[0])*cr+wr,Cs=Math.abs(Kr-jr[1])*cr+Pr,as=(jr[2]-jr[0])*cr,Ss=(jr[3]-jr[1])*cr),this.transform=[Nr*cr,ns*cr,ts*cr,Ps*cr,ps-Nr*cr*Hr-ts*cr*Kr,Cs-ns*cr*Hr-Ps*cr*Kr],this.width=as,this.height=Ss}get rawDims(){const{viewBox:jr}=this;return(0,hn.shadow)(this,"rawDims",{pageWidth:jr[2]-jr[0],pageHeight:jr[3]-jr[1],pageX:jr[0],pageY:jr[1]})}clone({scale:jr=this.scale,rotation:cr=this.rotation,offsetX:hr=this.offsetX,offsetY:wr=this.offsetY,dontFlip:Pr=!1}={}){return new vn({viewBox:this.viewBox.slice(),scale:jr,rotation:cr,offsetX:hr,offsetY:wr,dontFlip:Pr})}convertToViewportPoint(jr,cr){return hn.Util.applyTransform([jr,cr],this.transform)}convertToViewportRectangle(jr){const cr=hn.Util.applyTransform([jr[0],jr[1]],this.transform),hr=hn.Util.applyTransform([jr[2],jr[3]],this.transform);return[cr[0],cr[1],hr[0],hr[1]]}convertToPdfPoint(jr,cr){return hn.Util.applyInverseTransform([jr,cr],this.transform)}}e.PageViewport=vn;class Pn extends hn.BaseException{constructor(jr,cr=0){super(jr,"RenderingCancelledException"),this.extraDelay=cr}}e.RenderingCancelledException=Pn;function Tn(or){const jr=or.length;let cr=0;for(;cr<jr&&or[cr].trim()==="";)cr++;return or.substring(cr,cr+5).toLowerCase()==="data:"}function In(or){return typeof or=="string"&&/\.pdf$/i.test(or)}function Rn(or,jr=!1){return jr||([or]=or.split(/[#?]/,1)),or.substring(or.lastIndexOf("/")+1)}function Sn(or,jr="document.pdf"){if(typeof or!="string")return jr;if(Tn(or))return(0,hn.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),jr;const cr=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,hr=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,wr=cr.exec(or);let Pr=hr.exec(wr[1])||hr.exec(wr[2])||hr.exec(wr[3]);if(Pr&&(Pr=Pr[0],Pr.includes("%")))try{Pr=hr.exec(decodeURIComponent(Pr))[0]}catch{}return Pr||jr}class Dn{constructor(){io(this,"started",Object.create(null));io(this,"times",[])}time(jr){jr in this.started&&(0,hn.warn)(`Timer is already running for ${jr}`),this.started[jr]=Date.now()}timeEnd(jr){jr in this.started||(0,hn.warn)(`Timer has not been started for ${jr}`),this.times.push({name:jr,start:this.started[jr],end:Date.now()}),delete this.started[jr]}toString(){const jr=[];let cr=0;for(const{name:hr}of this.times)cr=Math.max(hr.length,cr);for(const{name:hr,start:wr,end:Pr}of this.times)jr.push(`${hr.padEnd(cr)} ${Pr-wr}ms
`);return jr.join("")}}e.StatTimer=Dn;function $n(or,jr){try{const{protocol:cr}=jr?new URL(or,jr):new URL(or);return cr==="http:"||cr==="https:"}catch{return!1}}function Fn(or){or.preventDefault()}function Gn(or,jr=!1){return new Promise((cr,hr)=>{const wr=document.createElement("script");wr.src=or,wr.onload=function(Pr){jr&&wr.remove(),cr(Pr)},wr.onerror=function(){hr(new Error(`Cannot load script at: ${wr.src}`))},(document.head||document.documentElement).append(wr)})}function kn(or){console.log("Deprecated API usage: "+or)}let Nn;class Ln{static toDateObject(jr){if(!jr||typeof jr!="string")return null;Nn||(Nn=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const cr=Nn.exec(jr);if(!cr)return null;const hr=parseInt(cr[1],10);let wr=parseInt(cr[2],10);wr=wr>=1&&wr<=12?wr-1:0;let Pr=parseInt(cr[3],10);Pr=Pr>=1&&Pr<=31?Pr:1;let kr=parseInt(cr[4],10);kr=kr>=0&&kr<=23?kr:0;let Hr=parseInt(cr[5],10);Hr=Hr>=0&&Hr<=59?Hr:0;let Kr=parseInt(cr[6],10);Kr=Kr>=0&&Kr<=59?Kr:0;const Nr=cr[7]||"Z";let ns=parseInt(cr[8],10);ns=ns>=0&&ns<=23?ns:0;let ts=parseInt(cr[9],10)||0;return ts=ts>=0&&ts<=59?ts:0,Nr==="-"?(kr+=ns,Hr+=ts):Nr==="+"&&(kr-=ns,Hr-=ts),new Date(Date.UTC(hr,wr,Pr,kr,Hr,Kr))}}e.PDFDateString=Ln;function zn(or,{scale:jr=1,rotation:cr=0}){const{width:hr,height:wr}=or.attributes.style,Pr=[0,0,parseInt(hr),parseInt(wr)];return new vn({viewBox:Pr,scale:jr,rotation:cr})}function Cn(or){if(or.startsWith("#")){const jr=parseInt(or.slice(1),16);return[(jr&16711680)>>16,(jr&65280)>>8,jr&255]}return or.startsWith("rgb(")?or.slice(4,-1).split(",").map(jr=>parseInt(jr)):or.startsWith("rgba(")?or.slice(5,-1).split(",").map(jr=>parseInt(jr)).slice(0,3):((0,hn.warn)(`Not a valid color format: "${or}"`),[0,0,0])}function Mn(or){const jr=document.createElement("span");jr.style.visibility="hidden",document.body.append(jr);for(const cr of or.keys()){jr.style.color=cr;const hr=window.getComputedStyle(jr).color;or.set(cr,Cn(hr))}jr.remove()}function Bn(or){const{a:jr,b:cr,c:hr,d:wr,e:Pr,f:kr}=or.getTransform();return[jr,cr,hr,wr,Pr,kr]}function Xn(or){const{a:jr,b:cr,c:hr,d:wr,e:Pr,f:kr}=or.getTransform().invertSelf();return[jr,cr,hr,wr,Pr,kr]}function nr(or,jr,cr=!1,hr=!0){if(jr instanceof vn){const{pageWidth:wr,pageHeight:Pr}=jr.rawDims,{style:kr}=or,Hr=hn.FeatureTest.isCSSRoundSupported,Kr=`var(--scale-factor) * ${wr}px`,Nr=`var(--scale-factor) * ${Pr}px`,ns=Hr?`round(${Kr}, 1px)`:`calc(${Kr})`,ts=Hr?`round(${Nr}, 1px)`:`calc(${Nr})`;!cr||jr.rotation%180===0?(kr.width=ns,kr.height=ts):(kr.width=ts,kr.height=ns)}hr&&or.setAttribute("data-main-rotation",jr.rotation)}},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var dn=un(1);class hn{constructor(){this.constructor===hn&&(0,dn.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(xn){return"none"}addHCMFilter(xn,En){return"none"}addHighlightHCMFilter(xn,En,bn,vn){return"none"}destroy(xn=!1){}}e.BaseFilterFactory=hn;class fn{constructor(){this.constructor===fn&&(0,dn.unreachable)("Cannot initialize BaseCanvasFactory.")}create(xn,En){if(xn<=0||En<=0)throw new Error("Invalid canvas size");const bn=this._createCanvas(xn,En);return{canvas:bn,context:bn.getContext("2d")}}reset(xn,En,bn){if(!xn.canvas)throw new Error("Canvas is not specified");if(En<=0||bn<=0)throw new Error("Invalid canvas size");xn.canvas.width=En,xn.canvas.height=bn}destroy(xn){if(!xn.canvas)throw new Error("Canvas is not specified");xn.canvas.width=0,xn.canvas.height=0,xn.canvas=null,xn.context=null}_createCanvas(xn,En){(0,dn.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=fn;class pn{constructor({baseUrl:xn=null,isCompressed:En=!0}){this.constructor===pn&&(0,dn.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=xn,this.isCompressed=En}async fetch({name:xn}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!xn)throw new Error("CMap name must be specified.");const En=this.baseUrl+xn+(this.isCompressed?".bcmap":""),bn=this.isCompressed?dn.CMapCompressionType.BINARY:dn.CMapCompressionType.NONE;return this._fetchData(En,bn).catch(vn=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${En}`)})}_fetchData(xn,En){(0,dn.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=pn;class mn{constructor({baseUrl:xn=null}){this.constructor===mn&&(0,dn.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=xn}async fetch({filename:xn}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!xn)throw new Error("Font filename must be specified.");const En=`${this.baseUrl}${xn}`;return this._fetchData(En).catch(bn=>{throw new Error(`Unable to load font data at: ${En}`)})}_fetchData(xn){(0,dn.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=mn;class gn{constructor(){this.constructor===gn&&(0,dn.unreachable)("Cannot initialize BaseSVGFactory.")}create(xn,En,bn=!1){if(xn<=0||En<=0)throw new Error("Invalid SVG dimensions");const vn=this._createSVG("svg:svg");return vn.setAttribute("version","1.1"),bn||(vn.setAttribute("width",`${xn}px`),vn.setAttribute("height",`${En}px`)),vn.setAttribute("preserveAspectRatio","none"),vn.setAttribute("viewBox",`0 0 ${xn} ${En}`),vn}createElement(xn){if(typeof xn!="string")throw new Error("Invalid SVG element type");return this._createSVG(xn)}_createSVG(xn){(0,dn.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=gn},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var dn=un(1);const hn=3285377520,fn=4294901760,pn=65535;class mn{constructor(yn){this.h1=yn?yn&4294967295:hn,this.h2=yn?yn&4294967295:hn}update(yn){let xn,En;if(typeof yn=="string"){xn=new Uint8Array(yn.length*2),En=0;for(let kn=0,Nn=yn.length;kn<Nn;kn++){const Ln=yn.charCodeAt(kn);Ln<=255?xn[En++]=Ln:(xn[En++]=Ln>>>8,xn[En++]=Ln&255)}}else if((0,dn.isArrayBuffer)(yn))xn=yn.slice(),En=xn.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const bn=En>>2,vn=En-bn*4,Pn=new Uint32Array(xn.buffer,0,bn);let Tn=0,In=0,Rn=this.h1,Sn=this.h2;const Dn=3432918353,$n=461845907,Fn=Dn&pn,Gn=$n&pn;for(let kn=0;kn<bn;kn++)kn&1?(Tn=Pn[kn],Tn=Tn*Dn&fn|Tn*Fn&pn,Tn=Tn<<15|Tn>>>17,Tn=Tn*$n&fn|Tn*Gn&pn,Rn^=Tn,Rn=Rn<<13|Rn>>>19,Rn=Rn*5+3864292196):(In=Pn[kn],In=In*Dn&fn|In*Fn&pn,In=In<<15|In>>>17,In=In*$n&fn|In*Gn&pn,Sn^=In,Sn=Sn<<13|Sn>>>19,Sn=Sn*5+3864292196);switch(Tn=0,vn){case 3:Tn^=xn[bn*4+2]<<16;case 2:Tn^=xn[bn*4+1]<<8;case 1:Tn^=xn[bn*4],Tn=Tn*Dn&fn|Tn*Fn&pn,Tn=Tn<<15|Tn>>>17,Tn=Tn*$n&fn|Tn*Gn&pn,bn&1?Rn^=Tn:Sn^=Tn}this.h1=Rn,this.h2=Sn}hexdigest(){let yn=this.h1,xn=this.h2;return yn^=xn>>>1,yn=yn*3981806797&fn|yn*36045&pn,xn=xn*4283543511&fn|((xn<<16|yn>>>16)*2950163797&fn)>>>16,yn^=xn>>>1,yn=yn*444984403&fn|yn*60499&pn,xn=xn*3301882366&fn|((xn<<16|yn>>>16)*3120437893&fn)>>>16,yn^=xn>>>1,(yn>>>0).toString(16).padStart(8,"0")+(xn>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=mn},(_e,e,un)=>{var pn;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var dn=un(1);class hn{constructor({ownerDocument:gn=globalThis.document,styleElement:yn=null}){Br(this,pn,new Set);this._document=gn,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(gn){this.nativeFontFaces.add(gn),this._document.fonts.add(gn)}removeNativeFontFace(gn){this.nativeFontFaces.delete(gn),this._document.fonts.delete(gn)}insertRule(gn){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const yn=this.styleElement.sheet;yn.insertRule(gn,yn.cssRules.length)}clear(){for(const gn of this.nativeFontFaces)this._document.fonts.delete(gn);this.nativeFontFaces.clear(),Hn(this,pn).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(gn){if(!(!gn||Hn(this,pn).has(gn.loadedName))){if((0,dn.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:yn,src:xn,style:En}=gn,bn=new FontFace(yn,xn,En);this.addNativeFontFace(bn);try{await bn.load(),Hn(this,pn).add(yn)}catch{(0,dn.warn)(`Cannot load system font: ${gn.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(bn)}return}(0,dn.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(gn){if(gn.attached||gn.missingFile&&!gn.systemFontInfo)return;if(gn.attached=!0,gn.systemFontInfo){await this.loadSystemFont(gn.systemFontInfo);return}if(this.isFontLoadingAPISupported){const xn=gn.createNativeFontFace();if(xn){this.addNativeFontFace(xn);try{await xn.loaded}catch(En){throw(0,dn.warn)(`Failed to load font '${xn.family}': '${En}'.`),gn.disableFontFace=!0,En}}return}const yn=gn.createFontFaceRule();if(yn){if(this.insertRule(yn),this.isSyncFontLoadingSupported)return;await new Promise(xn=>{const En=this._queueLoadingCallback(xn);this._prepareFontLoadEvent(gn,En)})}}get isFontLoadingAPISupported(){var yn;const gn=!!((yn=this._document)!=null&&yn.fonts);return(0,dn.shadow)(this,"isFontLoadingAPISupported",gn)}get isSyncFontLoadingSupported(){let gn=!1;return(dn.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(gn=!0),(0,dn.shadow)(this,"isSyncFontLoadingSupported",gn)}_queueLoadingCallback(gn){function yn(){for((0,dn.assert)(!En.done,"completeRequest() cannot be called twice."),En.done=!0;xn.length>0&&xn[0].done;){const bn=xn.shift();setTimeout(bn.callback,0)}}const{loadingRequests:xn}=this,En={done:!1,complete:yn,callback:gn};return xn.push(En),En}get _loadTestFont(){const gn=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,dn.shadow)(this,"_loadTestFont",gn)}_prepareFontLoadEvent(gn,yn){function xn(Cn,Mn){return Cn.charCodeAt(Mn)<<24|Cn.charCodeAt(Mn+1)<<16|Cn.charCodeAt(Mn+2)<<8|Cn.charCodeAt(Mn+3)&255}function En(Cn,Mn,Bn,Xn){const nr=Cn.substring(0,Mn),sr=Cn.substring(Mn+Bn);return nr+Xn+sr}let bn,vn;const Pn=this._document.createElement("canvas");Pn.width=1,Pn.height=1;const Tn=Pn.getContext("2d");let In=0;function Rn(Cn,Mn){if(++In>30){(0,dn.warn)("Load test font never loaded."),Mn();return}if(Tn.font="30px "+Cn,Tn.fillText(".",0,20),Tn.getImageData(0,0,1,1).data[3]>0){Mn();return}setTimeout(Rn.bind(null,Cn,Mn))}const Sn=`lt${Date.now()}${this.loadTestFontId++}`;let Dn=this._loadTestFont;Dn=En(Dn,976,Sn.length,Sn);const Fn=16,Gn=1482184792;let kn=xn(Dn,Fn);for(bn=0,vn=Sn.length-3;bn<vn;bn+=4)kn=kn-Gn+xn(Sn,bn)|0;bn<Sn.length&&(kn=kn-Gn+xn(Sn+"XXX",bn)|0),Dn=En(Dn,Fn,4,(0,dn.string32)(kn));const Nn=`url(data:font/opentype;base64,${btoa(Dn)});`,Ln=`@font-face {font-family:"${Sn}";src:${Nn}}`;this.insertRule(Ln);const zn=this._document.createElement("div");zn.style.visibility="hidden",zn.style.width=zn.style.height="10px",zn.style.position="absolute",zn.style.top=zn.style.left="0px";for(const Cn of[gn.loadedName,Sn]){const Mn=this._document.createElement("span");Mn.textContent="Hi",Mn.style.fontFamily=Cn,zn.append(Mn)}this._document.body.append(zn),Rn(Sn,()=>{zn.remove(),yn.complete()})}}pn=new WeakMap,e.FontLoader=hn;class fn{constructor(gn,{isEvalSupported:yn=!0,disableFontFace:xn=!1,ignoreErrors:En=!1,inspectFont:bn=null}){this.compiledGlyphs=Object.create(null);for(const vn in gn)this[vn]=gn[vn];this.isEvalSupported=yn!==!1,this.disableFontFace=xn===!0,this.ignoreErrors=En===!0,this._inspectFont=bn}createNativeFontFace(){var yn;if(!this.data||this.disableFontFace)return null;let gn;if(!this.cssFontInfo)gn=new FontFace(this.loadedName,this.data,{});else{const xn={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(xn.style=`oblique ${this.cssFontInfo.italicAngle}deg`),gn=new FontFace(this.cssFontInfo.fontFamily,this.data,xn)}return(yn=this._inspectFont)==null||yn.call(this,this),gn}createFontFaceRule(){var En;if(!this.data||this.disableFontFace)return null;const gn=(0,dn.bytesToString)(this.data),yn=`url(data:${this.mimetype};base64,${btoa(gn)});`;let xn;if(!this.cssFontInfo)xn=`@font-face {font-family:"${this.loadedName}";src:${yn}}`;else{let bn=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(bn+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),xn=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${bn}src:${yn}}`}return(En=this._inspectFont)==null||En.call(this,this,yn),xn}getPathGenerator(gn,yn){if(this.compiledGlyphs[yn]!==void 0)return this.compiledGlyphs[yn];let xn;try{xn=gn.get(this.loadedName+"_path_"+yn)}catch(En){if(!this.ignoreErrors)throw En;return(0,dn.warn)(`getPathGenerator - ignoring character: "${En}".`),this.compiledGlyphs[yn]=function(bn,vn){}}if(this.isEvalSupported&&dn.FeatureTest.isEvalSupported){const En=[];for(const bn of xn){const vn=bn.args!==void 0?bn.args.join(","):"";En.push("c.",bn.cmd,"(",vn,`);
`)}return this.compiledGlyphs[yn]=new Function("c","size",En.join(""))}return this.compiledGlyphs[yn]=function(En,bn){for(const vn of xn)vn.cmd==="scale"&&(vn.args=[bn,-bn]),En[vn.cmd].apply(En,vn.args)}}}e.FontFaceObject=fn},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var dn=un(7);un(1);const hn=function(yn){return new Promise((xn,En)=>{require$$5.readFile(yn,(vn,Pn)=>{if(vn||!Pn){En(new Error(vn));return}xn(new Uint8Array(Pn))})})};class fn extends dn.BaseFilterFactory{}e.NodeFilterFactory=fn;class pn extends dn.BaseCanvasFactory{_createCanvas(xn,En){return require$$5.createCanvas(xn,En)}}e.NodeCanvasFactory=pn;class mn extends dn.BaseCMapReaderFactory{_fetchData(xn,En){return hn(xn).then(bn=>({cMapData:bn,compressionType:En}))}}e.NodeCMapReaderFactory=mn;class gn extends dn.BaseStandardFontDataFactory{_fetchData(xn){return hn(xn)}}e.NodeStandardFontDataFactory=gn},(_e,e,un)=>{var tr,U0,z0;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var dn=un(1),hn=un(6),fn=un(12),pn=un(13);const mn=16,gn=100,yn=4096,xn=15,En=10,bn=1e3,vn=16;function Pn(qn,On){if(qn._removeMirroring)throw new Error("Context is already forwarding operations.");qn.__originalSave=qn.save,qn.__originalRestore=qn.restore,qn.__originalRotate=qn.rotate,qn.__originalScale=qn.scale,qn.__originalTranslate=qn.translate,qn.__originalTransform=qn.transform,qn.__originalSetTransform=qn.setTransform,qn.__originalResetTransform=qn.resetTransform,qn.__originalClip=qn.clip,qn.__originalMoveTo=qn.moveTo,qn.__originalLineTo=qn.lineTo,qn.__originalBezierCurveTo=qn.bezierCurveTo,qn.__originalRect=qn.rect,qn.__originalClosePath=qn.closePath,qn.__originalBeginPath=qn.beginPath,qn._removeMirroring=()=>{qn.save=qn.__originalSave,qn.restore=qn.__originalRestore,qn.rotate=qn.__originalRotate,qn.scale=qn.__originalScale,qn.translate=qn.__originalTranslate,qn.transform=qn.__originalTransform,qn.setTransform=qn.__originalSetTransform,qn.resetTransform=qn.__originalResetTransform,qn.clip=qn.__originalClip,qn.moveTo=qn.__originalMoveTo,qn.lineTo=qn.__originalLineTo,qn.bezierCurveTo=qn.__originalBezierCurveTo,qn.rect=qn.__originalRect,qn.closePath=qn.__originalClosePath,qn.beginPath=qn.__originalBeginPath,delete qn._removeMirroring},qn.save=function(){On.save(),this.__originalSave()},qn.restore=function(){On.restore(),this.__originalRestore()},qn.translate=function(Yn,er){On.translate(Yn,er),this.__originalTranslate(Yn,er)},qn.scale=function(Yn,er){On.scale(Yn,er),this.__originalScale(Yn,er)},qn.transform=function(Yn,er,Zn,ir,fr,br){On.transform(Yn,er,Zn,ir,fr,br),this.__originalTransform(Yn,er,Zn,ir,fr,br)},qn.setTransform=function(Yn,er,Zn,ir,fr,br){On.setTransform(Yn,er,Zn,ir,fr,br),this.__originalSetTransform(Yn,er,Zn,ir,fr,br)},qn.resetTransform=function(){On.resetTransform(),this.__originalResetTransform()},qn.rotate=function(Yn){On.rotate(Yn),this.__originalRotate(Yn)},qn.clip=function(Yn){On.clip(Yn),this.__originalClip(Yn)},qn.moveTo=function(Un,Yn){On.moveTo(Un,Yn),this.__originalMoveTo(Un,Yn)},qn.lineTo=function(Un,Yn){On.lineTo(Un,Yn),this.__originalLineTo(Un,Yn)},qn.bezierCurveTo=function(Un,Yn,er,Zn,ir,fr){On.bezierCurveTo(Un,Yn,er,Zn,ir,fr),this.__originalBezierCurveTo(Un,Yn,er,Zn,ir,fr)},qn.rect=function(Un,Yn,er,Zn){On.rect(Un,Yn,er,Zn),this.__originalRect(Un,Yn,er,Zn)},qn.closePath=function(){On.closePath(),this.__originalClosePath()},qn.beginPath=function(){On.beginPath(),this.__originalBeginPath()}}class Tn{constructor(On){this.canvasFactory=On,this.cache=Object.create(null)}getCanvas(On,Un,Yn){let er;return this.cache[On]!==void 0?(er=this.cache[On],this.canvasFactory.reset(er,Un,Yn)):(er=this.canvasFactory.create(Un,Yn),this.cache[On]=er),er}delete(On){delete this.cache[On]}clear(){for(const On in this.cache){const Un=this.cache[On];this.canvasFactory.destroy(Un),delete this.cache[On]}}}function In(qn,On,Un,Yn,er,Zn,ir,fr,br,Tr){const[Ir,Mr,qr,Ar,or,jr]=(0,hn.getCurrentTransform)(qn);if(Mr===0&&qr===0){const wr=ir*Ir+or,Pr=Math.round(wr),kr=fr*Ar+jr,Hr=Math.round(kr),Kr=(ir+br)*Ir+or,Nr=Math.abs(Math.round(Kr)-Pr)||1,ns=(fr+Tr)*Ar+jr,ts=Math.abs(Math.round(ns)-Hr)||1;return qn.setTransform(Math.sign(Ir),0,0,Math.sign(Ar),Pr,Hr),qn.drawImage(On,Un,Yn,er,Zn,0,0,Nr,ts),qn.setTransform(Ir,Mr,qr,Ar,or,jr),[Nr,ts]}if(Ir===0&&Ar===0){const wr=fr*qr+or,Pr=Math.round(wr),kr=ir*Mr+jr,Hr=Math.round(kr),Kr=(fr+Tr)*qr+or,Nr=Math.abs(Math.round(Kr)-Pr)||1,ns=(ir+br)*Mr+jr,ts=Math.abs(Math.round(ns)-Hr)||1;return qn.setTransform(0,Math.sign(Mr),Math.sign(qr),0,Pr,Hr),qn.drawImage(On,Un,Yn,er,Zn,0,0,ts,Nr),qn.setTransform(Ir,Mr,qr,Ar,or,jr),[ts,Nr]}qn.drawImage(On,Un,Yn,er,Zn,ir,fr,br,Tr);const cr=Math.hypot(Ir,Mr),hr=Math.hypot(qr,Ar);return[cr*br,hr*Tr]}function Rn(qn){const{width:On,height:Un}=qn;if(On>bn||Un>bn)return null;const Yn=1e3,er=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Zn=On+1;let ir=new Uint8Array(Zn*(Un+1)),fr,br,Tr;const Ir=On+7&-8;let Mr=new Uint8Array(Ir*Un),qr=0;for(const hr of qn.data){let wr=128;for(;wr>0;)Mr[qr++]=hr&wr?0:255,wr>>=1}let Ar=0;for(qr=0,Mr[qr]!==0&&(ir[0]=1,++Ar),br=1;br<On;br++)Mr[qr]!==Mr[qr+1]&&(ir[br]=Mr[qr]?2:1,++Ar),qr++;for(Mr[qr]!==0&&(ir[br]=2,++Ar),fr=1;fr<Un;fr++){qr=fr*Ir,Tr=fr*Zn,Mr[qr-Ir]!==Mr[qr]&&(ir[Tr]=Mr[qr]?1:8,++Ar);let hr=(Mr[qr]?4:0)+(Mr[qr-Ir]?8:0);for(br=1;br<On;br++)hr=(hr>>2)+(Mr[qr+1]?4:0)+(Mr[qr-Ir+1]?8:0),er[hr]&&(ir[Tr+br]=er[hr],++Ar),qr++;if(Mr[qr-Ir]!==Mr[qr]&&(ir[Tr+br]=Mr[qr]?2:4,++Ar),Ar>Yn)return null}for(qr=Ir*(Un-1),Tr=fr*Zn,Mr[qr]!==0&&(ir[Tr]=8,++Ar),br=1;br<On;br++)Mr[qr]!==Mr[qr+1]&&(ir[Tr+br]=Mr[qr]?4:8,++Ar),qr++;if(Mr[qr]!==0&&(ir[Tr+br]=4,++Ar),Ar>Yn)return null;const or=new Int32Array([0,Zn,-1,0,-Zn,0,0,0,1]),jr=new Path2D;for(fr=0;Ar&&fr<=Un;fr++){let hr=fr*Zn;const wr=hr+On;for(;hr<wr&&!ir[hr];)hr++;if(hr===wr)continue;jr.moveTo(hr%Zn,fr);const Pr=hr;let kr=ir[hr];do{const Hr=or[kr];do hr+=Hr;while(!ir[hr]);const Kr=ir[hr];Kr!==5&&Kr!==10?(kr=Kr,ir[hr]=0):(kr=Kr&51*kr>>4,ir[hr]&=kr>>2|kr<<2),jr.lineTo(hr%Zn,hr/Zn|0),ir[hr]||--Ar}while(Pr!==hr);--fr}return Mr=null,ir=null,function(hr){hr.save(),hr.scale(1/On,-1/Un),hr.translate(0,-Un),hr.fill(jr),hr.beginPath(),hr.restore()}}class Sn{constructor(On,Un){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=dn.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=dn.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=dn.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,On,Un])}clone(){const On=Object.create(this);return On.clipBox=this.clipBox.slice(),On}setCurrentPoint(On,Un){this.x=On,this.y=Un}updatePathMinMax(On,Un,Yn){[Un,Yn]=dn.Util.applyTransform([Un,Yn],On),this.minX=Math.min(this.minX,Un),this.minY=Math.min(this.minY,Yn),this.maxX=Math.max(this.maxX,Un),this.maxY=Math.max(this.maxY,Yn)}updateRectMinMax(On,Un){const Yn=dn.Util.applyTransform(Un,On),er=dn.Util.applyTransform(Un.slice(2),On);this.minX=Math.min(this.minX,Yn[0],er[0]),this.minY=Math.min(this.minY,Yn[1],er[1]),this.maxX=Math.max(this.maxX,Yn[0],er[0]),this.maxY=Math.max(this.maxY,Yn[1],er[1])}updateScalingPathMinMax(On,Un){dn.Util.scaleMinMax(On,Un),this.minX=Math.min(this.minX,Un[0]),this.maxX=Math.max(this.maxX,Un[1]),this.minY=Math.min(this.minY,Un[2]),this.maxY=Math.max(this.maxY,Un[3])}updateCurvePathMinMax(On,Un,Yn,er,Zn,ir,fr,br,Tr,Ir){const Mr=dn.Util.bezierBoundingBox(Un,Yn,er,Zn,ir,fr,br,Tr);if(Ir){Ir[0]=Math.min(Ir[0],Mr[0],Mr[2]),Ir[1]=Math.max(Ir[1],Mr[0],Mr[2]),Ir[2]=Math.min(Ir[2],Mr[1],Mr[3]),Ir[3]=Math.max(Ir[3],Mr[1],Mr[3]);return}this.updateRectMinMax(On,Mr)}getPathBoundingBox(On=fn.PathType.FILL,Un=null){const Yn=[this.minX,this.minY,this.maxX,this.maxY];if(On===fn.PathType.STROKE){Un||(0,dn.unreachable)("Stroke bounding box must include transform.");const er=dn.Util.singularValueDecompose2dScale(Un),Zn=er[0]*this.lineWidth/2,ir=er[1]*this.lineWidth/2;Yn[0]-=Zn,Yn[1]-=ir,Yn[2]+=Zn,Yn[3]+=ir}return Yn}updateClipFromPath(){const On=dn.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(On||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(On){this.clipBox=On,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(On=fn.PathType.FILL,Un=null){return dn.Util.intersect(this.clipBox,this.getPathBoundingBox(On,Un))}}function Dn(qn,On){if(typeof ImageData<"u"&&On instanceof ImageData){qn.putImageData(On,0,0);return}const Un=On.height,Yn=On.width,er=Un%vn,Zn=(Un-er)/vn,ir=er===0?Zn:Zn+1,fr=qn.createImageData(Yn,vn);let br=0,Tr;const Ir=On.data,Mr=fr.data;let qr,Ar,or,jr;if(On.kind===dn.ImageKind.GRAYSCALE_1BPP){const cr=Ir.byteLength,hr=new Uint32Array(Mr.buffer,0,Mr.byteLength>>2),wr=hr.length,Pr=Yn+7>>3,kr=4294967295,Hr=dn.FeatureTest.isLittleEndian?4278190080:255;for(qr=0;qr<ir;qr++){for(or=qr<Zn?vn:er,Tr=0,Ar=0;Ar<or;Ar++){const Kr=cr-br;let Nr=0;const ns=Kr>Pr?Yn:Kr*8-7,ts=ns&-8;let Ps=0,ps=0;for(;Nr<ts;Nr+=8)ps=Ir[br++],hr[Tr++]=ps&128?kr:Hr,hr[Tr++]=ps&64?kr:Hr,hr[Tr++]=ps&32?kr:Hr,hr[Tr++]=ps&16?kr:Hr,hr[Tr++]=ps&8?kr:Hr,hr[Tr++]=ps&4?kr:Hr,hr[Tr++]=ps&2?kr:Hr,hr[Tr++]=ps&1?kr:Hr;for(;Nr<ns;Nr++)Ps===0&&(ps=Ir[br++],Ps=128),hr[Tr++]=ps&Ps?kr:Hr,Ps>>=1}for(;Tr<wr;)hr[Tr++]=0;qn.putImageData(fr,0,qr*vn)}}else if(On.kind===dn.ImageKind.RGBA_32BPP){for(Ar=0,jr=Yn*vn*4,qr=0;qr<Zn;qr++)Mr.set(Ir.subarray(br,br+jr)),br+=jr,qn.putImageData(fr,0,Ar),Ar+=vn;qr<ir&&(jr=Yn*er*4,Mr.set(Ir.subarray(br,br+jr)),qn.putImageData(fr,0,Ar))}else if(On.kind===dn.ImageKind.RGB_24BPP)for(or=vn,jr=Yn*or,qr=0;qr<ir;qr++){for(qr>=Zn&&(or=er,jr=Yn*or),Tr=0,Ar=jr;Ar--;)Mr[Tr++]=Ir[br++],Mr[Tr++]=Ir[br++],Mr[Tr++]=Ir[br++],Mr[Tr++]=255;qn.putImageData(fr,0,qr*vn)}else throw new Error(`bad image kind: ${On.kind}`)}function $n(qn,On){if(On.bitmap){qn.drawImage(On.bitmap,0,0);return}const Un=On.height,Yn=On.width,er=Un%vn,Zn=(Un-er)/vn,ir=er===0?Zn:Zn+1,fr=qn.createImageData(Yn,vn);let br=0;const Tr=On.data,Ir=fr.data;for(let Mr=0;Mr<ir;Mr++){const qr=Mr<Zn?vn:er;({srcPos:br}=(0,pn.convertBlackAndWhiteToRGBA)({src:Tr,srcPos:br,dest:Ir,width:Yn,height:qr,nonBlackColor:0})),qn.putImageData(fr,0,Mr*vn)}}function Fn(qn,On){const Un=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Yn of Un)qn[Yn]!==void 0&&(On[Yn]=qn[Yn]);qn.setLineDash!==void 0&&(On.setLineDash(qn.getLineDash()),On.lineDashOffset=qn.lineDashOffset)}function Gn(qn){if(qn.strokeStyle=qn.fillStyle="#000000",qn.fillRule="nonzero",qn.globalAlpha=1,qn.lineWidth=1,qn.lineCap="butt",qn.lineJoin="miter",qn.miterLimit=10,qn.globalCompositeOperation="source-over",qn.font="10px sans-serif",qn.setLineDash!==void 0&&(qn.setLineDash([]),qn.lineDashOffset=0),!dn.isNodeJS){const{filter:On}=qn;On!=="none"&&On!==""&&(qn.filter="none")}}function kn(qn,On,Un,Yn){const er=qn.length;for(let Zn=3;Zn<er;Zn+=4){const ir=qn[Zn];if(ir===0)qn[Zn-3]=On,qn[Zn-2]=Un,qn[Zn-1]=Yn;else if(ir<255){const fr=255-ir;qn[Zn-3]=qn[Zn-3]*ir+On*fr>>8,qn[Zn-2]=qn[Zn-2]*ir+Un*fr>>8,qn[Zn-1]=qn[Zn-1]*ir+Yn*fr>>8}}}function Nn(qn,On,Un){const Yn=qn.length,er=1/255;for(let Zn=3;Zn<Yn;Zn+=4){const ir=Un?Un[qn[Zn]]:qn[Zn];On[Zn]=On[Zn]*ir*er|0}}function Ln(qn,On,Un){const Yn=qn.length;for(let er=3;er<Yn;er+=4){const Zn=qn[er-3]*77+qn[er-2]*152+qn[er-1]*28;On[er]=Un?On[er]*Un[Zn>>8]>>8:On[er]*Zn>>16}}function zn(qn,On,Un,Yn,er,Zn,ir,fr,br,Tr,Ir){const Mr=!!Zn,qr=Mr?Zn[0]:0,Ar=Mr?Zn[1]:0,or=Mr?Zn[2]:0,jr=er==="Luminosity"?Ln:Nn,hr=Math.min(Yn,Math.ceil(1048576/Un));for(let wr=0;wr<Yn;wr+=hr){const Pr=Math.min(hr,Yn-wr),kr=qn.getImageData(fr-Tr,wr+(br-Ir),Un,Pr),Hr=On.getImageData(fr,wr+br,Un,Pr);Mr&&kn(kr.data,qr,Ar,or),jr(kr.data,Hr.data,ir),On.putImageData(Hr,fr,wr+br)}}function Cn(qn,On,Un,Yn){const er=Yn[0],Zn=Yn[1],ir=Yn[2]-er,fr=Yn[3]-Zn;ir===0||fr===0||(zn(On.context,Un,ir,fr,On.subtype,On.backdrop,On.transferMap,er,Zn,On.offsetX,On.offsetY),qn.save(),qn.globalAlpha=1,qn.globalCompositeOperation="source-over",qn.setTransform(1,0,0,1,0,0),qn.drawImage(Un.canvas,0,0),qn.restore())}function Mn(qn,On){const Un=dn.Util.singularValueDecompose2dScale(qn);Un[0]=Math.fround(Un[0]),Un[1]=Math.fround(Un[1]);const Yn=Math.fround((globalThis.devicePixelRatio||1)*hn.PixelsPerInch.PDF_TO_CSS_UNITS);return On!==void 0?On:Un[0]<=Yn||Un[1]<=Yn}const Bn=["butt","round","square"],Xn=["miter","round","bevel"],nr={},sr={},gr=class gr{constructor(On,Un,Yn,er,Zn,{optionalContentConfig:ir,markedContentStack:fr=null},br,Tr){Br(this,tr);this.ctx=On,this.current=new Sn(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Un,this.objs=Yn,this.canvasFactory=er,this.filterFactory=Zn,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=fr||[],this.optionalContentConfig=ir,this.cachedCanvases=new Tn(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=br,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Tr,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(On,Un=null){return typeof On=="string"?On.startsWith("g_")?this.commonObjs.get(On):this.objs.get(On):Un}beginDrawing({transform:On,viewport:Un,transparency:Yn=!1,background:er=null}){const Zn=this.ctx.canvas.width,ir=this.ctx.canvas.height,fr=this.ctx.fillStyle;if(this.ctx.fillStyle=er||"#ffffff",this.ctx.fillRect(0,0,Zn,ir),this.ctx.fillStyle=fr,Yn){const br=this.cachedCanvases.getCanvas("transparent",Zn,ir);this.compositeCtx=this.ctx,this.transparentCanvas=br.canvas,this.ctx=br.context,this.ctx.save(),this.ctx.transform(...(0,hn.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Gn(this.ctx),On&&(this.ctx.transform(...On),this.outputScaleX=On[0],this.outputScaleY=On[0]),this.ctx.transform(...Un.transform),this.viewportScale=Un.scale,this.baseTransform=(0,hn.getCurrentTransform)(this.ctx)}executeOperatorList(On,Un,Yn,er){const Zn=On.argsArray,ir=On.fnArray;let fr=Un||0;const br=Zn.length;if(br===fr)return fr;const Tr=br-fr>En&&typeof Yn=="function",Ir=Tr?Date.now()+xn:0;let Mr=0;const qr=this.commonObjs,Ar=this.objs;let or;for(;;){if(er!==void 0&&fr===er.nextBreakPoint)return er.breakIt(fr,Yn),fr;if(or=ir[fr],or!==dn.OPS.dependency)this[or].apply(this,Zn[fr]);else for(const jr of Zn[fr]){const cr=jr.startsWith("g_")?qr:Ar;if(!cr.has(jr))return cr.get(jr,Yn),fr}if(fr++,fr===br)return fr;if(Tr&&++Mr>En){if(Date.now()>Ir)return Yn(),fr;Mr=0}}}endDrawing(){Or(this,tr,U0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const On of this._cachedBitmapsMap.values()){for(const Un of On.values())typeof HTMLCanvasElement<"u"&&Un instanceof HTMLCanvasElement&&(Un.width=Un.height=0);On.clear()}this._cachedBitmapsMap.clear(),Or(this,tr,z0).call(this)}_scaleImage(On,Un){const Yn=On.width,er=On.height;let Zn=Math.max(Math.hypot(Un[0],Un[1]),1),ir=Math.max(Math.hypot(Un[2],Un[3]),1),fr=Yn,br=er,Tr="prescale1",Ir,Mr;for(;Zn>2&&fr>1||ir>2&&br>1;){let qr=fr,Ar=br;Zn>2&&fr>1&&(qr=fr>=16384?Math.floor(fr/2)-1||1:Math.ceil(fr/2),Zn/=fr/qr),ir>2&&br>1&&(Ar=br>=16384?Math.floor(br/2)-1||1:Math.ceil(br)/2,ir/=br/Ar),Ir=this.cachedCanvases.getCanvas(Tr,qr,Ar),Mr=Ir.context,Mr.clearRect(0,0,qr,Ar),Mr.drawImage(On,0,0,fr,br,0,0,qr,Ar),On=Ir.canvas,fr=qr,br=Ar,Tr=Tr==="prescale1"?"prescale2":"prescale1"}return{img:On,paintWidth:fr,paintHeight:br}}_createMaskCanvas(On){const Un=this.ctx,{width:Yn,height:er}=On,Zn=this.current.fillColor,ir=this.current.patternFill,fr=(0,hn.getCurrentTransform)(Un);let br,Tr,Ir,Mr;if((On.bitmap||On.data)&&On.count>1){const Nr=On.bitmap||On.data.buffer;Tr=JSON.stringify(ir?fr:[fr.slice(0,4),Zn]),br=this._cachedBitmapsMap.get(Nr),br||(br=new Map,this._cachedBitmapsMap.set(Nr,br));const ns=br.get(Tr);if(ns&&!ir){const ts=Math.round(Math.min(fr[0],fr[2])+fr[4]),Ps=Math.round(Math.min(fr[1],fr[3])+fr[5]);return{canvas:ns,offsetX:ts,offsetY:Ps}}Ir=ns}Ir||(Mr=this.cachedCanvases.getCanvas("maskCanvas",Yn,er),$n(Mr.context,On));let qr=dn.Util.transform(fr,[1/Yn,0,0,-1/er,0,0]);qr=dn.Util.transform(qr,[1,0,0,1,0,-er]);const Ar=dn.Util.applyTransform([0,0],qr),or=dn.Util.applyTransform([Yn,er],qr),jr=dn.Util.normalizeRect([Ar[0],Ar[1],or[0],or[1]]),cr=Math.round(jr[2]-jr[0])||1,hr=Math.round(jr[3]-jr[1])||1,wr=this.cachedCanvases.getCanvas("fillCanvas",cr,hr),Pr=wr.context,kr=Math.min(Ar[0],or[0]),Hr=Math.min(Ar[1],or[1]);Pr.translate(-kr,-Hr),Pr.transform(...qr),Ir||(Ir=this._scaleImage(Mr.canvas,(0,hn.getCurrentTransformInverse)(Pr)),Ir=Ir.img,br&&ir&&br.set(Tr,Ir)),Pr.imageSmoothingEnabled=Mn((0,hn.getCurrentTransform)(Pr),On.interpolate),In(Pr,Ir,0,0,Ir.width,Ir.height,0,0,Yn,er),Pr.globalCompositeOperation="source-in";const Kr=dn.Util.transform((0,hn.getCurrentTransformInverse)(Pr),[1,0,0,1,-kr,-Hr]);return Pr.fillStyle=ir?Zn.getPattern(Un,this,Kr,fn.PathType.FILL):Zn,Pr.fillRect(0,0,Yn,er),br&&!ir&&(this.cachedCanvases.delete("fillCanvas"),br.set(Tr,wr.canvas)),{canvas:wr.canvas,offsetX:Math.round(kr),offsetY:Math.round(Hr)}}setLineWidth(On){On!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=On,this.ctx.lineWidth=On}setLineCap(On){this.ctx.lineCap=Bn[On]}setLineJoin(On){this.ctx.lineJoin=Xn[On]}setMiterLimit(On){this.ctx.miterLimit=On}setDash(On,Un){const Yn=this.ctx;Yn.setLineDash!==void 0&&(Yn.setLineDash(On),Yn.lineDashOffset=Un)}setRenderingIntent(On){}setFlatness(On){}setGState(On){for(const[Un,Yn]of On)switch(Un){case"LW":this.setLineWidth(Yn);break;case"LC":this.setLineCap(Yn);break;case"LJ":this.setLineJoin(Yn);break;case"ML":this.setMiterLimit(Yn);break;case"D":this.setDash(Yn[0],Yn[1]);break;case"RI":this.setRenderingIntent(Yn);break;case"FL":this.setFlatness(Yn);break;case"Font":this.setFont(Yn[0],Yn[1]);break;case"CA":this.current.strokeAlpha=Yn;break;case"ca":this.current.fillAlpha=Yn,this.ctx.globalAlpha=Yn;break;case"BM":this.ctx.globalCompositeOperation=Yn;break;case"SMask":this.current.activeSMask=Yn?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Yn);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const On=this.inSMaskMode;this.current.activeSMask&&!On?this.beginSMaskMode():!this.current.activeSMask&&On&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const On=this.ctx.canvas.width,Un=this.ctx.canvas.height,Yn="smaskGroupAt"+this.groupLevel,er=this.cachedCanvases.getCanvas(Yn,On,Un);this.suspendedCtx=this.ctx,this.ctx=er.context;const Zn=this.ctx;Zn.setTransform(...(0,hn.getCurrentTransform)(this.suspendedCtx)),Fn(this.suspendedCtx,Zn),Pn(Zn,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(On){if(!this.current.activeSMask)return;On?(On[0]=Math.floor(On[0]),On[1]=Math.floor(On[1]),On[2]=Math.ceil(On[2]),On[3]=Math.ceil(On[3])):On=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Un=this.current.activeSMask,Yn=this.suspendedCtx;Cn(Yn,Un,this.ctx,On),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Fn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const On=this.current;this.stateStack.push(On),this.current=On.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Fn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(On,Un,Yn,er,Zn,ir){this.ctx.transform(On,Un,Yn,er,Zn,ir),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(On,Un,Yn){const er=this.ctx,Zn=this.current;let ir=Zn.x,fr=Zn.y,br,Tr;const Ir=(0,hn.getCurrentTransform)(er),Mr=Ir[0]===0&&Ir[3]===0||Ir[1]===0&&Ir[2]===0,qr=Mr?Yn.slice(0):null;for(let Ar=0,or=0,jr=On.length;Ar<jr;Ar++)switch(On[Ar]|0){case dn.OPS.rectangle:ir=Un[or++],fr=Un[or++];const cr=Un[or++],hr=Un[or++],wr=ir+cr,Pr=fr+hr;er.moveTo(ir,fr),cr===0||hr===0?er.lineTo(wr,Pr):(er.lineTo(wr,fr),er.lineTo(wr,Pr),er.lineTo(ir,Pr)),Mr||Zn.updateRectMinMax(Ir,[ir,fr,wr,Pr]),er.closePath();break;case dn.OPS.moveTo:ir=Un[or++],fr=Un[or++],er.moveTo(ir,fr),Mr||Zn.updatePathMinMax(Ir,ir,fr);break;case dn.OPS.lineTo:ir=Un[or++],fr=Un[or++],er.lineTo(ir,fr),Mr||Zn.updatePathMinMax(Ir,ir,fr);break;case dn.OPS.curveTo:br=ir,Tr=fr,ir=Un[or+4],fr=Un[or+5],er.bezierCurveTo(Un[or],Un[or+1],Un[or+2],Un[or+3],ir,fr),Zn.updateCurvePathMinMax(Ir,br,Tr,Un[or],Un[or+1],Un[or+2],Un[or+3],ir,fr,qr),or+=6;break;case dn.OPS.curveTo2:br=ir,Tr=fr,er.bezierCurveTo(ir,fr,Un[or],Un[or+1],Un[or+2],Un[or+3]),Zn.updateCurvePathMinMax(Ir,br,Tr,ir,fr,Un[or],Un[or+1],Un[or+2],Un[or+3],qr),ir=Un[or+2],fr=Un[or+3],or+=4;break;case dn.OPS.curveTo3:br=ir,Tr=fr,ir=Un[or+2],fr=Un[or+3],er.bezierCurveTo(Un[or],Un[or+1],ir,fr,ir,fr),Zn.updateCurvePathMinMax(Ir,br,Tr,Un[or],Un[or+1],ir,fr,ir,fr,qr),or+=4;break;case dn.OPS.closePath:er.closePath();break}Mr&&Zn.updateScalingPathMinMax(Ir,qr),Zn.setCurrentPoint(ir,fr)}closePath(){this.ctx.closePath()}stroke(On=!0){const Un=this.ctx,Yn=this.current.strokeColor;Un.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Yn=="object"&&(Yn!=null&&Yn.getPattern)?(Un.save(),Un.strokeStyle=Yn.getPattern(Un,this,(0,hn.getCurrentTransformInverse)(Un),fn.PathType.STROKE),this.rescaleAndStroke(!1),Un.restore()):this.rescaleAndStroke(!0)),On&&this.consumePath(this.current.getClippedPathBoundingBox()),Un.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(On=!0){const Un=this.ctx,Yn=this.current.fillColor,er=this.current.patternFill;let Zn=!1;er&&(Un.save(),Un.fillStyle=Yn.getPattern(Un,this,(0,hn.getCurrentTransformInverse)(Un),fn.PathType.FILL),Zn=!0);const ir=this.current.getClippedPathBoundingBox();this.contentVisible&&ir!==null&&(this.pendingEOFill?(Un.fill("evenodd"),this.pendingEOFill=!1):Un.fill()),Zn&&Un.restore(),On&&this.consumePath(ir)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=nr}eoClip(){this.pendingClip=sr}beginText(){this.current.textMatrix=dn.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const On=this.pendingTextPaths,Un=this.ctx;if(On===void 0){Un.beginPath();return}Un.save(),Un.beginPath();for(const Yn of On)Un.setTransform(...Yn.transform),Un.translate(Yn.x,Yn.y),Yn.addToPath(Un,Yn.fontSize);Un.restore(),Un.clip(),Un.beginPath(),delete this.pendingTextPaths}setCharSpacing(On){this.current.charSpacing=On}setWordSpacing(On){this.current.wordSpacing=On}setHScale(On){this.current.textHScale=On/100}setLeading(On){this.current.leading=-On}setFont(On,Un){var Ir;const Yn=this.commonObjs.get(On),er=this.current;if(!Yn)throw new Error(`Can't find font for ${On}`);if(er.fontMatrix=Yn.fontMatrix||dn.FONT_IDENTITY_MATRIX,(er.fontMatrix[0]===0||er.fontMatrix[3]===0)&&(0,dn.warn)("Invalid font matrix for font "+On),Un<0?(Un=-Un,er.fontDirection=-1):er.fontDirection=1,this.current.font=Yn,this.current.fontSize=Un,Yn.isType3Font)return;const Zn=Yn.loadedName||"sans-serif",ir=((Ir=Yn.systemFontInfo)==null?void 0:Ir.css)||`"${Zn}", ${Yn.fallbackName}`;let fr="normal";Yn.black?fr="900":Yn.bold&&(fr="bold");const br=Yn.italic?"italic":"normal";let Tr=Un;Un<mn?Tr=mn:Un>gn&&(Tr=gn),this.current.fontSizeScale=Un/Tr,this.ctx.font=`${br} ${fr} ${Tr}px ${ir}`}setTextRenderingMode(On){this.current.textRenderingMode=On}setTextRise(On){this.current.textRise=On}moveText(On,Un){this.current.x=this.current.lineX+=On,this.current.y=this.current.lineY+=Un}setLeadingMoveText(On,Un){this.setLeading(-Un),this.moveText(On,Un)}setTextMatrix(On,Un,Yn,er,Zn,ir){this.current.textMatrix=[On,Un,Yn,er,Zn,ir],this.current.textMatrixScale=Math.hypot(On,Un),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(On,Un,Yn,er){const Zn=this.ctx,ir=this.current,fr=ir.font,br=ir.textRenderingMode,Tr=ir.fontSize/ir.fontSizeScale,Ir=br&dn.TextRenderingMode.FILL_STROKE_MASK,Mr=!!(br&dn.TextRenderingMode.ADD_TO_PATH_FLAG),qr=ir.patternFill&&!fr.missingFile;let Ar;(fr.disableFontFace||Mr||qr)&&(Ar=fr.getPathGenerator(this.commonObjs,On)),fr.disableFontFace||qr?(Zn.save(),Zn.translate(Un,Yn),Zn.beginPath(),Ar(Zn,Tr),er&&Zn.setTransform(...er),(Ir===dn.TextRenderingMode.FILL||Ir===dn.TextRenderingMode.FILL_STROKE)&&Zn.fill(),(Ir===dn.TextRenderingMode.STROKE||Ir===dn.TextRenderingMode.FILL_STROKE)&&Zn.stroke(),Zn.restore()):((Ir===dn.TextRenderingMode.FILL||Ir===dn.TextRenderingMode.FILL_STROKE)&&Zn.fillText(On,Un,Yn),(Ir===dn.TextRenderingMode.STROKE||Ir===dn.TextRenderingMode.FILL_STROKE)&&Zn.strokeText(On,Un,Yn)),Mr&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,hn.getCurrentTransform)(Zn),x:Un,y:Yn,fontSize:Tr,addToPath:Ar})}get isFontSubpixelAAEnabled(){const{context:On}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);On.scale(1.5,1),On.fillText("I",0,10);const Un=On.getImageData(0,0,10,10).data;let Yn=!1;for(let er=3;er<Un.length;er+=4)if(Un[er]>0&&Un[er]<255){Yn=!0;break}return(0,dn.shadow)(this,"isFontSubpixelAAEnabled",Yn)}showText(On){const Un=this.current,Yn=Un.font;if(Yn.isType3Font)return this.showType3Text(On);const er=Un.fontSize;if(er===0)return;const Zn=this.ctx,ir=Un.fontSizeScale,fr=Un.charSpacing,br=Un.wordSpacing,Tr=Un.fontDirection,Ir=Un.textHScale*Tr,Mr=On.length,qr=Yn.vertical,Ar=qr?1:-1,or=Yn.defaultVMetrics,jr=er*Un.fontMatrix[0],cr=Un.textRenderingMode===dn.TextRenderingMode.FILL&&!Yn.disableFontFace&&!Un.patternFill;Zn.save(),Zn.transform(...Un.textMatrix),Zn.translate(Un.x,Un.y+Un.textRise),Tr>0?Zn.scale(Ir,-1):Zn.scale(Ir,1);let hr;if(Un.patternFill){Zn.save();const Kr=Un.fillColor.getPattern(Zn,this,(0,hn.getCurrentTransformInverse)(Zn),fn.PathType.FILL);hr=(0,hn.getCurrentTransform)(Zn),Zn.restore(),Zn.fillStyle=Kr}let wr=Un.lineWidth;const Pr=Un.textMatrixScale;if(Pr===0||wr===0){const Kr=Un.textRenderingMode&dn.TextRenderingMode.FILL_STROKE_MASK;(Kr===dn.TextRenderingMode.STROKE||Kr===dn.TextRenderingMode.FILL_STROKE)&&(wr=this.getSinglePixelWidth())}else wr/=Pr;if(ir!==1&&(Zn.scale(ir,ir),wr/=ir),Zn.lineWidth=wr,Yn.isInvalidPDFjsFont){const Kr=[];let Nr=0;for(const ns of On)Kr.push(ns.unicode),Nr+=ns.width;Zn.fillText(Kr.join(""),0,0),Un.x+=Nr*jr*Ir,Zn.restore(),this.compose();return}let kr=0,Hr;for(Hr=0;Hr<Mr;++Hr){const Kr=On[Hr];if(typeof Kr=="number"){kr+=Ar*Kr*er/1e3;continue}let Nr=!1;const ns=(Kr.isSpace?br:0)+fr,ts=Kr.fontChar,Ps=Kr.accent;let ps,Cs,as=Kr.width;if(qr){const js=Kr.vmetric||or,Bs=-(Kr.vmetric?js[1]:as*.5)*jr,es=js[2]*jr;as=js?-js[0]:as,ps=Bs/ir,Cs=(kr+es)/ir}else ps=kr/ir,Cs=0;if(Yn.remeasure&&as>0){const js=Zn.measureText(ts).width*1e3/er*ir;if(as<js&&this.isFontSubpixelAAEnabled){const Bs=as/js;Nr=!0,Zn.save(),Zn.scale(Bs,1),ps/=Bs}else as!==js&&(ps+=(as-js)/2e3*er/ir)}if(this.contentVisible&&(Kr.isInFont||Yn.missingFile)){if(cr&&!Ps)Zn.fillText(ts,ps,Cs);else if(this.paintChar(ts,ps,Cs,hr),Ps){const js=ps+er*Ps.offset.x/ir,Bs=Cs-er*Ps.offset.y/ir;this.paintChar(Ps.fontChar,js,Bs,hr)}}const Ss=qr?as*jr-ns*Tr:as*jr+ns*Tr;kr+=Ss,Nr&&Zn.restore()}qr?Un.y-=kr:Un.x+=kr*Ir,Zn.restore(),this.compose()}showType3Text(On){const Un=this.ctx,Yn=this.current,er=Yn.font,Zn=Yn.fontSize,ir=Yn.fontDirection,fr=er.vertical?1:-1,br=Yn.charSpacing,Tr=Yn.wordSpacing,Ir=Yn.textHScale*ir,Mr=Yn.fontMatrix||dn.FONT_IDENTITY_MATRIX,qr=On.length,Ar=Yn.textRenderingMode===dn.TextRenderingMode.INVISIBLE;let or,jr,cr,hr;if(!(Ar||Zn===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Un.save(),Un.transform(...Yn.textMatrix),Un.translate(Yn.x,Yn.y),Un.scale(Ir,ir),or=0;or<qr;++or){if(jr=On[or],typeof jr=="number"){hr=fr*jr*Zn/1e3,this.ctx.translate(hr,0),Yn.x+=hr*Ir;continue}const wr=(jr.isSpace?Tr:0)+br,Pr=er.charProcOperatorList[jr.operatorListId];if(!Pr){(0,dn.warn)(`Type3 character "${jr.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=jr,this.save(),Un.scale(Zn,Zn),Un.transform(...Mr),this.executeOperatorList(Pr),this.restore()),cr=dn.Util.applyTransform([jr.width,0],Mr)[0]*Zn+wr,Un.translate(cr,0),Yn.x+=cr*Ir}Un.restore(),this.processingType3=null}}setCharWidth(On,Un){}setCharWidthAndBounds(On,Un,Yn,er,Zn,ir){this.ctx.rect(Yn,er,Zn-Yn,ir-er),this.ctx.clip(),this.endPath()}getColorN_Pattern(On){let Un;if(On[0]==="TilingPattern"){const Yn=On[1],er=this.baseTransform||(0,hn.getCurrentTransform)(this.ctx),Zn={createCanvasGraphics:ir=>new gr(ir,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Un=new fn.TilingPattern(On,Yn,this.ctx,Zn,er)}else Un=this._getPattern(On[1],On[2]);return Un}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(On,Un,Yn){const er=dn.Util.makeHexColor(On,Un,Yn);this.ctx.strokeStyle=er,this.current.strokeColor=er}setFillRGBColor(On,Un,Yn){const er=dn.Util.makeHexColor(On,Un,Yn);this.ctx.fillStyle=er,this.current.fillColor=er,this.current.patternFill=!1}_getPattern(On,Un=null){let Yn;return this.cachedPatterns.has(On)?Yn=this.cachedPatterns.get(On):(Yn=(0,fn.getShadingPattern)(this.getObject(On)),this.cachedPatterns.set(On,Yn)),Un&&(Yn.matrix=Un),Yn}shadingFill(On){if(!this.contentVisible)return;const Un=this.ctx;this.save();const Yn=this._getPattern(On);Un.fillStyle=Yn.getPattern(Un,this,(0,hn.getCurrentTransformInverse)(Un),fn.PathType.SHADING);const er=(0,hn.getCurrentTransformInverse)(Un);if(er){const{width:Zn,height:ir}=Un.canvas,[fr,br,Tr,Ir]=dn.Util.getAxialAlignedBoundingBox([0,0,Zn,ir],er);this.ctx.fillRect(fr,br,Tr-fr,Ir-br)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,dn.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,dn.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(On,Un){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(On)&&On.length===6&&this.transform(...On),this.baseTransform=(0,hn.getCurrentTransform)(this.ctx),Un)){const Yn=Un[2]-Un[0],er=Un[3]-Un[1];this.ctx.rect(Un[0],Un[1],Yn,er),this.current.updateRectMinMax((0,hn.getCurrentTransform)(this.ctx),Un),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(On){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Un=this.ctx;On.isolated||(0,dn.info)("TODO: Support non-isolated groups."),On.knockout&&(0,dn.warn)("Knockout groups not supported.");const Yn=(0,hn.getCurrentTransform)(Un);if(On.matrix&&Un.transform(...On.matrix),!On.bbox)throw new Error("Bounding box is required.");let er=dn.Util.getAxialAlignedBoundingBox(On.bbox,(0,hn.getCurrentTransform)(Un));const Zn=[0,0,Un.canvas.width,Un.canvas.height];er=dn.Util.intersect(er,Zn)||[0,0,0,0];const ir=Math.floor(er[0]),fr=Math.floor(er[1]);let br=Math.max(Math.ceil(er[2])-ir,1),Tr=Math.max(Math.ceil(er[3])-fr,1),Ir=1,Mr=1;br>yn&&(Ir=br/yn,br=yn),Tr>yn&&(Mr=Tr/yn,Tr=yn),this.current.startNewPathAndClipBox([0,0,br,Tr]);let qr="groupAt"+this.groupLevel;On.smask&&(qr+="_smask_"+this.smaskCounter++%2);const Ar=this.cachedCanvases.getCanvas(qr,br,Tr),or=Ar.context;or.scale(1/Ir,1/Mr),or.translate(-ir,-fr),or.transform(...Yn),On.smask?this.smaskStack.push({canvas:Ar.canvas,context:or,offsetX:ir,offsetY:fr,scaleX:Ir,scaleY:Mr,subtype:On.smask.subtype,backdrop:On.smask.backdrop,transferMap:On.smask.transferMap||null,startTransformInverse:null}):(Un.setTransform(1,0,0,1,0,0),Un.translate(ir,fr),Un.scale(Ir,Mr),Un.save()),Fn(Un,or),this.ctx=or,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Un),this.groupLevel++}endGroup(On){if(!this.contentVisible)return;this.groupLevel--;const Un=this.ctx,Yn=this.groupStack.pop();if(this.ctx=Yn,this.ctx.imageSmoothingEnabled=!1,On.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const er=(0,hn.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...er);const Zn=dn.Util.getAxialAlignedBoundingBox([0,0,Un.canvas.width,Un.canvas.height],er);this.ctx.drawImage(Un.canvas,0,0),this.ctx.restore(),this.compose(Zn)}}beginAnnotation(On,Un,Yn,er,Zn){if(Or(this,tr,U0).call(this),Gn(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Un)&&Un.length===4){const ir=Un[2]-Un[0],fr=Un[3]-Un[1];if(Zn&&this.annotationCanvasMap){Yn=Yn.slice(),Yn[4]-=Un[0],Yn[5]-=Un[1],Un=Un.slice(),Un[0]=Un[1]=0,Un[2]=ir,Un[3]=fr;const[br,Tr]=dn.Util.singularValueDecompose2dScale((0,hn.getCurrentTransform)(this.ctx)),{viewportScale:Ir}=this,Mr=Math.ceil(ir*this.outputScaleX*Ir),qr=Math.ceil(fr*this.outputScaleY*Ir);this.annotationCanvas=this.canvasFactory.create(Mr,qr);const{canvas:Ar,context:or}=this.annotationCanvas;this.annotationCanvasMap.set(On,Ar),this.annotationCanvas.savedCtx=this.ctx,this.ctx=or,this.ctx.save(),this.ctx.setTransform(br,0,0,-Tr,0,fr*Tr),Gn(this.ctx)}else Gn(this.ctx),this.ctx.rect(Un[0],Un[1],ir,fr),this.ctx.clip(),this.endPath()}this.current=new Sn(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Yn),this.transform(...er)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Or(this,tr,z0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(On){if(!this.contentVisible)return;const Un=On.count;On=this.getObject(On.data,On),On.count=Un;const Yn=this.ctx,er=this.processingType3;if(er&&(er.compiled===void 0&&(er.compiled=Rn(On)),er.compiled)){er.compiled(Yn);return}const Zn=this._createMaskCanvas(On),ir=Zn.canvas;Yn.save(),Yn.setTransform(1,0,0,1,0,0),Yn.drawImage(ir,Zn.offsetX,Zn.offsetY),Yn.restore(),this.compose()}paintImageMaskXObjectRepeat(On,Un,Yn=0,er=0,Zn,ir){if(!this.contentVisible)return;On=this.getObject(On.data,On);const fr=this.ctx;fr.save();const br=(0,hn.getCurrentTransform)(fr);fr.transform(Un,Yn,er,Zn,0,0);const Tr=this._createMaskCanvas(On);fr.setTransform(1,0,0,1,Tr.offsetX-br[4],Tr.offsetY-br[5]);for(let Ir=0,Mr=ir.length;Ir<Mr;Ir+=2){const qr=dn.Util.transform(br,[Un,Yn,er,Zn,ir[Ir],ir[Ir+1]]),[Ar,or]=dn.Util.applyTransform([0,0],qr);fr.drawImage(Tr.canvas,Ar,or)}fr.restore(),this.compose()}paintImageMaskXObjectGroup(On){if(!this.contentVisible)return;const Un=this.ctx,Yn=this.current.fillColor,er=this.current.patternFill;for(const Zn of On){const{data:ir,width:fr,height:br,transform:Tr}=Zn,Ir=this.cachedCanvases.getCanvas("maskCanvas",fr,br),Mr=Ir.context;Mr.save();const qr=this.getObject(ir,Zn);$n(Mr,qr),Mr.globalCompositeOperation="source-in",Mr.fillStyle=er?Yn.getPattern(Mr,this,(0,hn.getCurrentTransformInverse)(Un),fn.PathType.FILL):Yn,Mr.fillRect(0,0,fr,br),Mr.restore(),Un.save(),Un.transform(...Tr),Un.scale(1,-1),In(Un,Ir.canvas,0,0,fr,br,0,-1,1,1),Un.restore()}this.compose()}paintImageXObject(On){if(!this.contentVisible)return;const Un=this.getObject(On);if(!Un){(0,dn.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Un)}paintImageXObjectRepeat(On,Un,Yn,er){if(!this.contentVisible)return;const Zn=this.getObject(On);if(!Zn){(0,dn.warn)("Dependent image isn't ready yet");return}const ir=Zn.width,fr=Zn.height,br=[];for(let Tr=0,Ir=er.length;Tr<Ir;Tr+=2)br.push({transform:[Un,0,0,Yn,er[Tr],er[Tr+1]],x:0,y:0,w:ir,h:fr});this.paintInlineImageXObjectGroup(Zn,br)}applyTransferMapsToCanvas(On){return this.current.transferMaps!=="none"&&(On.filter=this.current.transferMaps,On.drawImage(On.canvas,0,0),On.filter="none"),On.canvas}applyTransferMapsToBitmap(On){if(this.current.transferMaps==="none")return On.bitmap;const{bitmap:Un,width:Yn,height:er}=On,Zn=this.cachedCanvases.getCanvas("inlineImage",Yn,er),ir=Zn.context;return ir.filter=this.current.transferMaps,ir.drawImage(Un,0,0),ir.filter="none",Zn.canvas}paintInlineImageXObject(On){if(!this.contentVisible)return;const Un=On.width,Yn=On.height,er=this.ctx;if(this.save(),!dn.isNodeJS){const{filter:fr}=er;fr!=="none"&&fr!==""&&(er.filter="none")}er.scale(1/Un,-1/Yn);let Zn;if(On.bitmap)Zn=this.applyTransferMapsToBitmap(On);else if(typeof HTMLElement=="function"&&On instanceof HTMLElement||!On.data)Zn=On;else{const br=this.cachedCanvases.getCanvas("inlineImage",Un,Yn).context;Dn(br,On),Zn=this.applyTransferMapsToCanvas(br)}const ir=this._scaleImage(Zn,(0,hn.getCurrentTransformInverse)(er));er.imageSmoothingEnabled=Mn((0,hn.getCurrentTransform)(er),On.interpolate),In(er,ir.img,0,0,ir.paintWidth,ir.paintHeight,0,-Yn,Un,Yn),this.compose(),this.restore()}paintInlineImageXObjectGroup(On,Un){if(!this.contentVisible)return;const Yn=this.ctx;let er;if(On.bitmap)er=On.bitmap;else{const Zn=On.width,ir=On.height,br=this.cachedCanvases.getCanvas("inlineImage",Zn,ir).context;Dn(br,On),er=this.applyTransferMapsToCanvas(br)}for(const Zn of Un)Yn.save(),Yn.transform(...Zn.transform),Yn.scale(1,-1),In(Yn,er,Zn.x,Zn.y,Zn.w,Zn.h,0,-1,1,1),Yn.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(On){}markPointProps(On,Un){}beginMarkedContent(On){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(On,Un){On==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Un)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(On){const Un=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(On);const Yn=this.ctx;this.pendingClip&&(Un||(this.pendingClip===sr?Yn.clip("evenodd"):Yn.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Yn.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const On=(0,hn.getCurrentTransform)(this.ctx);if(On[1]===0&&On[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(On[0]),Math.abs(On[3]));else{const Un=Math.abs(On[0]*On[3]-On[2]*On[1]),Yn=Math.hypot(On[0],On[2]),er=Math.hypot(On[1],On[3]);this._cachedGetSinglePixelWidth=Math.max(Yn,er)/Un}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:On}=this.current,{a:Un,b:Yn,c:er,d:Zn}=this.ctx.getTransform();let ir,fr;if(Yn===0&&er===0){const br=Math.abs(Un),Tr=Math.abs(Zn);if(br===Tr)if(On===0)ir=fr=1/br;else{const Ir=br*On;ir=fr=Ir<1?1/Ir:1}else if(On===0)ir=1/br,fr=1/Tr;else{const Ir=br*On,Mr=Tr*On;ir=Ir<1?1/Ir:1,fr=Mr<1?1/Mr:1}}else{const br=Math.abs(Un*Zn-Yn*er),Tr=Math.hypot(Un,Yn),Ir=Math.hypot(er,Zn);if(On===0)ir=Ir/br,fr=Tr/br;else{const Mr=On*br;ir=Ir>Mr?Ir/Mr:1,fr=Tr>Mr?Tr/Mr:1}}this._cachedScaleForStroking[0]=ir,this._cachedScaleForStroking[1]=fr}return this._cachedScaleForStroking}rescaleAndStroke(On){const{ctx:Un}=this,{lineWidth:Yn}=this.current,[er,Zn]=this.getScaleForStroking();if(Un.lineWidth=Yn||1,er===1&&Zn===1){Un.stroke();return}const ir=Un.getLineDash();if(On&&Un.save(),Un.scale(er,Zn),ir.length>0){const fr=Math.max(er,Zn);Un.setLineDash(ir.map(br=>br/fr)),Un.lineDashOffset/=fr}Un.stroke(),On&&Un.restore()}isContentVisible(){for(let On=this.markedContentStack.length-1;On>=0;On--)if(!this.markedContentStack[On].visible)return!1;return!0}};tr=new WeakSet,U0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},z0=function(){if(this.pageColors){const On=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(On!=="none"){const Un=this.ctx.filter;this.ctx.filter=On,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Un}}};let lr=gr;e.CanvasGraphics=lr;for(const qn in dn.OPS)lr.prototype[qn]!==void 0&&(lr.prototype[dn.OPS[qn]]=lr.prototype[qn])},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=vn;var dn=un(1),hn=un(6);const fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=fn;function pn(Rn,Sn){if(!Sn)return;const Dn=Sn[2]-Sn[0],$n=Sn[3]-Sn[1],Fn=new Path2D;Fn.rect(Sn[0],Sn[1],Dn,$n),Rn.clip(Fn)}class mn{constructor(){this.constructor===mn&&(0,dn.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,dn.unreachable)("Abstract method `getPattern` called.")}}class gn extends mn{constructor(Sn){super(),this._type=Sn[1],this._bbox=Sn[2],this._colorStops=Sn[3],this._p0=Sn[4],this._p1=Sn[5],this._r0=Sn[6],this._r1=Sn[7],this.matrix=null}_createGradient(Sn){let Dn;this._type==="axial"?Dn=Sn.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Dn=Sn.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const $n of this._colorStops)Dn.addColorStop($n[0],$n[1]);return Dn}getPattern(Sn,Dn,$n,Fn){let Gn;if(Fn===fn.STROKE||Fn===fn.FILL){const kn=Dn.current.getClippedPathBoundingBox(Fn,(0,hn.getCurrentTransform)(Sn))||[0,0,0,0],Nn=Math.ceil(kn[2]-kn[0])||1,Ln=Math.ceil(kn[3]-kn[1])||1,zn=Dn.cachedCanvases.getCanvas("pattern",Nn,Ln,!0),Cn=zn.context;Cn.clearRect(0,0,Cn.canvas.width,Cn.canvas.height),Cn.beginPath(),Cn.rect(0,0,Cn.canvas.width,Cn.canvas.height),Cn.translate(-kn[0],-kn[1]),$n=dn.Util.transform($n,[1,0,0,1,kn[0],kn[1]]),Cn.transform(...Dn.baseTransform),this.matrix&&Cn.transform(...this.matrix),pn(Cn,this._bbox),Cn.fillStyle=this._createGradient(Cn),Cn.fill(),Gn=Sn.createPattern(zn.canvas,"no-repeat");const Mn=new DOMMatrix($n);Gn.setTransform(Mn)}else pn(Sn,this._bbox),Gn=this._createGradient(Sn);return Gn}}function yn(Rn,Sn,Dn,$n,Fn,Gn,kn,Nn){const Ln=Sn.coords,zn=Sn.colors,Cn=Rn.data,Mn=Rn.width*4;let Bn;Ln[Dn+1]>Ln[$n+1]&&(Bn=Dn,Dn=$n,$n=Bn,Bn=Gn,Gn=kn,kn=Bn),Ln[$n+1]>Ln[Fn+1]&&(Bn=$n,$n=Fn,Fn=Bn,Bn=kn,kn=Nn,Nn=Bn),Ln[Dn+1]>Ln[$n+1]&&(Bn=Dn,Dn=$n,$n=Bn,Bn=Gn,Gn=kn,kn=Bn);const Xn=(Ln[Dn]+Sn.offsetX)*Sn.scaleX,nr=(Ln[Dn+1]+Sn.offsetY)*Sn.scaleY,sr=(Ln[$n]+Sn.offsetX)*Sn.scaleX,lr=(Ln[$n+1]+Sn.offsetY)*Sn.scaleY,tr=(Ln[Fn]+Sn.offsetX)*Sn.scaleX,Jn=(Ln[Fn+1]+Sn.offsetY)*Sn.scaleY;if(nr>=Jn)return;const ar=zn[Gn],gr=zn[Gn+1],qn=zn[Gn+2],On=zn[kn],Un=zn[kn+1],Yn=zn[kn+2],er=zn[Nn],Zn=zn[Nn+1],ir=zn[Nn+2],fr=Math.round(nr),br=Math.round(Jn);let Tr,Ir,Mr,qr,Ar,or,jr,cr;for(let hr=fr;hr<=br;hr++){if(hr<lr){const Kr=hr<nr?0:(nr-hr)/(nr-lr);Tr=Xn-(Xn-sr)*Kr,Ir=ar-(ar-On)*Kr,Mr=gr-(gr-Un)*Kr,qr=qn-(qn-Yn)*Kr}else{let Kr;hr>Jn?Kr=1:lr===Jn?Kr=0:Kr=(lr-hr)/(lr-Jn),Tr=sr-(sr-tr)*Kr,Ir=On-(On-er)*Kr,Mr=Un-(Un-Zn)*Kr,qr=Yn-(Yn-ir)*Kr}let wr;hr<nr?wr=0:hr>Jn?wr=1:wr=(nr-hr)/(nr-Jn),Ar=Xn-(Xn-tr)*wr,or=ar-(ar-er)*wr,jr=gr-(gr-Zn)*wr,cr=qn-(qn-ir)*wr;const Pr=Math.round(Math.min(Tr,Ar)),kr=Math.round(Math.max(Tr,Ar));let Hr=Mn*hr+Pr*4;for(let Kr=Pr;Kr<=kr;Kr++)wr=(Tr-Kr)/(Tr-Ar),wr<0?wr=0:wr>1&&(wr=1),Cn[Hr++]=Ir-(Ir-or)*wr|0,Cn[Hr++]=Mr-(Mr-jr)*wr|0,Cn[Hr++]=qr-(qr-cr)*wr|0,Cn[Hr++]=255}}function xn(Rn,Sn,Dn){const $n=Sn.coords,Fn=Sn.colors;let Gn,kn;switch(Sn.type){case"lattice":const Nn=Sn.verticesPerRow,Ln=Math.floor($n.length/Nn)-1,zn=Nn-1;for(Gn=0;Gn<Ln;Gn++){let Cn=Gn*Nn;for(let Mn=0;Mn<zn;Mn++,Cn++)yn(Rn,Dn,$n[Cn],$n[Cn+1],$n[Cn+Nn],Fn[Cn],Fn[Cn+1],Fn[Cn+Nn]),yn(Rn,Dn,$n[Cn+Nn+1],$n[Cn+1],$n[Cn+Nn],Fn[Cn+Nn+1],Fn[Cn+1],Fn[Cn+Nn])}break;case"triangles":for(Gn=0,kn=$n.length;Gn<kn;Gn+=3)yn(Rn,Dn,$n[Gn],$n[Gn+1],$n[Gn+2],Fn[Gn],Fn[Gn+1],Fn[Gn+2]);break;default:throw new Error("illegal figure")}}class En extends mn{constructor(Sn){super(),this._coords=Sn[2],this._colors=Sn[3],this._figures=Sn[4],this._bounds=Sn[5],this._bbox=Sn[7],this._background=Sn[8],this.matrix=null}_createMeshCanvas(Sn,Dn,$n){const Nn=Math.floor(this._bounds[0]),Ln=Math.floor(this._bounds[1]),zn=Math.ceil(this._bounds[2])-Nn,Cn=Math.ceil(this._bounds[3])-Ln,Mn=Math.min(Math.ceil(Math.abs(zn*Sn[0]*1.1)),3e3),Bn=Math.min(Math.ceil(Math.abs(Cn*Sn[1]*1.1)),3e3),Xn=zn/Mn,nr=Cn/Bn,sr={coords:this._coords,colors:this._colors,offsetX:-Nn,offsetY:-Ln,scaleX:1/Xn,scaleY:1/nr},lr=Mn+2*2,tr=Bn+2*2,Jn=$n.getCanvas("mesh",lr,tr,!1),ar=Jn.context,gr=ar.createImageData(Mn,Bn);if(Dn){const On=gr.data;for(let Un=0,Yn=On.length;Un<Yn;Un+=4)On[Un]=Dn[0],On[Un+1]=Dn[1],On[Un+2]=Dn[2],On[Un+3]=255}for(const On of this._figures)xn(gr,On,sr);return ar.putImageData(gr,2,2),{canvas:Jn.canvas,offsetX:Nn-2*Xn,offsetY:Ln-2*nr,scaleX:Xn,scaleY:nr}}getPattern(Sn,Dn,$n,Fn){pn(Sn,this._bbox);let Gn;if(Fn===fn.SHADING)Gn=dn.Util.singularValueDecompose2dScale((0,hn.getCurrentTransform)(Sn));else if(Gn=dn.Util.singularValueDecompose2dScale(Dn.baseTransform),this.matrix){const Nn=dn.Util.singularValueDecompose2dScale(this.matrix);Gn=[Gn[0]*Nn[0],Gn[1]*Nn[1]]}const kn=this._createMeshCanvas(Gn,Fn===fn.SHADING?null:this._background,Dn.cachedCanvases);return Fn!==fn.SHADING&&(Sn.setTransform(...Dn.baseTransform),this.matrix&&Sn.transform(...this.matrix)),Sn.translate(kn.offsetX,kn.offsetY),Sn.scale(kn.scaleX,kn.scaleY),Sn.createPattern(kn.canvas,"no-repeat")}}class bn extends mn{getPattern(){return"hotpink"}}function vn(Rn){switch(Rn[0]){case"RadialAxial":return new gn(Rn);case"Mesh":return new En(Rn);case"Dummy":return new bn}throw new Error(`Unknown IR type: ${Rn[0]}`)}const Pn={COLORED:1,UNCOLORED:2},In=class In{constructor(Sn,Dn,$n,Fn,Gn){this.operatorList=Sn[2],this.matrix=Sn[3]||[1,0,0,1,0,0],this.bbox=Sn[4],this.xstep=Sn[5],this.ystep=Sn[6],this.paintType=Sn[7],this.tilingType=Sn[8],this.color=Dn,this.ctx=$n,this.canvasGraphicsFactory=Fn,this.baseTransform=Gn}createPatternCanvas(Sn){const Dn=this.operatorList,$n=this.bbox,Fn=this.xstep,Gn=this.ystep,kn=this.paintType,Nn=this.tilingType,Ln=this.color,zn=this.canvasGraphicsFactory;(0,dn.info)("TilingType: "+Nn);const Cn=$n[0],Mn=$n[1],Bn=$n[2],Xn=$n[3],nr=dn.Util.singularValueDecompose2dScale(this.matrix),sr=dn.Util.singularValueDecompose2dScale(this.baseTransform),lr=[nr[0]*sr[0],nr[1]*sr[1]],tr=this.getSizeAndScale(Fn,this.ctx.canvas.width,lr[0]),Jn=this.getSizeAndScale(Gn,this.ctx.canvas.height,lr[1]),ar=Sn.cachedCanvases.getCanvas("pattern",tr.size,Jn.size,!0),gr=ar.context,qn=zn.createCanvasGraphics(gr);qn.groupLevel=Sn.groupLevel,this.setFillAndStrokeStyleToContext(qn,kn,Ln);let On=Cn,Un=Mn,Yn=Bn,er=Xn;return Cn<0&&(On=0,Yn+=Math.abs(Cn)),Mn<0&&(Un=0,er+=Math.abs(Mn)),gr.translate(-(tr.scale*On),-(Jn.scale*Un)),qn.transform(tr.scale,0,0,Jn.scale,0,0),gr.save(),this.clipBbox(qn,On,Un,Yn,er),qn.baseTransform=(0,hn.getCurrentTransform)(qn.ctx),qn.executeOperatorList(Dn),qn.endDrawing(),{canvas:ar.canvas,scaleX:tr.scale,scaleY:Jn.scale,offsetX:On,offsetY:Un}}getSizeAndScale(Sn,Dn,$n){Sn=Math.abs(Sn);const Fn=Math.max(In.MAX_PATTERN_SIZE,Dn);let Gn=Math.ceil(Sn*$n);return Gn>=Fn?Gn=Fn:$n=Gn/Sn,{scale:$n,size:Gn}}clipBbox(Sn,Dn,$n,Fn,Gn){const kn=Fn-Dn,Nn=Gn-$n;Sn.ctx.rect(Dn,$n,kn,Nn),Sn.current.updateRectMinMax((0,hn.getCurrentTransform)(Sn.ctx),[Dn,$n,Fn,Gn]),Sn.clip(),Sn.endPath()}setFillAndStrokeStyleToContext(Sn,Dn,$n){const Fn=Sn.ctx,Gn=Sn.current;switch(Dn){case Pn.COLORED:const kn=this.ctx;Fn.fillStyle=kn.fillStyle,Fn.strokeStyle=kn.strokeStyle,Gn.fillColor=kn.fillStyle,Gn.strokeColor=kn.strokeStyle;break;case Pn.UNCOLORED:const Nn=dn.Util.makeHexColor($n[0],$n[1],$n[2]);Fn.fillStyle=Nn,Fn.strokeStyle=Nn,Gn.fillColor=Nn,Gn.strokeColor=Nn;break;default:throw new dn.FormatError(`Unsupported paint type: ${Dn}`)}}getPattern(Sn,Dn,$n,Fn){let Gn=$n;Fn!==fn.SHADING&&(Gn=dn.Util.transform(Gn,Dn.baseTransform),this.matrix&&(Gn=dn.Util.transform(Gn,this.matrix)));const kn=this.createPatternCanvas(Dn);let Nn=new DOMMatrix(Gn);Nn=Nn.translate(kn.offsetX,kn.offsetY),Nn=Nn.scale(1/kn.scaleX,1/kn.scaleY);const Ln=Sn.createPattern(kn.canvas,"repeat");return Ln.setTransform(Nn),Ln}};io(In,"MAX_PATTERN_SIZE",3e3);let Tn=In;e.TilingPattern=Tn},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=fn,e.convertToRGBA=hn,e.grayToRGBA=mn;var dn=un(1);function hn(gn){switch(gn.kind){case dn.ImageKind.GRAYSCALE_1BPP:return fn(gn);case dn.ImageKind.RGB_24BPP:return pn(gn)}return null}function fn({src:gn,srcPos:yn=0,dest:xn,width:En,height:bn,nonBlackColor:vn=4294967295,inverseDecode:Pn=!1}){const Tn=dn.FeatureTest.isLittleEndian?4278190080:255,[In,Rn]=Pn?[vn,Tn]:[Tn,vn],Sn=En>>3,Dn=En&7,$n=gn.length;xn=new Uint32Array(xn.buffer);let Fn=0;for(let Gn=0;Gn<bn;Gn++){for(const Nn=yn+Sn;yn<Nn;yn++){const Ln=yn<$n?gn[yn]:255;xn[Fn++]=Ln&128?Rn:In,xn[Fn++]=Ln&64?Rn:In,xn[Fn++]=Ln&32?Rn:In,xn[Fn++]=Ln&16?Rn:In,xn[Fn++]=Ln&8?Rn:In,xn[Fn++]=Ln&4?Rn:In,xn[Fn++]=Ln&2?Rn:In,xn[Fn++]=Ln&1?Rn:In}if(Dn===0)continue;const kn=yn<$n?gn[yn++]:255;for(let Nn=0;Nn<Dn;Nn++)xn[Fn++]=kn&1<<7-Nn?Rn:In}return{srcPos:yn,destPos:Fn}}function pn({src:gn,srcPos:yn=0,dest:xn,destPos:En=0,width:bn,height:vn}){let Pn=0;const Tn=gn.length>>2,In=new Uint32Array(gn.buffer,yn,Tn);if(dn.FeatureTest.isLittleEndian){for(;Pn<Tn-2;Pn+=3,En+=4){const Rn=In[Pn],Sn=In[Pn+1],Dn=In[Pn+2];xn[En]=Rn|4278190080,xn[En+1]=Rn>>>24|Sn<<8|4278190080,xn[En+2]=Sn>>>16|Dn<<16|4278190080,xn[En+3]=Dn>>>8|4278190080}for(let Rn=Pn*4,Sn=gn.length;Rn<Sn;Rn+=3)xn[En++]=gn[Rn]|gn[Rn+1]<<8|gn[Rn+2]<<16|4278190080}else{for(;Pn<Tn-2;Pn+=3,En+=4){const Rn=In[Pn],Sn=In[Pn+1],Dn=In[Pn+2];xn[En]=Rn|255,xn[En+1]=Rn<<24|Sn>>>8|255,xn[En+2]=Sn<<16|Dn>>>16|255,xn[En+3]=Dn<<8|255}for(let Rn=Pn*4,Sn=gn.length;Rn<Sn;Rn+=3)xn[En++]=gn[Rn]<<24|gn[Rn+1]<<16|gn[Rn+2]<<8|255}return{srcPos:yn,destPos:En}}function mn(gn,yn){if(dn.FeatureTest.isLittleEndian)for(let xn=0,En=gn.length;xn<En;xn++)yn[xn]=gn[xn]*65793|4278190080;else for(let xn=0,En=gn.length;xn<En;xn++)yn[xn]=gn[xn]*16843008|255}},(_e,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const un=Object.create(null);e.GlobalWorkerOptions=un,un.workerPort=null,un.workerSrc=""},(_e,e,un)=>{var gn,ex,tx,e0;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var dn=un(1);const hn={UNKNOWN:0,DATA:1,ERROR:2},fn={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function pn(bn){switch(bn instanceof Error||typeof bn=="object"&&bn!==null||(0,dn.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),bn.name){case"AbortException":return new dn.AbortException(bn.message);case"MissingPDFException":return new dn.MissingPDFException(bn.message);case"PasswordException":return new dn.PasswordException(bn.message,bn.code);case"UnexpectedResponseException":return new dn.UnexpectedResponseException(bn.message,bn.status);case"UnknownErrorException":return new dn.UnknownErrorException(bn.message,bn.details);default:return new dn.UnknownErrorException(bn.message,bn.toString())}}class mn{constructor(vn,Pn,Tn){Br(this,gn);this.sourceName=vn,this.targetName=Pn,this.comObj=Tn,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=In=>{const Rn=In.data;if(Rn.targetName!==this.sourceName)return;if(Rn.stream){Or(this,gn,tx).call(this,Rn);return}if(Rn.callback){const Dn=Rn.callbackId,$n=this.callbackCapabilities[Dn];if(!$n)throw new Error(`Cannot resolve callback ${Dn}`);if(delete this.callbackCapabilities[Dn],Rn.callback===hn.DATA)$n.resolve(Rn.data);else if(Rn.callback===hn.ERROR)$n.reject(pn(Rn.reason));else throw new Error("Unexpected callback case");return}const Sn=this.actionHandler[Rn.action];if(!Sn)throw new Error(`Unknown action from worker: ${Rn.action}`);if(Rn.callbackId){const Dn=this.sourceName,$n=Rn.sourceName;new Promise(function(Fn){Fn(Sn(Rn.data))}).then(function(Fn){Tn.postMessage({sourceName:Dn,targetName:$n,callback:hn.DATA,callbackId:Rn.callbackId,data:Fn})},function(Fn){Tn.postMessage({sourceName:Dn,targetName:$n,callback:hn.ERROR,callbackId:Rn.callbackId,reason:pn(Fn)})});return}if(Rn.streamId){Or(this,gn,ex).call(this,Rn);return}Sn(Rn.data)},Tn.addEventListener("message",this._onComObjOnMessage)}on(vn,Pn){const Tn=this.actionHandler;if(Tn[vn])throw new Error(`There is already an actionName called "${vn}"`);Tn[vn]=Pn}send(vn,Pn,Tn){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:vn,data:Pn},Tn)}sendWithPromise(vn,Pn,Tn){const In=this.callbackId++,Rn=new dn.PromiseCapability;this.callbackCapabilities[In]=Rn;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:vn,callbackId:In,data:Pn},Tn)}catch(Sn){Rn.reject(Sn)}return Rn.promise}sendWithStream(vn,Pn,Tn,In){const Rn=this.streamId++,Sn=this.sourceName,Dn=this.targetName,$n=this.comObj;return new ReadableStream({start:Fn=>{const Gn=new dn.PromiseCapability;return this.streamControllers[Rn]={controller:Fn,startCall:Gn,pullCall:null,cancelCall:null,isClosed:!1},$n.postMessage({sourceName:Sn,targetName:Dn,action:vn,streamId:Rn,data:Pn,desiredSize:Fn.desiredSize},In),Gn.promise},pull:Fn=>{const Gn=new dn.PromiseCapability;return this.streamControllers[Rn].pullCall=Gn,$n.postMessage({sourceName:Sn,targetName:Dn,stream:fn.PULL,streamId:Rn,desiredSize:Fn.desiredSize}),Gn.promise},cancel:Fn=>{(0,dn.assert)(Fn instanceof Error,"cancel must have a valid reason");const Gn=new dn.PromiseCapability;return this.streamControllers[Rn].cancelCall=Gn,this.streamControllers[Rn].isClosed=!0,$n.postMessage({sourceName:Sn,targetName:Dn,stream:fn.CANCEL,streamId:Rn,reason:pn(Fn)}),Gn.promise}},Tn)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}gn=new WeakSet,ex=function(vn){const Pn=vn.streamId,Tn=this.sourceName,In=vn.sourceName,Rn=this.comObj,Sn=this,Dn=this.actionHandler[vn.action],$n={enqueue(Fn,Gn=1,kn){if(this.isCancelled)return;const Nn=this.desiredSize;this.desiredSize-=Gn,Nn>0&&this.desiredSize<=0&&(this.sinkCapability=new dn.PromiseCapability,this.ready=this.sinkCapability.promise),Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.ENQUEUE,streamId:Pn,chunk:Fn},kn)},close(){this.isCancelled||(this.isCancelled=!0,Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.CLOSE,streamId:Pn}),delete Sn.streamSinks[Pn])},error(Fn){(0,dn.assert)(Fn instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.ERROR,streamId:Pn,reason:pn(Fn)}))},sinkCapability:new dn.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:vn.desiredSize,ready:null};$n.sinkCapability.resolve(),$n.ready=$n.sinkCapability.promise,this.streamSinks[Pn]=$n,new Promise(function(Fn){Fn(Dn(vn.data,$n))}).then(function(){Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.START_COMPLETE,streamId:Pn,success:!0})},function(Fn){Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.START_COMPLETE,streamId:Pn,reason:pn(Fn)})})},tx=function(vn){const Pn=vn.streamId,Tn=this.sourceName,In=vn.sourceName,Rn=this.comObj,Sn=this.streamControllers[Pn],Dn=this.streamSinks[Pn];switch(vn.stream){case fn.START_COMPLETE:vn.success?Sn.startCall.resolve():Sn.startCall.reject(pn(vn.reason));break;case fn.PULL_COMPLETE:vn.success?Sn.pullCall.resolve():Sn.pullCall.reject(pn(vn.reason));break;case fn.PULL:if(!Dn){Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.PULL_COMPLETE,streamId:Pn,success:!0});break}Dn.desiredSize<=0&&vn.desiredSize>0&&Dn.sinkCapability.resolve(),Dn.desiredSize=vn.desiredSize,new Promise(function($n){var Fn;$n((Fn=Dn.onPull)==null?void 0:Fn.call(Dn))}).then(function(){Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.PULL_COMPLETE,streamId:Pn,success:!0})},function($n){Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.PULL_COMPLETE,streamId:Pn,reason:pn($n)})});break;case fn.ENQUEUE:if((0,dn.assert)(Sn,"enqueue should have stream controller"),Sn.isClosed)break;Sn.controller.enqueue(vn.chunk);break;case fn.CLOSE:if((0,dn.assert)(Sn,"close should have stream controller"),Sn.isClosed)break;Sn.isClosed=!0,Sn.controller.close(),Or(this,gn,e0).call(this,Sn,Pn);break;case fn.ERROR:(0,dn.assert)(Sn,"error should have stream controller"),Sn.controller.error(pn(vn.reason)),Or(this,gn,e0).call(this,Sn,Pn);break;case fn.CANCEL_COMPLETE:vn.success?Sn.cancelCall.resolve():Sn.cancelCall.reject(pn(vn.reason)),Or(this,gn,e0).call(this,Sn,Pn);break;case fn.CANCEL:if(!Dn)break;new Promise(function($n){var Fn;$n((Fn=Dn.onCancel)==null?void 0:Fn.call(Dn,pn(vn.reason)))}).then(function(){Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.CANCEL_COMPLETE,streamId:Pn,success:!0})},function($n){Rn.postMessage({sourceName:Tn,targetName:In,stream:fn.CANCEL_COMPLETE,streamId:Pn,reason:pn($n)})}),Dn.sinkCapability.reject(pn(vn.reason)),Dn.isCancelled=!0,delete this.streamSinks[Pn];break;default:throw new Error("Unexpected stream case")}},e0=async function(vn,Pn){var Tn,In,Rn;await Promise.allSettled([(Tn=vn.startCall)==null?void 0:Tn.promise,(In=vn.pullCall)==null?void 0:In.promise,(Rn=vn.cancelCall)==null?void 0:Rn.promise]),delete this.streamControllers[Pn]},e.MessageHandler=mn},(_e,e,un)=>{var fn,pn;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var dn=un(1);class hn{constructor({parsedData:gn,rawData:yn}){Br(this,fn);Br(this,pn);Fr(this,fn,gn),Fr(this,pn,yn)}getRaw(){return Hn(this,pn)}get(gn){return Hn(this,fn).get(gn)??null}getAll(){return(0,dn.objectFromMap)(Hn(this,fn))}has(gn){return Hn(this,fn).has(gn)}}fn=new WeakMap,pn=new WeakMap,e.Metadata=hn},(_e,e,un)=>{var gn,yn,xn,En,bn,vn,q0;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var dn=un(1),hn=un(8);const fn=Symbol("INTERNAL");class pn{constructor(In,Rn){Br(this,gn,!0);this.name=In,this.intent=Rn}get visible(){return Hn(this,gn)}_setVisible(In,Rn){In!==fn&&(0,dn.unreachable)("Internal method `_setVisible` called."),Fr(this,gn,Rn)}}gn=new WeakMap;class mn{constructor(In){Br(this,vn);Br(this,yn,null);Br(this,xn,new Map);Br(this,En,null);Br(this,bn,null);if(this.name=null,this.creator=null,In!==null){this.name=In.name,this.creator=In.creator,Fr(this,bn,In.order);for(const Rn of In.groups)Hn(this,xn).set(Rn.id,new pn(Rn.name,Rn.intent));if(In.baseState==="OFF")for(const Rn of Hn(this,xn).values())Rn._setVisible(fn,!1);for(const Rn of In.on)Hn(this,xn).get(Rn)._setVisible(fn,!0);for(const Rn of In.off)Hn(this,xn).get(Rn)._setVisible(fn,!1);Fr(this,En,this.getHash())}}isVisible(In){if(Hn(this,xn).size===0)return!0;if(!In)return(0,dn.warn)("Optional content group not defined."),!0;if(In.type==="OCG")return Hn(this,xn).has(In.id)?Hn(this,xn).get(In.id).visible:((0,dn.warn)(`Optional content group not found: ${In.id}`),!0);if(In.type==="OCMD"){if(In.expression)return Or(this,vn,q0).call(this,In.expression);if(!In.policy||In.policy==="AnyOn"){for(const Rn of In.ids){if(!Hn(this,xn).has(Rn))return(0,dn.warn)(`Optional content group not found: ${Rn}`),!0;if(Hn(this,xn).get(Rn).visible)return!0}return!1}else if(In.policy==="AllOn"){for(const Rn of In.ids){if(!Hn(this,xn).has(Rn))return(0,dn.warn)(`Optional content group not found: ${Rn}`),!0;if(!Hn(this,xn).get(Rn).visible)return!1}return!0}else if(In.policy==="AnyOff"){for(const Rn of In.ids){if(!Hn(this,xn).has(Rn))return(0,dn.warn)(`Optional content group not found: ${Rn}`),!0;if(!Hn(this,xn).get(Rn).visible)return!0}return!1}else if(In.policy==="AllOff"){for(const Rn of In.ids){if(!Hn(this,xn).has(Rn))return(0,dn.warn)(`Optional content group not found: ${Rn}`),!0;if(Hn(this,xn).get(Rn).visible)return!1}return!0}return(0,dn.warn)(`Unknown optional content policy ${In.policy}.`),!0}return(0,dn.warn)(`Unknown group type ${In.type}.`),!0}setVisibility(In,Rn=!0){if(!Hn(this,xn).has(In)){(0,dn.warn)(`Optional content group not found: ${In}`);return}Hn(this,xn).get(In)._setVisible(fn,!!Rn),Fr(this,yn,null)}get hasInitialVisibility(){return Hn(this,En)===null||this.getHash()===Hn(this,En)}getOrder(){return Hn(this,xn).size?Hn(this,bn)?Hn(this,bn).slice():[...Hn(this,xn).keys()]:null}getGroups(){return Hn(this,xn).size>0?(0,dn.objectFromMap)(Hn(this,xn)):null}getGroup(In){return Hn(this,xn).get(In)||null}getHash(){if(Hn(this,yn)!==null)return Hn(this,yn);const In=new hn.MurmurHash3_64;for(const[Rn,Sn]of Hn(this,xn))In.update(`${Rn}:${Sn.visible}`);return Fr(this,yn,In.hexdigest())}}yn=new WeakMap,xn=new WeakMap,En=new WeakMap,bn=new WeakMap,vn=new WeakSet,q0=function(In){const Rn=In.length;if(Rn<2)return!0;const Sn=In[0];for(let Dn=1;Dn<Rn;Dn++){const $n=In[Dn];let Fn;if(Array.isArray($n))Fn=Or(this,vn,q0).call(this,$n);else if(Hn(this,xn).has($n))Fn=Hn(this,xn).get($n).visible;else return(0,dn.warn)(`Optional content group not found: ${$n}`),!0;switch(Sn){case"And":if(!Fn)return!1;break;case"Or":if(Fn)return!0;break;case"Not":return!Fn;default:return!0}}return Sn==="And"},e.OptionalContentConfig=mn},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var dn=un(1),hn=un(6);class fn{constructor({length:yn,initialData:xn,progressiveDone:En=!1,contentDispositionFilename:bn=null,disableRange:vn=!1,disableStream:Pn=!1},Tn){if((0,dn.assert)(Tn,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=En,this._contentDispositionFilename=bn,(xn==null?void 0:xn.length)>0){const In=xn instanceof Uint8Array&&xn.byteLength===xn.buffer.byteLength?xn.buffer:new Uint8Array(xn).buffer;this._queuedChunks.push(In)}this._pdfDataRangeTransport=Tn,this._isStreamingSupported=!Pn,this._isRangeSupported=!vn,this._contentLength=yn,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((In,Rn)=>{this._onReceiveData({begin:In,chunk:Rn})}),this._pdfDataRangeTransport.addProgressListener((In,Rn)=>{this._onProgress({loaded:In,total:Rn})}),this._pdfDataRangeTransport.addProgressiveReadListener(In=>{this._onReceiveData({chunk:In})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:yn,chunk:xn}){const En=xn instanceof Uint8Array&&xn.byteLength===xn.buffer.byteLength?xn.buffer:new Uint8Array(xn).buffer;if(yn===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(En):this._queuedChunks.push(En);else{const bn=this._rangeReaders.some(function(vn){return vn._begin!==yn?!1:(vn._enqueue(En),!0)});(0,dn.assert)(bn,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var yn;return((yn=this._fullRequestReader)==null?void 0:yn._loaded)??0}_onProgress(yn){var xn,En,bn,vn;yn.total===void 0?(En=(xn=this._rangeReaders[0])==null?void 0:xn.onProgress)==null||En.call(xn,{loaded:yn.loaded}):(vn=(bn=this._fullRequestReader)==null?void 0:bn.onProgress)==null||vn.call(bn,{loaded:yn.loaded,total:yn.total})}_onProgressiveDone(){var yn;(yn=this._fullRequestReader)==null||yn.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(yn){const xn=this._rangeReaders.indexOf(yn);xn>=0&&this._rangeReaders.splice(xn,1)}getFullReader(){(0,dn.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const yn=this._queuedChunks;return this._queuedChunks=null,new pn(this,yn,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(yn,xn){if(xn<=this._progressiveDataLength)return null;const En=new mn(this,yn,xn);return this._pdfDataRangeTransport.requestDataRange(yn,xn),this._rangeReaders.push(En),En}cancelAllRequests(yn){var xn;(xn=this._fullRequestReader)==null||xn.cancel(yn);for(const En of this._rangeReaders.slice(0))En.cancel(yn);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=fn;class pn{constructor(yn,xn,En=!1,bn=null){this._stream=yn,this._done=En||!1,this._filename=(0,hn.isPdfFile)(bn)?bn:null,this._queuedChunks=xn||[],this._loaded=0;for(const vn of this._queuedChunks)this._loaded+=vn.byteLength;this._requests=[],this._headersReady=Promise.resolve(),yn._fullRequestReader=this,this.onProgress=null}_enqueue(yn){this._done||(this._requests.length>0?this._requests.shift().resolve({value:yn,done:!1}):this._queuedChunks.push(yn),this._loaded+=yn.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const yn=new dn.PromiseCapability;return this._requests.push(yn),yn.promise}cancel(yn){this._done=!0;for(const xn of this._requests)xn.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mn{constructor(yn,xn,En){this._stream=yn,this._begin=xn,this._end=En,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(yn){if(!this._done){if(this._requests.length===0)this._queuedChunk=yn;else{this._requests.shift().resolve({value:yn,done:!1});for(const En of this._requests)En.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const xn=this._queuedChunk;return this._queuedChunk=null,{value:xn,done:!1}}if(this._done)return{value:void 0,done:!0};const yn=new dn.PromiseCapability;return this._requests.push(yn),yn.promise}cancel(yn){this._done=!0;for(const xn of this._requests)xn.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var dn=un(1),hn=un(20);function fn(En,bn,vn){return{method:"GET",headers:En,signal:vn.signal,mode:"cors",credentials:bn?"include":"same-origin",redirect:"follow"}}function pn(En){const bn=new Headers;for(const vn in En){const Pn=En[vn];Pn!==void 0&&bn.append(vn,Pn)}return bn}function mn(En){return En instanceof Uint8Array?En.buffer:En instanceof ArrayBuffer?En:((0,dn.warn)(`getArrayBuffer - unexpected data format: ${En}`),new Uint8Array(En).buffer)}class gn{constructor(bn){this.source=bn,this.isHttp=/^https?:/i.test(bn.url),this.httpHeaders=this.isHttp&&bn.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var bn;return((bn=this._fullRequestReader)==null?void 0:bn._loaded)??0}getFullReader(){return(0,dn.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new yn(this),this._fullRequestReader}getRangeReader(bn,vn){if(vn<=this._progressiveDataLength)return null;const Pn=new xn(this,bn,vn);return this._rangeRequestReaders.push(Pn),Pn}cancelAllRequests(bn){var vn;(vn=this._fullRequestReader)==null||vn.cancel(bn);for(const Pn of this._rangeRequestReaders.slice(0))Pn.cancel(bn)}}e.PDFFetchStream=gn;class yn{constructor(bn){this._stream=bn,this._reader=null,this._loaded=0,this._filename=null;const vn=bn.source;this._withCredentials=vn.withCredentials||!1,this._contentLength=vn.length,this._headersCapability=new dn.PromiseCapability,this._disableRange=vn.disableRange||!1,this._rangeChunkSize=vn.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!vn.disableStream,this._isRangeSupported=!vn.disableRange,this._headers=pn(this._stream.httpHeaders);const Pn=vn.url;fetch(Pn,fn(this._headers,this._withCredentials,this._abortController)).then(Tn=>{if(!(0,hn.validateResponseStatus)(Tn.status))throw(0,hn.createResponseStatusError)(Tn.status,Pn);this._reader=Tn.body.getReader(),this._headersCapability.resolve();const In=Dn=>Tn.headers.get(Dn),{allowRangeRequests:Rn,suggestedLength:Sn}=(0,hn.validateRangeRequestCapabilities)({getResponseHeader:In,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Rn,this._contentLength=Sn||this._contentLength,this._filename=(0,hn.extractFilenameFromHeader)(In),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new dn.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Pn;await this._headersCapability.promise;const{value:bn,done:vn}=await this._reader.read();return vn?{value:bn,done:vn}:(this._loaded+=bn.byteLength,(Pn=this.onProgress)==null||Pn.call(this,{loaded:this._loaded,total:this._contentLength}),{value:mn(bn),done:!1})}cancel(bn){var vn;(vn=this._reader)==null||vn.cancel(bn),this._abortController.abort()}}class xn{constructor(bn,vn,Pn){this._stream=bn,this._reader=null,this._loaded=0;const Tn=bn.source;this._withCredentials=Tn.withCredentials||!1,this._readCapability=new dn.PromiseCapability,this._isStreamingSupported=!Tn.disableStream,this._abortController=new AbortController,this._headers=pn(this._stream.httpHeaders),this._headers.append("Range",`bytes=${vn}-${Pn-1}`);const In=Tn.url;fetch(In,fn(this._headers,this._withCredentials,this._abortController)).then(Rn=>{if(!(0,hn.validateResponseStatus)(Rn.status))throw(0,hn.createResponseStatusError)(Rn.status,In);this._readCapability.resolve(),this._reader=Rn.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Pn;await this._readCapability.promise;const{value:bn,done:vn}=await this._reader.read();return vn?{value:bn,done:vn}:(this._loaded+=bn.byteLength,(Pn=this.onProgress)==null||Pn.call(this,{loaded:this._loaded}),{value:mn(bn),done:!1})}cancel(bn){var vn;(vn=this._reader)==null||vn.cancel(bn),this._abortController.abort()}}},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=gn,e.extractFilenameFromHeader=mn,e.validateRangeRequestCapabilities=pn,e.validateResponseStatus=yn;var dn=un(1),hn=un(21),fn=un(6);function pn({getResponseHeader:xn,isHttp:En,rangeChunkSize:bn,disableRange:vn}){const Pn={allowRangeRequests:!1,suggestedLength:void 0},Tn=parseInt(xn("Content-Length"),10);return!Number.isInteger(Tn)||(Pn.suggestedLength=Tn,Tn<=2*bn)||vn||!En||xn("Accept-Ranges")!=="bytes"||(xn("Content-Encoding")||"identity")!=="identity"||(Pn.allowRangeRequests=!0),Pn}function mn(xn){const En=xn("Content-Disposition");if(En){let bn=(0,hn.getFilenameFromContentDispositionHeader)(En);if(bn.includes("%"))try{bn=decodeURIComponent(bn)}catch{}if((0,fn.isPdfFile)(bn))return bn}return null}function gn(xn,En){return xn===404||xn===0&&En.startsWith("file:")?new dn.MissingPDFException('Missing PDF "'+En+'".'):new dn.UnexpectedResponseException(`Unexpected server response (${xn}) while retrieving PDF "${En}".`,xn)}function yn(xn){return xn===200||xn===206}},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=hn;var dn=un(1);function hn(fn){let pn=!0,mn=gn("filename\\*","i").exec(fn);if(mn){mn=mn[1];let Tn=bn(mn);return Tn=unescape(Tn),Tn=vn(Tn),Tn=Pn(Tn),xn(Tn)}if(mn=En(fn),mn){const Tn=Pn(mn);return xn(Tn)}if(mn=gn("filename","i").exec(fn),mn){mn=mn[1];let Tn=bn(mn);return Tn=Pn(Tn),xn(Tn)}function gn(Tn,In){return new RegExp("(?:^|;)\\s*"+Tn+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',In)}function yn(Tn,In){if(Tn){if(!/^[\x00-\xFF]+$/.test(In))return In;try{const Rn=new TextDecoder(Tn,{fatal:!0}),Sn=(0,dn.stringToBytes)(In);In=Rn.decode(Sn),pn=!1}catch{}}return In}function xn(Tn){return pn&&/[\x80-\xff]/.test(Tn)&&(Tn=yn("utf-8",Tn),pn&&(Tn=yn("iso-8859-1",Tn))),Tn}function En(Tn){const In=[];let Rn;const Sn=gn("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Rn=Sn.exec(Tn))!==null;){let[,$n,Fn,Gn]=Rn;if($n=parseInt($n,10),$n in In){if($n===0)break;continue}In[$n]=[Fn,Gn]}const Dn=[];for(let $n=0;$n<In.length&&$n in In;++$n){let[Fn,Gn]=In[$n];Gn=bn(Gn),Fn&&(Gn=unescape(Gn),$n===0&&(Gn=vn(Gn))),Dn.push(Gn)}return Dn.join("")}function bn(Tn){if(Tn.startsWith('"')){const In=Tn.slice(1).split('\\"');for(let Rn=0;Rn<In.length;++Rn){const Sn=In[Rn].indexOf('"');Sn!==-1&&(In[Rn]=In[Rn].slice(0,Sn),In.length=Rn+1),In[Rn]=In[Rn].replaceAll(/\\(.)/g,"$1")}Tn=In.join('"')}return Tn}function vn(Tn){const In=Tn.indexOf("'");if(In===-1)return Tn;const Rn=Tn.slice(0,In),Dn=Tn.slice(In+1).replace(/^[^']*'/,"");return yn(Rn,Dn)}function Pn(Tn){return!Tn.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Tn)?Tn:Tn.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(In,Rn,Sn,Dn){if(Sn==="q"||Sn==="Q")return Dn=Dn.replaceAll("_"," "),Dn=Dn.replaceAll(/=([0-9a-fA-F]{2})/g,function($n,Fn){return String.fromCharCode(parseInt(Fn,16))}),yn(Rn,Dn);try{Dn=atob(Dn)}catch{}return yn(Rn,Dn)})}return""}},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var dn=un(1),hn=un(20);const fn=200,pn=206;function mn(bn){const vn=bn.response;return typeof vn!="string"?vn:(0,dn.stringToBytes)(vn).buffer}class gn{constructor(vn,Pn={}){this.url=vn,this.isHttp=/^https?:/i.test(vn),this.httpHeaders=this.isHttp&&Pn.httpHeaders||Object.create(null),this.withCredentials=Pn.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(vn,Pn,Tn){const In={begin:vn,end:Pn};for(const Rn in Tn)In[Rn]=Tn[Rn];return this.request(In)}requestFull(vn){return this.request(vn)}request(vn){const Pn=new XMLHttpRequest,Tn=this.currXhrId++,In=this.pendingRequests[Tn]={xhr:Pn};Pn.open("GET",this.url),Pn.withCredentials=this.withCredentials;for(const Rn in this.httpHeaders){const Sn=this.httpHeaders[Rn];Sn!==void 0&&Pn.setRequestHeader(Rn,Sn)}return this.isHttp&&"begin"in vn&&"end"in vn?(Pn.setRequestHeader("Range",`bytes=${vn.begin}-${vn.end-1}`),In.expectedStatus=pn):In.expectedStatus=fn,Pn.responseType="arraybuffer",vn.onError&&(Pn.onerror=function(Rn){vn.onError(Pn.status)}),Pn.onreadystatechange=this.onStateChange.bind(this,Tn),Pn.onprogress=this.onProgress.bind(this,Tn),In.onHeadersReceived=vn.onHeadersReceived,In.onDone=vn.onDone,In.onError=vn.onError,In.onProgress=vn.onProgress,Pn.send(null),Tn}onProgress(vn,Pn){var In;const Tn=this.pendingRequests[vn];Tn&&((In=Tn.onProgress)==null||In.call(Tn,Pn))}onStateChange(vn,Pn){var $n,Fn,Gn;const Tn=this.pendingRequests[vn];if(!Tn)return;const In=Tn.xhr;if(In.readyState>=2&&Tn.onHeadersReceived&&(Tn.onHeadersReceived(),delete Tn.onHeadersReceived),In.readyState!==4||!(vn in this.pendingRequests))return;if(delete this.pendingRequests[vn],In.status===0&&this.isHttp){($n=Tn.onError)==null||$n.call(Tn,In.status);return}const Rn=In.status||fn;if(!(Rn===fn&&Tn.expectedStatus===pn)&&Rn!==Tn.expectedStatus){(Fn=Tn.onError)==null||Fn.call(Tn,In.status);return}const Dn=mn(In);if(Rn===pn){const kn=In.getResponseHeader("Content-Range"),Nn=/bytes (\d+)-(\d+)\/(\d+)/.exec(kn);Tn.onDone({begin:parseInt(Nn[1],10),chunk:Dn})}else Dn?Tn.onDone({begin:0,chunk:Dn}):(Gn=Tn.onError)==null||Gn.call(Tn,In.status)}getRequestXhr(vn){return this.pendingRequests[vn].xhr}isPendingRequest(vn){return vn in this.pendingRequests}abortRequest(vn){const Pn=this.pendingRequests[vn].xhr;delete this.pendingRequests[vn],Pn.abort()}}class yn{constructor(vn){this._source=vn,this._manager=new gn(vn.url,{httpHeaders:vn.httpHeaders,withCredentials:vn.withCredentials}),this._rangeChunkSize=vn.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(vn){const Pn=this._rangeRequestReaders.indexOf(vn);Pn>=0&&this._rangeRequestReaders.splice(Pn,1)}getFullReader(){return(0,dn.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xn(this._manager,this._source),this._fullRequestReader}getRangeReader(vn,Pn){const Tn=new En(this._manager,vn,Pn);return Tn.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(Tn),Tn}cancelAllRequests(vn){var Pn;(Pn=this._fullRequestReader)==null||Pn.cancel(vn);for(const Tn of this._rangeRequestReaders.slice(0))Tn.cancel(vn)}}e.PDFNetworkStream=yn;class xn{constructor(vn,Pn){this._manager=vn;const Tn={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Pn.url,this._fullRequestId=vn.requestFull(Tn),this._headersReceivedCapability=new dn.PromiseCapability,this._disableRange=Pn.disableRange||!1,this._contentLength=Pn.length,this._rangeChunkSize=Pn.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const vn=this._fullRequestId,Pn=this._manager.getRequestXhr(vn),Tn=Sn=>Pn.getResponseHeader(Sn),{allowRangeRequests:In,suggestedLength:Rn}=(0,hn.validateRangeRequestCapabilities)({getResponseHeader:Tn,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});In&&(this._isRangeSupported=!0),this._contentLength=Rn||this._contentLength,this._filename=(0,hn.extractFilenameFromHeader)(Tn),this._isRangeSupported&&this._manager.abortRequest(vn),this._headersReceivedCapability.resolve()}_onDone(vn){if(vn&&(this._requests.length>0?this._requests.shift().resolve({value:vn.chunk,done:!1}):this._cachedChunks.push(vn.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Pn of this._requests)Pn.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(vn){this._storedError=(0,hn.createResponseStatusError)(vn,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Pn of this._requests)Pn.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(vn){var Pn;(Pn=this.onProgress)==null||Pn.call(this,{loaded:vn.loaded,total:vn.lengthComputable?vn.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const vn=new dn.PromiseCapability;return this._requests.push(vn),vn.promise}cancel(vn){this._done=!0,this._headersReceivedCapability.reject(vn);for(const Pn of this._requests)Pn.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class En{constructor(vn,Pn,Tn){this._manager=vn;const In={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=vn.url,this._requestId=vn.requestRange(Pn,Tn,In),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var vn;(vn=this.onClosed)==null||vn.call(this,this)}_onDone(vn){const Pn=vn.chunk;this._requests.length>0?this._requests.shift().resolve({value:Pn,done:!1}):this._queuedChunk=Pn,this._done=!0;for(const Tn of this._requests)Tn.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(vn){this._storedError=(0,hn.createResponseStatusError)(vn,this._url);for(const Pn of this._requests)Pn.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(vn){var Pn;this.isStreamingSupported||(Pn=this.onProgress)==null||Pn.call(this,{loaded:vn.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Pn=this._queuedChunk;return this._queuedChunk=null,{value:Pn,done:!1}}if(this._done)return{value:void 0,done:!0};const vn=new dn.PromiseCapability;return this._requests.push(vn),vn.promise}cancel(vn){this._done=!0;for(const Pn of this._requests)Pn.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var dn=un(1),hn=un(20);const fn=/^file:\/\/\/[a-zA-Z]:\//;function pn(Tn){const In=require$$5,Rn=In.parse(Tn);return Rn.protocol==="file:"||Rn.host?Rn:/^[a-z]:[/\\]/i.test(Tn)?In.parse(`file:///${Tn}`):(Rn.host||(Rn.protocol="file:"),Rn)}class mn{constructor(In){this.source=In,this.url=pn(In.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&In.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var In;return((In=this._fullRequestReader)==null?void 0:In._loaded)??0}getFullReader(){return(0,dn.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new vn(this):new En(this),this._fullRequestReader}getRangeReader(In,Rn){if(Rn<=this._progressiveDataLength)return null;const Sn=this.isFsUrl?new Pn(this,In,Rn):new bn(this,In,Rn);return this._rangeRequestReaders.push(Sn),Sn}cancelAllRequests(In){var Rn;(Rn=this._fullRequestReader)==null||Rn.cancel(In);for(const Sn of this._rangeRequestReaders.slice(0))Sn.cancel(In)}}e.PDFNodeStream=mn;class gn{constructor(In){this._url=In.url,this._done=!1,this._storedError=null,this.onProgress=null;const Rn=In.source;this._contentLength=Rn.length,this._loaded=0,this._filename=null,this._disableRange=Rn.disableRange||!1,this._rangeChunkSize=Rn.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Rn.disableStream,this._isRangeSupported=!Rn.disableRange,this._readableStream=null,this._readCapability=new dn.PromiseCapability,this._headersCapability=new dn.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Sn;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const In=this._readableStream.read();return In===null?(this._readCapability=new dn.PromiseCapability,this.read()):(this._loaded+=In.length,(Sn=this.onProgress)==null||Sn.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(In).buffer,done:!1})}cancel(In){if(!this._readableStream){this._error(In);return}this._readableStream.destroy(In)}_error(In){this._storedError=In,this._readCapability.resolve()}_setReadableStream(In){this._readableStream=In,In.on("readable",()=>{this._readCapability.resolve()}),In.on("end",()=>{In.destroy(),this._done=!0,this._readCapability.resolve()}),In.on("error",Rn=>{this._error(Rn)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new dn.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class yn{constructor(In){this._url=In.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new dn.PromiseCapability;const Rn=In.source;this._isStreamingSupported=!Rn.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Sn;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const In=this._readableStream.read();return In===null?(this._readCapability=new dn.PromiseCapability,this.read()):(this._loaded+=In.length,(Sn=this.onProgress)==null||Sn.call(this,{loaded:this._loaded}),{value:new Uint8Array(In).buffer,done:!1})}cancel(In){if(!this._readableStream){this._error(In);return}this._readableStream.destroy(In)}_error(In){this._storedError=In,this._readCapability.resolve()}_setReadableStream(In){this._readableStream=In,In.on("readable",()=>{this._readCapability.resolve()}),In.on("end",()=>{In.destroy(),this._done=!0,this._readCapability.resolve()}),In.on("error",Rn=>{this._error(Rn)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function xn(Tn,In){return{protocol:Tn.protocol,auth:Tn.auth,host:Tn.hostname,port:Tn.port,path:Tn.path,method:"GET",headers:In}}class En extends gn{constructor(In){super(In);const Rn=Sn=>{if(Sn.statusCode===404){const Gn=new dn.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Gn,this._headersCapability.reject(Gn);return}this._headersCapability.resolve(),this._setReadableStream(Sn);const Dn=Gn=>this._readableStream.headers[Gn.toLowerCase()],{allowRangeRequests:$n,suggestedLength:Fn}=(0,hn.validateRangeRequestCapabilities)({getResponseHeader:Dn,isHttp:In.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=$n,this._contentLength=Fn||this._contentLength,this._filename=(0,hn.extractFilenameFromHeader)(Dn)};if(this._request=null,this._url.protocol==="http:"){const Sn=require$$5;this._request=Sn.request(xn(this._url,In.httpHeaders),Rn)}else{const Sn=require$$5;this._request=Sn.request(xn(this._url,In.httpHeaders),Rn)}this._request.on("error",Sn=>{this._storedError=Sn,this._headersCapability.reject(Sn)}),this._request.end()}}class bn extends yn{constructor(In,Rn,Sn){super(In),this._httpHeaders={};for(const $n in In.httpHeaders){const Fn=In.httpHeaders[$n];Fn!==void 0&&(this._httpHeaders[$n]=Fn)}this._httpHeaders.Range=`bytes=${Rn}-${Sn-1}`;const Dn=$n=>{if($n.statusCode===404){const Fn=new dn.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Fn;return}this._setReadableStream($n)};if(this._request=null,this._url.protocol==="http:"){const $n=require$$5;this._request=$n.request(xn(this._url,this._httpHeaders),Dn)}else{const $n=require$$5;this._request=$n.request(xn(this._url,this._httpHeaders),Dn)}this._request.on("error",$n=>{this._storedError=$n}),this._request.end()}}class vn extends gn{constructor(In){super(In);let Rn=decodeURIComponent(this._url.path);fn.test(this._url.href)&&(Rn=Rn.replace(/^\//,""));const Sn=require$$5;Sn.lstat(Rn,(Dn,$n)=>{if(Dn){Dn.code==="ENOENT"&&(Dn=new dn.MissingPDFException(`Missing PDF "${Rn}".`)),this._storedError=Dn,this._headersCapability.reject(Dn);return}this._contentLength=$n.size,this._setReadableStream(Sn.createReadStream(Rn)),this._headersCapability.resolve()})}}class Pn extends yn{constructor(In,Rn,Sn){super(In);let Dn=decodeURIComponent(this._url.path);fn.test(this._url.href)&&(Dn=Dn.replace(/^\//,""));const $n=require$$5;this._setReadableStream($n.createReadStream(Dn,{start:Rn,end:Sn-1}))}}},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var dn=un(6),hn=un(1);const fn={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},pn="http://www.w3.org/XML/1998/namespace",mn="http://www.w3.org/1999/xlink",gn=["butt","round","square"],yn=["miter","round","bevel"],xn=function($n,Fn="",Gn=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Gn)return URL.createObjectURL(new Blob([$n],{type:Fn}));const kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Nn=`data:${Fn};base64,`;for(let Ln=0,zn=$n.length;Ln<zn;Ln+=3){const Cn=$n[Ln]&255,Mn=$n[Ln+1]&255,Bn=$n[Ln+2]&255,Xn=Cn>>2,nr=(Cn&3)<<4|Mn>>4,sr=Ln+1<zn?(Mn&15)<<2|Bn>>6:64,lr=Ln+2<zn?Bn&63:64;Nn+=kn[Xn]+kn[nr]+kn[sr]+kn[lr]}return Nn},En=function(){const $n=new Uint8Array([137,80,78,71,13,10,26,10]),Fn=12,Gn=new Int32Array(256);for(let Bn=0;Bn<256;Bn++){let Xn=Bn;for(let nr=0;nr<8;nr++)Xn=Xn&1?3988292384^Xn>>1&2147483647:Xn>>1&2147483647;Gn[Bn]=Xn}function kn(Bn,Xn,nr){let sr=-1;for(let lr=Xn;lr<nr;lr++){const tr=(sr^Bn[lr])&255,Jn=Gn[tr];sr=sr>>>8^Jn}return sr^-1}function Nn(Bn,Xn,nr,sr){let lr=sr;const tr=Xn.length;nr[lr]=tr>>24&255,nr[lr+1]=tr>>16&255,nr[lr+2]=tr>>8&255,nr[lr+3]=tr&255,lr+=4,nr[lr]=Bn.charCodeAt(0)&255,nr[lr+1]=Bn.charCodeAt(1)&255,nr[lr+2]=Bn.charCodeAt(2)&255,nr[lr+3]=Bn.charCodeAt(3)&255,lr+=4,nr.set(Xn,lr),lr+=Xn.length;const Jn=kn(nr,sr+4,lr);nr[lr]=Jn>>24&255,nr[lr+1]=Jn>>16&255,nr[lr+2]=Jn>>8&255,nr[lr+3]=Jn&255}function Ln(Bn,Xn,nr){let sr=1,lr=0;for(let tr=Xn;tr<nr;++tr)sr=(sr+(Bn[tr]&255))%65521,lr=(lr+sr)%65521;return lr<<16|sr}function zn(Bn){if(!hn.isNodeJS)return Cn(Bn);try{const Xn=parseInt(process.versions.node)>=8?Bn:Buffer.from(Bn),nr=require$$5.deflateSync(Xn,{level:9});return nr instanceof Uint8Array?nr:new Uint8Array(nr)}catch(Xn){(0,hn.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Xn)}return Cn(Bn)}function Cn(Bn){let Xn=Bn.length;const nr=65535,sr=Math.ceil(Xn/nr),lr=new Uint8Array(2+Xn+sr*5+4);let tr=0;lr[tr++]=120,lr[tr++]=156;let Jn=0;for(;Xn>nr;)lr[tr++]=0,lr[tr++]=255,lr[tr++]=255,lr[tr++]=0,lr[tr++]=0,lr.set(Bn.subarray(Jn,Jn+nr),tr),tr+=nr,Jn+=nr,Xn-=nr;lr[tr++]=1,lr[tr++]=Xn&255,lr[tr++]=Xn>>8&255,lr[tr++]=~Xn&65535&255,lr[tr++]=(~Xn&65535)>>8&255,lr.set(Bn.subarray(Jn),tr),tr+=Bn.length-Jn;const ar=Ln(Bn,0,Bn.length);return lr[tr++]=ar>>24&255,lr[tr++]=ar>>16&255,lr[tr++]=ar>>8&255,lr[tr++]=ar&255,lr}function Mn(Bn,Xn,nr,sr){const lr=Bn.width,tr=Bn.height;let Jn,ar,gr;const qn=Bn.data;switch(Xn){case hn.ImageKind.GRAYSCALE_1BPP:ar=0,Jn=1,gr=lr+7>>3;break;case hn.ImageKind.RGB_24BPP:ar=2,Jn=8,gr=lr*3;break;case hn.ImageKind.RGBA_32BPP:ar=6,Jn=8,gr=lr*4;break;default:throw new Error("invalid format")}const On=new Uint8Array((1+gr)*tr);let Un=0,Yn=0;for(let Tr=0;Tr<tr;++Tr)On[Un++]=0,On.set(qn.subarray(Yn,Yn+gr),Un),Yn+=gr,Un+=gr;if(Xn===hn.ImageKind.GRAYSCALE_1BPP&&sr){Un=0;for(let Tr=0;Tr<tr;Tr++){Un++;for(let Ir=0;Ir<gr;Ir++)On[Un++]^=255}}const er=new Uint8Array([lr>>24&255,lr>>16&255,lr>>8&255,lr&255,tr>>24&255,tr>>16&255,tr>>8&255,tr&255,Jn,ar,0,0,0]),Zn=zn(On),ir=$n.length+Fn*3+er.length+Zn.length,fr=new Uint8Array(ir);let br=0;return fr.set($n,br),br+=$n.length,Nn("IHDR",er,fr,br),br+=Fn+er.length,Nn("IDATA",Zn,fr,br),br+=Fn+Zn.length,Nn("IEND",new Uint8Array(0),fr,br),xn(fr,"image/png",nr)}return function(Xn,nr,sr){const lr=Xn.kind===void 0?hn.ImageKind.GRAYSCALE_1BPP:Xn.kind;return Mn(Xn,lr,nr,sr)}}();class bn{constructor(){this.fontSizeScale=1,this.fontWeight=fn.fontWeight,this.fontSize=0,this.textMatrix=hn.IDENTITY_MATRIX,this.fontMatrix=hn.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=hn.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=fn.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Fn,Gn){this.x=Fn,this.y=Gn}}function vn($n){let Fn=[];const Gn=[];for(const kn of $n){if(kn.fn==="save"){Fn.push({fnId:92,fn:"group",items:[]}),Gn.push(Fn),Fn=Fn.at(-1).items;continue}kn.fn==="restore"?Fn=Gn.pop():Fn.push(kn)}return Fn}function Pn($n){if(Number.isInteger($n))return $n.toString();const Fn=$n.toFixed(10);let Gn=Fn.length-1;if(Fn[Gn]!=="0")return Fn;do Gn--;while(Fn[Gn]==="0");return Fn.substring(0,Fn[Gn]==="."?Gn:Gn+1)}function Tn($n){if($n[4]===0&&$n[5]===0){if($n[1]===0&&$n[2]===0)return $n[0]===1&&$n[3]===1?"":`scale(${Pn($n[0])} ${Pn($n[3])})`;if($n[0]===$n[3]&&$n[1]===-$n[2]){const Fn=Math.acos($n[0])*180/Math.PI;return`rotate(${Pn(Fn)})`}}else if($n[0]===1&&$n[1]===0&&$n[2]===0&&$n[3]===1)return`translate(${Pn($n[4])} ${Pn($n[5])})`;return`matrix(${Pn($n[0])} ${Pn($n[1])} ${Pn($n[2])} ${Pn($n[3])} ${Pn($n[4])} ${Pn($n[5])})`}let In=0,Rn=0,Sn=0;class Dn{constructor(Fn,Gn,kn=!1){(0,dn.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new dn.DOMSVGFactory,this.current=new bn,this.transformMatrix=hn.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Fn,this.objs=Gn,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!kn,this._operatorIdMapping=[];for(const Nn in hn.OPS)this._operatorIdMapping[hn.OPS[Nn]]=Nn}getObject(Fn,Gn=null){return typeof Fn=="string"?Fn.startsWith("g_")?this.commonObjs.get(Fn):this.objs.get(Fn):Gn}save(){this.transformStack.push(this.transformMatrix);const Fn=this.current;this.extraStack.push(Fn),this.current=Fn.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Fn){this.save(),this.executeOpTree(Fn),this.restore()}loadDependencies(Fn){const Gn=Fn.fnArray,kn=Fn.argsArray;for(let Nn=0,Ln=Gn.length;Nn<Ln;Nn++)if(Gn[Nn]===hn.OPS.dependency)for(const zn of kn[Nn]){const Cn=zn.startsWith("g_")?this.commonObjs:this.objs,Mn=new Promise(Bn=>{Cn.get(zn,Bn)});this.current.dependencies.push(Mn)}return Promise.all(this.current.dependencies)}transform(Fn,Gn,kn,Nn,Ln,zn){const Cn=[Fn,Gn,kn,Nn,Ln,zn];this.transformMatrix=hn.Util.transform(this.transformMatrix,Cn),this.tgrp=null}getSVG(Fn,Gn){this.viewport=Gn;const kn=this._initialize(Gn);return this.loadDependencies(Fn).then(()=>(this.transformMatrix=hn.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Fn)),kn))}convertOpList(Fn){const Gn=this._operatorIdMapping,kn=Fn.argsArray,Nn=Fn.fnArray,Ln=[];for(let zn=0,Cn=Nn.length;zn<Cn;zn++){const Mn=Nn[zn];Ln.push({fnId:Mn,fn:Gn[Mn],args:kn[zn]})}return vn(Ln)}executeOpTree(Fn){for(const Gn of Fn){const kn=Gn.fn,Nn=Gn.fnId,Ln=Gn.args;switch(Nn|0){case hn.OPS.beginText:this.beginText();break;case hn.OPS.dependency:break;case hn.OPS.setLeading:this.setLeading(Ln);break;case hn.OPS.setLeadingMoveText:this.setLeadingMoveText(Ln[0],Ln[1]);break;case hn.OPS.setFont:this.setFont(Ln);break;case hn.OPS.showText:this.showText(Ln[0]);break;case hn.OPS.showSpacedText:this.showText(Ln[0]);break;case hn.OPS.endText:this.endText();break;case hn.OPS.moveText:this.moveText(Ln[0],Ln[1]);break;case hn.OPS.setCharSpacing:this.setCharSpacing(Ln[0]);break;case hn.OPS.setWordSpacing:this.setWordSpacing(Ln[0]);break;case hn.OPS.setHScale:this.setHScale(Ln[0]);break;case hn.OPS.setTextMatrix:this.setTextMatrix(Ln[0],Ln[1],Ln[2],Ln[3],Ln[4],Ln[5]);break;case hn.OPS.setTextRise:this.setTextRise(Ln[0]);break;case hn.OPS.setTextRenderingMode:this.setTextRenderingMode(Ln[0]);break;case hn.OPS.setLineWidth:this.setLineWidth(Ln[0]);break;case hn.OPS.setLineJoin:this.setLineJoin(Ln[0]);break;case hn.OPS.setLineCap:this.setLineCap(Ln[0]);break;case hn.OPS.setMiterLimit:this.setMiterLimit(Ln[0]);break;case hn.OPS.setFillRGBColor:this.setFillRGBColor(Ln[0],Ln[1],Ln[2]);break;case hn.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Ln[0],Ln[1],Ln[2]);break;case hn.OPS.setStrokeColorN:this.setStrokeColorN(Ln);break;case hn.OPS.setFillColorN:this.setFillColorN(Ln);break;case hn.OPS.shadingFill:this.shadingFill(Ln[0]);break;case hn.OPS.setDash:this.setDash(Ln[0],Ln[1]);break;case hn.OPS.setRenderingIntent:this.setRenderingIntent(Ln[0]);break;case hn.OPS.setFlatness:this.setFlatness(Ln[0]);break;case hn.OPS.setGState:this.setGState(Ln[0]);break;case hn.OPS.fill:this.fill();break;case hn.OPS.eoFill:this.eoFill();break;case hn.OPS.stroke:this.stroke();break;case hn.OPS.fillStroke:this.fillStroke();break;case hn.OPS.eoFillStroke:this.eoFillStroke();break;case hn.OPS.clip:this.clip("nonzero");break;case hn.OPS.eoClip:this.clip("evenodd");break;case hn.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case hn.OPS.paintImageXObject:this.paintImageXObject(Ln[0]);break;case hn.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Ln[0]);break;case hn.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Ln[0]);break;case hn.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Ln[0],Ln[1]);break;case hn.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case hn.OPS.closePath:this.closePath();break;case hn.OPS.closeStroke:this.closeStroke();break;case hn.OPS.closeFillStroke:this.closeFillStroke();break;case hn.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case hn.OPS.nextLine:this.nextLine();break;case hn.OPS.transform:this.transform(Ln[0],Ln[1],Ln[2],Ln[3],Ln[4],Ln[5]);break;case hn.OPS.constructPath:this.constructPath(Ln[0],Ln[1]);break;case hn.OPS.endPath:this.endPath();break;case 92:this.group(Gn.items);break;default:(0,hn.warn)(`Unimplemented operator ${kn}`);break}}}setWordSpacing(Fn){this.current.wordSpacing=Fn}setCharSpacing(Fn){this.current.charSpacing=Fn}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Fn,Gn,kn,Nn,Ln,zn){const Cn=this.current;Cn.textMatrix=Cn.lineMatrix=[Fn,Gn,kn,Nn,Ln,zn],Cn.textMatrixScale=Math.hypot(Fn,Gn),Cn.x=Cn.lineX=0,Cn.y=Cn.lineY=0,Cn.xcoords=[],Cn.ycoords=[],Cn.tspan=this.svgFactory.createElement("svg:tspan"),Cn.tspan.setAttributeNS(null,"font-family",Cn.fontFamily),Cn.tspan.setAttributeNS(null,"font-size",`${Pn(Cn.fontSize)}px`),Cn.tspan.setAttributeNS(null,"y",Pn(-Cn.y)),Cn.txtElement=this.svgFactory.createElement("svg:text"),Cn.txtElement.append(Cn.tspan)}beginText(){const Fn=this.current;Fn.x=Fn.lineX=0,Fn.y=Fn.lineY=0,Fn.textMatrix=hn.IDENTITY_MATRIX,Fn.lineMatrix=hn.IDENTITY_MATRIX,Fn.textMatrixScale=1,Fn.tspan=this.svgFactory.createElement("svg:tspan"),Fn.txtElement=this.svgFactory.createElement("svg:text"),Fn.txtgrp=this.svgFactory.createElement("svg:g"),Fn.xcoords=[],Fn.ycoords=[]}moveText(Fn,Gn){const kn=this.current;kn.x=kn.lineX+=Fn,kn.y=kn.lineY+=Gn,kn.xcoords=[],kn.ycoords=[],kn.tspan=this.svgFactory.createElement("svg:tspan"),kn.tspan.setAttributeNS(null,"font-family",kn.fontFamily),kn.tspan.setAttributeNS(null,"font-size",`${Pn(kn.fontSize)}px`),kn.tspan.setAttributeNS(null,"y",Pn(-kn.y))}showText(Fn){const Gn=this.current,kn=Gn.font,Nn=Gn.fontSize;if(Nn===0)return;const Ln=Gn.fontSizeScale,zn=Gn.charSpacing,Cn=Gn.wordSpacing,Mn=Gn.fontDirection,Bn=Gn.textHScale*Mn,Xn=kn.vertical,nr=Xn?1:-1,sr=kn.defaultVMetrics,lr=Nn*Gn.fontMatrix[0];let tr=0;for(const gr of Fn){if(gr===null){tr+=Mn*Cn;continue}else if(typeof gr=="number"){tr+=nr*gr*Nn/1e3;continue}const qn=(gr.isSpace?Cn:0)+zn,On=gr.fontChar;let Un,Yn,er=gr.width;if(Xn){let ir;const fr=gr.vmetric||sr;ir=gr.vmetric?fr[1]:er*.5,ir=-ir*lr;const br=fr[2]*lr;er=fr?-fr[0]:er,Un=ir/Ln,Yn=(tr+br)/Ln}else Un=tr/Ln,Yn=0;(gr.isInFont||kn.missingFile)&&(Gn.xcoords.push(Gn.x+Un),Xn&&Gn.ycoords.push(-Gn.y+Yn),Gn.tspan.textContent+=On);const Zn=Xn?er*lr-qn*Mn:er*lr+qn*Mn;tr+=Zn}Gn.tspan.setAttributeNS(null,"x",Gn.xcoords.map(Pn).join(" ")),Xn?Gn.tspan.setAttributeNS(null,"y",Gn.ycoords.map(Pn).join(" ")):Gn.tspan.setAttributeNS(null,"y",Pn(-Gn.y)),Xn?Gn.y-=tr:Gn.x+=tr*Bn,Gn.tspan.setAttributeNS(null,"font-family",Gn.fontFamily),Gn.tspan.setAttributeNS(null,"font-size",`${Pn(Gn.fontSize)}px`),Gn.fontStyle!==fn.fontStyle&&Gn.tspan.setAttributeNS(null,"font-style",Gn.fontStyle),Gn.fontWeight!==fn.fontWeight&&Gn.tspan.setAttributeNS(null,"font-weight",Gn.fontWeight);const Jn=Gn.textRenderingMode&hn.TextRenderingMode.FILL_STROKE_MASK;if(Jn===hn.TextRenderingMode.FILL||Jn===hn.TextRenderingMode.FILL_STROKE?(Gn.fillColor!==fn.fillColor&&Gn.tspan.setAttributeNS(null,"fill",Gn.fillColor),Gn.fillAlpha<1&&Gn.tspan.setAttributeNS(null,"fill-opacity",Gn.fillAlpha)):Gn.textRenderingMode===hn.TextRenderingMode.ADD_TO_PATH?Gn.tspan.setAttributeNS(null,"fill","transparent"):Gn.tspan.setAttributeNS(null,"fill","none"),Jn===hn.TextRenderingMode.STROKE||Jn===hn.TextRenderingMode.FILL_STROKE){const gr=1/(Gn.textMatrixScale||1);this._setStrokeAttributes(Gn.tspan,gr)}let ar=Gn.textMatrix;Gn.textRise!==0&&(ar=ar.slice(),ar[5]+=Gn.textRise),Gn.txtElement.setAttributeNS(null,"transform",`${Tn(ar)} scale(${Pn(Bn)}, -1)`),Gn.txtElement.setAttributeNS(pn,"xml:space","preserve"),Gn.txtElement.append(Gn.tspan),Gn.txtgrp.append(Gn.txtElement),this._ensureTransformGroup().append(Gn.txtElement)}setLeadingMoveText(Fn,Gn){this.setLeading(-Gn),this.moveText(Fn,Gn)}addFontStyle(Fn){if(!Fn.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Gn=xn(Fn.data,Fn.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Fn.loadedName}"; src: url(${Gn}); }
`}setFont(Fn){const Gn=this.current,kn=this.commonObjs.get(Fn[0]);let Nn=Fn[1];Gn.font=kn,this.embedFonts&&!kn.missingFile&&!this.embeddedFonts[kn.loadedName]&&(this.addFontStyle(kn),this.embeddedFonts[kn.loadedName]=kn),Gn.fontMatrix=kn.fontMatrix||hn.FONT_IDENTITY_MATRIX;let Ln="normal";kn.black?Ln="900":kn.bold&&(Ln="bold");const zn=kn.italic?"italic":"normal";Nn<0?(Nn=-Nn,Gn.fontDirection=-1):Gn.fontDirection=1,Gn.fontSize=Nn,Gn.fontFamily=kn.loadedName,Gn.fontWeight=Ln,Gn.fontStyle=zn,Gn.tspan=this.svgFactory.createElement("svg:tspan"),Gn.tspan.setAttributeNS(null,"y",Pn(-Gn.y)),Gn.xcoords=[],Gn.ycoords=[]}endText(){var Gn;const Fn=this.current;Fn.textRenderingMode&hn.TextRenderingMode.ADD_TO_PATH_FLAG&&((Gn=Fn.txtElement)!=null&&Gn.hasChildNodes())&&(Fn.element=Fn.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Fn){Fn>0&&(this.current.lineWidth=Fn)}setLineCap(Fn){this.current.lineCap=gn[Fn]}setLineJoin(Fn){this.current.lineJoin=yn[Fn]}setMiterLimit(Fn){this.current.miterLimit=Fn}setStrokeAlpha(Fn){this.current.strokeAlpha=Fn}setStrokeRGBColor(Fn,Gn,kn){this.current.strokeColor=hn.Util.makeHexColor(Fn,Gn,kn)}setFillAlpha(Fn){this.current.fillAlpha=Fn}setFillRGBColor(Fn,Gn,kn){this.current.fillColor=hn.Util.makeHexColor(Fn,Gn,kn),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Fn){this.current.strokeColor=this._makeColorN_Pattern(Fn)}setFillColorN(Fn){this.current.fillColor=this._makeColorN_Pattern(Fn)}shadingFill(Fn){const{width:Gn,height:kn}=this.viewport,Nn=hn.Util.inverseTransform(this.transformMatrix),[Ln,zn,Cn,Mn]=hn.Util.getAxialAlignedBoundingBox([0,0,Gn,kn],Nn),Bn=this.svgFactory.createElement("svg:rect");Bn.setAttributeNS(null,"x",Ln),Bn.setAttributeNS(null,"y",zn),Bn.setAttributeNS(null,"width",Cn-Ln),Bn.setAttributeNS(null,"height",Mn-zn),Bn.setAttributeNS(null,"fill",this._makeShadingPattern(Fn)),this.current.fillAlpha<1&&Bn.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Bn)}_makeColorN_Pattern(Fn){return Fn[0]==="TilingPattern"?this._makeTilingPattern(Fn):this._makeShadingPattern(Fn)}_makeTilingPattern(Fn){const Gn=Fn[1],kn=Fn[2],Nn=Fn[3]||hn.IDENTITY_MATRIX,[Ln,zn,Cn,Mn]=Fn[4],Bn=Fn[5],Xn=Fn[6],nr=Fn[7],sr=`shading${Sn++}`,[lr,tr,Jn,ar]=hn.Util.normalizeRect([...hn.Util.applyTransform([Ln,zn],Nn),...hn.Util.applyTransform([Cn,Mn],Nn)]),[gr,qn]=hn.Util.singularValueDecompose2dScale(Nn),On=Bn*gr,Un=Xn*qn,Yn=this.svgFactory.createElement("svg:pattern");Yn.setAttributeNS(null,"id",sr),Yn.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Yn.setAttributeNS(null,"width",On),Yn.setAttributeNS(null,"height",Un),Yn.setAttributeNS(null,"x",`${lr}`),Yn.setAttributeNS(null,"y",`${tr}`);const er=this.svg,Zn=this.transformMatrix,ir=this.current.fillColor,fr=this.current.strokeColor,br=this.svgFactory.create(Jn-lr,ar-tr);if(this.svg=br,this.transformMatrix=Nn,nr===2){const Tr=hn.Util.makeHexColor(...Gn);this.current.fillColor=Tr,this.current.strokeColor=Tr}return this.executeOpTree(this.convertOpList(kn)),this.svg=er,this.transformMatrix=Zn,this.current.fillColor=ir,this.current.strokeColor=fr,Yn.append(br.childNodes[0]),this.defs.append(Yn),`url(#${sr})`}_makeShadingPattern(Fn){switch(typeof Fn=="string"&&(Fn=this.objs.get(Fn)),Fn[0]){case"RadialAxial":const Gn=`shading${Sn++}`,kn=Fn[3];let Nn;switch(Fn[1]){case"axial":const Ln=Fn[4],zn=Fn[5];Nn=this.svgFactory.createElement("svg:linearGradient"),Nn.setAttributeNS(null,"id",Gn),Nn.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Nn.setAttributeNS(null,"x1",Ln[0]),Nn.setAttributeNS(null,"y1",Ln[1]),Nn.setAttributeNS(null,"x2",zn[0]),Nn.setAttributeNS(null,"y2",zn[1]);break;case"radial":const Cn=Fn[4],Mn=Fn[5],Bn=Fn[6],Xn=Fn[7];Nn=this.svgFactory.createElement("svg:radialGradient"),Nn.setAttributeNS(null,"id",Gn),Nn.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Nn.setAttributeNS(null,"cx",Mn[0]),Nn.setAttributeNS(null,"cy",Mn[1]),Nn.setAttributeNS(null,"r",Xn),Nn.setAttributeNS(null,"fx",Cn[0]),Nn.setAttributeNS(null,"fy",Cn[1]),Nn.setAttributeNS(null,"fr",Bn);break;default:throw new Error(`Unknown RadialAxial type: ${Fn[1]}`)}for(const Ln of kn){const zn=this.svgFactory.createElement("svg:stop");zn.setAttributeNS(null,"offset",Ln[0]),zn.setAttributeNS(null,"stop-color",Ln[1]),Nn.append(zn)}return this.defs.append(Nn),`url(#${Gn})`;case"Mesh":return(0,hn.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Fn[0]}`)}}setDash(Fn,Gn){this.current.dashArray=Fn,this.current.dashPhase=Gn}constructPath(Fn,Gn){const kn=this.current;let Nn=kn.x,Ln=kn.y,zn=[],Cn=0;for(const Mn of Fn)switch(Mn|0){case hn.OPS.rectangle:Nn=Gn[Cn++],Ln=Gn[Cn++];const Bn=Gn[Cn++],Xn=Gn[Cn++],nr=Nn+Bn,sr=Ln+Xn;zn.push("M",Pn(Nn),Pn(Ln),"L",Pn(nr),Pn(Ln),"L",Pn(nr),Pn(sr),"L",Pn(Nn),Pn(sr),"Z");break;case hn.OPS.moveTo:Nn=Gn[Cn++],Ln=Gn[Cn++],zn.push("M",Pn(Nn),Pn(Ln));break;case hn.OPS.lineTo:Nn=Gn[Cn++],Ln=Gn[Cn++],zn.push("L",Pn(Nn),Pn(Ln));break;case hn.OPS.curveTo:Nn=Gn[Cn+4],Ln=Gn[Cn+5],zn.push("C",Pn(Gn[Cn]),Pn(Gn[Cn+1]),Pn(Gn[Cn+2]),Pn(Gn[Cn+3]),Pn(Nn),Pn(Ln)),Cn+=6;break;case hn.OPS.curveTo2:zn.push("C",Pn(Nn),Pn(Ln),Pn(Gn[Cn]),Pn(Gn[Cn+1]),Pn(Gn[Cn+2]),Pn(Gn[Cn+3])),Nn=Gn[Cn+2],Ln=Gn[Cn+3],Cn+=4;break;case hn.OPS.curveTo3:Nn=Gn[Cn+2],Ln=Gn[Cn+3],zn.push("C",Pn(Gn[Cn]),Pn(Gn[Cn+1]),Pn(Nn),Pn(Ln),Pn(Nn),Pn(Ln)),Cn+=4;break;case hn.OPS.closePath:zn.push("Z");break}zn=zn.join(" "),kn.path&&Fn.length>0&&Fn[0]!==hn.OPS.rectangle&&Fn[0]!==hn.OPS.moveTo?zn=kn.path.getAttributeNS(null,"d")+zn:(kn.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(kn.path)),kn.path.setAttributeNS(null,"d",zn),kn.path.setAttributeNS(null,"fill","none"),kn.element=kn.path,kn.setCurrentPoint(Nn,Ln)}endPath(){const Fn=this.current;if(Fn.path=null,!this.pendingClip)return;if(!Fn.element){this.pendingClip=null;return}const Gn=`clippath${In++}`,kn=this.svgFactory.createElement("svg:clipPath");kn.setAttributeNS(null,"id",Gn),kn.setAttributeNS(null,"transform",Tn(this.transformMatrix));const Nn=Fn.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Nn.setAttributeNS(null,"clip-rule","evenodd"):Nn.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,kn.append(Nn),this.defs.append(kn),Fn.activeClipUrl){Fn.clipGroup=null;for(const Ln of this.extraStack)Ln.clipGroup=null;kn.setAttributeNS(null,"clip-path",Fn.activeClipUrl)}Fn.activeClipUrl=`url(#${Gn})`,this.tgrp=null}clip(Fn){this.pendingClip=Fn}closePath(){const Fn=this.current;if(Fn.path){const Gn=`${Fn.path.getAttributeNS(null,"d")}Z`;Fn.path.setAttributeNS(null,"d",Gn)}}setLeading(Fn){this.current.leading=-Fn}setTextRise(Fn){this.current.textRise=Fn}setTextRenderingMode(Fn){this.current.textRenderingMode=Fn}setHScale(Fn){this.current.textHScale=Fn/100}setRenderingIntent(Fn){}setFlatness(Fn){}setGState(Fn){for(const[Gn,kn]of Fn)switch(Gn){case"LW":this.setLineWidth(kn);break;case"LC":this.setLineCap(kn);break;case"LJ":this.setLineJoin(kn);break;case"ML":this.setMiterLimit(kn);break;case"D":this.setDash(kn[0],kn[1]);break;case"RI":this.setRenderingIntent(kn);break;case"FL":this.setFlatness(kn);break;case"Font":this.setFont(kn);break;case"CA":this.setStrokeAlpha(kn);break;case"ca":this.setFillAlpha(kn);break;default:(0,hn.warn)(`Unimplemented graphic state operator ${Gn}`);break}}fill(){const Fn=this.current;Fn.element&&(Fn.element.setAttributeNS(null,"fill",Fn.fillColor),Fn.element.setAttributeNS(null,"fill-opacity",Fn.fillAlpha),this.endPath())}stroke(){const Fn=this.current;Fn.element&&(this._setStrokeAttributes(Fn.element),Fn.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Fn,Gn=1){const kn=this.current;let Nn=kn.dashArray;Gn!==1&&Nn.length>0&&(Nn=Nn.map(function(Ln){return Gn*Ln})),Fn.setAttributeNS(null,"stroke",kn.strokeColor),Fn.setAttributeNS(null,"stroke-opacity",kn.strokeAlpha),Fn.setAttributeNS(null,"stroke-miterlimit",Pn(kn.miterLimit)),Fn.setAttributeNS(null,"stroke-linecap",kn.lineCap),Fn.setAttributeNS(null,"stroke-linejoin",kn.lineJoin),Fn.setAttributeNS(null,"stroke-width",Pn(Gn*kn.lineWidth)+"px"),Fn.setAttributeNS(null,"stroke-dasharray",Nn.map(Pn).join(" ")),Fn.setAttributeNS(null,"stroke-dashoffset",Pn(Gn*kn.dashPhase)+"px")}eoFill(){var Fn;(Fn=this.current.element)==null||Fn.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Fn;(Fn=this.current.element)==null||Fn.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Fn=this.svgFactory.createElement("svg:rect");Fn.setAttributeNS(null,"x","0"),Fn.setAttributeNS(null,"y","0"),Fn.setAttributeNS(null,"width","1px"),Fn.setAttributeNS(null,"height","1px"),Fn.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Fn)}paintImageXObject(Fn){const Gn=this.getObject(Fn);if(!Gn){(0,hn.warn)(`Dependent image with object ID ${Fn} is not ready yet`);return}this.paintInlineImageXObject(Gn)}paintInlineImageXObject(Fn,Gn){const kn=Fn.width,Nn=Fn.height,Ln=En(Fn,this.forceDataSchema,!!Gn),zn=this.svgFactory.createElement("svg:rect");zn.setAttributeNS(null,"x","0"),zn.setAttributeNS(null,"y","0"),zn.setAttributeNS(null,"width",Pn(kn)),zn.setAttributeNS(null,"height",Pn(Nn)),this.current.element=zn,this.clip("nonzero");const Cn=this.svgFactory.createElement("svg:image");Cn.setAttributeNS(mn,"xlink:href",Ln),Cn.setAttributeNS(null,"x","0"),Cn.setAttributeNS(null,"y",Pn(-Nn)),Cn.setAttributeNS(null,"width",Pn(kn)+"px"),Cn.setAttributeNS(null,"height",Pn(Nn)+"px"),Cn.setAttributeNS(null,"transform",`scale(${Pn(1/kn)} ${Pn(-1/Nn)})`),Gn?Gn.append(Cn):this._ensureTransformGroup().append(Cn)}paintImageMaskXObject(Fn){const Gn=this.getObject(Fn.data,Fn);if(Gn.bitmap){(0,hn.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const kn=this.current,Nn=Gn.width,Ln=Gn.height,zn=kn.fillColor;kn.maskId=`mask${Rn++}`;const Cn=this.svgFactory.createElement("svg:mask");Cn.setAttributeNS(null,"id",kn.maskId);const Mn=this.svgFactory.createElement("svg:rect");Mn.setAttributeNS(null,"x","0"),Mn.setAttributeNS(null,"y","0"),Mn.setAttributeNS(null,"width",Pn(Nn)),Mn.setAttributeNS(null,"height",Pn(Ln)),Mn.setAttributeNS(null,"fill",zn),Mn.setAttributeNS(null,"mask",`url(#${kn.maskId})`),this.defs.append(Cn),this._ensureTransformGroup().append(Mn),this.paintInlineImageXObject(Gn,Cn)}paintFormXObjectBegin(Fn,Gn){if(Array.isArray(Fn)&&Fn.length===6&&this.transform(Fn[0],Fn[1],Fn[2],Fn[3],Fn[4],Fn[5]),Gn){const kn=Gn[2]-Gn[0],Nn=Gn[3]-Gn[1],Ln=this.svgFactory.createElement("svg:rect");Ln.setAttributeNS(null,"x",Gn[0]),Ln.setAttributeNS(null,"y",Gn[1]),Ln.setAttributeNS(null,"width",Pn(kn)),Ln.setAttributeNS(null,"height",Pn(Nn)),this.current.element=Ln,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Fn){const Gn=this.svgFactory.create(Fn.width,Fn.height),kn=this.svgFactory.createElement("svg:defs");Gn.append(kn),this.defs=kn;const Nn=this.svgFactory.createElement("svg:g");return Nn.setAttributeNS(null,"transform",Tn(Fn.transform)),Gn.append(Nn),this.svg=Nn,Gn}_ensureClipGroup(){if(!this.current.clipGroup){const Fn=this.svgFactory.createElement("svg:g");Fn.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Fn),this.current.clipGroup=Fn}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",Tn(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=Dn},(_e,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class un{static textContent(hn){const fn=[],pn={items:fn,styles:Object.create(null)};function mn(gn){var En;if(!gn)return;let yn=null;const xn=gn.name;if(xn==="#text")yn=gn.value;else if(un.shouldBuildText(xn))(En=gn==null?void 0:gn.attributes)!=null&&En.textContent?yn=gn.attributes.textContent:gn.value&&(yn=gn.value);else return;if(yn!==null&&fn.push({str:yn}),!!gn.children)for(const bn of gn.children)mn(bn)}return mn(hn),pn}static shouldBuildText(hn){return!(hn==="textarea"||hn==="input"||hn==="option"||hn==="select")}}e.XfaText=un},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=Tn,e.updateTextLayer=In;var dn=un(1),hn=un(6);const fn=1e5,pn=30,mn=.8,gn=new Map;function yn(Rn,Sn){let Dn;if(Sn&&dn.FeatureTest.isOffscreenCanvasSupported)Dn=new OffscreenCanvas(Rn,Rn).getContext("2d",{alpha:!1});else{const $n=document.createElement("canvas");$n.width=$n.height=Rn,Dn=$n.getContext("2d",{alpha:!1})}return Dn}function xn(Rn,Sn){const Dn=gn.get(Rn);if(Dn)return Dn;const $n=yn(pn,Sn);$n.font=`${pn}px ${Rn}`;const Fn=$n.measureText("");let Gn=Fn.fontBoundingBoxAscent,kn=Math.abs(Fn.fontBoundingBoxDescent);if(Gn){const Ln=Gn/(Gn+kn);return gn.set(Rn,Ln),$n.canvas.width=$n.canvas.height=0,Ln}$n.strokeStyle="red",$n.clearRect(0,0,pn,pn),$n.strokeText("g",0,0);let Nn=$n.getImageData(0,0,pn,pn).data;kn=0;for(let Ln=Nn.length-1-3;Ln>=0;Ln-=4)if(Nn[Ln]>0){kn=Math.ceil(Ln/4/pn);break}$n.clearRect(0,0,pn,pn),$n.strokeText("A",0,pn),Nn=$n.getImageData(0,0,pn,pn).data,Gn=0;for(let Ln=0,zn=Nn.length;Ln<zn;Ln+=4)if(Nn[Ln]>0){Gn=pn-Math.floor(Ln/4/pn);break}if($n.canvas.width=$n.canvas.height=0,Gn){const Ln=Gn/(Gn+kn);return gn.set(Rn,Ln),Ln}return gn.set(Rn,mn),mn}function En(Rn,Sn,Dn){const $n=document.createElement("span"),Fn={angle:0,canvasWidth:0,hasText:Sn.str!=="",hasEOL:Sn.hasEOL,fontSize:0};Rn._textDivs.push($n);const Gn=dn.Util.transform(Rn._transform,Sn.transform);let kn=Math.atan2(Gn[1],Gn[0]);const Nn=Dn[Sn.fontName];Nn.vertical&&(kn+=Math.PI/2);const Ln=Math.hypot(Gn[2],Gn[3]),zn=Ln*xn(Nn.fontFamily,Rn._isOffscreenCanvasSupported);let Cn,Mn;kn===0?(Cn=Gn[4],Mn=Gn[5]-zn):(Cn=Gn[4]+zn*Math.sin(kn),Mn=Gn[5]-zn*Math.cos(kn));const Bn="calc(var(--scale-factor)*",Xn=$n.style;Rn._container===Rn._rootContainer?(Xn.left=`${(100*Cn/Rn._pageWidth).toFixed(2)}%`,Xn.top=`${(100*Mn/Rn._pageHeight).toFixed(2)}%`):(Xn.left=`${Bn}${Cn.toFixed(2)}px)`,Xn.top=`${Bn}${Mn.toFixed(2)}px)`),Xn.fontSize=`${Bn}${Ln.toFixed(2)}px)`,Xn.fontFamily=Nn.fontFamily,Fn.fontSize=Ln,$n.setAttribute("role","presentation"),$n.textContent=Sn.str,$n.dir=Sn.dir,Rn._fontInspectorEnabled&&($n.dataset.fontName=Sn.fontName),kn!==0&&(Fn.angle=kn*(180/Math.PI));let nr=!1;if(Sn.str.length>1)nr=!0;else if(Sn.str!==" "&&Sn.transform[0]!==Sn.transform[3]){const sr=Math.abs(Sn.transform[0]),lr=Math.abs(Sn.transform[3]);sr!==lr&&Math.max(sr,lr)/Math.min(sr,lr)>1.5&&(nr=!0)}nr&&(Fn.canvasWidth=Nn.vertical?Sn.height:Sn.width),Rn._textDivProperties.set($n,Fn),Rn._isReadableStream&&Rn._layoutText($n)}function bn(Rn){const{div:Sn,scale:Dn,properties:$n,ctx:Fn,prevFontSize:Gn,prevFontFamily:kn}=Rn,{style:Nn}=Sn;let Ln="";if($n.canvasWidth!==0&&$n.hasText){const{fontFamily:zn}=Nn,{canvasWidth:Cn,fontSize:Mn}=$n;(Gn!==Mn||kn!==zn)&&(Fn.font=`${Mn*Dn}px ${zn}`,Rn.prevFontSize=Mn,Rn.prevFontFamily=zn);const{width:Bn}=Fn.measureText(Sn.textContent);Bn>0&&(Ln=`scaleX(${Cn*Dn/Bn})`)}$n.angle!==0&&(Ln=`rotate(${$n.angle}deg) ${Ln}`),Ln.length>0&&(Nn.transform=Ln)}function vn(Rn){if(Rn._canceled)return;const Sn=Rn._textDivs,Dn=Rn._capability;if(Sn.length>fn){Dn.resolve();return}if(!Rn._isReadableStream)for(const Fn of Sn)Rn._layoutText(Fn);Dn.resolve()}class Pn{constructor({textContentSource:Sn,container:Dn,viewport:$n,textDivs:Fn,textDivProperties:Gn,textContentItemsStr:kn,isOffscreenCanvasSupported:Nn}){var Bn;this._textContentSource=Sn,this._isReadableStream=Sn instanceof ReadableStream,this._container=this._rootContainer=Dn,this._textDivs=Fn||[],this._textContentItemsStr=kn||[],this._isOffscreenCanvasSupported=Nn,this._fontInspectorEnabled=!!((Bn=globalThis.FontInspector)!=null&&Bn.enabled),this._reader=null,this._textDivProperties=Gn||new WeakMap,this._canceled=!1,this._capability=new dn.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:$n.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:yn(0,Nn)};const{pageWidth:Ln,pageHeight:zn,pageX:Cn,pageY:Mn}=$n.rawDims;this._transform=[1,0,0,-1,-Cn,Mn+zn],this._pageWidth=Ln,this._pageHeight=zn,(0,hn.setLayerDimensions)(Dn,$n),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new dn.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new dn.AbortException("TextLayer task cancelled."))}_processItems(Sn,Dn){for(const $n of Sn){if($n.str===void 0){if($n.type==="beginMarkedContentProps"||$n.type==="beginMarkedContent"){const Fn=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),$n.id!==null&&this._container.setAttribute("id",`${$n.id}`),Fn.append(this._container)}else $n.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push($n.str),En(this,$n,Dn)}}_layoutText(Sn){const Dn=this._layoutTextParams.properties=this._textDivProperties.get(Sn);if(this._layoutTextParams.div=Sn,bn(this._layoutTextParams),Dn.hasText&&this._container.append(Sn),Dn.hasEOL){const $n=document.createElement("br");$n.setAttribute("role","presentation"),this._container.append($n)}}_render(){const Sn=new dn.PromiseCapability;let Dn=Object.create(null);if(this._isReadableStream){const $n=()=>{this._reader.read().then(({value:Fn,done:Gn})=>{if(Gn){Sn.resolve();return}Object.assign(Dn,Fn.styles),this._processItems(Fn.items,Dn),$n()},Sn.reject)};this._reader=this._textContentSource.getReader(),$n()}else if(this._textContentSource){const{items:$n,styles:Fn}=this._textContentSource;this._processItems($n,Fn),Sn.resolve()}else throw new Error('No "textContentSource" parameter specified.');Sn.promise.then(()=>{Dn=null,vn(this)},this._capability.reject)}}e.TextLayerRenderTask=Pn;function Tn(Rn){!Rn.textContentSource&&(Rn.textContent||Rn.textContentStream)&&((0,hn.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Rn.textContentSource=Rn.textContent||Rn.textContentStream);const{container:Sn,viewport:Dn}=Rn,$n=getComputedStyle(Sn),Fn=$n.getPropertyValue("visibility"),Gn=parseFloat($n.getPropertyValue("--scale-factor"));Fn==="visible"&&(!Gn||Math.abs(Gn-Dn.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const kn=new Pn(Rn);return kn._render(),kn}function In({container:Rn,viewport:Sn,textDivs:Dn,textDivProperties:$n,isOffscreenCanvasSupported:Fn,mustRotate:Gn=!0,mustRescale:kn=!0}){if(Gn&&(0,hn.setLayerDimensions)(Rn,{rotation:Sn.rotation}),kn){const Nn=yn(0,Fn),zn={prevFontSize:null,prevFontFamily:null,div:null,scale:Sn.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Nn};for(const Cn of Dn)zn.properties=$n.get(Cn),zn.div=Cn,bn(zn)}}},(_e,e,un)=>{var xn,En,bn,vn,Pn,Tn,In,Rn,Sn,Dn,$n,H0,t0,W0,G0;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var dn=un(1),hn=un(4),fn=un(28),pn=un(33),mn=un(6),gn=un(34);const Ln=class Ln{constructor({uiManager:Cn,pageIndex:Mn,div:Bn,accessibilityManager:Xn,annotationLayer:nr,viewport:sr,l10n:lr}){Br(this,$n);Br(this,xn);Br(this,En,!1);Br(this,bn,null);Br(this,vn,this.pointerup.bind(this));Br(this,Pn,this.pointerdown.bind(this));Br(this,Tn,new Map);Br(this,In,!1);Br(this,Rn,!1);Br(this,Sn,!1);Br(this,Dn);const tr=[fn.FreeTextEditor,pn.InkEditor,gn.StampEditor];if(!Ln._initialized){Ln._initialized=!0;for(const Jn of tr)Jn.initialize(lr)}Cn.registerEditorTypes(tr),Fr(this,Dn,Cn),this.pageIndex=Mn,this.div=Bn,Fr(this,xn,Xn),Fr(this,bn,nr),this.viewport=sr,Hn(this,Dn).addLayer(this)}get isEmpty(){return Hn(this,Tn).size===0}updateToolbar(Cn){Hn(this,Dn).updateToolbar(Cn)}updateMode(Cn=Hn(this,Dn).getMode()){Or(this,$n,G0).call(this),Cn===dn.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Cn!==dn.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Cn===dn.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Cn===dn.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Cn===dn.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Cn){if(!Cn&&Hn(this,Dn).getMode()!==dn.AnnotationEditorType.INK)return;if(!Cn){for(const Bn of Hn(this,Tn).values())if(Bn.isEmpty()){Bn.setInBackground();return}}Or(this,$n,t0).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Cn){Hn(this,Dn).setEditingState(Cn)}addCommands(Cn){Hn(this,Dn).addCommands(Cn)}enable(){this.div.style.pointerEvents="auto";const Cn=new Set;for(const Bn of Hn(this,Tn).values())Bn.enableEditing(),Bn.annotationElementId&&Cn.add(Bn.annotationElementId);if(!Hn(this,bn))return;const Mn=Hn(this,bn).getEditableAnnotations();for(const Bn of Mn){if(Bn.hide(),Hn(this,Dn).isDeletedAnnotationElement(Bn.data.id)||Cn.has(Bn.data.id))continue;const Xn=this.deserialize(Bn);Xn&&(this.addOrRebuild(Xn),Xn.enableEditing())}}disable(){var Mn;Fr(this,Sn,!0),this.div.style.pointerEvents="none";const Cn=new Set;for(const Bn of Hn(this,Tn).values()){if(Bn.disableEditing(),!Bn.annotationElementId||Bn.serialize()!==null){Cn.add(Bn.annotationElementId);continue}(Mn=this.getEditableAnnotation(Bn.annotationElementId))==null||Mn.show(),Bn.remove()}if(Hn(this,bn)){const Bn=Hn(this,bn).getEditableAnnotations();for(const Xn of Bn){const{id:nr}=Xn.data;Cn.has(nr)||Hn(this,Dn).isDeletedAnnotationElement(nr)||Xn.show()}}Or(this,$n,G0).call(this),this.isEmpty&&(this.div.hidden=!0),Fr(this,Sn,!1)}getEditableAnnotation(Cn){var Mn;return((Mn=Hn(this,bn))==null?void 0:Mn.getEditableAnnotation(Cn))||null}setActiveEditor(Cn){Hn(this,Dn).getActive()!==Cn&&Hn(this,Dn).setActiveEditor(Cn)}enableClick(){this.div.addEventListener("pointerdown",Hn(this,Pn)),this.div.addEventListener("pointerup",Hn(this,vn))}disableClick(){this.div.removeEventListener("pointerdown",Hn(this,Pn)),this.div.removeEventListener("pointerup",Hn(this,vn))}attach(Cn){Hn(this,Tn).set(Cn.id,Cn);const{annotationElementId:Mn}=Cn;Mn&&Hn(this,Dn).isDeletedAnnotationElement(Mn)&&Hn(this,Dn).removeDeletedAnnotationElement(Cn)}detach(Cn){var Mn;Hn(this,Tn).delete(Cn.id),(Mn=Hn(this,xn))==null||Mn.removePointerInTextLayer(Cn.contentDiv),!Hn(this,Sn)&&Cn.annotationElementId&&Hn(this,Dn).addDeletedAnnotationElement(Cn)}remove(Cn){this.detach(Cn),Hn(this,Dn).removeEditor(Cn),Cn.div.contains(document.activeElement)&&setTimeout(()=>{Hn(this,Dn).focusMainContainer()},0),Cn.div.remove(),Cn.isAttachedToDOM=!1,Hn(this,Rn)||this.addInkEditorIfNeeded(!1)}changeParent(Cn){var Mn;Cn.parent!==this&&(Cn.annotationElementId&&(Hn(this,Dn).addDeletedAnnotationElement(Cn.annotationElementId),hn.AnnotationEditor.deleteAnnotationElement(Cn),Cn.annotationElementId=null),this.attach(Cn),(Mn=Cn.parent)==null||Mn.detach(Cn),Cn.setParent(this),Cn.div&&Cn.isAttachedToDOM&&(Cn.div.remove(),this.div.append(Cn.div)))}add(Cn){if(this.changeParent(Cn),Hn(this,Dn).addEditor(Cn),this.attach(Cn),!Cn.isAttachedToDOM){const Mn=Cn.render();this.div.append(Mn),Cn.isAttachedToDOM=!0}Cn.fixAndSetPosition(),Cn.onceAdded(),Hn(this,Dn).addToAnnotationStorage(Cn)}moveEditorInDOM(Cn){var Bn;if(!Cn.isAttachedToDOM)return;const{activeElement:Mn}=document;Cn.div.contains(Mn)&&(Cn._focusEventsAllowed=!1,setTimeout(()=>{Cn.div.contains(document.activeElement)?Cn._focusEventsAllowed=!0:(Cn.div.addEventListener("focusin",()=>{Cn._focusEventsAllowed=!0},{once:!0}),Mn.focus())},0)),Cn._structTreeParentId=(Bn=Hn(this,xn))==null?void 0:Bn.moveElementInDOM(this.div,Cn.div,Cn.contentDiv,!0)}addOrRebuild(Cn){Cn.needsToBeRebuilt()?Cn.rebuild():this.add(Cn)}addUndoableEditor(Cn){const Mn=()=>Cn._uiManager.rebuild(Cn),Bn=()=>{Cn.remove()};this.addCommands({cmd:Mn,undo:Bn,mustExec:!1})}getNextId(){return Hn(this,Dn).getId()}pasteEditor(Cn,Mn){Hn(this,Dn).updateToolbar(Cn),Hn(this,Dn).updateMode(Cn);const{offsetX:Bn,offsetY:Xn}=Or(this,$n,W0).call(this),nr=this.getNextId(),sr=Or(this,$n,H0).call(this,{parent:this,id:nr,x:Bn,y:Xn,uiManager:Hn(this,Dn),isCentered:!0,...Mn});sr&&this.add(sr)}deserialize(Cn){switch(Cn.annotationType??Cn.annotationEditorType){case dn.AnnotationEditorType.FREETEXT:return fn.FreeTextEditor.deserialize(Cn,this,Hn(this,Dn));case dn.AnnotationEditorType.INK:return pn.InkEditor.deserialize(Cn,this,Hn(this,Dn));case dn.AnnotationEditorType.STAMP:return gn.StampEditor.deserialize(Cn,this,Hn(this,Dn))}return null}addNewEditor(){Or(this,$n,t0).call(this,Or(this,$n,W0).call(this),!0)}setSelected(Cn){Hn(this,Dn).setSelected(Cn)}toggleSelected(Cn){Hn(this,Dn).toggleSelected(Cn)}isSelected(Cn){return Hn(this,Dn).isSelected(Cn)}unselect(Cn){Hn(this,Dn).unselect(Cn)}pointerup(Cn){const{isMac:Mn}=dn.FeatureTest.platform;if(!(Cn.button!==0||Cn.ctrlKey&&Mn)&&Cn.target===this.div&&Hn(this,In)){if(Fr(this,In,!1),!Hn(this,En)){Fr(this,En,!0);return}if(Hn(this,Dn).getMode()===dn.AnnotationEditorType.STAMP){Hn(this,Dn).unselectAll();return}Or(this,$n,t0).call(this,Cn,!1)}}pointerdown(Cn){if(Hn(this,In)){Fr(this,In,!1);return}const{isMac:Mn}=dn.FeatureTest.platform;if(Cn.button!==0||Cn.ctrlKey&&Mn||Cn.target!==this.div)return;Fr(this,In,!0);const Bn=Hn(this,Dn).getActive();Fr(this,En,!Bn||Bn.isEmpty())}findNewParent(Cn,Mn,Bn){const Xn=Hn(this,Dn).findParent(Mn,Bn);return Xn===null||Xn===this?!1:(Xn.changeParent(Cn),!0)}destroy(){var Cn,Mn;((Cn=Hn(this,Dn).getActive())==null?void 0:Cn.parent)===this&&(Hn(this,Dn).commitOrRemove(),Hn(this,Dn).setActiveEditor(null));for(const Bn of Hn(this,Tn).values())(Mn=Hn(this,xn))==null||Mn.removePointerInTextLayer(Bn.contentDiv),Bn.setParent(null),Bn.isAttachedToDOM=!1,Bn.div.remove();this.div=null,Hn(this,Tn).clear(),Hn(this,Dn).removeLayer(this)}render({viewport:Cn}){this.viewport=Cn,(0,mn.setLayerDimensions)(this.div,Cn);for(const Mn of Hn(this,Dn).getEditors(this.pageIndex))this.add(Mn);this.updateMode()}update({viewport:Cn}){Hn(this,Dn).commitOrRemove(),this.viewport=Cn,(0,mn.setLayerDimensions)(this.div,{rotation:Cn.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Cn,pageHeight:Mn}=this.viewport.rawDims;return[Cn,Mn]}};xn=new WeakMap,En=new WeakMap,bn=new WeakMap,vn=new WeakMap,Pn=new WeakMap,Tn=new WeakMap,In=new WeakMap,Rn=new WeakMap,Sn=new WeakMap,Dn=new WeakMap,$n=new WeakSet,H0=function(Cn){switch(Hn(this,Dn).getMode()){case dn.AnnotationEditorType.FREETEXT:return new fn.FreeTextEditor(Cn);case dn.AnnotationEditorType.INK:return new pn.InkEditor(Cn);case dn.AnnotationEditorType.STAMP:return new gn.StampEditor(Cn)}return null},t0=function(Cn,Mn){const Bn=this.getNextId(),Xn=Or(this,$n,H0).call(this,{parent:this,id:Bn,x:Cn.offsetX,y:Cn.offsetY,uiManager:Hn(this,Dn),isCentered:Mn});return Xn&&this.add(Xn),Xn},W0=function(){const{x:Cn,y:Mn,width:Bn,height:Xn}=this.div.getBoundingClientRect(),nr=Math.max(0,Cn),sr=Math.max(0,Mn),lr=Math.min(window.innerWidth,Cn+Bn),tr=Math.min(window.innerHeight,Mn+Xn),Jn=(nr+lr)/2-Cn,ar=(sr+tr)/2-Mn,[gr,qn]=this.viewport.rotation%180===0?[Jn,ar]:[ar,Jn];return{offsetX:gr,offsetY:qn}},G0=function(){Fr(this,Rn,!0);for(const Cn of Hn(this,Tn).values())Cn.isEmpty()&&Cn.remove();Fr(this,Rn,!1)},io(Ln,"_initialized",!1);let yn=Ln;e.AnnotationEditorLayer=yn},(_e,e,un)=>{var gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn,nx,rx,sx,Em,K0,ix,Y0;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var dn=un(1),hn=un(5),fn=un(4),pn=un(29);const Ln=class Ln extends fn.AnnotationEditor{constructor(Mn){super({...Mn,name:"freeTextEditor"});Br(this,Rn);Br(this,gn,this.editorDivBlur.bind(this));Br(this,yn,this.editorDivFocus.bind(this));Br(this,xn,this.editorDivInput.bind(this));Br(this,En,this.editorDivKeydown.bind(this));Br(this,bn);Br(this,vn,"");Br(this,Pn,`${this.id}-editor`);Br(this,Tn);Br(this,In,null);Fr(this,bn,Mn.color||Ln._defaultColor||fn.AnnotationEditor._defaultLineColor),Fr(this,Tn,Mn.fontSize||Ln._defaultFontSize)}static get _keyboardManager(){const Mn=Ln.prototype,Bn=sr=>sr.isEmpty(),Xn=hn.AnnotationEditorUIManager.TRANSLATE_SMALL,nr=hn.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,dn.shadow)(this,"_keyboardManager",new hn.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Mn.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Mn.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Mn._translateEmpty,{args:[-Xn,0],checker:Bn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Mn._translateEmpty,{args:[-nr,0],checker:Bn}],[["ArrowRight","mac+ArrowRight"],Mn._translateEmpty,{args:[Xn,0],checker:Bn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Mn._translateEmpty,{args:[nr,0],checker:Bn}],[["ArrowUp","mac+ArrowUp"],Mn._translateEmpty,{args:[0,-Xn],checker:Bn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Mn._translateEmpty,{args:[0,-nr],checker:Bn}],[["ArrowDown","mac+ArrowDown"],Mn._translateEmpty,{args:[0,Xn],checker:Bn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Mn._translateEmpty,{args:[0,nr],checker:Bn}]]))}static initialize(Mn){fn.AnnotationEditor.initialize(Mn,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Bn=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Bn.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Mn,Bn){switch(Mn){case dn.AnnotationEditorParamsType.FREETEXT_SIZE:Ln._defaultFontSize=Bn;break;case dn.AnnotationEditorParamsType.FREETEXT_COLOR:Ln._defaultColor=Bn;break}}updateParams(Mn,Bn){switch(Mn){case dn.AnnotationEditorParamsType.FREETEXT_SIZE:Or(this,Rn,nx).call(this,Bn);break;case dn.AnnotationEditorParamsType.FREETEXT_COLOR:Or(this,Rn,rx).call(this,Bn);break}}static get defaultPropertiesToUpdate(){return[[dn.AnnotationEditorParamsType.FREETEXT_SIZE,Ln._defaultFontSize],[dn.AnnotationEditorParamsType.FREETEXT_COLOR,Ln._defaultColor||fn.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[dn.AnnotationEditorParamsType.FREETEXT_SIZE,Hn(this,Tn)],[dn.AnnotationEditorParamsType.FREETEXT_COLOR,Hn(this,bn)]]}_translateEmpty(Mn,Bn){this._uiManager.translateSelectedEditors(Mn,Bn,!0)}getInitialTranslation(){const Mn=this.parentScale;return[-Ln._internalPadding*Mn,-(Ln._internalPadding+Hn(this,Tn))*Mn]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(dn.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",Hn(this,En)),this.editorDiv.addEventListener("focus",Hn(this,yn)),this.editorDiv.addEventListener("blur",Hn(this,gn)),this.editorDiv.addEventListener("input",Hn(this,xn)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Hn(this,Pn)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",Hn(this,En)),this.editorDiv.removeEventListener("focus",Hn(this,yn)),this.editorDiv.removeEventListener("blur",Hn(this,gn)),this.editorDiv.removeEventListener("input",Hn(this,xn)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Mn){this._focusEventsAllowed&&(super.focusin(Mn),Mn.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Mn;if(this.width){Or(this,Rn,Y0).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Mn=this._initialOptions)!=null&&Mn.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Mn=Hn(this,vn),Bn=Fr(this,vn,Or(this,Rn,sx).call(this).trimEnd());if(Mn===Bn)return;const Xn=nr=>{if(Fr(this,vn,nr),!nr){this.remove();return}Or(this,Rn,K0).call(this),this._uiManager.rebuild(this),Or(this,Rn,Em).call(this)};this.addCommands({cmd:()=>{Xn(Bn)},undo:()=>{Xn(Mn)},mustExec:!1}),Or(this,Rn,Em).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Mn){this.enterInEditMode()}keydown(Mn){Mn.target===this.div&&Mn.key==="Enter"&&(this.enterInEditMode(),Mn.preventDefault())}editorDivKeydown(Mn){Ln._keyboardManager.exec(this,Mn)}editorDivFocus(Mn){this.isEditing=!0}editorDivBlur(Mn){this.isEditing=!1}editorDivInput(Mn){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Mn,Bn;this.width&&(Mn=this.x,Bn=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Hn(this,Pn)),this.enableEditing(),fn.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(nr=>{var sr;return(sr=this.editorDiv)==null?void 0:sr.setAttribute("aria-label",nr)}),fn.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(nr=>{var sr;return(sr=this.editorDiv)==null?void 0:sr.setAttribute("default-content",nr)}),this.editorDiv.contentEditable=!0;const{style:Xn}=this.editorDiv;if(Xn.fontSize=`calc(${Hn(this,Tn)}px * var(--scale-factor))`,Xn.color=Hn(this,bn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,hn.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[nr,sr]=this.parentDimensions;if(this.annotationElementId){const{position:lr}=Hn(this,In);let[tr,Jn]=this.getInitialTranslation();[tr,Jn]=this.pageTranslationToScreen(tr,Jn);const[ar,gr]=this.pageDimensions,[qn,On]=this.pageTranslation;let Un,Yn;switch(this.rotation){case 0:Un=Mn+(lr[0]-qn)/ar,Yn=Bn+this.height-(lr[1]-On)/gr;break;case 90:Un=Mn+(lr[0]-qn)/ar,Yn=Bn-(lr[1]-On)/gr,[tr,Jn]=[Jn,-tr];break;case 180:Un=Mn-this.width+(lr[0]-qn)/ar,Yn=Bn-(lr[1]-On)/gr,[tr,Jn]=[-tr,-Jn];break;case 270:Un=Mn+(lr[0]-qn-this.height*gr)/ar,Yn=Bn+(lr[1]-On-this.width*ar)/gr,[tr,Jn]=[-Jn,tr];break}this.setAt(Un*nr,Yn*sr,tr,Jn)}else this.setAt(Mn*nr,Bn*sr,this.width*nr,this.height*sr);Or(this,Rn,K0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Mn,Bn,Xn){let nr=null;if(Mn instanceof pn.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:lr,fontColor:tr},rect:Jn,rotation:ar,id:gr},textContent:qn,textPosition:On,parent:{page:{pageNumber:Un}}}=Mn;if(!qn||qn.length===0)return null;nr=Mn={annotationType:dn.AnnotationEditorType.FREETEXT,color:Array.from(tr),fontSize:lr,value:qn.join(`
`),position:On,pageIndex:Un-1,rect:Jn,rotation:ar,id:gr,deleted:!1}}const sr=super.deserialize(Mn,Bn,Xn);return Fr(sr,Tn,Mn.fontSize),Fr(sr,bn,dn.Util.makeHexColor(...Mn.color)),Fr(sr,vn,Mn.value),sr.annotationElementId=Mn.id||null,Fr(sr,In,nr),sr}serialize(Mn=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Bn=Ln._internalPadding*this.parentScale,Xn=this.getRect(Bn,Bn),nr=fn.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Hn(this,bn)),sr={annotationType:dn.AnnotationEditorType.FREETEXT,color:nr,fontSize:Hn(this,Tn),value:Hn(this,vn),pageIndex:this.pageIndex,rect:Xn,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Mn?sr:this.annotationElementId&&!Or(this,Rn,ix).call(this,sr)?null:(sr.id=this.annotationElementId,sr)}};gn=new WeakMap,yn=new WeakMap,xn=new WeakMap,En=new WeakMap,bn=new WeakMap,vn=new WeakMap,Pn=new WeakMap,Tn=new WeakMap,In=new WeakMap,Rn=new WeakSet,nx=function(Mn){const Bn=nr=>{this.editorDiv.style.fontSize=`calc(${nr}px * var(--scale-factor))`,this.translate(0,-(nr-Hn(this,Tn))*this.parentScale),Fr(this,Tn,nr),Or(this,Rn,Em).call(this)},Xn=Hn(this,Tn);this.addCommands({cmd:()=>{Bn(Mn)},undo:()=>{Bn(Xn)},mustExec:!0,type:dn.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},rx=function(Mn){const Bn=Hn(this,bn);this.addCommands({cmd:()=>{Fr(this,bn,this.editorDiv.style.color=Mn)},undo:()=>{Fr(this,bn,this.editorDiv.style.color=Bn)},mustExec:!0,type:dn.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sx=function(){const Mn=this.editorDiv.getElementsByTagName("div");if(Mn.length===0)return this.editorDiv.innerText;const Bn=[];for(const Xn of Mn)Bn.push(Xn.innerText.replace(/\r\n?|\n/,""));return Bn.join(`
`)},Em=function(){const[Mn,Bn]=this.parentDimensions;let Xn;if(this.isAttachedToDOM)Xn=this.div.getBoundingClientRect();else{const{currentLayer:nr,div:sr}=this,lr=sr.style.display;sr.style.display="hidden",nr.div.append(this.div),Xn=sr.getBoundingClientRect(),sr.remove(),sr.style.display=lr}this.rotation%180===this.parentRotation%180?(this.width=Xn.width/Mn,this.height=Xn.height/Bn):(this.width=Xn.height/Mn,this.height=Xn.width/Bn),this.fixAndSetPosition()},K0=function(){if(this.editorDiv.replaceChildren(),!!Hn(this,vn))for(const Mn of Hn(this,vn).split(`
`)){const Bn=document.createElement("div");Bn.append(Mn?document.createTextNode(Mn):document.createElement("br")),this.editorDiv.append(Bn)}},ix=function(Mn){const{value:Bn,fontSize:Xn,color:nr,rect:sr,pageIndex:lr}=Hn(this,In);return Mn.value!==Bn||Mn.fontSize!==Xn||Mn.rect.some((tr,Jn)=>Math.abs(tr-sr[Jn])>=1)||Mn.color.some((tr,Jn)=>tr!==nr[Jn])||Mn.pageIndex!==lr},Y0=function(Mn=!1){if(!this.annotationElementId)return;if(Or(this,Rn,Em).call(this),!Mn&&(this.width===0||this.height===0)){setTimeout(()=>Or(this,Rn,Y0).call(this,!0),0);return}const Bn=Ln._internalPadding*this.parentScale;Hn(this,In).rect=this.getRect(Bn,Bn)},io(Ln,"_freeTextDefaultContent",""),io(Ln,"_internalPadding",0),io(Ln,"_defaultColor",null),io(Ln,"_defaultFontSize",10),io(Ln,"_type","freetext");let mn=Ln;e.FreeTextEditor=mn},(_e,e,un)=>{var Yn,Zn,up,ox,br,Tr,Ir,Mr,qr,Ar,or,jr,cr,hr,wr,Pr,kr,Hr,Kr,Nr,ns,ts,ax,n0,X0,Q0,Ss,js,Bs,es,Vr,Wr,is,J0,ws,Rr,Zr,ds,lx,Z0;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var dn=un(1),hn=un(6),fn=un(3),pn=un(30),mn=un(31),gn=un(32);const yn=1e3,xn=9,En=new WeakSet;function bn(Ts){return{width:Ts[2]-Ts[0],height:Ts[3]-Ts[1]}}class vn{static create(Er){switch(Er.data.annotationType){case dn.AnnotationType.LINK:return new Tn(Er);case dn.AnnotationType.TEXT:return new In(Er);case dn.AnnotationType.WIDGET:switch(Er.data.fieldType){case"Tx":return new Sn(Er);case"Btn":return Er.data.radioButton?new Fn(Er):Er.data.checkBox?new $n(Er):new Gn(Er);case"Ch":return new kn(Er);case"Sig":return new Dn(Er)}return new Rn(Er);case dn.AnnotationType.POPUP:return new Nn(Er);case dn.AnnotationType.FREETEXT:return new zn(Er);case dn.AnnotationType.LINE:return new Cn(Er);case dn.AnnotationType.SQUARE:return new Mn(Er);case dn.AnnotationType.CIRCLE:return new Bn(Er);case dn.AnnotationType.POLYLINE:return new Xn(Er);case dn.AnnotationType.CARET:return new sr(Er);case dn.AnnotationType.INK:return new lr(Er);case dn.AnnotationType.POLYGON:return new nr(Er);case dn.AnnotationType.HIGHLIGHT:return new tr(Er);case dn.AnnotationType.UNDERLINE:return new Jn(Er);case dn.AnnotationType.SQUIGGLY:return new ar(Er);case dn.AnnotationType.STRIKEOUT:return new gr(Er);case dn.AnnotationType.STAMP:return new qn(Er);case dn.AnnotationType.FILEATTACHMENT:return new On(Er);default:return new Pn(Er)}}}const er=class er{constructor(Er,{isRenderable:vr=!1,ignoreBorder:Lr=!1,createQuadrilaterals:Dr=!1}={}){Br(this,Yn,!1);this.isRenderable=vr,this.data=Er.data,this.layer=Er.layer,this.linkService=Er.linkService,this.downloadManager=Er.downloadManager,this.imageResourcesPath=Er.imageResourcesPath,this.renderForms=Er.renderForms,this.svgFactory=Er.svgFactory,this.annotationStorage=Er.annotationStorage,this.enableScripting=Er.enableScripting,this.hasJSActions=Er.hasJSActions,this._fieldObjects=Er.fieldObjects,this.parent=Er.parent,vr&&(this.container=this._createContainer(Lr)),Dr&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Er,contentsObj:vr,richText:Lr}){return!!(Er!=null&&Er.str||vr!=null&&vr.str||Lr!=null&&Lr.str)}get hasPopupData(){return er._hasPopupData(this.data)}_createContainer(Er){const{data:vr,parent:{page:Lr,viewport:Dr}}=this,Jr=document.createElement("section");Jr.setAttribute("data-annotation-id",vr.id),this instanceof Rn||(Jr.tabIndex=yn),Jr.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Jr.setAttribute("aria-haspopup","dialog"),vr.noRotate&&Jr.classList.add("norotate");const{pageWidth:ls,pageHeight:cs,pageX:Rs,pageY:As}=Dr.rawDims;if(!vr.rect||this instanceof Nn){const{rotation:Os}=vr;return!vr.hasOwnCanvas&&Os!==0&&this.setRotation(Os,Jr),Jr}const{width:gs,height:$s}=bn(vr.rect),Ns=dn.Util.normalizeRect([vr.rect[0],Lr.view[3]-vr.rect[1]+Lr.view[1],vr.rect[2],Lr.view[3]-vr.rect[3]+Lr.view[1]]);if(!Er&&vr.borderStyle.width>0){Jr.style.borderWidth=`${vr.borderStyle.width}px`;const Os=vr.borderStyle.horizontalCornerRadius,Vs=vr.borderStyle.verticalCornerRadius;if(Os>0||Vs>0){const zs=`calc(${Os}px * var(--scale-factor)) / calc(${Vs}px * var(--scale-factor))`;Jr.style.borderRadius=zs}else if(this instanceof Fn){const zs=`calc(${gs}px * var(--scale-factor)) / calc(${$s}px * var(--scale-factor))`;Jr.style.borderRadius=zs}switch(vr.borderStyle.style){case dn.AnnotationBorderStyleType.SOLID:Jr.style.borderStyle="solid";break;case dn.AnnotationBorderStyleType.DASHED:Jr.style.borderStyle="dashed";break;case dn.AnnotationBorderStyleType.BEVELED:(0,dn.warn)("Unimplemented border style: beveled");break;case dn.AnnotationBorderStyleType.INSET:(0,dn.warn)("Unimplemented border style: inset");break;case dn.AnnotationBorderStyleType.UNDERLINE:Jr.style.borderBottomStyle="solid";break}const Us=vr.borderColor||null;Us?(Fr(this,Yn,!0),Jr.style.borderColor=dn.Util.makeHexColor(Us[0]|0,Us[1]|0,Us[2]|0)):Jr.style.borderWidth=0}Jr.style.left=`${100*(Ns[0]-Rs)/ls}%`,Jr.style.top=`${100*(Ns[1]-As)/cs}%`;const{rotation:Is}=vr;return vr.hasOwnCanvas||Is===0?(Jr.style.width=`${100*gs/ls}%`,Jr.style.height=`${100*$s/cs}%`):this.setRotation(Is,Jr),Jr}setRotation(Er,vr=this.container){if(!this.data.rect)return;const{pageWidth:Lr,pageHeight:Dr}=this.parent.viewport.rawDims,{width:Jr,height:ls}=bn(this.data.rect);let cs,Rs;Er%180===0?(cs=100*Jr/Lr,Rs=100*ls/Dr):(cs=100*ls/Lr,Rs=100*Jr/Dr),vr.style.width=`${cs}%`,vr.style.height=`${Rs}%`,vr.setAttribute("data-main-rotation",(360-Er)%360)}get _commonActions(){const Er=(vr,Lr,Dr)=>{const Jr=Dr.detail[vr],ls=Jr[0],cs=Jr.slice(1);Dr.target.style[Lr]=pn.ColorConverters[`${ls}_HTML`](cs),this.annotationStorage.setValue(this.data.id,{[Lr]:pn.ColorConverters[`${ls}_rgb`](cs)})};return(0,dn.shadow)(this,"_commonActions",{display:vr=>{const{display:Lr}=vr.detail,Dr=Lr%2===1;this.container.style.visibility=Dr?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Dr,noPrint:Lr===1||Lr===2})},print:vr=>{this.annotationStorage.setValue(this.data.id,{noPrint:!vr.detail.print})},hidden:vr=>{const{hidden:Lr}=vr.detail;this.container.style.visibility=Lr?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Lr,noView:Lr})},focus:vr=>{setTimeout(()=>vr.target.focus({preventScroll:!1}),0)},userName:vr=>{vr.target.title=vr.detail.userName},readonly:vr=>{vr.target.disabled=vr.detail.readonly},required:vr=>{this._setRequired(vr.target,vr.detail.required)},bgColor:vr=>{Er("bgColor","backgroundColor",vr)},fillColor:vr=>{Er("fillColor","backgroundColor",vr)},fgColor:vr=>{Er("fgColor","color",vr)},textColor:vr=>{Er("textColor","color",vr)},borderColor:vr=>{Er("borderColor","borderColor",vr)},strokeColor:vr=>{Er("strokeColor","borderColor",vr)},rotation:vr=>{const Lr=vr.detail.rotation;this.setRotation(Lr),this.annotationStorage.setValue(this.data.id,{rotation:Lr})}})}_dispatchEventFromSandbox(Er,vr){const Lr=this._commonActions;for(const Dr of Object.keys(vr.detail)){const Jr=Er[Dr]||Lr[Dr];Jr==null||Jr(vr)}}_setDefaultPropertiesFromJS(Er){if(!this.enableScripting)return;const vr=this.annotationStorage.getRawValue(this.data.id);if(!vr)return;const Lr=this._commonActions;for(const[Dr,Jr]of Object.entries(vr)){const ls=Lr[Dr];if(ls){const cs={detail:{[Dr]:Jr},target:Er};ls(cs),delete vr[Dr]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Er}=this.data;if(!Er)return;const[vr,Lr,Dr,Jr]=this.data.rect;if(Er.length===1){const[,{x:Vs,y:Us},{x:zs,y:Zs}]=Er[0];if(Dr===Vs&&Jr===Us&&vr===zs&&Lr===Zs)return}const{style:ls}=this.container;let cs;if(Hn(this,Yn)){const{borderColor:Vs,borderWidth:Us}=ls;ls.borderWidth=0,cs=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Vs}" stroke-width="${Us}">`],this.container.classList.add("hasBorder")}const Rs=Dr-vr,As=Jr-Lr,{svgFactory:gs}=this,$s=gs.createElement("svg");$s.classList.add("quadrilateralsContainer"),$s.setAttribute("width",0),$s.setAttribute("height",0);const Ns=gs.createElement("defs");$s.append(Ns);const Is=gs.createElement("clipPath"),Os=`clippath_${this.data.id}`;Is.setAttribute("id",Os),Is.setAttribute("clipPathUnits","objectBoundingBox"),Ns.append(Is);for(const[,{x:Vs,y:Us},{x:zs,y:Zs}]of Er){const Qs=gs.createElement("rect"),vo=(zs-vr)/Rs,bo=(Jr-Us)/As,Ro=(Vs-zs)/Rs,Qo=(Us-Zs)/As;Qs.setAttribute("x",vo),Qs.setAttribute("y",bo),Qs.setAttribute("width",Ro),Qs.setAttribute("height",Qo),Is.append(Qs),cs==null||cs.push(`<rect vector-effect="non-scaling-stroke" x="${vo}" y="${bo}" width="${Ro}" height="${Qo}"/>`)}Hn(this,Yn)&&(cs.push("</g></svg>')"),ls.backgroundImage=cs.join("")),this.container.append($s),this.container.style.clipPath=`url(#${Os})`}_createPopup(){const{container:Er,data:vr}=this;Er.setAttribute("aria-haspopup","dialog");const Lr=new Nn({data:{color:vr.color,titleObj:vr.titleObj,modificationDate:vr.modificationDate,contentsObj:vr.contentsObj,richText:vr.richText,parentRect:vr.rect,borderStyle:0,id:`popup_${vr.id}`,rotation:vr.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Lr.render())}render(){(0,dn.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Er,vr=null){const Lr=[];if(this._fieldObjects){const Dr=this._fieldObjects[Er];if(Dr)for(const{page:Jr,id:ls,exportValues:cs}of Dr){if(Jr===-1||ls===vr)continue;const Rs=typeof cs=="string"?cs:null,As=document.querySelector(`[data-element-id="${ls}"]`);if(As&&!En.has(As)){(0,dn.warn)(`_getElementsByName - element not allowed: ${ls}`);continue}Lr.push({id:ls,exportValue:Rs,domElement:As})}return Lr}for(const Dr of document.getElementsByName(Er)){const{exportValue:Jr}=Dr,ls=Dr.getAttribute("data-element-id");ls!==vr&&En.has(Dr)&&Lr.push({id:ls,exportValue:Jr,domElement:Dr})}return Lr}show(){var Er;this.container&&(this.container.hidden=!1),(Er=this.popup)==null||Er.maybeShow()}hide(){var Er;this.container&&(this.container.hidden=!0),(Er=this.popup)==null||Er.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Er=this.getElementsToTriggerPopup();if(Array.isArray(Er))for(const vr of Er)vr.classList.add("highlightArea");else Er.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Er,data:{id:vr}}=this;this.container.addEventListener("dblclick",()=>{var Lr;(Lr=this.linkService.eventBus)==null||Lr.dispatch("switchannotationeditormode",{source:this,mode:Er,editId:vr})})}};Yn=new WeakMap;let Pn=er;class Tn extends Pn{constructor(vr,Lr=null){super(vr,{isRenderable:!0,ignoreBorder:!!(Lr!=null&&Lr.ignoreBorder),createQuadrilaterals:!0});Br(this,Zn);this.isTooltipOnly=vr.data.isTooltipOnly}render(){const{data:vr,linkService:Lr}=this,Dr=document.createElement("a");Dr.setAttribute("data-element-id",vr.id);let Jr=!1;return vr.url?(Lr.addLinkAttributes(Dr,vr.url,vr.newWindow),Jr=!0):vr.action?(this._bindNamedAction(Dr,vr.action),Jr=!0):vr.attachment?(this._bindAttachment(Dr,vr.attachment),Jr=!0):vr.setOCGState?(Or(this,Zn,ox).call(this,Dr,vr.setOCGState),Jr=!0):vr.dest?(this._bindLink(Dr,vr.dest),Jr=!0):(vr.actions&&(vr.actions.Action||vr.actions["Mouse Up"]||vr.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Dr,vr),Jr=!0),vr.resetForm?(this._bindResetFormAction(Dr,vr.resetForm),Jr=!0):this.isTooltipOnly&&!Jr&&(this._bindLink(Dr,""),Jr=!0)),this.container.classList.add("linkAnnotation"),Jr&&this.container.append(Dr),this.container}_bindLink(vr,Lr){vr.href=this.linkService.getDestinationHash(Lr),vr.onclick=()=>(Lr&&this.linkService.goToDestination(Lr),!1),(Lr||Lr==="")&&Or(this,Zn,up).call(this)}_bindNamedAction(vr,Lr){vr.href=this.linkService.getAnchorUrl(""),vr.onclick=()=>(this.linkService.executeNamedAction(Lr),!1),Or(this,Zn,up).call(this)}_bindAttachment(vr,Lr){vr.href=this.linkService.getAnchorUrl(""),vr.onclick=()=>{var Dr;return(Dr=this.downloadManager)==null||Dr.openOrDownloadData(this.container,Lr.content,Lr.filename),!1},Or(this,Zn,up).call(this)}_bindJSAction(vr,Lr){vr.href=this.linkService.getAnchorUrl("");const Dr=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Jr of Object.keys(Lr.actions)){const ls=Dr.get(Jr);ls&&(vr[ls]=()=>{var cs;return(cs=this.linkService.eventBus)==null||cs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Lr.id,name:Jr}}),!1})}vr.onclick||(vr.onclick=()=>!1),Or(this,Zn,up).call(this)}_bindResetFormAction(vr,Lr){const Dr=vr.onclick;if(Dr||(vr.href=this.linkService.getAnchorUrl("")),Or(this,Zn,up).call(this),!this._fieldObjects){(0,dn.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Dr||(vr.onclick=()=>!1);return}vr.onclick=()=>{var $s;Dr==null||Dr();const{fields:Jr,refs:ls,include:cs}=Lr,Rs=[];if(Jr.length!==0||ls.length!==0){const Ns=new Set(ls);for(const Is of Jr){const Os=this._fieldObjects[Is]||[];for(const{id:Vs}of Os)Ns.add(Vs)}for(const Is of Object.values(this._fieldObjects))for(const Os of Is)Ns.has(Os.id)===cs&&Rs.push(Os)}else for(const Ns of Object.values(this._fieldObjects))Rs.push(...Ns);const As=this.annotationStorage,gs=[];for(const Ns of Rs){const{id:Is}=Ns;switch(gs.push(Is),Ns.type){case"text":{const Vs=Ns.defaultValue||"";As.setValue(Is,{value:Vs});break}case"checkbox":case"radiobutton":{const Vs=Ns.defaultValue===Ns.exportValues;As.setValue(Is,{value:Vs});break}case"combobox":case"listbox":{const Vs=Ns.defaultValue||"";As.setValue(Is,{value:Vs});break}default:continue}const Os=document.querySelector(`[data-element-id="${Is}"]`);if(Os){if(!En.has(Os)){(0,dn.warn)(`_bindResetFormAction - element not allowed: ${Is}`);continue}}else continue;Os.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(($s=this.linkService.eventBus)==null||$s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:gs,name:"ResetForm"}})),!1}}}Zn=new WeakSet,up=function(){this.container.setAttribute("data-internal-link","")},ox=function(vr,Lr){vr.href=this.linkService.getAnchorUrl(""),vr.onclick=()=>(this.linkService.executeSetOCGState(Lr),!1),Or(this,Zn,up).call(this)};class In extends Pn{constructor(Er){super(Er,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Er=document.createElement("img");return Er.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Er.alt="[{{type}} Annotation]",Er.dataset.l10nId="text_annotation_type",Er.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Er),this.container}}class Rn extends Pn{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Er){var vr;this.data.hasOwnCanvas&&(((vr=Er.previousSibling)==null?void 0:vr.nodeName)==="CANVAS"&&(Er.previousSibling.hidden=!0),Er.hidden=!1)}_getKeyModifier(Er){const{isWin:vr,isMac:Lr}=dn.FeatureTest.platform;return vr&&Er.ctrlKey||Lr&&Er.metaKey}_setEventListener(Er,vr,Lr,Dr,Jr){Lr.includes("mouse")?Er.addEventListener(Lr,ls=>{var cs;(cs=this.linkService.eventBus)==null||cs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Dr,value:Jr(ls),shift:ls.shiftKey,modifier:this._getKeyModifier(ls)}})}):Er.addEventListener(Lr,ls=>{var cs;if(Lr==="blur"){if(!vr.focused||!ls.relatedTarget)return;vr.focused=!1}else if(Lr==="focus"){if(vr.focused)return;vr.focused=!0}Jr&&((cs=this.linkService.eventBus)==null||cs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Dr,value:Jr(ls)}}))})}_setEventListeners(Er,vr,Lr,Dr){var Jr,ls,cs;for(const[Rs,As]of Lr)(As==="Action"||(Jr=this.data.actions)!=null&&Jr[As])&&((As==="Focus"||As==="Blur")&&(vr||(vr={focused:!1})),this._setEventListener(Er,vr,Rs,As,Dr),As==="Focus"&&!((ls=this.data.actions)!=null&&ls.Blur)?this._setEventListener(Er,vr,"blur","Blur",null):As==="Blur"&&!((cs=this.data.actions)!=null&&cs.Focus)&&this._setEventListener(Er,vr,"focus","Focus",null))}_setBackgroundColor(Er){const vr=this.data.backgroundColor||null;Er.style.backgroundColor=vr===null?"transparent":dn.Util.makeHexColor(vr[0],vr[1],vr[2])}_setTextStyle(Er){const vr=["left","center","right"],{fontColor:Lr}=this.data.defaultAppearanceData,Dr=this.data.defaultAppearanceData.fontSize||xn,Jr=Er.style;let ls;const cs=2,Rs=As=>Math.round(10*As)/10;if(this.data.multiLine){const As=Math.abs(this.data.rect[3]-this.data.rect[1]-cs),gs=Math.round(As/(dn.LINE_FACTOR*Dr))||1,$s=As/gs;ls=Math.min(Dr,Rs($s/dn.LINE_FACTOR))}else{const As=Math.abs(this.data.rect[3]-this.data.rect[1]-cs);ls=Math.min(Dr,Rs(As/dn.LINE_FACTOR))}Jr.fontSize=`calc(${ls}px * var(--scale-factor))`,Jr.color=dn.Util.makeHexColor(Lr[0],Lr[1],Lr[2]),this.data.textAlignment!==null&&(Jr.textAlign=vr[this.data.textAlignment])}_setRequired(Er,vr){vr?Er.setAttribute("required",!0):Er.removeAttribute("required"),Er.setAttribute("aria-required",vr)}}class Sn extends Rn{constructor(Er){const vr=Er.renderForms||!Er.data.hasAppearance&&!!Er.data.fieldValue;super(Er,{isRenderable:vr})}setPropertyOnSiblings(Er,vr,Lr,Dr){const Jr=this.annotationStorage;for(const ls of this._getElementsByName(Er.name,Er.id))ls.domElement&&(ls.domElement[vr]=Lr),Jr.setValue(ls.id,{[Dr]:Lr})}render(){var Dr,Jr;const Er=this.annotationStorage,vr=this.data.id;this.container.classList.add("textWidgetAnnotation");let Lr=null;if(this.renderForms){const ls=Er.getValue(vr,{value:this.data.fieldValue});let cs=ls.value||"";const Rs=Er.getValue(vr,{charLimit:this.data.maxLen}).charLimit;Rs&&cs.length>Rs&&(cs=cs.slice(0,Rs));let As=ls.formattedValue||((Dr=this.data.textContent)==null?void 0:Dr.join(`
`))||null;As&&this.data.comb&&(As=As.replaceAll(/\s+/g,""));const gs={userValue:cs,formattedValue:As,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Lr=document.createElement("textarea"),Lr.textContent=As??cs,this.data.doNotScroll&&(Lr.style.overflowY="hidden")):(Lr=document.createElement("input"),Lr.type="text",Lr.setAttribute("value",As??cs),this.data.doNotScroll&&(Lr.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Lr.hidden=!0),En.add(Lr),Lr.setAttribute("data-element-id",vr),Lr.disabled=this.data.readOnly,Lr.name=this.data.fieldName,Lr.tabIndex=yn,this._setRequired(Lr,this.data.required),Rs&&(Lr.maxLength=Rs),Lr.addEventListener("input",Ns=>{Er.setValue(vr,{value:Ns.target.value}),this.setPropertyOnSiblings(Lr,"value",Ns.target.value,"value"),gs.formattedValue=null}),Lr.addEventListener("resetform",Ns=>{const Is=this.data.defaultFieldValue??"";Lr.value=gs.userValue=Is,gs.formattedValue=null});let $s=Ns=>{const{formattedValue:Is}=gs;Is!=null&&(Ns.target.value=Is),Ns.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Lr.addEventListener("focus",Is=>{if(gs.focused)return;const{target:Os}=Is;gs.userValue&&(Os.value=gs.userValue),gs.lastCommittedValue=Os.value,gs.commitKey=1,gs.focused=!0}),Lr.addEventListener("updatefromsandbox",Is=>{this.showElementAndHideCanvas(Is.target);const Os={value(Vs){gs.userValue=Vs.detail.value??"",Er.setValue(vr,{value:gs.userValue.toString()}),Vs.target.value=gs.userValue},formattedValue(Vs){const{formattedValue:Us}=Vs.detail;gs.formattedValue=Us,Us!=null&&Vs.target!==document.activeElement&&(Vs.target.value=Us),Er.setValue(vr,{formattedValue:Us})},selRange(Vs){Vs.target.setSelectionRange(...Vs.detail.selRange)},charLimit:Vs=>{var Qs;const{charLimit:Us}=Vs.detail,{target:zs}=Vs;if(Us===0){zs.removeAttribute("maxLength");return}zs.setAttribute("maxLength",Us);let Zs=gs.userValue;!Zs||Zs.length<=Us||(Zs=Zs.slice(0,Us),zs.value=gs.userValue=Zs,Er.setValue(vr,{value:Zs}),(Qs=this.linkService.eventBus)==null||Qs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:vr,name:"Keystroke",value:Zs,willCommit:!0,commitKey:1,selStart:zs.selectionStart,selEnd:zs.selectionEnd}}))}};this._dispatchEventFromSandbox(Os,Is)}),Lr.addEventListener("keydown",Is=>{var Us;gs.commitKey=1;let Os=-1;if(Is.key==="Escape"?Os=0:Is.key==="Enter"&&!this.data.multiLine?Os=2:Is.key==="Tab"&&(gs.commitKey=3),Os===-1)return;const{value:Vs}=Is.target;gs.lastCommittedValue!==Vs&&(gs.lastCommittedValue=Vs,gs.userValue=Vs,(Us=this.linkService.eventBus)==null||Us.dispatch("dispatcheventinsandbox",{source:this,detail:{id:vr,name:"Keystroke",value:Vs,willCommit:!0,commitKey:Os,selStart:Is.target.selectionStart,selEnd:Is.target.selectionEnd}}))});const Ns=$s;$s=null,Lr.addEventListener("blur",Is=>{var Vs;if(!gs.focused||!Is.relatedTarget)return;gs.focused=!1;const{value:Os}=Is.target;gs.userValue=Os,gs.lastCommittedValue!==Os&&((Vs=this.linkService.eventBus)==null||Vs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:vr,name:"Keystroke",value:Os,willCommit:!0,commitKey:gs.commitKey,selStart:Is.target.selectionStart,selEnd:Is.target.selectionEnd}})),Ns(Is)}),(Jr=this.data.actions)!=null&&Jr.Keystroke&&Lr.addEventListener("beforeinput",Is=>{var bo;gs.lastCommittedValue=null;const{data:Os,target:Vs}=Is,{value:Us,selectionStart:zs,selectionEnd:Zs}=Vs;let Qs=zs,vo=Zs;switch(Is.inputType){case"deleteWordBackward":{const Ro=Us.substring(0,zs).match(/\w*[^\w]*$/);Ro&&(Qs-=Ro[0].length);break}case"deleteWordForward":{const Ro=Us.substring(zs).match(/^[^\w]*\w*/);Ro&&(vo+=Ro[0].length);break}case"deleteContentBackward":zs===Zs&&(Qs-=1);break;case"deleteContentForward":zs===Zs&&(vo+=1);break}Is.preventDefault(),(bo=this.linkService.eventBus)==null||bo.dispatch("dispatcheventinsandbox",{source:this,detail:{id:vr,name:"Keystroke",value:Us,change:Os||"",willCommit:!1,selStart:Qs,selEnd:vo}})}),this._setEventListeners(Lr,gs,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Is=>Is.target.value)}if($s&&Lr.addEventListener("blur",$s),this.data.comb){const Is=(this.data.rect[2]-this.data.rect[0])/Rs;Lr.classList.add("comb"),Lr.style.letterSpacing=`calc(${Is}px * var(--scale-factor) - 1ch)`}}else Lr=document.createElement("div"),Lr.textContent=this.data.fieldValue,Lr.style.verticalAlign="middle",Lr.style.display="table-cell";return this._setTextStyle(Lr),this._setBackgroundColor(Lr),this._setDefaultPropertiesFromJS(Lr),this.container.append(Lr),this.container}}class Dn extends Rn{constructor(Er){super(Er,{isRenderable:!!Er.data.hasOwnCanvas})}}class $n extends Rn{constructor(Er){super(Er,{isRenderable:Er.renderForms})}render(){const Er=this.annotationStorage,vr=this.data,Lr=vr.id;let Dr=Er.getValue(Lr,{value:vr.exportValue===vr.fieldValue}).value;typeof Dr=="string"&&(Dr=Dr!=="Off",Er.setValue(Lr,{value:Dr})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Jr=document.createElement("input");return En.add(Jr),Jr.setAttribute("data-element-id",Lr),Jr.disabled=vr.readOnly,this._setRequired(Jr,this.data.required),Jr.type="checkbox",Jr.name=vr.fieldName,Dr&&Jr.setAttribute("checked",!0),Jr.setAttribute("exportValue",vr.exportValue),Jr.tabIndex=yn,Jr.addEventListener("change",ls=>{const{name:cs,checked:Rs}=ls.target;for(const As of this._getElementsByName(cs,Lr)){const gs=Rs&&As.exportValue===vr.exportValue;As.domElement&&(As.domElement.checked=gs),Er.setValue(As.id,{value:gs})}Er.setValue(Lr,{value:Rs})}),Jr.addEventListener("resetform",ls=>{const cs=vr.defaultFieldValue||"Off";ls.target.checked=cs===vr.exportValue}),this.enableScripting&&this.hasJSActions&&(Jr.addEventListener("updatefromsandbox",ls=>{const cs={value(Rs){Rs.target.checked=Rs.detail.value!=="Off",Er.setValue(Lr,{value:Rs.target.checked})}};this._dispatchEventFromSandbox(cs,ls)}),this._setEventListeners(Jr,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ls=>ls.target.checked)),this._setBackgroundColor(Jr),this._setDefaultPropertiesFromJS(Jr),this.container.append(Jr),this.container}}class Fn extends Rn{constructor(Er){super(Er,{isRenderable:Er.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Er=this.annotationStorage,vr=this.data,Lr=vr.id;let Dr=Er.getValue(Lr,{value:vr.fieldValue===vr.buttonValue}).value;typeof Dr=="string"&&(Dr=Dr!==vr.buttonValue,Er.setValue(Lr,{value:Dr}));const Jr=document.createElement("input");if(En.add(Jr),Jr.setAttribute("data-element-id",Lr),Jr.disabled=vr.readOnly,this._setRequired(Jr,this.data.required),Jr.type="radio",Jr.name=vr.fieldName,Dr&&Jr.setAttribute("checked",!0),Jr.tabIndex=yn,Jr.addEventListener("change",ls=>{const{name:cs,checked:Rs}=ls.target;for(const As of this._getElementsByName(cs,Lr))Er.setValue(As.id,{value:!1});Er.setValue(Lr,{value:Rs})}),Jr.addEventListener("resetform",ls=>{const cs=vr.defaultFieldValue;ls.target.checked=cs!=null&&cs===vr.buttonValue}),this.enableScripting&&this.hasJSActions){const ls=vr.buttonValue;Jr.addEventListener("updatefromsandbox",cs=>{const Rs={value:As=>{const gs=ls===As.detail.value;for(const $s of this._getElementsByName(As.target.name)){const Ns=gs&&$s.id===Lr;$s.domElement&&($s.domElement.checked=Ns),Er.setValue($s.id,{value:Ns})}}};this._dispatchEventFromSandbox(Rs,cs)}),this._setEventListeners(Jr,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],cs=>cs.target.checked)}return this._setBackgroundColor(Jr),this._setDefaultPropertiesFromJS(Jr),this.container.append(Jr),this.container}}class Gn extends Tn{constructor(Er){super(Er,{ignoreBorder:Er.data.hasAppearance})}render(){const Er=super.render();Er.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Er.title=this.data.alternativeText);const vr=Er.lastChild;return this.enableScripting&&this.hasJSActions&&vr&&(this._setDefaultPropertiesFromJS(vr),vr.addEventListener("updatefromsandbox",Lr=>{this._dispatchEventFromSandbox({},Lr)})),Er}}class kn extends Rn{constructor(Er){super(Er,{isRenderable:Er.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Er=this.annotationStorage,vr=this.data.id,Lr=Er.getValue(vr,{value:this.data.fieldValue}),Dr=document.createElement("select");En.add(Dr),Dr.setAttribute("data-element-id",vr),Dr.disabled=this.data.readOnly,this._setRequired(Dr,this.data.required),Dr.name=this.data.fieldName,Dr.tabIndex=yn;let Jr=this.data.combo&&this.data.options.length>0;this.data.combo||(Dr.size=this.data.options.length,this.data.multiSelect&&(Dr.multiple=!0)),Dr.addEventListener("resetform",gs=>{const $s=this.data.defaultFieldValue;for(const Ns of Dr.options)Ns.selected=Ns.value===$s});for(const gs of this.data.options){const $s=document.createElement("option");$s.textContent=gs.displayValue,$s.value=gs.exportValue,Lr.value.includes(gs.exportValue)&&($s.setAttribute("selected",!0),Jr=!1),Dr.append($s)}let ls=null;if(Jr){const gs=document.createElement("option");gs.value=" ",gs.setAttribute("hidden",!0),gs.setAttribute("selected",!0),Dr.prepend(gs),ls=()=>{gs.remove(),Dr.removeEventListener("input",ls),ls=null},Dr.addEventListener("input",ls)}const cs=gs=>{const $s=gs?"value":"textContent",{options:Ns,multiple:Is}=Dr;return Is?Array.prototype.filter.call(Ns,Os=>Os.selected).map(Os=>Os[$s]):Ns.selectedIndex===-1?null:Ns[Ns.selectedIndex][$s]};let Rs=cs(!1);const As=gs=>{const $s=gs.target.options;return Array.prototype.map.call($s,Ns=>({displayValue:Ns.textContent,exportValue:Ns.value}))};return this.enableScripting&&this.hasJSActions?(Dr.addEventListener("updatefromsandbox",gs=>{const $s={value(Ns){ls==null||ls();const Is=Ns.detail.value,Os=new Set(Array.isArray(Is)?Is:[Is]);for(const Vs of Dr.options)Vs.selected=Os.has(Vs.value);Er.setValue(vr,{value:cs(!0)}),Rs=cs(!1)},multipleSelection(Ns){Dr.multiple=!0},remove(Ns){const Is=Dr.options,Os=Ns.detail.remove;Is[Os].selected=!1,Dr.remove(Os),Is.length>0&&Array.prototype.findIndex.call(Is,Us=>Us.selected)===-1&&(Is[0].selected=!0),Er.setValue(vr,{value:cs(!0),items:As(Ns)}),Rs=cs(!1)},clear(Ns){for(;Dr.length!==0;)Dr.remove(0);Er.setValue(vr,{value:null,items:[]}),Rs=cs(!1)},insert(Ns){const{index:Is,displayValue:Os,exportValue:Vs}=Ns.detail.insert,Us=Dr.children[Is],zs=document.createElement("option");zs.textContent=Os,zs.value=Vs,Us?Us.before(zs):Dr.append(zs),Er.setValue(vr,{value:cs(!0),items:As(Ns)}),Rs=cs(!1)},items(Ns){const{items:Is}=Ns.detail;for(;Dr.length!==0;)Dr.remove(0);for(const Os of Is){const{displayValue:Vs,exportValue:Us}=Os,zs=document.createElement("option");zs.textContent=Vs,zs.value=Us,Dr.append(zs)}Dr.options.length>0&&(Dr.options[0].selected=!0),Er.setValue(vr,{value:cs(!0),items:As(Ns)}),Rs=cs(!1)},indices(Ns){const Is=new Set(Ns.detail.indices);for(const Os of Ns.target.options)Os.selected=Is.has(Os.index);Er.setValue(vr,{value:cs(!0)}),Rs=cs(!1)},editable(Ns){Ns.target.disabled=!Ns.detail.editable}};this._dispatchEventFromSandbox($s,gs)}),Dr.addEventListener("input",gs=>{var Ns;const $s=cs(!0);Er.setValue(vr,{value:$s}),gs.preventDefault(),(Ns=this.linkService.eventBus)==null||Ns.dispatch("dispatcheventinsandbox",{source:this,detail:{id:vr,name:"Keystroke",value:Rs,changeEx:$s,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Dr,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],gs=>gs.target.value)):Dr.addEventListener("input",function(gs){Er.setValue(vr,{value:cs(!0)})}),this.data.combo&&this._setTextStyle(Dr),this._setBackgroundColor(Dr),this._setDefaultPropertiesFromJS(Dr),this.container.append(Dr),this.container}}class Nn extends Pn{constructor(Er){const{data:vr,elements:Lr}=Er;super(Er,{isRenderable:Pn._hasPopupData(vr)}),this.elements=Lr}render(){this.container.classList.add("popupAnnotation");const Er=new Ln({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),vr=[];for(const Lr of this.elements)Lr.popup=Er,vr.push(Lr.data.id),Lr.addHighlightArea();return this.container.setAttribute("aria-controls",vr.map(Lr=>`${dn.AnnotationPrefix}${Lr}`).join(",")),this.container}}class Ln{constructor({container:Er,color:vr,elements:Lr,titleObj:Dr,modificationDate:Jr,contentsObj:ls,richText:cs,parent:Rs,rect:As,parentRect:gs,open:$s}){Br(this,ts);Br(this,br,null);Br(this,Tr,Or(this,ts,ax).bind(this));Br(this,Ir,Or(this,ts,Q0).bind(this));Br(this,Mr,Or(this,ts,X0).bind(this));Br(this,qr,Or(this,ts,n0).bind(this));Br(this,Ar,null);Br(this,or,null);Br(this,jr,null);Br(this,cr,null);Br(this,hr,null);Br(this,wr,null);Br(this,Pr,!1);Br(this,kr,null);Br(this,Hr,null);Br(this,Kr,null);Br(this,Nr,null);Br(this,ns,!1);var Is;Fr(this,or,Er),Fr(this,Nr,Dr),Fr(this,jr,ls),Fr(this,Kr,cs),Fr(this,hr,Rs),Fr(this,Ar,vr),Fr(this,Hr,As),Fr(this,wr,gs),Fr(this,cr,Lr);const Ns=hn.PDFDateString.toDateObject(Jr);Ns&&Fr(this,br,Rs.l10n.get("annotation_date_string",{date:Ns.toLocaleDateString(),time:Ns.toLocaleTimeString()})),this.trigger=Lr.flatMap(Os=>Os.getElementsToTriggerPopup());for(const Os of this.trigger)Os.addEventListener("click",Hn(this,qr)),Os.addEventListener("mouseenter",Hn(this,Mr)),Os.addEventListener("mouseleave",Hn(this,Ir)),Os.classList.add("popupTriggerArea");for(const Os of Lr)(Is=Os.container)==null||Is.addEventListener("keydown",Hn(this,Tr));Hn(this,or).hidden=!0,$s&&Or(this,ts,n0).call(this)}render(){if(Hn(this,kr))return;const{page:{view:Er},viewport:{rawDims:{pageWidth:vr,pageHeight:Lr,pageX:Dr,pageY:Jr}}}=Hn(this,hr),ls=Fr(this,kr,document.createElement("div"));if(ls.className="popup",Hn(this,Ar)){const Qs=ls.style.outlineColor=dn.Util.makeHexColor(...Hn(this,Ar));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ls.style.backgroundColor=`color-mix(in srgb, ${Qs} 30%, white)`:ls.style.backgroundColor=dn.Util.makeHexColor(...Hn(this,Ar).map(bo=>Math.floor(.7*(255-bo)+bo)))}const cs=document.createElement("span");cs.className="header";const Rs=document.createElement("h1");if(cs.append(Rs),{dir:Rs.dir,str:Rs.textContent}=Hn(this,Nr),ls.append(cs),Hn(this,br)){const Qs=document.createElement("span");Qs.classList.add("popupDate"),Hn(this,br).then(vo=>{Qs.textContent=vo}),cs.append(Qs)}const As=Hn(this,jr),gs=Hn(this,Kr);if(gs!=null&&gs.str&&(!(As!=null&&As.str)||As.str===gs.str))gn.XfaLayer.render({xfaHtml:gs.html,intent:"richText",div:ls}),ls.lastChild.classList.add("richText","popupContent");else{const Qs=this._formatContents(As);ls.append(Qs)}let $s=!!Hn(this,wr),Ns=$s?Hn(this,wr):Hn(this,Hr);for(const Qs of Hn(this,cr))if(!Ns||dn.Util.intersect(Qs.data.rect,Ns)!==null){Ns=Qs.data.rect,$s=!0;break}const Is=dn.Util.normalizeRect([Ns[0],Er[3]-Ns[1]+Er[1],Ns[2],Er[3]-Ns[3]+Er[1]]),Vs=$s?Ns[2]-Ns[0]+5:0,Us=Is[0]+Vs,zs=Is[1],{style:Zs}=Hn(this,or);Zs.left=`${100*(Us-Dr)/vr}%`,Zs.top=`${100*(zs-Jr)/Lr}%`,Hn(this,or).append(ls)}_formatContents({str:Er,dir:vr}){const Lr=document.createElement("p");Lr.classList.add("popupContent"),Lr.dir=vr;const Dr=Er.split(/(?:\r\n?|\n)/);for(let Jr=0,ls=Dr.length;Jr<ls;++Jr){const cs=Dr[Jr];Lr.append(document.createTextNode(cs)),Jr<ls-1&&Lr.append(document.createElement("br"))}return Lr}forceHide(){Fr(this,ns,this.isVisible),Hn(this,ns)&&(Hn(this,or).hidden=!0)}maybeShow(){Hn(this,ns)&&(Fr(this,ns,!1),Hn(this,or).hidden=!1)}get isVisible(){return Hn(this,or).hidden===!1}}br=new WeakMap,Tr=new WeakMap,Ir=new WeakMap,Mr=new WeakMap,qr=new WeakMap,Ar=new WeakMap,or=new WeakMap,jr=new WeakMap,cr=new WeakMap,hr=new WeakMap,wr=new WeakMap,Pr=new WeakMap,kr=new WeakMap,Hr=new WeakMap,Kr=new WeakMap,Nr=new WeakMap,ns=new WeakMap,ts=new WeakSet,ax=function(Er){Er.altKey||Er.shiftKey||Er.ctrlKey||Er.metaKey||(Er.key==="Enter"||Er.key==="Escape"&&Hn(this,Pr))&&Or(this,ts,n0).call(this)},n0=function(){Fr(this,Pr,!Hn(this,Pr)),Hn(this,Pr)?(Or(this,ts,X0).call(this),Hn(this,or).addEventListener("click",Hn(this,qr)),Hn(this,or).addEventListener("keydown",Hn(this,Tr))):(Or(this,ts,Q0).call(this),Hn(this,or).removeEventListener("click",Hn(this,qr)),Hn(this,or).removeEventListener("keydown",Hn(this,Tr)))},X0=function(){Hn(this,kr)||this.render(),this.isVisible?Hn(this,Pr)&&Hn(this,or).classList.add("focused"):(Hn(this,or).hidden=!1,Hn(this,or).style.zIndex=parseInt(Hn(this,or).style.zIndex)+1e3)},Q0=function(){Hn(this,or).classList.remove("focused"),!(Hn(this,Pr)||!this.isVisible)&&(Hn(this,or).hidden=!0,Hn(this,or).style.zIndex=parseInt(Hn(this,or).style.zIndex)-1e3)};class zn extends Pn{constructor(Er){super(Er,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Er.data.textContent,this.textPosition=Er.data.textPosition,this.annotationEditorType=dn.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Er=document.createElement("div");Er.classList.add("annotationTextContent"),Er.setAttribute("role","comment");for(const vr of this.textContent){const Lr=document.createElement("span");Lr.textContent=vr,Er.append(Lr)}this.container.append(Er)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=zn;class Cn extends Pn{constructor(vr){super(vr,{isRenderable:!0,ignoreBorder:!0});Br(this,Ss,null)}render(){this.container.classList.add("lineAnnotation");const vr=this.data,{width:Lr,height:Dr}=bn(vr.rect),Jr=this.svgFactory.create(Lr,Dr,!0),ls=Fr(this,Ss,this.svgFactory.createElement("svg:line"));return ls.setAttribute("x1",vr.rect[2]-vr.lineCoordinates[0]),ls.setAttribute("y1",vr.rect[3]-vr.lineCoordinates[1]),ls.setAttribute("x2",vr.rect[2]-vr.lineCoordinates[2]),ls.setAttribute("y2",vr.rect[3]-vr.lineCoordinates[3]),ls.setAttribute("stroke-width",vr.borderStyle.width||1),ls.setAttribute("stroke","transparent"),ls.setAttribute("fill","transparent"),Jr.append(ls),this.container.append(Jr),!vr.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Hn(this,Ss)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ss=new WeakMap;class Mn extends Pn{constructor(vr){super(vr,{isRenderable:!0,ignoreBorder:!0});Br(this,js,null)}render(){this.container.classList.add("squareAnnotation");const vr=this.data,{width:Lr,height:Dr}=bn(vr.rect),Jr=this.svgFactory.create(Lr,Dr,!0),ls=vr.borderStyle.width,cs=Fr(this,js,this.svgFactory.createElement("svg:rect"));return cs.setAttribute("x",ls/2),cs.setAttribute("y",ls/2),cs.setAttribute("width",Lr-ls),cs.setAttribute("height",Dr-ls),cs.setAttribute("stroke-width",ls||1),cs.setAttribute("stroke","transparent"),cs.setAttribute("fill","transparent"),Jr.append(cs),this.container.append(Jr),!vr.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Hn(this,js)}addHighlightArea(){this.container.classList.add("highlightArea")}}js=new WeakMap;class Bn extends Pn{constructor(vr){super(vr,{isRenderable:!0,ignoreBorder:!0});Br(this,Bs,null)}render(){this.container.classList.add("circleAnnotation");const vr=this.data,{width:Lr,height:Dr}=bn(vr.rect),Jr=this.svgFactory.create(Lr,Dr,!0),ls=vr.borderStyle.width,cs=Fr(this,Bs,this.svgFactory.createElement("svg:ellipse"));return cs.setAttribute("cx",Lr/2),cs.setAttribute("cy",Dr/2),cs.setAttribute("rx",Lr/2-ls/2),cs.setAttribute("ry",Dr/2-ls/2),cs.setAttribute("stroke-width",ls||1),cs.setAttribute("stroke","transparent"),cs.setAttribute("fill","transparent"),Jr.append(cs),this.container.append(Jr),!vr.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Hn(this,Bs)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bs=new WeakMap;class Xn extends Pn{constructor(vr){super(vr,{isRenderable:!0,ignoreBorder:!0});Br(this,es,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const vr=this.data,{width:Lr,height:Dr}=bn(vr.rect),Jr=this.svgFactory.create(Lr,Dr,!0);let ls=[];for(const Rs of vr.vertices){const As=Rs.x-vr.rect[0],gs=vr.rect[3]-Rs.y;ls.push(As+","+gs)}ls=ls.join(" ");const cs=Fr(this,es,this.svgFactory.createElement(this.svgElementName));return cs.setAttribute("points",ls),cs.setAttribute("stroke-width",vr.borderStyle.width||1),cs.setAttribute("stroke","transparent"),cs.setAttribute("fill","transparent"),Jr.append(cs),this.container.append(Jr),!vr.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Hn(this,es)}addHighlightArea(){this.container.classList.add("highlightArea")}}es=new WeakMap;class nr extends Xn{constructor(Er){super(Er),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sr extends Pn{constructor(Er){super(Er,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class lr extends Pn{constructor(vr){super(vr,{isRenderable:!0,ignoreBorder:!0});Br(this,Vr,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=dn.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const vr=this.data,{width:Lr,height:Dr}=bn(vr.rect),Jr=this.svgFactory.create(Lr,Dr,!0);for(const ls of vr.inkLists){let cs=[];for(const As of ls){const gs=As.x-vr.rect[0],$s=vr.rect[3]-As.y;cs.push(`${gs},${$s}`)}cs=cs.join(" ");const Rs=this.svgFactory.createElement(this.svgElementName);Hn(this,Vr).push(Rs),Rs.setAttribute("points",cs),Rs.setAttribute("stroke-width",vr.borderStyle.width||1),Rs.setAttribute("stroke","transparent"),Rs.setAttribute("fill","transparent"),!vr.popupRef&&this.hasPopupData&&this._createPopup(),Jr.append(Rs)}return this.container.append(Jr),this.container}getElementsToTriggerPopup(){return Hn(this,Vr)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vr=new WeakMap,e.InkAnnotationElement=lr;class tr extends Pn{constructor(Er){super(Er,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Jn extends Pn{constructor(Er){super(Er,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ar extends Pn{constructor(Er){super(Er,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class gr extends Pn{constructor(Er){super(Er,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class qn extends Pn{constructor(Er){super(Er,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=qn;class On extends Pn{constructor(vr){var Jr;super(vr,{isRenderable:!0});Br(this,is);Br(this,Wr,null);const{filename:Lr,content:Dr}=this.data.file;this.filename=(0,hn.getFilenameFromUrl)(Lr,!0),this.content=Dr,(Jr=this.linkService.eventBus)==null||Jr.dispatch("fileattachmentannotation",{source:this,filename:Lr,content:Dr})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:vr,data:Lr}=this;let Dr;Lr.hasAppearance||Lr.fillAlpha===0?Dr=document.createElement("div"):(Dr=document.createElement("img"),Dr.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Lr.name)?"paperclip":"pushpin"}.svg`,Lr.fillAlpha&&Lr.fillAlpha<1&&(Dr.style=`filter: opacity(${Math.round(Lr.fillAlpha*100)}%);`)),Dr.addEventListener("dblclick",Or(this,is,J0).bind(this)),Fr(this,Wr,Dr);const{isMac:Jr}=dn.FeatureTest.platform;return vr.addEventListener("keydown",ls=>{ls.key==="Enter"&&(Jr?ls.metaKey:ls.ctrlKey)&&Or(this,is,J0).call(this)}),!Lr.popupRef&&this.hasPopupData?this._createPopup():Dr.classList.add("popupTriggerArea"),vr.append(Dr),vr}getElementsToTriggerPopup(){return Hn(this,Wr)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wr=new WeakMap,is=new WeakSet,J0=function(){var vr;(vr=this.downloadManager)==null||vr.openOrDownloadData(this.container,this.content,this.filename)};class Un{constructor({div:Er,accessibilityManager:vr,annotationCanvasMap:Lr,l10n:Dr,page:Jr,viewport:ls}){Br(this,ds);Br(this,ws,null);Br(this,Rr,null);Br(this,Zr,new Map);this.div=Er,Fr(this,ws,vr),Fr(this,Rr,Lr),this.l10n=Dr,this.page=Jr,this.viewport=ls,this.zIndex=0,this.l10n||(this.l10n=mn.NullL10n)}async render(Er){const{annotations:vr}=Er,Lr=this.div;(0,hn.setLayerDimensions)(Lr,this.viewport);const Dr=new Map,Jr={data:null,layer:Lr,linkService:Er.linkService,downloadManager:Er.downloadManager,imageResourcesPath:Er.imageResourcesPath||"",renderForms:Er.renderForms!==!1,svgFactory:new hn.DOMSVGFactory,annotationStorage:Er.annotationStorage||new fn.AnnotationStorage,enableScripting:Er.enableScripting===!0,hasJSActions:Er.hasJSActions,fieldObjects:Er.fieldObjects,parent:this,elements:null};for(const ls of vr){if(ls.noHTML)continue;const cs=ls.annotationType===dn.AnnotationType.POPUP;if(cs){const gs=Dr.get(ls.id);if(!gs)continue;Jr.elements=gs}else{const{width:gs,height:$s}=bn(ls.rect);if(gs<=0||$s<=0)continue}Jr.data=ls;const Rs=vn.create(Jr);if(!Rs.isRenderable)continue;if(!cs&&ls.popupRef){const gs=Dr.get(ls.popupRef);gs?gs.push(Rs):Dr.set(ls.popupRef,[Rs])}Rs.annotationEditorType>0&&Hn(this,Zr).set(Rs.data.id,Rs);const As=Rs.render();ls.hidden&&(As.style.visibility="hidden"),Or(this,ds,lx).call(this,As,ls.id)}Or(this,ds,Z0).call(this),await this.l10n.translate(Lr)}update({viewport:Er}){const vr=this.div;this.viewport=Er,(0,hn.setLayerDimensions)(vr,{rotation:Er.rotation}),Or(this,ds,Z0).call(this),vr.hidden=!1}getEditableAnnotations(){return Array.from(Hn(this,Zr).values())}getEditableAnnotation(Er){return Hn(this,Zr).get(Er)}}ws=new WeakMap,Rr=new WeakMap,Zr=new WeakMap,ds=new WeakSet,lx=function(Er,vr){var Dr;const Lr=Er.firstChild||Er;Lr.id=`${dn.AnnotationPrefix}${vr}`,this.div.append(Er),(Dr=Hn(this,ws))==null||Dr.moveElementInDOM(this.div,Er,Lr,!1)},Z0=function(){if(!Hn(this,Rr))return;const Er=this.div;for(const[vr,Lr]of Hn(this,Rr)){const Dr=Er.querySelector(`[data-annotation-id="${vr}"]`);if(!Dr)continue;const{firstChild:Jr}=Dr;Jr?Jr.nodeName==="CANVAS"?Jr.replaceWith(Lr):Jr.before(Lr):Dr.append(Lr)}Hn(this,Rr).clear()},e.AnnotationLayer=Un},(_e,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function un(fn){return Math.floor(Math.max(0,Math.min(1,fn))*255).toString(16).padStart(2,"0")}function dn(fn){return Math.max(0,Math.min(255,255*fn))}class hn{static CMYK_G([pn,mn,gn,yn]){return["G",1-Math.min(1,.3*pn+.59*gn+.11*mn+yn)]}static G_CMYK([pn]){return["CMYK",0,0,0,1-pn]}static G_RGB([pn]){return["RGB",pn,pn,pn]}static G_rgb([pn]){return pn=dn(pn),[pn,pn,pn]}static G_HTML([pn]){const mn=un(pn);return`#${mn}${mn}${mn}`}static RGB_G([pn,mn,gn]){return["G",.3*pn+.59*mn+.11*gn]}static RGB_rgb(pn){return pn.map(dn)}static RGB_HTML(pn){return`#${pn.map(un).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([pn,mn,gn,yn]){return["RGB",1-Math.min(1,pn+yn),1-Math.min(1,gn+yn),1-Math.min(1,mn+yn)]}static CMYK_rgb([pn,mn,gn,yn]){return[dn(1-Math.min(1,pn+yn)),dn(1-Math.min(1,gn+yn)),dn(1-Math.min(1,mn+yn))]}static CMYK_HTML(pn){const mn=this.CMYK_RGB(pn).slice(1);return this.RGB_HTML(mn)}static RGB_CMYK([pn,mn,gn]){const yn=1-pn,xn=1-mn,En=1-gn,bn=Math.min(yn,xn,En);return["CMYK",yn,xn,En,bn]}}e.ColorConverters=hn},(_e,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=dn;const un={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};un.print_progress_percent="{{progress}}%";function dn(pn,mn){switch(pn){case"find_match_count":pn=`find_match_count[${mn.total===1?"one":"other"}]`;break;case"find_match_count_limit":pn=`find_match_count_limit[${mn.limit===1?"one":"other"}]`;break}return un[pn]||""}function hn(pn,mn){return mn?pn.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(gn,yn)=>yn in mn?mn[yn]:"{{"+yn+"}}"):pn}const fn={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(pn,mn=null,gn=dn(pn,mn)){return hn(gn,mn)},async translate(pn){}};e.NullL10n=fn},(_e,e,un)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var dn=un(25);class hn{static setupStorage(pn,mn,gn,yn,xn){const En=yn.getValue(mn,{value:null});switch(gn.name){case"textarea":if(En.value!==null&&(pn.textContent=En.value),xn==="print")break;pn.addEventListener("input",bn=>{yn.setValue(mn,{value:bn.target.value})});break;case"input":if(gn.attributes.type==="radio"||gn.attributes.type==="checkbox"){if(En.value===gn.attributes.xfaOn?pn.setAttribute("checked",!0):En.value===gn.attributes.xfaOff&&pn.removeAttribute("checked"),xn==="print")break;pn.addEventListener("change",bn=>{yn.setValue(mn,{value:bn.target.checked?bn.target.getAttribute("xfaOn"):bn.target.getAttribute("xfaOff")})})}else{if(En.value!==null&&pn.setAttribute("value",En.value),xn==="print")break;pn.addEventListener("input",bn=>{yn.setValue(mn,{value:bn.target.value})})}break;case"select":if(En.value!==null){pn.setAttribute("value",En.value);for(const bn of gn.children)bn.attributes.value===En.value?bn.attributes.selected=!0:bn.attributes.hasOwnProperty("selected")&&delete bn.attributes.selected}pn.addEventListener("input",bn=>{const vn=bn.target.options,Pn=vn.selectedIndex===-1?"":vn[vn.selectedIndex].value;yn.setValue(mn,{value:Pn})});break}}static setAttributes({html:pn,element:mn,storage:gn=null,intent:yn,linkService:xn}){const{attributes:En}=mn,bn=pn instanceof HTMLAnchorElement;En.type==="radio"&&(En.name=`${En.name}-${yn}`);for(const[vn,Pn]of Object.entries(En))if(Pn!=null)switch(vn){case"class":Pn.length&&pn.setAttribute(vn,Pn.join(" "));break;case"dataId":break;case"id":pn.setAttribute("data-element-id",Pn);break;case"style":Object.assign(pn.style,Pn);break;case"textContent":pn.textContent=Pn;break;default:(!bn||vn!=="href"&&vn!=="newWindow")&&pn.setAttribute(vn,Pn)}bn&&xn.addLinkAttributes(pn,En.href,En.newWindow),gn&&En.dataId&&this.setupStorage(pn,En.dataId,mn,gn)}static render(pn){var Tn;const mn=pn.annotationStorage,gn=pn.linkService,yn=pn.xfaHtml,xn=pn.intent||"display",En=document.createElement(yn.name);yn.attributes&&this.setAttributes({html:En,element:yn,intent:xn,linkService:gn});const bn=[[yn,-1,En]],vn=pn.div;if(vn.append(En),pn.viewport){const In=`matrix(${pn.viewport.transform.join(",")})`;vn.style.transform=In}xn!=="richText"&&vn.setAttribute("class","xfaLayer xfaFont");const Pn=[];for(;bn.length>0;){const[In,Rn,Sn]=bn.at(-1);if(Rn+1===In.children.length){bn.pop();continue}const Dn=In.children[++bn.at(-1)[1]];if(Dn===null)continue;const{name:$n}=Dn;if($n==="#text"){const Gn=document.createTextNode(Dn.value);Pn.push(Gn),Sn.append(Gn);continue}const Fn=(Tn=Dn==null?void 0:Dn.attributes)!=null&&Tn.xmlns?document.createElementNS(Dn.attributes.xmlns,$n):document.createElement($n);if(Sn.append(Fn),Dn.attributes&&this.setAttributes({html:Fn,element:Dn,storage:mn,intent:xn,linkService:gn}),Dn.children&&Dn.children.length>0)bn.push([Dn,-1,Fn]);else if(Dn.value){const Gn=document.createTextNode(Dn.value);dn.XfaText.shouldBuildText($n)&&Pn.push(Gn),Fn.append(Gn)}}for(const In of vn.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))In.setAttribute("readOnly",!0);return{textDivs:Pn}}static update(pn){const mn=`matrix(${pn.viewport.transform.join(",")})`;pn.div.style.transform=mn,pn.div.hidden=!1}}e.XfaLayer=hn},(_e,e,un)=>{var yn,xn,En,bn,vn,Pn,Tn,In,Rn,Sn,Dn,$n,Fn,Gn,kn,ux,dx,hx,fx,ey,px,ty,mx,gx,yx,xx,vx,du,ny,r0,s0,Up,ry,i0,Zn,_x,sy,Ex,bx,iy,o0,zp;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var dn=un(1),hn=un(4),fn=un(29),pn=un(6),mn=un(5);const Ar=class Ar extends hn.AnnotationEditor{constructor(cr){super({...cr,name:"inkEditor"});Br(this,kn);Br(this,yn,0);Br(this,xn,0);Br(this,En,this.canvasPointermove.bind(this));Br(this,bn,this.canvasPointerleave.bind(this));Br(this,vn,this.canvasPointerup.bind(this));Br(this,Pn,this.canvasPointerdown.bind(this));Br(this,Tn,new Path2D);Br(this,In,!1);Br(this,Rn,!1);Br(this,Sn,!1);Br(this,Dn,null);Br(this,$n,0);Br(this,Fn,0);Br(this,Gn,null);this.color=cr.color||null,this.thickness=cr.thickness||null,this.opacity=cr.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(cr){hn.AnnotationEditor.initialize(cr,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(cr,hr){switch(cr){case dn.AnnotationEditorParamsType.INK_THICKNESS:Ar._defaultThickness=hr;break;case dn.AnnotationEditorParamsType.INK_COLOR:Ar._defaultColor=hr;break;case dn.AnnotationEditorParamsType.INK_OPACITY:Ar._defaultOpacity=hr/100;break}}updateParams(cr,hr){switch(cr){case dn.AnnotationEditorParamsType.INK_THICKNESS:Or(this,kn,ux).call(this,hr);break;case dn.AnnotationEditorParamsType.INK_COLOR:Or(this,kn,dx).call(this,hr);break;case dn.AnnotationEditorParamsType.INK_OPACITY:Or(this,kn,hx).call(this,hr);break}}static get defaultPropertiesToUpdate(){return[[dn.AnnotationEditorParamsType.INK_THICKNESS,Ar._defaultThickness],[dn.AnnotationEditorParamsType.INK_COLOR,Ar._defaultColor||hn.AnnotationEditor._defaultLineColor],[dn.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ar._defaultOpacity*100)]]}get propertiesToUpdate(){return[[dn.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ar._defaultThickness],[dn.AnnotationEditorParamsType.INK_COLOR,this.color||Ar._defaultColor||hn.AnnotationEditor._defaultLineColor],[dn.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ar._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Or(this,kn,r0).call(this),Or(this,kn,s0).call(this)),this.isAttachedToDOM||(this.parent.add(this),Or(this,kn,Up).call(this)),Or(this,kn,zp).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Hn(this,Dn).disconnect(),Fr(this,Dn,null),super.remove())}setParent(cr){!this.parent&&cr?this._uiManager.removeShouldRescale(this):this.parent&&cr===null&&this._uiManager.addShouldRescale(this),super.setParent(cr)}onScaleChanging(){const[cr,hr]=this.parentDimensions,wr=this.width*cr,Pr=this.height*hr;this.setDimensions(wr,Pr)}enableEditMode(){Hn(this,In)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",Hn(this,Pn)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",Hn(this,Pn)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){Hn(this,In)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Fr(this,In,!0),this.div.classList.add("disabled"),Or(this,kn,zp).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(cr){this._focusEventsAllowed&&(super.focusin(cr),this.enableEditMode())}canvasPointerdown(cr){cr.button!==0||!this.isInEditMode()||Hn(this,In)||(this.setInForeground(),cr.preventDefault(),cr.type!=="mouse"&&this.div.focus(),Or(this,kn,px).call(this,cr.offsetX,cr.offsetY))}canvasPointermove(cr){cr.preventDefault(),Or(this,kn,ty).call(this,cr.offsetX,cr.offsetY)}canvasPointerup(cr){cr.preventDefault(),Or(this,kn,ny).call(this,cr)}canvasPointerleave(cr){Or(this,kn,ny).call(this,cr)}get isResizable(){return!this.isEmpty()&&Hn(this,In)}render(){if(this.div)return this.div;let cr,hr;this.width&&(cr=this.x,hr=this.y),super.render(),hn.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Kr=>{var Nr;return(Nr=this.div)==null?void 0:Nr.setAttribute("aria-label",Kr)});const[wr,Pr,kr,Hr]=Or(this,kn,fx).call(this);if(this.setAt(wr,Pr,0,0),this.setDims(kr,Hr),Or(this,kn,r0).call(this),this.width){const[Kr,Nr]=this.parentDimensions;this.setAspectRatio(this.width*Kr,this.height*Nr),this.setAt(cr*Kr,hr*Nr,this.width*Kr,this.height*Nr),Fr(this,Sn,!0),Or(this,kn,Up).call(this),this.setDims(this.width*Kr,this.height*Nr),Or(this,kn,du).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Or(this,kn,s0).call(this),this.div}setDimensions(cr,hr){const wr=Math.round(cr),Pr=Math.round(hr);if(Hn(this,$n)===wr&&Hn(this,Fn)===Pr)return;Fr(this,$n,wr),Fr(this,Fn,Pr),this.canvas.style.visibility="hidden";const[kr,Hr]=this.parentDimensions;this.width=cr/kr,this.height=hr/Hr,this.fixAndSetPosition(),Hn(this,In)&&Or(this,kn,ry).call(this,cr,hr),Or(this,kn,Up).call(this),Or(this,kn,du).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(cr,hr,wr){var Ss,js,Bs;if(cr instanceof fn.InkAnnotationElement)return null;const Pr=super.deserialize(cr,hr,wr);Pr.thickness=cr.thickness,Pr.color=dn.Util.makeHexColor(...cr.color),Pr.opacity=cr.opacity;const[kr,Hr]=Pr.pageDimensions,Kr=Pr.width*kr,Nr=Pr.height*Hr,ns=Pr.parentScale,ts=cr.thickness/2;Fr(Pr,In,!0),Fr(Pr,$n,Math.round(Kr)),Fr(Pr,Fn,Math.round(Nr));const{paths:Ps,rect:ps,rotation:Cs}=cr;for(let{bezier:es}of Ps){es=Or(Ss=Ar,Zn,Ex).call(Ss,es,ps,Cs);const Vr=[];Pr.paths.push(Vr);let Wr=ns*(es[0]-ts),is=ns*(es[1]-ts);for(let ws=2,Rr=es.length;ws<Rr;ws+=6){const Zr=ns*(es[ws]-ts),ds=ns*(es[ws+1]-ts),fs=ns*(es[ws+2]-ts),vs=ns*(es[ws+3]-ts),Ts=ns*(es[ws+4]-ts),Er=ns*(es[ws+5]-ts);Vr.push([[Wr,is],[Zr,ds],[fs,vs],[Ts,Er]]),Wr=Ts,is=Er}const ks=Or(this,Zn,_x).call(this,Vr);Pr.bezierPath2D.push(ks)}const as=Or(js=Pr,kn,iy).call(js);return Fr(Pr,xn,Math.max(hn.AnnotationEditor.MIN_SIZE,as[2]-as[0])),Fr(Pr,yn,Math.max(hn.AnnotationEditor.MIN_SIZE,as[3]-as[1])),Or(Bs=Pr,kn,ry).call(Bs,Kr,Nr),Pr}serialize(){if(this.isEmpty())return null;const cr=this.getRect(0,0),hr=hn.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:dn.AnnotationEditorType.INK,color:hr,thickness:this.thickness,opacity:this.opacity,paths:Or(this,kn,bx).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,cr),pageIndex:this.pageIndex,rect:cr,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};yn=new WeakMap,xn=new WeakMap,En=new WeakMap,bn=new WeakMap,vn=new WeakMap,Pn=new WeakMap,Tn=new WeakMap,In=new WeakMap,Rn=new WeakMap,Sn=new WeakMap,Dn=new WeakMap,$n=new WeakMap,Fn=new WeakMap,Gn=new WeakMap,kn=new WeakSet,ux=function(cr){const hr=this.thickness;this.addCommands({cmd:()=>{this.thickness=cr,Or(this,kn,zp).call(this)},undo:()=>{this.thickness=hr,Or(this,kn,zp).call(this)},mustExec:!0,type:dn.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},dx=function(cr){const hr=this.color;this.addCommands({cmd:()=>{this.color=cr,Or(this,kn,du).call(this)},undo:()=>{this.color=hr,Or(this,kn,du).call(this)},mustExec:!0,type:dn.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},hx=function(cr){cr/=100;const hr=this.opacity;this.addCommands({cmd:()=>{this.opacity=cr,Or(this,kn,du).call(this)},undo:()=>{this.opacity=hr,Or(this,kn,du).call(this)},mustExec:!0,type:dn.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},fx=function(){const{parentRotation:cr,parentDimensions:[hr,wr]}=this;switch(cr){case 90:return[0,wr,wr,hr];case 180:return[hr,wr,hr,wr];case 270:return[hr,0,wr,hr];default:return[0,0,hr,wr]}},ey=function(){const{ctx:cr,color:hr,opacity:wr,thickness:Pr,parentScale:kr,scaleFactor:Hr}=this;cr.lineWidth=Pr*kr/Hr,cr.lineCap="round",cr.lineJoin="round",cr.miterLimit=10,cr.strokeStyle=`${hr}${(0,mn.opacityToHex)(wr)}`},px=function(cr,hr){this.canvas.addEventListener("contextmenu",pn.noContextMenu),this.canvas.addEventListener("pointerleave",Hn(this,bn)),this.canvas.addEventListener("pointermove",Hn(this,En)),this.canvas.addEventListener("pointerup",Hn(this,vn)),this.canvas.removeEventListener("pointerdown",Hn(this,Pn)),this.isEditing=!0,Hn(this,Sn)||(Fr(this,Sn,!0),Or(this,kn,Up).call(this),this.thickness||(this.thickness=Ar._defaultThickness),this.color||(this.color=Ar._defaultColor||hn.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ar._defaultOpacity)),this.currentPath.push([cr,hr]),Fr(this,Rn,!1),Or(this,kn,ey).call(this),Fr(this,Gn,()=>{Or(this,kn,yx).call(this),Hn(this,Gn)&&window.requestAnimationFrame(Hn(this,Gn))}),window.requestAnimationFrame(Hn(this,Gn))},ty=function(cr,hr){const[wr,Pr]=this.currentPath.at(-1);if(this.currentPath.length>1&&cr===wr&&hr===Pr)return;const kr=this.currentPath;let Hr=Hn(this,Tn);if(kr.push([cr,hr]),Fr(this,Rn,!0),kr.length<=2){Hr.moveTo(...kr[0]),Hr.lineTo(cr,hr);return}kr.length===3&&(Fr(this,Tn,Hr=new Path2D),Hr.moveTo(...kr[0])),Or(this,kn,xx).call(this,Hr,...kr.at(-3),...kr.at(-2),cr,hr)},mx=function(){if(this.currentPath.length===0)return;const cr=this.currentPath.at(-1);Hn(this,Tn).lineTo(...cr)},gx=function(cr,hr){Fr(this,Gn,null),cr=Math.min(Math.max(cr,0),this.canvas.width),hr=Math.min(Math.max(hr,0),this.canvas.height),Or(this,kn,ty).call(this,cr,hr),Or(this,kn,mx).call(this);let wr;if(this.currentPath.length!==1)wr=Or(this,kn,vx).call(this);else{const Nr=[cr,hr];wr=[[Nr,Nr.slice(),Nr.slice(),Nr]]}const Pr=Hn(this,Tn),kr=this.currentPath;this.currentPath=[],Fr(this,Tn,new Path2D);const Hr=()=>{this.allRawPaths.push(kr),this.paths.push(wr),this.bezierPath2D.push(Pr),this.rebuild()},Kr=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Or(this,kn,r0).call(this),Or(this,kn,s0).call(this)),Or(this,kn,zp).call(this))};this.addCommands({cmd:Hr,undo:Kr,mustExec:!0})},yx=function(){if(!Hn(this,Rn))return;Fr(this,Rn,!1);const cr=Math.ceil(this.thickness*this.parentScale),hr=this.currentPath.slice(-3),wr=hr.map(Hr=>Hr[0]),Pr=hr.map(Hr=>Hr[1]);Math.min(...wr)-cr,Math.max(...wr)+cr,Math.min(...Pr)-cr,Math.max(...Pr)+cr;const{ctx:kr}=this;kr.save(),kr.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Hr of this.bezierPath2D)kr.stroke(Hr);kr.stroke(Hn(this,Tn)),kr.restore()},xx=function(cr,hr,wr,Pr,kr,Hr,Kr){const Nr=(hr+Pr)/2,ns=(wr+kr)/2,ts=(Pr+Hr)/2,Ps=(kr+Kr)/2;cr.bezierCurveTo(Nr+2*(Pr-Nr)/3,ns+2*(kr-ns)/3,ts+2*(Pr-ts)/3,Ps+2*(kr-Ps)/3,ts,Ps)},vx=function(){const cr=this.currentPath;if(cr.length<=2)return[[cr[0],cr[0],cr.at(-1),cr.at(-1)]];const hr=[];let wr,[Pr,kr]=cr[0];for(wr=1;wr<cr.length-2;wr++){const[ps,Cs]=cr[wr],[as,Ss]=cr[wr+1],js=(ps+as)/2,Bs=(Cs+Ss)/2,es=[Pr+2*(ps-Pr)/3,kr+2*(Cs-kr)/3],Vr=[js+2*(ps-js)/3,Bs+2*(Cs-Bs)/3];hr.push([[Pr,kr],es,Vr,[js,Bs]]),[Pr,kr]=[js,Bs]}const[Hr,Kr]=cr[wr],[Nr,ns]=cr[wr+1],ts=[Pr+2*(Hr-Pr)/3,kr+2*(Kr-kr)/3],Ps=[Nr+2*(Hr-Nr)/3,ns+2*(Kr-ns)/3];return hr.push([[Pr,kr],ts,Ps,[Nr,ns]]),hr},du=function(){if(this.isEmpty()){Or(this,kn,i0).call(this);return}Or(this,kn,ey).call(this);const{canvas:cr,ctx:hr}=this;hr.setTransform(1,0,0,1,0,0),hr.clearRect(0,0,cr.width,cr.height),Or(this,kn,i0).call(this);for(const wr of this.bezierPath2D)hr.stroke(wr)},ny=function(cr){this.canvas.removeEventListener("pointerleave",Hn(this,bn)),this.canvas.removeEventListener("pointermove",Hn(this,En)),this.canvas.removeEventListener("pointerup",Hn(this,vn)),this.canvas.addEventListener("pointerdown",Hn(this,Pn)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",pn.noContextMenu)},10),Or(this,kn,gx).call(this,cr.offsetX,cr.offsetY),this.addToAnnotationStorage(),this.setInBackground()},r0=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",hn.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(cr=>{var hr;return(hr=this.canvas)==null?void 0:hr.setAttribute("aria-label",cr)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},s0=function(){Fr(this,Dn,new ResizeObserver(cr=>{const hr=cr[0].contentRect;hr.width&&hr.height&&this.setDimensions(hr.width,hr.height)})),Hn(this,Dn).observe(this.div)},Up=function(){if(!Hn(this,Sn))return;const[cr,hr]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*cr),this.canvas.height=Math.ceil(this.height*hr),Or(this,kn,i0).call(this)},ry=function(cr,hr){const wr=Or(this,kn,o0).call(this),Pr=(cr-wr)/Hn(this,xn),kr=(hr-wr)/Hn(this,yn);this.scaleFactor=Math.min(Pr,kr)},i0=function(){const cr=Or(this,kn,o0).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+cr,this.translationY*this.scaleFactor+cr)},Zn=new WeakSet,_x=function(cr){const hr=new Path2D;for(let wr=0,Pr=cr.length;wr<Pr;wr++){const[kr,Hr,Kr,Nr]=cr[wr];wr===0&&hr.moveTo(...kr),hr.bezierCurveTo(Hr[0],Hr[1],Kr[0],Kr[1],Nr[0],Nr[1])}return hr},sy=function(cr,hr,wr){const[Pr,kr,Hr,Kr]=hr;switch(wr){case 0:for(let Nr=0,ns=cr.length;Nr<ns;Nr+=2)cr[Nr]+=Pr,cr[Nr+1]=Kr-cr[Nr+1];break;case 90:for(let Nr=0,ns=cr.length;Nr<ns;Nr+=2){const ts=cr[Nr];cr[Nr]=cr[Nr+1]+Pr,cr[Nr+1]=ts+kr}break;case 180:for(let Nr=0,ns=cr.length;Nr<ns;Nr+=2)cr[Nr]=Hr-cr[Nr],cr[Nr+1]+=kr;break;case 270:for(let Nr=0,ns=cr.length;Nr<ns;Nr+=2){const ts=cr[Nr];cr[Nr]=Hr-cr[Nr+1],cr[Nr+1]=Kr-ts}break;default:throw new Error("Invalid rotation")}return cr},Ex=function(cr,hr,wr){const[Pr,kr,Hr,Kr]=hr;switch(wr){case 0:for(let Nr=0,ns=cr.length;Nr<ns;Nr+=2)cr[Nr]-=Pr,cr[Nr+1]=Kr-cr[Nr+1];break;case 90:for(let Nr=0,ns=cr.length;Nr<ns;Nr+=2){const ts=cr[Nr];cr[Nr]=cr[Nr+1]-kr,cr[Nr+1]=ts-Pr}break;case 180:for(let Nr=0,ns=cr.length;Nr<ns;Nr+=2)cr[Nr]=Hr-cr[Nr],cr[Nr+1]-=kr;break;case 270:for(let Nr=0,ns=cr.length;Nr<ns;Nr+=2){const ts=cr[Nr];cr[Nr]=Kr-cr[Nr+1],cr[Nr+1]=Hr-ts}break;default:throw new Error("Invalid rotation")}return cr},bx=function(cr,hr,wr,Pr){var ns,ts;const kr=[],Hr=this.thickness/2,Kr=cr*hr+Hr,Nr=cr*wr+Hr;for(const Ps of this.paths){const ps=[],Cs=[];for(let as=0,Ss=Ps.length;as<Ss;as++){const[js,Bs,es,Vr]=Ps[as],Wr=cr*js[0]+Kr,is=cr*js[1]+Nr,ks=cr*Bs[0]+Kr,ws=cr*Bs[1]+Nr,Rr=cr*es[0]+Kr,Zr=cr*es[1]+Nr,ds=cr*Vr[0]+Kr,fs=cr*Vr[1]+Nr;as===0&&(ps.push(Wr,is),Cs.push(Wr,is)),ps.push(ks,ws,Rr,Zr,ds,fs),Cs.push(ks,ws),as===Ss-1&&Cs.push(ds,fs)}kr.push({bezier:Or(ns=Ar,Zn,sy).call(ns,ps,Pr,this.rotation),points:Or(ts=Ar,Zn,sy).call(ts,Cs,Pr,this.rotation)})}return kr},iy=function(){let cr=1/0,hr=-1/0,wr=1/0,Pr=-1/0;for(const kr of this.paths)for(const[Hr,Kr,Nr,ns]of kr){const ts=dn.Util.bezierBoundingBox(...Hr,...Kr,...Nr,...ns);cr=Math.min(cr,ts[0]),wr=Math.min(wr,ts[1]),hr=Math.max(hr,ts[2]),Pr=Math.max(Pr,ts[3])}return[cr,wr,hr,Pr]},o0=function(){return Hn(this,In)?Math.ceil(this.thickness*this.parentScale):0},zp=function(cr=!1){if(this.isEmpty())return;if(!Hn(this,In)){Or(this,kn,du).call(this);return}const hr=Or(this,kn,iy).call(this),wr=Or(this,kn,o0).call(this);Fr(this,xn,Math.max(hn.AnnotationEditor.MIN_SIZE,hr[2]-hr[0])),Fr(this,yn,Math.max(hn.AnnotationEditor.MIN_SIZE,hr[3]-hr[1]));const Pr=Math.ceil(wr+Hn(this,xn)*this.scaleFactor),kr=Math.ceil(wr+Hn(this,yn)*this.scaleFactor),[Hr,Kr]=this.parentDimensions;this.width=Pr/Hr,this.height=kr/Kr,this.setAspectRatio(Pr,kr);const Nr=this.translationX,ns=this.translationY;this.translationX=-hr[0],this.translationY=-hr[1],Or(this,kn,Up).call(this),Or(this,kn,du).call(this),Fr(this,$n,Pr),Fr(this,Fn,kr),this.setDims(Pr,kr);const ts=cr?wr/this.scaleFactor/2:0;this.translate(Nr-this.translationX-ts,ns-this.translationY-ts)},Br(Ar,Zn),io(Ar,"_defaultColor",null),io(Ar,"_defaultOpacity",1),io(Ar,"_defaultThickness",1),io(Ar,"_type","ink");let gn=Ar;e.InkEditor=gn},(_e,e,un)=>{var gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn,Sn,bm,wm,a0,oy,wx,Ax,ay,l0,Rx;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var dn=un(1),hn=un(4),fn=un(6),pn=un(29);const Mn=class Mn extends hn.AnnotationEditor{constructor(nr){super({...nr,name:"stampEditor"});Br(this,Sn);Br(this,gn,null);Br(this,yn,null);Br(this,xn,null);Br(this,En,null);Br(this,bn,null);Br(this,vn,null);Br(this,Pn,null);Br(this,Tn,null);Br(this,In,!1);Br(this,Rn,!1);Fr(this,En,nr.bitmapUrl),Fr(this,bn,nr.bitmapFile)}static initialize(nr){hn.AnnotationEditor.initialize(nr)}static get supportedTypes(){const nr=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,dn.shadow)(this,"supportedTypes",nr.map(sr=>`image/${sr}`))}static get supportedTypesStr(){return(0,dn.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(nr){return this.supportedTypes.includes(nr)}static paste(nr,sr){sr.pasteEditor(dn.AnnotationEditorType.STAMP,{bitmapFile:nr.getAsFile()})}remove(){var nr,sr;Hn(this,yn)&&(Fr(this,gn,null),this._uiManager.imageManager.deleteId(Hn(this,yn)),(nr=Hn(this,vn))==null||nr.remove(),Fr(this,vn,null),(sr=Hn(this,Pn))==null||sr.disconnect(),Fr(this,Pn,null)),super.remove()}rebuild(){if(!this.parent){Hn(this,yn)&&Or(this,Sn,a0).call(this);return}super.rebuild(),this.div!==null&&(Hn(this,yn)&&Or(this,Sn,a0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(Hn(this,xn)||Hn(this,gn)||Hn(this,En)||Hn(this,bn))}get isResizable(){return!0}render(){if(this.div)return this.div;let nr,sr;if(this.width&&(nr=this.x,sr=this.y),super.render(),this.div.hidden=!0,Hn(this,gn)?Or(this,Sn,oy).call(this):Or(this,Sn,a0).call(this),this.width){const[lr,tr]=this.parentDimensions;this.setAt(nr*lr,sr*tr,this.width*lr,this.height*tr)}return this.div}static deserialize(nr,sr,lr){if(nr instanceof pn.StampAnnotationElement)return null;const tr=super.deserialize(nr,sr,lr),{rect:Jn,bitmapUrl:ar,bitmapId:gr,isSvg:qn,accessibilityData:On}=nr;gr&&lr.imageManager.isValidId(gr)?Fr(tr,yn,gr):Fr(tr,En,ar),Fr(tr,In,qn);const[Un,Yn]=tr.pageDimensions;return tr.width=(Jn[2]-Jn[0])/Un,tr.height=(Jn[3]-Jn[1])/Yn,On&&(tr.altTextData=On),tr}serialize(nr=!1,sr=null){if(this.isEmpty())return null;const lr={annotationType:dn.AnnotationEditorType.STAMP,bitmapId:Hn(this,yn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Hn(this,In),structTreeParentId:this._structTreeParentId};if(nr)return lr.bitmapUrl=Or(this,Sn,l0).call(this,!0),lr.accessibilityData=this.altTextData,lr;const{decorative:tr,altText:Jn}=this.altTextData;if(!tr&&Jn&&(lr.accessibilityData={type:"Figure",alt:Jn}),sr===null)return lr;sr.stamps||(sr.stamps=new Map);const ar=Hn(this,In)?(lr.rect[2]-lr.rect[0])*(lr.rect[3]-lr.rect[1]):null;if(!sr.stamps.has(Hn(this,yn)))sr.stamps.set(Hn(this,yn),{area:ar,serialized:lr}),lr.bitmap=Or(this,Sn,l0).call(this,!1);else if(Hn(this,In)){const gr=sr.stamps.get(Hn(this,yn));ar>gr.area&&(gr.area=ar,gr.serialized.bitmap.close(),gr.serialized.bitmap=Or(this,Sn,l0).call(this,!1))}return lr}};gn=new WeakMap,yn=new WeakMap,xn=new WeakMap,En=new WeakMap,bn=new WeakMap,vn=new WeakMap,Pn=new WeakMap,Tn=new WeakMap,In=new WeakMap,Rn=new WeakMap,Sn=new WeakSet,bm=function(nr,sr=!1){if(!nr){this.remove();return}Fr(this,gn,nr.bitmap),sr||(Fr(this,yn,nr.id),Fr(this,In,nr.isSvg)),Or(this,Sn,oy).call(this)},wm=function(){Fr(this,xn,null),this._uiManager.enableWaiting(!1),Hn(this,vn)&&this.div.focus()},a0=function(){if(Hn(this,yn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Hn(this,yn)).then(sr=>Or(this,Sn,bm).call(this,sr,!0)).finally(()=>Or(this,Sn,wm).call(this));return}if(Hn(this,En)){const sr=Hn(this,En);Fr(this,En,null),this._uiManager.enableWaiting(!0),Fr(this,xn,this._uiManager.imageManager.getFromUrl(sr).then(lr=>Or(this,Sn,bm).call(this,lr)).finally(()=>Or(this,Sn,wm).call(this)));return}if(Hn(this,bn)){const sr=Hn(this,bn);Fr(this,bn,null),this._uiManager.enableWaiting(!0),Fr(this,xn,this._uiManager.imageManager.getFromFile(sr).then(lr=>Or(this,Sn,bm).call(this,lr)).finally(()=>Or(this,Sn,wm).call(this)));return}const nr=document.createElement("input");nr.type="file",nr.accept=Mn.supportedTypesStr,Fr(this,xn,new Promise(sr=>{nr.addEventListener("change",async()=>{if(!nr.files||nr.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const lr=await this._uiManager.imageManager.getFromFile(nr.files[0]);Or(this,Sn,bm).call(this,lr)}sr()}),nr.addEventListener("cancel",()=>{this.remove(),sr()})}).finally(()=>Or(this,Sn,wm).call(this))),nr.click()},oy=function(){const{div:nr}=this;let{width:sr,height:lr}=Hn(this,gn);const[tr,Jn]=this.pageDimensions,ar=.75;if(this.width)sr=this.width*tr,lr=this.height*Jn;else if(sr>ar*tr||lr>ar*Jn){const Un=Math.min(ar*tr/sr,ar*Jn/lr);sr*=Un,lr*=Un}const[gr,qn]=this.parentDimensions;this.setDims(sr*gr/tr,lr*qn/Jn),this._uiManager.enableWaiting(!1);const On=Fr(this,vn,document.createElement("canvas"));nr.append(On),nr.hidden=!1,Or(this,Sn,ay).call(this,sr,lr),Or(this,Sn,Rx).call(this),Hn(this,Rn)||(this.parent.addUndoableEditor(this),Fr(this,Rn,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},wx=function(nr,sr){var ar;const[lr,tr]=this.parentDimensions;this.width=nr/lr,this.height=sr/tr,this.setDims(nr,sr),(ar=this._initialOptions)!=null&&ar.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,Hn(this,Tn)!==null&&clearTimeout(Hn(this,Tn)),Fr(this,Tn,setTimeout(()=>{Fr(this,Tn,null),Or(this,Sn,ay).call(this,nr,sr)},200))},Ax=function(nr,sr){const{width:lr,height:tr}=Hn(this,gn);let Jn=lr,ar=tr,gr=Hn(this,gn);for(;Jn>2*nr||ar>2*sr;){const qn=Jn,On=ar;Jn>2*nr&&(Jn=Jn>=16384?Math.floor(Jn/2)-1:Math.ceil(Jn/2)),ar>2*sr&&(ar=ar>=16384?Math.floor(ar/2)-1:Math.ceil(ar/2));const Un=new OffscreenCanvas(Jn,ar);Un.getContext("2d").drawImage(gr,0,0,qn,On,0,0,Jn,ar),gr=Un.transferToImageBitmap()}return gr},ay=function(nr,sr){nr=Math.ceil(nr),sr=Math.ceil(sr);const lr=Hn(this,vn);if(!lr||lr.width===nr&&lr.height===sr)return;lr.width=nr,lr.height=sr;const tr=Hn(this,In)?Hn(this,gn):Or(this,Sn,Ax).call(this,nr,sr),Jn=lr.getContext("2d");Jn.filter=this._uiManager.hcmFilter,Jn.drawImage(tr,0,0,tr.width,tr.height,0,0,nr,sr)},l0=function(nr){if(nr){if(Hn(this,In)){const tr=this._uiManager.imageManager.getSvgUrl(Hn(this,yn));if(tr)return tr}const sr=document.createElement("canvas");return{width:sr.width,height:sr.height}=Hn(this,gn),sr.getContext("2d").drawImage(Hn(this,gn),0,0),sr.toDataURL()}if(Hn(this,In)){const[sr,lr]=this.pageDimensions,tr=Math.round(this.width*sr*fn.PixelsPerInch.PDF_TO_CSS_UNITS),Jn=Math.round(this.height*lr*fn.PixelsPerInch.PDF_TO_CSS_UNITS),ar=new OffscreenCanvas(tr,Jn);return ar.getContext("2d").drawImage(Hn(this,gn),0,0,Hn(this,gn).width,Hn(this,gn).height,0,0,tr,Jn),ar.transferToImageBitmap()}return structuredClone(Hn(this,gn))},Rx=function(){Fr(this,Pn,new ResizeObserver(nr=>{const sr=nr[0].contentRect;sr.width&&sr.height&&Or(this,Sn,wx).call(this,sr.width,sr.height)})),Hn(this,Pn).observe(this.div)},io(Mn,"_type","stamp");let mn=Mn;e.StampEditor=mn}],__webpack_module_cache__={};function __w_pdfjs_require__(_e){var e=__webpack_module_cache__[_e];if(e!==void 0)return e.exports;var un=__webpack_module_cache__[_e]={exports:{}};return __webpack_modules__[_e](un,un.exports,__w_pdfjs_require__),un.exports}var __webpack_exports__={};return(()=>{var _e=__webpack_exports__;Object.defineProperty(_e,"__esModule",{value:!0}),Object.defineProperty(_e,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(_e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return fn.AnnotationEditorLayer}}),Object.defineProperty(_e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(_e,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(_e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return pn.AnnotationEditorUIManager}}),Object.defineProperty(_e,"AnnotationLayer",{enumerable:!0,get:function(){return mn.AnnotationLayer}}),Object.defineProperty(_e,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(_e,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(_e,"DOMSVGFactory",{enumerable:!0,get:function(){return dn.DOMSVGFactory}}),Object.defineProperty(_e,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(_e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return gn.GlobalWorkerOptions}}),Object.defineProperty(_e,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(_e,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(_e,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(_e,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(_e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return un.PDFDataRangeTransport}}),Object.defineProperty(_e,"PDFDateString",{enumerable:!0,get:function(){return dn.PDFDateString}}),Object.defineProperty(_e,"PDFWorker",{enumerable:!0,get:function(){return un.PDFWorker}}),Object.defineProperty(_e,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(_e,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(_e,"PixelsPerInch",{enumerable:!0,get:function(){return dn.PixelsPerInch}}),Object.defineProperty(_e,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(_e,"RenderingCancelledException",{enumerable:!0,get:function(){return dn.RenderingCancelledException}}),Object.defineProperty(_e,"SVGGraphics",{enumerable:!0,get:function(){return un.SVGGraphics}}),Object.defineProperty(_e,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(_e,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(_e,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(_e,"XfaLayer",{enumerable:!0,get:function(){return yn.XfaLayer}}),Object.defineProperty(_e,"build",{enumerable:!0,get:function(){return un.build}}),Object.defineProperty(_e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(_e,"getDocument",{enumerable:!0,get:function(){return un.getDocument}}),Object.defineProperty(_e,"getFilenameFromUrl",{enumerable:!0,get:function(){return dn.getFilenameFromUrl}}),Object.defineProperty(_e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return dn.getPdfFilenameFromUrl}}),Object.defineProperty(_e,"getXfaPageViewport",{enumerable:!0,get:function(){return dn.getXfaPageViewport}}),Object.defineProperty(_e,"isDataScheme",{enumerable:!0,get:function(){return dn.isDataScheme}}),Object.defineProperty(_e,"isPdfFile",{enumerable:!0,get:function(){return dn.isPdfFile}}),Object.defineProperty(_e,"loadScript",{enumerable:!0,get:function(){return dn.loadScript}}),Object.defineProperty(_e,"noContextMenu",{enumerable:!0,get:function(){return dn.noContextMenu}}),Object.defineProperty(_e,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(_e,"renderTextLayer",{enumerable:!0,get:function(){return hn.renderTextLayer}}),Object.defineProperty(_e,"setLayerDimensions",{enumerable:!0,get:function(){return dn.setLayerDimensions}}),Object.defineProperty(_e,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(_e,"updateTextLayer",{enumerable:!0,get:function(){return hn.updateTextLayer}}),Object.defineProperty(_e,"version",{enumerable:!0,get:function(){return un.version}});var e=__w_pdfjs_require__(1),un=__w_pdfjs_require__(2),dn=__w_pdfjs_require__(6),hn=__w_pdfjs_require__(26),fn=__w_pdfjs_require__(27),pn=__w_pdfjs_require__(5),mn=__w_pdfjs_require__(29),gn=__w_pdfjs_require__(14),yn=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;pdfExports.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const findTotalPagesFromOcr=_e=>{const e=/==End of OCR for page (\d+)==/g;let un=0;const dn=_e.matchAll(e);for(const hn of dn){const fn=parseInt(hn[1],10);fn>un&&(un=fn)}return un},extractPageRangeFromOcr=(_e,e,un)=>{const dn=[];for(let hn=e;hn<=un;hn++){const fn=`==Start of OCR for page ${hn}==`,pn=`==End of OCR for page ${hn}==`,mn=_e.indexOf(fn),gn=_e.indexOf(pn);if(mn!==-1&&gn!==-1){const yn=_e.substring(mn+fn.length,gn).trim();dn.push(yn)}}return dn.join(`

`)},extractTextFromPdfPage=async(_e,e)=>{try{const un=await _e.arrayBuffer();return(await(await(await pdfExports.getDocument(un).promise).getPage(e)).getTextContent()).items.map(pn=>pn.str).join(" ")}catch(un){return console.error("Error extracting text from PDF page:",un),""}},extractAllPdfText=async _e=>{try{const e=await _e.arrayBuffer(),un=await pdfExports.getDocument(e).promise,dn=un.numPages;let hn="";for(let fn=1;fn<=dn;fn++){const gn=(await(await un.getPage(fn)).getTextContent()).items.map(yn=>yn.str).join(" ");hn+=`==Start of OCR for page ${fn}==
${gn}
==End of OCR for page ${fn}==

`}return hn}catch(e){return console.error("Error extracting all PDF text:",e),""}},GEMINI_API_KEY="AIzaSyAwPyxCmxk6oovqNuwCyK5AOjdgepuTXzk",analyzeImage=async(_e,e="english")=>{var un,dn,hn,fn,pn;try{const mn=await convertToBase64(_e),yn=`
Analyze this image for TNPSC (Tamil Nadu Public Service Commission) exam preparation.

${e==="tamil"?"Please provide all responses in Tamil language. Use Tamil script for all content.":"Please provide all responses in English language."}

CRITICAL INSTRUCTIONS:
- Extract ONLY specific, factual, and concrete information directly from the content
- DO NOT include generic statements about importance or what needs to be studied
- Focus on actual facts: names, dates, events, definitions, processes, figures, laws, etc.
- Provide practical memory tips for each study point to help with retention

Please provide a comprehensive analysis in the following JSON format:
{
  "mainTopic": "Main topic of the content",
  "studyPoints": [
    {
      "title": "Key point title",
      "description": "Detailed description",
      "importance": "high/medium/low",
      "tnpscRelevance": "TNPSC relevance explanation",
      "tnpscPriority": "high/medium/low",
      "memoryTip": "Easy memory tip for students"
    }
  ],
  "keyPoints": ["Specific factual point 1", "Specific factual point 2", ...],
  "summary": "Overall summary of the content",
  "tnpscRelevance": "How this content is relevant for TNPSC exams",
  "tnpscCategories": ["Category1", "Category2", ...],
  "difficulty": "easy/medium/hard"
}

Focus on:
- TNPSC Group 1, 2, 4 exam relevance
- Extracting specific facts, figures, names, dates, and definitions
- Important dates, names, places
- Conceptual understanding
- Application in exam context
- Make key points factual and specific from the actual content
- Provide creative memory tips using mnemonics, associations, or patterns
`,xn=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:yn},{inline_data:{mime_type:_e.type,data:mn.split(",")[1]}}]}],generationConfig:{temperature:.7,maxOutputTokens:2048}})});if(!xn.ok)throw new Error(`HTTP error! status: ${xn.status}`);const bn=(pn=(fn=(hn=(dn=(un=(await xn.json()).candidates)==null?void 0:un[0])==null?void 0:dn.content)==null?void 0:hn.parts)==null?void 0:fn[0])==null?void 0:pn.text;if(!bn)throw new Error("No content received from Gemini API");console.log("Raw Gemini response:",bn);const vn=bn.replace(/```json\n?|\n?```/g,"").trim(),Pn=JSON.parse(vn);return{keyPoints:Pn.keyPoints||[],summary:Pn.summary||"",tnpscRelevance:Pn.tnpscRelevance||"",studyPoints:Pn.studyPoints||[],tnpscCategories:Pn.tnpscCategories||[]}}catch(mn){throw console.error("Error analyzing image:",mn),mn}},generateQuestions=async(_e,e="medium",un="english")=>{var dn,hn,fn,pn,mn;try{const gn=_e.map(Sn=>({keyPoints:Sn.keyPoints.join(`
`),summary:Sn.summary,tnpscRelevance:Sn.tnpscRelevance})),yn=un==="tamil"?"Please provide all questions and answers in Tamil language.":"Please provide all questions and answers in English language.",xn=`
Based on the following TNPSC study content, generate 15-20 comprehensive questions:

Content Analysis:
${gn.map((Sn,Dn)=>`
Analysis ${Dn+1}:
Key Points: ${Sn.keyPoints}
Summary: ${Sn.summary}
TNPSC Relevance: ${Sn.tnpscRelevance}
`).join(`
`)}

Difficulty Level: ${e}
${yn}

CRITICAL INSTRUCTIONS:
- Generate questions ONLY from the specific facts and information provided in the key points and summary above
- DO NOT create questions about the importance of content or general study advice
- Focus on testing factual knowledge, specific details, and understanding of the provided content
- Questions should test recall of names, dates, events, definitions, and concepts mentioned in the material

Generate ONLY these types of questions:
- Multiple choice questions (4 options each) - 70%
- Assertion-Reason questions - 30%

For MCQ questions, provide 4 clear options (A, B, C, D).
IMPORTANT: The "answer" field should contain ONLY the option letter (A, B, C, or D), not the full option text.

For Assertion-Reason questions, provide:
- Assertion statement
- Reason statement  
- 4 options: (A) Both assertion and reason are true and reason is correct explanation (B) Both assertion and reason are true but reason is not correct explanation (C) Assertion is true but reason is false (D) Both assertion and reason are false

Return as a JSON array:
[
  {
    "question": "Question text here",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "answer": "A",
    "type": "mcq" | "assertion_reason",
    "difficulty": "${e}",
    "tnpscGroup": "Group 1" | "Group 2" | "Group 4",
    "explanation": "Brief explanation of the answer"
  }
]

Ensure questions test:
- Specific factual knowledge from the provided key points
- Conceptual understanding  
- Application ability
- TNPSC exam pattern relevance
- Based on the actual content and facts provided in the analysis

CRITICAL: Make sure the "answer" field contains only the letter (A, B, C, or D) that corresponds to the correct option.
`,En=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:xn}]}],generationConfig:{temperature:.7,maxOutputTokens:3e3}})});if(!En.ok)throw new Error(`HTTP error! status: ${En.status}`);const vn=(mn=(pn=(fn=(hn=(dn=(await En.json()).candidates)==null?void 0:dn[0])==null?void 0:hn.content)==null?void 0:fn.parts)==null?void 0:pn[0])==null?void 0:mn.text;if(!vn)throw new Error("No content received from Gemini API");console.log("Raw questions response:",vn);const Pn=vn.replace(/```json\n?|\n?```/g,"").trim(),In=JSON.parse(Pn).map(Sn=>({...Sn,type:Sn.type==="short"?"mcq":Sn.type,options:Array.isArray(Sn.options)?Sn.options:["Option A","Option B","Option C","Option D"],answer:Sn.answer||"A"}));return{questions:In,summary:gn.map(Sn=>Sn.summary).join(" "),keyPoints:_e.flatMap(Sn=>Sn.keyPoints),difficulty:e,totalQuestions:In.length}}catch(gn){throw console.error("Error generating questions:",gn),gn}},analyzePdfContent=async(_e,e="english")=>{var un,dn,hn,fn,pn;try{const gn=`
Analyze this PDF text content for TNPSC (Tamil Nadu Public Service Commission) exam preparation.

${e==="tamil"?"Please provide all responses in Tamil language. Use Tamil script for all content.":"Please provide all responses in English language."}

Content: ${_e.substring(0,8e3)}

Please provide a comprehensive analysis in the following JSON format:
{
CRITICAL INSTRUCTIONS:
- Extract ONLY specific, factual, and concrete information directly from the content
- DO NOT include generic statements about importance or what needs to be studied
- Focus on actual facts: names, dates, events, definitions, processes, figures, laws, etc.
- Provide practical memory tips for each study point to help with retention

  "mainTopic": "Main topic of the content",
  "studyPoints": [
    {
      "title": "Key point title",
      "description": "Detailed description",
      "importance": "high/medium/low",
      "tnpscRelevance": "TNPSC relevance explanation",
      "tnpscPriority": "high/medium/low",
      "memoryTip": "Easy memory tip for students"
    }
  ],
  "keyPoints": ["Specific factual point 1", "Specific factual point 2", ...],
  "summary": "Overall summary of the content",
  "tnpscRelevance": "How this content is relevant for TNPSC exams",
  "tnpscCategories": ["Category1", "Category2", ...],
  "difficulty": "easy/medium/hard"
}

Focus on:
- TNPSC Group 1, 2, 4 exam relevance
- Extracting specific facts, figures, names, dates, and definitions
- Important dates, names, places
- Conceptual understanding
- Application in exam context
- Make key points factual and specific from the actual content
- Provide creative memory tips using mnemonics, associations, or patterns
`,yn=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:gn}]}],generationConfig:{temperature:.7,maxOutputTokens:2048}})});if(!yn.ok)throw new Error(`HTTP error! status: ${yn.status}`);const En=(pn=(fn=(hn=(dn=(un=(await yn.json()).candidates)==null?void 0:un[0])==null?void 0:dn.content)==null?void 0:hn.parts)==null?void 0:fn[0])==null?void 0:pn.text;if(!En)throw new Error("No content received from Gemini API");console.log("Raw PDF analysis response:",En);const bn=En.replace(/```json\n?|\n?```/g,"").trim(),vn=JSON.parse(bn);return{keyPoints:vn.keyPoints||[],summary:vn.summary||"",tnpscRelevance:vn.tnpscRelevance||"",studyPoints:vn.studyPoints||[],tnpscCategories:vn.tnpscCategories||[]}}catch(mn){throw console.error("Error analyzing PDF content:",mn),mn}},analyzeIndividualPage=async(_e,e,un="english")=>{var dn,hn,fn,pn,mn;try{const yn=`
Analyze this individual PDF page content for TNPSC exam preparation:

${un==="tamil"?"Please provide all responses in Tamil language.":"Please provide all responses in English language."}

Page ${e} Content: ${_e.substring(0,4e3)}

Please provide detailed analysis in JSON format:
{
  "keyPoints": ["Specific factual point 1", "Specific factual point 2", "Specific factual point 3", "Specific factual point 4", "Specific factual point 5", "Specific factual point 6", "Specific factual point 7", "Specific factual point 8"],
  "studyPoints": [
    {
      "title": "Study point title",
      "description": "Detailed description",
      "importance": "high/medium/low",
      "tnpscRelevance": "TNPSC relevance explanation",
      "memoryTip": "Easy memory tip for students"
  "keyPoints": ["Specific factual point 1", "Specific factual point 2", ...],
  ],
  "summary": "Brief summary of the page content",
  "tnpscRelevance": "How this content relates to TNPSC exams"
}

Focus on:
- Extract at least 8 specific factual key points per page from the actual content
- Detailed study points with TNPSC relevance
- Specific facts, names, dates, and concrete information
- Key information for study
- Make key points factual and specific from the actual content
- Definitions and explanations
- Statistical data and figures
- Historical context and significance
- Provide creative memory tips using mnemonics, associations, or patterns
`,xn=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:yn}]}],generationConfig:{temperature:.7,maxOutputTokens:3e3}})});if(!xn.ok)throw new Error(`HTTP error! status: ${xn.status}`);const bn=(mn=(pn=(fn=(hn=(dn=(await xn.json()).candidates)==null?void 0:dn[0])==null?void 0:hn.content)==null?void 0:fn.parts)==null?void 0:pn[0])==null?void 0:mn.text;if(!bn)throw new Error("No content received from Gemini API");const vn=bn.replace(/```json\n?|\n?```/g,"").trim(),Pn=JSON.parse(vn);return{pageNumber:e,keyPoints:Pn.keyPoints||[],studyPoints:Pn.studyPoints||[],summary:Pn.summary||"",tnpscRelevance:Pn.tnpscRelevance||""}}catch(gn){throw console.error(`Error analyzing page ${e}:`,gn),gn}},convertToBase64=_e=>new Promise((e,un)=>{const dn=new FileReader;dn.readAsDataURL(_e),dn.onload=()=>e(dn.result),dn.onerror=hn=>un(hn)}),AppContext=reactExports.createContext(void 0),useAppContext=()=>{const _e=reactExports.useContext(AppContext);if(!_e)throw new Error("useAppContext must be used within AppProvider");return _e},AppProvider=({children:_e})=>{const[e,un]=reactExports.useState([]),[dn,hn]=reactExports.useState([]),[fn,pn]=reactExports.useState(null),[mn,gn]=reactExports.useState("medium"),[yn,xn]=reactExports.useState("english"),En=()=>{un([]),hn([]),pn(null),gn("medium"),xn("english")};return jsxRuntimeExports.jsx(AppContext.Provider,{value:{selectedFiles:e,setSelectedFiles:un,analysisResults:dn,setAnalysisResults:hn,questionResult:fn,setQuestionResult:pn,difficulty:mn,setDifficulty:gn,outputLanguage:yn,setOutputLanguage:xn,clearAppState:En},children:_e})},scriptRel="modulepreload",assetsURL=function(_e){return"/"+_e},seen={},__vitePreload=function _e(e,un,dn){let hn=Promise.resolve();if(un&&un.length>0){document.getElementsByTagName("link");const pn=document.querySelector("meta[property=csp-nonce]"),mn=(pn==null?void 0:pn.nonce)||(pn==null?void 0:pn.getAttribute("nonce"));hn=Promise.allSettled(un.map(gn=>{if(gn=assetsURL(gn),gn in seen)return;seen[gn]=!0;const yn=gn.endsWith(".css"),xn=yn?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${gn}"]${xn}`))return;const En=document.createElement("link");if(En.rel=yn?"stylesheet":scriptRel,yn||(En.as="script"),En.crossOrigin="",En.href=gn,mn&&En.setAttribute("nonce",mn),document.head.appendChild(En),yn)return new Promise((bn,vn)=>{En.addEventListener("load",bn),En.addEventListener("error",()=>vn(new Error(`Unable to preload CSS for ${gn}`)))})}))}function fn(pn){const mn=new Event("vite:preloadError",{cancelable:!0});if(mn.payload=pn,window.dispatchEvent(mn),!mn.defaultPrevented)throw pn}return hn.then(pn=>{for(const mn of pn||[])mn.status==="rejected"&&fn(mn.reason);return e().catch(fn)})};function _typeof(_e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(_e)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(_e,e){for(var un=new u16(31),dn=0;dn<31;++dn)un[dn]=e+=1<<_e[dn-1];for(var hn=new i32(un[30]),dn=1;dn<30;++dn)for(var fn=un[dn];fn<un[dn+1];++fn)hn[fn]=fn-un[dn]<<5|dn;return{b:un,r:hn}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(_e,e,un){for(var dn=_e.length,hn=0,fn=new u16(e);hn<dn;++hn)_e[hn]&&++fn[_e[hn]-1];var pn=new u16(e);for(hn=1;hn<e;++hn)pn[hn]=pn[hn-1]+fn[hn-1]<<1;var mn;if(un){mn=new u16(1<<e);var gn=15-e;for(hn=0;hn<dn;++hn)if(_e[hn])for(var yn=hn<<4|_e[hn],xn=e-_e[hn],En=pn[_e[hn]-1]++<<xn,bn=En|(1<<xn)-1;En<=bn;++En)mn[rev[En]>>gn]=yn}else for(mn=new u16(dn),hn=0;hn<dn;++hn)_e[hn]&&(mn[hn]=rev[pn[_e[hn]-1]++]>>15-_e[hn]);return mn},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(_e){for(var e=_e[0],un=1;un<_e.length;++un)_e[un]>e&&(e=_e[un]);return e},bits=function(_e,e,un){var dn=e/8|0;return(_e[dn]|_e[dn+1]<<8)>>(e&7)&un},bits16=function(_e,e){var un=e/8|0;return(_e[un]|_e[un+1]<<8|_e[un+2]<<16)>>(e&7)},shft=function(_e){return(_e+7)/8|0},slc=function(_e,e,un){return(un==null||un>_e.length)&&(un=_e.length),new u8(_e.subarray(e,un))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(_e,e,un){var dn=new Error(e||ec[_e]);if(dn.code=_e,Error.captureStackTrace&&Error.captureStackTrace(dn,err),!un)throw dn;return dn},inflt=function(_e,e,un,dn){var hn=_e.length,fn=0;if(!hn||e.f&&!e.l)return un||new u8(0);var pn=!un,mn=pn||e.i!=2,gn=e.i;pn&&(un=new u8(hn*3));var yn=function(Tr){var Ir=un.length;if(Tr>Ir){var Mr=new u8(Math.max(Ir*2,Tr));Mr.set(un),un=Mr}},xn=e.f||0,En=e.p||0,bn=e.b||0,vn=e.l,Pn=e.d,Tn=e.m,In=e.n,Rn=hn*8;do{if(!vn){xn=bits(_e,En,1);var Sn=bits(_e,En+1,3);if(En+=3,Sn)if(Sn==1)vn=flrm,Pn=fdrm,Tn=9,In=5;else if(Sn==2){var Gn=bits(_e,En,31)+257,kn=bits(_e,En+10,15)+4,Nn=Gn+bits(_e,En+5,31)+1;En+=14;for(var Ln=new u8(Nn),zn=new u8(19),Cn=0;Cn<kn;++Cn)zn[clim[Cn]]=bits(_e,En+Cn*3,7);En+=kn*3;for(var Mn=max(zn),Bn=(1<<Mn)-1,Xn=hMap(zn,Mn,1),Cn=0;Cn<Nn;){var nr=Xn[bits(_e,En,Bn)];En+=nr&15;var Dn=nr>>4;if(Dn<16)Ln[Cn++]=Dn;else{var sr=0,lr=0;for(Dn==16?(lr=3+bits(_e,En,3),En+=2,sr=Ln[Cn-1]):Dn==17?(lr=3+bits(_e,En,7),En+=3):Dn==18&&(lr=11+bits(_e,En,127),En+=7);lr--;)Ln[Cn++]=sr}}var tr=Ln.subarray(0,Gn),Jn=Ln.subarray(Gn);Tn=max(tr),In=max(Jn),vn=hMap(tr,Tn,1),Pn=hMap(Jn,In,1)}else err(1);else{var Dn=shft(En)+4,$n=_e[Dn-4]|_e[Dn-3]<<8,Fn=Dn+$n;if(Fn>hn){gn&&err(0);break}mn&&yn(bn+$n),un.set(_e.subarray(Dn,Fn),bn),e.b=bn+=$n,e.p=En=Fn*8,e.f=xn;continue}if(En>Rn){gn&&err(0);break}}mn&&yn(bn+131072);for(var ar=(1<<Tn)-1,gr=(1<<In)-1,qn=En;;qn=En){var sr=vn[bits16(_e,En)&ar],On=sr>>4;if(En+=sr&15,En>Rn){gn&&err(0);break}if(sr||err(2),On<256)un[bn++]=On;else if(On==256){qn=En,vn=null;break}else{var Un=On-254;if(On>264){var Cn=On-257,Yn=fleb[Cn];Un=bits(_e,En,(1<<Yn)-1)+fl[Cn],En+=Yn}var er=Pn[bits16(_e,En)&gr],Zn=er>>4;er||err(3),En+=er&15;var Jn=fd[Zn];if(Zn>3){var Yn=fdeb[Zn];Jn+=bits16(_e,En)&(1<<Yn)-1,En+=Yn}if(En>Rn){gn&&err(0);break}mn&&yn(bn+131072);var ir=bn+Un;if(bn<Jn){var fr=fn-Jn,br=Math.min(Jn,ir);for(fr+bn<0&&err(3);bn<br;++bn)un[bn]=dn[fr+bn]}for(;bn<ir;++bn)un[bn]=un[bn-Jn]}}e.l=vn,e.p=qn,e.b=bn,e.f=xn,vn&&(xn=1,e.m=Tn,e.d=Pn,e.n=In)}while(!xn);return bn!=un.length&&pn?slc(un,0,bn):un.subarray(0,bn)},wbits=function(_e,e,un){un<<=e&7;var dn=e/8|0;_e[dn]|=un,_e[dn+1]|=un>>8},wbits16=function(_e,e,un){un<<=e&7;var dn=e/8|0;_e[dn]|=un,_e[dn+1]|=un>>8,_e[dn+2]|=un>>16},hTree=function(_e,e){for(var un=[],dn=0;dn<_e.length;++dn)_e[dn]&&un.push({s:dn,f:_e[dn]});var hn=un.length,fn=un.slice();if(!hn)return{t:et$1,l:0};if(hn==1){var pn=new u8(un[0].s+1);return pn[un[0].s]=1,{t:pn,l:1}}un.sort(function(Fn,Gn){return Fn.f-Gn.f}),un.push({s:-1,f:25001});var mn=un[0],gn=un[1],yn=0,xn=1,En=2;for(un[0]={s:-1,f:mn.f+gn.f,l:mn,r:gn};xn!=hn-1;)mn=un[un[yn].f<un[En].f?yn++:En++],gn=un[yn!=xn&&un[yn].f<un[En].f?yn++:En++],un[xn++]={s:-1,f:mn.f+gn.f,l:mn,r:gn};for(var bn=fn[0].s,dn=1;dn<hn;++dn)fn[dn].s>bn&&(bn=fn[dn].s);var vn=new u16(bn+1),Pn=ln(un[xn-1],vn,0);if(Pn>e){var dn=0,Tn=0,In=Pn-e,Rn=1<<In;for(fn.sort(function(Gn,kn){return vn[kn.s]-vn[Gn.s]||Gn.f-kn.f});dn<hn;++dn){var Sn=fn[dn].s;if(vn[Sn]>e)Tn+=Rn-(1<<Pn-vn[Sn]),vn[Sn]=e;else break}for(Tn>>=In;Tn>0;){var Dn=fn[dn].s;vn[Dn]<e?Tn-=1<<e-vn[Dn]++-1:++dn}for(;dn>=0&&Tn;--dn){var $n=fn[dn].s;vn[$n]==e&&(--vn[$n],++Tn)}Pn=e}return{t:new u8(vn),l:Pn}},ln=function(_e,e,un){return _e.s==-1?Math.max(ln(_e.l,e,un+1),ln(_e.r,e,un+1)):e[_e.s]=un},lc=function(_e){for(var e=_e.length;e&&!_e[--e];);for(var un=new u16(++e),dn=0,hn=_e[0],fn=1,pn=function(gn){un[dn++]=gn},mn=1;mn<=e;++mn)if(_e[mn]==hn&&mn!=e)++fn;else{if(!hn&&fn>2){for(;fn>138;fn-=138)pn(32754);fn>2&&(pn(fn>10?fn-11<<5|28690:fn-3<<5|12305),fn=0)}else if(fn>3){for(pn(hn),--fn;fn>6;fn-=6)pn(8304);fn>2&&(pn(fn-3<<5|8208),fn=0)}for(;fn--;)pn(hn);fn=1,hn=_e[mn]}return{c:un.subarray(0,dn),n:e}},clen=function(_e,e){for(var un=0,dn=0;dn<e.length;++dn)un+=_e[dn]*e[dn];return un},wfblk=function(_e,e,un){var dn=un.length,hn=shft(e+2);_e[hn]=dn&255,_e[hn+1]=dn>>8,_e[hn+2]=_e[hn]^255,_e[hn+3]=_e[hn+1]^255;for(var fn=0;fn<dn;++fn)_e[hn+fn+4]=un[fn];return(hn+4+dn)*8},wblk=function(_e,e,un,dn,hn,fn,pn,mn,gn,yn,xn){wbits(e,xn++,un),++hn[256];for(var En=hTree(hn,15),bn=En.t,vn=En.l,Pn=hTree(fn,15),Tn=Pn.t,In=Pn.l,Rn=lc(bn),Sn=Rn.c,Dn=Rn.n,$n=lc(Tn),Fn=$n.c,Gn=$n.n,kn=new u16(19),Nn=0;Nn<Sn.length;++Nn)++kn[Sn[Nn]&31];for(var Nn=0;Nn<Fn.length;++Nn)++kn[Fn[Nn]&31];for(var Ln=hTree(kn,7),zn=Ln.t,Cn=Ln.l,Mn=19;Mn>4&&!zn[clim[Mn-1]];--Mn);var Bn=yn+5<<3,Xn=clen(hn,flt)+clen(fn,fdt)+pn,nr=clen(hn,bn)+clen(fn,Tn)+pn+14+3*Mn+clen(kn,zn)+2*kn[16]+3*kn[17]+7*kn[18];if(gn>=0&&Bn<=Xn&&Bn<=nr)return wfblk(e,xn,_e.subarray(gn,gn+yn));var sr,lr,tr,Jn;if(wbits(e,xn,1+(nr<Xn)),xn+=2,nr<Xn){sr=hMap(bn,vn,0),lr=bn,tr=hMap(Tn,In,0),Jn=Tn;var ar=hMap(zn,Cn,0);wbits(e,xn,Dn-257),wbits(e,xn+5,Gn-1),wbits(e,xn+10,Mn-4),xn+=14;for(var Nn=0;Nn<Mn;++Nn)wbits(e,xn+3*Nn,zn[clim[Nn]]);xn+=3*Mn;for(var gr=[Sn,Fn],qn=0;qn<2;++qn)for(var On=gr[qn],Nn=0;Nn<On.length;++Nn){var Un=On[Nn]&31;wbits(e,xn,ar[Un]),xn+=zn[Un],Un>15&&(wbits(e,xn,On[Nn]>>5&127),xn+=On[Nn]>>12)}}else sr=flm,lr=flt,tr=fdm,Jn=fdt;for(var Nn=0;Nn<mn;++Nn){var Yn=dn[Nn];if(Yn>255){var Un=Yn>>18&31;wbits16(e,xn,sr[Un+257]),xn+=lr[Un+257],Un>7&&(wbits(e,xn,Yn>>23&31),xn+=fleb[Un]);var er=Yn&31;wbits16(e,xn,tr[er]),xn+=Jn[er],er>3&&(wbits16(e,xn,Yn>>5&8191),xn+=fdeb[er])}else wbits16(e,xn,sr[Yn]),xn+=lr[Yn]}return wbits16(e,xn,sr[256]),xn+lr[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(_e,e,un,dn,hn,fn){var pn=fn.z||_e.length,mn=new u8(dn+pn+5*(1+Math.ceil(pn/7e3))+hn),gn=mn.subarray(dn,mn.length-hn),yn=fn.l,xn=(fn.r||0)&7;if(e){xn&&(gn[0]=fn.r>>3);for(var En=deo[e-1],bn=En>>13,vn=En&8191,Pn=(1<<un)-1,Tn=fn.p||new u16(32768),In=fn.h||new u16(Pn+1),Rn=Math.ceil(un/3),Sn=2*Rn,Dn=function(qr){return(_e[qr]^_e[qr+1]<<Rn^_e[qr+2]<<Sn)&Pn},$n=new i32(25e3),Fn=new u16(288),Gn=new u16(32),kn=0,Nn=0,Ln=fn.i||0,zn=0,Cn=fn.w||0,Mn=0;Ln+2<pn;++Ln){var Bn=Dn(Ln),Xn=Ln&32767,nr=In[Bn];if(Tn[Xn]=nr,In[Bn]=Xn,Cn<=Ln){var sr=pn-Ln;if((kn>7e3||zn>24576)&&(sr>423||!yn)){xn=wblk(_e,gn,0,$n,Fn,Gn,Nn,zn,Mn,Ln-Mn,xn),zn=kn=Nn=0,Mn=Ln;for(var lr=0;lr<286;++lr)Fn[lr]=0;for(var lr=0;lr<30;++lr)Gn[lr]=0}var tr=2,Jn=0,ar=vn,gr=Xn-nr&32767;if(sr>2&&Bn==Dn(Ln-gr))for(var qn=Math.min(bn,sr)-1,On=Math.min(32767,Ln),Un=Math.min(258,sr);gr<=On&&--ar&&Xn!=nr;){if(_e[Ln+tr]==_e[Ln+tr-gr]){for(var Yn=0;Yn<Un&&_e[Ln+Yn]==_e[Ln+Yn-gr];++Yn);if(Yn>tr){if(tr=Yn,Jn=gr,Yn>qn)break;for(var er=Math.min(gr,Yn-2),Zn=0,lr=0;lr<er;++lr){var ir=Ln-gr+lr&32767,fr=Tn[ir],br=ir-fr&32767;br>Zn&&(Zn=br,nr=ir)}}}Xn=nr,nr=Tn[Xn],gr+=Xn-nr&32767}if(Jn){$n[zn++]=268435456|revfl[tr]<<18|revfd[Jn];var Tr=revfl[tr]&31,Ir=revfd[Jn]&31;Nn+=fleb[Tr]+fdeb[Ir],++Fn[257+Tr],++Gn[Ir],Cn=Ln+tr,++kn}else $n[zn++]=_e[Ln],++Fn[_e[Ln]]}}for(Ln=Math.max(Ln,Cn);Ln<pn;++Ln)$n[zn++]=_e[Ln],++Fn[_e[Ln]];xn=wblk(_e,gn,yn,$n,Fn,Gn,Nn,zn,Mn,Ln-Mn,xn),yn||(fn.r=xn&7|gn[xn/8|0]<<3,xn-=7,fn.h=In,fn.p=Tn,fn.i=Ln,fn.w=Cn)}else{for(var Ln=fn.w||0;Ln<pn+yn;Ln+=65535){var Mr=Ln+65535;Mr>=pn&&(gn[xn/8|0]=yn,Mr=pn),xn=wfblk(gn,xn+1,_e.subarray(Ln,Mr))}fn.i=pn}return slc(mn,0,dn+shft(xn)+hn)},adler=function(){var _e=1,e=0;return{p:function(un){for(var dn=_e,hn=e,fn=un.length|0,pn=0;pn!=fn;){for(var mn=Math.min(pn+2655,fn);pn<mn;++pn)hn+=dn+=un[pn];dn=(dn&65535)+15*(dn>>16),hn=(hn&65535)+15*(hn>>16)}_e=dn,e=hn},d:function(){return _e%=65521,e%=65521,(_e&255)<<24|(_e&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(_e,e,un,dn,hn){if(!hn&&(hn={l:1},e.dictionary)){var fn=e.dictionary.subarray(-32768),pn=new u8(fn.length+_e.length);pn.set(fn),pn.set(_e,fn.length),_e=pn,hn.w=fn.length}return dflt(_e,e.level==null?6:e.level,e.mem==null?hn.l?Math.ceil(Math.max(8,Math.min(13,Math.log(_e.length)))*1.5):20:12+e.mem,un,dn,hn)},wbytes=function(_e,e,un){for(;un;++e)_e[e]=un,un>>>=8},zlh=function(_e,e){var un=e.level,dn=un==0?0:un<6?1:un==9?3:2;if(_e[0]=120,_e[1]=dn<<6|(e.dictionary&&32),_e[1]|=31-(_e[0]<<8|_e[1])%31,e.dictionary){var hn=adler();hn.p(e.dictionary),wbytes(_e,2,hn.d())}},zls=function(_e,e){return((_e[0]&15)!=8||_e[0]>>4>7||(_e[0]<<8|_e[1])%31)&&err(6,"invalid zlib data"),(_e[1]>>5&1)==+!e&&err(6,"invalid zlib data: "+(_e[1]&32?"need":"unexpected")+" dictionary"),(_e[1]>>3&4)+2};function zlibSync(_e,e){e||(e={});var un=adler();un.p(_e);var dn=dopt(_e,e,e.dictionary?6:2,4);return zlh(dn,e),wbytes(dn,dn.length-4,un.d()),dn}function unzlibSync(_e,e){return inflt(_e.subarray(zls(_e,e),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(_e){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(_e){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(_e){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(_e))}};function o(_e,e,un){var dn=new XMLHttpRequest;dn.open("GET",_e),dn.responseType="blob",dn.onload=function(){l(dn.response,e,un)},dn.onerror=function(){a.error("could not download file")},dn.send()}function s(_e){var e=new XMLHttpRequest;e.open("HEAD",_e,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(_e){try{_e.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_e.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(_e,e,un){var dn=n.URL||n.webkitURL,hn=document.createElement("a");e=e||_e.name||"download",hn.download=e,hn.rel="noopener",typeof _e=="string"?(hn.href=_e,hn.origin!==location.origin?s(hn.href)?o(_e,e,un):c(hn,hn.target="_blank"):c(hn)):(hn.href=dn.createObjectURL(_e),setTimeout(function(){dn.revokeObjectURL(hn.href)},4e4),setTimeout(function(){c(hn)},0))}:"msSaveOrOpenBlob"in navigator?function(_e,e,un){if(e=e||_e.name||"download",typeof _e=="string")if(s(_e))o(_e,e,un);else{var dn=document.createElement("a");dn.href=_e,dn.target="_blank",setTimeout(function(){c(dn)})}else navigator.msSaveOrOpenBlob(function(hn,fn){return fn===void 0?fn={autoBom:!1}:_typeof(fn)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),fn={autoBom:!fn}),fn.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(hn.type)?new Blob(["\uFEFF",hn],{type:hn.type}):hn}(_e,un),e)}:function(_e,e,un,dn){if((dn=dn||open("","_blank"))&&(dn.document.title=dn.document.body.innerText="downloading..."),typeof _e=="string")return o(_e,e,un);var hn=_e.type==="application/octet-stream",fn=/constructor/i.test(n.HTMLElement)||n.safari,pn=/CriOS\/[\d]+/.test(navigator.userAgent);if((pn||hn&&fn)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var mn=new FileReader;mn.onloadend=function(){var xn=mn.result;xn=pn?xn:xn.replace(/^data:[^;]*;/,"data:attachment/file;"),dn?dn.location.href=xn:location=xn,dn=null},mn.readAsDataURL(_e)}else{var gn=n.URL||n.webkitURL,yn=gn.createObjectURL(_e);dn?dn.location=yn:location.href=yn,dn=null,setTimeout(function(){gn.revokeObjectURL(yn)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(_e){var e;_e=_e||"",this.ok=!1,_e.charAt(0)=="#"&&(_e=_e.substr(1,6)),_e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[_e=(_e=_e.replace(/ /g,"")).toLowerCase()]||_e;for(var un=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(mn){return[parseInt(mn[1]),parseInt(mn[2]),parseInt(mn[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(mn){return[parseInt(mn[1],16),parseInt(mn[2],16),parseInt(mn[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(mn){return[parseInt(mn[1]+mn[1],16),parseInt(mn[2]+mn[2],16),parseInt(mn[3]+mn[3],16)]}}],dn=0;dn<un.length;dn++){var hn=un[dn].re,fn=un[dn].process,pn=hn.exec(_e);pn&&(e=fn(pn),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var mn=this.r.toString(16),gn=this.g.toString(16),yn=this.b.toString(16);return mn.length==1&&(mn="0"+mn),gn.length==1&&(gn="0"+gn),yn.length==1&&(yn="0"+yn),"#"+mn+gn+yn}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(_e,e){var un=_e[0],dn=_e[1],hn=_e[2],fn=_e[3];un=g(un,dn,hn,fn,e[0],7,-680876936),fn=g(fn,un,dn,hn,e[1],12,-389564586),hn=g(hn,fn,un,dn,e[2],17,606105819),dn=g(dn,hn,fn,un,e[3],22,-1044525330),un=g(un,dn,hn,fn,e[4],7,-176418897),fn=g(fn,un,dn,hn,e[5],12,1200080426),hn=g(hn,fn,un,dn,e[6],17,-1473231341),dn=g(dn,hn,fn,un,e[7],22,-45705983),un=g(un,dn,hn,fn,e[8],7,1770035416),fn=g(fn,un,dn,hn,e[9],12,-1958414417),hn=g(hn,fn,un,dn,e[10],17,-42063),dn=g(dn,hn,fn,un,e[11],22,-1990404162),un=g(un,dn,hn,fn,e[12],7,1804603682),fn=g(fn,un,dn,hn,e[13],12,-40341101),hn=g(hn,fn,un,dn,e[14],17,-1502002290),un=m(un,dn=g(dn,hn,fn,un,e[15],22,1236535329),hn,fn,e[1],5,-165796510),fn=m(fn,un,dn,hn,e[6],9,-1069501632),hn=m(hn,fn,un,dn,e[11],14,643717713),dn=m(dn,hn,fn,un,e[0],20,-373897302),un=m(un,dn,hn,fn,e[5],5,-701558691),fn=m(fn,un,dn,hn,e[10],9,38016083),hn=m(hn,fn,un,dn,e[15],14,-660478335),dn=m(dn,hn,fn,un,e[4],20,-405537848),un=m(un,dn,hn,fn,e[9],5,568446438),fn=m(fn,un,dn,hn,e[14],9,-1019803690),hn=m(hn,fn,un,dn,e[3],14,-187363961),dn=m(dn,hn,fn,un,e[8],20,1163531501),un=m(un,dn,hn,fn,e[13],5,-1444681467),fn=m(fn,un,dn,hn,e[2],9,-51403784),hn=m(hn,fn,un,dn,e[7],14,1735328473),un=v(un,dn=m(dn,hn,fn,un,e[12],20,-1926607734),hn,fn,e[5],4,-378558),fn=v(fn,un,dn,hn,e[8],11,-2022574463),hn=v(hn,fn,un,dn,e[11],16,1839030562),dn=v(dn,hn,fn,un,e[14],23,-35309556),un=v(un,dn,hn,fn,e[1],4,-1530992060),fn=v(fn,un,dn,hn,e[4],11,1272893353),hn=v(hn,fn,un,dn,e[7],16,-155497632),dn=v(dn,hn,fn,un,e[10],23,-1094730640),un=v(un,dn,hn,fn,e[13],4,681279174),fn=v(fn,un,dn,hn,e[0],11,-358537222),hn=v(hn,fn,un,dn,e[3],16,-722521979),dn=v(dn,hn,fn,un,e[6],23,76029189),un=v(un,dn,hn,fn,e[9],4,-640364487),fn=v(fn,un,dn,hn,e[12],11,-421815835),hn=v(hn,fn,un,dn,e[15],16,530742520),un=b(un,dn=v(dn,hn,fn,un,e[2],23,-995338651),hn,fn,e[0],6,-198630844),fn=b(fn,un,dn,hn,e[7],10,1126891415),hn=b(hn,fn,un,dn,e[14],15,-1416354905),dn=b(dn,hn,fn,un,e[5],21,-57434055),un=b(un,dn,hn,fn,e[12],6,1700485571),fn=b(fn,un,dn,hn,e[3],10,-1894986606),hn=b(hn,fn,un,dn,e[10],15,-1051523),dn=b(dn,hn,fn,un,e[1],21,-2054922799),un=b(un,dn,hn,fn,e[8],6,1873313359),fn=b(fn,un,dn,hn,e[15],10,-30611744),hn=b(hn,fn,un,dn,e[6],15,-1560198380),dn=b(dn,hn,fn,un,e[13],21,1309151649),un=b(un,dn,hn,fn,e[4],6,-145523070),fn=b(fn,un,dn,hn,e[11],10,-1120210379),hn=b(hn,fn,un,dn,e[2],15,718787259),dn=b(dn,hn,fn,un,e[9],21,-343485551),_e[0]=_(un,_e[0]),_e[1]=_(dn,_e[1]),_e[2]=_(hn,_e[2]),_e[3]=_(fn,_e[3])}function p(_e,e,un,dn,hn,fn){return e=_(_(e,_e),_(dn,fn)),_(e<<hn|e>>>32-hn,un)}function g(_e,e,un,dn,hn,fn,pn){return p(e&un|~e&dn,_e,e,hn,fn,pn)}function m(_e,e,un,dn,hn,fn,pn){return p(e&dn|un&~dn,_e,e,hn,fn,pn)}function v(_e,e,un,dn,hn,fn,pn){return p(e^un^dn,_e,e,hn,fn,pn)}function b(_e,e,un,dn,hn,fn,pn){return p(un^(e|~dn),_e,e,hn,fn,pn)}function y(_e){var e,un=_e.length,dn=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=_e.length;e+=64)d(dn,w(_e.substring(e-64,e)));_e=_e.substring(e-64);var hn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<_e.length;e++)hn[e>>2]|=_e.charCodeAt(e)<<(e%4<<3);if(hn[e>>2]|=128<<(e%4<<3),e>55)for(d(dn,hn),e=0;e<16;e++)hn[e]=0;return hn[14]=8*un,d(dn,hn),dn}function w(_e){var e,un=[];for(e=0;e<64;e+=4)un[e>>2]=_e.charCodeAt(e)+(_e.charCodeAt(e+1)<<8)+(_e.charCodeAt(e+2)<<16)+(_e.charCodeAt(e+3)<<24);return un}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(_e){for(var e="",un=0;un<4;un++)e+=N[_e>>8*un+4&15]+N[_e>>8*un&15];return e}function A(_e){return String.fromCharCode((255&_e)>>0,(65280&_e)>>8,(16711680&_e)>>16,(4278190080&_e)>>24)}function x(_e){return y(_e).map(A).join("")}var S=function(_e){for(var e=0;e<_e.length;e++)_e[e]=L(_e[e]);return _e.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(_e,e){if(S){var un=(65535&_e)+(65535&e);return(_e>>16)+(e>>16)+(un>>16)<<16|65535&un}return _e+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(_e,e){var un,dn,hn,fn;if(_e!==un){for(var pn=(hn=_e,fn=1+(256/_e.length>>0),new Array(fn+1).join(hn)),mn=[],gn=0;gn<256;gn++)mn[gn]=gn;var yn=0;for(gn=0;gn<256;gn++){var xn=mn[gn];yn=(yn+xn+pn.charCodeAt(gn))%256,mn[gn]=mn[yn],mn[yn]=xn}un=_e,dn=mn}else mn=dn;var En=e.length,bn=0,vn=0,Pn="";for(gn=0;gn<En;gn++)vn=(vn+(xn=mn[bn=(bn+1)%256]))%256,mn[bn]=mn[vn],mn[vn]=xn,pn=mn[(mn[bn]+mn[vn])%256],Pn+=String.fromCharCode(e.charCodeAt(gn)^pn);return Pn}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(_e,e,un,dn){this.v=1,this.r=2;var hn=192;_e.forEach(function(mn){if(k.perm!==void 0)throw new Error("Invalid permission: "+mn);hn+=k[mn]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var fn=(e+this.padding).substr(0,32),pn=(un+this.padding).substr(0,32);this.O=this.processOwnerPassword(fn,pn),this.P=-(1+(255^hn)),this.encryptionKey=x(fn+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(dn)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(_e){if(/[^\u0000-\u00ff]/.test(_e))throw new Error("Invalid PDF Name Object: "+_e+", Only accept ASCII characters.");for(var e="",un=_e.length,dn=0;dn<un;dn++){var hn=_e.charCodeAt(dn);hn<33||hn===35||hn===37||hn===40||hn===41||hn===47||hn===60||hn===62||hn===91||hn===93||hn===123||hn===125||hn>126?e+="#"+("0"+hn.toString(16)).slice(-2):e+=_e[dn]}return e}function C(_e){if(_typeof(_e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(un,dn,hn){if(hn=hn||!1,typeof un!="string"||typeof dn!="function"||typeof hn!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(un)||(e[un]={});var fn=Math.random().toString(35);return e[un][fn]=[dn,!!hn],fn},this.unsubscribe=function(un){for(var dn in e)if(e[dn][un])return delete e[dn][un],Object.keys(e[dn]).length===0&&delete e[dn],!0;return!1},this.publish=function(un){if(e.hasOwnProperty(un)){var dn=Array.prototype.slice.call(arguments,1),hn=[];for(var fn in e[un]){var pn=e[un][fn];try{pn[0].apply(_e,dn)}catch(mn){n.console&&a.error("jsPDF PubSub Error",mn.message,mn)}pn[1]&&hn.push(fn)}hn.length&&hn.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(_e){if(!(this instanceof j))return new j(_e);var e="opacity,stroke-opacity".split(",");for(var un in _e)_e.hasOwnProperty(un)&&e.indexOf(un)>=0&&(this[un]=_e[un]);this.id="",this.objectNumber=-1}function O(_e,e){this.gState=_e,this.matrix=e,this.id="",this.objectNumber=-1}function B(_e,e,un,dn,hn){if(!(this instanceof B))return new B(_e,e,un,dn,hn);this.type=_e==="axial"?2:3,this.coords=e,this.colors=un,O.call(this,dn,hn)}function M(_e,e,un,dn,hn){if(!(this instanceof M))return new M(_e,e,un,dn,hn);this.boundingBox=_e,this.xStep=e,this.yStep=un,this.stream="",this.cloneIndex=0,O.call(this,dn,hn)}function E(_e){var e,un=typeof arguments[0]=="string"?arguments[0]:"p",dn=arguments[1],hn=arguments[2],fn=arguments[3],pn=[],mn=1,gn=16,yn="S",xn=null;_typeof(_e=_e||{})==="object"&&(un=_e.orientation,dn=_e.unit||dn,hn=_e.format||hn,fn=_e.compress||_e.compressPdf||fn,(xn=_e.encryption||null)!==null&&(xn.userPassword=xn.userPassword||"",xn.ownerPassword=xn.ownerPassword||"",xn.userPermissions=xn.userPermissions||[]),mn=typeof _e.userUnit=="number"?Math.abs(_e.userUnit):1,_e.precision!==void 0&&(e=_e.precision),_e.floatPrecision!==void 0&&(gn=_e.floatPrecision),yn=_e.defaultPathOperation||"S"),pn=_e.filters||(fn===!0?["FlateEncode"]:pn),dn=dn||"mm",un=(""+(un||"P")).toLowerCase();var En=_e.putOnlyUsedFonts||!1,bn={},vn={internal:{},__private__:{}};vn.__private__.PubSub=C;var Pn="1.3",Tn=vn.__private__.getPdfVersion=function(){return Pn};vn.__private__.setPdfVersion=function(Vn){Pn=Vn};var In={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};vn.__private__.getPageFormats=function(){return In};var Rn=vn.__private__.getPageFormat=function(Vn){return In[Vn]};hn=hn||"a4";var Sn={COMPAT:"compat",ADVANCED:"advanced"},Dn=Sn.COMPAT;function $n(){this.saveGraphicsState(),or(new Dr(as,0,0,-as,0,jo()*as).toString()+" cm"),this.setFontSize(this.getFontSize()/as),yn="n",Dn=Sn.ADVANCED}function Fn(){this.restoreGraphicsState(),yn="S",Dn=Sn.COMPAT}var Gn=vn.__private__.combineFontStyleAndFontWeight=function(Vn,ur){if(Vn=="bold"&&ur=="normal"||Vn=="bold"&&ur==400||Vn=="normal"&&ur=="italic"||Vn=="bold"&&ur=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ur&&(Vn=ur==400||ur==="normal"?Vn==="italic"?"italic":"normal":ur!=700&&ur!=="bold"||Vn!=="normal"?(ur==700?"bold":ur)+""+Vn:"bold"),Vn};vn.advancedAPI=function(Vn){var ur=Dn===Sn.COMPAT;return ur&&$n.call(this),typeof Vn!="function"||(Vn(this),ur&&Fn.call(this)),this},vn.compatAPI=function(Vn){var ur=Dn===Sn.ADVANCED;return ur&&Fn.call(this),typeof Vn!="function"||(Vn(this),ur&&$n.call(this)),this},vn.isAdvancedAPI=function(){return Dn===Sn.ADVANCED};var kn,Nn=function(Vn){if(Dn!==Sn.ADVANCED)throw new Error(Vn+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ln=vn.roundToPrecision=vn.__private__.roundToPrecision=function(Vn,ur){var Cr=e||ur;if(isNaN(Vn)||isNaN(Cr))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Vn.toFixed(Cr).replace(/0+$/,"")};kn=vn.hpf=vn.__private__.hpf=typeof gn=="number"?function(Vn){if(isNaN(Vn))throw new Error("Invalid argument passed to jsPDF.hpf");return Ln(Vn,gn)}:gn==="smart"?function(Vn){if(isNaN(Vn))throw new Error("Invalid argument passed to jsPDF.hpf");return Ln(Vn,Vn>-1&&Vn<1?16:5)}:function(Vn){if(isNaN(Vn))throw new Error("Invalid argument passed to jsPDF.hpf");return Ln(Vn,16)};var zn=vn.f2=vn.__private__.f2=function(Vn){if(isNaN(Vn))throw new Error("Invalid argument passed to jsPDF.f2");return Ln(Vn,2)},Cn=vn.__private__.f3=function(Vn){if(isNaN(Vn))throw new Error("Invalid argument passed to jsPDF.f3");return Ln(Vn,3)},Mn=vn.scale=vn.__private__.scale=function(Vn){if(isNaN(Vn))throw new Error("Invalid argument passed to jsPDF.scale");return Dn===Sn.COMPAT?Vn*as:Dn===Sn.ADVANCED?Vn:void 0},Bn=function(Vn){return Dn===Sn.COMPAT?jo()-Vn:Dn===Sn.ADVANCED?Vn:void 0},Xn=function(Vn){return Mn(Bn(Vn))};vn.__private__.setPrecision=vn.setPrecision=function(Vn){typeof parseInt(Vn,10)=="number"&&(e=parseInt(Vn,10))};var nr,sr="00000000000000000000000000000000",lr=vn.__private__.getFileId=function(){return sr},tr=vn.__private__.setFileId=function(Vn){return sr=Vn!==void 0&&/^[a-fA-F0-9]{32}$/.test(Vn)?Vn.toUpperCase():sr.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),xn!==null&&(fo=new I(xn.userPermissions,xn.userPassword,xn.ownerPassword,sr)),sr};vn.setFileId=function(Vn){return tr(Vn),this},vn.getFileId=function(){return lr()};var Jn=vn.__private__.convertDateToPDFDate=function(Vn){var ur=Vn.getTimezoneOffset(),Cr=ur<0?"+":"-",$r=Math.floor(Math.abs(ur/60)),Xr=Math.abs(ur%60),hs=[Cr,Un($r),"'",Un(Xr),"'"].join("");return["D:",Vn.getFullYear(),Un(Vn.getMonth()+1),Un(Vn.getDate()),Un(Vn.getHours()),Un(Vn.getMinutes()),Un(Vn.getSeconds()),hs].join("")},ar=vn.__private__.convertPDFDateToDate=function(Vn){var ur=parseInt(Vn.substr(2,4),10),Cr=parseInt(Vn.substr(6,2),10)-1,$r=parseInt(Vn.substr(8,2),10),Xr=parseInt(Vn.substr(10,2),10),hs=parseInt(Vn.substr(12,2),10),Es=parseInt(Vn.substr(14,2),10);return new Date(ur,Cr,$r,Xr,hs,Es,0)},gr=vn.__private__.setCreationDate=function(Vn){var ur;if(Vn===void 0&&(Vn=new Date),Vn instanceof Date)ur=Jn(Vn);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Vn))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ur=Vn}return nr=ur},qn=vn.__private__.getCreationDate=function(Vn){var ur=nr;return Vn==="jsDate"&&(ur=ar(nr)),ur};vn.setCreationDate=function(Vn){return gr(Vn),this},vn.getCreationDate=function(Vn){return qn(Vn)};var On,Un=vn.__private__.padd2=function(Vn){return("0"+parseInt(Vn)).slice(-2)},Yn=vn.__private__.padd2Hex=function(Vn){return("00"+(Vn=Vn.toString())).substr(Vn.length)},er=0,Zn=[],ir=[],fr=0,br=[],Tr=[],Ir=!1,Mr=ir,qr=function(){er=0,fr=0,ir=[],Zn=[],br=[],Ns=As(),Is=As()};vn.__private__.setCustomOutputDestination=function(Vn){Ir=!0,Mr=Vn};var Ar=function(Vn){Ir||(Mr=Vn)};vn.__private__.resetCustomOutputDestination=function(){Ir=!1,Mr=ir};var or=vn.__private__.out=function(Vn){return Vn=Vn.toString(),fr+=Vn.length+1,Mr.push(Vn),Mr},jr=vn.__private__.write=function(Vn){return or(arguments.length===1?Vn.toString():Array.prototype.join.call(arguments," "))},cr=vn.__private__.getArrayBuffer=function(Vn){for(var ur=Vn.length,Cr=new ArrayBuffer(ur),$r=new Uint8Array(Cr);ur--;)$r[ur]=Vn.charCodeAt(ur);return Cr},hr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];vn.__private__.getStandardFonts=function(){return hr};var wr=_e.fontSize||16;vn.__private__.setFontSize=vn.setFontSize=function(Vn){return wr=Dn===Sn.ADVANCED?Vn/as:Vn,this};var Pr,kr=vn.__private__.getFontSize=vn.getFontSize=function(){return Dn===Sn.COMPAT?wr:wr*as},Hr=_e.R2L||!1;vn.__private__.setR2L=vn.setR2L=function(Vn){return Hr=Vn,this},vn.__private__.getR2L=vn.getR2L=function(){return Hr};var Kr,Nr=vn.__private__.setZoomMode=function(Vn){var ur=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Vn))Pr=Vn;else if(isNaN(Vn)){if(ur.indexOf(Vn)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Vn+'" is not recognized.');Pr=Vn}else Pr=parseInt(Vn,10)};vn.__private__.getZoomMode=function(){return Pr};var ns,ts=vn.__private__.setPageMode=function(Vn){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Vn)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Vn+'" is not recognized.');Kr=Vn};vn.__private__.getPageMode=function(){return Kr};var Ps=vn.__private__.setLayoutMode=function(Vn){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Vn)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Vn+'" is not recognized.');ns=Vn};vn.__private__.getLayoutMode=function(){return ns},vn.__private__.setDisplayMode=vn.setDisplayMode=function(Vn,ur,Cr){return Nr(Vn),Ps(ur),ts(Cr),this};var ps={title:"",subject:"",author:"",keywords:"",creator:""};vn.__private__.getDocumentProperty=function(Vn){if(Object.keys(ps).indexOf(Vn)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ps[Vn]},vn.__private__.getDocumentProperties=function(){return ps},vn.__private__.setDocumentProperties=vn.setProperties=vn.setDocumentProperties=function(Vn){for(var ur in ps)ps.hasOwnProperty(ur)&&Vn[ur]&&(ps[ur]=Vn[ur]);return this},vn.__private__.setDocumentProperty=function(Vn,ur){if(Object.keys(ps).indexOf(Vn)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ps[Vn]=ur};var Cs,as,Ss,js,Bs,es={},Vr={},Wr=[],is={},ks={},ws={},Rr={},Zr=null,ds=0,fs=[],vs=new C(vn),Ts=_e.hotfixes||[],Er={},vr={},Lr=[],Dr=function Vn(ur,Cr,$r,Xr,hs,Es){if(!(this instanceof Vn))return new Vn(ur,Cr,$r,Xr,hs,Es);isNaN(ur)&&(ur=1),isNaN(Cr)&&(Cr=0),isNaN($r)&&($r=0),isNaN(Xr)&&(Xr=1),isNaN(hs)&&(hs=0),isNaN(Es)&&(Es=0),this._matrix=[ur,Cr,$r,Xr,hs,Es]};Object.defineProperty(Dr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Vn){this._matrix[0]=Vn}}),Object.defineProperty(Dr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Vn){this._matrix[1]=Vn}}),Object.defineProperty(Dr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Vn){this._matrix[2]=Vn}}),Object.defineProperty(Dr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Vn){this._matrix[3]=Vn}}),Object.defineProperty(Dr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Vn){this._matrix[4]=Vn}}),Object.defineProperty(Dr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Vn){this._matrix[5]=Vn}}),Object.defineProperty(Dr.prototype,"a",{get:function(){return this._matrix[0]},set:function(Vn){this._matrix[0]=Vn}}),Object.defineProperty(Dr.prototype,"b",{get:function(){return this._matrix[1]},set:function(Vn){this._matrix[1]=Vn}}),Object.defineProperty(Dr.prototype,"c",{get:function(){return this._matrix[2]},set:function(Vn){this._matrix[2]=Vn}}),Object.defineProperty(Dr.prototype,"d",{get:function(){return this._matrix[3]},set:function(Vn){this._matrix[3]=Vn}}),Object.defineProperty(Dr.prototype,"e",{get:function(){return this._matrix[4]},set:function(Vn){this._matrix[4]=Vn}}),Object.defineProperty(Dr.prototype,"f",{get:function(){return this._matrix[5]},set:function(Vn){this._matrix[5]=Vn}}),Object.defineProperty(Dr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dr.prototype.join=function(Vn){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(kn).join(Vn)},Dr.prototype.multiply=function(Vn){var ur=Vn.sx*this.sx+Vn.shy*this.shx,Cr=Vn.sx*this.shy+Vn.shy*this.sy,$r=Vn.shx*this.sx+Vn.sy*this.shx,Xr=Vn.shx*this.shy+Vn.sy*this.sy,hs=Vn.tx*this.sx+Vn.ty*this.shx+this.tx,Es=Vn.tx*this.shy+Vn.ty*this.sy+this.ty;return new Dr(ur,Cr,$r,Xr,hs,Es)},Dr.prototype.decompose=function(){var Vn=this.sx,ur=this.shy,Cr=this.shx,$r=this.sy,Xr=this.tx,hs=this.ty,Es=Math.sqrt(Vn*Vn+ur*ur),Ms=(Vn/=Es)*Cr+(ur/=Es)*$r;Cr-=Vn*Ms,$r-=ur*Ms;var An=Math.sqrt(Cr*Cr+$r*$r);return Ms/=An,Vn*($r/=An)<ur*(Cr/=An)&&(Vn=-Vn,ur=-ur,Ms=-Ms,Es=-Es),{scale:new Dr(Es,0,0,An,0,0),translate:new Dr(1,0,0,1,Xr,hs),rotate:new Dr(Vn,ur,-ur,Vn,0,0),skew:new Dr(1,0,Ms,1,0,0)}},Dr.prototype.toString=function(Vn){return this.join(" ")},Dr.prototype.inversed=function(){var Vn=this.sx,ur=this.shy,Cr=this.shx,$r=this.sy,Xr=this.tx,hs=this.ty,Es=1/(Vn*$r-ur*Cr),Ms=$r*Es,An=-ur*Es,Kn=-Cr*Es,rr=Vn*Es;return new Dr(Ms,An,Kn,rr,-Ms*Xr-Kn*hs,-An*Xr-rr*hs)},Dr.prototype.applyToPoint=function(Vn){var ur=Vn.x*this.sx+Vn.y*this.shx+this.tx,Cr=Vn.x*this.shy+Vn.y*this.sy+this.ty;return new tu(ur,Cr)},Dr.prototype.applyToRectangle=function(Vn){var ur=this.applyToPoint(Vn),Cr=this.applyToPoint(new tu(Vn.x+Vn.w,Vn.y+Vn.h));return new Ru(ur.x,ur.y,Cr.x-ur.x,Cr.y-ur.y)},Dr.prototype.clone=function(){var Vn=this.sx,ur=this.shy,Cr=this.shx,$r=this.sy,Xr=this.tx,hs=this.ty;return new Dr(Vn,ur,Cr,$r,Xr,hs)},vn.Matrix=Dr;var Jr=vn.matrixMult=function(Vn,ur){return ur.multiply(Vn)},ls=new Dr(1,0,0,1,0,0);vn.unitMatrix=vn.identityMatrix=ls;var cs=function(Vn,ur){if(!ks[Vn]){var Cr=(ur instanceof B?"Sh":"P")+(Object.keys(is).length+1).toString(10);ur.id=Cr,ks[Vn]=Cr,is[Cr]=ur,vs.publish("addPattern",ur)}};vn.ShadingPattern=B,vn.TilingPattern=M,vn.addShadingPattern=function(Vn,ur){return Nn("addShadingPattern()"),cs(Vn,ur),this},vn.beginTilingPattern=function(Vn){Nn("beginTilingPattern()"),Tu(Vn.boundingBox[0],Vn.boundingBox[1],Vn.boundingBox[2]-Vn.boundingBox[0],Vn.boundingBox[3]-Vn.boundingBox[1],Vn.matrix)},vn.endTilingPattern=function(Vn,ur){Nn("endTilingPattern()"),ur.stream=Tr[On].join(`
`),cs(Vn,ur),vs.publish("endTilingPattern",ur),Lr.pop().restore()};var Rs=vn.__private__.newObject=function(){var Vn=As();return gs(Vn,!0),Vn},As=vn.__private__.newObjectDeferred=function(){return er++,Zn[er]=function(){return fr},er},gs=function(Vn,ur){return ur=typeof ur=="boolean"&&ur,Zn[Vn]=fr,ur&&or(Vn+" 0 obj"),Vn},$s=vn.__private__.newAdditionalObject=function(){var Vn={objId:As(),content:""};return br.push(Vn),Vn},Ns=As(),Is=As(),Os=vn.__private__.decodeColorString=function(Vn){var ur=Vn.split(" ");if(ur.length!==2||ur[1]!=="g"&&ur[1]!=="G")ur.length===5&&(ur[4]==="k"||ur[4]==="K")&&(ur=[(1-ur[0])*(1-ur[3]),(1-ur[1])*(1-ur[3]),(1-ur[2])*(1-ur[3]),"r"]);else{var Cr=parseFloat(ur[0]);ur=[Cr,Cr,Cr,"r"]}for(var $r="#",Xr=0;Xr<3;Xr++)$r+=("0"+Math.floor(255*parseFloat(ur[Xr])).toString(16)).slice(-2);return $r},Vs=vn.__private__.encodeColorString=function(Vn){var ur;typeof Vn=="string"&&(Vn={ch1:Vn});var Cr=Vn.ch1,$r=Vn.ch2,Xr=Vn.ch3,hs=Vn.ch4,Es=Vn.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Cr=="string"&&Cr.charAt(0)!=="#"){var Ms=new f(Cr);if(Ms.ok)Cr=Ms.toHex();else if(!/^\d*\.?\d*$/.test(Cr))throw new Error('Invalid color "'+Cr+'" passed to jsPDF.encodeColorString.')}if(typeof Cr=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Cr)&&(Cr="#"+Cr[1]+Cr[1]+Cr[2]+Cr[2]+Cr[3]+Cr[3]),typeof Cr=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Cr)){var An=parseInt(Cr.substr(1),16);Cr=An>>16&255,$r=An>>8&255,Xr=255&An}if($r===void 0||hs===void 0&&Cr===$r&&$r===Xr)if(typeof Cr=="string")ur=Cr+" "+Es[0];else switch(Vn.precision){case 2:ur=zn(Cr/255)+" "+Es[0];break;case 3:default:ur=Cn(Cr/255)+" "+Es[0]}else if(hs===void 0||_typeof(hs)==="object"){if(hs&&!isNaN(hs.a)&&hs.a===0)return ur=["1.","1.","1.",Es[1]].join(" ");if(typeof Cr=="string")ur=[Cr,$r,Xr,Es[1]].join(" ");else switch(Vn.precision){case 2:ur=[zn(Cr/255),zn($r/255),zn(Xr/255),Es[1]].join(" ");break;default:case 3:ur=[Cn(Cr/255),Cn($r/255),Cn(Xr/255),Es[1]].join(" ")}}else if(typeof Cr=="string")ur=[Cr,$r,Xr,hs,Es[2]].join(" ");else switch(Vn.precision){case 2:ur=[zn(Cr),zn($r),zn(Xr),zn(hs),Es[2]].join(" ");break;case 3:default:ur=[Cn(Cr),Cn($r),Cn(Xr),Cn(hs),Es[2]].join(" ")}return ur},Us=vn.__private__.getFilters=function(){return pn},zs=vn.__private__.putStream=function(Vn){var ur=(Vn=Vn||{}).data||"",Cr=Vn.filters||Us(),$r=Vn.alreadyAppliedFilters||[],Xr=Vn.addLength1||!1,hs=ur.length,Es=Vn.objectId,Ms=function(Ws){return Ws};if(xn!==null&&Es===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");xn!==null&&(Ms=fo.encryptor(Es,0));var An={};Cr===!0&&(Cr=["FlateEncode"]);var Kn=Vn.additionalKeyValues||[],rr=(An=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(ur,Cr):{data:ur,reverseChain:[]}).reverseChain+(Array.isArray($r)?$r.join(" "):$r.toString());if(An.data.length!==0&&(Kn.push({key:"Length",value:An.data.length}),Xr===!0&&Kn.push({key:"Length1",value:hs})),rr.length!=0)if(rr.split("/").length-1==1)Kn.push({key:"Filter",value:rr});else{Kn.push({key:"Filter",value:"["+rr+"]"});for(var yr=0;yr<Kn.length;yr+=1)if(Kn[yr].key==="DecodeParms"){for(var Yr=[],os=0;os<An.reverseChain.split("/").length-1;os+=1)Yr.push("null");Yr.push(Kn[yr].value),Kn[yr].value="["+Yr.join(" ")+"]"}}or("<<");for(var bs=0;bs<Kn.length;bs++)or("/"+Kn[bs].key+" "+Kn[bs].value);or(">>"),An.data.length!==0&&(or("stream"),or(Ms(An.data)),or("endstream"))},Zs=vn.__private__.putPage=function(Vn){var ur=Vn.number,Cr=Vn.data,$r=Vn.objId,Xr=Vn.contentsObjId;gs($r,!0),or("<</Type /Page"),or("/Parent "+Vn.rootDictionaryObjId+" 0 R"),or("/Resources "+Vn.resourceDictionaryObjId+" 0 R"),or("/MediaBox ["+parseFloat(kn(Vn.mediaBox.bottomLeftX))+" "+parseFloat(kn(Vn.mediaBox.bottomLeftY))+" "+kn(Vn.mediaBox.topRightX)+" "+kn(Vn.mediaBox.topRightY)+"]"),Vn.cropBox!==null&&or("/CropBox ["+kn(Vn.cropBox.bottomLeftX)+" "+kn(Vn.cropBox.bottomLeftY)+" "+kn(Vn.cropBox.topRightX)+" "+kn(Vn.cropBox.topRightY)+"]"),Vn.bleedBox!==null&&or("/BleedBox ["+kn(Vn.bleedBox.bottomLeftX)+" "+kn(Vn.bleedBox.bottomLeftY)+" "+kn(Vn.bleedBox.topRightX)+" "+kn(Vn.bleedBox.topRightY)+"]"),Vn.trimBox!==null&&or("/TrimBox ["+kn(Vn.trimBox.bottomLeftX)+" "+kn(Vn.trimBox.bottomLeftY)+" "+kn(Vn.trimBox.topRightX)+" "+kn(Vn.trimBox.topRightY)+"]"),Vn.artBox!==null&&or("/ArtBox ["+kn(Vn.artBox.bottomLeftX)+" "+kn(Vn.artBox.bottomLeftY)+" "+kn(Vn.artBox.topRightX)+" "+kn(Vn.artBox.topRightY)+"]"),typeof Vn.userUnit=="number"&&Vn.userUnit!==1&&or("/UserUnit "+Vn.userUnit),vs.publish("putPage",{objId:$r,pageContext:fs[ur],pageNumber:ur,page:Cr}),or("/Contents "+Xr+" 0 R"),or(">>"),or("endobj");var hs=Cr.join(`
`);return Dn===Sn.ADVANCED&&(hs+=`
Q`),gs(Xr,!0),zs({data:hs,filters:Us(),objectId:Xr}),or("endobj"),$r},Qs=vn.__private__.putPages=function(){var Vn,ur,Cr=[];for(Vn=1;Vn<=ds;Vn++)fs[Vn].objId=As(),fs[Vn].contentsObjId=As();for(Vn=1;Vn<=ds;Vn++)Cr.push(Zs({number:Vn,data:Tr[Vn],objId:fs[Vn].objId,contentsObjId:fs[Vn].contentsObjId,mediaBox:fs[Vn].mediaBox,cropBox:fs[Vn].cropBox,bleedBox:fs[Vn].bleedBox,trimBox:fs[Vn].trimBox,artBox:fs[Vn].artBox,userUnit:fs[Vn].userUnit,rootDictionaryObjId:Ns,resourceDictionaryObjId:Is}));gs(Ns,!0),or("<</Type /Pages");var $r="/Kids [";for(ur=0;ur<ds;ur++)$r+=Cr[ur]+" 0 R ";or($r+"]"),or("/Count "+ds),or(">>"),or("endobj"),vs.publish("postPutPages")},vo=function(Vn){vs.publish("putFont",{font:Vn,out:or,newObject:Rs,putStream:zs}),Vn.isAlreadyPutted!==!0&&(Vn.objectNumber=Rs(),or("<<"),or("/Type /Font"),or("/BaseFont /"+F(Vn.postScriptName)),or("/Subtype /Type1"),typeof Vn.encoding=="string"&&or("/Encoding /"+Vn.encoding),or("/FirstChar 32"),or("/LastChar 255"),or(">>"),or("endobj"))},bo=function(){for(var Vn in es)es.hasOwnProperty(Vn)&&(En===!1||En===!0&&bn.hasOwnProperty(Vn))&&vo(es[Vn])},Ro=function(Vn){Vn.objectNumber=Rs();var ur=[];ur.push({key:"Type",value:"/XObject"}),ur.push({key:"Subtype",value:"/Form"}),ur.push({key:"BBox",value:"["+[kn(Vn.x),kn(Vn.y),kn(Vn.x+Vn.width),kn(Vn.y+Vn.height)].join(" ")+"]"}),ur.push({key:"Matrix",value:"["+Vn.matrix.toString()+"]"});var Cr=Vn.pages[1].join(`
`);zs({data:Cr,additionalKeyValues:ur,objectId:Vn.objectNumber}),or("endobj")},Qo=function(){for(var Vn in Er)Er.hasOwnProperty(Vn)&&Ro(Er[Vn])},mp=function(Vn,ur){var Cr,$r=[],Xr=1/(ur-1);for(Cr=0;Cr<1;Cr+=Xr)$r.push(Cr);if($r.push(1),Vn[0].offset!=0){var hs={offset:0,color:Vn[0].color};Vn.unshift(hs)}if(Vn[Vn.length-1].offset!=1){var Es={offset:1,color:Vn[Vn.length-1].color};Vn.push(Es)}for(var Ms="",An=0,Kn=0;Kn<$r.length;Kn++){for(Cr=$r[Kn];Cr>Vn[An+1].offset;)An++;var rr=Vn[An].offset,yr=(Cr-rr)/(Vn[An+1].offset-rr),Yr=Vn[An].color,os=Vn[An+1].color;Ms+=Yn(Math.round((1-yr)*Yr[0]+yr*os[0]).toString(16))+Yn(Math.round((1-yr)*Yr[1]+yr*os[1]).toString(16))+Yn(Math.round((1-yr)*Yr[2]+yr*os[2]).toString(16))}return Ms.trim()},hu=function(Vn,ur){ur||(ur=21);var Cr=Rs(),$r=mp(Vn.colors,ur),Xr=[];Xr.push({key:"FunctionType",value:"0"}),Xr.push({key:"Domain",value:"[0.0 1.0]"}),Xr.push({key:"Size",value:"["+ur+"]"}),Xr.push({key:"BitsPerSample",value:"8"}),Xr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),zs({data:$r,additionalKeyValues:Xr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Cr}),or("endobj"),Vn.objectNumber=Rs(),or("<< /ShadingType "+Vn.type),or("/ColorSpace /DeviceRGB");var hs="/Coords ["+kn(parseFloat(Vn.coords[0]))+" "+kn(parseFloat(Vn.coords[1]))+" ";Vn.type===2?hs+=kn(parseFloat(Vn.coords[2]))+" "+kn(parseFloat(Vn.coords[3])):hs+=kn(parseFloat(Vn.coords[2]))+" "+kn(parseFloat(Vn.coords[3]))+" "+kn(parseFloat(Vn.coords[4]))+" "+kn(parseFloat(Vn.coords[5])),or(hs+="]"),Vn.matrix&&or("/Matrix ["+Vn.matrix.toString()+"]"),or("/Function "+Cr+" 0 R"),or("/Extend [true true]"),or(">>"),or("endobj")},gp=function(Vn,ur){var Cr=As(),$r=Rs();ur.push({resourcesOid:Cr,objectOid:$r}),Vn.objectNumber=$r;var Xr=[];Xr.push({key:"Type",value:"/Pattern"}),Xr.push({key:"PatternType",value:"1"}),Xr.push({key:"PaintType",value:"1"}),Xr.push({key:"TilingType",value:"1"}),Xr.push({key:"BBox",value:"["+Vn.boundingBox.map(kn).join(" ")+"]"}),Xr.push({key:"XStep",value:kn(Vn.xStep)}),Xr.push({key:"YStep",value:kn(Vn.yStep)}),Xr.push({key:"Resources",value:Cr+" 0 R"}),Vn.matrix&&Xr.push({key:"Matrix",value:"["+Vn.matrix.toString()+"]"}),zs({data:Vn.stream,additionalKeyValues:Xr,objectId:Vn.objectNumber}),or("endobj")},Ml=function(Vn){var ur;for(ur in is)is.hasOwnProperty(ur)&&(is[ur]instanceof B?hu(is[ur]):is[ur]instanceof M&&gp(is[ur],Vn))},Dl=function(Vn){for(var ur in Vn.objectNumber=Rs(),or("<<"),Vn)switch(ur){case"opacity":or("/ca "+zn(Vn[ur]));break;case"stroke-opacity":or("/CA "+zn(Vn[ur]))}or(">>"),or("endobj")},El=function(){var Vn;for(Vn in ws)ws.hasOwnProperty(Vn)&&Dl(ws[Vn])},Yl=function(){for(var Vn in or("/XObject <<"),Er)Er.hasOwnProperty(Vn)&&Er[Vn].objectNumber>=0&&or("/"+Vn+" "+Er[Vn].objectNumber+" 0 R");vs.publish("putXobjectDict"),or(">>")},Zp=function(){fo.oid=Rs(),or("<<"),or("/Filter /Standard"),or("/V "+fo.v),or("/R "+fo.r),or("/U <"+fo.toHexString(fo.U)+">"),or("/O <"+fo.toHexString(fo.O)+">"),or("/P "+fo.P),or(">>"),or("endobj")},Gu=function(){for(var Vn in or("/Font <<"),es)es.hasOwnProperty(Vn)&&(En===!1||En===!0&&bn.hasOwnProperty(Vn))&&or("/"+Vn+" "+es[Vn].objectNumber+" 0 R");or(">>")},yp=function(){if(Object.keys(is).length>0){for(var Vn in or("/Shading <<"),is)is.hasOwnProperty(Vn)&&is[Vn]instanceof B&&is[Vn].objectNumber>=0&&or("/"+Vn+" "+is[Vn].objectNumber+" 0 R");vs.publish("putShadingPatternDict"),or(">>")}},Xl=function(Vn){if(Object.keys(is).length>0){for(var ur in or("/Pattern <<"),is)is.hasOwnProperty(ur)&&is[ur]instanceof vn.TilingPattern&&is[ur].objectNumber>=0&&is[ur].objectNumber<Vn&&or("/"+ur+" "+is[ur].objectNumber+" 0 R");vs.publish("putTilingPatternDict"),or(">>")}},Ku=function(){if(Object.keys(ws).length>0){var Vn;for(Vn in or("/ExtGState <<"),ws)ws.hasOwnProperty(Vn)&&ws[Vn].objectNumber>=0&&or("/"+Vn+" "+ws[Vn].objectNumber+" 0 R");vs.publish("putGStateDict"),or(">>")}},ho=function(Vn){gs(Vn.resourcesOid,!0),or("<<"),or("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Gu(),yp(),Xl(Vn.objectOid),Ku(),Yl(),or(">>"),or("endobj")},Yu=function(){var Vn=[];bo(),El(),Qo(),Ml(Vn),vs.publish("putResources"),Vn.forEach(ho),ho({resourcesOid:Is,objectOid:Number.MAX_SAFE_INTEGER}),vs.publish("postPutResources")},Xu=function(){vs.publish("putAdditionalObjects");for(var Vn=0;Vn<br.length;Vn++){var ur=br[Vn];gs(ur.objId,!0),or(ur.content),or("endobj")}vs.publish("postPutAdditionalObjects")},xp=function(Vn){Vr[Vn.fontName]=Vr[Vn.fontName]||{},Vr[Vn.fontName][Vn.fontStyle]=Vn.id},Qu=function(Vn,ur,Cr,$r,Xr){var hs={id:"F"+(Object.keys(es).length+1).toString(10),postScriptName:Vn,fontName:ur,fontStyle:Cr,encoding:$r,isStandardFont:Xr||!1,metadata:{}};return vs.publish("addFont",{font:hs,instance:this}),es[hs.id]=hs,xp(hs),hs.id},vp=function(Vn){for(var ur=0,Cr=hr.length;ur<Cr;ur++){var $r=Qu.call(this,Vn[ur][0],Vn[ur][1],Vn[ur][2],hr[ur][3],!0);En===!1&&(bn[$r]=!0);var Xr=Vn[ur][0].split("-");xp({id:$r,fontName:Xr[0],fontStyle:Xr[1]||""})}vs.publish("addFonts",{fonts:es,dictionary:Vr})},Vo=function(Vn){return Vn.foo=function(){try{return Vn.apply(this,arguments)}catch($r){var ur=$r.stack||"";~ur.indexOf(" at ")&&(ur=ur.split(" at ")[1]);var Cr="Error in function "+ur.split(`
`)[0].split("<")[0]+": "+$r.message;if(!n.console)throw new Error(Cr);n.console.error(Cr,$r),n.alert&&alert(Cr)}},Vn.foo.bar=Vn,Vn.foo},fu=function(Vn,ur){var Cr,$r,Xr,hs,Es,Ms,An,Kn,rr;if(Xr=(ur=ur||{}).sourceEncoding||"Unicode",Es=ur.outputEncoding,(ur.autoencode||Es)&&es[Cs].metadata&&es[Cs].metadata[Xr]&&es[Cs].metadata[Xr].encoding&&(hs=es[Cs].metadata[Xr].encoding,!Es&&es[Cs].encoding&&(Es=es[Cs].encoding),!Es&&hs.codePages&&(Es=hs.codePages[0]),typeof Es=="string"&&(Es=hs[Es]),Es)){for(An=!1,Ms=[],Cr=0,$r=Vn.length;Cr<$r;Cr++)(Kn=Es[Vn.charCodeAt(Cr)])?Ms.push(String.fromCharCode(Kn)):Ms.push(Vn[Cr]),Ms[Cr].charCodeAt(0)>>8&&(An=!0);Vn=Ms.join("")}for(Cr=Vn.length;An===void 0&&Cr!==0;)Vn.charCodeAt(Cr-1)>>8&&(An=!0),Cr--;if(!An)return Vn;for(Ms=ur.noBOM?[]:[254,255],Cr=0,$r=Vn.length;Cr<$r;Cr++){if((rr=(Kn=Vn.charCodeAt(Cr))>>8)>>8)throw new Error("Character at position "+Cr+" of string '"+Vn+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ms.push(rr),Ms.push(Kn-(rr<<8))}return String.fromCharCode.apply(void 0,Ms)},po=vn.__private__.pdfEscape=vn.pdfEscape=function(Vn,ur){return fu(Vn,ur).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lo=vn.__private__.beginPage=function(Vn){Tr[++ds]=[],fs[ds]={objId:0,contentsObjId:0,userUnit:Number(mn),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Vn[0]),topRightY:Number(Vn[1])}},Ju(ds),Ar(Tr[On])},Ql=function(Vn,ur){var Cr,$r,Xr;switch(un=ur||un,typeof Vn=="string"&&(Cr=Rn(Vn.toLowerCase()),Array.isArray(Cr)&&($r=Cr[0],Xr=Cr[1])),Array.isArray(Vn)&&($r=Vn[0]*as,Xr=Vn[1]*as),isNaN($r)&&($r=hn[0],Xr=hn[1]),($r>14400||Xr>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),$r=Math.min(14400,$r),Xr=Math.min(14400,Xr)),hn=[$r,Xr],un.substr(0,1)){case"l":Xr>$r&&(hn=[Xr,$r]);break;case"p":$r>Xr&&(hn=[Xr,$r])}Lo(hn),ep(_f),or(Po),rp!==0&&or(rp+" J"),Au!==0&&or(Au+" j"),vs.publish("addPage",{pageNumber:ds})},pu=function(Vn){Vn>0&&Vn<=ds&&(Tr.splice(Vn,1),fs.splice(Vn,1),ds--,On>ds&&(On=ds),this.setPage(On))},Ju=function(Vn){Vn>0&&Vn<=ds&&(On=Vn)},no=vn.__private__.getNumberOfPages=vn.getNumberOfPages=function(){return Tr.length-1},Jl=function(Vn,ur,Cr){var $r,Xr=void 0;return Cr=Cr||{},Vn=Vn!==void 0?Vn:es[Cs].fontName,ur=ur!==void 0?ur:es[Cs].fontStyle,$r=Vn.toLowerCase(),Vr[$r]!==void 0&&Vr[$r][ur]!==void 0?Xr=Vr[$r][ur]:Vr[Vn]!==void 0&&Vr[Vn][ur]!==void 0?Xr=Vr[Vn][ur]:Cr.disableWarning===!1&&a.warn("Unable to look up font label for font '"+Vn+"', '"+ur+"'. Refer to getFontList() for available fonts."),Xr||Cr.noFallback||(Xr=Vr.times[ur])==null&&(Xr=Vr.times.normal),Xr},Zl=vn.__private__.putInfo=function(){var Vn=Rs(),ur=function($r){return $r};for(var Cr in xn!==null&&(ur=fo.encryptor(Vn,0)),or("<<"),or("/Producer ("+po(ur("jsPDF "+E.version))+")"),ps)ps.hasOwnProperty(Cr)&&ps[Cr]&&or("/"+Cr.substr(0,1).toUpperCase()+Cr.substr(1)+" ("+po(ur(ps[Cr]))+")");or("/CreationDate ("+po(ur(nr))+")"),or(">>"),or("endobj")},wl=vn.__private__.putCatalog=function(Vn){var ur=(Vn=Vn||{}).rootDictionaryObjId||Ns;switch(Rs(),or("<<"),or("/Type /Catalog"),or("/Pages "+ur+" 0 R"),Pr||(Pr="fullwidth"),Pr){case"fullwidth":or("/OpenAction [3 0 R /FitH null]");break;case"fullheight":or("/OpenAction [3 0 R /FitV null]");break;case"fullpage":or("/OpenAction [3 0 R /Fit]");break;case"original":or("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Cr=""+Pr;Cr.substr(Cr.length-1)==="%"&&(Pr=parseInt(Pr)/100),typeof Pr=="number"&&or("/OpenAction [3 0 R /XYZ null null "+zn(Pr)+"]")}switch(ns||(ns="continuous"),ns){case"continuous":or("/PageLayout /OneColumn");break;case"single":or("/PageLayout /SinglePage");break;case"two":case"twoleft":or("/PageLayout /TwoColumnLeft");break;case"tworight":or("/PageLayout /TwoColumnRight")}Kr&&or("/PageMode /"+Kr),vs.publish("putCatalog"),or(">>"),or("endobj")},em=vn.__private__.putTrailer=function(){or("trailer"),or("<<"),or("/Size "+(er+1)),or("/Root "+er+" 0 R"),or("/Info "+(er-1)+" 0 R"),xn!==null&&or("/Encrypt "+fo.oid+" 0 R"),or("/ID [ <"+sr+"> <"+sr+"> ]"),or(">>")},_p=vn.__private__.putHeader=function(){or("%PDF-"+Pn),or("%")},tm=vn.__private__.putXRef=function(){var Vn="0000000000";or("xref"),or("0 "+(er+1)),or("0000000000 65535 f ");for(var ur=1;ur<=er;ur++)typeof Zn[ur]=="function"?or((Vn+Zn[ur]()).slice(-10)+" 00000 n "):Zn[ur]!==void 0?or((Vn+Zn[ur]).slice(-10)+" 00000 n "):or("0000000000 00000 n ")},Al=vn.__private__.buildDocument=function(){qr(),Ar(ir),vs.publish("buildDocument"),_p(),Qs(),Xu(),Yu(),xn!==null&&Zp(),Zl(),wl();var Vn=fr;return tm(),em(),or("startxref"),or(""+Vn),or("%%EOF"),Ar(Tr[On]),ir.join(`
`)},mu=vn.__private__.getBlob=function(Vn){return new Blob([cr(Vn)],{type:"application/pdf"})},gu=vn.output=vn.__private__.output=Vo(function(Vn,ur){switch(typeof(ur=ur||{})=="string"?ur={filename:ur}:ur.filename=ur.filename||"generated.pdf",Vn){case void 0:return Al();case"save":vn.save(ur.filename);break;case"arraybuffer":return cr(Al());case"blob":return mu(Al());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(mu(Al()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Cr="",$r=Al();try{Cr=h($r)}catch{Cr=h(unescape(encodeURIComponent($r)))}return"data:application/pdf;filename="+ur.filename+";base64,"+Cr;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Xr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",hs=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ur.pdfObjectUrl&&(Xr=ur.pdfObjectUrl,hs="");var Es='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Xr+'"'+hs+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ur)+");<\/script></body></html>",Ms=n.open();return Ms!==null&&Ms.document.write(Es),Ms}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ur.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ur.filename+'" width="500px" height="400px" /></body></html>',Kn=n.open();if(Kn!==null){Kn.document.write(An);var rr=this;Kn.document.documentElement.querySelector("#pdfViewer").onload=function(){Kn.document.title=ur.filename,Kn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rr.output("bloburl"))}}return Kn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ur)+'"></iframe></body></html>',Yr=n.open();if(Yr!==null&&(Yr.document.write(yr),Yr.document.title=ur.filename),Yr||typeof safari>"u")return Yr;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",ur);default:return null}}),Ol=function(Vn){return Array.isArray(Ts)===!0&&Ts.indexOf(Vn)>-1};switch(dn){case"pt":as=1;break;case"mm":as=72/25.4;break;case"cm":as=72/2.54;break;case"in":as=72;break;case"px":as=Ol("px_scaling")==1?.75:96/72;break;case"pc":case"em":as=12;break;case"ex":as=6;break;default:if(typeof dn!="number")throw new Error("Invalid unit: "+dn);as=dn}var fo=null;gr(),tr();var Ep=function(Vn){return xn!==null?fo.encryptor(Vn,0):function(ur){return ur}},Zu=vn.__private__.getPageInfo=vn.getPageInfo=function(Vn){if(isNaN(Vn)||Vn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:fs[Vn].objId,pageNumber:Vn,pageContext:fs[Vn]}},Hs=vn.__private__.getPageInfoByObjId=function(Vn){if(isNaN(Vn)||Vn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ur in fs)if(fs[ur].objId===Vn)break;return Zu(ur)},Fl=vn.__private__.getCurrentPageInfo=vn.getCurrentPageInfo=function(){return{objId:fs[On].objId,pageNumber:On,pageContext:fs[On]}};vn.addPage=function(){return Ql.apply(this,arguments),this},vn.setPage=function(){return Ju.apply(this,arguments),Ar.call(this,Tr[On]),this},vn.insertPage=function(Vn){return this.addPage(),this.movePage(On,Vn),this},vn.movePage=function(Vn,ur){var Cr,$r;if(Vn>ur){Cr=Tr[Vn],$r=fs[Vn];for(var Xr=Vn;Xr>ur;Xr--)Tr[Xr]=Tr[Xr-1],fs[Xr]=fs[Xr-1];Tr[ur]=Cr,fs[ur]=$r,this.setPage(ur)}else if(Vn<ur){Cr=Tr[Vn],$r=fs[Vn];for(var hs=Vn;hs<ur;hs++)Tr[hs]=Tr[hs+1],fs[hs]=fs[hs+1];Tr[ur]=Cr,fs[ur]=$r,this.setPage(ur)}return this},vn.deletePage=function(){return pu.apply(this,arguments),this},vn.__private__.text=vn.text=function(Vn,ur,Cr,$r,Xr){var hs,Es,Ms,An,Kn,rr,yr,Yr,os,bs=($r=$r||{}).scope||this;if(typeof Vn=="number"&&typeof ur=="number"&&(typeof Cr=="string"||Array.isArray(Cr))){var Ws=Cr;Cr=ur,ur=Vn,Vn=Ws}if(arguments[3]instanceof Dr?(Nn("The transform parameter of text() with a Matrix value"),os=Xr):(Ms=arguments[4],An=arguments[5],_typeof(yr=arguments[3])==="object"&&yr!==null||(typeof Ms=="string"&&(An=Ms,Ms=null),typeof yr=="string"&&(An=yr,yr=null),typeof yr=="number"&&(Ms=yr,yr=null),$r={flags:yr,angle:Ms,align:An})),isNaN(ur)||isNaN(Cr)||Vn==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Vn.length===0)return bs;var Ys="",Gs=!1,to=typeof $r.lineHeightFactor=="number"?$r.lineHeightFactor:eo,ao=bs.internal.scaleFactor;function Il(co){return co=co.split("	").join(Array($r.TabLen||9).join(" ")),po(co,yr)}function Io(co){for(var uo,xo=co.concat(),Ao=[],ou=xo.length;ou--;)typeof(uo=xo.shift())=="string"?Ao.push(uo):Array.isArray(co)&&(uo.length===1||uo[1]===void 0&&uo[2]===void 0)?Ao.push(uo[0]):Ao.push([uo[0],uo[1],uo[2]]);return Ao}function Ul(co,uo){var xo;if(typeof co=="string")xo=uo(co)[0];else if(Array.isArray(co)){for(var Ao,ou,um=co.concat(),Lp=[],Cm=um.length;Cm--;)typeof(Ao=um.shift())=="string"?Lp.push(uo(Ao)[0]):Array.isArray(Ao)&&typeof Ao[0]=="string"&&(ou=uo(Ao[0],Ao[1],Ao[2]),Lp.push([ou[0],ou[1],ou[2]]));xo=Lp}return xo}var zl=!1,rm=!0;if(typeof Vn=="string")zl=!0;else if(Array.isArray(Vn)){var sm=Vn.concat();Es=[];for(var Tp,Co=sm.length;Co--;)(typeof(Tp=sm.shift())!="string"||Array.isArray(Tp)&&typeof Tp[0]!="string")&&(rm=!1);zl=rm}if(zl===!1)throw new Error('Type of text must be string or Array. "'+Vn+'" is not recognized.');typeof Vn=="string"&&(Vn=Vn.match(/[\r?\n]/)?Vn.split(/\r\n|\r|\n/g):[Vn]);var Sp=wr/bs.internal.scaleFactor,Pp=Sp*(to-1);switch($r.baseline){case"bottom":Cr-=Pp;break;case"top":Cr+=Sp-Pp;break;case"hanging":Cr+=Sp-2*Pp;break;case"middle":Cr+=Sp/2-Pp}if((rr=$r.maxWidth||0)>0&&(typeof Vn=="string"?Vn=bs.splitTextToSize(Vn,rr):Object.prototype.toString.call(Vn)==="[object Array]"&&(Vn=Vn.reduce(function(co,uo){return co.concat(bs.splitTextToSize(uo,rr))},[]))),hs={text:Vn,x:ur,y:Cr,options:$r,mutex:{pdfEscape:po,activeFontKey:Cs,fonts:es,activeFontSize:wr}},vs.publish("preProcessText",hs),Vn=hs.text,Ms=($r=hs.options).angle,!(os instanceof Dr)&&Ms&&typeof Ms=="number"){Ms*=Math.PI/180,$r.rotationDirection===0&&(Ms=-Ms),Dn===Sn.ADVANCED&&(Ms=-Ms);var Ip=Math.cos(Ms),im=Math.sin(Ms);os=new Dr(Ip,im,-im,Ip,0,0)}else Ms&&Ms instanceof Dr&&(os=Ms);Dn!==Sn.ADVANCED||os||(os=ls),(Kn=$r.charSpace||eu)!==void 0&&(Ys+=kn(Mn(Kn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yr=$r.horizontalScale)!==void 0&&(Ys+=kn(100*Yr)+` Tz
`),$r.lang;var $o=-1,c0=$r.renderingMode!==void 0?$r.renderingMode:$r.stroke,om=bs.internal.getCurrentPageInfo().pageContext;switch(c0){case 0:case!1:case"fill":$o=0;break;case 1:case!0:case"stroke":$o=1;break;case 2:case"fillThenStroke":$o=2;break;case 3:case"invisible":$o=3;break;case 4:case"fillAndAddForClipping":$o=4;break;case 5:case"strokeAndAddPathForClipping":$o=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$o=6;break;case 7:case"addToPathForClipping":$o=7}var Tm=om.usedRenderingMode!==void 0?om.usedRenderingMode:-1;$o!==-1?Ys+=$o+` Tr
`:Tm!==-1&&(Ys+=`0 Tr
`),$o!==-1&&(om.usedRenderingMode=$o),An=$r.align||"left";var Zo,Cp=wr*to,Sm=bs.internal.pageSize.getWidth(),Pm=es[Cs];Kn=$r.charSpace||eu,rr=$r.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},$r.flags);var Iu=[],sp=function(co){return bs.getStringUnitWidth(co,{font:Pm,charSpace:Kn,fontSize:wr,doKerning:!1})*wr/ao};if(Object.prototype.toString.call(Vn)==="[object Array]"){var Bo;Es=Io(Vn),An!=="left"&&(Zo=Es.map(sp));var Mo,Cu=0;if(An==="right"){ur-=Zo[0],Vn=[],Co=Es.length;for(var ru=0;ru<Co;ru++)ru===0?(Mo=Wo(ur),Bo=wo(Cr)):(Mo=Mn(Cu-Zo[ru]),Bo=-Cp),Vn.push([Es[ru],Mo,Bo]),Cu=Zo[ru]}else if(An==="center"){ur-=Zo[0]/2,Vn=[],Co=Es.length;for(var su=0;su<Co;su++)su===0?(Mo=Wo(ur),Bo=wo(Cr)):(Mo=Mn((Cu-Zo[su])/2),Bo=-Cp),Vn.push([Es[su],Mo,Bo]),Cu=Zo[su]}else if(An==="left"){Vn=[],Co=Es.length;for(var Np=0;Np<Co;Np++)Vn.push(Es[Np])}else if(An==="justify"&&Pm.encoding==="Identity-H"){Vn=[],Co=Es.length,rr=rr!==0?rr:Sm;for(var iu=0,yo=0;yo<Co;yo++)if(Bo=yo===0?wo(Cr):-Cp,Mo=yo===0?Wo(ur):iu,yo<Co-1){var am=Mn((rr-Zo[yo])/(Es[yo].split(" ").length-1)),Do=Es[yo].split(" ");Vn.push([Do[0]+" ",Mo,Bo]),iu=0;for(var na=1;na<Do.length;na++){var jp=(sp(Do[na-1]+" "+Do[na])-sp(Do[na]))*ao+am;na==Do.length-1?Vn.push([Do[na],jp,0]):Vn.push([Do[na]+" ",jp,0]),iu-=jp}}else Vn.push([Es[yo],Mo,Bo]);Vn.push(["",iu,0])}else{if(An!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Vn=[],Co=Es.length,rr=rr!==0?rr:Sm,yo=0;yo<Co;yo++)Bo=yo===0?wo(Cr):-Cp,Mo=yo===0?Wo(ur):0,yo<Co-1?Iu.push(kn(Mn((rr-Zo[yo])/(Es[yo].split(" ").length-1)))):Iu.push(0),Vn.push([Es[yo],Mo,Bo])}}var Im=typeof $r.R2L=="boolean"?$r.R2L:Hr;Im===!0&&(Vn=Ul(Vn,function(co,uo,xo){return[co.split("").reverse().join(""),uo,xo]})),hs={text:Vn,x:ur,y:Cr,options:$r,mutex:{pdfEscape:po,activeFontKey:Cs,fonts:es,activeFontSize:wr}},vs.publish("postProcessText",hs),Vn=hs.text,Gs=hs.mutex.isHex||!1;var lm=es[Cs].encoding;lm!=="WinAnsiEncoding"&&lm!=="StandardEncoding"||(Vn=Ul(Vn,function(co,uo,xo){return[Il(co),uo,xo]})),Es=Io(Vn),Vn=[];for(var ip,op,Nu,ap=0,kp=1,lp=Array.isArray(Es[0])?kp:ap,ju="",cm=function(co,uo,xo){var Ao="";return xo instanceof Dr?(xo=typeof $r.angle=="number"?Jr(xo,new Dr(1,0,0,1,co,uo)):Jr(new Dr(1,0,0,1,co,uo),xo),Dn===Sn.ADVANCED&&(xo=Jr(new Dr(1,0,0,-1,0,0),xo)),Ao=xo.join(" ")+` Tm
`):Ao=kn(co)+" "+kn(uo)+` Td
`,Ao},ga=0;ga<Es.length;ga++){switch(ju="",lp){case kp:Nu=(Gs?"<":"(")+Es[ga][0]+(Gs?">":")"),ip=parseFloat(Es[ga][1]),op=parseFloat(Es[ga][2]);break;case ap:Nu=(Gs?"<":"(")+Es[ga]+(Gs?">":")"),ip=Wo(ur),op=wo(Cr)}Iu!==void 0&&Iu[ga]!==void 0&&(ju=Iu[ga]+` Tw
`),ga===0?Vn.push(ju+cm(ip,op,os)+Nu):lp===ap?Vn.push(ju+Nu):lp===kp&&Vn.push(ju+cm(ip,op,os)+Nu)}Vn=lp===ap?Vn.join(` Tj
T* `):Vn.join(` Tj
`),Vn+=` Tj
`;var xa=`BT
/`;return xa+=Cs+" "+wr+` Tf
`,xa+=kn(wr*to)+` TL
`,xa+=Sl+`
`,xa+=Ys,xa+=Vn,or(xa+="ET"),bn[Cs]=!0,bs};var nm=vn.__private__.clip=vn.clip=function(Vn){return or(Vn==="evenodd"?"W*":"W"),this};vn.clipEvenOdd=function(){return nm("evenodd")},vn.__private__.discardPath=vn.discardPath=function(){return or("n"),this};var Jo=vn.__private__.isValidStyle=function(Vn){var ur=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Vn)!==-1&&(ur=!0),ur};vn.__private__.setDefaultPathOperation=vn.setDefaultPathOperation=function(Vn){return Jo(Vn)&&(yn=Vn),this};var bp=vn.__private__.getStyle=vn.getStyle=function(Vn){var ur=yn;switch(Vn){case"D":case"S":ur="S";break;case"F":ur="f";break;case"FD":case"DF":ur="B";break;case"f":case"f*":case"B":case"B*":ur=Vn}return ur},qo=vn.close=function(){return or("h"),this};vn.stroke=function(){return or("S"),this},vn.fill=function(Vn){return yu("f",Vn),this},vn.fillEvenOdd=function(Vn){return yu("f*",Vn),this},vn.fillStroke=function(Vn){return yu("B",Vn),this},vn.fillStrokeEvenOdd=function(Vn){return yu("B*",Vn),this};var yu=function(Vn,ur){_typeof(ur)==="object"?vu(ur,Vn):or(Vn)},_d=function(Vn){Vn===null||Dn===Sn.ADVANCED&&Vn===void 0||(Vn=bp(Vn),or(Vn))};function xu(Vn,ur,Cr,$r,Xr){var hs=new M(ur||this.boundingBox,Cr||this.xStep,$r||this.yStep,this.gState,Xr||this.matrix);hs.stream=this.stream;var Es=Vn+"$$"+this.cloneIndex+++"$$";return cs(Es,hs),hs}var vu=function(Vn,ur){var Cr=ks[Vn.key],$r=is[Cr];if($r instanceof B)or("q"),or(wp(ur)),$r.gState&&vn.setGState($r.gState),or(Vn.matrix.toString()+" cm"),or("/"+Cr+" sh"),or("Q");else if($r instanceof M){var Xr=new Dr(1,0,0,-1,0,jo());Vn.matrix&&(Xr=Xr.multiply(Vn.matrix||ls),Cr=xu.call($r,Vn.key,Vn.boundingBox,Vn.xStep,Vn.yStep,Xr).id),or("q"),or("/Pattern cs"),or("/"+Cr+" scn"),$r.gState&&vn.setGState($r.gState),or(ur),or("Q")}},wp=function(Vn){switch(Vn){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Rl=vn.moveTo=function(Vn,ur){return or(kn(Mn(Vn))+" "+kn(Xn(ur))+" m"),this},Ho=vn.lineTo=function(Vn,ur){return or(kn(Mn(Vn))+" "+kn(Xn(ur))+" l"),this},Tl=vn.curveTo=function(Vn,ur,Cr,$r,Xr,hs){return or([kn(Mn(Vn)),kn(Xn(ur)),kn(Mn(Cr)),kn(Xn($r)),kn(Mn(Xr)),kn(Xn(hs)),"c"].join(" ")),this};vn.__private__.line=vn.line=function(Vn,ur,Cr,$r,Xr){if(isNaN(Vn)||isNaN(ur)||isNaN(Cr)||isNaN($r)||!Jo(Xr))throw new Error("Invalid arguments passed to jsPDF.line");return Dn===Sn.COMPAT?this.lines([[Cr-Vn,$r-ur]],Vn,ur,[1,1],Xr||"S"):this.lines([[Cr-Vn,$r-ur]],Vn,ur,[1,1]).stroke()},vn.__private__.lines=vn.lines=function(Vn,ur,Cr,$r,Xr,hs){var Es,Ms,An,Kn,rr,yr,Yr,os,bs,Ws,Ys,Gs;if(typeof Vn=="number"&&(Gs=Cr,Cr=ur,ur=Vn,Vn=Gs),$r=$r||[1,1],hs=hs||!1,isNaN(ur)||isNaN(Cr)||!Array.isArray(Vn)||!Array.isArray($r)||!Jo(Xr)||typeof hs!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Rl(ur,Cr),Es=$r[0],Ms=$r[1],Kn=Vn.length,Ws=ur,Ys=Cr,An=0;An<Kn;An++)(rr=Vn[An]).length===2?(Ws=rr[0]*Es+Ws,Ys=rr[1]*Ms+Ys,Ho(Ws,Ys)):(yr=rr[0]*Es+Ws,Yr=rr[1]*Ms+Ys,os=rr[2]*Es+Ws,bs=rr[3]*Ms+Ys,Ws=rr[4]*Es+Ws,Ys=rr[5]*Ms+Ys,Tl(yr,Yr,os,bs,Ws,Ys));return hs&&qo(),_d(Xr),this},vn.path=function(Vn){for(var ur=0;ur<Vn.length;ur++){var Cr=Vn[ur],$r=Cr.c;switch(Cr.op){case"m":Rl($r[0],$r[1]);break;case"l":Ho($r[0],$r[1]);break;case"c":Tl.apply(this,$r);break;case"h":qo()}}return this},vn.__private__.rect=vn.rect=function(Vn,ur,Cr,$r,Xr){if(isNaN(Vn)||isNaN(ur)||isNaN(Cr)||isNaN($r)||!Jo(Xr))throw new Error("Invalid arguments passed to jsPDF.rect");return Dn===Sn.COMPAT&&($r=-$r),or([kn(Mn(Vn)),kn(Xn(ur)),kn(Mn(Cr)),kn(Mn($r)),"re"].join(" ")),_d(Xr),this},vn.__private__.triangle=vn.triangle=function(Vn,ur,Cr,$r,Xr,hs,Es){if(isNaN(Vn)||isNaN(ur)||isNaN(Cr)||isNaN($r)||isNaN(Xr)||isNaN(hs)||!Jo(Es))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Cr-Vn,$r-ur],[Xr-Cr,hs-$r],[Vn-Xr,ur-hs]],Vn,ur,[1,1],Es,!0),this},vn.__private__.roundedRect=vn.roundedRect=function(Vn,ur,Cr,$r,Xr,hs,Es){if(isNaN(Vn)||isNaN(ur)||isNaN(Cr)||isNaN($r)||isNaN(Xr)||isNaN(hs)||!Jo(Es))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ms=4/3*(Math.SQRT2-1);return Xr=Math.min(Xr,.5*Cr),hs=Math.min(hs,.5*$r),this.lines([[Cr-2*Xr,0],[Xr*Ms,0,Xr,hs-hs*Ms,Xr,hs],[0,$r-2*hs],[0,hs*Ms,-Xr*Ms,hs,-Xr,hs],[2*Xr-Cr,0],[-Xr*Ms,0,-Xr,-hs*Ms,-Xr,-hs],[0,2*hs-$r],[0,-hs*Ms,Xr*Ms,-hs,Xr,-hs]],Vn+Xr,ur,[1,1],Es,!0),this},vn.__private__.ellipse=vn.ellipse=function(Vn,ur,Cr,$r,Xr){if(isNaN(Vn)||isNaN(ur)||isNaN(Cr)||isNaN($r)||!Jo(Xr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var hs=4/3*(Math.SQRT2-1)*Cr,Es=4/3*(Math.SQRT2-1)*$r;return Rl(Vn+Cr,ur),Tl(Vn+Cr,ur-Es,Vn+hs,ur-$r,Vn,ur-$r),Tl(Vn-hs,ur-$r,Vn-Cr,ur-Es,Vn-Cr,ur),Tl(Vn-Cr,ur+Es,Vn-hs,ur+$r,Vn,ur+$r),Tl(Vn+hs,ur+$r,Vn+Cr,ur+Es,Vn+Cr,ur),_d(Xr),this},vn.__private__.circle=vn.circle=function(Vn,ur,Cr,$r){if(isNaN(Vn)||isNaN(ur)||isNaN(Cr)||!Jo($r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Vn,ur,Cr,Cr,$r)},vn.setFont=function(Vn,ur,Cr){return Cr&&(ur=Gn(ur,Cr)),Cs=Jl(Vn,ur,{disableWarning:!1}),this};var _h=vn.__private__.getFont=vn.getFont=function(){return es[Jl.apply(vn,arguments)]};vn.__private__.getFontList=vn.getFontList=function(){var Vn,ur,Cr={};for(Vn in Vr)if(Vr.hasOwnProperty(Vn))for(ur in Cr[Vn]=[],Vr[Vn])Vr[Vn].hasOwnProperty(ur)&&Cr[Vn].push(ur);return Cr},vn.addFont=function(Vn,ur,Cr,$r,Xr){var hs=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&hs.indexOf(arguments[3])!==-1?Xr=arguments[3]:arguments[3]&&hs.indexOf(arguments[3])==-1&&(Cr=Gn(Cr,$r)),Xr=Xr||"Identity-H",Qu.call(this,Vn,ur,Cr,Xr)};var eo,_f=_e.lineWidth||.200025,_u=vn.__private__.getLineWidth=vn.getLineWidth=function(){return _f},ep=vn.__private__.setLineWidth=vn.setLineWidth=function(Vn){return _f=Vn,or(kn(Mn(Vn))+" w"),this};vn.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(Vn,ur){if(Vn=Vn||[],ur=ur||0,isNaN(ur)||!Array.isArray(Vn))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Vn=Vn.map(function(Cr){return kn(Mn(Cr))}).join(" "),ur=kn(Mn(ur)),or("["+Vn+"] "+ur+" d"),this};var tp=vn.__private__.getLineHeight=vn.getLineHeight=function(){return wr*eo};vn.__private__.getLineHeight=vn.getLineHeight=function(){return wr*eo};var np=vn.__private__.setLineHeightFactor=vn.setLineHeightFactor=function(Vn){return typeof(Vn=Vn||1.15)=="number"&&(eo=Vn),this},_c=vn.__private__.getLineHeightFactor=vn.getLineHeightFactor=function(){return eo};np(_e.lineHeight);var Wo=vn.__private__.getHorizontalCoordinate=function(Vn){return Mn(Vn)},wo=vn.__private__.getVerticalCoordinate=function(Vn){return Dn===Sn.ADVANCED?Vn:fs[On].mediaBox.topRightY-fs[On].mediaBox.bottomLeftY-Mn(Vn)},Ap=vn.__private__.getHorizontalCoordinateString=vn.getHorizontalCoordinateString=function(Vn){return kn(Wo(Vn))},Vl=vn.__private__.getVerticalCoordinateString=vn.getVerticalCoordinateString=function(Vn){return kn(wo(Vn))},Po=_e.strokeColor||"0 G";vn.__private__.getStrokeColor=vn.getDrawColor=function(){return Os(Po)},vn.__private__.setStrokeColor=vn.setDrawColor=function(Vn,ur,Cr,$r){return Po=Vs({ch1:Vn,ch2:ur,ch3:Cr,ch4:$r,pdfColorType:"draw",precision:2}),or(Po),this};var Eu=_e.fillColor||"0 g";vn.__private__.getFillColor=vn.getFillColor=function(){return Os(Eu)},vn.__private__.setFillColor=vn.setFillColor=function(Vn,ur,Cr,$r){return Eu=Vs({ch1:Vn,ch2:ur,ch3:Cr,ch4:$r,pdfColorType:"fill",precision:2}),or(Eu),this};var Sl=_e.textColor||"0 g",bu=vn.__private__.getTextColor=vn.getTextColor=function(){return Os(Sl)};vn.__private__.setTextColor=vn.setTextColor=function(Vn,ur,Cr,$r){return Sl=Vs({ch1:Vn,ch2:ur,ch3:Cr,ch4:$r,pdfColorType:"text",precision:3}),this};var eu=_e.charSpace,wu=vn.__private__.getCharSpace=vn.getCharSpace=function(){return parseFloat(eu||0)};vn.__private__.setCharSpace=vn.setCharSpace=function(Vn){if(isNaN(Vn))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return eu=Vn,this};var rp=0;vn.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},vn.__private__.setLineCap=vn.setLineCap=function(Vn){var ur=vn.CapJoinStyles[Vn];if(ur===void 0)throw new Error("Line cap style of '"+Vn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rp=ur,or(ur+" J"),this};var Au=0;vn.__private__.setLineJoin=vn.setLineJoin=function(Vn){var ur=vn.CapJoinStyles[Vn];if(ur===void 0)throw new Error("Line join style of '"+Vn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Au=ur,or(ur+" j"),this},vn.__private__.setLineMiterLimit=vn.__private__.setMiterLimit=vn.setLineMiterLimit=vn.setMiterLimit=function(Vn){if(Vn=Vn||0,isNaN(Vn))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return or(kn(Mn(Vn))+" M"),this},vn.GState=j,vn.setGState=function(Vn){(Vn=typeof Vn=="string"?ws[Rr[Vn]]:$l(null,Vn)).equals(Zr)||(or("/"+Vn.id+" gs"),Zr=Vn)};var $l=function(Vn,ur){if(!Vn||!Rr[Vn]){var Cr=!1;for(var $r in ws)if(ws.hasOwnProperty($r)&&ws[$r].equals(ur)){Cr=!0;break}if(Cr)ur=ws[$r];else{var Xr="GS"+(Object.keys(ws).length+1).toString(10);ws[Xr]=ur,ur.id=Xr}return Vn&&(Rr[Vn]=ur.id),vs.publish("addGState",ur),ur}};vn.addGState=function(Vn,ur){return $l(Vn,ur),this},vn.saveGraphicsState=function(){return or("q"),Wr.push({key:Cs,size:wr,color:Sl}),this},vn.restoreGraphicsState=function(){or("Q");var Vn=Wr.pop();return Cs=Vn.key,wr=Vn.size,Sl=Vn.color,Zr=null,this},vn.setCurrentTransformationMatrix=function(Vn){return or(Vn.toString()+" cm"),this},vn.comment=function(Vn){return or("#"+Vn),this};var tu=function(Vn,ur){var Cr=Vn||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Cr},set:function(hs){isNaN(hs)||(Cr=parseFloat(hs))}});var $r=ur||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return $r},set:function(hs){isNaN(hs)||($r=parseFloat(hs))}});var Xr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Xr},set:function(hs){Xr=hs.toString()}}),this},Ru=function(Vn,ur,Cr,$r){tu.call(this,Vn,ur),this.type="rect";var Xr=Cr||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Xr},set:function(Es){isNaN(Es)||(Xr=parseFloat(Es))}});var hs=$r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return hs},set:function(Es){isNaN(Es)||(hs=parseFloat(Es))}}),this},nu=function(){this.page=ds,this.currentPage=On,this.pages=Tr.slice(0),this.pagesContext=fs.slice(0),this.x=Ss,this.y=js,this.matrix=Bs,this.width=Bl(On),this.height=jo(On),this.outputDestination=Mr,this.id="",this.objectNumber=-1};nu.prototype.restore=function(){ds=this.page,On=this.currentPage,fs=this.pagesContext,Tr=this.pages,Ss=this.x,js=this.y,Bs=this.matrix,Su(On,this.width),Pu(On,this.height),Mr=this.outputDestination};var Tu=function(Vn,ur,Cr,$r,Xr){Lr.push(new nu),ds=On=0,Tr=[],Ss=Vn,js=ur,Bs=Xr,Lo([Cr,$r])},Rp=function(Vn){if(vr[Vn])Lr.pop().restore();else{var ur=new nu,Cr="Xo"+(Object.keys(Er).length+1).toString(10);ur.id=Cr,vr[Vn]=Cr,Er[Cr]=ur,vs.publish("addFormObject",ur),Lr.pop().restore()}};for(var Pl in vn.beginFormObject=function(Vn,ur,Cr,$r,Xr){return Tu(Vn,ur,Cr,$r,Xr),this},vn.endFormObject=function(Vn){return Rp(Vn),this},vn.doFormObject=function(Vn,ur){var Cr=Er[vr[Vn]];return or("q"),or(ur.toString()+" cm"),or("/"+Cr.id+" Do"),or("Q"),this},vn.getFormObject=function(Vn){var ur=Er[vr[Vn]];return{x:ur.x,y:ur.y,width:ur.width,height:ur.height,matrix:ur.matrix}},vn.save=function(Vn,ur){return Vn=Vn||"generated.pdf",(ur=ur||{}).returnPromise=ur.returnPromise||!1,ur.returnPromise===!1?(l(mu(Al()),Vn),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Cr,$r){try{var Xr=l(mu(Al()),Vn);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Cr(Xr)}catch(hs){$r(hs.message)}})},E.API)E.API.hasOwnProperty(Pl)&&(Pl==="events"&&E.API.events.length?function(Vn,ur){var Cr,$r,Xr;for(Xr=ur.length-1;Xr!==-1;Xr--)Cr=ur[Xr][0],$r=ur[Xr][1],Vn.subscribe.apply(Vn,[Cr].concat(typeof $r=="function"?[$r]:$r))}(vs,E.API.events):vn[Pl]=E.API[Pl]);var Bl=vn.getPageWidth=function(Vn){return(fs[Vn=Vn||On].mediaBox.topRightX-fs[Vn].mediaBox.bottomLeftX)/as},Su=vn.setPageWidth=function(Vn,ur){fs[Vn].mediaBox.topRightX=ur*as+fs[Vn].mediaBox.bottomLeftX},jo=vn.getPageHeight=function(Vn){return(fs[Vn=Vn||On].mediaBox.topRightY-fs[Vn].mediaBox.bottomLeftY)/as},Pu=vn.setPageHeight=function(Vn,ur){fs[Vn].mediaBox.topRightY=ur*as+fs[Vn].mediaBox.bottomLeftY};return vn.internal={pdfEscape:po,getStyle:bp,getFont:_h,getFontSize:kr,getCharSpace:wu,getTextColor:bu,getLineHeight:tp,getLineHeightFactor:_c,getLineWidth:_u,write:jr,getHorizontalCoordinate:Wo,getVerticalCoordinate:wo,getCoordinateString:Ap,getVerticalCoordinateString:Vl,collections:{},newObject:Rs,newAdditionalObject:$s,newObjectDeferred:As,newObjectDeferredBegin:gs,getFilters:Us,putStream:zs,events:vs,scaleFactor:as,pageSize:{getWidth:function(){return Bl(On)},setWidth:function(Vn){Su(On,Vn)},getHeight:function(){return jo(On)},setHeight:function(Vn){Pu(On,Vn)}},encryptionOptions:xn,encryption:fo,getEncryptor:Ep,output:gu,getNumberOfPages:no,pages:Tr,out:or,f2:zn,f3:Cn,getPageInfo:Zu,getPageInfoByObjId:Hs,getCurrentPageInfo:Fl,getPDFVersion:Tn,Point:tu,Rectangle:Ru,Matrix:Dr,hasHotfix:Ol},Object.defineProperty(vn.internal.pageSize,"width",{get:function(){return Bl(On)},set:function(Vn){Su(On,Vn)},enumerable:!0,configurable:!0}),Object.defineProperty(vn.internal.pageSize,"height",{get:function(){return jo(On)},set:function(Vn){Pu(On,Vn)},enumerable:!0,configurable:!0}),vp.call(vn,hr),Cs="F1",Ql(hn,un),vs.publish("initialized"),vn}I.prototype.lsbFirstWord=function(_e){return String.fromCharCode(_e>>0&255,_e>>8&255,_e>>16&255,_e>>24&255)},I.prototype.toHexString=function(_e){return _e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(_e){for(var e=[],un=0;un<_e.length;un+=2)e.push(String.fromCharCode(parseInt(_e.substr(un,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(_e,e){return P(x(e).substr(0,5),_e)},I.prototype.encryptor=function(_e,e){var un=x(this.encryptionKey+String.fromCharCode(255&_e,_e>>8&255,_e>>16&255,255&e,e>>8&255)).substr(0,10);return function(dn){return P(un,dn)}},j.prototype.equals=function(_e){var e,un="id,objectNumber,equals";if(!_e||_typeof(_e)!==_typeof(this))return!1;var dn=0;for(e in this)if(!(un.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!_e.hasOwnProperty(e)||this[e]!==_e[e])return!1;dn++}for(e in _e)_e.hasOwnProperty(e)&&un.indexOf(e)<0&&dn--;return dn===0},E.API={events:[]},E.version="3.0.1";var q=E.API,D=1,R=function(_e){return _e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(_e){return _e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(_e){return _e.toFixed(2)},z=function(_e){return _e.toFixed(5)};q.__acroform__={};var H=function(_e,e){_e.prototype=Object.create(e.prototype),_e.prototype.constructor=_e},W=function(_e){return _e*D},V=function(_e){var e=new ut,un=At.internal.getHeight(_e)||0,dn=At.internal.getWidth(_e)||0;return e.BBox=[0,0,Number(U(dn)),Number(U(un))],e},G=q.__acroform__.setBit=function(_e,e){if(_e=_e||0,e=e||0,isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return _e|=1<<e},Y=q.__acroform__.clearBit=function(_e,e){if(_e=_e||0,e=e||0,isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return _e&=~(1<<e)},J=q.__acroform__.getBit=function(_e,e){if(isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return _e&1<<e?1:0},X=q.__acroform__.getBitForPdf=function(_e,e){if(isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(_e,e-1)},K=q.__acroform__.setBitForPdf=function(_e,e){if(isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(_e,e-1)},Z=q.__acroform__.clearBitForPdf=function(_e,e){if(isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(_e,e-1)},$=q.__acroform__.calculateCoordinates=function(_e,e){var un=e.internal.getHorizontalCoordinate,dn=e.internal.getVerticalCoordinate,hn=_e[0],fn=_e[1],pn=_e[2],mn=_e[3],gn={};return gn.lowerLeft_X=un(hn)||0,gn.lowerLeft_Y=dn(fn+mn)||0,gn.upperRight_X=un(hn+pn)||0,gn.upperRight_Y=dn(fn)||0,[Number(U(gn.lowerLeft_X)),Number(U(gn.lowerLeft_Y)),Number(U(gn.upperRight_X)),Number(U(gn.upperRight_Y))]},Q=function(_e){if(_e.appearanceStreamContent)return _e.appearanceStreamContent;if(_e.V||_e.DV){var e=[],un=_e._V||_e.DV,dn=tt(_e,un),hn=_e.scope.internal.getFont(_e.fontName,_e.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(_e.scope.__private__.encodeColorString(_e.color)),e.push("/"+hn+" "+U(dn.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(dn.text),e.push("ET"),e.push("Q"),e.push("EMC");var fn=V(_e);return fn.scope=_e.scope,fn.stream=e.join(`
`),fn}},tt=function(_e,e){var un=_e.fontSize===0?_e.maxFontSize:_e.fontSize,dn={text:"",fontSize:""},hn=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");hn=_e.multiline?hn.map(function(Cn){return Cn.split(`
`)}):hn.map(function(Cn){return[Cn]});var fn=un,pn=At.internal.getHeight(_e)||0;pn=pn<0?-pn:pn;var mn=At.internal.getWidth(_e)||0;mn=mn<0?-mn:mn;var gn=function(Cn,Mn,Bn){if(Cn+1<hn.length){var Xn=Mn+" "+hn[Cn+1][0];return et(Xn,_e,Bn).width<=mn-4}return!1};fn++;e:for(;fn>0;){e="",fn--;var yn,xn,En=et("3",_e,fn).height,bn=_e.multiline?pn-fn:(pn-En)/2,vn=bn+=2,Pn=0,Tn=0,In=0;if(fn<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,_e,fn=12).width+", FieldWidth:"+mn+`
`;break}for(var Rn="",Sn=0,Dn=0;Dn<hn.length;Dn++)if(hn.hasOwnProperty(Dn)){var $n=!1;if(hn[Dn].length!==1&&In!==hn[Dn].length-1){if((En+2)*(Sn+2)+2>pn)continue e;Rn+=hn[Dn][In],$n=!0,Tn=Dn,Dn--}else{Rn=(Rn+=hn[Dn][In]+" ").substr(Rn.length-1)==" "?Rn.substr(0,Rn.length-1):Rn;var Fn=parseInt(Dn),Gn=gn(Fn,Rn,fn),kn=Dn>=hn.length-1;if(Gn&&!kn){Rn+=" ",In=0;continue}if(Gn||kn){if(kn)Tn=Fn;else if(_e.multiline&&(En+2)*(Sn+2)+2>pn)continue e}else{if(!_e.multiline||(En+2)*(Sn+2)+2>pn)continue e;Tn=Fn}}for(var Nn="",Ln=Pn;Ln<=Tn;Ln++){var zn=hn[Ln];if(_e.multiline){if(Ln===Tn){Nn+=zn[In]+" ",In=(In+1)%zn.length;continue}if(Ln===Pn){Nn+=zn[zn.length-1]+" ";continue}}Nn+=zn[0]+" "}switch(Nn=Nn.substr(Nn.length-1)==" "?Nn.substr(0,Nn.length-1):Nn,xn=et(Nn,_e,fn).width,_e.textAlign){case"right":yn=mn-xn-2;break;case"center":yn=(mn-xn)/2;break;case"left":default:yn=2}e+=U(yn)+" "+U(vn)+` Td
`,e+="("+R(Nn)+`) Tj
`,e+=-U(yn)+` 0 Td
`,vn=-(fn+2),xn=0,Pn=$n?Tn:Tn+1,Sn++,Rn=""}break}return dn.text=e,dn.fontSize=fn,dn},et=function(_e,e,un){var dn=e.scope.internal.getFont(e.fontName,e.fontStyle),hn=e.scope.getStringUnitWidth(_e,{font:dn,fontSize:parseFloat(un),charSpace:0})*parseFloat(un);return{height:e.scope.getStringUnitWidth("3",{font:dn,fontSize:parseFloat(un),charSpace:0})*parseFloat(un)*1.5,width:hn}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(_e,e){var un={type:"reference",object:_e};e.internal.getPageInfo(_e.page).pageContext.annotations.find(function(dn){return dn.type===un.type&&dn.object===un.object})===void 0&&e.internal.getPageInfo(_e.page).pageContext.annotations.push(un)},it=function(_e,e){for(var un in _e)if(_e.hasOwnProperty(un)){var dn=un,hn=_e[un];e.internal.newObjectDeferredBegin(hn.objId,!0),_typeof(hn)==="object"&&typeof hn.putStream=="function"&&hn.putStream(),delete _e[dn]}},at=function(_e,e){if(e.scope=_e,_e.internal!==void 0&&(_e.internal.acroformPlugin===void 0||_e.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,_e.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),_e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=_e.internal.scaleFactor,_e.internal.acroformPlugin.acroFormDictionaryRoot=new ht,_e.internal.acroformPlugin.acroFormDictionaryRoot.scope=_e,_e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=_e.internal.events.subscribe("postPutResources",function(){(function(un){un.internal.events.unsubscribe(un.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete un.internal.acroformPlugin.acroFormDictionaryRoot._eventID,un.internal.acroformPlugin.printedOut=!0})(_e)}),_e.internal.events.subscribe("buildDocument",function(){(function(un){un.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var dn=un.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var hn in dn)if(dn.hasOwnProperty(hn)){var fn=dn[hn];fn.objId=void 0,fn.hasAnnotation&&nt(fn,un)}})(_e)}),_e.internal.events.subscribe("putCatalog",function(){(function(un){if(un.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");un.internal.write("/AcroForm "+un.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(_e)}),_e.internal.events.subscribe("postPutPages",function(un){(function(dn,hn){var fn=!dn;for(var pn in dn||(hn.internal.newObjectDeferredBegin(hn.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),hn.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),dn=dn||hn.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(dn.hasOwnProperty(pn)){var mn=dn[pn],gn=[],yn=mn.Rect;if(mn.Rect&&(mn.Rect=$(mn.Rect,hn)),hn.internal.newObjectDeferredBegin(mn.objId,!0),mn.DA=At.createDefaultAppearanceStream(mn),_typeof(mn)==="object"&&typeof mn.getKeyValueListForStream=="function"&&(gn=mn.getKeyValueListForStream()),mn.Rect=yn,mn.hasAppearanceStream&&!mn.appearanceStreamContent){var xn=Q(mn);gn.push({key:"AP",value:"<</N "+xn+">>"}),hn.internal.acroformPlugin.xForms.push(xn)}if(mn.appearanceStreamContent){var En="";for(var bn in mn.appearanceStreamContent)if(mn.appearanceStreamContent.hasOwnProperty(bn)){var vn=mn.appearanceStreamContent[bn];if(En+="/"+bn+" ",En+="<<",Object.keys(vn).length>=1||Array.isArray(vn)){for(var pn in vn)if(vn.hasOwnProperty(pn)){var Pn=vn[pn];typeof Pn=="function"&&(Pn=Pn.call(hn,mn)),En+="/"+pn+" "+Pn+" ",hn.internal.acroformPlugin.xForms.indexOf(Pn)>=0||hn.internal.acroformPlugin.xForms.push(Pn)}}else typeof(Pn=vn)=="function"&&(Pn=Pn.call(hn,mn)),En+="/"+pn+" "+Pn,hn.internal.acroformPlugin.xForms.indexOf(Pn)>=0||hn.internal.acroformPlugin.xForms.push(Pn);En+=">>"}gn.push({key:"AP",value:`<<
`+En+">>"})}hn.internal.putStream({additionalKeyValues:gn,objectId:mn.objId}),hn.internal.out("endobj")}fn&&it(hn.internal.acroformPlugin.xForms,hn)})(un,_e)}),_e.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(_e,e,un){var dn=function(pn){return pn};if(Array.isArray(_e)){for(var hn="[",fn=0;fn<_e.length;fn++)switch(fn!==0&&(hn+=" "),_typeof(_e[fn])){case"boolean":case"number":case"object":hn+=_e[fn].toString();break;case"string":_e[fn].substr(0,1)!=="/"?(e!==void 0&&un&&(dn=un.internal.getEncryptor(e)),hn+="("+R(dn(_e[fn].toString()))+")"):hn+=_e[fn].toString()}return hn+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(_e,e,un){var dn=function(hn){return hn};return e!==void 0&&un&&(dn=un.internal.getEncryptor(e)),(_e=_e||"").toString(),_e="("+R(dn(_e))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(_e){this._objId=_e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var _e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:_e,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var _e=[],e=Object.getOwnPropertyNames(this).filter(function(fn){return fn!="content"&&fn!="appearanceStreamContent"&&fn!="scope"&&fn!="objId"&&fn.substring(0,1)!="_"});for(var un in e)if(Object.getOwnPropertyDescriptor(this,e[un]).configurable===!1){var dn=e[un],hn=this[dn];hn&&(Array.isArray(hn)?_e.push({key:dn,value:ot(hn,this.objId,this.scope)}):hn instanceof ct?(hn.scope=this.scope,_e.push({key:dn,value:hn.objId+" 0 R"})):typeof hn!="function"&&_e.push({key:dn,value:hn}))}return _e};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var _e,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(un){e=un}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(un){_e=un.trim()},get:function(){return _e||null}})};H(ut,ct);var ht=function(){ct.call(this);var _e,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(_e){var un=function(dn){return dn};return this.scope&&(un=this.scope.internal.getEncryptor(this.objId)),"("+R(un(_e))+")"}},set:function(un){_e=un}})};H(ht,ct);var lt=function _e(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Rn){if(isNaN(Rn))throw new Error('Invalid value "'+Rn+'" for attribute F supplied.');e=Rn}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(Rn){Rn?this.F=K(e,3):this.F=Z(e,3)}});var un=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return un},set:function(Rn){if(isNaN(Rn))throw new Error('Invalid value "'+Rn+'" for attribute Ff supplied.');un=Rn}});var dn=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(dn.length!==0)return dn},set:function(Rn){dn=Rn!==void 0?Rn:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!dn||isNaN(dn[0])?0:dn[0]},set:function(Rn){dn[0]=Rn}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!dn||isNaN(dn[1])?0:dn[1]},set:function(Rn){dn[1]=Rn}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!dn||isNaN(dn[2])?0:dn[2]},set:function(Rn){dn[2]=Rn}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!dn||isNaN(dn[3])?0:dn[3]},set:function(Rn){dn[3]=Rn}});var hn="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return hn},set:function(Rn){switch(Rn){case"/Btn":case"/Tx":case"/Ch":case"/Sig":hn=Rn;break;default:throw new Error('Invalid value "'+Rn+'" for attribute FT supplied.')}}});var fn=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!fn||fn.length<1){if(this instanceof yt)return;fn="FieldObject"+_e.FieldNum++}var Rn=function(Sn){return Sn};return this.scope&&(Rn=this.scope.internal.getEncryptor(this.objId)),"("+R(Rn(fn))+")"},set:function(Rn){fn=Rn.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return fn},set:function(Rn){fn=Rn}});var pn="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return pn},set:function(Rn){pn=Rn}});var mn="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return mn},set:function(Rn){mn=Rn}});var gn=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return gn},set:function(Rn){gn=Rn}});var yn=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return yn===void 0?50/D:yn},set:function(Rn){yn=Rn}});var xn="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return xn},set:function(Rn){xn=Rn}});var En="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!En||this instanceof yt||this instanceof Nt))return st(En,this.objId,this.scope)},set:function(Rn){Rn=Rn.toString(),En=Rn}});var bn=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(bn)return this instanceof mt?bn:st(bn,this.objId,this.scope)},set:function(Rn){Rn=Rn.toString(),bn=this instanceof mt?Rn:Rn.substr(0,1)==="("?T(Rn.substr(1,Rn.length-2)):T(Rn)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(bn.substr(1,bn.length-1)):bn},set:function(Rn){Rn=Rn.toString(),bn=this instanceof mt?"/"+Rn:Rn}});var vn=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(vn)return vn},set:function(Rn){this.V=Rn}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(vn)return this instanceof mt?vn:st(vn,this.objId,this.scope)},set:function(Rn){Rn=Rn.toString(),vn=this instanceof mt?Rn:Rn.substr(0,1)==="("?T(Rn.substr(1,Rn.length-2)):T(Rn)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(vn.substr(1,vn.length-1)):vn},set:function(Rn){Rn=Rn.toString(),vn=this instanceof mt?"/"+Rn:Rn}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Pn,Tn=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Tn},set:function(Rn){Rn=!!Rn,Tn=Rn}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Pn)return Pn},set:function(Rn){Pn=Rn}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(Rn){Rn?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(Rn){Rn?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(Rn){Rn?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var In=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(In!==null)return In},set:function(Rn){if([0,1,2].indexOf(Rn)===-1)throw new Error('Invalid value "'+Rn+'" for attribute Q supplied.');In=Rn}}),Object.defineProperty(this,"textAlign",{get:function(){var Rn;switch(In){case 0:default:Rn="left";break;case 1:Rn="center";break;case 2:Rn="right"}return Rn},configurable:!0,enumerable:!0,set:function(Rn){switch(Rn){case"right":case 2:In=2;break;case"center":case 1:In=1;break;case"left":case 0:default:In=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var _e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return _e},set:function(un){_e=un}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return _e},set:function(un){_e=un}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(un){var dn,hn;hn=[],typeof(dn=un)=="string"&&(hn=function(fn,pn,mn){mn||(mn=1);for(var gn,yn=[];gn=pn.exec(fn);)yn.push(gn[mn]);return yn}(dn,/\((.*?)\)/g)),e=hn}}),this.getOptions=function(){return e},this.setOptions=function(un){e=un,this.sort&&e.sort()},this.addOption=function(un){un=(un=un||"").toString(),e.push(un),this.sort&&e.sort()},this.removeOption=function(un,dn){for(dn=dn||!1,un=(un=un||"").toString();e.indexOf(un)!==-1&&(e.splice(e.indexOf(un),1),dn!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(un){un?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(un){this.combo===!0&&(un?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(un){un?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(un){un?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(un){un?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(un){un?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(un){un?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(un){un?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(un){un?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(un){un?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var _e,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var un=function(fn){return fn};if(this.scope&&(un=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var dn,hn=[];for(dn in hn.push("<<"),e)hn.push("/"+dn+" ("+R(un(e[dn]))+")");return hn.push(">>"),hn.join(`
`)}},set:function(un){_typeof(un)==="object"&&(e=un)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(un){typeof un=="string"&&(e.CA=un)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return _e},set:function(un){_e=un}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return _e.substr(1,_e.length-1)},set:function(un){_e="/"+un}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var _e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return _e},set:function(e){_e=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var _e,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return _e},set:function(hn){_e=hn}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(hn){e=hn}});var un,dn={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var hn=function(mn){return mn};this.scope&&(hn=this.scope.internal.getEncryptor(this.objId));var fn,pn=[];for(fn in pn.push("<<"),dn)pn.push("/"+fn+" ("+R(hn(dn[fn]))+")");return pn.push(">>"),pn.join(`
`)},set:function(hn){_typeof(hn)==="object"&&(dn=hn)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return dn.CA||""},set:function(hn){typeof hn=="string"&&(dn.CA=hn)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return un},set:function(hn){un=hn}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return un.substr(1,un.length-1)},set:function(hn){un="/"+hn}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(_e){if(!("createAppearanceStream"in _e)||!("getCA"in _e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var un=this.Kids[e];un.appearanceStreamContent=_e.createAppearanceStream(un.optionName),un.caption=_e.getCA()}},bt.prototype.createOption=function(_e){var e=new yt;return e.Parent=this,e.optionName=_e,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var _e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return _e},set:function(e){_e=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return _e},set:function(e){Number.isInteger(e)&&(_e=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(_e){_e?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var un=[],dn=_e.scope.internal.getFont(_e.fontName,_e.fontStyle).id,hn=_e.scope.__private__.encodeColorString(_e.color),fn=tt(_e,_e.caption);return un.push("0.749023 g"),un.push("0 0 "+U(At.internal.getWidth(_e))+" "+U(At.internal.getHeight(_e))+" re"),un.push("f"),un.push("BMC"),un.push("q"),un.push("0 0 1 rg"),un.push("/"+dn+" "+U(fn.fontSize)+" Tf "+hn),un.push("BT"),un.push(fn.text),un.push("ET"),un.push("Q"),un.push("EMC"),e.stream=un.join(`
`),e},YesNormal:function(_e){var e=V(_e);e.scope=_e.scope;var un=_e.scope.internal.getFont(_e.fontName,_e.fontStyle).id,dn=_e.scope.__private__.encodeColorString(_e.color),hn=[],fn=At.internal.getHeight(_e),pn=At.internal.getWidth(_e),mn=tt(_e,_e.caption);return hn.push("1 g"),hn.push("0 0 "+U(pn)+" "+U(fn)+" re"),hn.push("f"),hn.push("q"),hn.push("0 0 1 rg"),hn.push("0 0 "+U(pn-1)+" "+U(fn-1)+" re"),hn.push("W"),hn.push("n"),hn.push("0 g"),hn.push("BT"),hn.push("/"+un+" "+U(mn.fontSize)+" Tf "+dn),hn.push(mn.text),hn.push("ET"),hn.push("Q"),e.stream=hn.join(`
`),e},OffPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var un=[];return un.push("0.749023 g"),un.push("0 0 "+U(At.internal.getWidth(_e))+" "+U(At.internal.getHeight(_e))+" re"),un.push("f"),e.stream=un.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(_e){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[_e]=At.RadioButton.Circle.YesNormal,e.D[_e]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(_e){var e=V(_e);e.scope=_e.scope;var un=[],dn=At.internal.getWidth(_e)<=At.internal.getHeight(_e)?At.internal.getWidth(_e)/4:At.internal.getHeight(_e)/4;dn=Number((.9*dn).toFixed(5));var hn=At.internal.Bezier_C,fn=Number((dn*hn).toFixed(5));return un.push("q"),un.push("1 0 0 1 "+z(At.internal.getWidth(_e)/2)+" "+z(At.internal.getHeight(_e)/2)+" cm"),un.push(dn+" 0 m"),un.push(dn+" "+fn+" "+fn+" "+dn+" 0 "+dn+" c"),un.push("-"+fn+" "+dn+" -"+dn+" "+fn+" -"+dn+" 0 c"),un.push("-"+dn+" -"+fn+" -"+fn+" -"+dn+" 0 -"+dn+" c"),un.push(fn+" -"+dn+" "+dn+" -"+fn+" "+dn+" 0 c"),un.push("f"),un.push("Q"),e.stream=un.join(`
`),e},YesPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var un=[],dn=At.internal.getWidth(_e)<=At.internal.getHeight(_e)?At.internal.getWidth(_e)/4:At.internal.getHeight(_e)/4;dn=Number((.9*dn).toFixed(5));var hn=Number((2*dn).toFixed(5)),fn=Number((hn*At.internal.Bezier_C).toFixed(5)),pn=Number((dn*At.internal.Bezier_C).toFixed(5));return un.push("0.749023 g"),un.push("q"),un.push("1 0 0 1 "+z(At.internal.getWidth(_e)/2)+" "+z(At.internal.getHeight(_e)/2)+" cm"),un.push(hn+" 0 m"),un.push(hn+" "+fn+" "+fn+" "+hn+" 0 "+hn+" c"),un.push("-"+fn+" "+hn+" -"+hn+" "+fn+" -"+hn+" 0 c"),un.push("-"+hn+" -"+fn+" -"+fn+" -"+hn+" 0 -"+hn+" c"),un.push(fn+" -"+hn+" "+hn+" -"+fn+" "+hn+" 0 c"),un.push("f"),un.push("Q"),un.push("0 g"),un.push("q"),un.push("1 0 0 1 "+z(At.internal.getWidth(_e)/2)+" "+z(At.internal.getHeight(_e)/2)+" cm"),un.push(dn+" 0 m"),un.push(dn+" "+pn+" "+pn+" "+dn+" 0 "+dn+" c"),un.push("-"+pn+" "+dn+" -"+dn+" "+pn+" -"+dn+" 0 c"),un.push("-"+dn+" -"+pn+" -"+pn+" -"+dn+" 0 -"+dn+" c"),un.push(pn+" -"+dn+" "+dn+" -"+pn+" "+dn+" 0 c"),un.push("f"),un.push("Q"),e.stream=un.join(`
`),e},OffPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var un=[],dn=At.internal.getWidth(_e)<=At.internal.getHeight(_e)?At.internal.getWidth(_e)/4:At.internal.getHeight(_e)/4;dn=Number((.9*dn).toFixed(5));var hn=Number((2*dn).toFixed(5)),fn=Number((hn*At.internal.Bezier_C).toFixed(5));return un.push("0.749023 g"),un.push("q"),un.push("1 0 0 1 "+z(At.internal.getWidth(_e)/2)+" "+z(At.internal.getHeight(_e)/2)+" cm"),un.push(hn+" 0 m"),un.push(hn+" "+fn+" "+fn+" "+hn+" 0 "+hn+" c"),un.push("-"+fn+" "+hn+" -"+hn+" "+fn+" -"+hn+" 0 c"),un.push("-"+hn+" -"+fn+" -"+fn+" -"+hn+" 0 -"+hn+" c"),un.push(fn+" -"+hn+" "+hn+" -"+fn+" "+hn+" 0 c"),un.push("f"),un.push("Q"),e.stream=un.join(`
`),e}},Cross:{createAppearanceStream:function(_e){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[_e]=At.RadioButton.Cross.YesNormal,e.D[_e]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(_e){var e=V(_e);e.scope=_e.scope;var un=[],dn=At.internal.calculateCross(_e);return un.push("q"),un.push("1 1 "+U(At.internal.getWidth(_e)-2)+" "+U(At.internal.getHeight(_e)-2)+" re"),un.push("W"),un.push("n"),un.push(U(dn.x1.x)+" "+U(dn.x1.y)+" m"),un.push(U(dn.x2.x)+" "+U(dn.x2.y)+" l"),un.push(U(dn.x4.x)+" "+U(dn.x4.y)+" m"),un.push(U(dn.x3.x)+" "+U(dn.x3.y)+" l"),un.push("s"),un.push("Q"),e.stream=un.join(`
`),e},YesPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var un=At.internal.calculateCross(_e),dn=[];return dn.push("0.749023 g"),dn.push("0 0 "+U(At.internal.getWidth(_e))+" "+U(At.internal.getHeight(_e))+" re"),dn.push("f"),dn.push("q"),dn.push("1 1 "+U(At.internal.getWidth(_e)-2)+" "+U(At.internal.getHeight(_e)-2)+" re"),dn.push("W"),dn.push("n"),dn.push(U(un.x1.x)+" "+U(un.x1.y)+" m"),dn.push(U(un.x2.x)+" "+U(un.x2.y)+" l"),dn.push(U(un.x4.x)+" "+U(un.x4.y)+" m"),dn.push(U(un.x3.x)+" "+U(un.x3.y)+" l"),dn.push("s"),dn.push("Q"),e.stream=dn.join(`
`),e},OffPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var un=[];return un.push("0.749023 g"),un.push("0 0 "+U(At.internal.getWidth(_e))+" "+U(At.internal.getHeight(_e))+" re"),un.push("f"),e.stream=un.join(`
`),e}}},createDefaultAppearanceStream:function(_e){var e=_e.scope.internal.getFont(_e.fontName,_e.fontStyle).id,un=_e.scope.__private__.encodeColorString(_e.color);return"/"+e+" "+_e.fontSize+" Tf "+un}};At.internal={Bezier_C:.551915024494,calculateCross:function(_e){var e=At.internal.getWidth(_e),un=At.internal.getHeight(_e),dn=Math.min(e,un);return{x1:{x:(e-dn)/2,y:(un-dn)/2+dn},x2:{x:(e-dn)/2+dn,y:(un-dn)/2},x3:{x:(e-dn)/2,y:(un-dn)/2},x4:{x:(e-dn)/2+dn,y:(un-dn)/2+dn}}}},At.internal.getWidth=function(_e){var e=0;return _typeof(_e)==="object"&&(e=W(_e.Rect[2])),e},At.internal.getHeight=function(_e){var e=0;return _typeof(_e)==="object"&&(e=W(_e.Rect[3])),e};var xt=q.addField=function(_e){if(at(this,_e),!(_e instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=_e).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),_e.page=_e.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};function _t(_e){return _e.reduce(function(e,un,dn){return e[un]=dn,e},{})}(function(_e){_e.__addimage__={};var e="UNKNOWN",un={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},dn=_e.__addimage__.getImageFileTypeByImageData=function(Cn,Mn){var Bn,Xn,nr,sr,lr,tr=e;if((Mn=Mn||e)==="RGBA"||Cn.data!==void 0&&Cn.data instanceof Uint8ClampedArray&&"height"in Cn&&"width"in Cn)return"RGBA";if(Gn(Cn))for(lr in un)for(nr=un[lr],Bn=0;Bn<nr.length;Bn+=1){for(sr=!0,Xn=0;Xn<nr[Bn].length;Xn+=1)if(nr[Bn][Xn]!==void 0&&nr[Bn][Xn]!==Cn[Xn]){sr=!1;break}if(sr===!0){tr=lr;break}}else for(lr in un)for(nr=un[lr],Bn=0;Bn<nr.length;Bn+=1){for(sr=!0,Xn=0;Xn<nr[Bn].length;Xn+=1)if(nr[Bn][Xn]!==void 0&&nr[Bn][Xn]!==Cn.charCodeAt(Xn)){sr=!1;break}if(sr===!0){tr=lr;break}}return tr===e&&Mn!==e&&(tr=Mn),tr},hn=function Cn(Mn){for(var Bn=this.internal.write,Xn=this.internal.putStream,nr=(0,this.internal.getFilters)();nr.indexOf("FlateEncode")!==-1;)nr.splice(nr.indexOf("FlateEncode"),1);Mn.objectId=this.internal.newObject();var sr=[];if(sr.push({key:"Type",value:"/XObject"}),sr.push({key:"Subtype",value:"/Image"}),sr.push({key:"Width",value:Mn.width}),sr.push({key:"Height",value:Mn.height}),Mn.colorSpace===In.INDEXED?sr.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Mn.palette.length/3-1)+" "+("sMask"in Mn&&Mn.sMask!==void 0?Mn.objectId+2:Mn.objectId+1)+" 0 R]"}):(sr.push({key:"ColorSpace",value:"/"+Mn.colorSpace}),Mn.colorSpace===In.DEVICE_CMYK&&sr.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),sr.push({key:"BitsPerComponent",value:Mn.bitsPerComponent}),"decodeParameters"in Mn&&Mn.decodeParameters!==void 0&&sr.push({key:"DecodeParms",value:"<<"+Mn.decodeParameters+">>"}),"transparency"in Mn&&Array.isArray(Mn.transparency)){for(var lr="",tr=0,Jn=Mn.transparency.length;tr<Jn;tr++)lr+=Mn.transparency[tr]+" "+Mn.transparency[tr]+" ";sr.push({key:"Mask",value:"["+lr+"]"})}Mn.sMask!==void 0&&sr.push({key:"SMask",value:Mn.objectId+1+" 0 R"});var ar=Mn.filter!==void 0?["/"+Mn.filter]:void 0;if(Xn({data:Mn.data,additionalKeyValues:sr,alreadyAppliedFilters:ar,objectId:Mn.objectId}),Bn("endobj"),"sMask"in Mn&&Mn.sMask!==void 0){var gr="/Predictor "+Mn.predictor+" /Colors 1 /BitsPerComponent "+Mn.bitsPerComponent+" /Columns "+Mn.width,qn={width:Mn.width,height:Mn.height,colorSpace:"DeviceGray",bitsPerComponent:Mn.bitsPerComponent,decodeParameters:gr,data:Mn.sMask};"filter"in Mn&&(qn.filter=Mn.filter),Cn.call(this,qn)}if(Mn.colorSpace===In.INDEXED){var On=this.internal.newObject();Xn({data:Nn(new Uint8Array(Mn.palette)),objectId:On}),Bn("endobj")}},fn=function(){var Cn=this.internal.collections.addImage_images;for(var Mn in Cn)hn.call(this,Cn[Mn])},pn=function(){var Cn,Mn=this.internal.collections.addImage_images,Bn=this.internal.write;for(var Xn in Mn)Bn("/I"+(Cn=Mn[Xn]).index,Cn.objectId,"0","R")},mn=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",fn),this.internal.events.subscribe("putXobjectDict",pn))},gn=function(){var Cn=this.internal.collections.addImage_images;return mn.call(this),Cn},yn=function(){return Object.keys(this.internal.collections.addImage_images).length},xn=function(Cn){return typeof _e["process"+Cn.toUpperCase()]=="function"},En=function(Cn){return _typeof(Cn)==="object"&&Cn.nodeType===1},bn=function(Cn,Mn){if(Cn.nodeName==="IMG"&&Cn.hasAttribute("src")){var Bn=""+Cn.getAttribute("src");if(Bn.indexOf("data:image/")===0)return u(unescape(Bn).split("base64,").pop());var Xn=_e.loadFile(Bn,!0);if(Xn!==void 0)return Xn}if(Cn.nodeName==="CANVAS"){if(Cn.width===0||Cn.height===0)throw new Error("Given canvas must have data. Canvas width: "+Cn.width+", height: "+Cn.height);var nr;switch(Mn){case"PNG":nr="image/png";break;case"WEBP":nr="image/webp";break;case"JPEG":case"JPG":default:nr="image/jpeg"}return u(Cn.toDataURL(nr,1).split("base64,").pop())}},vn=function(Cn){var Mn=this.internal.collections.addImage_images;if(Mn){for(var Bn in Mn)if(Cn===Mn[Bn].alias)return Mn[Bn]}},Pn=function(Cn,Mn,Bn){return Cn||Mn||(Cn=-96,Mn=-96),Cn<0&&(Cn=-1*Bn.width*72/Cn/this.internal.scaleFactor),Mn<0&&(Mn=-1*Bn.height*72/Mn/this.internal.scaleFactor),Cn===0&&(Cn=Mn*Bn.width/Bn.height),Mn===0&&(Mn=Cn*Bn.height/Bn.width),[Cn,Mn]},Tn=function(Cn,Mn,Bn,Xn,nr,sr){var lr=Pn.call(this,Bn,Xn,nr),tr=this.internal.getCoordinateString,Jn=this.internal.getVerticalCoordinateString,ar=gn.call(this);if(Bn=lr[0],Xn=lr[1],ar[nr.index]=nr,sr){sr*=Math.PI/180;var gr=Math.cos(sr),qn=Math.sin(sr),On=function(Yn){return Yn.toFixed(4)},Un=[On(gr),On(qn),On(-1*qn),On(gr),0,0,"cm"]}this.internal.write("q"),sr?(this.internal.write([1,"0","0",1,tr(Cn),Jn(Mn+Xn),"cm"].join(" ")),this.internal.write(Un.join(" ")),this.internal.write([tr(Bn),"0","0",tr(Xn),"0","0","cm"].join(" "))):this.internal.write([tr(Bn),"0","0",tr(Xn),tr(Cn),Jn(Mn+Xn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+nr.index+" Do"),this.internal.write("Q")},In=_e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};_e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Rn=_e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Sn=_e.__addimage__.sHashCode=function(Cn){var Mn,Bn,Xn=0;if(typeof Cn=="string")for(Bn=Cn.length,Mn=0;Mn<Bn;Mn++)Xn=(Xn<<5)-Xn+Cn.charCodeAt(Mn),Xn|=0;else if(Gn(Cn))for(Bn=Cn.byteLength/2,Mn=0;Mn<Bn;Mn++)Xn=(Xn<<5)-Xn+Cn[Mn],Xn|=0;return Xn},Dn=_e.__addimage__.validateStringAsBase64=function(Cn){(Cn=Cn||"").toString().trim();var Mn=!0;return Cn.length===0&&(Mn=!1),Cn.length%4!=0&&(Mn=!1),/^[A-Za-z0-9+/]+$/.test(Cn.substr(0,Cn.length-2))===!1&&(Mn=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Cn.substr(-2))===!1&&(Mn=!1),Mn},$n=_e.__addimage__.extractImageFromDataUrl=function(Cn){if(Cn==null||!(Cn=Cn.trim()).startsWith("data:"))return null;var Mn=Cn.indexOf(",");return Mn<0?null:Cn.substring(0,Mn).trim().endsWith("base64")?Cn.substring(Mn+1):null},Fn=_e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};_e.__addimage__.isArrayBuffer=function(Cn){return Fn()&&Cn instanceof ArrayBuffer};var Gn=_e.__addimage__.isArrayBufferView=function(Cn){return Fn()&&typeof Uint32Array<"u"&&(Cn instanceof Int8Array||Cn instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Cn instanceof Uint8ClampedArray||Cn instanceof Int16Array||Cn instanceof Uint16Array||Cn instanceof Int32Array||Cn instanceof Uint32Array||Cn instanceof Float32Array||Cn instanceof Float64Array)},kn=_e.__addimage__.binaryStringToUint8Array=function(Cn){for(var Mn=Cn.length,Bn=new Uint8Array(Mn),Xn=0;Xn<Mn;Xn++)Bn[Xn]=Cn.charCodeAt(Xn);return Bn},Nn=_e.__addimage__.arrayBufferToBinaryString=function(Cn){for(var Mn="",Bn=Gn(Cn)?Cn:new Uint8Array(Cn),Xn=0;Xn<Bn.length;Xn+=8192)Mn+=String.fromCharCode.apply(null,Bn.subarray(Xn,Xn+8192));return Mn};_e.addImage=function(){var Cn,Mn,Bn,Xn,nr,sr,lr,tr,Jn;if(typeof arguments[1]=="number"?(Mn=e,Bn=arguments[1],Xn=arguments[2],nr=arguments[3],sr=arguments[4],lr=arguments[5],tr=arguments[6],Jn=arguments[7]):(Mn=arguments[1],Bn=arguments[2],Xn=arguments[3],nr=arguments[4],sr=arguments[5],lr=arguments[6],tr=arguments[7],Jn=arguments[8]),_typeof(Cn=arguments[0])==="object"&&!En(Cn)&&"imageData"in Cn){var ar=Cn;Cn=ar.imageData,Mn=ar.format||Mn||e,Bn=ar.x||Bn||0,Xn=ar.y||Xn||0,nr=ar.w||ar.width||nr,sr=ar.h||ar.height||sr,lr=ar.alias||lr,tr=ar.compression||tr,Jn=ar.rotation||ar.angle||Jn}var gr=this.internal.getFilters();if(tr===void 0&&gr.indexOf("FlateEncode")!==-1&&(tr="SLOW"),isNaN(Bn)||isNaN(Xn))throw new Error("Invalid coordinates passed to jsPDF.addImage");mn.call(this);var qn=Ln.call(this,Cn,Mn,lr,tr);return Tn.call(this,Bn,Xn,nr,sr,qn,Jn),this};var Ln=function(Cn,Mn,Bn,Xn){var nr,sr,lr;if(typeof Cn=="string"&&dn(Cn)===e){Cn=unescape(Cn);var tr=zn(Cn,!1);(tr!==""||(tr=_e.loadFile(Cn,!0))!==void 0)&&(Cn=tr)}if(En(Cn)&&(Cn=bn(Cn,Mn)),Mn=dn(Cn,Mn),!xn(Mn))throw new Error("addImage does not support files of type '"+Mn+"', please ensure that a plugin for '"+Mn+"' support is added.");if(((lr=Bn)==null||lr.length===0)&&(Bn=function(Jn){return typeof Jn=="string"||Gn(Jn)?Sn(Jn):Gn(Jn.data)?Sn(Jn.data):null}(Cn)),(nr=vn.call(this,Bn))||(Fn()&&(Cn instanceof Uint8Array||Mn==="RGBA"||(sr=Cn,Cn=kn(Cn))),nr=this["process"+Mn.toUpperCase()](Cn,yn.call(this),Bn,function(Jn){return Jn&&typeof Jn=="string"&&(Jn=Jn.toUpperCase()),Jn in _e.image_compression?Jn:Rn.NONE}(Xn),sr)),!nr)throw new Error("An unknown error occurred whilst processing the image.");return nr},zn=_e.__addimage__.convertBase64ToBinaryString=function(Cn,Mn){Mn=typeof Mn!="boolean"||Mn;var Bn,Xn="";if(typeof Cn=="string"){var nr;Bn=(nr=$n(Cn))!==null&&nr!==void 0?nr:Cn;try{Xn=u(Bn)}catch(sr){if(Mn)throw Dn(Bn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+sr.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Xn};_e.getImageProperties=function(Cn){var Mn,Bn,Xn="";if(En(Cn)&&(Cn=bn(Cn)),typeof Cn=="string"&&dn(Cn)===e&&((Xn=zn(Cn,!1))===""&&(Xn=_e.loadFile(Cn)||""),Cn=Xn),Bn=dn(Cn),!xn(Bn))throw new Error("addImage does not support files of type '"+Bn+"', please ensure that a plugin for '"+Bn+"' support is added.");if(!Fn()||Cn instanceof Uint8Array||(Cn=kn(Cn)),!(Mn=this["process"+Bn.toUpperCase()](Cn)))throw new Error("An unknown error occurred whilst processing the image");return Mn.fileType=Bn,Mn}})(E.API),function(_e){var e=function(un){if(un!==void 0&&un!="")return!0};E.API.events.push(["addPage",function(un){this.internal.getPageInfo(un.pageNumber).pageContext.annotations=[]}]),_e.events.push(["putPage",function(un){for(var dn,hn,fn,pn=this.internal.getCoordinateString,mn=this.internal.getVerticalCoordinateString,gn=this.internal.getPageInfoByObjId(un.objId),yn=un.pageContext.annotations,xn=!1,En=0;En<yn.length&&!xn;En++)switch((dn=yn[En]).type){case"link":(e(dn.options.url)||e(dn.options.pageNumber))&&(xn=!0);break;case"reference":case"text":case"freetext":xn=!0}if(xn!=0){this.internal.write("/Annots [");for(var bn=0;bn<yn.length;bn++){dn=yn[bn];var vn=this.internal.pdfEscape,Pn=this.internal.getEncryptor(un.objId);switch(dn.type){case"reference":this.internal.write(" "+dn.object.objId+" 0 R ");break;case"text":var Tn=this.internal.newAdditionalObject(),In=this.internal.newAdditionalObject(),Rn=this.internal.getEncryptor(Tn.objId),Sn=dn.title||"Note";fn="<</Type /Annot /Subtype /Text "+(hn="/Rect ["+pn(dn.bounds.x)+" "+mn(dn.bounds.y+dn.bounds.h)+" "+pn(dn.bounds.x+dn.bounds.w)+" "+mn(dn.bounds.y)+"] ")+"/Contents ("+vn(Rn(dn.contents))+")",fn+=" /Popup "+In.objId+" 0 R",fn+=" /P "+gn.objId+" 0 R",fn+=" /T ("+vn(Rn(Sn))+") >>",Tn.content=fn;var Dn=Tn.objId+" 0 R";fn="<</Type /Annot /Subtype /Popup "+(hn="/Rect ["+pn(dn.bounds.x+30)+" "+mn(dn.bounds.y+dn.bounds.h)+" "+pn(dn.bounds.x+dn.bounds.w+30)+" "+mn(dn.bounds.y)+"] ")+" /Parent "+Dn,dn.open&&(fn+=" /Open true"),fn+=" >>",In.content=fn,this.internal.write(Tn.objId,"0 R",In.objId,"0 R");break;case"freetext":hn="/Rect ["+pn(dn.bounds.x)+" "+mn(dn.bounds.y)+" "+pn(dn.bounds.x+dn.bounds.w)+" "+mn(dn.bounds.y+dn.bounds.h)+"] ";var $n=dn.color||"#000000";fn="<</Type /Annot /Subtype /FreeText "+hn+"/Contents ("+vn(Pn(dn.contents))+")",fn+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$n+")",fn+=" /Border [0 0 0]",fn+=" >>",this.internal.write(fn);break;case"link":if(dn.options.name){var Fn=this.annotations._nameMap[dn.options.name];dn.options.pageNumber=Fn.page,dn.options.top=Fn.y}else dn.options.top||(dn.options.top=0);if(hn="/Rect ["+dn.finalBounds.x+" "+dn.finalBounds.y+" "+dn.finalBounds.w+" "+dn.finalBounds.h+"] ",fn="",dn.options.url)fn="<</Type /Annot /Subtype /Link "+hn+"/Border [0 0 0] /A <</S /URI /URI ("+vn(Pn(dn.options.url))+") >>";else if(dn.options.pageNumber)switch(fn="<</Type /Annot /Subtype /Link "+hn+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(dn.options.pageNumber).objId+" 0 R",dn.options.magFactor=dn.options.magFactor||"XYZ",dn.options.magFactor){case"Fit":fn+=" /Fit]";break;case"FitH":fn+=" /FitH "+dn.options.top+"]";break;case"FitV":dn.options.left=dn.options.left||0,fn+=" /FitV "+dn.options.left+"]";break;case"XYZ":default:var Gn=mn(dn.options.top);dn.options.left=dn.options.left||0,dn.options.zoom===void 0&&(dn.options.zoom=0),fn+=" /XYZ "+dn.options.left+" "+Gn+" "+dn.options.zoom+"]"}fn!=""&&(fn+=" >>",this.internal.write(fn))}}this.internal.write("]")}}]),_e.createAnnotation=function(un){var dn=this.internal.getCurrentPageInfo();switch(un.type){case"link":this.link(un.bounds.x,un.bounds.y,un.bounds.w,un.bounds.h,un);break;case"text":case"freetext":dn.pageContext.annotations.push(un)}},_e.link=function(un,dn,hn,fn,pn){var mn=this.internal.getCurrentPageInfo(),gn=this.internal.getCoordinateString,yn=this.internal.getVerticalCoordinateString;mn.pageContext.annotations.push({finalBounds:{x:gn(un),y:yn(dn),w:gn(un+hn),h:yn(dn+fn)},options:pn,type:"link"})},_e.textWithLink=function(un,dn,hn,fn){var pn,mn,gn=this.getTextWidth(un),yn=this.internal.getLineHeight()/this.internal.scaleFactor;if(fn.maxWidth!==void 0){mn=fn.maxWidth;var xn=this.splitTextToSize(un,mn).length;pn=Math.ceil(yn*xn)}else mn=gn,pn=yn;return this.text(un,dn,hn,fn),hn+=.2*yn,fn.align==="center"&&(dn-=gn/2),fn.align==="right"&&(dn-=gn),this.link(dn,hn-yn,mn,pn,fn),gn},_e.getTextWidth=function(un){var dn=this.internal.getFontSize();return this.getStringUnitWidth(un)*dn/this.internal.scaleFactor}}(E.API),function(_e){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},un={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},dn={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},hn=[1570,1571,1573,1575];_e.__arabicParser__={};var fn=_e.__arabicParser__.isInArabicSubstitutionA=function(Tn){return e[Tn.charCodeAt(0)]!==void 0},pn=_e.__arabicParser__.isArabicLetter=function(Tn){return typeof Tn=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Tn)},mn=_e.__arabicParser__.isArabicEndLetter=function(Tn){return pn(Tn)&&fn(Tn)&&e[Tn.charCodeAt(0)].length<=2},gn=_e.__arabicParser__.isArabicAlfLetter=function(Tn){return pn(Tn)&&hn.indexOf(Tn.charCodeAt(0))>=0};_e.__arabicParser__.arabicLetterHasIsolatedForm=function(Tn){return pn(Tn)&&fn(Tn)&&e[Tn.charCodeAt(0)].length>=1};var yn=_e.__arabicParser__.arabicLetterHasFinalForm=function(Tn){return pn(Tn)&&fn(Tn)&&e[Tn.charCodeAt(0)].length>=2};_e.__arabicParser__.arabicLetterHasInitialForm=function(Tn){return pn(Tn)&&fn(Tn)&&e[Tn.charCodeAt(0)].length>=3};var xn=_e.__arabicParser__.arabicLetterHasMedialForm=function(Tn){return pn(Tn)&&fn(Tn)&&e[Tn.charCodeAt(0)].length==4},En=_e.__arabicParser__.resolveLigatures=function(Tn){var In=0,Rn=un,Sn="",Dn=0;for(In=0;In<Tn.length;In+=1)Rn[Tn.charCodeAt(In)]!==void 0?(Dn++,typeof(Rn=Rn[Tn.charCodeAt(In)])=="number"&&(Sn+=String.fromCharCode(Rn),Rn=un,Dn=0),In===Tn.length-1&&(Rn=un,Sn+=Tn.charAt(In-(Dn-1)),In-=Dn-1,Dn=0)):(Rn=un,Sn+=Tn.charAt(In-Dn),In-=Dn,Dn=0);return Sn};_e.__arabicParser__.isArabicDiacritic=function(Tn){return Tn!==void 0&&dn[Tn.charCodeAt(0)]!==void 0};var bn=_e.__arabicParser__.getCorrectForm=function(Tn,In,Rn){return pn(Tn)?fn(Tn)===!1?-1:!yn(Tn)||!pn(In)&&!pn(Rn)||!pn(Rn)&&mn(In)||mn(Tn)&&!pn(In)||mn(Tn)&&gn(In)||mn(Tn)&&mn(In)?0:xn(Tn)&&pn(In)&&!mn(In)&&pn(Rn)&&yn(Rn)?3:mn(Tn)||!pn(Rn)?1:2:-1},vn=function(Tn){var In=0,Rn=0,Sn=0,Dn="",$n="",Fn="",Gn=(Tn=Tn||"").split("\\s+"),kn=[];for(In=0;In<Gn.length;In+=1){for(kn.push(""),Rn=0;Rn<Gn[In].length;Rn+=1)Dn=Gn[In][Rn],$n=Gn[In][Rn-1],Fn=Gn[In][Rn+1],pn(Dn)?(Sn=bn(Dn,$n,Fn),kn[In]+=Sn!==-1?String.fromCharCode(e[Dn.charCodeAt(0)][Sn]):Dn):kn[In]+=Dn;kn[In]=En(kn[In])}return kn.join(" ")},Pn=_e.__arabicParser__.processArabic=_e.processArabic=function(){var Tn,In=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Rn=[];if(Array.isArray(In)){var Sn=0;for(Rn=[],Sn=0;Sn<In.length;Sn+=1)Array.isArray(In[Sn])?Rn.push([vn(In[Sn][0]),In[Sn][1],In[Sn][2]]):Rn.push([vn(In[Sn])]);Tn=Rn}else Tn=vn(In);return typeof arguments[0]=="string"?Tn:(arguments[0].text=Tn,arguments[0])};_e.events.push(["preProcessText",Pn])}(E.API),E.API.autoPrint=function(_e){var e;switch((_e=_e||{}).variant=_e.variant||"non-conform",_e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(_e){var e=function(){var un=void 0;Object.defineProperty(this,"pdf",{get:function(){return un},set:function(mn){un=mn}});var dn=150;Object.defineProperty(this,"width",{get:function(){return dn},set:function(mn){dn=isNaN(mn)||Number.isInteger(mn)===!1||mn<0?150:mn,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=dn+1)}});var hn=300;Object.defineProperty(this,"height",{get:function(){return hn},set:function(mn){hn=isNaN(mn)||Number.isInteger(mn)===!1||mn<0?300:mn,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=hn+1)}});var fn=[];Object.defineProperty(this,"childNodes",{get:function(){return fn},set:function(mn){fn=mn}});var pn={};Object.defineProperty(this,"style",{get:function(){return pn},set:function(mn){pn=mn}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(un,dn){var hn;if((un=un||"2d")!=="2d")return null;for(hn in dn)this.pdf.context2d.hasOwnProperty(hn)&&(this.pdf.context2d[hn]=dn[hn]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},_e.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(_e){var e={left:0,top:0,bottom:0,right:0},un=!1,dn=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),hn.call(this))},hn=function(){this.internal.__cell__.lastCell=new fn,this.internal.__cell__.pages=1},fn=function(){var gn=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return gn},set:function(Tn){gn=Tn}});var yn=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return yn},set:function(Tn){yn=Tn}});var xn=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return xn},set:function(Tn){xn=Tn}});var En=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return En},set:function(Tn){En=Tn}});var bn=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return bn},set:function(Tn){bn=Tn}});var vn=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return vn},set:function(Tn){vn=Tn}});var Pn=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Pn},set:function(Tn){Pn=Tn}}),this};fn.prototype.clone=function(){return new fn(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},fn.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},_e.setHeaderFunction=function(gn){return dn.call(this),this.internal.__cell__.headerFunction=typeof gn=="function"?gn:void 0,this},_e.getTextDimensions=function(gn,yn){dn.call(this);var xn=(yn=yn||{}).fontSize||this.getFontSize(),En=yn.font||this.getFont(),bn=yn.scaleFactor||this.internal.scaleFactor,vn=0,Pn=0,Tn=0,In=this;if(!Array.isArray(gn)&&typeof gn!="string"){if(typeof gn!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");gn=String(gn)}var Rn=yn.maxWidth;Rn>0?typeof gn=="string"?gn=this.splitTextToSize(gn,Rn):Object.prototype.toString.call(gn)==="[object Array]"&&(gn=gn.reduce(function(Dn,$n){return Dn.concat(In.splitTextToSize($n,Rn))},[])):gn=Array.isArray(gn)?gn:[gn];for(var Sn=0;Sn<gn.length;Sn++)vn<(Tn=this.getStringUnitWidth(gn[Sn],{font:En})*xn)&&(vn=Tn);return vn!==0&&(Pn=gn.length),{w:vn/=bn,h:Math.max((Pn*xn*this.getLineHeightFactor()-xn*(this.getLineHeightFactor()-1))/bn,0)}},_e.cellAddPage=function(){dn.call(this),this.addPage();var gn=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new fn(gn.left,gn.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var pn=_e.cell=function(){var gn;gn=arguments[0]instanceof fn?arguments[0]:new fn(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),dn.call(this);var yn=this.internal.__cell__.lastCell,xn=this.internal.__cell__.padding,En=this.internal.__cell__.margins||e,bn=this.internal.__cell__.tableHeaderRow,vn=this.internal.__cell__.printHeaders;return yn.lineNumber!==void 0&&(yn.lineNumber===gn.lineNumber?(gn.x=(yn.x||0)+(yn.width||0),gn.y=yn.y||0):yn.y+yn.height+gn.height+En.bottom>this.getPageHeight()?(this.cellAddPage(),gn.y=En.top,vn&&bn&&(this.printHeaderRow(gn.lineNumber,!0),gn.y+=bn[0].height)):gn.y=yn.y+yn.height||gn.y),gn.text[0]!==void 0&&(this.rect(gn.x,gn.y,gn.width,gn.height,un===!0?"FD":void 0),gn.align==="right"?this.text(gn.text,gn.x+gn.width-xn,gn.y+xn,{align:"right",baseline:"top"}):gn.align==="center"?this.text(gn.text,gn.x+gn.width/2,gn.y+xn,{align:"center",baseline:"top",maxWidth:gn.width-xn-xn}):this.text(gn.text,gn.x+xn,gn.y+xn,{align:"left",baseline:"top",maxWidth:gn.width-xn-xn})),this.internal.__cell__.lastCell=gn,this};_e.table=function(gn,yn,xn,En,bn){if(dn.call(this),!xn)throw new Error("No data for PDF table.");var vn,Pn,Tn,In,Rn=[],Sn=[],Dn=[],$n={},Fn={},Gn=[],kn=[],Nn=(bn=bn||{}).autoSize||!1,Ln=bn.printHeaders!==!1,zn=bn.css&&bn.css["font-size"]!==void 0?16*bn.css["font-size"]:bn.fontSize||12,Cn=bn.margins||Object.assign({width:this.getPageWidth()},e),Mn=typeof bn.padding=="number"?bn.padding:3,Bn=bn.headerBackgroundColor||"#c8c8c8",Xn=bn.headerTextColor||"#000";if(hn.call(this),this.internal.__cell__.printHeaders=Ln,this.internal.__cell__.margins=Cn,this.internal.__cell__.table_font_size=zn,this.internal.__cell__.padding=Mn,this.internal.__cell__.headerBackgroundColor=Bn,this.internal.__cell__.headerTextColor=Xn,this.setFontSize(zn),En==null)Sn=Rn=Object.keys(xn[0]),Dn=Rn.map(function(){return"left"});else if(Array.isArray(En)&&_typeof(En[0])==="object")for(Rn=En.map(function(ar){return ar.name}),Sn=En.map(function(ar){return ar.prompt||ar.name||""}),Dn=En.map(function(ar){return ar.align||"left"}),vn=0;vn<En.length;vn+=1)Fn[En[vn].name]=En[vn].width*(19.049976/25.4);else Array.isArray(En)&&typeof En[0]=="string"&&(Sn=Rn=En,Dn=Rn.map(function(){return"left"}));if(Nn||Array.isArray(En)&&typeof En[0]=="string")for(vn=0;vn<Rn.length;vn+=1){for($n[In=Rn[vn]]=xn.map(function(ar){return ar[In]}),this.setFont(void 0,"bold"),Gn.push(this.getTextDimensions(Sn[vn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Pn=$n[In],this.setFont(void 0,"normal"),Tn=0;Tn<Pn.length;Tn+=1)Gn.push(this.getTextDimensions(Pn[Tn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Fn[In]=Math.max.apply(null,Gn)+Mn+Mn,Gn=[]}if(Ln){var nr={};for(vn=0;vn<Rn.length;vn+=1)nr[Rn[vn]]={},nr[Rn[vn]].text=Sn[vn],nr[Rn[vn]].align=Dn[vn];var sr=mn.call(this,nr,Fn);kn=Rn.map(function(ar){return new fn(gn,yn,Fn[ar],sr,nr[ar].text,void 0,nr[ar].align)}),this.setTableHeaderRow(kn),this.printHeaderRow(1,!1)}var lr=En.reduce(function(ar,gr){return ar[gr.name]=gr.align,ar},{});for(vn=0;vn<xn.length;vn+=1){"rowStart"in bn&&bn.rowStart instanceof Function&&bn.rowStart({row:vn,data:xn[vn]},this);var tr=mn.call(this,xn[vn],Fn);for(Tn=0;Tn<Rn.length;Tn+=1){var Jn=xn[vn][Rn[Tn]];"cellStart"in bn&&bn.cellStart instanceof Function&&bn.cellStart({row:vn,col:Tn,data:Jn},this),pn.call(this,new fn(gn,yn,Fn[Rn[Tn]],tr,Jn,vn+2,lr[Rn[Tn]]))}}return this.internal.__cell__.table_x=gn,this.internal.__cell__.table_y=yn,this};var mn=function(gn,yn){var xn=this.internal.__cell__.padding,En=this.internal.__cell__.table_font_size,bn=this.internal.scaleFactor;return Object.keys(gn).map(function(vn){var Pn=gn[vn];return this.splitTextToSize(Pn.hasOwnProperty("text")?Pn.text:Pn,yn[vn]-xn-xn)},this).map(function(vn){return this.getLineHeightFactor()*vn.length*En/bn+xn+xn},this).reduce(function(vn,Pn){return Math.max(vn,Pn)},0)};_e.setTableHeaderRow=function(gn){dn.call(this),this.internal.__cell__.tableHeaderRow=gn},_e.printHeaderRow=function(gn,yn){if(dn.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var xn;if(un=!0,typeof this.internal.__cell__.headerFunction=="function"){var En=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new fn(En[0],En[1],En[2],En[3],void 0,-1)}this.setFont(void 0,"bold");for(var bn=[],vn=0;vn<this.internal.__cell__.tableHeaderRow.length;vn+=1){xn=this.internal.__cell__.tableHeaderRow[vn].clone(),yn&&(xn.y=this.internal.__cell__.margins.top||0,bn.push(xn)),xn.lineNumber=gn;var Pn=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),pn.call(this,xn),this.setTextColor(Pn)}bn.length>0&&this.setTableHeaderRow(bn),this.setFont(void 0,"normal"),un=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(_e){var e=_e.family.replace(/"|'/g,"").toLowerCase(),un=function(fn){return Pt[fn=fn||"normal"]?fn:"normal"}(_e.style),dn=function(fn){if(!fn)return 400;if(typeof fn=="number")return fn>=100&&fn<=900&&fn%100==0?fn:400;if(/^\d00$/.test(fn))return parseInt(fn);switch(fn){case"bold":return 700;case"normal":default:return 400}}(_e.weight),hn=function(fn){return typeof It[fn=fn||"normal"]=="number"?fn:"normal"}(_e.stretch);return{family:e,style:un,weight:dn,stretch:hn,src:_e.src||[],ref:_e.ref||{name:e,style:[hn,un,dn].join(" ")}}}function Ot(_e,e,un,dn){var hn;for(hn=un;hn>=0&&hn<e.length;hn+=dn)if(_e[e[hn]])return _e[e[hn]];for(hn=un;hn>=0&&hn<e.length;hn-=dn)if(_e[e[hn]])return _e[e[hn]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(_e){return[_e.stretch,_e.style,_e.weight,_e.family].join(" ")}function qt(_e,e,un){for(var dn=(un=un||{}).defaultFontFamily||"times",hn=Object.assign({},Bt,un.genericFontFamilies||{}),fn=null,pn=null,mn=0;mn<e.length;++mn)if(hn[(fn=jt(e[mn])).family]&&(fn.family=hn[fn.family]),_e.hasOwnProperty(fn.family)){pn=_e[fn.family];break}if(!(pn=pn||_e[dn]))throw new Error("Could not find a font-family for the rule '"+Et(fn)+"' and default family '"+dn+"'.");if(pn=function(gn,yn){if(yn[gn])return yn[gn];var xn=It[gn],En=xn<=It.normal?-1:1,bn=Ot(yn,kt,xn,En);if(!bn)throw new Error("Could not find a matching font-stretch value for "+gn);return bn}(fn.stretch,pn),pn=function(gn,yn){if(yn[gn])return yn[gn];for(var xn=Pt[gn],En=0;En<xn.length;++En)if(yn[xn[En]])return yn[xn[En]];throw new Error("Could not find a matching font-style for "+gn)}(fn.style,pn),!(pn=function(gn,yn){if(yn[gn])return yn[gn];if(gn===400&&yn[500])return yn[500];if(gn===500&&yn[400])return yn[400];var xn=Ct[gn],En=Ot(yn,Ft,xn,gn<400?-1:1);if(!En)throw new Error("Could not find a matching font-weight for value "+gn);return En}(fn.weight,pn)))throw new Error("Failed to resolve a font for the rule '"+Et(fn)+"'.");return pn}function Dt(_e){return _e.trimLeft()}function Rt(_e,e){for(var un=0;un<_e.length;){if(_e.charAt(un)===e)return[_e.substring(0,un),_e.substring(un+1)];un+=1}return null}function Tt(_e){var e=_e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],_e.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(_e){var e,un,dn,hn,fn,pn,mn,gn,yn,xn=function(qn){return qn=qn||{},this.isStrokeTransparent=qn.isStrokeTransparent||!1,this.strokeOpacity=qn.strokeOpacity||1,this.strokeStyle=qn.strokeStyle||"#000000",this.fillStyle=qn.fillStyle||"#000000",this.isFillTransparent=qn.isFillTransparent||!1,this.fillOpacity=qn.fillOpacity||1,this.font=qn.font||"10px sans-serif",this.textBaseline=qn.textBaseline||"alphabetic",this.textAlign=qn.textAlign||"left",this.lineWidth=qn.lineWidth||1,this.lineJoin=qn.lineJoin||"miter",this.lineCap=qn.lineCap||"butt",this.path=qn.path||[],this.transform=qn.transform!==void 0?qn.transform.clone():new gn,this.globalCompositeOperation=qn.globalCompositeOperation||"normal",this.globalAlpha=qn.globalAlpha||1,this.clip_path=qn.clip_path||[],this.currentPoint=qn.currentPoint||new pn,this.miterLimit=qn.miterLimit||10,this.lastPoint=qn.lastPoint||new pn,this.lineDashOffset=qn.lineDashOffset||0,this.lineDash=qn.lineDash||[],this.margin=qn.margin||[0,0,0,0],this.prevPageLastElemOffset=qn.prevPageLastElemOffset||0,this.ignoreClearRect=typeof qn.ignoreClearRect!="boolean"||qn.ignoreClearRect,this};_e.events.push(["initialized",function(){this.context2d=new En(this),e=this.internal.f2,un=this.internal.getCoordinateString,dn=this.internal.getVerticalCoordinateString,hn=this.internal.getHorizontalCoordinate,fn=this.internal.getVerticalCoordinate,pn=this.internal.Point,mn=this.internal.Rectangle,gn=this.internal.Matrix,yn=new xn}]);var En=function(qn){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var On=qn;Object.defineProperty(this,"pdf",{get:function(){return On}});var Un=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Un},set:function(Ar){Un=!!Ar}});var Yn=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Yn},set:function(Ar){Yn=!!Ar}});var er=0;Object.defineProperty(this,"posX",{get:function(){return er},set:function(Ar){isNaN(Ar)||(er=Ar)}});var Zn=0;Object.defineProperty(this,"posY",{get:function(){return Zn},set:function(Ar){isNaN(Ar)||(Zn=Ar)}}),Object.defineProperty(this,"margin",{get:function(){return yn.margin},set:function(Ar){var or;typeof Ar=="number"?or=[Ar,Ar,Ar,Ar]:((or=new Array(4))[0]=Ar[0],or[1]=Ar.length>=2?Ar[1]:or[0],or[2]=Ar.length>=3?Ar[2]:or[0],or[3]=Ar.length>=4?Ar[3]:or[1]),yn.margin=or}});var ir=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ir},set:function(Ar){ir=Ar}});var fr=0;Object.defineProperty(this,"lastBreak",{get:function(){return fr},set:function(Ar){fr=Ar}});var br=[];Object.defineProperty(this,"pageBreaks",{get:function(){return br},set:function(Ar){br=Ar}}),Object.defineProperty(this,"ctx",{get:function(){return yn},set:function(Ar){Ar instanceof xn&&(yn=Ar)}}),Object.defineProperty(this,"path",{get:function(){return yn.path},set:function(Ar){yn.path=Ar}});var Tr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Tr},set:function(Ar){Tr=Ar}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ar){var or;or=bn(Ar),this.ctx.fillStyle=or.style,this.ctx.isFillTransparent=or.a===0,this.ctx.fillOpacity=or.a,this.pdf.setFillColor(or.r,or.g,or.b,{a:or.a}),this.pdf.setTextColor(or.r,or.g,or.b,{a:or.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ar){var or=bn(Ar);this.ctx.strokeStyle=or.style,this.ctx.isStrokeTransparent=or.a===0,this.ctx.strokeOpacity=or.a,or.a===0?this.pdf.setDrawColor(255,255,255):(or.a,this.pdf.setDrawColor(or.r,or.g,or.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ar){["butt","round","square"].indexOf(Ar)!==-1&&(this.ctx.lineCap=Ar,this.pdf.setLineCap(Ar))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ar){isNaN(Ar)||(this.ctx.lineWidth=Ar,this.pdf.setLineWidth(Ar))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ar){["bevel","round","miter"].indexOf(Ar)!==-1&&(this.ctx.lineJoin=Ar,this.pdf.setLineJoin(Ar))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ar){isNaN(Ar)||(this.ctx.miterLimit=Ar,this.pdf.setMiterLimit(Ar))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ar){this.ctx.textBaseline=Ar}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ar){["right","end","center","left","start"].indexOf(Ar)!==-1&&(this.ctx.textAlign=Ar)}});var Ir=null;function Mr(Ar,or){if(Ir===null){var jr=function(cr){var hr=[];return Object.keys(cr).forEach(function(wr){cr[wr].forEach(function(Pr){var kr=null;switch(Pr){case"bold":kr={family:wr,weight:"bold"};break;case"italic":kr={family:wr,style:"italic"};break;case"bolditalic":kr={family:wr,weight:"bold",style:"italic"};break;case"":case"normal":kr={family:wr}}kr!==null&&(kr.ref={name:wr,style:Pr},hr.push(kr))})}),hr}(Ar.getFontList());Ir=function(cr){for(var hr={},wr=0;wr<cr.length;++wr){var Pr=jt(cr[wr]),kr=Pr.family,Hr=Pr.stretch,Kr=Pr.style,Nr=Pr.weight;hr[kr]=hr[kr]||{},hr[kr][Hr]=hr[kr][Hr]||{},hr[kr][Hr][Kr]=hr[kr][Hr][Kr]||{},hr[kr][Hr][Kr][Nr]=Pr}return hr}(jr.concat(or))}return Ir}var qr=null;Object.defineProperty(this,"fontFaces",{get:function(){return qr},set:function(Ar){Ir=null,qr=Ar}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ar){var or;if(this.ctx.font=Ar,(or=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ar))!==null){var jr=or[1];or[2];var cr=or[3],hr=or[4];or[5];var wr=or[6],Pr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(hr)[2];hr=Math.floor(Pr==="px"?parseFloat(hr)*this.pdf.internal.scaleFactor:Pr==="em"?parseFloat(hr)*this.pdf.getFontSize():parseFloat(hr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(hr);var kr=function(ps){var Cs,as,Ss=[],js=ps.trim();if(js==="")return Wt;if(js in Mt)return[Mt[js]];for(;js!=="";){switch(as=null,Cs=(js=Dt(js)).charAt(0)){case'"':case"'":as=Rt(js.substring(1),Cs);break;default:as=Tt(js)}if(as===null||(Ss.push(as[0]),(js=Dt(as[1]))!==""&&js.charAt(0)!==","))return Wt;js=js.replace(/^,/,"")}return Ss}(wr);if(this.fontFaces){var Hr=qt(Mr(this.pdf,this.fontFaces),kr.map(function(ps){return{family:ps,stretch:"normal",weight:cr,style:jr}}));this.pdf.setFont(Hr.ref.name,Hr.ref.style)}else{var Kr="";(cr==="bold"||parseInt(cr,10)>=700||jr==="bold")&&(Kr="bold"),jr==="italic"&&(Kr+="italic"),Kr.length===0&&(Kr="normal");for(var Nr="",ns={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ts=0;ts<kr.length;ts++){if(this.pdf.internal.getFont(kr[ts],Kr,{noFallback:!0,disableWarning:!0})!==void 0){Nr=kr[ts];break}if(Kr==="bolditalic"&&this.pdf.internal.getFont(kr[ts],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Nr=kr[ts],Kr="bold";else if(this.pdf.internal.getFont(kr[ts],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Nr=kr[ts],Kr="normal";break}}if(Nr===""){for(var Ps=0;Ps<kr.length;Ps++)if(ns[kr[Ps]]){Nr=ns[kr[Ps]];break}}Nr=Nr===""?"Times":Nr,this.pdf.setFont(Nr,Kr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ar){this.ctx.globalCompositeOperation=Ar}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ar){this.ctx.globalAlpha=Ar}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ar){this.ctx.lineDashOffset=Ar,gr.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ar){this.ctx.lineDash=Ar,gr.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ar){this.ctx.ignoreClearRect=!!Ar}})};En.prototype.setLineDash=function(qn){this.lineDash=qn},En.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},En.prototype.fill=function(){$n.call(this,"fill",!1)},En.prototype.stroke=function(){$n.call(this,"stroke",!1)},En.prototype.beginPath=function(){this.path=[{type:"begin"}]},En.prototype.moveTo=function(qn,On){if(isNaN(qn)||isNaN(On))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Un=this.ctx.transform.applyToPoint(new pn(qn,On));this.path.push({type:"mt",x:Un.x,y:Un.y}),this.ctx.lastPoint=new pn(qn,On)},En.prototype.closePath=function(){var qn=new pn(0,0),On=0;for(On=this.path.length-1;On!==-1;On--)if(this.path[On].type==="begin"&&_typeof(this.path[On+1])==="object"&&typeof this.path[On+1].x=="number"){qn=new pn(this.path[On+1].x,this.path[On+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new pn(qn.x,qn.y)},En.prototype.lineTo=function(qn,On){if(isNaN(qn)||isNaN(On))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Un=this.ctx.transform.applyToPoint(new pn(qn,On));this.path.push({type:"lt",x:Un.x,y:Un.y}),this.ctx.lastPoint=new pn(Un.x,Un.y)},En.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$n.call(this,null,!0)},En.prototype.quadraticCurveTo=function(qn,On,Un,Yn){if(isNaN(Un)||isNaN(Yn)||isNaN(qn)||isNaN(On))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var er=this.ctx.transform.applyToPoint(new pn(Un,Yn)),Zn=this.ctx.transform.applyToPoint(new pn(qn,On));this.path.push({type:"qct",x1:Zn.x,y1:Zn.y,x:er.x,y:er.y}),this.ctx.lastPoint=new pn(er.x,er.y)},En.prototype.bezierCurveTo=function(qn,On,Un,Yn,er,Zn){if(isNaN(er)||isNaN(Zn)||isNaN(qn)||isNaN(On)||isNaN(Un)||isNaN(Yn))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ir=this.ctx.transform.applyToPoint(new pn(er,Zn)),fr=this.ctx.transform.applyToPoint(new pn(qn,On)),br=this.ctx.transform.applyToPoint(new pn(Un,Yn));this.path.push({type:"bct",x1:fr.x,y1:fr.y,x2:br.x,y2:br.y,x:ir.x,y:ir.y}),this.ctx.lastPoint=new pn(ir.x,ir.y)},En.prototype.arc=function(qn,On,Un,Yn,er,Zn){if(isNaN(qn)||isNaN(On)||isNaN(Un)||isNaN(Yn)||isNaN(er))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Zn=!!Zn,!this.ctx.transform.isIdentity){var ir=this.ctx.transform.applyToPoint(new pn(qn,On));qn=ir.x,On=ir.y;var fr=this.ctx.transform.applyToPoint(new pn(0,Un)),br=this.ctx.transform.applyToPoint(new pn(0,0));Un=Math.sqrt(Math.pow(fr.x-br.x,2)+Math.pow(fr.y-br.y,2))}Math.abs(er-Yn)>=2*Math.PI&&(Yn=0,er=2*Math.PI),this.path.push({type:"arc",x:qn,y:On,radius:Un,startAngle:Yn,endAngle:er,counterclockwise:Zn})},En.prototype.arcTo=function(qn,On,Un,Yn,er){throw new Error("arcTo not implemented.")},En.prototype.rect=function(qn,On,Un,Yn){if(isNaN(qn)||isNaN(On)||isNaN(Un)||isNaN(Yn))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(qn,On),this.lineTo(qn+Un,On),this.lineTo(qn+Un,On+Yn),this.lineTo(qn,On+Yn),this.lineTo(qn,On),this.lineTo(qn+Un,On),this.lineTo(qn,On)},En.prototype.fillRect=function(qn,On,Un,Yn){if(isNaN(qn)||isNaN(On)||isNaN(Un)||isNaN(Yn))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!vn.call(this)){var er={};this.lineCap!=="butt"&&(er.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(er.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(qn,On,Un,Yn),this.fill(),er.hasOwnProperty("lineCap")&&(this.lineCap=er.lineCap),er.hasOwnProperty("lineJoin")&&(this.lineJoin=er.lineJoin)}},En.prototype.strokeRect=function(qn,On,Un,Yn){if(isNaN(qn)||isNaN(On)||isNaN(Un)||isNaN(Yn))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Pn.call(this)||(this.beginPath(),this.rect(qn,On,Un,Yn),this.stroke())},En.prototype.clearRect=function(qn,On,Un,Yn){if(isNaN(qn)||isNaN(On)||isNaN(Un)||isNaN(Yn))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(qn,On,Un,Yn))},En.prototype.save=function(qn){qn=typeof qn!="boolean"||qn;for(var On=this.pdf.internal.getCurrentPageInfo().pageNumber,Un=0;Un<this.pdf.internal.getNumberOfPages();Un++)this.pdf.setPage(Un+1),this.pdf.internal.out("q");if(this.pdf.setPage(On),qn){this.ctx.fontSize=this.pdf.internal.getFontSize();var Yn=new xn(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Yn}},En.prototype.restore=function(qn){qn=typeof qn!="boolean"||qn;for(var On=this.pdf.internal.getCurrentPageInfo().pageNumber,Un=0;Un<this.pdf.internal.getNumberOfPages();Un++)this.pdf.setPage(Un+1),this.pdf.internal.out("Q");this.pdf.setPage(On),qn&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},En.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var bn=function(qn){var On,Un,Yn,er;if(qn.isCanvasGradient===!0&&(qn=qn.getColor()),!qn)return{r:0,g:0,b:0,a:0,style:qn};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(qn))On=0,Un=0,Yn=0,er=0;else{var Zn=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(qn);if(Zn!==null)On=parseInt(Zn[1]),Un=parseInt(Zn[2]),Yn=parseInt(Zn[3]),er=1;else if((Zn=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(qn))!==null)On=parseInt(Zn[1]),Un=parseInt(Zn[2]),Yn=parseInt(Zn[3]),er=parseFloat(Zn[4]);else{if(er=1,typeof qn=="string"&&qn.charAt(0)!=="#"){var ir=new f(qn);qn=ir.ok?ir.toHex():"#000000"}qn.length===4?(On=qn.substring(1,2),On+=On,Un=qn.substring(2,3),Un+=Un,Yn=qn.substring(3,4),Yn+=Yn):(On=qn.substring(1,3),Un=qn.substring(3,5),Yn=qn.substring(5,7)),On=parseInt(On,16),Un=parseInt(Un,16),Yn=parseInt(Yn,16)}}return{r:On,g:Un,b:Yn,a:er,style:qn}},vn=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Pn=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};En.prototype.fillText=function(qn,On,Un,Yn){if(isNaN(On)||isNaN(Un)||typeof qn!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Yn=isNaN(Yn)?void 0:Yn,!vn.call(this)){var er=tr(this.ctx.transform.rotation),Zn=this.ctx.transform.scaleX;Mn.call(this,{text:qn,x:On,y:Un,scale:Zn,angle:er,align:this.textAlign,maxWidth:Yn})}},En.prototype.strokeText=function(qn,On,Un,Yn){if(isNaN(On)||isNaN(Un)||typeof qn!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Pn.call(this)){Yn=isNaN(Yn)?void 0:Yn;var er=tr(this.ctx.transform.rotation),Zn=this.ctx.transform.scaleX;Mn.call(this,{text:qn,x:On,y:Un,scale:Zn,renderingMode:"stroke",angle:er,align:this.textAlign,maxWidth:Yn})}},En.prototype.measureText=function(qn){if(typeof qn!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var On=this.pdf,Un=this.pdf.internal.scaleFactor,Yn=On.internal.getFontSize(),er=On.getStringUnitWidth(qn)*Yn/On.internal.scaleFactor,Zn=function(ir){var fr=(ir=ir||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fr}}),this};return new Zn({width:er*=Math.round(96*Un/72*1e4)/1e4})},En.prototype.scale=function(qn,On){if(isNaN(qn)||isNaN(On))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Un=new gn(qn,0,0,On,0,0);this.ctx.transform=this.ctx.transform.multiply(Un)},En.prototype.rotate=function(qn){if(isNaN(qn))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var On=new gn(Math.cos(qn),Math.sin(qn),-Math.sin(qn),Math.cos(qn),0,0);this.ctx.transform=this.ctx.transform.multiply(On)},En.prototype.translate=function(qn,On){if(isNaN(qn)||isNaN(On))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Un=new gn(1,0,0,1,qn,On);this.ctx.transform=this.ctx.transform.multiply(Un)},En.prototype.transform=function(qn,On,Un,Yn,er,Zn){if(isNaN(qn)||isNaN(On)||isNaN(Un)||isNaN(Yn)||isNaN(er)||isNaN(Zn))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ir=new gn(qn,On,Un,Yn,er,Zn);this.ctx.transform=this.ctx.transform.multiply(ir)},En.prototype.setTransform=function(qn,On,Un,Yn,er,Zn){qn=isNaN(qn)?1:qn,On=isNaN(On)?0:On,Un=isNaN(Un)?0:Un,Yn=isNaN(Yn)?1:Yn,er=isNaN(er)?0:er,Zn=isNaN(Zn)?0:Zn,this.ctx.transform=new gn(qn,On,Un,Yn,er,Zn)};var Tn=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};En.prototype.drawImage=function(qn,On,Un,Yn,er,Zn,ir,fr,br){var Tr=this.pdf.getImageProperties(qn),Ir=1,Mr=1,qr=1,Ar=1;Yn!==void 0&&fr!==void 0&&(qr=fr/Yn,Ar=br/er,Ir=Tr.width/Yn*fr/Yn,Mr=Tr.height/er*br/er),Zn===void 0&&(Zn=On,ir=Un,On=0,Un=0),Yn!==void 0&&fr===void 0&&(fr=Yn,br=er),Yn===void 0&&fr===void 0&&(fr=Tr.width,br=Tr.height);for(var or,jr=this.ctx.transform.decompose(),cr=tr(jr.rotate.shx),hr=new gn,wr=(hr=(hr=(hr=hr.multiply(jr.translate)).multiply(jr.skew)).multiply(jr.scale)).applyToRectangle(new mn(Zn-On*qr,ir-Un*Ar,Yn*Ir,er*Mr)),Pr=In.call(this,wr),kr=[],Hr=0;Hr<Pr.length;Hr+=1)kr.indexOf(Pr[Hr])===-1&&kr.push(Pr[Hr]);if(Dn(kr),this.autoPaging)for(var Kr=kr[0],Nr=kr[kr.length-1],ns=Kr;ns<Nr+1;ns++){this.pdf.setPage(ns);var ts=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ps=ns===1?this.posY+this.margin[0]:this.margin[0],ps=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Cs=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],as=ns===1?0:ps+(ns-2)*Cs;if(this.ctx.clip_path.length!==0){var Ss=this.path;or=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Sn(or,this.posX+this.margin[3],-as+Ps+this.ctx.prevPageLastElemOffset),Fn.call(this,"fill",!0),this.path=Ss}var js=JSON.parse(JSON.stringify(wr));js=Sn([js],this.posX+this.margin[3],-as+Ps+this.ctx.prevPageLastElemOffset)[0];var Bs=(ns>Kr||ns<Nr)&&Tn.call(this);Bs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ts,Cs,null).clip().discardPath()),this.pdf.addImage(qn,"JPEG",js.x,js.y,js.w,js.h,null,null,cr),Bs&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(qn,"JPEG",wr.x,wr.y,wr.w,wr.h,null,null,cr)};var In=function(qn,On,Un){var Yn=[];On=On||this.pdf.internal.pageSize.width,Un=Un||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var er=this.posY+this.ctx.prevPageLastElemOffset;switch(qn.type){default:case"mt":case"lt":Yn.push(Math.floor((qn.y+er)/Un)+1);break;case"arc":Yn.push(Math.floor((qn.y+er-qn.radius)/Un)+1),Yn.push(Math.floor((qn.y+er+qn.radius)/Un)+1);break;case"qct":var Zn=Jn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,qn.x1,qn.y1,qn.x,qn.y);Yn.push(Math.floor((Zn.y+er)/Un)+1),Yn.push(Math.floor((Zn.y+Zn.h+er)/Un)+1);break;case"bct":var ir=ar(this.ctx.lastPoint.x,this.ctx.lastPoint.y,qn.x1,qn.y1,qn.x2,qn.y2,qn.x,qn.y);Yn.push(Math.floor((ir.y+er)/Un)+1),Yn.push(Math.floor((ir.y+ir.h+er)/Un)+1);break;case"rect":Yn.push(Math.floor((qn.y+er)/Un)+1),Yn.push(Math.floor((qn.y+qn.h+er)/Un)+1)}for(var fr=0;fr<Yn.length;fr+=1)for(;this.pdf.internal.getNumberOfPages()<Yn[fr];)Rn.call(this);return Yn},Rn=function(){var qn=this.fillStyle,On=this.strokeStyle,Un=this.font,Yn=this.lineCap,er=this.lineWidth,Zn=this.lineJoin;this.pdf.addPage(),this.fillStyle=qn,this.strokeStyle=On,this.font=Un,this.lineCap=Yn,this.lineWidth=er,this.lineJoin=Zn},Sn=function(qn,On,Un){for(var Yn=0;Yn<qn.length;Yn++)switch(qn[Yn].type){case"bct":qn[Yn].x2+=On,qn[Yn].y2+=Un;case"qct":qn[Yn].x1+=On,qn[Yn].y1+=Un;case"mt":case"lt":case"arc":default:qn[Yn].x+=On,qn[Yn].y+=Un}return qn},Dn=function(qn){return qn.sort(function(On,Un){return On-Un})},$n=function(qn,On){for(var Un,Yn,er=this.fillStyle,Zn=this.strokeStyle,ir=this.lineCap,fr=this.lineWidth,br=Math.abs(fr*this.ctx.transform.scaleX),Tr=this.lineJoin,Ir=JSON.parse(JSON.stringify(this.path)),Mr=JSON.parse(JSON.stringify(this.path)),qr=[],Ar=0;Ar<Mr.length;Ar++)if(Mr[Ar].x!==void 0)for(var or=In.call(this,Mr[Ar]),jr=0;jr<or.length;jr+=1)qr.indexOf(or[jr])===-1&&qr.push(or[jr]);for(var cr=0;cr<qr.length;cr++)for(;this.pdf.internal.getNumberOfPages()<qr[cr];)Rn.call(this);if(Dn(qr),this.autoPaging)for(var hr=qr[0],wr=qr[qr.length-1],Pr=hr;Pr<wr+1;Pr++){this.pdf.setPage(Pr),this.fillStyle=er,this.strokeStyle=Zn,this.lineCap=ir,this.lineWidth=br,this.lineJoin=Tr;var kr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Hr=Pr===1?this.posY+this.margin[0]:this.margin[0],Kr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ns=Pr===1?0:Kr+(Pr-2)*Nr;if(this.ctx.clip_path.length!==0){var ts=this.path;Un=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Sn(Un,this.posX+this.margin[3],-ns+Hr+this.ctx.prevPageLastElemOffset),Fn.call(this,qn,!0),this.path=ts}if(Yn=JSON.parse(JSON.stringify(Ir)),this.path=Sn(Yn,this.posX+this.margin[3],-ns+Hr+this.ctx.prevPageLastElemOffset),On===!1||Pr===0){var Ps=(Pr>hr||Pr<wr)&&Tn.call(this);Ps&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kr,Nr,null).clip().discardPath()),Fn.call(this,qn,On),Ps&&this.pdf.restoreGraphicsState()}this.lineWidth=fr}else this.lineWidth=br,Fn.call(this,qn,On),this.lineWidth=fr;this.path=Ir},Fn=function(qn,On){if((qn!=="stroke"||On||!Pn.call(this))&&(qn==="stroke"||On||!vn.call(this))){for(var Un,Yn,er=[],Zn=this.path,ir=0;ir<Zn.length;ir++){var fr=Zn[ir];switch(fr.type){case"begin":er.push({begin:!0});break;case"close":er.push({close:!0});break;case"mt":er.push({start:fr,deltas:[],abs:[]});break;case"lt":var br=er.length;if(Zn[ir-1]&&!isNaN(Zn[ir-1].x)&&(Un=[fr.x-Zn[ir-1].x,fr.y-Zn[ir-1].y],br>0)){for(;br>=0;br--)if(er[br-1].close!==!0&&er[br-1].begin!==!0){er[br-1].deltas.push(Un),er[br-1].abs.push(fr);break}}break;case"bct":Un=[fr.x1-Zn[ir-1].x,fr.y1-Zn[ir-1].y,fr.x2-Zn[ir-1].x,fr.y2-Zn[ir-1].y,fr.x-Zn[ir-1].x,fr.y-Zn[ir-1].y],er[er.length-1].deltas.push(Un);break;case"qct":var Tr=Zn[ir-1].x+2/3*(fr.x1-Zn[ir-1].x),Ir=Zn[ir-1].y+2/3*(fr.y1-Zn[ir-1].y),Mr=fr.x+2/3*(fr.x1-fr.x),qr=fr.y+2/3*(fr.y1-fr.y),Ar=fr.x,or=fr.y;Un=[Tr-Zn[ir-1].x,Ir-Zn[ir-1].y,Mr-Zn[ir-1].x,qr-Zn[ir-1].y,Ar-Zn[ir-1].x,or-Zn[ir-1].y],er[er.length-1].deltas.push(Un);break;case"arc":er.push({deltas:[],abs:[],arc:!0}),Array.isArray(er[er.length-1].abs)&&er[er.length-1].abs.push(fr)}}Yn=On?null:qn==="stroke"?"stroke":"fill";for(var jr=!1,cr=0;cr<er.length;cr++)if(er[cr].arc)for(var hr=er[cr].abs,wr=0;wr<hr.length;wr++){var Pr=hr[wr];Pr.type==="arc"?Nn.call(this,Pr.x,Pr.y,Pr.radius,Pr.startAngle,Pr.endAngle,Pr.counterclockwise,void 0,On,!jr):Bn.call(this,Pr.x,Pr.y),jr=!0}else if(er[cr].close===!0)this.pdf.internal.out("h"),jr=!1;else if(er[cr].begin!==!0){var kr=er[cr].start.x,Hr=er[cr].start.y;Xn.call(this,er[cr].deltas,kr,Hr),jr=!0}Yn&&Ln.call(this,Yn),On&&zn.call(this)}},Gn=function(qn){var On=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Un=On*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return qn-Un;case"top":return qn+On-Un;case"hanging":return qn+On-2*Un;case"middle":return qn+On/2-Un;case"ideographic":return qn;case"alphabetic":default:return qn}},kn=function(qn){return qn+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};En.prototype.createLinearGradient=function(){var qn=function(){};return qn.colorStops=[],qn.addColorStop=function(On,Un){this.colorStops.push([On,Un])},qn.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},qn.isCanvasGradient=!0,qn},En.prototype.createPattern=function(){return this.createLinearGradient()},En.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Nn=function(qn,On,Un,Yn,er,Zn,ir,fr,br){for(var Tr=sr.call(this,Un,Yn,er,Zn),Ir=0;Ir<Tr.length;Ir++){var Mr=Tr[Ir];Ir===0&&(br?Cn.call(this,Mr.x1+qn,Mr.y1+On):Bn.call(this,Mr.x1+qn,Mr.y1+On)),nr.call(this,qn,On,Mr.x2,Mr.y2,Mr.x3,Mr.y3,Mr.x4,Mr.y4)}fr?zn.call(this):Ln.call(this,ir)},Ln=function(qn){switch(qn){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},zn=function(){this.pdf.clip(),this.pdf.discardPath()},Cn=function(qn,On){this.pdf.internal.out(un(qn)+" "+dn(On)+" m")},Mn=function(qn){var On;switch(qn.align){case"right":case"end":On="right";break;case"center":On="center";break;case"left":case"start":default:On="left"}var Un=this.pdf.getTextDimensions(qn.text),Yn=Gn.call(this,qn.y),er=kn.call(this,Yn)-Un.h,Zn=this.ctx.transform.applyToPoint(new pn(qn.x,Yn)),ir=this.ctx.transform.decompose(),fr=new gn;fr=(fr=(fr=fr.multiply(ir.translate)).multiply(ir.skew)).multiply(ir.scale);for(var br,Tr,Ir,Mr=this.ctx.transform.applyToRectangle(new mn(qn.x,Yn,Un.w,Un.h)),qr=fr.applyToRectangle(new mn(qn.x,er,Un.w,Un.h)),Ar=In.call(this,qr),or=[],jr=0;jr<Ar.length;jr+=1)or.indexOf(Ar[jr])===-1&&or.push(Ar[jr]);if(Dn(or),this.autoPaging)for(var cr=or[0],hr=or[or.length-1],wr=cr;wr<hr+1;wr++){this.pdf.setPage(wr);var Pr=wr===1?this.posY+this.margin[0]:this.margin[0],kr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Hr=this.pdf.internal.pageSize.height-this.margin[2],Kr=Hr-this.margin[0],Nr=this.pdf.internal.pageSize.width-this.margin[1],ns=Nr-this.margin[3],ts=wr===1?0:kr+(wr-2)*Kr;if(this.ctx.clip_path.length!==0){var Ps=this.path;br=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Sn(br,this.posX+this.margin[3],-1*ts+Pr),Fn.call(this,"fill",!0),this.path=Ps}var ps=Sn([JSON.parse(JSON.stringify(qr))],this.posX+this.margin[3],-ts+Pr+this.ctx.prevPageLastElemOffset)[0];qn.scale>=.01&&(Tr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Tr*qn.scale),Ir=this.lineWidth,this.lineWidth=Ir*qn.scale);var Cs=this.autoPaging!=="text";if(Cs||ps.y+ps.h<=Hr){if(Cs||ps.y>=Pr&&ps.x<=Nr){var as=Cs?qn.text:this.pdf.splitTextToSize(qn.text,qn.maxWidth||Nr-ps.x)[0],Ss=Sn([JSON.parse(JSON.stringify(Mr))],this.posX+this.margin[3],-ts+Pr+this.ctx.prevPageLastElemOffset)[0],js=Cs&&(wr>cr||wr<hr)&&Tn.call(this);js&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ns,Kr,null).clip().discardPath()),this.pdf.text(as,Ss.x,Ss.y,{angle:qn.angle,align:On,renderingMode:qn.renderingMode}),js&&this.pdf.restoreGraphicsState()}}else ps.y<Hr&&(this.ctx.prevPageLastElemOffset+=Hr-ps.y);qn.scale>=.01&&(this.pdf.setFontSize(Tr),this.lineWidth=Ir)}else qn.scale>=.01&&(Tr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Tr*qn.scale),Ir=this.lineWidth,this.lineWidth=Ir*qn.scale),this.pdf.text(qn.text,Zn.x+this.posX,Zn.y+this.posY,{angle:qn.angle,align:On,renderingMode:qn.renderingMode,maxWidth:qn.maxWidth}),qn.scale>=.01&&(this.pdf.setFontSize(Tr),this.lineWidth=Ir)},Bn=function(qn,On,Un,Yn){Un=Un||0,Yn=Yn||0,this.pdf.internal.out(un(qn+Un)+" "+dn(On+Yn)+" l")},Xn=function(qn,On,Un){return this.pdf.lines(qn,On,Un,null,null)},nr=function(qn,On,Un,Yn,er,Zn,ir,fr){this.pdf.internal.out([e(hn(Un+qn)),e(fn(Yn+On)),e(hn(er+qn)),e(fn(Zn+On)),e(hn(ir+qn)),e(fn(fr+On)),"c"].join(" "))},sr=function(qn,On,Un,Yn){for(var er=2*Math.PI,Zn=Math.PI/2;On>Un;)On-=er;var ir=Math.abs(Un-On);ir<er&&Yn&&(ir=er-ir);for(var fr=[],br=Yn?-1:1,Tr=On;ir>1e-5;){var Ir=Tr+br*Math.min(ir,Zn);fr.push(lr.call(this,qn,Tr,Ir)),ir-=Math.abs(Ir-Tr),Tr=Ir}return fr},lr=function(qn,On,Un){var Yn=(Un-On)/2,er=qn*Math.cos(Yn),Zn=qn*Math.sin(Yn),ir=er,fr=-Zn,br=ir*ir+fr*fr,Tr=br+ir*er+fr*Zn,Ir=4/3*(Math.sqrt(2*br*Tr)-Tr)/(ir*Zn-fr*er),Mr=ir-Ir*fr,qr=fr+Ir*ir,Ar=Mr,or=-qr,jr=Yn+On,cr=Math.cos(jr),hr=Math.sin(jr);return{x1:qn*Math.cos(On),y1:qn*Math.sin(On),x2:Mr*cr-qr*hr,y2:Mr*hr+qr*cr,x3:Ar*cr-or*hr,y3:Ar*hr+or*cr,x4:qn*Math.cos(Un),y4:qn*Math.sin(Un)}},tr=function(qn){return 180*qn/Math.PI},Jn=function(qn,On,Un,Yn,er,Zn){var ir=qn+.5*(Un-qn),fr=On+.5*(Yn-On),br=er+.5*(Un-er),Tr=Zn+.5*(Yn-Zn),Ir=Math.min(qn,er,ir,br),Mr=Math.max(qn,er,ir,br),qr=Math.min(On,Zn,fr,Tr),Ar=Math.max(On,Zn,fr,Tr);return new mn(Ir,qr,Mr-Ir,Ar-qr)},ar=function(qn,On,Un,Yn,er,Zn,ir,fr){var br,Tr,Ir,Mr,qr,Ar,or,jr,cr,hr,wr,Pr,kr,Hr,Kr=Un-qn,Nr=Yn-On,ns=er-Un,ts=Zn-Yn,Ps=ir-er,ps=fr-Zn;for(Tr=0;Tr<41;Tr++)cr=(or=(Ir=qn+(br=Tr/40)*Kr)+br*((qr=Un+br*ns)-Ir))+br*(qr+br*(er+br*Ps-qr)-or),hr=(jr=(Mr=On+br*Nr)+br*((Ar=Yn+br*ts)-Mr))+br*(Ar+br*(Zn+br*ps-Ar)-jr),Tr==0?(wr=cr,Pr=hr,kr=cr,Hr=hr):(wr=Math.min(wr,cr),Pr=Math.min(Pr,hr),kr=Math.max(kr,cr),Hr=Math.max(Hr,hr));return new mn(Math.round(wr),Math.round(Pr),Math.round(kr-wr),Math.round(Hr-Pr))},gr=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var qn,On,Un=(qn=this.ctx.lineDash,On=this.ctx.lineDashOffset,JSON.stringify({lineDash:qn,lineDashOffset:On}));this.prevLineDash!==Un&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Un)}}})(E.API),function(_e){var e=function(fn){var pn,mn,gn,yn,xn,En,bn,vn,Pn,Tn;for(mn=[],gn=0,yn=(fn+=pn="\0\0\0\0".slice(fn.length%4||4)).length;yn>gn;gn+=4)(xn=(fn.charCodeAt(gn)<<24)+(fn.charCodeAt(gn+1)<<16)+(fn.charCodeAt(gn+2)<<8)+fn.charCodeAt(gn+3))!==0?(En=(xn=((xn=((xn=((xn=(xn-(Tn=xn%85))/85)-(Pn=xn%85))/85)-(vn=xn%85))/85)-(bn=xn%85))/85)%85,mn.push(En+33,bn+33,vn+33,Pn+33,Tn+33)):mn.push(122);return function(In,Rn){for(var Sn=Rn;Sn>0;Sn--)In.pop()}(mn,pn.length),String.fromCharCode.apply(String,mn)+"~>"},un=function(fn){var pn,mn,gn,yn,xn,En=String,bn="length",vn=255,Pn="charCodeAt",Tn="slice",In="replace";for(fn[Tn](-2),fn=fn[Tn](0,-2)[In](/\s/g,"")[In]("z","!!!!!"),gn=[],yn=0,xn=(fn+=pn="uuuuu"[Tn](fn[bn]%5||5))[bn];xn>yn;yn+=5)mn=52200625*(fn[Pn](yn)-33)+614125*(fn[Pn](yn+1)-33)+7225*(fn[Pn](yn+2)-33)+85*(fn[Pn](yn+3)-33)+(fn[Pn](yn+4)-33),gn.push(vn&mn>>24,vn&mn>>16,vn&mn>>8,vn&mn);return function(Rn,Sn){for(var Dn=Sn;Dn>0;Dn--)Rn.pop()}(gn,pn[bn]),En.fromCharCode.apply(En,gn)},dn=function(fn){var pn=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((fn=fn.replace(/\s/g,"")).indexOf(">")!==-1&&(fn=fn.substr(0,fn.indexOf(">"))),fn.length%2&&(fn+="0"),pn.test(fn)===!1)return"";for(var mn="",gn=0;gn<fn.length;gn+=2)mn+=String.fromCharCode("0x"+(fn[gn]+fn[gn+1]));return mn},hn=function(fn){for(var pn=new Uint8Array(fn.length),mn=fn.length;mn--;)pn[mn]=fn.charCodeAt(mn);return fn=(pn=zlibSync(pn)).reduce(function(gn,yn){return gn+String.fromCharCode(yn)},"")};_e.processDataByFilters=function(fn,pn){var mn=0,gn=fn||"",yn=[];for(typeof(pn=pn||[])=="string"&&(pn=[pn]),mn=0;mn<pn.length;mn+=1)switch(pn[mn]){case"ASCII85Decode":case"/ASCII85Decode":gn=un(gn),yn.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":gn=e(gn),yn.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":gn=dn(gn),yn.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":gn=gn.split("").map(function(xn){return("0"+xn.charCodeAt().toString(16)).slice(-2)}).join("")+">",yn.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":gn=hn(gn),yn.push("/FlateDecode");break;default:throw new Error('The filter: "'+pn[mn]+'" is not implemented')}return{data:gn,reverseChain:yn.reverse().join(" ")}}}(E.API),function(_e){_e.loadFile=function(e,un,dn){return function(hn,fn,pn){fn=fn!==!1,pn=typeof pn=="function"?pn:function(){};var mn=void 0;try{mn=function(gn,yn,xn){var En=new XMLHttpRequest,bn=0,vn=function(Pn){var Tn=Pn.length,In=[],Rn=String.fromCharCode;for(bn=0;bn<Tn;bn+=1)In.push(Rn(255&Pn.charCodeAt(bn)));return In.join("")};if(En.open("GET",gn,!yn),En.overrideMimeType("text/plain; charset=x-user-defined"),yn===!1&&(En.onload=function(){En.status===200?xn(vn(this.responseText)):xn(void 0)}),En.send(null),yn&&En.status===200)return vn(En.responseText)}(hn,fn,pn)}catch{}return mn}(e,un,dn)},_e.loadImageFile=_e.loadFile}(E.API),function(_e){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(pn){return Promise.reject(new Error("Could not load html2canvas: "+pn))}).then(function(pn){return pn.default?pn.default:pn})}function un(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(pn){return Promise.reject(new Error("Could not load dompurify: "+pn))}).then(function(pn){return pn.default?pn.default:pn})}var dn=function(pn){var mn=_typeof(pn);return mn==="undefined"?"undefined":mn==="string"||pn instanceof String?"string":mn==="number"||pn instanceof Number?"number":mn==="function"||pn instanceof Function?"function":pn&&pn.constructor===Array?"array":pn&&pn.nodeType===1?"element":mn==="object"?"object":"unknown"},hn=function(pn,mn){var gn=document.createElement(pn);for(var yn in mn.className&&(gn.className=mn.className),mn.innerHTML&&mn.dompurify&&(gn.innerHTML=mn.dompurify.sanitize(mn.innerHTML)),mn.style)gn.style[yn]=mn.style[yn];return gn},fn=function pn(mn){var gn=Object.assign(pn.convert(Promise.resolve()),JSON.parse(JSON.stringify(pn.template))),yn=pn.convert(Promise.resolve(),gn);return yn=(yn=yn.setProgress(1,pn,1,[pn])).set(mn)};(fn.prototype=Object.create(Promise.prototype)).constructor=fn,fn.convert=function(pn,mn){return pn.__proto__=mn||fn.prototype,pn},fn.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},fn.prototype.from=function(pn,mn){return this.then(function(){switch(mn=mn||function(gn){switch(dn(gn)){case"string":return"string";case"element":return gn.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(pn)){case"string":return this.then(un).then(function(gn){return this.set({src:hn("div",{innerHTML:pn,dompurify:gn})})});case"element":return this.set({src:pn});case"canvas":return this.set({canvas:pn});case"img":return this.set({img:pn});default:return this.error("Unknown source type.")}})},fn.prototype.to=function(pn){switch(pn){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},fn.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var pn={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},mn=function gn(yn,xn){for(var En=yn.nodeType===3?document.createTextNode(yn.nodeValue):yn.cloneNode(!1),bn=yn.firstChild;bn;bn=bn.nextSibling)xn!==!0&&bn.nodeType===1&&bn.nodeName==="SCRIPT"||En.appendChild(gn(bn,xn));return yn.nodeType===1&&(yn.nodeName==="CANVAS"?(En.width=yn.width,En.height=yn.height,En.getContext("2d").drawImage(yn,0,0)):yn.nodeName!=="TEXTAREA"&&yn.nodeName!=="SELECT"||(En.value=yn.value),En.addEventListener("load",function(){En.scrollTop=yn.scrollTop,En.scrollLeft=yn.scrollLeft},!0)),En}(this.prop.src,this.opt.html2canvas.javascriptEnabled);mn.tagName==="BODY"&&(pn.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=hn("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=hn("div",{className:"html2pdf__container",style:pn}),this.prop.container.appendChild(mn),this.prop.container.firstChild.appendChild(hn("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},fn.prototype.toCanvas=function(){var pn=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(pn).then(e).then(function(mn){var gn=Object.assign({},this.opt.html2canvas);return delete gn.onrendered,mn(this.prop.container,gn)}).then(function(mn){(this.opt.html2canvas.onrendered||function(){})(mn),this.prop.canvas=mn,document.body.removeChild(this.prop.overlay)})},fn.prototype.toContext2d=function(){var pn=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(pn).then(e).then(function(mn){var gn=this.opt.jsPDF,yn=this.opt.fontFaces,xn=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,En=Object.assign({async:!0,allowTaint:!0,scale:xn,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete En.onrendered,gn.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,gn.context2d.posX=this.opt.x,gn.context2d.posY=this.opt.y,gn.context2d.margin=this.opt.margin,gn.context2d.fontFaces=yn,yn)for(var bn=0;bn<yn.length;++bn){var vn=yn[bn],Pn=vn.src.find(function(Tn){return Tn.format==="truetype"});Pn&&gn.addFont(Pn.url,vn.ref.name,vn.ref.style)}return En.windowHeight=En.windowHeight||0,En.windowHeight=En.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):En.windowHeight,gn.context2d.save(!0),mn(this.prop.container,En)}).then(function(mn){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(mn),this.prop.canvas=mn,document.body.removeChild(this.prop.overlay)})},fn.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var pn=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=pn})},fn.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},fn.prototype.output=function(pn,mn,gn){return(gn=gn||"pdf").toLowerCase()==="img"||gn.toLowerCase()==="image"?this.outputImg(pn,mn):this.outputPdf(pn,mn)},fn.prototype.outputPdf=function(pn,mn){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(pn,mn)})},fn.prototype.outputImg=function(pn){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(pn){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+pn+'" is not supported.'}})},fn.prototype.save=function(pn){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(pn?{filename:pn}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},fn.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},fn.prototype.set=function(pn){if(dn(pn)!=="object")return this;var mn=Object.keys(pn||{}).map(function(gn){if(gn in fn.template.prop)return function(){this.prop[gn]=pn[gn]};switch(gn){case"margin":return this.setMargin.bind(this,pn.margin);case"jsPDF":return function(){return this.opt.jsPDF=pn.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,pn.pageSize);default:return function(){this.opt[gn]=pn[gn]}}},this);return this.then(function(){return this.thenList(mn)})},fn.prototype.get=function(pn,mn){return this.then(function(){var gn=pn in fn.template.prop?this.prop[pn]:this.opt[pn];return mn?mn(gn):gn})},fn.prototype.setMargin=function(pn){return this.then(function(){switch(dn(pn)){case"number":pn=[pn,pn,pn,pn];case"array":if(pn.length===2&&(pn=[pn[0],pn[1],pn[0],pn[1]]),pn.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=pn}).then(this.setPageSize)},fn.prototype.setPageSize=function(pn){function mn(gn,yn){return Math.floor(gn*yn/72*96)}return this.then(function(){(pn=pn||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(pn.inner={width:pn.width-this.opt.margin[1]-this.opt.margin[3],height:pn.height-this.opt.margin[0]-this.opt.margin[2]},pn.inner.px={width:mn(pn.inner.width,pn.k),height:mn(pn.inner.height,pn.k)},pn.inner.ratio=pn.inner.height/pn.inner.width),this.prop.pageSize=pn})},fn.prototype.setProgress=function(pn,mn,gn,yn){return pn!=null&&(this.progress.val=pn),mn!=null&&(this.progress.state=mn),gn!=null&&(this.progress.n=gn),yn!=null&&(this.progress.stack=yn),this.progress.ratio=this.progress.val/this.progress.state,this},fn.prototype.updateProgress=function(pn,mn,gn,yn){return this.setProgress(pn?this.progress.val+pn:null,mn||null,gn?this.progress.n+gn:null,yn?this.progress.stack.concat(yn):null)},fn.prototype.then=function(pn,mn){var gn=this;return this.thenCore(pn,mn,function(yn,xn){return gn.updateProgress(null,null,1,[yn]),Promise.prototype.then.call(this,function(En){return gn.updateProgress(null,yn),En}).then(yn,xn).then(function(En){return gn.updateProgress(1),En})})},fn.prototype.thenCore=function(pn,mn,gn){gn=gn||Promise.prototype.then,pn&&(pn=pn.bind(this)),mn&&(mn=mn.bind(this));var yn=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:fn.convert(Object.assign({},this),Promise.prototype),xn=gn.call(yn,pn,mn);return fn.convert(xn,this.__proto__)},fn.prototype.thenExternal=function(pn,mn){return Promise.prototype.then.call(this,pn,mn)},fn.prototype.thenList=function(pn){var mn=this;return pn.forEach(function(gn){mn=mn.thenCore(gn)}),mn},fn.prototype.catch=function(pn){pn&&(pn=pn.bind(this));var mn=Promise.prototype.catch.call(this,pn);return fn.convert(mn,this)},fn.prototype.catchExternal=function(pn){return Promise.prototype.catch.call(this,pn)},fn.prototype.error=function(pn){return this.then(function(){throw new Error(pn)})},fn.prototype.using=fn.prototype.set,fn.prototype.saveAs=fn.prototype.save,fn.prototype.export=fn.prototype.output,fn.prototype.run=fn.prototype.then,E.getPageSize=function(pn,mn,gn){if(_typeof(pn)==="object"){var yn=pn;pn=yn.orientation,mn=yn.unit||mn,gn=yn.format||gn}mn=mn||"mm",gn=gn||"a4",pn=(""+(pn||"P")).toLowerCase();var xn,En=(""+gn).toLowerCase(),bn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(mn){case"pt":xn=1;break;case"mm":xn=72/25.4;break;case"cm":xn=72/2.54;break;case"in":xn=72;break;case"px":xn=.75;break;case"pc":case"em":xn=12;break;case"ex":xn=6;break;default:throw"Invalid unit: "+mn}var vn,Pn=0,Tn=0;if(bn.hasOwnProperty(En))Pn=bn[En][1]/xn,Tn=bn[En][0]/xn;else try{Pn=gn[1],Tn=gn[0]}catch{throw new Error("Invalid format: "+gn)}if(pn==="p"||pn==="portrait")pn="p",Tn>Pn&&(vn=Tn,Tn=Pn,Pn=vn);else{if(pn!=="l"&&pn!=="landscape")throw"Invalid orientation: "+pn;pn="l",Pn>Tn&&(vn=Tn,Tn=Pn,Pn=vn)}return{width:Tn,height:Pn,unit:mn,k:xn,orientation:pn}},_e.html=function(pn,mn){(mn=mn||{}).callback=mn.callback||function(){},mn.html2canvas=mn.html2canvas||{},mn.html2canvas.canvas=mn.html2canvas.canvas||this.canvas,mn.jsPDF=mn.jsPDF||this,mn.fontFaces=mn.fontFaces?mn.fontFaces.map(jt):null;var gn=new fn(mn);return mn.worker?gn:gn.from(pn).doCallback()}}(E.API),E.API.addJS=function(_e){return Ht=_e,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(_e){var e;_e.events.push(["postPutResources",function(){var un=this,dn=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var hn=un.outline.render().split(/\r\n/),fn=0;fn<hn.length;fn++){var pn=hn[fn],mn=dn.exec(pn);if(mn!=null){var gn=mn[1];un.internal.newObjectDeferredBegin(gn,!1)}un.internal.write(pn)}if(this.outline.createNamedDestinations){var yn=this.internal.pages.length,xn=[];for(fn=0;fn<yn;fn++){var En=un.internal.newObject();xn.push(En);var bn=un.internal.getPageInfo(fn+1);un.internal.write("<< /D["+bn.objId+" 0 R /XYZ null null null]>> endobj")}var vn=un.internal.newObject();for(un.internal.write("<< /Names [ "),fn=0;fn<xn.length;fn++)un.internal.write("(page_"+(fn+1)+")"+xn[fn]+" 0 R");un.internal.write(" ] >>","endobj"),e=un.internal.newObject(),un.internal.write("<< /Dests "+vn+" 0 R"),un.internal.write(">>","endobj")}}]),_e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),_e.events.push(["initialized",function(){var un=this;un.outline={createNamedDestinations:!1,root:{children:[]}},un.outline.add=function(dn,hn,fn){var pn={title:hn,options:fn,children:[]};return dn==null&&(dn=this.root),dn.children.push(pn),pn},un.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=un,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},un.outline.genIds_r=function(dn){dn.id=un.internal.newObjectDeferred();for(var hn=0;hn<dn.children.length;hn++)this.genIds_r(dn.children[hn])},un.outline.renderRoot=function(dn){this.objStart(dn),this.line("/Type /Outlines"),dn.children.length>0&&(this.line("/First "+this.makeRef(dn.children[0])),this.line("/Last "+this.makeRef(dn.children[dn.children.length-1]))),this.line("/Count "+this.count_r({count:0},dn)),this.objEnd()},un.outline.renderItems=function(dn){for(var hn=this.ctx.pdf.internal.getVerticalCoordinateString,fn=0;fn<dn.children.length;fn++){var pn=dn.children[fn];this.objStart(pn),this.line("/Title "+this.makeString(pn.title)),this.line("/Parent "+this.makeRef(dn)),fn>0&&this.line("/Prev "+this.makeRef(dn.children[fn-1])),fn<dn.children.length-1&&this.line("/Next "+this.makeRef(dn.children[fn+1])),pn.children.length>0&&(this.line("/First "+this.makeRef(pn.children[0])),this.line("/Last "+this.makeRef(pn.children[pn.children.length-1])));var mn=this.count=this.count_r({count:0},pn);if(mn>0&&this.line("/Count "+mn),pn.options&&pn.options.pageNumber){var gn=un.internal.getPageInfo(pn.options.pageNumber);this.line("/Dest ["+gn.objId+" 0 R /XYZ 0 "+hn(0)+" 0]")}this.objEnd()}for(var yn=0;yn<dn.children.length;yn++)this.renderItems(dn.children[yn])},un.outline.line=function(dn){this.ctx.val+=dn+`\r
`},un.outline.makeRef=function(dn){return dn.id+" 0 R"},un.outline.makeString=function(dn){return"("+un.internal.pdfEscape(dn)+")"},un.outline.objStart=function(dn){this.ctx.val+=`\r
`+dn.id+` 0 obj\r
<<\r
`},un.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},un.outline.count_r=function(dn,hn){for(var fn=0;fn<hn.children.length;fn++)dn.count++,this.count_r(dn,hn.children[fn]);return dn.count}}])}(E.API),function(_e){var e=[192,193,194,195,196,197,198,199];_e.processJPEG=function(un,dn,hn,fn,pn,mn){var gn,yn=this.decode.DCT_DECODE,xn=null;if(typeof un=="string"||this.__addimage__.isArrayBuffer(un)||this.__addimage__.isArrayBufferView(un)){switch(un=pn||un,un=this.__addimage__.isArrayBuffer(un)?new Uint8Array(un):un,(gn=function(En){for(var bn,vn=256*En.charCodeAt(4)+En.charCodeAt(5),Pn=En.length,Tn={width:0,height:0,numcomponents:1},In=4;In<Pn;In+=2){if(In+=vn,e.indexOf(En.charCodeAt(In+1))!==-1){bn=256*En.charCodeAt(In+5)+En.charCodeAt(In+6),Tn={width:256*En.charCodeAt(In+7)+En.charCodeAt(In+8),height:bn,numcomponents:En.charCodeAt(In+9)};break}vn=256*En.charCodeAt(In+2)+En.charCodeAt(In+3)}return Tn}(un=this.__addimage__.isArrayBufferView(un)?this.__addimage__.arrayBufferToBinaryString(un):un)).numcomponents){case 1:mn=this.color_spaces.DEVICE_GRAY;break;case 4:mn=this.color_spaces.DEVICE_CMYK;break;case 3:mn=this.color_spaces.DEVICE_RGB}xn={data:un,width:gn.width,height:gn.height,colorSpace:mn,bitsPerComponent:8,filter:yn,index:dn,alias:hn}}return xn}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var _e,e,un;function dn(fn){var pn,mn,gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn,Sn,Dn;for(this.data=fn,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},En=null;;){switch(pn=this.readUInt32(),Pn=(function(){var $n,Fn;for(Fn=[],$n=0;$n<4;++$n)Fn.push(String.fromCharCode(this.data[this.pos++]));return Fn}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(pn);break;case"fcTL":En&&this.animation.frames.push(En),this.pos+=4,En={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},xn=this.readUInt16(),yn=this.readUInt16()||100,En.delay=1e3*xn/yn,En.disposeOp=this.data[this.pos++],En.blendOp=this.data[this.pos++],En.data=[];break;case"IDAT":case"fdAT":for(Pn==="fdAT"&&(this.pos+=4,pn-=4),fn=(En!=null?En.data:void 0)||this.imgData,Rn=0;0<=pn?Rn<pn:Rn>pn;0<=pn?++Rn:--Rn)fn.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(gn=this.palette.length/3,this.transparency.indexed=this.read(pn),this.transparency.indexed.length>gn)throw new Error("More transparent colors than palette size");if((Tn=gn-this.transparency.indexed.length)>0)for(Sn=0;0<=Tn?Sn<Tn:Sn>Tn;0<=Tn?++Sn:--Sn)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(pn)[0];break;case 2:this.transparency.rgb=this.read(pn)}break;case"tEXt":bn=(In=this.read(pn)).indexOf(0),vn=String.fromCharCode.apply(String,In.slice(0,bn)),this.text[vn]=String.fromCharCode.apply(String,In.slice(bn+1));break;case"IEND":return En&&this.animation.frames.push(En),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Dn=this.colorType)===4||Dn===6,mn=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*mn,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=pn}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}dn.prototype.read=function(fn){var pn,mn;for(mn=[],pn=0;0<=fn?pn<fn:pn>fn;0<=fn?++pn:--pn)mn.push(this.data[this.pos++]);return mn},dn.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},dn.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},dn.prototype.decodePixels=function(fn){var pn=this.pixelBitlength/8,mn=new Uint8Array(this.width*this.height*pn),gn=0,yn=this;if(fn==null&&(fn=this.imgData),fn.length===0)return new Uint8Array(0);function xn(En,bn,vn,Pn){var Tn,In,Rn,Sn,Dn,$n,Fn,Gn,kn,Nn,Ln,zn,Cn,Mn,Bn,Xn,nr,sr,lr,tr,Jn,ar=Math.ceil((yn.width-En)/vn),gr=Math.ceil((yn.height-bn)/Pn),qn=yn.width==ar&&yn.height==gr;for(Mn=pn*ar,zn=qn?mn:new Uint8Array(Mn*gr),$n=fn.length,Cn=0,In=0;Cn<gr&&gn<$n;){switch(fn[gn++]){case 0:for(Sn=nr=0;nr<Mn;Sn=nr+=1)zn[In++]=fn[gn++];break;case 1:for(Sn=sr=0;sr<Mn;Sn=sr+=1)Tn=fn[gn++],Dn=Sn<pn?0:zn[In-pn],zn[In++]=(Tn+Dn)%256;break;case 2:for(Sn=lr=0;lr<Mn;Sn=lr+=1)Tn=fn[gn++],Rn=(Sn-Sn%pn)/pn,Bn=Cn&&zn[(Cn-1)*Mn+Rn*pn+Sn%pn],zn[In++]=(Bn+Tn)%256;break;case 3:for(Sn=tr=0;tr<Mn;Sn=tr+=1)Tn=fn[gn++],Rn=(Sn-Sn%pn)/pn,Dn=Sn<pn?0:zn[In-pn],Bn=Cn&&zn[(Cn-1)*Mn+Rn*pn+Sn%pn],zn[In++]=(Tn+Math.floor((Dn+Bn)/2))%256;break;case 4:for(Sn=Jn=0;Jn<Mn;Sn=Jn+=1)Tn=fn[gn++],Rn=(Sn-Sn%pn)/pn,Dn=Sn<pn?0:zn[In-pn],Cn===0?Bn=Xn=0:(Bn=zn[(Cn-1)*Mn+Rn*pn+Sn%pn],Xn=Rn&&zn[(Cn-1)*Mn+(Rn-1)*pn+Sn%pn]),Fn=Dn+Bn-Xn,Gn=Math.abs(Fn-Dn),Nn=Math.abs(Fn-Bn),Ln=Math.abs(Fn-Xn),kn=Gn<=Nn&&Gn<=Ln?Dn:Nn<=Ln?Bn:Xn,zn[In++]=(Tn+kn)%256;break;default:throw new Error("Invalid filter algorithm: "+fn[gn-1])}if(!qn){var On=((bn+Cn*Pn)*yn.width+En)*pn,Un=Cn*Mn;for(Sn=0;Sn<ar;Sn+=1){for(var Yn=0;Yn<pn;Yn+=1)mn[On++]=zn[Un++];On+=(vn-1)*pn}}Cn++}}return fn=unzlibSync(fn),yn.interlaceMethod==1?(xn(0,0,8,8),xn(4,0,8,8),xn(0,4,4,8),xn(2,0,4,4),xn(0,2,2,4),xn(1,0,2,2),xn(0,1,1,2)):xn(0,0,1,1),mn},dn.prototype.decodePalette=function(){var fn,pn,mn,gn,yn,xn,En,bn,vn;for(mn=this.palette,xn=this.transparency.indexed||[],yn=new Uint8Array((xn.length||0)+mn.length),gn=0,fn=0,pn=En=0,bn=mn.length;En<bn;pn=En+=3)yn[gn++]=mn[pn],yn[gn++]=mn[pn+1],yn[gn++]=mn[pn+2],yn[gn++]=(vn=xn[fn++])!=null?vn:255;return yn},dn.prototype.copyToImageData=function(fn,pn){var mn,gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn;if(gn=this.colors,Tn=null,mn=this.hasAlphaChannel,this.palette.length&&(Tn=(Rn=this._decodedPalette)!=null?Rn:this._decodedPalette=this.decodePalette(),gn=4,mn=!0),Pn=(yn=fn.data||fn).length,En=Tn||pn,xn=bn=0,gn===1)for(;xn<Pn;)vn=Tn?4*pn[xn/4]:bn,In=En[vn++],yn[xn++]=In,yn[xn++]=In,yn[xn++]=In,yn[xn++]=mn?En[vn++]:255,bn=vn;else for(;xn<Pn;)vn=Tn?4*pn[xn/4]:bn,yn[xn++]=En[vn++],yn[xn++]=En[vn++],yn[xn++]=En[vn++],yn[xn++]=mn?En[vn++]:255,bn=vn},dn.prototype.decode=function(){var fn;return fn=new Uint8Array(this.width*this.height*4),this.copyToImageData(fn,this.decodePixels()),fn};var hn=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),un=e.getContext("2d")}catch{return!1}return!0}return!1};return hn(),_e=function(fn){var pn;if(hn()===!0)return un.width=fn.width,un.height=fn.height,un.clearRect(0,0,fn.width,fn.height),un.putImageData(fn,0,0),(pn=new Image).src=e.toDataURL(),pn;throw new Error("This method requires a Browser with Canvas-capability.")},dn.prototype.decodeFrames=function(fn){var pn,mn,gn,yn,xn,En,bn,vn;if(this.animation){for(vn=[],mn=xn=0,En=(bn=this.animation.frames).length;xn<En;mn=++xn)pn=bn[mn],gn=fn.createImageData(pn.width,pn.height),yn=this.decodePixels(new Uint8Array(pn.data)),this.copyToImageData(gn,yn),pn.imageData=gn,vn.push(pn.image=_e(gn));return vn}},dn.prototype.renderFrame=function(fn,pn){var mn,gn,yn;return mn=(gn=this.animation.frames)[pn],yn=gn[pn-1],pn===0&&fn.clearRect(0,0,this.width,this.height),(yn!=null?yn.disposeOp:void 0)===1?fn.clearRect(yn.xOffset,yn.yOffset,yn.width,yn.height):(yn!=null?yn.disposeOp:void 0)===2&&fn.putImageData(yn.imageData,yn.xOffset,yn.yOffset),mn.blendOp===0&&fn.clearRect(mn.xOffset,mn.yOffset,mn.width,mn.height),fn.drawImage(mn.image,mn.xOffset,mn.yOffset)},dn.prototype.animate=function(fn){var pn,mn,gn,yn,xn,En,bn=this;return mn=0,En=this.animation,yn=En.numFrames,gn=En.frames,xn=En.numPlays,(pn=function(){var vn,Pn;if(vn=mn++%yn,Pn=gn[vn],bn.renderFrame(fn,vn),yn>1&&mn/yn<xn)return bn.animation._timeout=setTimeout(pn,Pn.delay)})()},dn.prototype.stopAnimation=function(){var fn;return clearTimeout((fn=this.animation)!=null?fn._timeout:void 0)},dn.prototype.render=function(fn){var pn,mn;return fn._png&&fn._png.stopAnimation(),fn._png=this,fn.width=this.width,fn.height=this.height,pn=fn.getContext("2d"),this.animation?(this.decodeFrames(pn),this.animate(pn)):(mn=pn.createImageData(this.width,this.height),this.copyToImageData(mn,this.decodePixels()),pn.putImageData(mn,0,0))},dn}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(_e){var e=0;if(_e[e++]!==71||_e[e++]!==73||_e[e++]!==70||_e[e++]!==56||(_e[e++]+1&253)!=56||_e[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var un=_e[e++]|_e[e++]<<8,dn=_e[e++]|_e[e++]<<8,hn=_e[e++],fn=hn>>7,pn=1<<(7&hn)+1;_e[e++],_e[e++];var mn=null,gn=null;fn&&(mn=e,gn=pn,e+=3*pn);var yn=!0,xn=[],En=0,bn=null,vn=0,Pn=null;for(this.width=un,this.height=dn;yn&&e<_e.length;)switch(_e[e++]){case 33:switch(_e[e++]){case 255:if(_e[e]!==11||_e[e+1]==78&&_e[e+2]==69&&_e[e+3]==84&&_e[e+4]==83&&_e[e+5]==67&&_e[e+6]==65&&_e[e+7]==80&&_e[e+8]==69&&_e[e+9]==50&&_e[e+10]==46&&_e[e+11]==48&&_e[e+12]==3&&_e[e+13]==1&&_e[e+16]==0)e+=14,Pn=_e[e++]|_e[e++]<<8,e++;else for(e+=12;;){if(!((Cn=_e[e++])>=0))throw Error("Invalid block size");if(Cn===0)break;e+=Cn}break;case 249:if(_e[e++]!==4||_e[e+4]!==0)throw new Error("Invalid graphics extension block.");var Tn=_e[e++];En=_e[e++]|_e[e++]<<8,bn=_e[e++],!(1&Tn)&&(bn=null),vn=Tn>>2&7,e++;break;case 254:for(;;){if(!((Cn=_e[e++])>=0))throw Error("Invalid block size");if(Cn===0)break;e+=Cn}break;default:throw new Error("Unknown graphic control label: 0x"+_e[e-1].toString(16))}break;case 44:var In=_e[e++]|_e[e++]<<8,Rn=_e[e++]|_e[e++]<<8,Sn=_e[e++]|_e[e++]<<8,Dn=_e[e++]|_e[e++]<<8,$n=_e[e++],Fn=$n>>6&1,Gn=1<<(7&$n)+1,kn=mn,Nn=gn,Ln=!1;$n>>7&&(Ln=!0,kn=e,Nn=Gn,e+=3*Gn);var zn=e;for(e++;;){var Cn;if(!((Cn=_e[e++])>=0))throw Error("Invalid block size");if(Cn===0)break;e+=Cn}xn.push({x:In,y:Rn,width:Sn,height:Dn,has_local_palette:Ln,palette_offset:kn,palette_size:Nn,data_offset:zn,data_length:e-zn,transparent_index:bn,interlaced:!!Fn,delay:En,disposal:vn});break;case 59:yn=!1;break;default:throw new Error("Unknown gif block: 0x"+_e[e-1].toString(16))}this.numFrames=function(){return xn.length},this.loopCount=function(){return Pn},this.frameInfo=function(Mn){if(Mn<0||Mn>=xn.length)throw new Error("Frame index out of range.");return xn[Mn]},this.decodeAndBlitFrameBGRA=function(Mn,Bn){var Xn=this.frameInfo(Mn),nr=Xn.width*Xn.height,sr=new Uint8Array(nr);$t(_e,Xn.data_offset,sr,nr);var lr=Xn.palette_offset,tr=Xn.transparent_index;tr===null&&(tr=256);var Jn=Xn.width,ar=un-Jn,gr=Jn,qn=4*(Xn.y*un+Xn.x),On=4*((Xn.y+Xn.height)*un+Xn.x),Un=qn,Yn=4*ar;Xn.interlaced===!0&&(Yn+=4*un*7);for(var er=8,Zn=0,ir=sr.length;Zn<ir;++Zn){var fr=sr[Zn];if(gr===0&&(gr=Jn,(Un+=Yn)>=On&&(Yn=4*ar+4*un*(er-1),Un=qn+(Jn+ar)*(er<<1),er>>=1)),fr===tr)Un+=4;else{var br=_e[lr+3*fr],Tr=_e[lr+3*fr+1],Ir=_e[lr+3*fr+2];Bn[Un++]=Ir,Bn[Un++]=Tr,Bn[Un++]=br,Bn[Un++]=255}--gr}},this.decodeAndBlitFrameRGBA=function(Mn,Bn){var Xn=this.frameInfo(Mn),nr=Xn.width*Xn.height,sr=new Uint8Array(nr);$t(_e,Xn.data_offset,sr,nr);var lr=Xn.palette_offset,tr=Xn.transparent_index;tr===null&&(tr=256);var Jn=Xn.width,ar=un-Jn,gr=Jn,qn=4*(Xn.y*un+Xn.x),On=4*((Xn.y+Xn.height)*un+Xn.x),Un=qn,Yn=4*ar;Xn.interlaced===!0&&(Yn+=4*un*7);for(var er=8,Zn=0,ir=sr.length;Zn<ir;++Zn){var fr=sr[Zn];if(gr===0&&(gr=Jn,(Un+=Yn)>=On&&(Yn=4*ar+4*un*(er-1),Un=qn+(Jn+ar)*(er<<1),er>>=1)),fr===tr)Un+=4;else{var br=_e[lr+3*fr],Tr=_e[lr+3*fr+1],Ir=_e[lr+3*fr+2];Bn[Un++]=br,Bn[Un++]=Tr,Bn[Un++]=Ir,Bn[Un++]=255}--gr}}}function $t(_e,e,un,dn){for(var hn=_e[e++],fn=1<<hn,pn=fn+1,mn=pn+1,gn=hn+1,yn=(1<<gn)-1,xn=0,En=0,bn=0,vn=_e[e++],Pn=new Int32Array(4096),Tn=null;;){for(;xn<16&&vn!==0;)En|=_e[e++]<<xn,xn+=8,vn===1?vn=_e[e++]:--vn;if(xn<gn)break;var In=En&yn;if(En>>=gn,xn-=gn,In!==fn){if(In===pn)break;for(var Rn=In<mn?In:Tn,Sn=0,Dn=Rn;Dn>fn;)Dn=Pn[Dn]>>8,++Sn;var $n=Dn;if(bn+Sn+(Rn!==In?1:0)>dn)return void a.log("Warning, gif stream longer than expected.");un[bn++]=$n;var Fn=bn+=Sn;for(Rn!==In&&(un[bn++]=$n),Dn=Rn;Sn--;)Dn=Pn[Dn],un[--Fn]=255&Dn,Dn>>=8;Tn!==null&&mn<4096&&(Pn[mn++]=Tn<<8|$n,mn>=yn+1&&gn<12&&(++gn,yn=yn<<1|1)),Tn=In}else mn=pn+1,yn=(1<<(gn=hn+1))-1,Tn=null}return bn!==dn&&a.log("Warning, gif stream shorter than expected."),un}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(_e){var e,un,dn,hn,fn,pn=Math.floor,mn=new Array(64),gn=new Array(64),yn=new Array(64),xn=new Array(64),En=new Array(65535),bn=new Array(65535),vn=new Array(64),Pn=new Array(64),Tn=[],In=0,Rn=7,Sn=new Array(64),Dn=new Array(64),$n=new Array(64),Fn=new Array(256),Gn=new Array(2048),kn=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Nn=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ln=[0,1,2,3,4,5,6,7,8,9,10,11],zn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Cn=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Mn=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Bn=[0,1,2,3,4,5,6,7,8,9,10,11],Xn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],nr=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function sr(qn,On){for(var Un=0,Yn=0,er=new Array,Zn=1;Zn<=16;Zn++){for(var ir=1;ir<=qn[Zn];ir++)er[On[Yn]]=[],er[On[Yn]][0]=Un,er[On[Yn]][1]=Zn,Yn++,Un++;Un*=2}return er}function lr(qn){for(var On=qn[0],Un=qn[1]-1;Un>=0;)On&1<<Un&&(In|=1<<Rn),Un--,--Rn<0&&(In==255?(tr(255),tr(0)):tr(In),Rn=7,In=0)}function tr(qn){Tn.push(qn)}function Jn(qn){tr(qn>>8&255),tr(255&qn)}function ar(qn,On,Un,Yn,er){for(var Zn,ir=er[0],fr=er[240],br=function(hr,wr){var Pr,kr,Hr,Kr,Nr,ns,ts,Ps,ps,Cs,as=0;for(ps=0;ps<8;++ps){Pr=hr[as],kr=hr[as+1],Hr=hr[as+2],Kr=hr[as+3],Nr=hr[as+4],ns=hr[as+5],ts=hr[as+6];var Ss=Pr+(Ps=hr[as+7]),js=Pr-Ps,Bs=kr+ts,es=kr-ts,Vr=Hr+ns,Wr=Hr-ns,is=Kr+Nr,ks=Kr-Nr,ws=Ss+is,Rr=Ss-is,Zr=Bs+Vr,ds=Bs-Vr;hr[as]=ws+Zr,hr[as+4]=ws-Zr;var fs=.707106781*(ds+Rr);hr[as+2]=Rr+fs,hr[as+6]=Rr-fs;var vs=.382683433*((ws=ks+Wr)-(ds=es+js)),Ts=.5411961*ws+vs,Er=1.306562965*ds+vs,vr=.707106781*(Zr=Wr+es),Lr=js+vr,Dr=js-vr;hr[as+5]=Dr+Ts,hr[as+3]=Dr-Ts,hr[as+1]=Lr+Er,hr[as+7]=Lr-Er,as+=8}for(as=0,ps=0;ps<8;++ps){Pr=hr[as],kr=hr[as+8],Hr=hr[as+16],Kr=hr[as+24],Nr=hr[as+32],ns=hr[as+40],ts=hr[as+48];var Jr=Pr+(Ps=hr[as+56]),ls=Pr-Ps,cs=kr+ts,Rs=kr-ts,As=Hr+ns,gs=Hr-ns,$s=Kr+Nr,Ns=Kr-Nr,Is=Jr+$s,Os=Jr-$s,Vs=cs+As,Us=cs-As;hr[as]=Is+Vs,hr[as+32]=Is-Vs;var zs=.707106781*(Us+Os);hr[as+16]=Os+zs,hr[as+48]=Os-zs;var Zs=.382683433*((Is=Ns+gs)-(Us=Rs+ls)),Qs=.5411961*Is+Zs,vo=1.306562965*Us+Zs,bo=.707106781*(Vs=gs+Rs),Ro=ls+bo,Qo=ls-bo;hr[as+40]=Qo+Qs,hr[as+24]=Qo-Qs,hr[as+8]=Ro+vo,hr[as+56]=Ro-vo,as++}for(ps=0;ps<64;++ps)Cs=hr[ps]*wr[ps],vn[ps]=Cs>0?Cs+.5|0:Cs-.5|0;return vn}(qn,On),Tr=0;Tr<64;++Tr)Pn[kn[Tr]]=br[Tr];var Ir=Pn[0]-Un;Un=Pn[0],Ir==0?lr(Yn[0]):(lr(Yn[bn[Zn=32767+Ir]]),lr(En[Zn]));for(var Mr=63;Mr>0&&Pn[Mr]==0;)Mr--;if(Mr==0)return lr(ir),Un;for(var qr,Ar=1;Ar<=Mr;){for(var or=Ar;Pn[Ar]==0&&Ar<=Mr;)++Ar;var jr=Ar-or;if(jr>=16){qr=jr>>4;for(var cr=1;cr<=qr;++cr)lr(fr);jr&=15}Zn=32767+Pn[Ar],lr(er[(jr<<4)+bn[Zn]]),lr(En[Zn]),Ar++}return Mr!=63&&lr(ir),Un}function gr(qn){qn=Math.min(Math.max(qn,1),100),fn!=qn&&(function(On){for(var Un=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Yn=0;Yn<64;Yn++){var er=pn((Un[Yn]*On+50)/100);er=Math.min(Math.max(er,1),255),mn[kn[Yn]]=er}for(var Zn=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ir=0;ir<64;ir++){var fr=pn((Zn[ir]*On+50)/100);fr=Math.min(Math.max(fr,1),255),gn[kn[ir]]=fr}for(var br=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Tr=0,Ir=0;Ir<8;Ir++)for(var Mr=0;Mr<8;Mr++)yn[Tr]=1/(mn[kn[Tr]]*br[Ir]*br[Mr]*8),xn[Tr]=1/(gn[kn[Tr]]*br[Ir]*br[Mr]*8),Tr++}(qn<50?Math.floor(5e3/qn):Math.floor(200-2*qn)),fn=qn)}this.encode=function(qn,On){On&&gr(On),Tn=new Array,In=0,Rn=7,Jn(65496),Jn(65504),Jn(16),tr(74),tr(70),tr(73),tr(70),tr(0),tr(1),tr(1),tr(0),Jn(1),Jn(1),tr(0),tr(0),function(){Jn(65499),Jn(132),tr(0);for(var kr=0;kr<64;kr++)tr(mn[kr]);tr(1);for(var Hr=0;Hr<64;Hr++)tr(gn[Hr])}(),function(kr,Hr){Jn(65472),Jn(17),tr(8),Jn(Hr),Jn(kr),tr(3),tr(1),tr(17),tr(0),tr(2),tr(17),tr(1),tr(3),tr(17),tr(1)}(qn.width,qn.height),function(){Jn(65476),Jn(418),tr(0);for(var kr=0;kr<16;kr++)tr(Nn[kr+1]);for(var Hr=0;Hr<=11;Hr++)tr(Ln[Hr]);tr(16);for(var Kr=0;Kr<16;Kr++)tr(zn[Kr+1]);for(var Nr=0;Nr<=161;Nr++)tr(Cn[Nr]);tr(1);for(var ns=0;ns<16;ns++)tr(Mn[ns+1]);for(var ts=0;ts<=11;ts++)tr(Bn[ts]);tr(17);for(var Ps=0;Ps<16;Ps++)tr(Xn[Ps+1]);for(var ps=0;ps<=161;ps++)tr(nr[ps])}(),Jn(65498),Jn(12),tr(3),tr(1),tr(0),tr(2),tr(17),tr(3),tr(17),tr(0),tr(63),tr(0);var Un=0,Yn=0,er=0;In=0,Rn=7,this.encode.displayName="_encode_";for(var Zn,ir,fr,br,Tr,Ir,Mr,qr,Ar,or=qn.data,jr=qn.width,cr=qn.height,hr=4*jr,wr=0;wr<cr;){for(Zn=0;Zn<hr;){for(Tr=hr*wr+Zn,Mr=-1,qr=0,Ar=0;Ar<64;Ar++)Ir=Tr+(qr=Ar>>3)*hr+(Mr=4*(7&Ar)),wr+qr>=cr&&(Ir-=hr*(wr+1+qr-cr)),Zn+Mr>=hr&&(Ir-=Zn+Mr-hr+4),ir=or[Ir++],fr=or[Ir++],br=or[Ir++],Sn[Ar]=(Gn[ir]+Gn[fr+256>>0]+Gn[br+512>>0]>>16)-128,Dn[Ar]=(Gn[ir+768>>0]+Gn[fr+1024>>0]+Gn[br+1280>>0]>>16)-128,$n[Ar]=(Gn[ir+1280>>0]+Gn[fr+1536>>0]+Gn[br+1792>>0]>>16)-128;Un=ar(Sn,yn,Un,e,dn),Yn=ar(Dn,xn,Yn,un,hn),er=ar($n,xn,er,un,hn),Zn+=32}wr+=8}if(Rn>=0){var Pr=[];Pr[1]=Rn+1,Pr[0]=(1<<Rn+1)-1,lr(Pr)}return Jn(65497),new Uint8Array(Tn)},_e=_e||50,function(){for(var qn=String.fromCharCode,On=0;On<256;On++)Fn[On]=qn(On)}(),e=sr(Nn,Ln),un=sr(Mn,Bn),dn=sr(zn,Cn),hn=sr(Xn,nr),function(){for(var qn=1,On=2,Un=1;Un<=15;Un++){for(var Yn=qn;Yn<On;Yn++)bn[32767+Yn]=Un,En[32767+Yn]=[],En[32767+Yn][1]=Un,En[32767+Yn][0]=Yn;for(var er=-(On-1);er<=-qn;er++)bn[32767+er]=Un,En[32767+er]=[],En[32767+er][1]=Un,En[32767+er][0]=On-1+er;qn<<=1,On<<=1}}(),function(){for(var qn=0;qn<256;qn++)Gn[qn]=19595*qn,Gn[qn+256>>0]=38470*qn,Gn[qn+512>>0]=7471*qn+32768,Gn[qn+768>>0]=-11059*qn,Gn[qn+1024>>0]=-21709*qn,Gn[qn+1280>>0]=32768*qn+8421375,Gn[qn+1536>>0]=-27439*qn,Gn[qn+1792>>0]=-5329*qn}(),gr(_e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(_e,e){if(this.pos=0,this.buffer=_e,this.datav=new DataView(_e.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(_e){function e(Nn){if(!Nn)throw Error("assert :P")}function un(Nn,Ln,zn){for(var Cn=0;4>Cn;Cn++)if(Nn[Ln+Cn]!=zn.charCodeAt(Cn))return!0;return!1}function dn(Nn,Ln,zn,Cn,Mn){for(var Bn=0;Bn<Mn;Bn++)Nn[Ln+Bn]=zn[Cn+Bn]}function hn(Nn,Ln,zn,Cn){for(var Mn=0;Mn<Cn;Mn++)Nn[Ln+Mn]=zn}function fn(Nn){return new Int32Array(Nn)}function pn(Nn,Ln){for(var zn=[],Cn=0;Cn<Nn;Cn++)zn.push(new Ln);return zn}function mn(Nn,Ln){var zn=[];return function Cn(Mn,Bn,Xn){for(var nr=Xn[Bn],sr=0;sr<nr&&(Mn.push(Xn.length>Bn+1?[]:new Ln),!(Xn.length<Bn+1));sr++)Cn(Mn[sr],Bn+1,Xn)}(zn,0,Nn),zn}var gn=function(){var Nn=this;function Ln(wn,jn){for(var Wn=1<<jn-1>>>0;wn&Wn;)Wn>>>=1;return Wn?(wn&Wn-1)+Wn:wn}function zn(wn,jn,Wn,Qn,dr){e(!(Qn%Wn));do wn[jn+(Qn-=Wn)]=dr;while(0<Qn)}function Cn(wn,jn,Wn,Qn,dr){if(e(2328>=dr),512>=dr)var pr=fn(512);else if((pr=fn(dr))==null)return 0;return function(mr,xr,_r,Sr,Ur,rs){var ss,Qr,xs=xr,us=1<<_r,zr=fn(16),Gr=fn(16);for(e(Ur!=0),e(Sr!=null),e(mr!=null),e(0<_r),Qr=0;Qr<Ur;++Qr){if(15<Sr[Qr])return 0;++zr[Sr[Qr]]}if(zr[0]==Ur)return 0;for(Gr[1]=0,ss=1;15>ss;++ss){if(zr[ss]>1<<ss)return 0;Gr[ss+1]=Gr[ss]+zr[ss]}for(Qr=0;Qr<Ur;++Qr)ss=Sr[Qr],0<Sr[Qr]&&(rs[Gr[ss]++]=Qr);if(Gr[15]==1)return(Sr=new Mn).g=0,Sr.value=rs[0],zn(mr,xs,1,us,Sr),us;var ms,_s=-1,ys=us-1,Fs=0,Ls=1,qs=1,Ds=1<<_r;for(Qr=0,ss=1,Ur=2;ss<=_r;++ss,Ur<<=1){if(Ls+=qs<<=1,0>(qs-=zr[ss]))return 0;for(;0<zr[ss];--zr[ss])(Sr=new Mn).g=ss,Sr.value=rs[Qr++],zn(mr,xs+Fs,Ur,Ds,Sr),Fs=Ln(Fs,ss)}for(ss=_r+1,Ur=2;15>=ss;++ss,Ur<<=1){if(Ls+=qs<<=1,0>(qs-=zr[ss]))return 0;for(;0<zr[ss];--zr[ss]){if(Sr=new Mn,(Fs&ys)!=_s){for(xs+=Ds,ms=1<<(_s=ss)-_r;15>_s&&!(0>=(ms-=zr[_s]));)++_s,ms<<=1;us+=Ds=1<<(ms=_s-_r),mr[xr+(_s=Fs&ys)].g=ms+_r,mr[xr+_s].value=xs-xr-_s}Sr.g=ss-_r,Sr.value=rs[Qr++],zn(mr,xs+(Fs>>_r),Ur,Ds,Sr),Fs=Ln(Fs,ss)}}return Ls!=2*Gr[15]-1?0:us}(wn,jn,Wn,Qn,dr,pr)}function Mn(){this.value=this.g=0}function Bn(){this.value=this.g=0}function Xn(){this.G=pn(5,Mn),this.H=fn(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=pn(Co,Bn)}function nr(wn,jn,Wn,Qn){e(wn!=null),e(jn!=null),e(2147483648>Qn),wn.Ca=254,wn.I=0,wn.b=-8,wn.Ka=0,wn.oa=jn,wn.pa=Wn,wn.Jd=jn,wn.Yc=Wn+Qn,wn.Zc=4<=Qn?Wn+Qn-4+1:Wn,Zn(wn)}function sr(wn,jn){for(var Wn=0;0<jn--;)Wn|=fr(wn,128)<<jn;return Wn}function lr(wn,jn){var Wn=sr(wn,jn);return ir(wn)?-Wn:Wn}function tr(wn,jn,Wn,Qn){var dr,pr=0;for(e(wn!=null),e(jn!=null),e(4294967288>Qn),wn.Sb=Qn,wn.Ra=0,wn.u=0,wn.h=0,4<Qn&&(Qn=4),dr=0;dr<Qn;++dr)pr+=jn[Wn+dr]<<8*dr;wn.Ra=pr,wn.bb=Qn,wn.oa=jn,wn.pa=Wn}function Jn(wn){for(;8<=wn.u&&wn.bb<wn.Sb;)wn.Ra>>>=8,wn.Ra+=wn.oa[wn.pa+wn.bb]<<Ip-8>>>0,++wn.bb,wn.u-=8;Un(wn)&&(wn.h=1,wn.u=0)}function ar(wn,jn){if(e(0<=jn),!wn.h&&jn<=Pp){var Wn=On(wn)&Sp[jn];return wn.u+=jn,Jn(wn),Wn}return wn.h=1,wn.u=0}function gr(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function qn(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function On(wn){return wn.Ra>>>(wn.u&Ip-1)>>>0}function Un(wn){return e(wn.bb<=wn.Sb),wn.h||wn.bb==wn.Sb&&wn.u>Ip}function Yn(wn,jn){wn.u=jn,wn.h=Un(wn)}function er(wn){wn.u>=im&&(e(wn.u>=im),Jn(wn))}function Zn(wn){e(wn!=null&&wn.oa!=null),wn.pa<wn.Zc?(wn.I=(wn.oa[wn.pa++]|wn.I<<8)>>>0,wn.b+=8):(e(wn!=null&&wn.oa!=null),wn.pa<wn.Yc?(wn.b+=8,wn.I=wn.oa[wn.pa++]|wn.I<<8):wn.Ka?wn.b=0:(wn.I<<=8,wn.b+=8,wn.Ka=1))}function ir(wn){return sr(wn,1)}function fr(wn,jn){var Wn=wn.Ca;0>wn.b&&Zn(wn);var Qn=wn.b,dr=Wn*jn>>>8,pr=(wn.I>>>Qn>dr)+0;for(pr?(Wn-=dr,wn.I-=dr+1<<Qn>>>0):Wn=dr+1,Qn=Wn,dr=0;256<=Qn;)dr+=8,Qn>>=8;return Qn=7^dr+$o[Qn],wn.b-=Qn,wn.Ca=(Wn<<Qn)-1,pr}function br(wn,jn,Wn){wn[jn+0]=Wn>>24&255,wn[jn+1]=Wn>>16&255,wn[jn+2]=Wn>>8&255,wn[jn+3]=Wn>>0&255}function Tr(wn,jn){return wn[jn+0]<<0|wn[jn+1]<<8}function Ir(wn,jn){return Tr(wn,jn)|wn[jn+2]<<16}function Mr(wn,jn){return Tr(wn,jn)|Tr(wn,jn+2)<<16}function qr(wn,jn){var Wn=1<<jn;return e(wn!=null),e(0<jn),wn.X=fn(Wn),wn.X==null?0:(wn.Mb=32-jn,wn.Xa=jn,1)}function Ar(wn,jn){e(wn!=null),e(jn!=null),e(wn.Xa==jn.Xa),dn(jn.X,0,wn.X,0,1<<jn.Xa)}function or(){this.X=[],this.Xa=this.Mb=0}function jr(wn,jn,Wn,Qn){e(Wn!=null),e(Qn!=null);var dr=Wn[0],pr=Qn[0];return dr==0&&(dr=(wn*pr+jn/2)/jn),pr==0&&(pr=(jn*dr+wn/2)/wn),0>=dr||0>=pr?0:(Wn[0]=dr,Qn[0]=pr,1)}function cr(wn,jn){return wn+(1<<jn)-1>>>jn}function hr(wn,jn){return((4278255360&wn)+(4278255360&jn)>>>0&4278255360)+((16711935&wn)+(16711935&jn)>>>0&16711935)>>>0}function wr(wn,jn){Nn[jn]=function(Wn,Qn,dr,pr,mr,xr,_r){var Sr;for(Sr=0;Sr<mr;++Sr){var Ur=Nn[wn](xr[_r+Sr-1],dr,pr+Sr);xr[_r+Sr]=hr(Wn[Qn+Sr],Ur)}}}function Pr(){this.ud=this.hd=this.jd=0}function kr(wn,jn){return((4278124286&(wn^jn))>>>1)+(wn&jn)>>>0}function Hr(wn){return 0<=wn&&256>wn?wn:0>wn?0:255<wn?255:void 0}function Kr(wn,jn){return Hr(wn+(wn-jn+.5>>1))}function Nr(wn,jn,Wn){return Math.abs(jn-Wn)-Math.abs(wn-Wn)}function ns(wn,jn,Wn,Qn,dr,pr,mr){for(Qn=pr[mr-1],Wn=0;Wn<dr;++Wn)pr[mr+Wn]=Qn=hr(wn[jn+Wn],Qn)}function ts(wn,jn,Wn,Qn,dr){var pr;for(pr=0;pr<Wn;++pr){var mr=wn[jn+pr],xr=mr>>8&255,_r=16711935&(_r=(_r=16711935&mr)+((xr<<16)+xr));Qn[dr+pr]=(4278255360&mr)+_r>>>0}}function Ps(wn,jn){jn.jd=wn>>0&255,jn.hd=wn>>8&255,jn.ud=wn>>16&255}function ps(wn,jn,Wn,Qn,dr,pr){var mr;for(mr=0;mr<Qn;++mr){var xr=jn[Wn+mr],_r=xr>>>8,Sr=xr,Ur=255&(Ur=(Ur=xr>>>16)+((wn.jd<<24>>24)*(_r<<24>>24)>>>5));Sr=255&(Sr=(Sr=Sr+((wn.hd<<24>>24)*(_r<<24>>24)>>>5))+((wn.ud<<24>>24)*(Ur<<24>>24)>>>5)),dr[pr+mr]=(4278255360&xr)+(Ur<<16)+Sr}}function Cs(wn,jn,Wn,Qn,dr){Nn[jn]=function(pr,mr,xr,_r,Sr,Ur,rs,ss,Qr){for(_r=rs;_r<ss;++_r)for(rs=0;rs<Qr;++rs)Sr[Ur++]=dr(xr[Qn(pr[mr++])])},Nn[wn]=function(pr,mr,xr,_r,Sr,Ur,rs){var ss=8>>pr.b,Qr=pr.Ea,xs=pr.K[0],us=pr.w;if(8>ss)for(pr=(1<<pr.b)-1,us=(1<<ss)-1;mr<xr;++mr){var zr,Gr=0;for(zr=0;zr<Qr;++zr)zr&pr||(Gr=Qn(_r[Sr++])),Ur[rs++]=dr(xs[Gr&us]),Gr>>=ss}else Nn["VP8LMapColor"+Wn](_r,Sr,xs,us,Ur,rs,mr,xr,Qr)}}function as(wn,jn,Wn,Qn,dr){for(Wn=jn+Wn;jn<Wn;){var pr=wn[jn++];Qn[dr++]=pr>>16&255,Qn[dr++]=pr>>8&255,Qn[dr++]=pr>>0&255}}function Ss(wn,jn,Wn,Qn,dr){for(Wn=jn+Wn;jn<Wn;){var pr=wn[jn++];Qn[dr++]=pr>>16&255,Qn[dr++]=pr>>8&255,Qn[dr++]=pr>>0&255,Qn[dr++]=pr>>24&255}}function js(wn,jn,Wn,Qn,dr){for(Wn=jn+Wn;jn<Wn;){var pr=(mr=wn[jn++])>>16&240|mr>>12&15,mr=mr>>0&240|mr>>28&15;Qn[dr++]=pr,Qn[dr++]=mr}}function Bs(wn,jn,Wn,Qn,dr){for(Wn=jn+Wn;jn<Wn;){var pr=(mr=wn[jn++])>>16&248|mr>>13&7,mr=mr>>5&224|mr>>3&31;Qn[dr++]=pr,Qn[dr++]=mr}}function es(wn,jn,Wn,Qn,dr){for(Wn=jn+Wn;jn<Wn;){var pr=wn[jn++];Qn[dr++]=pr>>0&255,Qn[dr++]=pr>>8&255,Qn[dr++]=pr>>16&255}}function Vr(wn,jn,Wn,Qn,dr,pr){if(pr==0)for(Wn=jn+Wn;jn<Wn;)br(Qn,((pr=wn[jn++])[0]>>24|pr[1]>>8&65280|pr[2]<<8&16711680|pr[3]<<24)>>>0),dr+=32;else dn(Qn,dr,wn,jn,Wn)}function Wr(wn,jn){Nn[jn][0]=Nn[wn+"0"],Nn[jn][1]=Nn[wn+"1"],Nn[jn][2]=Nn[wn+"2"],Nn[jn][3]=Nn[wn+"3"],Nn[jn][4]=Nn[wn+"4"],Nn[jn][5]=Nn[wn+"5"],Nn[jn][6]=Nn[wn+"6"],Nn[jn][7]=Nn[wn+"7"],Nn[jn][8]=Nn[wn+"8"],Nn[jn][9]=Nn[wn+"9"],Nn[jn][10]=Nn[wn+"10"],Nn[jn][11]=Nn[wn+"11"],Nn[jn][12]=Nn[wn+"12"],Nn[jn][13]=Nn[wn+"13"],Nn[jn][14]=Nn[wn+"0"],Nn[jn][15]=Nn[wn+"0"]}function is(wn){return wn==h0||wn==f0||wn==Dm||wn==p0}function ks(){this.eb=[],this.size=this.A=this.fb=0}function ws(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Rr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ks,this.f.kb=new ws,this.sd=null}function Zr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ds(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function fs(wn){return alert("todo:WebPSamplerProcessPlane"),wn.T}function vs(wn,jn){var Wn=wn.T,Qn=jn.ba.f.RGBA,dr=Qn.eb,pr=Qn.fb+wn.ka*Qn.A,mr=$a[jn.ba.S],xr=wn.y,_r=wn.O,Sr=wn.f,Ur=wn.N,rs=wn.ea,ss=wn.W,Qr=jn.cc,xs=jn.dc,us=jn.Mc,zr=jn.Nc,Gr=wn.ka,ms=wn.ka+wn.T,_s=wn.U,ys=_s+1>>1;for(Gr==0?mr(xr,_r,null,null,Sr,Ur,rs,ss,Sr,Ur,rs,ss,dr,pr,null,null,_s):(mr(jn.ec,jn.fc,xr,_r,Qr,xs,us,zr,Sr,Ur,rs,ss,dr,pr-Qn.A,dr,pr,_s),++Wn);Gr+2<ms;Gr+=2)Qr=Sr,xs=Ur,us=rs,zr=ss,Ur+=wn.Rc,ss+=wn.Rc,pr+=2*Qn.A,mr(xr,(_r+=2*wn.fa)-wn.fa,xr,_r,Qr,xs,us,zr,Sr,Ur,rs,ss,dr,pr-Qn.A,dr,pr,_s);return _r+=wn.fa,wn.j+ms<wn.o?(dn(jn.ec,jn.fc,xr,_r,_s),dn(jn.cc,jn.dc,Sr,Ur,ys),dn(jn.Mc,jn.Nc,rs,ss,ys),Wn--):1&ms||mr(xr,_r,null,null,Sr,Ur,rs,ss,Sr,Ur,rs,ss,dr,pr+Qn.A,null,null,_s),Wn}function Ts(wn,jn,Wn){var Qn=wn.F,dr=[wn.J];if(Qn!=null){var pr=wn.U,mr=jn.ba.S,xr=mr==Mm||mr==Dm;jn=jn.ba.f.RGBA;var _r=[0],Sr=wn.ka;_r[0]=wn.T,wn.Kb&&(Sr==0?--_r[0]:(--Sr,dr[0]-=wn.width),wn.j+wn.ka+wn.T==wn.o&&(_r[0]=wn.o-wn.j-Sr));var Ur=jn.eb;Sr=jn.fb+Sr*jn.A,wn=uo(Qn,dr[0],wn.width,pr,_r,Ur,Sr+(xr?0:3),jn.A),e(Wn==_r),wn&&is(mr)&&xa(Ur,Sr,xr,pr,_r,jn.A)}return 0}function Er(wn){var jn=wn.ma,Wn=jn.ba.S,Qn=11>Wn,dr=Wn==km||Wn==Lm||Wn==Mm||Wn==d0||Wn==12||is(Wn);if(jn.memory=null,jn.Ib=null,jn.Jb=null,jn.Nd=null,!rm(jn.Oa,wn,dr?11:12))return 0;if(dr&&is(Wn)&&Es(),wn.da)alert("todo:use_scaling");else{if(Qn){if(jn.Ib=fs,wn.Kb){if(Wn=wn.U+1>>1,jn.memory=fn(wn.U+2*Wn),jn.memory==null)return 0;jn.ec=jn.memory,jn.fc=0,jn.cc=jn.ec,jn.dc=jn.fc+wn.U,jn.Mc=jn.cc,jn.Nc=jn.dc+Wn,jn.Ib=vs,Es()}}else alert("todo:EmitYUV");dr&&(jn.Jb=Ts,Qn&&Xr())}if(Qn&&!xy){for(wn=0;256>wn;++wn)qx[wn]=89858*(wn-128)+Fm>>Om,Gx[wn]=-22014*(wn-128)+Fm,Wx[wn]=-45773*(wn-128),Hx[wn]=113618*(wn-128)+Fm>>Om;for(wn=hm;wn<y0;++wn)jn=76283*(wn-16)+Fm>>Om,Kx[wn-hm]=to(jn,255),Yx[wn-hm]=to(jn+8>>4,15);xy=1}return 1}function vr(wn){var jn=wn.ma,Wn=wn.U,Qn=wn.T;return e(!(1&wn.ka)),0>=Wn||0>=Qn?0:(Wn=jn.Ib(wn,jn),jn.Jb!=null&&jn.Jb(wn,jn,Wn),jn.Dc+=Wn,1)}function Lr(wn){wn.ma.memory=null}function Dr(wn,jn,Wn,Qn){return ar(wn,8)!=47?0:(jn[0]=ar(wn,14)+1,Wn[0]=ar(wn,14)+1,Qn[0]=ar(wn,1),ar(wn,3)!=0?0:!wn.h)}function Jr(wn,jn){if(4>wn)return wn+1;var Wn=wn-2>>1;return(2+(1&wn)<<Wn)+ar(jn,Wn)+1}function ls(wn,jn){return 120<jn?jn-120:1<=(Wn=((Wn=Cx[jn-1])>>4)*wn+(8-(15&Wn)))?Wn:1;var Wn}function cs(wn,jn,Wn){var Qn=On(Wn),dr=wn[jn+=255&Qn].g-8;return 0<dr&&(Yn(Wn,Wn.u+8),Qn=On(Wn),jn+=wn[jn].value,jn+=Qn&(1<<dr)-1),Yn(Wn,Wn.u+wn[jn].g),wn[jn].value}function Rs(wn,jn,Wn){return Wn.g+=wn.g,Wn.value+=wn.value<<jn>>>0,e(8>=Wn.g),wn.g}function As(wn,jn,Wn){var Qn=wn.xc;return e((jn=Qn==0?0:wn.vc[wn.md*(Wn>>Qn)+(jn>>Qn)])<wn.Wb),wn.Ya[jn]}function gs(wn,jn,Wn,Qn){var dr=wn.ab,pr=wn.c*jn,mr=wn.C;jn=mr+jn;var xr=Wn,_r=Qn;for(Qn=wn.Ta,Wn=wn.Ua;0<dr--;){var Sr=wn.gc[dr],Ur=mr,rs=jn,ss=xr,Qr=_r,xs=(_r=Qn,xr=Wn,Sr.Ea);switch(e(Ur<rs),e(rs<=Sr.nc),Sr.hc){case 2:Tm(ss,Qr,(rs-Ur)*xs,_r,xr);break;case 0:var us=Ur,zr=rs,Gr=_r,ms=xr,_s=(Ds=Sr).Ea;us==0&&(c0(ss,Qr,null,null,1,Gr,ms),ns(ss,Qr+1,0,0,_s-1,Gr,ms+1),Qr+=_s,ms+=_s,++us);for(var ys=1<<Ds.b,Fs=ys-1,Ls=cr(_s,Ds.b),qs=Ds.K,Ds=Ds.w+(us>>Ds.b)*Ls;us<zr;){var _i=qs,ro=Ds,Js=1;for(om(ss,Qr,Gr,ms-_s,1,Gr,ms);Js<_s;){var Xs=(Js&~Fs)+ys;Xs>_s&&(Xs=_s),(0,Iu[_i[ro++]>>8&15])(ss,Qr+ +Js,Gr,ms+Js-_s,Xs-Js,Gr,ms+Js),Js=Xs}Qr+=_s,ms+=_s,++us&Fs||(Ds+=Ls)}rs!=Sr.nc&&dn(_r,xr-xs,_r,xr+(rs-Ur-1)*xs,xs);break;case 1:for(xs=ss,zr=Qr,_s=(ss=Sr.Ea)-(ms=ss&~(Gr=(Qr=1<<Sr.b)-1)),us=cr(ss,Sr.b),ys=Sr.K,Sr=Sr.w+(Ur>>Sr.b)*us;Ur<rs;){for(Fs=ys,Ls=Sr,qs=new Pr,Ds=zr+ms,_i=zr+ss;zr<Ds;)Ps(Fs[Ls++],qs),sp(qs,xs,zr,Qr,_r,xr),zr+=Qr,xr+=Qr;zr<_i&&(Ps(Fs[Ls++],qs),sp(qs,xs,zr,_s,_r,xr),zr+=_s,xr+=_s),++Ur&Gr||(Sr+=us)}break;case 3:if(ss==_r&&Qr==xr&&0<Sr.b){for(zr=_r,ss=xs=xr+(rs-Ur)*xs-(ms=(rs-Ur)*cr(Sr.Ea,Sr.b)),Qr=_r,Gr=xr,us=[],ms=(_s=ms)-1;0<=ms;--ms)us[ms]=Qr[Gr+ms];for(ms=_s-1;0<=ms;--ms)zr[ss+ms]=us[ms];Zo(Sr,Ur,rs,_r,xs,_r,xr)}else Zo(Sr,Ur,rs,ss,Qr,_r,xr)}xr=Qn,_r=Wn}_r!=Wn&&dn(Qn,Wn,xr,_r,pr)}function $s(wn,jn){var Wn=wn.V,Qn=wn.Ba+wn.c*wn.C,dr=jn-wn.C;if(e(jn<=wn.l.o),e(16>=dr),0<dr){var pr=wn.l,mr=wn.Ta,xr=wn.Ua,_r=pr.width;if(gs(wn,dr,Wn,Qn),dr=xr=[xr],e((Wn=wn.C)<(Qn=jn)),e(pr.v<pr.va),Qn>pr.o&&(Qn=pr.o),Wn<pr.j){var Sr=pr.j-Wn;Wn=pr.j,dr[0]+=Sr*_r}if(Wn>=Qn?Wn=0:(dr[0]+=4*pr.v,pr.ka=Wn-pr.j,pr.U=pr.va-pr.v,pr.T=Qn-Wn,Wn=1),Wn){if(xr=xr[0],11>(Wn=wn.ca).S){var Ur=Wn.f.RGBA,rs=(Qn=Wn.S,dr=pr.U,pr=pr.T,Sr=Ur.eb,Ur.A),ss=pr;for(Ur=Ur.fb+wn.Ma*Ur.A;0<ss--;){var Qr=mr,xs=xr,us=dr,zr=Sr,Gr=Ur;switch(Qn){case jm:Bo(Qr,xs,us,zr,Gr);break;case km:Mo(Qr,xs,us,zr,Gr);break;case h0:Mo(Qr,xs,us,zr,Gr),xa(zr,Gr,0,us,1,0);break;case ly:su(Qr,xs,us,zr,Gr);break;case Lm:Vr(Qr,xs,us,zr,Gr,1);break;case f0:Vr(Qr,xs,us,zr,Gr,1),xa(zr,Gr,0,us,1,0);break;case Mm:Vr(Qr,xs,us,zr,Gr,0);break;case Dm:Vr(Qr,xs,us,zr,Gr,0),xa(zr,Gr,1,us,1,0);break;case d0:Cu(Qr,xs,us,zr,Gr);break;case p0:Cu(Qr,xs,us,zr,Gr),co(zr,Gr,us,1,0);break;case cy:ru(Qr,xs,us,zr,Gr);break;default:e(0)}xr+=_r,Ur+=rs}wn.Ma+=pr}else alert("todo:EmitRescaledRowsYUVA");e(wn.Ma<=Wn.height)}}wn.C=jn,e(wn.C<=wn.i)}function Ns(wn){var jn;if(0<wn.ua)return 0;for(jn=0;jn<wn.Wb;++jn){var Wn=wn.Ya[jn].G,Qn=wn.Ya[jn].H;if(0<Wn[1][Qn[1]+0].g||0<Wn[2][Qn[2]+0].g||0<Wn[3][Qn[3]+0].g)return 0}return 1}function Is(wn,jn,Wn,Qn,dr,pr){if(wn.Z!=0){var mr=wn.qd,xr=wn.rd;for(e(Lu[wn.Z]!=null);jn<Wn;++jn)Lu[wn.Z](mr,xr,Qn,dr,Qn,dr,pr),mr=Qn,xr=dr,dr+=pr;wn.qd=mr,wn.rd=xr}}function Os(wn,jn){var Wn=wn.l.ma,Qn=Wn.Z==0||Wn.Z==1?wn.l.j:wn.C;if(Qn=wn.C<Qn?Qn:wn.C,e(jn<=wn.l.o),jn>Qn){var dr=wn.l.width,pr=Wn.ca,mr=Wn.tb+dr*Qn,xr=wn.V,_r=wn.Ba+wn.c*Qn,Sr=wn.gc;e(wn.ab==1),e(Sr[0].hc==3),Sm(Sr[0],Qn,jn,xr,_r,pr,mr),Is(Wn,Qn,jn,pr,mr,dr)}wn.C=wn.Ma=jn}function Vs(wn,jn,Wn,Qn,dr,pr,mr){var xr=wn.$/Qn,_r=wn.$%Qn,Sr=wn.m,Ur=wn.s,rs=Wn+wn.$,ss=rs;dr=Wn+Qn*dr;var Qr=Wn+Qn*pr,xs=280+Ur.ua,us=wn.Pb?xr:16777216,zr=0<Ur.ua?Ur.Wa:null,Gr=Ur.wc,ms=rs<Qr?As(Ur,_r,xr):null;e(wn.C<pr),e(Qr<=dr);var _s=!1;e:for(;;){for(;_s||rs<Qr;){var ys=0;if(xr>=us){var Fs=rs-Wn;e((us=wn).Pb),us.wd=us.m,us.xd=Fs,0<us.s.ua&&Ar(us.s.Wa,us.s.vb),us=xr+jx}if(_r&Gr||(ms=As(Ur,_r,xr)),e(ms!=null),ms.Qb&&(jn[rs]=ms.qb,_s=!0),!_s)if(er(Sr),ms.jc){ys=Sr,Fs=jn;var Ls=rs,qs=ms.pd[On(ys)&Co-1];e(ms.jc),256>qs.g?(Yn(ys,ys.u+qs.g),Fs[Ls]=qs.value,ys=0):(Yn(ys,ys.u+qs.g-256),e(256<=qs.value),ys=qs.value),ys==0&&(_s=!0)}else ys=cs(ms.G[0],ms.H[0],Sr);if(Sr.h)break;if(_s||256>ys){if(!_s)if(ms.nd)jn[rs]=(ms.qb|ys<<8)>>>0;else{if(er(Sr),_s=cs(ms.G[1],ms.H[1],Sr),er(Sr),Fs=cs(ms.G[2],ms.H[2],Sr),Ls=cs(ms.G[3],ms.H[3],Sr),Sr.h)break;jn[rs]=(Ls<<24|_s<<16|ys<<8|Fs)>>>0}if(_s=!1,++rs,++_r>=Qn&&(_r=0,++xr,mr!=null&&xr<=pr&&!(xr%16)&&mr(wn,xr),zr!=null))for(;ss<rs;)ys=jn[ss++],zr.X[(506832829*ys&4294967295)>>>zr.Mb]=ys}else if(280>ys){if(ys=Jr(ys-256,Sr),Fs=cs(ms.G[4],ms.H[4],Sr),er(Sr),Fs=ls(Qn,Fs=Jr(Fs,Sr)),Sr.h)break;if(rs-Wn<Fs||dr-rs<ys)break e;for(Ls=0;Ls<ys;++Ls)jn[rs+Ls]=jn[rs+Ls-Fs];for(rs+=ys,_r+=ys;_r>=Qn;)_r-=Qn,++xr,mr!=null&&xr<=pr&&!(xr%16)&&mr(wn,xr);if(e(rs<=dr),_r&Gr&&(ms=As(Ur,_r,xr)),zr!=null)for(;ss<rs;)ys=jn[ss++],zr.X[(506832829*ys&4294967295)>>>zr.Mb]=ys}else{if(!(ys<xs))break e;for(_s=ys-280,e(zr!=null);ss<rs;)ys=jn[ss++],zr.X[(506832829*ys&4294967295)>>>zr.Mb]=ys;ys=rs,e(!(_s>>>(Fs=zr).Xa)),jn[ys]=Fs.X[_s],_s=!0}_s||e(Sr.h==Un(Sr))}if(wn.Pb&&Sr.h&&rs<dr)e(wn.m.h),wn.a=5,wn.m=wn.wd,wn.$=wn.xd,0<wn.s.ua&&Ar(wn.s.vb,wn.s.Wa);else{if(Sr.h)break e;mr!=null&&mr(wn,xr>pr?pr:xr),wn.a=0,wn.$=rs-Wn}return 1}return wn.a=3,0}function Us(wn){e(wn!=null),wn.vc=null,wn.yc=null,wn.Ya=null;var jn=wn.Wa;jn!=null&&(jn.X=null),wn.vb=null,e(wn!=null)}function zs(){var wn=new Rp;return wn==null?null:(wn.a=0,wn.xb=hy,Wr("Predictor","VP8LPredictors"),Wr("Predictor","VP8LPredictors_C"),Wr("PredictorAdd","VP8LPredictorsAdd"),Wr("PredictorAdd","VP8LPredictorsAdd_C"),Tm=ts,sp=ps,Bo=as,Mo=Ss,Cu=js,ru=Bs,su=es,Nn.VP8LMapColor32b=Cp,Nn.VP8LMapColor8b=Pm,wn)}function Zs(wn,jn,Wn,Qn,dr){var pr=1,mr=[wn],xr=[jn],_r=Qn.m,Sr=Qn.s,Ur=null,rs=0;e:for(;;){if(Wn)for(;pr&&ar(_r,1);){var ss=mr,Qr=xr,xs=Qn,us=1,zr=xs.m,Gr=xs.gc[xs.ab],ms=ar(zr,2);if(xs.Oc&1<<ms)pr=0;else{switch(xs.Oc|=1<<ms,Gr.hc=ms,Gr.Ea=ss[0],Gr.nc=Qr[0],Gr.K=[null],++xs.ab,e(4>=xs.ab),ms){case 0:case 1:Gr.b=ar(zr,3)+2,us=Zs(cr(Gr.Ea,Gr.b),cr(Gr.nc,Gr.b),0,xs,Gr.K),Gr.K=Gr.K[0];break;case 3:var _s,ys=ar(zr,8)+1,Fs=16<ys?0:4<ys?1:2<ys?2:3;if(ss[0]=cr(Gr.Ea,Fs),Gr.b=Fs,_s=us=Zs(ys,1,0,xs,Gr.K)){var Ls,qs=ys,Ds=Gr,_i=1<<(8>>Ds.b),ro=fn(_i);if(ro==null)_s=0;else{var Js=Ds.K[0],Xs=Ds.w;for(ro[0]=Ds.K[0][0],Ls=1;Ls<1*qs;++Ls)ro[Ls]=hr(Js[Xs+Ls],ro[Ls-1]);for(;Ls<4*_i;++Ls)ro[Ls]=0;Ds.K[0]=null,Ds.K[0]=ro,_s=1}}us=_s;break;case 2:break;default:e(0)}pr=us}}if(mr=mr[0],xr=xr[0],pr&&ar(_r,1)&&!(pr=1<=(rs=ar(_r,4))&&11>=rs)){Qn.a=3;break e}var lo;if(lo=pr)t:{var oo,Ks,_o,Uo=Qn,Eo=mr,zo=xr,so=rs,Ko=Wn,Yo=Uo.m,To=Uo.s,No=[null],Oo=1,yl=0,Hl=Nx[so];n:for(;;){if(Ko&&ar(Yo,1)){var So=ar(Yo,3)+2,lu=cr(Eo,So),cp=cr(zo,So),Mp=lu*cp;if(!Zs(lu,cp,0,Uo,No))break n;for(No=No[0],To.xc=So,oo=0;oo<Mp;++oo){var Mu=No[oo]>>8&65535;No[oo]=Mu,Mu>=Oo&&(Oo=Mu+1)}}if(Yo.h)break n;for(Ks=0;5>Ks;++Ks){var mo=uy[Ks];!Ks&&0<so&&(mo+=1<<so),yl<mo&&(yl=mo)}var x0=pn(Oo*Hl,Mn),Ey=Oo,by=pn(Ey,Xn);if(by==null)var $m=null;else e(65536>=Ey),$m=by;var fm=fn(yl);if($m==null||fm==null||x0==null){Uo.a=1;break n}var Bm=x0;for(oo=_o=0;oo<Oo;++oo){var Nl=$m[oo],Dp=Nl.G,Op=Nl.H,wy=0,Um=1,Ay=0;for(Ks=0;5>Ks;++Ks){mo=uy[Ks],Dp[Ks]=Bm,Op[Ks]=_o,!Ks&&0<so&&(mo+=1<<so);s:{var zm,v0=mo,qm=Uo,pm=fm,Jx=Bm,Zx=_o,_0=0,Du=qm.m,ev=ar(Du,1);if(hn(pm,0,0,v0),ev){var tv=ar(Du,1)+1,nv=ar(Du,1),Ry=ar(Du,nv==0?1:8);pm[Ry]=1,tv==2&&(pm[Ry=ar(Du,8)]=1);var Hm=1}else{var Ty=fn(19),Sy=ar(Du,4)+4;if(19<Sy){qm.a=3;var Wm=0;break s}for(zm=0;zm<Sy;++zm)Ty[Ix[zm]]=ar(Du,3);var E0=void 0,mm=void 0,Py=qm,rv=Ty,Gm=v0,Iy=pm,b0=0,Ou=Py.m,Cy=8,Ny=pn(128,Mn);r:for(;Cn(Ny,0,7,rv,19);){if(ar(Ou,1)){var sv=2+2*ar(Ou,3);if((E0=2+ar(Ou,sv))>Gm)break r}else E0=Gm;for(mm=0;mm<Gm&&E0--;){er(Ou);var jy=Ny[0+(127&On(Ou))];Yn(Ou,Ou.u+jy.g);var Fp=jy.value;if(16>Fp)Iy[mm++]=Fp,Fp!=0&&(Cy=Fp);else{var iv=Fp==16,ky=Fp-16,ov=Sx[ky],Ly=ar(Ou,Tx[ky])+ov;if(mm+Ly>Gm)break r;for(var av=iv?Cy:0;0<Ly--;)Iy[mm++]=av}}b0=1;break r}b0||(Py.a=3),Hm=b0}(Hm=Hm&&!Du.h)&&(_0=Cn(Jx,Zx,8,pm,v0)),Hm&&_0!=0?Wm=_0:(qm.a=3,Wm=0)}if(Wm==0)break n;if(Um&&Px[Ks]==1&&(Um=Bm[_o].g==0),wy+=Bm[_o].g,_o+=Wm,3>=Ks){var gm,w0=fm[0];for(gm=1;gm<mo;++gm)fm[gm]>w0&&(w0=fm[gm]);Ay+=w0}}if(Nl.nd=Um,Nl.Qb=0,Um&&(Nl.qb=(Dp[3][Op[3]+0].value<<24|Dp[1][Op[1]+0].value<<16|Dp[2][Op[2]+0].value)>>>0,wy==0&&256>Dp[0][Op[0]+0].value&&(Nl.Qb=1,Nl.qb+=Dp[0][Op[0]+0].value<<8)),Nl.jc=!Nl.Qb&&6>Ay,Nl.jc){var Km,cu=Nl;for(Km=0;Km<Co;++Km){var Fu=Km,Vu=cu.pd[Fu],Ym=cu.G[0][cu.H[0]+Fu];256<=Ym.value?(Vu.g=Ym.g+256,Vu.value=Ym.value):(Vu.g=0,Vu.value=0,Fu>>=Rs(Ym,8,Vu),Fu>>=Rs(cu.G[1][cu.H[1]+Fu],16,Vu),Fu>>=Rs(cu.G[2][cu.H[2]+Fu],0,Vu),Rs(cu.G[3][cu.H[3]+Fu],24,Vu))}}}To.vc=No,To.Wb=Oo,To.Ya=$m,To.yc=x0,lo=1;break t}lo=0}if(!(pr=lo)){Qn.a=3;break e}if(0<rs){if(Sr.ua=1<<rs,!qr(Sr.Wa,rs)){Qn.a=1,pr=0;break e}}else Sr.ua=0;var A0=Qn,My=mr,lv=xr,R0=A0.s,T0=R0.xc;if(A0.c=My,A0.i=lv,R0.md=cr(My,T0),R0.wc=T0==0?-1:(1<<T0)-1,Wn){Qn.xb=Vx;break e}if((Ur=fn(mr*xr))==null){Qn.a=1,pr=0;break e}pr=(pr=Vs(Qn,Ur,0,mr,xr,xr,null))&&!_r.h;break e}return pr?(dr!=null?dr[0]=Ur:(e(Ur==null),e(Wn)),Qn.$=0,Wn||Us(Sr)):Us(Sr),pr}function Qs(wn,jn){var Wn=wn.c*wn.i,Qn=Wn+jn+16*jn;return e(wn.c<=jn),wn.V=fn(Qn),wn.V==null?(wn.Ta=null,wn.Ua=0,wn.a=1,0):(wn.Ta=wn.V,wn.Ua=wn.Ba+Wn+jn,1)}function vo(wn,jn){var Wn=wn.C,Qn=jn-Wn,dr=wn.V,pr=wn.Ba+wn.c*Wn;for(e(jn<=wn.l.o);0<Qn;){var mr=16<Qn?16:Qn,xr=wn.l.ma,_r=wn.l.width,Sr=_r*mr,Ur=xr.ca,rs=xr.tb+_r*Wn,ss=wn.Ta,Qr=wn.Ua;gs(wn,mr,dr,pr),xo(ss,Qr,Ur,rs,Sr),Is(xr,Wn,Wn+mr,Ur,rs,_r),Qn-=mr,dr+=mr*wn.c,Wn+=mr}e(Wn==jn),wn.C=wn.Ma=jn}function bo(){this.ub=this.yd=this.td=this.Rb=0}function Ro(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qo(){this.Fb=this.Bb=this.Cb=0,this.Zb=fn(4),this.Lb=fn(4)}function mp(){this.Yb=function(){var wn=[];return function jn(Wn,Qn,dr){for(var pr=dr[Qn],mr=0;mr<pr&&(Wn.push(dr.length>Qn+1?[]:0),!(dr.length<Qn+1));mr++)jn(Wn[mr],Qn+1,dr)}(wn,0,[3,11]),wn}()}function hu(){this.jb=fn(3),this.Wc=mn([4,8],mp),this.Xc=mn([4,17],mp)}function gp(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new fn(4),this.od=new fn(4)}function Ml(){this.ld=this.La=this.dd=this.tc=0}function Dl(){this.Na=this.la=0}function El(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Yl(){this.ad=fn(384),this.Za=0,this.Ob=fn(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zp(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ml),this.Y=0,this.ya=Array(new Yl),this.aa=0,this.l=new Xl}function Gu(){this.y=fn(16),this.f=fn(8),this.ea=fn(8)}function yp(){this.cb=this.a=0,this.sc="",this.m=new gr,this.Od=new bo,this.Kc=new Ro,this.ed=new gp,this.Qa=new Qo,this.Ic=this.$c=this.Aa=0,this.D=new Zp,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=pn(8,gr),this.ia=0,this.pb=pn(4,El),this.Pa=new hu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gu),this.Hd=0,this.rb=Array(new Dl),this.sb=0,this.wa=Array(new Ml),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Yl),this.L=this.aa=0,this.gd=mn([4,2],Ml),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ku(){var wn=new yp;return wn!=null&&(wn.a=0,wn.sc="OK",wn.cb=0,wn.Xb=0,dm||(dm=xp)),wn}function ho(wn,jn,Wn){return wn.a==0&&(wn.a=jn,wn.sc=Wn,wn.cb=0),0}function Yu(wn,jn,Wn){return 3<=Wn&&wn[jn+0]==157&&wn[jn+1]==1&&wn[jn+2]==42}function Xu(wn,jn){if(wn==null)return 0;if(wn.a=0,wn.sc="OK",jn==null)return ho(wn,2,"null VP8Io passed to VP8GetHeaders()");var Wn=jn.data,Qn=jn.w,dr=jn.ha;if(4>dr)return ho(wn,7,"Truncated header.");var pr=Wn[Qn+0]|Wn[Qn+1]<<8|Wn[Qn+2]<<16,mr=wn.Od;if(mr.Rb=!(1&pr),mr.td=pr>>1&7,mr.yd=pr>>4&1,mr.ub=pr>>5,3<mr.td)return ho(wn,3,"Incorrect keyframe parameters.");if(!mr.yd)return ho(wn,4,"Frame not displayable.");Qn+=3,dr-=3;var xr=wn.Kc;if(mr.Rb){if(7>dr)return ho(wn,7,"cannot parse picture header");if(!Yu(Wn,Qn,dr))return ho(wn,3,"Bad code word");xr.c=16383&(Wn[Qn+4]<<8|Wn[Qn+3]),xr.Td=Wn[Qn+4]>>6,xr.i=16383&(Wn[Qn+6]<<8|Wn[Qn+5]),xr.Ud=Wn[Qn+6]>>6,Qn+=7,dr-=7,wn.za=xr.c+15>>4,wn.Ub=xr.i+15>>4,jn.width=xr.c,jn.height=xr.i,jn.Da=0,jn.j=0,jn.v=0,jn.va=jn.width,jn.o=jn.height,jn.da=0,jn.ib=jn.width,jn.hb=jn.height,jn.U=jn.width,jn.T=jn.height,hn((pr=wn.Pa).jb,0,255,pr.jb.length),e((pr=wn.Qa)!=null),pr.Cb=0,pr.Bb=0,pr.Fb=1,hn(pr.Zb,0,0,pr.Zb.length),hn(pr.Lb,0,0,pr.Lb)}if(mr.ub>dr)return ho(wn,7,"bad partition length");nr(pr=wn.m,Wn,Qn,mr.ub),Qn+=mr.ub,dr-=mr.ub,mr.Rb&&(xr.Ld=ir(pr),xr.Kd=ir(pr)),xr=wn.Qa;var _r,Sr=wn.Pa;if(e(pr!=null),e(xr!=null),xr.Cb=ir(pr),xr.Cb){if(xr.Bb=ir(pr),ir(pr)){for(xr.Fb=ir(pr),_r=0;4>_r;++_r)xr.Zb[_r]=ir(pr)?lr(pr,7):0;for(_r=0;4>_r;++_r)xr.Lb[_r]=ir(pr)?lr(pr,6):0}if(xr.Bb)for(_r=0;3>_r;++_r)Sr.jb[_r]=ir(pr)?sr(pr,8):255}else xr.Bb=0;if(pr.Ka)return ho(wn,3,"cannot parse segment header");if((xr=wn.ed).zd=ir(pr),xr.Tb=sr(pr,6),xr.wb=sr(pr,3),xr.Pc=ir(pr),xr.Pc&&ir(pr)){for(Sr=0;4>Sr;++Sr)ir(pr)&&(xr.vd[Sr]=lr(pr,6));for(Sr=0;4>Sr;++Sr)ir(pr)&&(xr.od[Sr]=lr(pr,6))}if(wn.L=xr.Tb==0?0:xr.zd?1:2,pr.Ka)return ho(wn,3,"cannot parse filter header");var Ur=dr;if(dr=_r=Qn,Qn=_r+Ur,xr=Ur,wn.Xb=(1<<sr(wn.m,2))-1,Ur<3*(Sr=wn.Xb))Wn=7;else{for(_r+=3*Sr,xr-=3*Sr,Ur=0;Ur<Sr;++Ur){var rs=Wn[dr+0]|Wn[dr+1]<<8|Wn[dr+2]<<16;rs>xr&&(rs=xr),nr(wn.Jc[+Ur],Wn,_r,rs),_r+=rs,xr-=rs,dr+=3}nr(wn.Jc[+Sr],Wn,_r,xr),Wn=_r<Qn?0:5}if(Wn!=0)return ho(wn,Wn,"cannot parse partitions");for(Wn=sr(_r=wn.m,7),dr=ir(_r)?lr(_r,4):0,Qn=ir(_r)?lr(_r,4):0,xr=ir(_r)?lr(_r,4):0,Sr=ir(_r)?lr(_r,4):0,_r=ir(_r)?lr(_r,4):0,Ur=wn.Qa,rs=0;4>rs;++rs){if(Ur.Cb){var ss=Ur.Zb[rs];Ur.Fb||(ss+=Wn)}else{if(0<rs){wn.pb[rs]=wn.pb[0];continue}ss=Wn}var Qr=wn.pb[rs];Qr.Sc[0]=m0[to(ss+dr,127)],Qr.Sc[1]=g0[to(ss+0,127)],Qr.Eb[0]=2*m0[to(ss+Qn,127)],Qr.Eb[1]=101581*g0[to(ss+xr,127)]>>16,8>Qr.Eb[1]&&(Qr.Eb[1]=8),Qr.Qc[0]=m0[to(ss+Sr,117)],Qr.Qc[1]=g0[to(ss+_r,127)],Qr.lc=ss+_r}if(!mr.Rb)return ho(wn,4,"Not a key frame.");for(ir(pr),mr=wn.Pa,Wn=0;4>Wn;++Wn){for(dr=0;8>dr;++dr)for(Qn=0;3>Qn;++Qn)for(xr=0;11>xr;++xr)Sr=fr(pr,Ox[Wn][dr][Qn][xr])?sr(pr,8):Mx[Wn][dr][Qn][xr],mr.Wc[Wn][dr].Yb[Qn][xr]=Sr;for(dr=0;17>dr;++dr)mr.Xc[Wn][dr]=mr.Wc[Wn][Fx[dr]]}return wn.kc=ir(pr),wn.kc&&(wn.Bd=sr(pr,8)),wn.cb=1}function xp(wn,jn,Wn,Qn,dr,pr,mr){var xr=jn[dr].Yb[Wn];for(Wn=0;16>dr;++dr){if(!fr(wn,xr[Wn+0]))return dr;for(;!fr(wn,xr[Wn+1]);)if(xr=jn[++dr].Yb[0],Wn=0,dr==16)return 16;var _r=jn[dr+1].Yb;if(fr(wn,xr[Wn+2])){var Sr=wn,Ur=0;if(fr(Sr,(ss=xr)[(rs=Wn)+3]))if(fr(Sr,ss[rs+6])){for(xr=0,rs=2*(Ur=fr(Sr,ss[rs+8]))+(ss=fr(Sr,ss[rs+9+Ur])),Ur=0,ss=kx[rs];ss[xr];++xr)Ur+=Ur+fr(Sr,ss[xr]);Ur+=3+(8<<rs)}else fr(Sr,ss[rs+7])?(Ur=7+2*fr(Sr,165),Ur+=fr(Sr,145)):Ur=5+fr(Sr,159);else Ur=fr(Sr,ss[rs+4])?3+fr(Sr,ss[rs+5]):2;xr=_r[2]}else Ur=1,xr=_r[1];_r=mr+Lx[dr],0>(Sr=wn).b&&Zn(Sr);var rs,ss=Sr.b,Qr=(rs=Sr.Ca>>1)-(Sr.I>>ss)>>31;--Sr.b,Sr.Ca+=Qr,Sr.Ca|=1,Sr.I-=(rs+1&Qr)<<ss,pr[_r]=((Ur^Qr)-Qr)*Qn[(0<dr)+0]}return 16}function Qu(wn){var jn=wn.rb[wn.sb-1];jn.la=0,jn.Na=0,hn(wn.zc,0,0,wn.zc.length),wn.ja=0}function vp(wn,jn){if(wn==null)return 0;if(jn==null)return ho(wn,2,"NULL VP8Io parameter in VP8Decode().");if(!wn.cb&&!Xu(wn,jn))return 0;if(e(wn.cb),jn.ac==null||jn.ac(jn)){jn.ob&&(wn.L=0);var Wn=Vm[wn.L];if(wn.L==2?(wn.yb=0,wn.zb=0):(wn.yb=jn.v-Wn>>4,wn.zb=jn.j-Wn>>4,0>wn.yb&&(wn.yb=0),0>wn.zb&&(wn.zb=0)),wn.Va=jn.o+15+Wn>>4,wn.Hb=jn.va+15+Wn>>4,wn.Hb>wn.za&&(wn.Hb=wn.za),wn.Va>wn.Ub&&(wn.Va=wn.Ub),0<wn.L){var Qn=wn.ed;for(Wn=0;4>Wn;++Wn){var dr;if(wn.Qa.Cb){var pr=wn.Qa.Lb[Wn];wn.Qa.Fb||(pr+=Qn.Tb)}else pr=Qn.Tb;for(dr=0;1>=dr;++dr){var mr=wn.gd[Wn][dr],xr=pr;if(Qn.Pc&&(xr+=Qn.vd[0],dr&&(xr+=Qn.od[0])),0<(xr=0>xr?0:63<xr?63:xr)){var _r=xr;0<Qn.wb&&(_r=4<Qn.wb?_r>>2:_r>>1)>9-Qn.wb&&(_r=9-Qn.wb),1>_r&&(_r=1),mr.dd=_r,mr.tc=2*xr+_r,mr.ld=40<=xr?2:15<=xr?1:0}else mr.tc=0;mr.La=dr}}}Wn=0}else ho(wn,6,"Frame setup failed"),Wn=wn.a;if(Wn=Wn==0){if(Wn){wn.$c=0,0<wn.Aa||(wn.Ic=Qx);e:{Wn=wn.Ic,Qn=4*(_r=wn.za);var Sr=32*_r,Ur=_r+1,rs=0<wn.L?_r*(0<wn.Aa?2:1):0,ss=(wn.Aa==2?2:1)*_r;if((mr=Qn+832+(dr=3*(16*Wn+Vm[wn.L])/2*Sr)+(pr=wn.Fa!=null&&0<wn.Fa.length?wn.Kc.c*wn.Kc.i:0))!=mr)Wn=0;else{if(mr>wn.Vb){if(wn.Vb=0,wn.Ec=fn(mr),wn.Fc=0,wn.Ec==null){Wn=ho(wn,1,"no memory during frame initialization.");break e}wn.Vb=mr}mr=wn.Ec,xr=wn.Fc,wn.Ac=mr,wn.Bc=xr,xr+=Qn,wn.Gd=pn(Sr,Gu),wn.Hd=0,wn.rb=pn(Ur+1,Dl),wn.sb=1,wn.wa=rs?pn(rs,Ml):null,wn.Y=0,wn.D.Nb=0,wn.D.wa=wn.wa,wn.D.Y=wn.Y,0<wn.Aa&&(wn.D.Y+=_r),e(!0),wn.oc=mr,wn.pc=xr,xr+=832,wn.ya=pn(ss,Yl),wn.aa=0,wn.D.ya=wn.ya,wn.D.aa=wn.aa,wn.Aa==2&&(wn.D.aa+=_r),wn.R=16*_r,wn.B=8*_r,_r=(Sr=Vm[wn.L])*wn.R,Sr=Sr/2*wn.B,wn.sa=mr,wn.ta=xr+_r,wn.qa=wn.sa,wn.ra=wn.ta+16*Wn*wn.R+Sr,wn.Ha=wn.qa,wn.Ia=wn.ra+8*Wn*wn.B+Sr,wn.$c=0,xr+=dr,wn.mb=pr?mr:null,wn.nb=pr?xr:null,e(xr+pr<=wn.Fc+wn.Vb),Qu(wn),hn(wn.Ac,wn.Bc,0,Qn),Wn=1}}if(Wn){if(jn.ka=0,jn.y=wn.sa,jn.O=wn.ta,jn.f=wn.qa,jn.N=wn.ra,jn.ea=wn.Ha,jn.Vd=wn.Ia,jn.fa=wn.R,jn.Rc=wn.B,jn.F=null,jn.J=0,!Cm){for(Wn=-255;255>=Wn;++Wn)Ao[255+Wn]=0>Wn?-Wn:Wn;for(Wn=-1020;1020>=Wn;++Wn)ou[1020+Wn]=-128>Wn?-128:127<Wn?127:Wn;for(Wn=-112;112>=Wn;++Wn)um[112+Wn]=-16>Wn?-16:15<Wn?15:Wn;for(Wn=-255;510>=Wn;++Wn)Lp[255+Wn]=0>Wn?0:255<Wn?255:Wn;Cm=1}Np=Zl,iu=pu,am=Ju,Do=no,na=Jl,yo=Ql,jp=Eu,Im=Sl,lm=wu,ip=rp,op=bu,Nu=eu,ap=Au,kp=$l,lp=_c,ju=Wo,cm=wo,ga=Ap,Cl[0]=Jo,Cl[1]=em,Cl[2]=Fl,Cl[3]=nm,Cl[4]=bp,Cl[5]=yu,Cl[6]=qo,Cl[7]=_d,Cl[8]=vu,Cl[9]=xu,ku[0]=Ol,ku[1]=tm,ku[2]=Al,ku[3]=mu,ku[4]=fo,ku[5]=Ep,ku[6]=Zu,au[0]=Tl,au[1]=_p,au[2]=wp,au[3]=Rl,au[4]=eo,au[5]=_h,au[6]=_f,Wn=1}else Wn=0}Wn&&(Wn=function(Qr,xs){for(Qr.M=0;Qr.M<Qr.Va;++Qr.M){var us,zr=Qr.Jc[Qr.M&Qr.Xb],Gr=Qr.m,ms=Qr;for(us=0;us<ms.za;++us){var _s=Gr,ys=ms,Fs=ys.Ac,Ls=ys.Bc+4*us,qs=ys.zc,Ds=ys.ya[ys.aa+us];if(ys.Qa.Bb?Ds.$b=fr(_s,ys.Pa.jb[0])?2+fr(_s,ys.Pa.jb[2]):fr(_s,ys.Pa.jb[1]):Ds.$b=0,ys.kc&&(Ds.Ad=fr(_s,ys.Bd)),Ds.Za=!fr(_s,145)+0,Ds.Za){var _i=Ds.Ob,ro=0;for(ys=0;4>ys;++ys){var Js,Xs=qs[0+ys];for(Js=0;4>Js;++Js){Xs=Dx[Fs[Ls+Js]][Xs];for(var lo=dy[fr(_s,Xs[0])];0<lo;)lo=dy[2*lo+fr(_s,Xs[lo])];Xs=-lo,Fs[Ls+Js]=Xs}dn(_i,ro,Fs,Ls,4),ro+=4,qs[0+ys]=Xs}}else Xs=fr(_s,156)?fr(_s,128)?1:3:fr(_s,163)?2:0,Ds.Ob[0]=Xs,hn(Fs,Ls,Xs,4),hn(qs,0,Xs,4);Ds.Dd=fr(_s,142)?fr(_s,114)?fr(_s,183)?1:3:2:0}if(ms.m.Ka)return ho(Qr,7,"Premature end-of-partition0 encountered.");for(;Qr.ja<Qr.za;++Qr.ja){if(ms=zr,_s=(Gr=Qr).rb[Gr.sb-1],Fs=Gr.rb[Gr.sb+Gr.ja],us=Gr.ya[Gr.aa+Gr.ja],Ls=Gr.kc?us.Ad:0)_s.la=Fs.la=0,us.Za||(_s.Na=Fs.Na=0),us.Hc=0,us.Gc=0,us.ia=0;else{var oo,Ks;if(_s=Fs,Fs=ms,Ls=Gr.Pa.Xc,qs=Gr.ya[Gr.aa+Gr.ja],Ds=Gr.pb[qs.$b],ys=qs.ad,_i=0,ro=Gr.rb[Gr.sb-1],Xs=Js=0,hn(ys,_i,0,384),qs.Za)var _o=0,Uo=Ls[3];else{lo=fn(16);var Eo=_s.Na+ro.Na;if(Eo=dm(Fs,Ls[1],Eo,Ds.Eb,0,lo,0),_s.Na=ro.Na=(0<Eo)+0,1<Eo)Np(lo,0,ys,_i);else{var zo=lo[0]+3>>3;for(lo=0;256>lo;lo+=16)ys[_i+lo]=zo}_o=1,Uo=Ls[0]}var so=15&_s.la,Ko=15&ro.la;for(lo=0;4>lo;++lo){var Yo=1&Ko;for(zo=Ks=0;4>zo;++zo)so=so>>1|(Yo=(Eo=dm(Fs,Uo,Eo=Yo+(1&so),Ds.Sc,_o,ys,_i))>_o)<<7,Ks=Ks<<2|(3<Eo?3:1<Eo?2:ys[_i+0]!=0),_i+=16;so>>=4,Ko=Ko>>1|Yo<<7,Js=(Js<<8|Ks)>>>0}for(Uo=so,_o=Ko>>4,oo=0;4>oo;oo+=2){for(Ks=0,so=_s.la>>4+oo,Ko=ro.la>>4+oo,lo=0;2>lo;++lo){for(Yo=1&Ko,zo=0;2>zo;++zo)Eo=Yo+(1&so),so=so>>1|(Yo=0<(Eo=dm(Fs,Ls[2],Eo,Ds.Qc,0,ys,_i)))<<3,Ks=Ks<<2|(3<Eo?3:1<Eo?2:ys[_i+0]!=0),_i+=16;so>>=2,Ko=Ko>>1|Yo<<5}Xs|=Ks<<4*oo,Uo|=so<<4<<oo,_o|=(240&Ko)<<oo}_s.la=Uo,ro.la=_o,qs.Hc=Js,qs.Gc=Xs,qs.ia=43690&Xs?0:Ds.ia,Ls=!(Js|Xs)}if(0<Gr.L&&(Gr.wa[Gr.Y+Gr.ja]=Gr.gd[us.$b][us.Za],Gr.wa[Gr.Y+Gr.ja].La|=!Ls),ms.Ka)return ho(Qr,7,"Premature end-of-file encountered.")}if(Qu(Qr),Gr=xs,ms=1,us=(zr=Qr).D,_s=0<zr.L&&zr.M>=zr.zb&&zr.M<=zr.Va,zr.Aa==0)e:{if(us.M=zr.M,us.uc=_s,Ul(zr,us),ms=1,us=(Ks=zr.D).Nb,_s=(Xs=Vm[zr.L])*zr.R,Fs=Xs/2*zr.B,lo=16*us*zr.R,zo=8*us*zr.B,Ls=zr.sa,qs=zr.ta-_s+lo,Ds=zr.qa,ys=zr.ra-Fs+zo,_i=zr.Ha,ro=zr.Ia-Fs+zo,Ko=(so=Ks.M)==0,Js=so>=zr.Va-1,zr.Aa==2&&Ul(zr,Ks),Ks.uc)for(Yo=(Eo=zr).D.M,e(Eo.D.uc),Ks=Eo.yb;Ks<Eo.Hb;++Ks){_o=Ks,Uo=Yo;var To=(No=(mo=Eo).D).Nb;oo=mo.R;var No=No.wa[No.Y+_o],Oo=mo.sa,yl=mo.ta+16*To*oo+16*_o,Hl=No.dd,So=No.tc;if(So!=0)if(e(3<=So),mo.L==1)0<_o&&ju(Oo,yl,oo,So+4),No.La&&ga(Oo,yl,oo,So),0<Uo&&lp(Oo,yl,oo,So+4),No.La&&cm(Oo,yl,oo,So);else{var lu=mo.B,cp=mo.qa,Mp=mo.ra+8*To*lu+8*_o,Mu=mo.Ha,mo=mo.Ia+8*To*lu+8*_o;To=No.ld,0<_o&&(Im(Oo,yl,oo,So+4,Hl,To),ip(cp,Mp,Mu,mo,lu,So+4,Hl,To)),No.La&&(Nu(Oo,yl,oo,So,Hl,To),kp(cp,Mp,Mu,mo,lu,So,Hl,To)),0<Uo&&(jp(Oo,yl,oo,So+4,Hl,To),lm(cp,Mp,Mu,mo,lu,So+4,Hl,To)),No.La&&(op(Oo,yl,oo,So,Hl,To),ap(cp,Mp,Mu,mo,lu,So,Hl,To))}}if(zr.ia&&alert("todo:DitherRow"),Gr.put!=null){if(Ks=16*so,so=16*(so+1),Ko?(Gr.y=zr.sa,Gr.O=zr.ta+lo,Gr.f=zr.qa,Gr.N=zr.ra+zo,Gr.ea=zr.Ha,Gr.W=zr.Ia+zo):(Ks-=Xs,Gr.y=Ls,Gr.O=qs,Gr.f=Ds,Gr.N=ys,Gr.ea=_i,Gr.W=ro),Js||(so-=Xs),so>Gr.o&&(so=Gr.o),Gr.F=null,Gr.J=null,zr.Fa!=null&&0<zr.Fa.length&&Ks<so&&(Gr.J=Pu(zr,Gr,Ks,so-Ks),Gr.F=zr.mb,Gr.F==null&&Gr.F.length==0)){ms=ho(zr,3,"Could not decode alpha data.");break e}Ks<Gr.j&&(Xs=Gr.j-Ks,Ks=Gr.j,e(!(1&Xs)),Gr.O+=zr.R*Xs,Gr.N+=zr.B*(Xs>>1),Gr.W+=zr.B*(Xs>>1),Gr.F!=null&&(Gr.J+=Gr.width*Xs)),Ks<so&&(Gr.O+=Gr.v,Gr.N+=Gr.v>>1,Gr.W+=Gr.v>>1,Gr.F!=null&&(Gr.J+=Gr.v),Gr.ka=Ks-Gr.j,Gr.U=Gr.va-Gr.v,Gr.T=so-Ks,ms=Gr.put(Gr))}us+1!=zr.Ic||Js||(dn(zr.sa,zr.ta-_s,Ls,qs+16*zr.R,_s),dn(zr.qa,zr.ra-Fs,Ds,ys+8*zr.B,Fs),dn(zr.Ha,zr.Ia-Fs,_i,ro+8*zr.B,Fs))}if(!ms)return ho(Qr,6,"Output aborted.")}return 1}(wn,jn)),jn.bc!=null&&jn.bc(jn),Wn&=1}return Wn?(wn.cb=0,Wn):0}function Vo(wn,jn,Wn,Qn,dr){dr=wn[jn+Wn+32*Qn]+(dr>>3),wn[jn+Wn+32*Qn]=-256&dr?0>dr?0:255:dr}function fu(wn,jn,Wn,Qn,dr,pr){Vo(wn,jn,0,Wn,Qn+dr),Vo(wn,jn,1,Wn,Qn+pr),Vo(wn,jn,2,Wn,Qn-pr),Vo(wn,jn,3,Wn,Qn-dr)}function po(wn){return(20091*wn>>16)+wn}function Lo(wn,jn,Wn,Qn){var dr,pr=0,mr=fn(16);for(dr=0;4>dr;++dr){var xr=wn[jn+0]+wn[jn+8],_r=wn[jn+0]-wn[jn+8],Sr=(35468*wn[jn+4]>>16)-po(wn[jn+12]),Ur=po(wn[jn+4])+(35468*wn[jn+12]>>16);mr[pr+0]=xr+Ur,mr[pr+1]=_r+Sr,mr[pr+2]=_r-Sr,mr[pr+3]=xr-Ur,pr+=4,jn++}for(dr=pr=0;4>dr;++dr)xr=(wn=mr[pr+0]+4)+mr[pr+8],_r=wn-mr[pr+8],Sr=(35468*mr[pr+4]>>16)-po(mr[pr+12]),Vo(Wn,Qn,0,0,xr+(Ur=po(mr[pr+4])+(35468*mr[pr+12]>>16))),Vo(Wn,Qn,1,0,_r+Sr),Vo(Wn,Qn,2,0,_r-Sr),Vo(Wn,Qn,3,0,xr-Ur),pr++,Qn+=32}function Ql(wn,jn,Wn,Qn){var dr=wn[jn+0]+4,pr=35468*wn[jn+4]>>16,mr=po(wn[jn+4]),xr=35468*wn[jn+1]>>16;fu(Wn,Qn,0,dr+mr,wn=po(wn[jn+1]),xr),fu(Wn,Qn,1,dr+pr,wn,xr),fu(Wn,Qn,2,dr-pr,wn,xr),fu(Wn,Qn,3,dr-mr,wn,xr)}function pu(wn,jn,Wn,Qn,dr){Lo(wn,jn,Wn,Qn),dr&&Lo(wn,jn+16,Wn,Qn+4)}function Ju(wn,jn,Wn,Qn){iu(wn,jn+0,Wn,Qn,1),iu(wn,jn+32,Wn,Qn+128,1)}function no(wn,jn,Wn,Qn){var dr;for(wn=wn[jn+0]+4,dr=0;4>dr;++dr)for(jn=0;4>jn;++jn)Vo(Wn,Qn,jn,dr,wn)}function Jl(wn,jn,Wn,Qn){wn[jn+0]&&Do(wn,jn+0,Wn,Qn),wn[jn+16]&&Do(wn,jn+16,Wn,Qn+4),wn[jn+32]&&Do(wn,jn+32,Wn,Qn+128),wn[jn+48]&&Do(wn,jn+48,Wn,Qn+128+4)}function Zl(wn,jn,Wn,Qn){var dr,pr=fn(16);for(dr=0;4>dr;++dr){var mr=wn[jn+0+dr]+wn[jn+12+dr],xr=wn[jn+4+dr]+wn[jn+8+dr],_r=wn[jn+4+dr]-wn[jn+8+dr],Sr=wn[jn+0+dr]-wn[jn+12+dr];pr[0+dr]=mr+xr,pr[8+dr]=mr-xr,pr[4+dr]=Sr+_r,pr[12+dr]=Sr-_r}for(dr=0;4>dr;++dr)mr=(wn=pr[0+4*dr]+3)+pr[3+4*dr],xr=pr[1+4*dr]+pr[2+4*dr],_r=pr[1+4*dr]-pr[2+4*dr],Sr=wn-pr[3+4*dr],Wn[Qn+0]=mr+xr>>3,Wn[Qn+16]=Sr+_r>>3,Wn[Qn+32]=mr-xr>>3,Wn[Qn+48]=Sr-_r>>3,Qn+=64}function wl(wn,jn,Wn){var Qn,dr=jn-32,pr=Go,mr=255-wn[dr-1];for(Qn=0;Qn<Wn;++Qn){var xr,_r=pr,Sr=mr+wn[jn-1];for(xr=0;xr<Wn;++xr)wn[jn+xr]=_r[Sr+wn[dr+xr]];jn+=32}}function em(wn,jn){wl(wn,jn,4)}function _p(wn,jn){wl(wn,jn,8)}function tm(wn,jn){wl(wn,jn,16)}function Al(wn,jn){var Wn;for(Wn=0;16>Wn;++Wn)dn(wn,jn+32*Wn,wn,jn-32,16)}function mu(wn,jn){var Wn;for(Wn=16;0<Wn;--Wn)hn(wn,jn,wn[jn-1],16),jn+=32}function gu(wn,jn,Wn){var Qn;for(Qn=0;16>Qn;++Qn)hn(jn,Wn+32*Qn,wn,16)}function Ol(wn,jn){var Wn,Qn=16;for(Wn=0;16>Wn;++Wn)Qn+=wn[jn-1+32*Wn]+wn[jn+Wn-32];gu(Qn>>5,wn,jn)}function fo(wn,jn){var Wn,Qn=8;for(Wn=0;16>Wn;++Wn)Qn+=wn[jn-1+32*Wn];gu(Qn>>4,wn,jn)}function Ep(wn,jn){var Wn,Qn=8;for(Wn=0;16>Wn;++Wn)Qn+=wn[jn+Wn-32];gu(Qn>>4,wn,jn)}function Zu(wn,jn){gu(128,wn,jn)}function Hs(wn,jn,Wn){return wn+2*jn+Wn+2>>2}function Fl(wn,jn){var Wn,Qn=jn-32;for(Qn=new Uint8Array([Hs(wn[Qn-1],wn[Qn+0],wn[Qn+1]),Hs(wn[Qn+0],wn[Qn+1],wn[Qn+2]),Hs(wn[Qn+1],wn[Qn+2],wn[Qn+3]),Hs(wn[Qn+2],wn[Qn+3],wn[Qn+4])]),Wn=0;4>Wn;++Wn)dn(wn,jn+32*Wn,Qn,0,Qn.length)}function nm(wn,jn){var Wn=wn[jn-1],Qn=wn[jn-1+32],dr=wn[jn-1+64],pr=wn[jn-1+96];br(wn,jn+0,16843009*Hs(wn[jn-1-32],Wn,Qn)),br(wn,jn+32,16843009*Hs(Wn,Qn,dr)),br(wn,jn+64,16843009*Hs(Qn,dr,pr)),br(wn,jn+96,16843009*Hs(dr,pr,pr))}function Jo(wn,jn){var Wn,Qn=4;for(Wn=0;4>Wn;++Wn)Qn+=wn[jn+Wn-32]+wn[jn-1+32*Wn];for(Qn>>=3,Wn=0;4>Wn;++Wn)hn(wn,jn+32*Wn,Qn,4)}function bp(wn,jn){var Wn=wn[jn-1+0],Qn=wn[jn-1+32],dr=wn[jn-1+64],pr=wn[jn-1-32],mr=wn[jn+0-32],xr=wn[jn+1-32],_r=wn[jn+2-32],Sr=wn[jn+3-32];wn[jn+0+96]=Hs(Qn,dr,wn[jn-1+96]),wn[jn+1+96]=wn[jn+0+64]=Hs(Wn,Qn,dr),wn[jn+2+96]=wn[jn+1+64]=wn[jn+0+32]=Hs(pr,Wn,Qn),wn[jn+3+96]=wn[jn+2+64]=wn[jn+1+32]=wn[jn+0+0]=Hs(mr,pr,Wn),wn[jn+3+64]=wn[jn+2+32]=wn[jn+1+0]=Hs(xr,mr,pr),wn[jn+3+32]=wn[jn+2+0]=Hs(_r,xr,mr),wn[jn+3+0]=Hs(Sr,_r,xr)}function qo(wn,jn){var Wn=wn[jn+1-32],Qn=wn[jn+2-32],dr=wn[jn+3-32],pr=wn[jn+4-32],mr=wn[jn+5-32],xr=wn[jn+6-32],_r=wn[jn+7-32];wn[jn+0+0]=Hs(wn[jn+0-32],Wn,Qn),wn[jn+1+0]=wn[jn+0+32]=Hs(Wn,Qn,dr),wn[jn+2+0]=wn[jn+1+32]=wn[jn+0+64]=Hs(Qn,dr,pr),wn[jn+3+0]=wn[jn+2+32]=wn[jn+1+64]=wn[jn+0+96]=Hs(dr,pr,mr),wn[jn+3+32]=wn[jn+2+64]=wn[jn+1+96]=Hs(pr,mr,xr),wn[jn+3+64]=wn[jn+2+96]=Hs(mr,xr,_r),wn[jn+3+96]=Hs(xr,_r,_r)}function yu(wn,jn){var Wn=wn[jn-1+0],Qn=wn[jn-1+32],dr=wn[jn-1+64],pr=wn[jn-1-32],mr=wn[jn+0-32],xr=wn[jn+1-32],_r=wn[jn+2-32],Sr=wn[jn+3-32];wn[jn+0+0]=wn[jn+1+64]=pr+mr+1>>1,wn[jn+1+0]=wn[jn+2+64]=mr+xr+1>>1,wn[jn+2+0]=wn[jn+3+64]=xr+_r+1>>1,wn[jn+3+0]=_r+Sr+1>>1,wn[jn+0+96]=Hs(dr,Qn,Wn),wn[jn+0+64]=Hs(Qn,Wn,pr),wn[jn+0+32]=wn[jn+1+96]=Hs(Wn,pr,mr),wn[jn+1+32]=wn[jn+2+96]=Hs(pr,mr,xr),wn[jn+2+32]=wn[jn+3+96]=Hs(mr,xr,_r),wn[jn+3+32]=Hs(xr,_r,Sr)}function _d(wn,jn){var Wn=wn[jn+0-32],Qn=wn[jn+1-32],dr=wn[jn+2-32],pr=wn[jn+3-32],mr=wn[jn+4-32],xr=wn[jn+5-32],_r=wn[jn+6-32],Sr=wn[jn+7-32];wn[jn+0+0]=Wn+Qn+1>>1,wn[jn+1+0]=wn[jn+0+64]=Qn+dr+1>>1,wn[jn+2+0]=wn[jn+1+64]=dr+pr+1>>1,wn[jn+3+0]=wn[jn+2+64]=pr+mr+1>>1,wn[jn+0+32]=Hs(Wn,Qn,dr),wn[jn+1+32]=wn[jn+0+96]=Hs(Qn,dr,pr),wn[jn+2+32]=wn[jn+1+96]=Hs(dr,pr,mr),wn[jn+3+32]=wn[jn+2+96]=Hs(pr,mr,xr),wn[jn+3+64]=Hs(mr,xr,_r),wn[jn+3+96]=Hs(xr,_r,Sr)}function xu(wn,jn){var Wn=wn[jn-1+0],Qn=wn[jn-1+32],dr=wn[jn-1+64],pr=wn[jn-1+96];wn[jn+0+0]=Wn+Qn+1>>1,wn[jn+2+0]=wn[jn+0+32]=Qn+dr+1>>1,wn[jn+2+32]=wn[jn+0+64]=dr+pr+1>>1,wn[jn+1+0]=Hs(Wn,Qn,dr),wn[jn+3+0]=wn[jn+1+32]=Hs(Qn,dr,pr),wn[jn+3+32]=wn[jn+1+64]=Hs(dr,pr,pr),wn[jn+3+64]=wn[jn+2+64]=wn[jn+0+96]=wn[jn+1+96]=wn[jn+2+96]=wn[jn+3+96]=pr}function vu(wn,jn){var Wn=wn[jn-1+0],Qn=wn[jn-1+32],dr=wn[jn-1+64],pr=wn[jn-1+96],mr=wn[jn-1-32],xr=wn[jn+0-32],_r=wn[jn+1-32],Sr=wn[jn+2-32];wn[jn+0+0]=wn[jn+2+32]=Wn+mr+1>>1,wn[jn+0+32]=wn[jn+2+64]=Qn+Wn+1>>1,wn[jn+0+64]=wn[jn+2+96]=dr+Qn+1>>1,wn[jn+0+96]=pr+dr+1>>1,wn[jn+3+0]=Hs(xr,_r,Sr),wn[jn+2+0]=Hs(mr,xr,_r),wn[jn+1+0]=wn[jn+3+32]=Hs(Wn,mr,xr),wn[jn+1+32]=wn[jn+3+64]=Hs(Qn,Wn,mr),wn[jn+1+64]=wn[jn+3+96]=Hs(dr,Qn,Wn),wn[jn+1+96]=Hs(pr,dr,Qn)}function wp(wn,jn){var Wn;for(Wn=0;8>Wn;++Wn)dn(wn,jn+32*Wn,wn,jn-32,8)}function Rl(wn,jn){var Wn;for(Wn=0;8>Wn;++Wn)hn(wn,jn,wn[jn-1],8),jn+=32}function Ho(wn,jn,Wn){var Qn;for(Qn=0;8>Qn;++Qn)hn(jn,Wn+32*Qn,wn,8)}function Tl(wn,jn){var Wn,Qn=8;for(Wn=0;8>Wn;++Wn)Qn+=wn[jn+Wn-32]+wn[jn-1+32*Wn];Ho(Qn>>4,wn,jn)}function _h(wn,jn){var Wn,Qn=4;for(Wn=0;8>Wn;++Wn)Qn+=wn[jn+Wn-32];Ho(Qn>>3,wn,jn)}function eo(wn,jn){var Wn,Qn=4;for(Wn=0;8>Wn;++Wn)Qn+=wn[jn-1+32*Wn];Ho(Qn>>3,wn,jn)}function _f(wn,jn){Ho(128,wn,jn)}function _u(wn,jn,Wn){var Qn=wn[jn-Wn],dr=wn[jn+0],pr=3*(dr-Qn)+u0[1020+wn[jn-2*Wn]-wn[jn+Wn]],mr=Nm[112+(pr+4>>3)];wn[jn-Wn]=Go[255+Qn+Nm[112+(pr+3>>3)]],wn[jn+0]=Go[255+dr-mr]}function ep(wn,jn,Wn,Qn){var dr=wn[jn+0],pr=wn[jn+Wn];return ba[255+wn[jn-2*Wn]-wn[jn-Wn]]>Qn||ba[255+pr-dr]>Qn}function tp(wn,jn,Wn,Qn){return 4*ba[255+wn[jn-Wn]-wn[jn+0]]+ba[255+wn[jn-2*Wn]-wn[jn+Wn]]<=Qn}function np(wn,jn,Wn,Qn,dr){var pr=wn[jn-3*Wn],mr=wn[jn-2*Wn],xr=wn[jn-Wn],_r=wn[jn+0],Sr=wn[jn+Wn],Ur=wn[jn+2*Wn],rs=wn[jn+3*Wn];return 4*ba[255+xr-_r]+ba[255+mr-Sr]>Qn?0:ba[255+wn[jn-4*Wn]-pr]<=dr&&ba[255+pr-mr]<=dr&&ba[255+mr-xr]<=dr&&ba[255+rs-Ur]<=dr&&ba[255+Ur-Sr]<=dr&&ba[255+Sr-_r]<=dr}function _c(wn,jn,Wn,Qn){var dr=2*Qn+1;for(Qn=0;16>Qn;++Qn)tp(wn,jn+Qn,Wn,dr)&&_u(wn,jn+Qn,Wn)}function Wo(wn,jn,Wn,Qn){var dr=2*Qn+1;for(Qn=0;16>Qn;++Qn)tp(wn,jn+Qn*Wn,1,dr)&&_u(wn,jn+Qn*Wn,1)}function wo(wn,jn,Wn,Qn){var dr;for(dr=3;0<dr;--dr)_c(wn,jn+=4*Wn,Wn,Qn)}function Ap(wn,jn,Wn,Qn){var dr;for(dr=3;0<dr;--dr)Wo(wn,jn+=4,Wn,Qn)}function Vl(wn,jn,Wn,Qn,dr,pr,mr,xr){for(pr=2*pr+1;0<dr--;){if(np(wn,jn,Wn,pr,mr))if(ep(wn,jn,Wn,xr))_u(wn,jn,Wn);else{var _r=wn,Sr=jn,Ur=Wn,rs=_r[Sr-2*Ur],ss=_r[Sr-Ur],Qr=_r[Sr+0],xs=_r[Sr+Ur],us=_r[Sr+2*Ur],zr=27*(ms=u0[1020+3*(Qr-ss)+u0[1020+rs-xs]])+63>>7,Gr=18*ms+63>>7,ms=9*ms+63>>7;_r[Sr-3*Ur]=Go[255+_r[Sr-3*Ur]+ms],_r[Sr-2*Ur]=Go[255+rs+Gr],_r[Sr-Ur]=Go[255+ss+zr],_r[Sr+0]=Go[255+Qr-zr],_r[Sr+Ur]=Go[255+xs-Gr],_r[Sr+2*Ur]=Go[255+us-ms]}jn+=Qn}}function Po(wn,jn,Wn,Qn,dr,pr,mr,xr){for(pr=2*pr+1;0<dr--;){if(np(wn,jn,Wn,pr,mr))if(ep(wn,jn,Wn,xr))_u(wn,jn,Wn);else{var _r=wn,Sr=jn,Ur=Wn,rs=_r[Sr-Ur],ss=_r[Sr+0],Qr=_r[Sr+Ur],xs=Nm[112+((us=3*(ss-rs))+4>>3)],us=Nm[112+(us+3>>3)],zr=xs+1>>1;_r[Sr-2*Ur]=Go[255+_r[Sr-2*Ur]+zr],_r[Sr-Ur]=Go[255+rs+us],_r[Sr+0]=Go[255+ss-xs],_r[Sr+Ur]=Go[255+Qr-zr]}jn+=Qn}}function Eu(wn,jn,Wn,Qn,dr,pr){Vl(wn,jn,Wn,1,16,Qn,dr,pr)}function Sl(wn,jn,Wn,Qn,dr,pr){Vl(wn,jn,1,Wn,16,Qn,dr,pr)}function bu(wn,jn,Wn,Qn,dr,pr){var mr;for(mr=3;0<mr;--mr)Po(wn,jn+=4*Wn,Wn,1,16,Qn,dr,pr)}function eu(wn,jn,Wn,Qn,dr,pr){var mr;for(mr=3;0<mr;--mr)Po(wn,jn+=4,1,Wn,16,Qn,dr,pr)}function wu(wn,jn,Wn,Qn,dr,pr,mr,xr){Vl(wn,jn,dr,1,8,pr,mr,xr),Vl(Wn,Qn,dr,1,8,pr,mr,xr)}function rp(wn,jn,Wn,Qn,dr,pr,mr,xr){Vl(wn,jn,1,dr,8,pr,mr,xr),Vl(Wn,Qn,1,dr,8,pr,mr,xr)}function Au(wn,jn,Wn,Qn,dr,pr,mr,xr){Po(wn,jn+4*dr,dr,1,8,pr,mr,xr),Po(Wn,Qn+4*dr,dr,1,8,pr,mr,xr)}function $l(wn,jn,Wn,Qn,dr,pr,mr,xr){Po(wn,jn+4,1,dr,8,pr,mr,xr),Po(Wn,Qn+4,1,dr,8,pr,mr,xr)}function tu(){this.ba=new Rr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ds,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ru(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Tu(){this.ua=0,this.Wa=new or,this.vb=new or,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Xn,this.yc=new Mn}function Rp(){this.xb=this.a=0,this.l=new Xl,this.ca=new Rr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new qn,this.Pb=0,this.wd=new qn,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Tu,this.ab=0,this.gc=pn(4,nu),this.Oc=0}function Pl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Bl(wn,jn,Wn,Qn,dr,pr,mr){for(wn=wn==null?0:wn[jn+0],jn=0;jn<mr;++jn)dr[pr+jn]=wn+Wn[Qn+jn]&255,wn=dr[pr+jn]}function Su(wn,jn,Wn,Qn,dr,pr,mr){var xr;if(wn==null)Bl(null,null,Wn,Qn,dr,pr,mr);else for(xr=0;xr<mr;++xr)dr[pr+xr]=wn[jn+xr]+Wn[Qn+xr]&255}function jo(wn,jn,Wn,Qn,dr,pr,mr){if(wn==null)Bl(null,null,Wn,Qn,dr,pr,mr);else{var xr,_r=wn[jn+0],Sr=_r,Ur=_r;for(xr=0;xr<mr;++xr)Sr=Ur+(_r=wn[jn+xr])-Sr,Ur=Wn[Qn+xr]+(-256&Sr?0>Sr?0:255:Sr)&255,Sr=_r,dr[pr+xr]=Ur}}function Pu(wn,jn,Wn,Qn){var dr=jn.width,pr=jn.o;if(e(wn!=null&&jn!=null),0>Wn||0>=Qn||Wn+Qn>pr)return null;if(!wn.Cc){if(wn.ga==null){var mr;if(wn.ga=new Pl,(mr=wn.ga==null)||(mr=jn.width*jn.o,e(wn.Gb.length==0),wn.Gb=fn(mr),wn.Uc=0,wn.Gb==null?mr=0:(wn.mb=wn.Gb,wn.nb=wn.Uc,wn.rc=null,mr=1),mr=!mr),!mr){mr=wn.ga;var xr=wn.Fa,_r=wn.P,Sr=wn.qc,Ur=wn.mb,rs=wn.nb,ss=_r+1,Qr=Sr-1,xs=mr.l;if(e(xr!=null&&Ur!=null&&jn!=null),Lu[0]=null,Lu[1]=Bl,Lu[2]=Su,Lu[3]=jo,mr.ca=Ur,mr.tb=rs,mr.c=jn.width,mr.i=jn.height,e(0<mr.c&&0<mr.i),1>=Sr)jn=0;else if(mr.$a=xr[_r+0]>>0&3,mr.Z=xr[_r+0]>>2&3,mr.Lc=xr[_r+0]>>4&3,_r=xr[_r+0]>>6&3,0>mr.$a||1<mr.$a||4<=mr.Z||1<mr.Lc||_r)jn=0;else if(xs.put=vr,xs.ac=Er,xs.bc=Lr,xs.ma=mr,xs.width=jn.width,xs.height=jn.height,xs.Da=jn.Da,xs.v=jn.v,xs.va=jn.va,xs.j=jn.j,xs.o=jn.o,mr.$a)e:{e(mr.$a==1),jn=zs();t:for(;;){if(jn==null){jn=0;break e}if(e(mr!=null),mr.mc=jn,jn.c=mr.c,jn.i=mr.i,jn.l=mr.l,jn.l.ma=mr,jn.l.width=mr.c,jn.l.height=mr.i,jn.a=0,tr(jn.m,xr,ss,Qr),!Zs(mr.c,mr.i,1,jn,null)||(jn.ab==1&&jn.gc[0].hc==3&&Ns(jn.s)?(mr.ic=1,xr=jn.c*jn.i,jn.Ta=null,jn.Ua=0,jn.V=fn(xr),jn.Ba=0,jn.V==null?(jn.a=1,jn=0):jn=1):(mr.ic=0,jn=Qs(jn,mr.c)),!jn))break t;jn=1;break e}mr.mc=null,jn=0}else jn=Qr>=mr.c*mr.i;mr=!jn}if(mr)return null;wn.ga.Lc!=1?wn.Ga=0:Qn=pr-Wn}e(wn.ga!=null),e(Wn+Qn<=pr);e:{if(jn=(xr=wn.ga).c,pr=xr.l.o,xr.$a==0){if(ss=wn.rc,Qr=wn.Vc,xs=wn.Fa,_r=wn.P+1+Wn*jn,Sr=wn.mb,Ur=wn.nb+Wn*jn,e(_r<=wn.P+wn.qc),xr.Z!=0)for(e(Lu[xr.Z]!=null),mr=0;mr<Qn;++mr)Lu[xr.Z](ss,Qr,xs,_r,Sr,Ur,jn),ss=Sr,Qr=Ur,Ur+=jn,_r+=jn;else for(mr=0;mr<Qn;++mr)dn(Sr,Ur,xs,_r,jn),ss=Sr,Qr=Ur,Ur+=jn,_r+=jn;wn.rc=ss,wn.Vc=Qr}else{if(e(xr.mc!=null),jn=Wn+Qn,e((mr=xr.mc)!=null),e(jn<=mr.i),mr.C>=jn)jn=1;else if(xr.ic||Xr(),xr.ic){xr=mr.V,ss=mr.Ba,Qr=mr.c;var us=mr.i,zr=(xs=1,_r=mr.$/Qr,Sr=mr.$%Qr,Ur=mr.m,rs=mr.s,mr.$),Gr=Qr*us,ms=Qr*jn,_s=rs.wc,ys=zr<ms?As(rs,Sr,_r):null;e(zr<=Gr),e(jn<=us),e(Ns(rs));t:for(;;){for(;!Ur.h&&zr<ms;){if(Sr&_s||(ys=As(rs,Sr,_r)),e(ys!=null),er(Ur),256>(us=cs(ys.G[0],ys.H[0],Ur)))xr[ss+zr]=us,++zr,++Sr>=Qr&&(Sr=0,++_r<=jn&&!(_r%16)&&Os(mr,_r));else{if(!(280>us)){xs=0;break t}us=Jr(us-256,Ur);var Fs,Ls=cs(ys.G[4],ys.H[4],Ur);if(er(Ur),!(zr>=(Ls=ls(Qr,Ls=Jr(Ls,Ur)))&&Gr-zr>=us)){xs=0;break t}for(Fs=0;Fs<us;++Fs)xr[ss+zr+Fs]=xr[ss+zr+Fs-Ls];for(zr+=us,Sr+=us;Sr>=Qr;)Sr-=Qr,++_r<=jn&&!(_r%16)&&Os(mr,_r);zr<ms&&Sr&_s&&(ys=As(rs,Sr,_r))}e(Ur.h==Un(Ur))}Os(mr,_r>jn?jn:_r);break t}!xs||Ur.h&&zr<Gr?(xs=0,mr.a=Ur.h?5:3):mr.$=zr,jn=xs}else jn=Vs(mr,mr.V,mr.Ba,mr.c,mr.i,jn,vo);if(!jn){Qn=0;break e}}Wn+Qn>=pr&&(wn.Cc=1),Qn=1}if(!Qn)return null;if(wn.Cc&&((Qn=wn.ga)!=null&&(Qn.mc=null),wn.ga=null,0<wn.Ga))return alert("todo:WebPDequantizeLevels"),null}return wn.nb+Wn*dr}function Vn(wn,jn,Wn,Qn,dr,pr){for(;0<dr--;){var mr,xr=wn,_r=jn+(Wn?1:0),Sr=wn,Ur=jn+(Wn?0:3);for(mr=0;mr<Qn;++mr){var rs=Sr[Ur+4*mr];rs!=255&&(rs*=32897,xr[_r+4*mr+0]=xr[_r+4*mr+0]*rs>>23,xr[_r+4*mr+1]=xr[_r+4*mr+1]*rs>>23,xr[_r+4*mr+2]=xr[_r+4*mr+2]*rs>>23)}jn+=pr}}function ur(wn,jn,Wn,Qn,dr){for(;0<Qn--;){var pr;for(pr=0;pr<Wn;++pr){var mr=wn[jn+2*pr+0],xr=15&(Sr=wn[jn+2*pr+1]),_r=4369*xr,Sr=(240&Sr|Sr>>4)*_r>>16;wn[jn+2*pr+0]=(240&mr|mr>>4)*_r>>16&240|(15&mr|mr<<4)*_r>>16>>4&15,wn[jn+2*pr+1]=240&Sr|xr}jn+=dr}}function Cr(wn,jn,Wn,Qn,dr,pr,mr,xr){var _r,Sr,Ur=255;for(Sr=0;Sr<dr;++Sr){for(_r=0;_r<Qn;++_r){var rs=wn[jn+_r];pr[mr+4*_r]=rs,Ur&=rs}jn+=Wn,mr+=xr}return Ur!=255}function $r(wn,jn,Wn,Qn,dr){var pr;for(pr=0;pr<dr;++pr)Wn[Qn+pr]=wn[jn+pr]>>8}function Xr(){xa=Vn,co=ur,uo=Cr,xo=$r}function hs(wn,jn,Wn){Nn[wn]=function(Qn,dr,pr,mr,xr,_r,Sr,Ur,rs,ss,Qr,xs,us,zr,Gr,ms,_s){var ys,Fs=_s-1>>1,Ls=xr[_r+0]|Sr[Ur+0]<<16,qs=rs[ss+0]|Qr[xs+0]<<16;e(Qn!=null);var Ds=3*Ls+qs+131074>>2;for(jn(Qn[dr+0],255&Ds,Ds>>16,us,zr),pr!=null&&(Ds=3*qs+Ls+131074>>2,jn(pr[mr+0],255&Ds,Ds>>16,Gr,ms)),ys=1;ys<=Fs;++ys){var _i=xr[_r+ys]|Sr[Ur+ys]<<16,ro=rs[ss+ys]|Qr[xs+ys]<<16,Js=Ls+_i+qs+ro+524296,Xs=Js+2*(_i+qs)>>3;Ds=Xs+Ls>>1,Ls=(Js=Js+2*(Ls+ro)>>3)+_i>>1,jn(Qn[dr+2*ys-1],255&Ds,Ds>>16,us,zr+(2*ys-1)*Wn),jn(Qn[dr+2*ys-0],255&Ls,Ls>>16,us,zr+(2*ys-0)*Wn),pr!=null&&(Ds=Js+qs>>1,Ls=Xs+ro>>1,jn(pr[mr+2*ys-1],255&Ds,Ds>>16,Gr,ms+(2*ys-1)*Wn),jn(pr[mr+2*ys+0],255&Ls,Ls>>16,Gr,ms+(2*ys+0)*Wn)),Ls=_i,qs=ro}1&_s||(Ds=3*Ls+qs+131074>>2,jn(Qn[dr+_s-1],255&Ds,Ds>>16,us,zr+(_s-1)*Wn),pr!=null&&(Ds=3*qs+Ls+131074>>2,jn(pr[mr+_s-1],255&Ds,Ds>>16,Gr,ms+(_s-1)*Wn)))}}function Es(){$a[jm]=$x,$a[km]=fy,$a[ly]=Bx,$a[Lm]=py,$a[Mm]=my,$a[d0]=gy,$a[cy]=Ux,$a[h0]=fy,$a[f0]=py,$a[Dm]=my,$a[p0]=gy}function Ms(wn){return wn&~zx?0>wn?0:255:wn>>yy}function An(wn,jn){return Ms((19077*wn>>8)+(26149*jn>>8)-14234)}function Kn(wn,jn,Wn){return Ms((19077*wn>>8)-(6419*jn>>8)-(13320*Wn>>8)+8708)}function rr(wn,jn){return Ms((19077*wn>>8)+(33050*jn>>8)-17685)}function yr(wn,jn,Wn,Qn,dr){Qn[dr+0]=An(wn,Wn),Qn[dr+1]=Kn(wn,jn,Wn),Qn[dr+2]=rr(wn,jn)}function Yr(wn,jn,Wn,Qn,dr){Qn[dr+0]=rr(wn,jn),Qn[dr+1]=Kn(wn,jn,Wn),Qn[dr+2]=An(wn,Wn)}function os(wn,jn,Wn,Qn,dr){var pr=Kn(wn,jn,Wn);jn=pr<<3&224|rr(wn,jn)>>3,Qn[dr+0]=248&An(wn,Wn)|pr>>5,Qn[dr+1]=jn}function bs(wn,jn,Wn,Qn,dr){var pr=240&rr(wn,jn)|15;Qn[dr+0]=240&An(wn,Wn)|Kn(wn,jn,Wn)>>4,Qn[dr+1]=pr}function Ws(wn,jn,Wn,Qn,dr){Qn[dr+0]=255,yr(wn,jn,Wn,Qn,dr+1)}function Ys(wn,jn,Wn,Qn,dr){Yr(wn,jn,Wn,Qn,dr),Qn[dr+3]=255}function Gs(wn,jn,Wn,Qn,dr){yr(wn,jn,Wn,Qn,dr),Qn[dr+3]=255}function to(wn,jn){return 0>wn?0:wn>jn?jn:wn}function ao(wn,jn,Wn){Nn[wn]=function(Qn,dr,pr,mr,xr,_r,Sr,Ur,rs){for(var ss=Ur+(-2&rs)*Wn;Ur!=ss;)jn(Qn[dr+0],pr[mr+0],xr[_r+0],Sr,Ur),jn(Qn[dr+1],pr[mr+0],xr[_r+0],Sr,Ur+Wn),dr+=2,++mr,++_r,Ur+=2*Wn;1&rs&&jn(Qn[dr+0],pr[mr+0],xr[_r+0],Sr,Ur)}}function Il(wn,jn,Wn){return Wn==0?wn==0?jn==0?6:5:jn==0?4:0:Wn}function Io(wn,jn,Wn,Qn,dr){switch(wn>>>30){case 3:iu(jn,Wn,Qn,dr,0);break;case 2:yo(jn,Wn,Qn,dr);break;case 1:Do(jn,Wn,Qn,dr)}}function Ul(wn,jn){var Wn,Qn,dr=jn.M,pr=jn.Nb,mr=wn.oc,xr=wn.pc+40,_r=wn.oc,Sr=wn.pc+584,Ur=wn.oc,rs=wn.pc+600;for(Wn=0;16>Wn;++Wn)mr[xr+32*Wn-1]=129;for(Wn=0;8>Wn;++Wn)_r[Sr+32*Wn-1]=129,Ur[rs+32*Wn-1]=129;for(0<dr?mr[xr-1-32]=_r[Sr-1-32]=Ur[rs-1-32]=129:(hn(mr,xr-32-1,127,21),hn(_r,Sr-32-1,127,9),hn(Ur,rs-32-1,127,9)),Qn=0;Qn<wn.za;++Qn){var ss=jn.ya[jn.aa+Qn];if(0<Qn){for(Wn=-1;16>Wn;++Wn)dn(mr,xr+32*Wn-4,mr,xr+32*Wn+12,4);for(Wn=-1;8>Wn;++Wn)dn(_r,Sr+32*Wn-4,_r,Sr+32*Wn+4,4),dn(Ur,rs+32*Wn-4,Ur,rs+32*Wn+4,4)}var Qr=wn.Gd,xs=wn.Hd+Qn,us=ss.ad,zr=ss.Hc;if(0<dr&&(dn(mr,xr-32,Qr[xs].y,0,16),dn(_r,Sr-32,Qr[xs].f,0,8),dn(Ur,rs-32,Qr[xs].ea,0,8)),ss.Za){var Gr=mr,ms=xr-32+16;for(0<dr&&(Qn>=wn.za-1?hn(Gr,ms,Qr[xs].y[15],4):dn(Gr,ms,Qr[xs+1].y,0,4)),Wn=0;4>Wn;Wn++)Gr[ms+128+Wn]=Gr[ms+256+Wn]=Gr[ms+384+Wn]=Gr[ms+0+Wn];for(Wn=0;16>Wn;++Wn,zr<<=2)Gr=mr,ms=xr+vy[Wn],Cl[ss.Ob[Wn]](Gr,ms),Io(zr,us,16*+Wn,Gr,ms)}else if(Gr=Il(Qn,dr,ss.Ob[0]),ku[Gr](mr,xr),zr!=0)for(Wn=0;16>Wn;++Wn,zr<<=2)Io(zr,us,16*+Wn,mr,xr+vy[Wn]);for(Wn=ss.Gc,Gr=Il(Qn,dr,ss.Dd),au[Gr](_r,Sr),au[Gr](Ur,rs),zr=us,Gr=_r,ms=Sr,255&(ss=Wn>>0)&&(170&ss?am(zr,256,Gr,ms):na(zr,256,Gr,ms)),ss=Ur,zr=rs,255&(Wn>>=8)&&(170&Wn?am(us,320,ss,zr):na(us,320,ss,zr)),dr<wn.Ub-1&&(dn(Qr[xs].y,0,mr,xr+480,16),dn(Qr[xs].f,0,_r,Sr+224,8),dn(Qr[xs].ea,0,Ur,rs+224,8)),Wn=8*pr*wn.B,Qr=wn.sa,xs=wn.ta+16*Qn+16*pr*wn.R,us=wn.qa,ss=wn.ra+8*Qn+Wn,zr=wn.Ha,Gr=wn.Ia+8*Qn+Wn,Wn=0;16>Wn;++Wn)dn(Qr,xs+Wn*wn.R,mr,xr+32*Wn,16);for(Wn=0;8>Wn;++Wn)dn(us,ss+Wn*wn.B,_r,Sr+32*Wn,8),dn(zr,Gr+Wn*wn.B,Ur,rs+32*Wn,8)}}function zl(wn,jn,Wn,Qn,dr,pr,mr,xr,_r){var Sr=[0],Ur=[0],rs=0,ss=_r!=null?_r.kd:0,Qr=_r??new Ru;if(wn==null||12>Wn)return 7;Qr.data=wn,Qr.w=jn,Qr.ha=Wn,jn=[jn],Wn=[Wn],Qr.gb=[Qr.gb];e:{var xs=jn,us=Wn,zr=Qr.gb;if(e(wn!=null),e(us!=null),e(zr!=null),zr[0]=0,12<=us[0]&&!un(wn,xs[0],"RIFF")){if(un(wn,xs[0]+8,"WEBP")){zr=3;break e}var Gr=Mr(wn,xs[0]+4);if(12>Gr||4294967286<Gr){zr=3;break e}if(ss&&Gr>us[0]-8){zr=7;break e}zr[0]=Gr,xs[0]+=12,us[0]-=12}zr=0}if(zr!=0)return zr;for(Gr=0<Qr.gb[0],Wn=Wn[0];;){e:{var ms=wn;us=jn,zr=Wn;var _s=Sr,ys=Ur,Fs=xs=[0];if((Ds=rs=[rs])[0]=0,8>zr[0])zr=7;else{if(!un(ms,us[0],"VP8X")){if(Mr(ms,us[0]+4)!=10){zr=3;break e}if(18>zr[0]){zr=7;break e}var Ls=Mr(ms,us[0]+8),qs=1+Ir(ms,us[0]+12);if(2147483648<=qs*(ms=1+Ir(ms,us[0]+15))){zr=3;break e}Fs!=null&&(Fs[0]=Ls),_s!=null&&(_s[0]=qs),ys!=null&&(ys[0]=ms),us[0]+=18,zr[0]-=18,Ds[0]=1}zr=0}}if(rs=rs[0],xs=xs[0],zr!=0)return zr;if(us=!!(2&xs),!Gr&&rs)return 3;if(pr!=null&&(pr[0]=!!(16&xs)),mr!=null&&(mr[0]=us),xr!=null&&(xr[0]=0),mr=Sr[0],xs=Ur[0],rs&&us&&_r==null){zr=0;break}if(4>Wn){zr=7;break}if(Gr&&rs||!Gr&&!rs&&!un(wn,jn[0],"ALPH")){Wn=[Wn],Qr.na=[Qr.na],Qr.P=[Qr.P],Qr.Sa=[Qr.Sa];e:{Ls=wn,zr=jn,Gr=Wn;var Ds=Qr.gb;_s=Qr.na,ys=Qr.P,Fs=Qr.Sa,qs=22,e(Ls!=null),e(Gr!=null),ms=zr[0];var _i=Gr[0];for(e(_s!=null),e(Fs!=null),_s[0]=null,ys[0]=null,Fs[0]=0;;){if(zr[0]=ms,Gr[0]=_i,8>_i){zr=7;break e}var ro=Mr(Ls,ms+4);if(4294967286<ro){zr=3;break e}var Js=8+ro+1&-2;if(qs+=Js,0<Ds&&qs>Ds){zr=3;break e}if(!un(Ls,ms,"VP8 ")||!un(Ls,ms,"VP8L")){zr=0;break e}if(_i[0]<Js){zr=7;break e}un(Ls,ms,"ALPH")||(_s[0]=Ls,ys[0]=ms+8,Fs[0]=ro),ms+=Js,_i-=Js}}if(Wn=Wn[0],Qr.na=Qr.na[0],Qr.P=Qr.P[0],Qr.Sa=Qr.Sa[0],zr!=0)break}Wn=[Wn],Qr.Ja=[Qr.Ja],Qr.xa=[Qr.xa];e:if(Ds=wn,zr=jn,Gr=Wn,_s=Qr.gb[0],ys=Qr.Ja,Fs=Qr.xa,Ls=zr[0],ms=!un(Ds,Ls,"VP8 "),qs=!un(Ds,Ls,"VP8L"),e(Ds!=null),e(Gr!=null),e(ys!=null),e(Fs!=null),8>Gr[0])zr=7;else{if(ms||qs){if(Ds=Mr(Ds,Ls+4),12<=_s&&Ds>_s-12){zr=3;break e}if(ss&&Ds>Gr[0]-8){zr=7;break e}ys[0]=Ds,zr[0]+=8,Gr[0]-=8,Fs[0]=qs}else Fs[0]=5<=Gr[0]&&Ds[Ls+0]==47&&!(Ds[Ls+4]>>5),ys[0]=Gr[0];zr=0}if(Wn=Wn[0],Qr.Ja=Qr.Ja[0],Qr.xa=Qr.xa[0],jn=jn[0],zr!=0)break;if(4294967286<Qr.Ja)return 3;if(xr==null||us||(xr[0]=Qr.xa?2:1),mr=[mr],xs=[xs],Qr.xa){if(5>Wn){zr=7;break}xr=mr,ss=xs,us=pr,wn==null||5>Wn?wn=0:5<=Wn&&wn[jn+0]==47&&!(wn[jn+4]>>5)?(Gr=[0],Ds=[0],_s=[0],tr(ys=new qn,wn,jn,Wn),Dr(ys,Gr,Ds,_s)?(xr!=null&&(xr[0]=Gr[0]),ss!=null&&(ss[0]=Ds[0]),us!=null&&(us[0]=_s[0]),wn=1):wn=0):wn=0}else{if(10>Wn){zr=7;break}xr=xs,wn==null||10>Wn||!Yu(wn,jn+3,Wn-3)?wn=0:(ss=wn[jn+0]|wn[jn+1]<<8|wn[jn+2]<<16,us=16383&(wn[jn+7]<<8|wn[jn+6]),wn=16383&(wn[jn+9]<<8|wn[jn+8]),1&ss||3<(ss>>1&7)||!(ss>>4&1)||ss>>5>=Qr.Ja||!us||!wn?wn=0:(mr&&(mr[0]=us),xr&&(xr[0]=wn),wn=1))}if(!wn||(mr=mr[0],xs=xs[0],rs&&(Sr[0]!=mr||Ur[0]!=xs)))return 3;_r!=null&&(_r[0]=Qr,_r.offset=jn-_r.w,e(4294967286>jn-_r.w),e(_r.offset==_r.ha-Wn));break}return zr==0||zr==7&&rs&&_r==null?(pr!=null&&(pr[0]|=Qr.na!=null&&0<Qr.na.length),Qn!=null&&(Qn[0]=mr),dr!=null&&(dr[0]=xs),0):zr}function rm(wn,jn,Wn){var Qn=jn.width,dr=jn.height,pr=0,mr=0,xr=Qn,_r=dr;if(jn.Da=wn!=null&&0<wn.Da,jn.Da&&(xr=wn.cd,_r=wn.bd,pr=wn.v,mr=wn.j,11>Wn||(pr&=-2,mr&=-2),0>pr||0>mr||0>=xr||0>=_r||pr+xr>Qn||mr+_r>dr))return 0;if(jn.v=pr,jn.j=mr,jn.va=pr+xr,jn.o=mr+_r,jn.U=xr,jn.T=_r,jn.da=wn!=null&&0<wn.da,jn.da){if(!jr(xr,_r,Wn=[wn.ib],pr=[wn.hb]))return 0;jn.ib=Wn[0],jn.hb=pr[0]}return jn.ob=wn!=null&&wn.ob,jn.Kb=wn==null||!wn.Sd,jn.da&&(jn.ob=jn.ib<3*Qn/4&&jn.hb<3*dr/4,jn.Kb=0),1}function sm(wn){if(wn==null)return 2;if(11>wn.S){var jn=wn.f.RGBA;jn.fb+=(wn.height-1)*jn.A,jn.A=-jn.A}else jn=wn.f.kb,wn=wn.height,jn.O+=(wn-1)*jn.fa,jn.fa=-jn.fa,jn.N+=(wn-1>>1)*jn.Ab,jn.Ab=-jn.Ab,jn.W+=(wn-1>>1)*jn.Db,jn.Db=-jn.Db,jn.F!=null&&(jn.J+=(wn-1)*jn.lb,jn.lb=-jn.lb);return 0}function Tp(wn,jn,Wn,Qn){if(Qn==null||0>=wn||0>=jn)return 2;if(Wn!=null){if(Wn.Da){var dr=Wn.cd,pr=Wn.bd,mr=-2&Wn.v,xr=-2&Wn.j;if(0>mr||0>xr||0>=dr||0>=pr||mr+dr>wn||xr+pr>jn)return 2;wn=dr,jn=pr}if(Wn.da){if(!jr(wn,jn,dr=[Wn.ib],pr=[Wn.hb]))return 2;wn=dr[0],jn=pr[0]}}Qn.width=wn,Qn.height=jn;e:{var _r=Qn.width,Sr=Qn.height;if(wn=Qn.S,0>=_r||0>=Sr||!(wn>=jm&&13>wn))wn=2;else{if(0>=Qn.Rd&&Qn.sd==null){mr=pr=dr=jn=0;var Ur=(xr=_r*_y[wn])*Sr;if(11>wn||(pr=(Sr+1)/2*(jn=(_r+1)/2),wn==12&&(mr=(dr=_r)*Sr)),(Sr=fn(Ur+2*pr+mr))==null){wn=1;break e}Qn.sd=Sr,11>wn?((_r=Qn.f.RGBA).eb=Sr,_r.fb=0,_r.A=xr,_r.size=Ur):((_r=Qn.f.kb).y=Sr,_r.O=0,_r.fa=xr,_r.Fd=Ur,_r.f=Sr,_r.N=0+Ur,_r.Ab=jn,_r.Cd=pr,_r.ea=Sr,_r.W=0+Ur+pr,_r.Db=jn,_r.Ed=pr,wn==12&&(_r.F=Sr,_r.J=0+Ur+2*pr),_r.Tc=mr,_r.lb=dr)}if(jn=1,dr=Qn.S,pr=Qn.width,mr=Qn.height,dr>=jm&&13>dr)if(11>dr)wn=Qn.f.RGBA,jn&=(xr=Math.abs(wn.A))*(mr-1)+pr<=wn.size,jn&=xr>=pr*_y[dr],jn&=wn.eb!=null;else{wn=Qn.f.kb,xr=(pr+1)/2,Ur=(mr+1)/2,_r=Math.abs(wn.fa),Sr=Math.abs(wn.Ab);var rs=Math.abs(wn.Db),ss=Math.abs(wn.lb),Qr=ss*(mr-1)+pr;jn&=_r*(mr-1)+pr<=wn.Fd,jn&=Sr*(Ur-1)+xr<=wn.Cd,jn=(jn&=rs*(Ur-1)+xr<=wn.Ed)&_r>=pr&Sr>=xr&rs>=xr,jn&=wn.y!=null,jn&=wn.f!=null,jn&=wn.ea!=null,dr==12&&(jn&=ss>=pr,jn&=Qr<=wn.Tc,jn&=wn.F!=null)}else jn=0;wn=jn?0:2}}return wn!=0||Wn!=null&&Wn.fd&&(wn=sm(Qn)),wn}var Co=64,Sp=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pp=24,Ip=32,im=8,$o=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];wr("Predictor0","PredictorAdd0"),Nn.Predictor0=function(){return 4278190080},Nn.Predictor1=function(wn){return wn},Nn.Predictor2=function(wn,jn,Wn){return jn[Wn+0]},Nn.Predictor3=function(wn,jn,Wn){return jn[Wn+1]},Nn.Predictor4=function(wn,jn,Wn){return jn[Wn-1]},Nn.Predictor5=function(wn,jn,Wn){return kr(kr(wn,jn[Wn+1]),jn[Wn+0])},Nn.Predictor6=function(wn,jn,Wn){return kr(wn,jn[Wn-1])},Nn.Predictor7=function(wn,jn,Wn){return kr(wn,jn[Wn+0])},Nn.Predictor8=function(wn,jn,Wn){return kr(jn[Wn-1],jn[Wn+0])},Nn.Predictor9=function(wn,jn,Wn){return kr(jn[Wn+0],jn[Wn+1])},Nn.Predictor10=function(wn,jn,Wn){return kr(kr(wn,jn[Wn-1]),kr(jn[Wn+0],jn[Wn+1]))},Nn.Predictor11=function(wn,jn,Wn){var Qn=jn[Wn+0];return 0>=Nr(Qn>>24&255,wn>>24&255,(jn=jn[Wn-1])>>24&255)+Nr(Qn>>16&255,wn>>16&255,jn>>16&255)+Nr(Qn>>8&255,wn>>8&255,jn>>8&255)+Nr(255&Qn,255&wn,255&jn)?Qn:wn},Nn.Predictor12=function(wn,jn,Wn){var Qn=jn[Wn+0];return(Hr((wn>>24&255)+(Qn>>24&255)-((jn=jn[Wn-1])>>24&255))<<24|Hr((wn>>16&255)+(Qn>>16&255)-(jn>>16&255))<<16|Hr((wn>>8&255)+(Qn>>8&255)-(jn>>8&255))<<8|Hr((255&wn)+(255&Qn)-(255&jn)))>>>0},Nn.Predictor13=function(wn,jn,Wn){var Qn=jn[Wn-1];return(Kr((wn=kr(wn,jn[Wn+0]))>>24&255,Qn>>24&255)<<24|Kr(wn>>16&255,Qn>>16&255)<<16|Kr(wn>>8&255,Qn>>8&255)<<8|Kr(wn>>0&255,Qn>>0&255))>>>0};var c0=Nn.PredictorAdd0;Nn.PredictorAdd1=ns,wr("Predictor2","PredictorAdd2"),wr("Predictor3","PredictorAdd3"),wr("Predictor4","PredictorAdd4"),wr("Predictor5","PredictorAdd5"),wr("Predictor6","PredictorAdd6"),wr("Predictor7","PredictorAdd7"),wr("Predictor8","PredictorAdd8"),wr("Predictor9","PredictorAdd9"),wr("Predictor10","PredictorAdd10"),wr("Predictor11","PredictorAdd11"),wr("Predictor12","PredictorAdd12"),wr("Predictor13","PredictorAdd13");var om=Nn.PredictorAdd2;Cs("ColorIndexInverseTransform","MapARGB","32b",function(wn){return wn>>8&255},function(wn){return wn}),Cs("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(wn){return wn},function(wn){return wn>>8&255});var Tm,Zo=Nn.ColorIndexInverseTransform,Cp=Nn.MapARGB,Sm=Nn.VP8LColorIndexInverseTransformAlpha,Pm=Nn.MapAlpha,Iu=Nn.VP8LPredictorsAdd=[];Iu.length=16,(Nn.VP8LPredictors=[]).length=16,(Nn.VP8LPredictorsAdd_C=[]).length=16,(Nn.VP8LPredictors_C=[]).length=16;var sp,Bo,Mo,Cu,ru,su,Np,iu,yo,am,Do,na,jp,Im,lm,ip,op,Nu,ap,kp,lp,ju,cm,ga,xa,co,uo,xo,Ao=fn(511),ou=fn(2041),um=fn(225),Lp=fn(767),Cm=0,u0=ou,Nm=um,Go=Lp,ba=Ao,jm=0,km=1,ly=2,Lm=3,Mm=4,d0=5,cy=6,h0=7,f0=8,Dm=9,p0=10,Tx=[2,3,7],Sx=[3,3,11],uy=[280,256,256,256,40],Px=[0,1,1,1,0],Ix=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Cx=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nx=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jx=8,m0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],g0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],dm=null,kx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lx=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Mx=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Dx=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ox=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Fx=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ku=[],Cl=[],au=[],Vx=1,hy=2,Lu=[],$a=[];hs("UpsampleRgbLinePair",yr,3),hs("UpsampleBgrLinePair",Yr,3),hs("UpsampleRgbaLinePair",Gs,4),hs("UpsampleBgraLinePair",Ys,4),hs("UpsampleArgbLinePair",Ws,4),hs("UpsampleRgba4444LinePair",bs,2),hs("UpsampleRgb565LinePair",os,2);var $x=Nn.UpsampleRgbLinePair,Bx=Nn.UpsampleBgrLinePair,fy=Nn.UpsampleRgbaLinePair,py=Nn.UpsampleBgraLinePair,my=Nn.UpsampleArgbLinePair,gy=Nn.UpsampleRgba4444LinePair,Ux=Nn.UpsampleRgb565LinePair,Om=16,Fm=1<<Om-1,hm=-227,y0=482,yy=6,zx=(256<<yy)-1,xy=0,qx=fn(256),Hx=fn(256),Wx=fn(256),Gx=fn(256),Kx=fn(y0-hm),Yx=fn(y0-hm);ao("YuvToRgbRow",yr,3),ao("YuvToBgrRow",Yr,3),ao("YuvToRgbaRow",Gs,4),ao("YuvToBgraRow",Ys,4),ao("YuvToArgbRow",Ws,4),ao("YuvToRgba4444Row",bs,2),ao("YuvToRgb565Row",os,2);var vy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vm=[0,2,8],Xx=[8,7,6,4,4,2,2,2,1,1,1,1],Qx=1;this.WebPDecodeRGBA=function(wn,jn,Wn,Qn,dr){var pr=km,mr=new tu,xr=new Rr;mr.ba=xr,xr.S=pr,xr.width=[xr.width],xr.height=[xr.height];var _r=xr.width,Sr=xr.height,Ur=new Zr;if(Ur==null||wn==null)var rs=2;else e(Ur!=null),rs=zl(wn,jn,Wn,Ur.width,Ur.height,Ur.Pd,Ur.Qd,Ur.format,null);if(rs!=0?_r=0:(_r!=null&&(_r[0]=Ur.width[0]),Sr!=null&&(Sr[0]=Ur.height[0]),_r=1),_r){xr.width=xr.width[0],xr.height=xr.height[0],Qn!=null&&(Qn[0]=xr.width),dr!=null&&(dr[0]=xr.height);e:{if(Qn=new Xl,(dr=new Ru).data=wn,dr.w=jn,dr.ha=Wn,dr.kd=1,jn=[0],e(dr!=null),((wn=zl(dr.data,dr.w,dr.ha,null,null,null,jn,null,dr))==0||wn==7)&&jn[0]&&(wn=4),(jn=wn)==0){if(e(mr!=null),Qn.data=dr.data,Qn.w=dr.w+dr.offset,Qn.ha=dr.ha-dr.offset,Qn.put=vr,Qn.ac=Er,Qn.bc=Lr,Qn.ma=mr,dr.xa){if((wn=zs())==null){mr=1;break e}if(function(ss,Qr){var xs=[0],us=[0],zr=[0];t:for(;;){if(ss==null)return 0;if(Qr==null)return ss.a=2,0;if(ss.l=Qr,ss.a=0,tr(ss.m,Qr.data,Qr.w,Qr.ha),!Dr(ss.m,xs,us,zr)){ss.a=3;break t}if(ss.xb=hy,Qr.width=xs[0],Qr.height=us[0],!Zs(xs[0],us[0],1,ss,null))break t;return 1}return e(ss.a!=0),0}(wn,Qn)){if(Qn=(jn=Tp(Qn.width,Qn.height,mr.Oa,mr.ba))==0){t:{Qn=wn;n:for(;;){if(Qn==null){Qn=0;break t}if(e(Qn.s.yc!=null),e(Qn.s.Ya!=null),e(0<Qn.s.Wb),e((Wn=Qn.l)!=null),e((dr=Wn.ma)!=null),Qn.xb!=0){if(Qn.ca=dr.ba,Qn.tb=dr.tb,e(Qn.ca!=null),!rm(dr.Oa,Wn,Lm)){Qn.a=2;break n}if(!Qs(Qn,Wn.width)||Wn.da)break n;if((Wn.da||is(Qn.ca.S))&&Xr(),11>Qn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Qn.ca.f.kb.F!=null&&Xr()),Qn.Pb&&0<Qn.s.ua&&Qn.s.vb.X==null&&!qr(Qn.s.vb,Qn.s.Wa.Xa)){Qn.a=1;break n}Qn.xb=0}if(!Vs(Qn,Qn.V,Qn.Ba,Qn.c,Qn.i,Wn.o,$s))break n;dr.Dc=Qn.Ma,Qn=1;break t}e(Qn.a!=0),Qn=0}Qn=!Qn}Qn&&(jn=wn.a)}else jn=wn.a}else{if((wn=new Ku)==null){mr=1;break e}if(wn.Fa=dr.na,wn.P=dr.P,wn.qc=dr.Sa,Xu(wn,Qn)){if((jn=Tp(Qn.width,Qn.height,mr.Oa,mr.ba))==0){if(wn.Aa=0,Wn=mr.Oa,e((dr=wn)!=null),Wn!=null){if(0<(_r=0>(_r=Wn.Md)?0:100<_r?255:255*_r/100)){for(Sr=Ur=0;4>Sr;++Sr)12>(rs=dr.pb[Sr]).lc&&(rs.ia=_r*Xx[0>rs.lc?0:rs.lc]>>3),Ur|=rs.ia;Ur&&(alert("todo:VP8InitRandom"),dr.ia=1)}dr.Ga=Wn.Id,100<dr.Ga?dr.Ga=100:0>dr.Ga&&(dr.Ga=0)}vp(wn,Qn)||(jn=wn.a)}}else jn=wn.a}jn==0&&mr.Oa!=null&&mr.Oa.fd&&(jn=sm(mr.ba))}mr=jn}pr=mr!=0?null:11>pr?xr.f.RGBA.eb:xr.f.kb.y}else pr=null;return pr};var _y=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function yn(Nn,Ln){for(var zn="",Cn=0;Cn<4;Cn++)zn+=String.fromCharCode(Nn[Ln++]);return zn}function xn(Nn,Ln){return(Nn[Ln+0]<<0|Nn[Ln+1]<<8|Nn[Ln+2]<<16)>>>0}function En(Nn,Ln){return(Nn[Ln+0]<<0|Nn[Ln+1]<<8|Nn[Ln+2]<<16|Nn[Ln+3]<<24)>>>0}new gn;var bn=[0],vn=[0],Pn=[],Tn=new gn,In=_e,Rn=function(Nn,Ln){var zn={},Cn=0,Mn=!1,Bn=0,Xn=0;if(zn.frames=[],!function(On,Un,Yn,er){for(var Zn=0;Zn<er;Zn++)if(On[Un+Zn]!=Yn.charCodeAt(Zn))return!0;return!1}(Nn,Ln,"RIFF",4)){for(En(Nn,Ln+=4),Ln+=8;Ln<Nn.length;){var nr=yn(Nn,Ln),sr=En(Nn,Ln+=4);Ln+=4;var lr=sr+(1&sr);switch(nr){case"VP8 ":case"VP8L":zn.frames[Cn]===void 0&&(zn.frames[Cn]={}),(ar=zn.frames[Cn]).src_off=Mn?Xn:Ln-8,ar.src_size=Bn+sr+8,Cn++,Mn&&(Mn=!1,Bn=0,Xn=0);break;case"VP8X":(ar=zn.header={}).feature_flags=Nn[Ln];var tr=Ln+4;ar.canvas_width=1+xn(Nn,tr),tr+=3,ar.canvas_height=1+xn(Nn,tr),tr+=3;break;case"ALPH":Mn=!0,Bn=lr+8,Xn=Ln-8;break;case"ANIM":(ar=zn.header).bgcolor=En(Nn,Ln),tr=Ln+4,ar.loop_count=(gr=Nn)[(qn=tr)+0]<<0|gr[qn+1]<<8,tr+=2;break;case"ANMF":var Jn,ar;(ar=zn.frames[Cn]={}).offset_x=2*xn(Nn,Ln),Ln+=3,ar.offset_y=2*xn(Nn,Ln),Ln+=3,ar.width=1+xn(Nn,Ln),Ln+=3,ar.height=1+xn(Nn,Ln),Ln+=3,ar.duration=xn(Nn,Ln),Ln+=3,Jn=Nn[Ln++],ar.dispose=1&Jn,ar.blend=Jn>>1&1}nr!="ANMF"&&(Ln+=lr)}var gr,qn;return zn}}(In,0);Rn.response=In,Rn.rgbaoutput=!0,Rn.dataurl=!1;var Sn=Rn.header?Rn.header:null,Dn=Rn.frames?Rn.frames:null;if(Sn){Sn.loop_counter=Sn.loop_count,bn=[Sn.canvas_height],vn=[Sn.canvas_width];for(var $n=0;$n<Dn.length&&Dn[$n].blend!=0;$n++);}var Fn=Dn[0],Gn=Tn.WebPDecodeRGBA(In,Fn.src_off,Fn.src_size,vn,bn);Fn.rgba=Gn,Fn.imgwidth=vn[0],Fn.imgheight=bn[0];for(var kn=0;kn<vn[0]*bn[0]*4;kn++)Pn[kn]=Gn[kn];return this.width=vn,this.height=bn,this.data=Pn,this}(function(_e){var e=function(){return typeof zlibSync=="function"},un=function(bn,vn,Pn,Tn){var In=4,Rn=pn;switch(Tn){case _e.image_compression.FAST:In=1,Rn=fn;break;case _e.image_compression.MEDIUM:In=6,Rn=mn;break;case _e.image_compression.SLOW:In=9,Rn=gn}bn=dn(bn,vn,Pn,Rn);var Sn=zlibSync(bn,{level:In});return _e.__addimage__.arrayBufferToBinaryString(Sn)},dn=function(bn,vn,Pn,Tn){for(var In,Rn,Sn,Dn=bn.length/vn,$n=new Uint8Array(bn.length+Dn),Fn=xn(),Gn=0;Gn<Dn;Gn+=1){if(Sn=Gn*vn,In=bn.subarray(Sn,Sn+vn),Tn)$n.set(Tn(In,Pn,Rn),Sn+Gn);else{for(var kn,Nn=Fn.length,Ln=[];kn<Nn;kn+=1)Ln[kn]=Fn[kn](In,Pn,Rn);var zn=En(Ln.concat());$n.set(Ln[zn],Sn+Gn)}Rn=In}return $n},hn=function(bn){var vn=Array.apply([],bn);return vn.unshift(0),vn},fn=function(bn,vn){var Pn,Tn=[],In=bn.length;Tn[0]=1;for(var Rn=0;Rn<In;Rn+=1)Pn=bn[Rn-vn]||0,Tn[Rn+1]=bn[Rn]-Pn+256&255;return Tn},pn=function(bn,vn,Pn){var Tn,In=[],Rn=bn.length;In[0]=2;for(var Sn=0;Sn<Rn;Sn+=1)Tn=Pn&&Pn[Sn]||0,In[Sn+1]=bn[Sn]-Tn+256&255;return In},mn=function(bn,vn,Pn){var Tn,In,Rn=[],Sn=bn.length;Rn[0]=3;for(var Dn=0;Dn<Sn;Dn+=1)Tn=bn[Dn-vn]||0,In=Pn&&Pn[Dn]||0,Rn[Dn+1]=bn[Dn]+256-(Tn+In>>>1)&255;return Rn},gn=function(bn,vn,Pn){var Tn,In,Rn,Sn,Dn=[],$n=bn.length;Dn[0]=4;for(var Fn=0;Fn<$n;Fn+=1)Tn=bn[Fn-vn]||0,In=Pn&&Pn[Fn]||0,Rn=Pn&&Pn[Fn-vn]||0,Sn=yn(Tn,In,Rn),Dn[Fn+1]=bn[Fn]-Sn+256&255;return Dn},yn=function(bn,vn,Pn){if(bn===vn&&vn===Pn)return bn;var Tn=Math.abs(vn-Pn),In=Math.abs(bn-Pn),Rn=Math.abs(bn+vn-Pn-Pn);return Tn<=In&&Tn<=Rn?bn:In<=Rn?vn:Pn},xn=function(){return[hn,fn,pn,mn,gn]},En=function(bn){var vn=bn.map(function(Pn){return Pn.reduce(function(Tn,In){return Tn+Math.abs(In)},0)});return vn.indexOf(Math.min.apply(null,vn))};_e.processPNG=function(bn,vn,Pn,Tn){var In,Rn,Sn,Dn,$n,Fn,Gn,kn,Nn,Ln,zn,Cn,Mn,Bn,Xn,nr=this.decode.FLATE_DECODE,sr="";if(this.__addimage__.isArrayBuffer(bn)&&(bn=new Uint8Array(bn)),this.__addimage__.isArrayBufferView(bn)){if(bn=(Sn=new Kt(bn)).imgData,Rn=Sn.bits,In=Sn.colorSpace,$n=Sn.colors,[4,6].indexOf(Sn.colorType)!==-1){if(Sn.bits===8){Nn=(kn=Sn.pixelBitlength==32?new Uint32Array(Sn.decodePixels().buffer):Sn.pixelBitlength==16?new Uint16Array(Sn.decodePixels().buffer):new Uint8Array(Sn.decodePixels().buffer)).length,zn=new Uint8Array(Nn*Sn.colors),Ln=new Uint8Array(Nn);var lr,tr=Sn.pixelBitlength-Sn.bits;for(Bn=0,Xn=0;Bn<Nn;Bn++){for(Mn=kn[Bn],lr=0;lr<tr;)zn[Xn++]=Mn>>>lr&255,lr+=Sn.bits;Ln[Bn]=Mn>>>lr&255}}if(Sn.bits===16){Nn=(kn=new Uint32Array(Sn.decodePixels().buffer)).length,zn=new Uint8Array(Nn*(32/Sn.pixelBitlength)*Sn.colors),Ln=new Uint8Array(Nn*(32/Sn.pixelBitlength)),Cn=Sn.colors>1,Bn=0,Xn=0;for(var Jn=0;Bn<Nn;)Mn=kn[Bn++],zn[Xn++]=Mn>>>0&255,Cn&&(zn[Xn++]=Mn>>>16&255,Mn=kn[Bn++],zn[Xn++]=Mn>>>0&255),Ln[Jn++]=Mn>>>16&255;Rn=8}Tn!==_e.image_compression.NONE&&e()?(bn=un(zn,Sn.width*Sn.colors,Sn.colors,Tn),Gn=un(Ln,Sn.width,1,Tn)):(bn=zn,Gn=Ln,nr=void 0)}if(Sn.colorType===3&&(In=this.color_spaces.INDEXED,Fn=Sn.palette,Sn.transparency.indexed)){var ar=Sn.transparency.indexed,gr=0;for(Bn=0,Nn=ar.length;Bn<Nn;++Bn)gr+=ar[Bn];if((gr/=255)===Nn-1&&ar.indexOf(0)!==-1)Dn=[ar.indexOf(0)];else if(gr!==Nn){for(kn=Sn.decodePixels(),Ln=new Uint8Array(kn.length),Bn=0,Nn=kn.length;Bn<Nn;Bn++)Ln[Bn]=ar[kn[Bn]];Gn=un(Ln,Sn.width,1)}}var qn=function(On){var Un;switch(On){case _e.image_compression.FAST:Un=11;break;case _e.image_compression.MEDIUM:Un=13;break;case _e.image_compression.SLOW:Un=14;break;default:Un=12}return Un}(Tn);return nr===this.decode.FLATE_DECODE&&(sr="/Predictor "+qn+" "),sr+="/Colors "+$n+" /BitsPerComponent "+Rn+" /Columns "+Sn.width,(this.__addimage__.isArrayBuffer(bn)||this.__addimage__.isArrayBufferView(bn))&&(bn=this.__addimage__.arrayBufferToBinaryString(bn)),(Gn&&this.__addimage__.isArrayBuffer(Gn)||this.__addimage__.isArrayBufferView(Gn))&&(Gn=this.__addimage__.arrayBufferToBinaryString(Gn)),{alias:Pn,data:bn,index:vn,filter:nr,decodeParameters:sr,transparency:Dn,palette:Fn,sMask:Gn,predictor:qn,width:Sn.width,height:Sn.height,bitsPerComponent:Rn,colorSpace:In}}}})(E.API),function(_e){_e.processGIF89A=function(e,un,dn,hn){var fn=new Zt(e),pn=fn.width,mn=fn.height,gn=[];fn.decodeAndBlitFrameRGBA(0,gn);var yn={data:gn,width:pn,height:mn},xn=new Qt(100).encode(yn,100);return _e.processJPEG.call(this,xn,un,dn,hn)},_e.processGIF87A=_e.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var _e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(_e);for(var e=0;e<_e;e++){var un=this.datav.getUint8(this.pos++,!0),dn=this.datav.getUint8(this.pos++,!0),hn=this.datav.getUint8(this.pos++,!0),fn=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:hn,green:dn,blue:un,quad:fn}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var _e="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[_e]()}catch(un){a.log("bit decode error:"+un)}},te.prototype.bit1=function(){var _e,e=Math.ceil(this.width/8),un=e%4;for(_e=this.height-1;_e>=0;_e--){for(var dn=this.bottom_up?_e:this.height-1-_e,hn=0;hn<e;hn++)for(var fn=this.datav.getUint8(this.pos++,!0),pn=dn*this.width*4+8*hn*4,mn=0;mn<8&&8*hn+mn<this.width;mn++){var gn=this.palette[fn>>7-mn&1];this.data[pn+4*mn]=gn.blue,this.data[pn+4*mn+1]=gn.green,this.data[pn+4*mn+2]=gn.red,this.data[pn+4*mn+3]=255}un!==0&&(this.pos+=4-un)}},te.prototype.bit4=function(){for(var _e=Math.ceil(this.width/2),e=_e%4,un=this.height-1;un>=0;un--){for(var dn=this.bottom_up?un:this.height-1-un,hn=0;hn<_e;hn++){var fn=this.datav.getUint8(this.pos++,!0),pn=dn*this.width*4+2*hn*4,mn=fn>>4,gn=15&fn,yn=this.palette[mn];if(this.data[pn]=yn.blue,this.data[pn+1]=yn.green,this.data[pn+2]=yn.red,this.data[pn+3]=255,2*hn+1>=this.width)break;yn=this.palette[gn],this.data[pn+4]=yn.blue,this.data[pn+4+1]=yn.green,this.data[pn+4+2]=yn.red,this.data[pn+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var _e=this.width%4,e=this.height-1;e>=0;e--){for(var un=this.bottom_up?e:this.height-1-e,dn=0;dn<this.width;dn++){var hn=this.datav.getUint8(this.pos++,!0),fn=un*this.width*4+4*dn;if(hn<this.palette.length){var pn=this.palette[hn];this.data[fn]=pn.red,this.data[fn+1]=pn.green,this.data[fn+2]=pn.blue,this.data[fn+3]=255}else this.data[fn]=255,this.data[fn+1]=255,this.data[fn+2]=255,this.data[fn+3]=255}_e!==0&&(this.pos+=4-_e)}},te.prototype.bit15=function(){for(var _e=this.width%3,e=parseInt("11111",2),un=this.height-1;un>=0;un--){for(var dn=this.bottom_up?un:this.height-1-un,hn=0;hn<this.width;hn++){var fn=this.datav.getUint16(this.pos,!0);this.pos+=2;var pn=(fn&e)/e*255|0,mn=(fn>>5&e)/e*255|0,gn=(fn>>10&e)/e*255|0,yn=fn>>15?255:0,xn=dn*this.width*4+4*hn;this.data[xn]=gn,this.data[xn+1]=mn,this.data[xn+2]=pn,this.data[xn+3]=yn}this.pos+=_e}},te.prototype.bit16=function(){for(var _e=this.width%3,e=parseInt("11111",2),un=parseInt("111111",2),dn=this.height-1;dn>=0;dn--){for(var hn=this.bottom_up?dn:this.height-1-dn,fn=0;fn<this.width;fn++){var pn=this.datav.getUint16(this.pos,!0);this.pos+=2;var mn=(pn&e)/e*255|0,gn=(pn>>5&un)/un*255|0,yn=(pn>>11)/e*255|0,xn=hn*this.width*4+4*fn;this.data[xn]=yn,this.data[xn+1]=gn,this.data[xn+2]=mn,this.data[xn+3]=255}this.pos+=_e}},te.prototype.bit24=function(){for(var _e=this.height-1;_e>=0;_e--){for(var e=this.bottom_up?_e:this.height-1-_e,un=0;un<this.width;un++){var dn=this.datav.getUint8(this.pos++,!0),hn=this.datav.getUint8(this.pos++,!0),fn=this.datav.getUint8(this.pos++,!0),pn=e*this.width*4+4*un;this.data[pn]=fn,this.data[pn+1]=hn,this.data[pn+2]=dn,this.data[pn+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var _e=this.height-1;_e>=0;_e--)for(var e=this.bottom_up?_e:this.height-1-_e,un=0;un<this.width;un++){var dn=this.datav.getUint8(this.pos++,!0),hn=this.datav.getUint8(this.pos++,!0),fn=this.datav.getUint8(this.pos++,!0),pn=this.datav.getUint8(this.pos++,!0),mn=e*this.width*4+4*un;this.data[mn]=fn,this.data[mn+1]=hn,this.data[mn+2]=dn,this.data[mn+3]=pn}},te.prototype.getData=function(){return this.data},function(_e){_e.processBMP=function(e,un,dn,hn){var fn=new te(e,!1),pn=fn.width,mn=fn.height,gn={data:fn.getData(),width:pn,height:mn},yn=new Qt(100).encode(gn,100);return _e.processJPEG.call(this,yn,un,dn,hn)}}(E.API),ee.prototype.getData=function(){return this.data},function(_e){_e.processWEBP=function(e,un,dn,hn){var fn=new ee(e),pn=fn.width,mn=fn.height,gn={data:fn.getData(),width:pn,height:mn},yn=new Qt(100).encode(gn,100);return _e.processJPEG.call(this,yn,un,dn,hn)}}(E.API),E.API.processRGBA=function(_e,e,un){for(var dn=_e.data,hn=dn.length,fn=new Uint8Array(hn/4*3),pn=new Uint8Array(hn/4),mn=0,gn=0,yn=0;yn<hn;yn+=4){var xn=dn[yn],En=dn[yn+1],bn=dn[yn+2],vn=dn[yn+3];fn[mn++]=xn,fn[mn++]=En,fn[mn++]=bn,pn[gn++]=vn}var Pn=this.__addimage__.arrayBufferToBinaryString(fn);return{alpha:this.__addimage__.arrayBufferToBinaryString(pn),data:Pn,index:e,alias:un,colorSpace:"DeviceRGB",bitsPerComponent:8,width:_e.width,height:_e.height}},E.API.setLanguage=function(_e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[_e]!==void 0&&(this.internal.languageSettings.languageCode=_e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(_e,e){var un,dn,hn=(e=e||{}).font||this.internal.getFont(),fn=e.fontSize||this.internal.getFontSize(),pn=e.charSpace||this.internal.getCharSpace(),mn=e.widths?e.widths:hn.metadata.Unicode.widths,gn=mn.fof?mn.fof:1,yn=e.kerning?e.kerning:hn.metadata.Unicode.kerning,xn=yn.fof?yn.fof:1,En=e.doKerning!==!1,bn=0,vn=_e.length,Pn=0,Tn=mn[0]||gn,In=[];for(un=0;un<vn;un++)dn=_e.charCodeAt(un),typeof hn.metadata.widthOfString=="function"?In.push((hn.metadata.widthOfGlyph(hn.metadata.characterToGlyph(dn))+pn*(1e3/fn)||0)/1e3):(bn=En&&_typeof(yn[dn])==="object"&&!isNaN(parseInt(yn[dn][Pn],10))?yn[dn][Pn]/xn:0,In.push((mn[dn]||Tn)/gn+bn)),Pn=dn;return In},Yt=Vt.getStringUnitWidth=function(_e,e){var un=(e=e||{}).fontSize||this.internal.getFontSize(),dn=e.font||this.internal.getFont(),hn=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(_e=Vt.processArabic(_e)),typeof dn.metadata.widthOfString=="function"?dn.metadata.widthOfString(_e,un,hn)/un:Gt.apply(this,arguments).reduce(function(fn,pn){return fn+pn},0)},Jt=function(_e,e,un,dn){for(var hn=[],fn=0,pn=_e.length,mn=0;fn!==pn&&mn+e[fn]<un;)mn+=e[fn],fn++;hn.push(_e.slice(0,fn));var gn=fn;for(mn=0;fn!==pn;)mn+e[fn]>dn&&(hn.push(_e.slice(gn,fn)),mn=0,gn=fn),mn+=e[fn],fn++;return gn!==fn&&hn.push(_e.slice(gn,fn)),hn},Xt=function(_e,e,un){un||(un={});var dn,hn,fn,pn,mn,gn,yn,xn=[],En=[xn],bn=un.textIndent||0,vn=0,Pn=0,Tn=_e.split(" "),In=Gt.apply(this,[" ",un])[0];if(gn=un.lineIndent===-1?Tn[0].length+2:un.lineIndent||0){var Rn=Array(gn).join(" "),Sn=[];Tn.map(function($n){($n=$n.split(/\s*\n/)).length>1?Sn=Sn.concat($n.map(function(Fn,Gn){return(Gn&&Fn.length?`
`:"")+Fn})):Sn.push($n[0])}),Tn=Sn,gn=Yt.apply(this,[Rn,un])}for(fn=0,pn=Tn.length;fn<pn;fn++){var Dn=0;if(dn=Tn[fn],gn&&dn[0]==`
`&&(dn=dn.substr(1),Dn=1),bn+vn+(Pn=(hn=Gt.apply(this,[dn,un])).reduce(function($n,Fn){return $n+Fn},0))>e||Dn){if(Pn>e){for(mn=Jt.apply(this,[dn,hn,e-(bn+vn),e]),xn.push(mn.shift()),xn=[mn.pop()];mn.length;)En.push([mn.shift()]);Pn=hn.slice(dn.length-(xn[0]?xn[0].length:0)).reduce(function($n,Fn){return $n+Fn},0)}else xn=[dn];En.push(xn),bn=Pn+gn,vn=In}else xn.push(dn),bn+=vn+Pn,vn=In}return yn=gn?function($n,Fn){return(Fn?Rn:"")+$n.join(" ")}:function($n){return $n.join(" ")},En.map(yn)},Vt.splitTextToSize=function(_e,e,un){var dn,hn=(un=un||{}).fontSize||this.internal.getFontSize(),fn=(function(xn){if(xn.widths&&xn.kerning)return{widths:xn.widths,kerning:xn.kerning};var En=this.internal.getFont(xn.fontName,xn.fontStyle);return En.metadata.Unicode?{widths:En.metadata.Unicode.widths||{0:1},kerning:En.metadata.Unicode.kerning||{}}:{font:En.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,un);dn=Array.isArray(_e)?_e:String(_e).split(/\r?\n/);var pn=1*this.internal.scaleFactor*e/hn;fn.textIndent=un.textIndent?1*un.textIndent*this.internal.scaleFactor/hn:0,fn.lineIndent=un.lineIndent;var mn,gn,yn=[];for(mn=0,gn=dn.length;mn<gn;mn++)yn=yn.concat(Xt.apply(this,[dn[mn],pn,fn]));return yn},function(_e){_e.__fontmetrics__=_e.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",un={},dn={},hn=0;hn<e.length;hn++)un[e[hn]]="0123456789abcdef"[hn],dn["0123456789abcdef"[hn]]=e[hn];var fn=function(En){return"0x"+parseInt(En,10).toString(16)},pn=_e.__fontmetrics__.compress=function(En){var bn,vn,Pn,Tn,In=["{"];for(var Rn in En){if(bn=En[Rn],isNaN(parseInt(Rn,10))?vn="'"+Rn+"'":(Rn=parseInt(Rn,10),vn=(vn=fn(Rn).slice(2)).slice(0,-1)+dn[vn.slice(-1)]),typeof bn=="number")bn<0?(Pn=fn(bn).slice(3),Tn="-"):(Pn=fn(bn).slice(2),Tn=""),Pn=Tn+Pn.slice(0,-1)+dn[Pn.slice(-1)];else{if(_typeof(bn)!=="object")throw new Error("Don't know what to do with value type "+_typeof(bn)+".");Pn=pn(bn)}In.push(vn+Pn)}return In.push("}"),In.join("")},mn=_e.__fontmetrics__.uncompress=function(En){if(typeof En!="string")throw new Error("Invalid argument passed to uncompress.");for(var bn,vn,Pn,Tn,In={},Rn=1,Sn=In,Dn=[],$n="",Fn="",Gn=En.length-1,kn=1;kn<Gn;kn+=1)(Tn=En[kn])=="'"?bn?(Pn=bn.join(""),bn=void 0):bn=[]:bn?bn.push(Tn):Tn=="{"?(Dn.push([Sn,Pn]),Sn={},Pn=void 0):Tn=="}"?((vn=Dn.pop())[0][vn[1]]=Sn,Pn=void 0,Sn=vn[0]):Tn=="-"?Rn=-1:Pn===void 0?un.hasOwnProperty(Tn)?($n+=un[Tn],Pn=parseInt($n,16)*Rn,Rn=1,$n=""):$n+=Tn:un.hasOwnProperty(Tn)?(Fn+=un[Tn],Sn[Pn]=parseInt(Fn,16)*Rn,Rn=1,Pn=void 0,Fn=""):Fn+=Tn;return In},gn={codePages:["WinAnsiEncoding"],WinAnsiEncoding:mn("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},yn={Unicode:{Courier:gn,"Courier-Bold":gn,"Courier-BoldOblique":gn,"Courier-Oblique":gn,Helvetica:gn,"Helvetica-Bold":gn,"Helvetica-BoldOblique":gn,"Helvetica-Oblique":gn,"Times-Roman":gn,"Times-Bold":gn,"Times-BoldItalic":gn,"Times-Italic":gn}},xn={Unicode:{"Courier-Oblique":mn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":mn("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":mn("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:mn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":mn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":mn("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:mn("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:mn("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":mn("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:mn("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":mn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":mn("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":mn("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":mn("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};_e.events.push(["addFont",function(En){var bn=En.font,vn=xn.Unicode[bn.postScriptName];vn&&(bn.metadata.Unicode={},bn.metadata.Unicode.widths=vn.widths,bn.metadata.Unicode.kerning=vn.kerning);var Pn=yn.Unicode[bn.postScriptName];Pn&&(bn.metadata.Unicode.encoding=Pn,bn.encoding=Pn.codePages[0])}])}(E.API),function(_e){var e=function(un){for(var dn=un.length,hn=new Uint8Array(dn),fn=0;fn<dn;fn++)hn[fn]=un.charCodeAt(fn);return hn};_e.API.events.push(["addFont",function(un){var dn=void 0,hn=un.font,fn=un.instance;if(!hn.isStandardFont){if(fn===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+hn.postScriptName+"').");if(typeof(dn=fn.existsFileInVFS(hn.postScriptName)===!1?fn.loadFile(hn.postScriptName):fn.getFileFromVFS(hn.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+hn.postScriptName+"').");(function(pn,mn){mn=/^\x00\x01\x00\x00/.test(mn)?e(mn):e(u(mn)),pn.metadata=_e.API.TTFFont.open(mn),pn.metadata.Unicode=pn.metadata.Unicode||{encoding:{},kerning:{},widths:[]},pn.metadata.glyIdsUsed=[0]})(hn,dn)}}])}(E),function(_e){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-CY-GPSuR.js"),[])).catch(function(un){return Promise.reject(new Error("Could not load canvg: "+un))}).then(function(un){return un.default?un.default:un})}E.API.addSvgAsImage=function(un,dn,hn,fn,pn,mn,gn,yn){if(isNaN(dn)||isNaN(hn))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(fn)||isNaN(pn))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var xn=document.createElement("canvas");xn.width=fn,xn.height=pn;var En=xn.getContext("2d");En.fillStyle="#fff",En.fillRect(0,0,xn.width,xn.height);var bn={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},vn=this;return e().then(function(Pn){return Pn.fromString(En,un,bn)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Pn){return Pn.render(bn)}).then(function(){vn.addImage(xn.toDataURL("image/jpeg",1),dn,hn,fn,pn,gn,yn)})}}(),E.API.putTotalPages=function(_e){var e,un=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(_e,"g"),un=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(_e,this.internal.getFont()),"g"),un=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var dn=1;dn<=this.internal.getNumberOfPages();dn++)for(var hn=0;hn<this.internal.pages[dn].length;hn++)this.internal.pages[dn][hn]=this.internal.pages[dn][hn].replace(e,un);return this},E.API.viewerPreferences=function(_e,e){var un;_e=_e||{},e=e||!1;var dn,hn,fn,pn={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},mn=Object.keys(pn),gn=[],yn=0,xn=0,En=0;function bn(Pn,Tn){var In,Rn=!1;for(In=0;In<Pn.length;In+=1)Pn[In]===Tn&&(Rn=!0);return Rn}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(pn)),this.internal.viewerpreferences.isSubscribed=!1),un=this.internal.viewerpreferences.configuration,_e==="reset"||e===!0){var vn=mn.length;for(En=0;En<vn;En+=1)un[mn[En]].value=un[mn[En]].defaultValue,un[mn[En]].explicitSet=!1}if(_typeof(_e)==="object"){for(hn in _e)if(fn=_e[hn],bn(mn,hn)&&fn!==void 0){if(un[hn].type==="boolean"&&typeof fn=="boolean")un[hn].value=fn;else if(un[hn].type==="name"&&bn(un[hn].valueSet,fn))un[hn].value=fn;else if(un[hn].type==="integer"&&Number.isInteger(fn))un[hn].value=fn;else if(un[hn].type==="array"){for(yn=0;yn<fn.length;yn+=1)if(dn=!0,fn[yn].length===1&&typeof fn[yn][0]=="number")gn.push(String(fn[yn]-1));else if(fn[yn].length>1){for(xn=0;xn<fn[yn].length;xn+=1)typeof fn[yn][xn]!="number"&&(dn=!1);dn===!0&&gn.push([fn[yn][0]-1,fn[yn][1]-1].join(" "))}un[hn].value="["+gn.join(" ")+"]"}else un[hn].value=un[hn].defaultValue;un[hn].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Pn,Tn=[];for(Pn in un)un[Pn].explicitSet===!0&&(un[Pn].type==="name"?Tn.push("/"+Pn+" /"+un[Pn].value):Tn.push("/"+Pn+" "+un[Pn].value));Tn.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Tn.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=un,this},function(_e){var e=function(){var dn='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',hn=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),fn=unescape(encodeURIComponent(dn)),pn=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),mn=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),gn=unescape(encodeURIComponent("</x:xmpmeta>")),yn=fn.length+pn.length+mn.length+hn.length+gn.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+yn+" >>"),this.internal.write("stream"),this.internal.write(hn+fn+pn+mn+gn),this.internal.write("endstream"),this.internal.write("endobj")},un=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};_e.addMetadata=function(dn,hn){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:dn,namespaceuri:hn||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",un),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(_e){var e=_e.API,un=e.pdfEscape16=function(fn,pn){for(var mn,gn=pn.metadata.Unicode.widths,yn=["","0","00","000","0000"],xn=[""],En=0,bn=fn.length;En<bn;++En){if(mn=pn.metadata.characterToGlyph(fn.charCodeAt(En)),pn.metadata.glyIdsUsed.push(mn),pn.metadata.toUnicode[mn]=fn.charCodeAt(En),gn.indexOf(mn)==-1&&(gn.push(mn),gn.push([parseInt(pn.metadata.widthOfGlyph(mn),10)])),mn=="0")return xn.join("");mn=mn.toString(16),xn.push(yn[4-mn.length],mn)}return xn.join("")},dn=function(fn){var pn,mn,gn,yn,xn,En,bn;for(xn=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,gn=[],En=0,bn=(mn=Object.keys(fn).sort(function(vn,Pn){return vn-Pn})).length;En<bn;En++)pn=mn[En],gn.length>=100&&(xn+=`
`+gn.length+` beginbfchar
`+gn.join(`
`)+`
endbfchar`,gn=[]),fn[pn]!==void 0&&fn[pn]!==null&&typeof fn[pn].toString=="function"&&(yn=("0000"+fn[pn].toString(16)).slice(-4),pn=("0000"+(+pn).toString(16)).slice(-4),gn.push("<"+pn+"><"+yn+">"));return gn.length&&(xn+=`
`+gn.length+` beginbfchar
`+gn.join(`
`)+`
endbfchar
`),xn+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(fn){(function(pn){var mn=pn.font,gn=pn.out,yn=pn.newObject,xn=pn.putStream;if(mn.metadata instanceof _e.API.TTFFont&&mn.encoding==="Identity-H"){for(var En=mn.metadata.Unicode.widths,bn=mn.metadata.subset.encode(mn.metadata.glyIdsUsed,1),vn="",Pn=0;Pn<bn.length;Pn++)vn+=String.fromCharCode(bn[Pn]);var Tn=yn();xn({data:vn,addLength1:!0,objectId:Tn}),gn("endobj");var In=yn();xn({data:dn(mn.metadata.toUnicode),addLength1:!0,objectId:In}),gn("endobj");var Rn=yn();gn("<<"),gn("/Type /FontDescriptor"),gn("/FontName /"+F(mn.fontName)),gn("/FontFile2 "+Tn+" 0 R"),gn("/FontBBox "+_e.API.PDFObject.convert(mn.metadata.bbox)),gn("/Flags "+mn.metadata.flags),gn("/StemV "+mn.metadata.stemV),gn("/ItalicAngle "+mn.metadata.italicAngle),gn("/Ascent "+mn.metadata.ascender),gn("/Descent "+mn.metadata.decender),gn("/CapHeight "+mn.metadata.capHeight),gn(">>"),gn("endobj");var Sn=yn();gn("<<"),gn("/Type /Font"),gn("/BaseFont /"+F(mn.fontName)),gn("/FontDescriptor "+Rn+" 0 R"),gn("/W "+_e.API.PDFObject.convert(En)),gn("/CIDToGIDMap /Identity"),gn("/DW 1000"),gn("/Subtype /CIDFontType2"),gn("/CIDSystemInfo"),gn("<<"),gn("/Supplement 0"),gn("/Registry (Adobe)"),gn("/Ordering ("+mn.encoding+")"),gn(">>"),gn(">>"),gn("endobj"),mn.objectNumber=yn(),gn("<<"),gn("/Type /Font"),gn("/Subtype /Type0"),gn("/ToUnicode "+In+" 0 R"),gn("/BaseFont /"+F(mn.fontName)),gn("/Encoding /"+mn.encoding),gn("/DescendantFonts ["+Sn+" 0 R]"),gn(">>"),gn("endobj"),mn.isAlreadyPutted=!0}})(fn)}]),e.events.push(["putFont",function(fn){(function(pn){var mn=pn.font,gn=pn.out,yn=pn.newObject,xn=pn.putStream;if(mn.metadata instanceof _e.API.TTFFont&&mn.encoding==="WinAnsiEncoding"){for(var En=mn.metadata.rawData,bn="",vn=0;vn<En.length;vn++)bn+=String.fromCharCode(En[vn]);var Pn=yn();xn({data:bn,addLength1:!0,objectId:Pn}),gn("endobj");var Tn=yn();xn({data:dn(mn.metadata.toUnicode),addLength1:!0,objectId:Tn}),gn("endobj");var In=yn();gn("<<"),gn("/Descent "+mn.metadata.decender),gn("/CapHeight "+mn.metadata.capHeight),gn("/StemV "+mn.metadata.stemV),gn("/Type /FontDescriptor"),gn("/FontFile2 "+Pn+" 0 R"),gn("/Flags 96"),gn("/FontBBox "+_e.API.PDFObject.convert(mn.metadata.bbox)),gn("/FontName /"+F(mn.fontName)),gn("/ItalicAngle "+mn.metadata.italicAngle),gn("/Ascent "+mn.metadata.ascender),gn(">>"),gn("endobj"),mn.objectNumber=yn();for(var Rn=0;Rn<mn.metadata.hmtx.widths.length;Rn++)mn.metadata.hmtx.widths[Rn]=parseInt(mn.metadata.hmtx.widths[Rn]*(1e3/mn.metadata.head.unitsPerEm));gn("<</Subtype/TrueType/Type/Font/ToUnicode "+Tn+" 0 R/BaseFont/"+F(mn.fontName)+"/FontDescriptor "+In+" 0 R/Encoding/"+mn.encoding+" /FirstChar 29 /LastChar 255 /Widths "+_e.API.PDFObject.convert(mn.metadata.hmtx.widths)+">>"),gn("endobj"),mn.isAlreadyPutted=!0}})(fn)}]);var hn=function(fn){var pn,mn=fn.text||"",gn=fn.x,yn=fn.y,xn=fn.options||{},En=fn.mutex||{},bn=En.pdfEscape,vn=En.activeFontKey,Pn=En.fonts,Tn=vn,In="",Rn=0,Sn="",Dn=Pn[Tn].encoding;if(Pn[Tn].encoding!=="Identity-H")return{text:mn,x:gn,y:yn,options:xn,mutex:En};for(Sn=mn,Tn=vn,Array.isArray(mn)&&(Sn=mn[0]),Rn=0;Rn<Sn.length;Rn+=1)Pn[Tn].metadata.hasOwnProperty("cmap")&&(pn=Pn[Tn].metadata.cmap.unicode.codeMap[Sn[Rn].charCodeAt(0)]),pn||Sn[Rn].charCodeAt(0)<256&&Pn[Tn].metadata.hasOwnProperty("Unicode")?In+=Sn[Rn]:In+="";var $n="";return parseInt(Tn.slice(1))<14||Dn==="WinAnsiEncoding"?$n=bn(In,Tn).split("").map(function(Fn){return Fn.charCodeAt(0).toString(16)}).join(""):Dn==="Identity-H"&&($n=un(In,Pn[Tn])),En.isHex=!0,{text:$n,x:gn,y:yn,options:xn,mutex:En}};e.events.push(["postProcessText",function(fn){var pn=fn.text||"",mn=[],gn={text:pn,x:fn.x,y:fn.y,options:fn.options,mutex:fn.mutex};if(Array.isArray(pn)){var yn=0;for(yn=0;yn<pn.length;yn+=1)Array.isArray(pn[yn])&&pn[yn].length===3?mn.push([hn(Object.assign({},gn,{text:pn[yn][0]})).text,pn[yn][1],pn[yn][2]]):mn.push(hn(Object.assign({},gn,{text:pn[yn]})).text);fn.text=mn}else fn.text=hn(Object.assign({},gn,{text:pn})).text}])}(E),function(_e){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};_e.existsFileInVFS=function(un){return e.call(this),this.internal.vFS[un]!==void 0},_e.addFileToVFS=function(un,dn){return e.call(this),this.internal.vFS[un]=dn,this},_e.getFileFromVFS=function(un){return e.call(this),this.internal.vFS[un]!==void 0?this.internal.vFS[un]:null}}(E.API),function(_e){_e.__bidiEngine__=_e.prototype.__bidiEngine__=function(dn){var hn,fn,pn,mn,gn,yn,xn,En=e,bn=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],vn=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Pn={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Tn={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},In=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Rn=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Sn=!1,Dn=0;this.__bidiEngine__={};var $n=function(Cn){var Mn=Cn.charCodeAt(),Bn=Mn>>8,Xn=Tn[Bn];return Xn!==void 0?En[256*Xn+(255&Mn)]:Bn===252||Bn===253?"AL":Rn.test(Bn)?"L":Bn===8?"R":"N"},Fn=function(Cn){for(var Mn,Bn=0;Bn<Cn.length;Bn++){if((Mn=$n(Cn.charAt(Bn)))==="L")return!1;if(Mn==="R")return!0}return!1},Gn=function(Cn,Mn,Bn,Xn){var nr,sr,lr,tr,Jn=Mn[Xn];switch(Jn){case"L":case"R":Sn=!1;break;case"N":case"AN":break;case"EN":Sn&&(Jn="AN");break;case"AL":Sn=!0,Jn="R";break;case"WS":Jn="N";break;case"CS":Xn<1||Xn+1>=Mn.length||(nr=Bn[Xn-1])!=="EN"&&nr!=="AN"||(sr=Mn[Xn+1])!=="EN"&&sr!=="AN"?Jn="N":Sn&&(sr="AN"),Jn=sr===nr?sr:"N";break;case"ES":Jn=(nr=Xn>0?Bn[Xn-1]:"B")==="EN"&&Xn+1<Mn.length&&Mn[Xn+1]==="EN"?"EN":"N";break;case"ET":if(Xn>0&&Bn[Xn-1]==="EN"){Jn="EN";break}if(Sn){Jn="N";break}for(lr=Xn+1,tr=Mn.length;lr<tr&&Mn[lr]==="ET";)lr++;Jn=lr<tr&&Mn[lr]==="EN"?"EN":"N";break;case"NSM":if(pn&&!mn){for(tr=Mn.length,lr=Xn+1;lr<tr&&Mn[lr]==="NSM";)lr++;if(lr<tr){var ar=Cn[Xn],gr=ar>=1425&&ar<=2303||ar===64286;if(nr=Mn[lr],gr&&(nr==="R"||nr==="AL")){Jn="R";break}}}Jn=Xn<1||(nr=Mn[Xn-1])==="B"?"N":Bn[Xn-1];break;case"B":Sn=!1,hn=!0,Jn=Dn;break;case"S":fn=!0,Jn="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Sn=!1;break;case"BN":Jn="N"}return Jn},kn=function(Cn,Mn,Bn){var Xn=Cn.split("");return Bn&&Nn(Xn,Bn,{hiLevel:Dn}),Xn.reverse(),Mn&&Mn.reverse(),Xn.join("")},Nn=function(Cn,Mn,Bn){var Xn,nr,sr,lr,tr,Jn=-1,ar=Cn.length,gr=0,qn=[],On=Dn?vn:bn,Un=[];for(Sn=!1,hn=!1,fn=!1,nr=0;nr<ar;nr++)Un[nr]=$n(Cn[nr]);for(sr=0;sr<ar;sr++){if(tr=gr,qn[sr]=Gn(Cn,Un,qn,sr),Xn=240&(gr=On[tr][Pn[qn[sr]]]),gr&=15,Mn[sr]=lr=On[gr][5],Xn>0)if(Xn===16){for(nr=Jn;nr<sr;nr++)Mn[nr]=1;Jn=-1}else Jn=-1;if(On[gr][6])Jn===-1&&(Jn=sr);else if(Jn>-1){for(nr=Jn;nr<sr;nr++)Mn[nr]=lr;Jn=-1}Un[sr]==="B"&&(Mn[sr]=0),Bn.hiLevel|=lr}fn&&function(Yn,er,Zn){for(var ir=0;ir<Zn;ir++)if(Yn[ir]==="S"){er[ir]=Dn;for(var fr=ir-1;fr>=0&&Yn[fr]==="WS";fr--)er[fr]=Dn}}(Un,Mn,ar)},Ln=function(Cn,Mn,Bn,Xn,nr){if(!(nr.hiLevel<Cn)){if(Cn===1&&Dn===1&&!hn)return Mn.reverse(),void(Bn&&Bn.reverse());for(var sr,lr,tr,Jn,ar=Mn.length,gr=0;gr<ar;){if(Xn[gr]>=Cn){for(tr=gr+1;tr<ar&&Xn[tr]>=Cn;)tr++;for(Jn=gr,lr=tr-1;Jn<lr;Jn++,lr--)sr=Mn[Jn],Mn[Jn]=Mn[lr],Mn[lr]=sr,Bn&&(sr=Bn[Jn],Bn[Jn]=Bn[lr],Bn[lr]=sr);gr=tr}gr++}}},zn=function(Cn,Mn,Bn){var Xn=Cn.split(""),nr={hiLevel:Dn};return Bn||(Bn=[]),Nn(Xn,Bn,nr),function(sr,lr,tr){if(tr.hiLevel!==0&&xn)for(var Jn,ar=0;ar<sr.length;ar++)lr[ar]===1&&(Jn=In.indexOf(sr[ar]))>=0&&(sr[ar]=In[Jn+1])}(Xn,Bn,nr),Ln(2,Xn,Mn,Bn,nr),Ln(1,Xn,Mn,Bn,nr),Xn.join("")};return this.__bidiEngine__.doBidiReorder=function(Cn,Mn,Bn){if(function(nr,sr){if(sr)for(var lr=0;lr<nr.length;lr++)sr[lr]=lr;mn===void 0&&(mn=Fn(nr)),yn===void 0&&(yn=Fn(nr))}(Cn,Mn),pn||!gn||yn)if(pn&&gn&&mn^yn)Dn=mn?1:0,Cn=kn(Cn,Mn,Bn);else if(!pn&&gn&&yn)Dn=mn?1:0,Cn=zn(Cn,Mn,Bn),Cn=kn(Cn,Mn);else if(!pn||mn||gn||yn){if(pn&&!gn&&mn^yn)Cn=kn(Cn,Mn),mn?(Dn=0,Cn=zn(Cn,Mn,Bn)):(Dn=1,Cn=zn(Cn,Mn,Bn),Cn=kn(Cn,Mn));else if(pn&&mn&&!gn&&yn)Dn=1,Cn=zn(Cn,Mn,Bn),Cn=kn(Cn,Mn);else if(!pn&&!gn&&mn^yn){var Xn=xn;mn?(Dn=1,Cn=zn(Cn,Mn,Bn),Dn=0,xn=!1,Cn=zn(Cn,Mn,Bn),xn=Xn):(Dn=0,Cn=zn(Cn,Mn,Bn),Cn=kn(Cn,Mn),Dn=1,xn=!1,Cn=zn(Cn,Mn,Bn),xn=Xn,Cn=kn(Cn,Mn))}}else Dn=0,Cn=zn(Cn,Mn,Bn);else Dn=mn?1:0,Cn=zn(Cn,Mn,Bn);return Cn},this.__bidiEngine__.setOptions=function(Cn){Cn&&(pn=Cn.isInputVisual,gn=Cn.isOutputVisual,mn=Cn.isInputRtl,yn=Cn.isOutputRtl,xn=Cn.isSymmetricSwapping)},this.__bidiEngine__.setOptions(dn),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],un=new _e.__bidiEngine__({isInputVisual:!0});_e.API.events.push(["postProcessText",function(dn){var hn=dn.text;dn.x,dn.y;var fn=dn.options||{};dn.mutex,fn.lang;var pn=[];if(fn.isInputVisual=typeof fn.isInputVisual!="boolean"||fn.isInputVisual,un.setOptions(fn),Object.prototype.toString.call(hn)==="[object Array]"){var mn=0;for(pn=[],mn=0;mn<hn.length;mn+=1)Object.prototype.toString.call(hn[mn])==="[object Array]"?pn.push([un.doBidiReorder(hn[mn][0]),hn[mn][1],hn[mn][2]]):pn.push([un.doBidiReorder(hn[mn])]);dn.text=pn}else dn.text=un.doBidiReorder(hn);un.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function _e(e){var un;if(this.rawData=e,un=this.contents=new ne(e),this.contents.pos=4,un.readString(4)==="ttcf")throw new Error("TTCF not supported.");un.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return _e.open=function(e){return new _e(e)},_e.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},_e.prototype.registerTTF=function(){var e,un,dn,hn,fn;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var pn,mn,gn,yn;for(yn=[],pn=0,mn=(gn=this.bbox).length;pn<mn;pn++)e=gn[pn],yn.push(Math.round(e*this.scaleFactor));return yn}).call(this),this.stemV=0,this.post.exists?(dn=255&(hn=this.post.italic_angle),32768&(un=hn>>16)&&(un=-(1+(65535^un))),this.italicAngle=+(un+"."+dn)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(fn=this.familyClass)===1||fn===2||fn===3||fn===4||fn===5||fn===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},_e.prototype.characterToGlyph=function(e){var un;return((un=this.cmap.unicode)!=null?un.codeMap[e]:void 0)||0},_e.prototype.widthOfGlyph=function(e){var un;return un=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*un},_e.prototype.widthOfString=function(e,un,dn){var hn,fn,pn,mn;for(pn=0,fn=0,mn=(e=""+e).length;0<=mn?fn<mn:fn>mn;fn=0<=mn?++fn:--fn)hn=e.charCodeAt(fn),pn+=this.widthOfGlyph(this.characterToGlyph(hn))+dn*(1e3/un)||0;return pn*(un/1e3)},_e.prototype.lineHeight=function(e,un){var dn;return un==null&&(un=!1),dn=un?this.lineGap:0,(this.ascender+dn-this.decender)/1e3*e},_e}();var re,ne=function(){function _e(e){this.data=e??[],this.pos=0,this.length=this.data.length}return _e.prototype.readByte=function(){return this.data[this.pos++]},_e.prototype.writeByte=function(e){return this.data[this.pos++]=e},_e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},_e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},_e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},_e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},_e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},_e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},_e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},_e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},_e.prototype.readString=function(e){var un,dn;for(dn=[],un=0;0<=e?un<e:un>e;un=0<=e?++un:--un)dn[un]=String.fromCharCode(this.readByte());return dn.join("")},_e.prototype.writeString=function(e){var un,dn,hn;for(hn=[],un=0,dn=e.length;0<=dn?un<dn:un>dn;un=0<=dn?++un:--un)hn.push(this.writeByte(e.charCodeAt(un)));return hn},_e.prototype.readShort=function(){return this.readInt16()},_e.prototype.writeShort=function(e){return this.writeInt16(e)},_e.prototype.readLongLong=function(){var e,un,dn,hn,fn,pn,mn,gn;return e=this.readByte(),un=this.readByte(),dn=this.readByte(),hn=this.readByte(),fn=this.readByte(),pn=this.readByte(),mn=this.readByte(),gn=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^un)+1099511627776*(255^dn)+4294967296*(255^hn)+16777216*(255^fn)+65536*(255^pn)+256*(255^mn)+(255^gn)+1):72057594037927940*e+281474976710656*un+1099511627776*dn+4294967296*hn+16777216*fn+65536*pn+256*mn+gn},_e.prototype.writeLongLong=function(e){var un,dn;return un=Math.floor(e/4294967296),dn=4294967295&e,this.writeByte(un>>24&255),this.writeByte(un>>16&255),this.writeByte(un>>8&255),this.writeByte(255&un),this.writeByte(dn>>24&255),this.writeByte(dn>>16&255),this.writeByte(dn>>8&255),this.writeByte(255&dn)},_e.prototype.readInt=function(){return this.readInt32()},_e.prototype.writeInt=function(e){return this.writeInt32(e)},_e.prototype.read=function(e){var un,dn;for(un=[],dn=0;0<=e?dn<e:dn>e;dn=0<=e?++dn:--dn)un.push(this.readByte());return un},_e.prototype.write=function(e){var un,dn,hn,fn;for(fn=[],dn=0,hn=e.length;dn<hn;dn++)un=e[dn],fn.push(this.writeByte(un));return fn},_e}(),ie=function(){var _e;function e(un){var dn,hn,fn;for(this.scalarType=un.readInt(),this.tableCount=un.readShort(),this.searchRange=un.readShort(),this.entrySelector=un.readShort(),this.rangeShift=un.readShort(),this.tables={},hn=0,fn=this.tableCount;0<=fn?hn<fn:hn>fn;hn=0<=fn?++hn:--hn)dn={tag:un.readString(4),checksum:un.readInt(),offset:un.readInt(),length:un.readInt()},this.tables[dn.tag]=dn}return e.prototype.encode=function(un){var dn,hn,fn,pn,mn,gn,yn,xn,En,bn,vn,Pn,Tn;for(Tn in vn=Object.keys(un).length,gn=Math.log(2),En=16*Math.floor(Math.log(vn)/gn),pn=Math.floor(En/gn),xn=16*vn-En,(hn=new ne).writeInt(this.scalarType),hn.writeShort(vn),hn.writeShort(En),hn.writeShort(pn),hn.writeShort(xn),fn=16*vn,yn=hn.pos+fn,mn=null,Pn=[],un)for(bn=un[Tn],hn.writeString(Tn),hn.writeInt(_e(bn)),hn.writeInt(yn),hn.writeInt(bn.length),Pn=Pn.concat(bn),Tn==="head"&&(mn=yn),yn+=bn.length;yn%4;)Pn.push(0),yn++;return hn.write(Pn),dn=2981146554-_e(hn.data),hn.pos=mn+8,hn.writeUInt32(dn),hn.data},_e=function(un){var dn,hn,fn,pn;for(un=ve.call(un);un.length%4;)un.push(0);for(fn=new ne(un),hn=0,dn=0,pn=un.length;dn<pn;dn=dn+=4)hn+=fn.readUInt32();return 4294967295&hn},e}(),ae={}.hasOwnProperty,oe=function(_e,e){for(var un in e)ae.call(e,un)&&(_e[un]=e[un]);function dn(){this.constructor=_e}return dn.prototype=e.prototype,_e.prototype=new dn,_e.__super__=e.prototype,_e};re=function(){function _e(e){var un;this.file=e,un=this.file.directory.tables[this.tag],this.exists=!!un,un&&(this.offset=un.offset,this.length=un.length,this.parse(this.file.contents))}return _e.prototype.parse=function(){},_e.prototype.encode=function(){},_e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},_e}();var se=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(un){return un.pos=this.offset,this.version=un.readInt(),this.revision=un.readInt(),this.checkSumAdjustment=un.readInt(),this.magicNumber=un.readInt(),this.flags=un.readShort(),this.unitsPerEm=un.readShort(),this.created=un.readLongLong(),this.modified=un.readLongLong(),this.xMin=un.readShort(),this.yMin=un.readShort(),this.xMax=un.readShort(),this.yMax=un.readShort(),this.macStyle=un.readShort(),this.lowestRecPPEM=un.readShort(),this.fontDirectionHint=un.readShort(),this.indexToLocFormat=un.readShort(),this.glyphDataFormat=un.readShort()},e.prototype.encode=function(un){var dn;return(dn=new ne).writeInt(this.version),dn.writeInt(this.revision),dn.writeInt(this.checkSumAdjustment),dn.writeInt(this.magicNumber),dn.writeShort(this.flags),dn.writeShort(this.unitsPerEm),dn.writeLongLong(this.created),dn.writeLongLong(this.modified),dn.writeShort(this.xMin),dn.writeShort(this.yMin),dn.writeShort(this.xMax),dn.writeShort(this.yMax),dn.writeShort(this.macStyle),dn.writeShort(this.lowestRecPPEM),dn.writeShort(this.fontDirectionHint),dn.writeShort(un),dn.writeShort(this.glyphDataFormat),dn.data},e}(),ce=function(){function _e(e,un){var dn,hn,fn,pn,mn,gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn,Sn,Dn;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=un+e.readInt(),En=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(gn=0;gn<256;++gn)this.codeMap[gn]=e.readByte();break;case 4:for(vn=e.readUInt16(),bn=vn/2,e.pos+=6,fn=function(){var $n,Fn;for(Fn=[],gn=$n=0;0<=bn?$n<bn:$n>bn;gn=0<=bn?++$n:--$n)Fn.push(e.readUInt16());return Fn}(),e.pos+=2,Tn=function(){var $n,Fn;for(Fn=[],gn=$n=0;0<=bn?$n<bn:$n>bn;gn=0<=bn?++$n:--$n)Fn.push(e.readUInt16());return Fn}(),yn=function(){var $n,Fn;for(Fn=[],gn=$n=0;0<=bn?$n<bn:$n>bn;gn=0<=bn?++$n:--$n)Fn.push(e.readUInt16());return Fn}(),xn=function(){var $n,Fn;for(Fn=[],gn=$n=0;0<=bn?$n<bn:$n>bn;gn=0<=bn?++$n:--$n)Fn.push(e.readUInt16());return Fn}(),hn=(this.length-e.pos+this.offset)/2,mn=function(){var $n,Fn;for(Fn=[],gn=$n=0;0<=hn?$n<hn:$n>hn;gn=0<=hn?++$n:--$n)Fn.push(e.readUInt16());return Fn}(),gn=Rn=0,Dn=fn.length;Rn<Dn;gn=++Rn)for(In=fn[gn],dn=Sn=Pn=Tn[gn];Pn<=In?Sn<=In:Sn>=In;dn=Pn<=In?++Sn:--Sn)xn[gn]===0?pn=dn+yn[gn]:(pn=mn[xn[gn]/2+(dn-Pn)-(bn-gn)]||0)!==0&&(pn+=yn[gn]),this.codeMap[dn]=65535&pn}e.pos=En}return _e.encode=function(e,un){var dn,hn,fn,pn,mn,gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn,Sn,Dn,$n,Fn,Gn,kn,Nn,Ln,zn,Cn,Mn,Bn,Xn,nr,sr,lr,tr,Jn,ar,gr,qn,On,Un,Yn,er,Zn,ir,fr,br,Tr,Ir;switch(Xn=new ne,pn=Object.keys(e).sort(function(Mr,qr){return Mr-qr}),un){case"macroman":for(Tn=0,In=function(){var Mr=[];for(Pn=0;Pn<256;++Pn)Mr.push(0);return Mr}(),Sn={0:0},fn={},nr=0,Jn=pn.length;nr<Jn;nr++)Sn[fr=e[hn=pn[nr]]]==null&&(Sn[fr]=++Tn),fn[hn]={old:e[hn],new:Sn[e[hn]]},In[hn]=Sn[e[hn]];return Xn.writeUInt16(1),Xn.writeUInt16(0),Xn.writeUInt32(12),Xn.writeUInt16(0),Xn.writeUInt16(262),Xn.writeUInt16(0),Xn.write(In),{charMap:fn,subtable:Xn.data,maxGlyphID:Tn+1};case"unicode":for(Mn=[],En=[],Dn=0,Sn={},dn={},Rn=yn=null,sr=0,ar=pn.length;sr<ar;sr++)Sn[Fn=e[hn=pn[sr]]]==null&&(Sn[Fn]=++Dn),dn[hn]={old:Fn,new:Sn[Fn]},mn=Sn[Fn]-hn,Rn!=null&&mn===yn||(Rn&&En.push(Rn),Mn.push(hn),yn=mn),Rn=hn;for(Rn&&En.push(Rn),En.push(65535),Mn.push(65535),zn=2*(Ln=Mn.length),Nn=2*Math.pow(Math.log(Ln)/Math.LN2,2),bn=Math.log(Nn/2)/Math.LN2,kn=2*Ln-Nn,gn=[],Gn=[],vn=[],Pn=lr=0,gr=Mn.length;lr<gr;Pn=++lr){if(Cn=Mn[Pn],xn=En[Pn],Cn===65535){gn.push(0),Gn.push(0);break}if(Cn-(Bn=dn[Cn].new)>=32768)for(gn.push(0),Gn.push(2*(vn.length+Ln-Pn)),hn=tr=Cn;Cn<=xn?tr<=xn:tr>=xn;hn=Cn<=xn?++tr:--tr)vn.push(dn[hn].new);else gn.push(Bn-Cn),Gn.push(0)}for(Xn.writeUInt16(3),Xn.writeUInt16(1),Xn.writeUInt32(12),Xn.writeUInt16(4),Xn.writeUInt16(16+8*Ln+2*vn.length),Xn.writeUInt16(0),Xn.writeUInt16(zn),Xn.writeUInt16(Nn),Xn.writeUInt16(bn),Xn.writeUInt16(kn),Zn=0,qn=En.length;Zn<qn;Zn++)hn=En[Zn],Xn.writeUInt16(hn);for(Xn.writeUInt16(0),ir=0,On=Mn.length;ir<On;ir++)hn=Mn[ir],Xn.writeUInt16(hn);for(br=0,Un=gn.length;br<Un;br++)mn=gn[br],Xn.writeUInt16(mn);for(Tr=0,Yn=Gn.length;Tr<Yn;Tr++)$n=Gn[Tr],Xn.writeUInt16($n);for(Ir=0,er=vn.length;Ir<er;Ir++)Tn=vn[Ir],Xn.writeUInt16(Tn);return{charMap:dn,subtable:Xn.data,maxGlyphID:Dn+1}}},_e}(),ue=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(un){var dn,hn,fn;for(un.pos=this.offset,this.version=un.readUInt16(),fn=un.readUInt16(),this.tables=[],this.unicode=null,hn=0;0<=fn?hn<fn:hn>fn;hn=0<=fn?++hn:--hn)dn=new ce(un,this.offset),this.tables.push(dn),dn.isUnicode&&this.unicode==null&&(this.unicode=dn);return!0},e.encode=function(un,dn){var hn,fn;return dn==null&&(dn="macroman"),hn=ce.encode(un,dn),(fn=new ne).writeUInt16(0),fn.writeUInt16(1),hn.table=fn.data.concat(hn.subtable),hn},e}(),he=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(un){return un.pos=this.offset,this.version=un.readInt(),this.ascender=un.readShort(),this.decender=un.readShort(),this.lineGap=un.readShort(),this.advanceWidthMax=un.readShort(),this.minLeftSideBearing=un.readShort(),this.minRightSideBearing=un.readShort(),this.xMaxExtent=un.readShort(),this.caretSlopeRise=un.readShort(),this.caretSlopeRun=un.readShort(),this.caretOffset=un.readShort(),un.pos+=8,this.metricDataFormat=un.readShort(),this.numberOfMetrics=un.readUInt16()},e}(),le=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(un){if(un.pos=this.offset,this.version=un.readUInt16(),this.averageCharWidth=un.readShort(),this.weightClass=un.readUInt16(),this.widthClass=un.readUInt16(),this.type=un.readShort(),this.ySubscriptXSize=un.readShort(),this.ySubscriptYSize=un.readShort(),this.ySubscriptXOffset=un.readShort(),this.ySubscriptYOffset=un.readShort(),this.ySuperscriptXSize=un.readShort(),this.ySuperscriptYSize=un.readShort(),this.ySuperscriptXOffset=un.readShort(),this.ySuperscriptYOffset=un.readShort(),this.yStrikeoutSize=un.readShort(),this.yStrikeoutPosition=un.readShort(),this.familyClass=un.readShort(),this.panose=function(){var dn,hn;for(hn=[],dn=0;dn<10;++dn)hn.push(un.readByte());return hn}(),this.charRange=function(){var dn,hn;for(hn=[],dn=0;dn<4;++dn)hn.push(un.readInt());return hn}(),this.vendorID=un.readString(4),this.selection=un.readShort(),this.firstCharIndex=un.readShort(),this.lastCharIndex=un.readShort(),this.version>0&&(this.ascent=un.readShort(),this.descent=un.readShort(),this.lineGap=un.readShort(),this.winAscent=un.readShort(),this.winDescent=un.readShort(),this.codePageRange=function(){var dn,hn;for(hn=[],dn=0;dn<2;dn=++dn)hn.push(un.readInt());return hn}(),this.version>1))return this.xHeight=un.readShort(),this.capHeight=un.readShort(),this.defaultChar=un.readShort(),this.breakChar=un.readShort(),this.maxContext=un.readShort()},e}(),fe=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(un){var dn,hn,fn;switch(un.pos=this.offset,this.format=un.readInt(),this.italicAngle=un.readInt(),this.underlinePosition=un.readShort(),this.underlineThickness=un.readShort(),this.isFixedPitch=un.readInt(),this.minMemType42=un.readInt(),this.maxMemType42=un.readInt(),this.minMemType1=un.readInt(),this.maxMemType1=un.readInt(),this.format){case 65536:break;case 131072:var pn;for(hn=un.readUInt16(),this.glyphNameIndex=[],pn=0;0<=hn?pn<hn:pn>hn;pn=0<=hn?++pn:--pn)this.glyphNameIndex.push(un.readUInt16());for(this.names=[],fn=[];un.pos<this.offset+this.length;)dn=un.readByte(),fn.push(this.names.push(un.readString(dn)));return fn;case 151552:return hn=un.readUInt16(),this.offsets=un.read(hn);case 196608:break;case 262144:return this.map=(function(){var mn,gn,yn;for(yn=[],pn=mn=0,gn=this.file.maxp.numGlyphs;0<=gn?mn<gn:mn>gn;pn=0<=gn?++mn:--mn)yn.push(un.readUInt32());return yn}).call(this)}},e}(),de=function(_e,e){this.raw=_e,this.length=_e.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(un){var dn,hn,fn,pn,mn,gn,yn,xn,En,bn,vn;for(un.pos=this.offset,un.readShort(),dn=un.readShort(),gn=un.readShort(),hn=[],pn=0;0<=dn?pn<dn:pn>dn;pn=0<=dn?++pn:--pn)hn.push({platformID:un.readShort(),encodingID:un.readShort(),languageID:un.readShort(),nameID:un.readShort(),length:un.readShort(),offset:this.offset+gn+un.readShort()});for(yn={},pn=En=0,bn=hn.length;En<bn;pn=++En)fn=hn[pn],un.pos=fn.offset,xn=un.readString(fn.length),mn=new de(xn,fn),yn[vn=fn.nameID]==null&&(yn[vn]=[]),yn[fn.nameID].push(mn);this.strings=yn,this.copyright=yn[0],this.fontFamily=yn[1],this.fontSubfamily=yn[2],this.uniqueSubfamily=yn[3],this.fontName=yn[4],this.version=yn[5];try{this.postscriptName=yn[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=yn[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=yn[7],this.manufacturer=yn[8],this.designer=yn[9],this.description=yn[10],this.vendorUrl=yn[11],this.designerUrl=yn[12],this.license=yn[13],this.licenseUrl=yn[14],this.preferredFamily=yn[15],this.preferredSubfamily=yn[17],this.compatibleFull=yn[18],this.sampleText=yn[19]},e}(),ge=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(un){return un.pos=this.offset,this.version=un.readInt(),this.numGlyphs=un.readUInt16(),this.maxPoints=un.readUInt16(),this.maxContours=un.readUInt16(),this.maxCompositePoints=un.readUInt16(),this.maxComponentContours=un.readUInt16(),this.maxZones=un.readUInt16(),this.maxTwilightPoints=un.readUInt16(),this.maxStorage=un.readUInt16(),this.maxFunctionDefs=un.readUInt16(),this.maxInstructionDefs=un.readUInt16(),this.maxStackElements=un.readUInt16(),this.maxSizeOfInstructions=un.readUInt16(),this.maxComponentElements=un.readUInt16(),this.maxComponentDepth=un.readUInt16()},e}(),me=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(un){var dn,hn,fn,pn,mn,gn,yn;for(un.pos=this.offset,this.metrics=[],dn=0,gn=this.file.hhea.numberOfMetrics;0<=gn?dn<gn:dn>gn;dn=0<=gn?++dn:--dn)this.metrics.push({advance:un.readUInt16(),lsb:un.readInt16()});for(fn=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var xn,En;for(En=[],dn=xn=0;0<=fn?xn<fn:xn>fn;dn=0<=fn?++xn:--xn)En.push(un.readInt16());return En}(),this.widths=(function(){var xn,En,bn,vn;for(vn=[],xn=0,En=(bn=this.metrics).length;xn<En;xn++)pn=bn[xn],vn.push(pn.advance);return vn}).call(this),hn=this.widths[this.widths.length-1],yn=[],dn=mn=0;0<=fn?mn<fn:mn>fn;dn=0<=fn?++mn:--mn)yn.push(this.widths.push(hn));return yn},e.prototype.forGlyph=function(un){return un in this.metrics?this.metrics[un]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[un-this.metrics.length]}},e}(),ve=[].slice,be=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(un){var dn,hn,fn,pn,mn,gn,yn,xn,En,bn;return un in this.cache?this.cache[un]:(pn=this.file.loca,dn=this.file.contents,hn=pn.indexOf(un),(fn=pn.lengthOf(un))===0?this.cache[un]=null:(dn.pos=this.offset+hn,mn=(gn=new ne(dn.read(fn))).readShort(),xn=gn.readShort(),bn=gn.readShort(),yn=gn.readShort(),En=gn.readShort(),this.cache[un]=mn===-1?new we(gn,xn,bn,yn,En):new ye(gn,mn,xn,bn,yn,En),this.cache[un]))},e.prototype.encode=function(un,dn,hn){var fn,pn,mn,gn,yn;for(mn=[],pn=[],gn=0,yn=dn.length;gn<yn;gn++)fn=un[dn[gn]],pn.push(mn.length),fn&&(mn=mn.concat(fn.encode(hn)));return pn.push(mn.length),{table:mn,offsets:pn}},e}(),ye=function(){function _e(e,un,dn,hn,fn,pn){this.raw=e,this.numberOfContours=un,this.xMin=dn,this.yMin=hn,this.xMax=fn,this.yMax=pn,this.compound=!1}return _e.prototype.encode=function(){return this.raw.data},_e}(),we=function(){function _e(e,un,dn,hn,fn){var pn,mn;for(this.raw=e,this.xMin=un,this.yMin=dn,this.xMax=hn,this.yMax=fn,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],pn=this.raw;mn=pn.readShort(),this.glyphOffsets.push(pn.pos),this.glyphIDs.push(pn.readUInt16()),32&mn;)pn.pos+=1&mn?4:2,128&mn?pn.pos+=8:64&mn?pn.pos+=4:8&mn&&(pn.pos+=2)}return _e.prototype.encode=function(){var e,un,dn;for(un=new ne(ve.call(this.raw.data)),e=0,dn=this.glyphIDs.length;e<dn;++e)un.pos=this.glyphOffsets[e];return un.data},_e}(),Ne=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(un){var dn,hn;return un.pos=this.offset,dn=this.file.head.indexToLocFormat,this.offsets=dn===0?(function(){var fn,pn;for(pn=[],hn=0,fn=this.length;hn<fn;hn+=2)pn.push(2*un.readUInt16());return pn}).call(this):(function(){var fn,pn;for(pn=[],hn=0,fn=this.length;hn<fn;hn+=4)pn.push(un.readUInt32());return pn}).call(this)},e.prototype.indexOf=function(un){return this.offsets[un]},e.prototype.lengthOf=function(un){return this.offsets[un+1]-this.offsets[un]},e.prototype.encode=function(un,dn){for(var hn=new Uint32Array(this.offsets.length),fn=0,pn=0,mn=0;mn<hn.length;++mn)if(hn[mn]=fn,pn<dn.length&&dn[pn]==mn){++pn,hn[mn]=fn;var gn=this.offsets[mn],yn=this.offsets[mn+1]-gn;yn>0&&(fn+=yn)}for(var xn=new Array(4*hn.length),En=0;En<hn.length;++En)xn[4*En+3]=255&hn[En],xn[4*En+2]=(65280&hn[En])>>8,xn[4*En+1]=(16711680&hn[En])>>16,xn[4*En]=(4278190080&hn[En])>>24;return xn},e}(),Le=function(){function _e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return _e.prototype.generateCmap=function(){var e,un,dn,hn,fn;for(un in hn=this.font.cmap.tables[0].codeMap,e={},fn=this.subset)dn=fn[un],e[un]=hn[dn];return e},_e.prototype.glyphsFor=function(e){var un,dn,hn,fn,pn,mn,gn;for(hn={},pn=0,mn=e.length;pn<mn;pn++)hn[fn=e[pn]]=this.font.glyf.glyphFor(fn);for(fn in un=[],hn)(dn=hn[fn])!=null&&dn.compound&&un.push.apply(un,dn.glyphIDs);if(un.length>0)for(fn in gn=this.glyphsFor(un))dn=gn[fn],hn[fn]=dn;return hn},_e.prototype.encode=function(e,un){var dn,hn,fn,pn,mn,gn,yn,xn,En,bn,vn,Pn,Tn,In,Rn;for(hn in dn=ue.encode(this.generateCmap(),"unicode"),pn=this.glyphsFor(e),vn={0:0},Rn=dn.charMap)vn[(gn=Rn[hn]).old]=gn.new;for(Pn in bn=dn.maxGlyphID,pn)Pn in vn||(vn[Pn]=bn++);return xn=function(Sn){var Dn,$n;for(Dn in $n={},Sn)$n[Sn[Dn]]=Dn;return $n}(vn),En=Object.keys(xn).sort(function(Sn,Dn){return Sn-Dn}),Tn=function(){var Sn,Dn,$n;for($n=[],Sn=0,Dn=En.length;Sn<Dn;Sn++)mn=En[Sn],$n.push(xn[mn]);return $n}(),fn=this.font.glyf.encode(pn,Tn,vn),yn=this.font.loca.encode(fn.offsets,Tn),In={cmap:this.font.cmap.raw(),glyf:fn.table,loca:yn,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(un)},this.font.os2.exists&&(In["OS/2"]=this.font.os2.raw()),this.font.directory.encode(In)},_e}();E.API.PDFObject=function(){var _e;function e(){}return _e=function(un,dn){return(Array(dn+1).join("0")+un).slice(-dn)},e.convert=function(un){var dn,hn,fn,pn;if(Array.isArray(un))return"["+function(){var mn,gn,yn;for(yn=[],mn=0,gn=un.length;mn<gn;mn++)dn=un[mn],yn.push(e.convert(dn));return yn}().join(" ")+"]";if(typeof un=="string")return"/"+un;if(un!=null&&un.isString)return"("+un+")";if(un instanceof Date)return"(D:"+_e(un.getUTCFullYear(),4)+_e(un.getUTCMonth(),2)+_e(un.getUTCDate(),2)+_e(un.getUTCHours(),2)+_e(un.getUTCMinutes(),2)+_e(un.getUTCSeconds(),2)+"Z)";if({}.toString.call(un)==="[object Object]"){for(hn in fn=["<<"],un)pn=un[hn],fn.push("/"+hn+" "+e.convert(pn));return fn.push(">>"),fn.join(`
`)}return""+un},e}();const containsTamilText=_e=>/[\u0B80-\u0BFF]/.test(_e),transliterateTamil=_e=>{const e={:"a",:"aa",:"i",:"ii",:"u",:"uu",:"e",:"ee",:"ai",:"o",:"oo",:"au",:"ka",:"nga",:"cha",:"nja",:"ta",:"na",:"tha",:"na",:"pa",:"ma",:"ya",:"ra",:"la",:"va",:"zha",:"la",:"ra",:"n"};let un=_e;return Object.entries(e).forEach(([dn,hn])=>{un=un.replace(new RegExp(dn,"g"),hn)}),un},processTamilText=_e=>containsTamilText(_e)?`${transliterateTamil(_e)} (Tamil content)`:_e,downloadPDF=async({title:_e,content:e,type:un})=>{var bn;const dn=new E,hn=dn.internal.pageSize.getWidth(),fn=dn.internal.pageSize.getHeight(),pn=20,mn=7;let gn=pn;const yn=(vn=30)=>{gn>fn-vn&&(dn.addPage(),gn=pn)},xn=(vn,Pn,Tn=12,In="normal")=>{dn.setFontSize(Tn),dn.setFont("helvetica",In);const Rn=processTamilText(vn),Sn=dn.splitTextToSize(Rn,hn-2*pn);return yn(Sn.length*mn+10),dn.text(Sn,Pn,gn),gn+=Sn.length*mn+5,Sn.length};if(dn.setFontSize(20),dn.setFont("helvetica","bold"),dn.text(_e,pn,gn),gn+=mn*2,un==="keypoints"||un==="analysis")e.forEach((vn,Pn)=>{yn(50),xn(`File: ${vn.fileName||vn.mainTopic||`Analysis ${Pn+1}`}`,pn,16,"bold"),vn.summary&&(xn("Summary:",pn,14,"bold"),xn(vn.summary,pn,12,"normal"),gn+=5),vn.keyPoints&&vn.keyPoints.length>0&&(xn("Key Study Points:",pn,14,"bold"),vn.keyPoints.forEach((Tn,In)=>{yn(20),xn(`${In+1}. ${Tn}`,pn+10,11,"normal")}),gn+=5),vn.studyPoints&&vn.studyPoints.length>0&&(xn("Detailed Study Points:",pn,14,"bold"),vn.studyPoints.forEach((Tn,In)=>{yn(40);const Rn=Tn.tnpscPriority?` [${Tn.tnpscPriority.toUpperCase()} Priority]`:"";xn(`${In+1}. ${Tn.title}${Rn}`,pn+5,12,"bold"),xn(Tn.description,pn+10,11,"normal"),Tn.tnpscRelevance&&xn(`TNPSC Context: ${Tn.tnpscRelevance}`,pn+10,10,"italic"),Tn.memoryTip&&xn(` Memory Tip: ${Tn.memoryTip}`,pn+10,10,"italic"),gn+=5})),vn.tnpscCategories&&vn.tnpscCategories.length>0&&(xn("TNPSC Categories:",pn,14,"bold"),xn(vn.tnpscCategories.join(", "),pn,11,"normal"),gn+=10),vn.tnpscRelevance&&(xn("TNPSC Exam Relevance:",pn,14,"bold"),xn(vn.tnpscRelevance,pn,11,"normal"),gn+=15)});else if(un==="questions")e.forEach((vn,Pn)=>{var In;yn(80);const Tn=`Question ${Pn+1} - ${((In=vn.difficulty)==null?void 0:In.toUpperCase())||"MEDIUM"} Level (${vn.tnpscGroup||"TNPSC"})`;xn(Tn,pn,14,"bold"),xn(vn.question,pn,12,"normal"),vn.options&&vn.options.length>0&&(gn+=5,vn.options.forEach((Rn,Sn)=>{const Dn=`${String.fromCharCode(65+Sn)}. ${Rn}`;xn(Dn,pn+10,11,"normal")})),vn.answer&&(gn+=5,xn(`Correct Answer: ${vn.answer}`,pn,12,"bold")),vn.explanation&&xn(`Explanation: ${vn.explanation}`,pn,11,"normal"),vn.memoryTip&&xn(` Memory Tip: ${vn.memoryTip}`,pn,10,"italic"),gn+=10});else if(un==="quiz-results"){const vn=e;if(!vn){xn("Error: Quiz result data is missing.",pn,12,"bold"),dn.save("quiz_error.pdf");return}xn("Quiz Results Summary",pn,18,"bold"),xn(`Score: ${vn.score}/${vn.totalQuestions} (${vn.percentage}%)`,pn,14,"bold"),xn(`Difficulty Level: ${vn.difficulty||"Medium"}`,pn,12,"normal"),xn(`Date: ${new Date().toLocaleDateString()}`,pn,12,"normal"),gn+=10;let Pn="Good effort! Keep practicing.";vn.percentage>=90?Pn="Outstanding performance! Excellent work!":vn.percentage>=80?Pn="Great job! You're well prepared!":vn.percentage>=70?Pn="Good work! Continue studying!":vn.percentage>=60&&(Pn="Fair performance. More practice needed."),xn(Pn,pn,12,"italic"),gn+=10,xn("Detailed Answer Review:",pn,16,"bold"),(bn=vn.answers)==null||bn.forEach((Tn,In)=>{yn(60);const Rn=Tn.isCorrect?"":"",Sn=Tn.isCorrect?"CORRECT":"INCORRECT";xn(`${Rn} Q${In+1}: ${Sn}`,pn,12,"bold"),xn(Tn.question.question,pn,11,"normal"),Tn.question.options&&Tn.question.options.length>0&&Tn.question.options.forEach((Dn,$n)=>{const Fn=String.fromCharCode(65+$n),Gn=Tn.userAnswer===Fn||Tn.userAnswer===Dn,kn=Tn.correctAnswer===Fn||Tn.correctAnswer===Dn;let Nn="normal";(Gn&&kn||Gn||kn)&&(Nn="bold"),xn(`${Fn}. ${Dn}`,pn+10,10,Nn)}),xn(`Your Answer: ${Tn.userAnswer}`,pn+5,11,"normal"),Tn.isCorrect||xn(`Correct Answer: ${Tn.correctAnswer}`,pn+5,11,"bold"),Tn.question.explanation&&xn(`Explanation: ${Tn.question.explanation}`,pn+5,10,"italic"),gn+=10})}const En=`${_e.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`;dn.save(En)},generateFileHash=async _e=>{const e=await _e.arrayBuffer(),un=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(un)).map(hn=>hn.toString(16).padStart(2,"0")).join("")},saveStudyHistory=async(_e,e,un,dn)=>{try{let hn=[],fn,pn;if(dn.files&&dn.files.length>0)for(const vn of dn.files){fn||(fn=await generateFileHash(vn),pn=vn.size);const Pn=Date.now(),Tn=`${_e}/${Pn}_${vn.name}`,In=ref(storage,`study-files/${Tn}`);await uploadBytes(In,vn);const Rn=await getDownloadURL(In);hn.push(Rn)}let mn=null,gn=null;if(e==="analysis"&&Array.isArray(un)){const vn=un[0];mn={keyPoints:vn.keyPoints||[],studyPoints:vn.studyPoints||[],summary:vn.summary||"",tnpscRelevance:vn.tnpscRelevance||"",tnpscCategories:vn.tnpscCategories||[],mainTopic:vn.mainTopic||dn.fileName||"Study Material"}}else e==="quiz"&&(gn={questions:un.questions||[],answers:dn.quizAnswers||[],score:dn.score||0,totalQuestions:dn.totalQuestions||0,percentage:dn.percentage||0,difficulty:dn.difficulty});const yn={userId:_e,timestamp:Timestamp.now(),type:e,fileName:dn.fileName,difficulty:dn.difficulty,language:dn.language,data:un,fileUrls:hn,analysisData:mn,quizData:gn},xn=fn||dn.fileHash,En=pn||dn.fileSize;xn!==void 0&&(yn.fileHash=xn),En!==void 0&&(yn.fileSize=En),dn.pageAnalysesMap&&(yn.totalAnalyzedPages=Object.keys(dn.pageAnalysesMap).length),dn.pageAnalysesMap!==void 0&&(yn.pageAnalysesMap=dn.pageAnalysesMap),dn.score!==void 0&&(yn.score=dn.score),dn.totalQuestions!==void 0&&(yn.totalQuestions=dn.totalQuestions),dn.percentage!==void 0&&(yn.percentage=dn.percentage);const bn=await addDoc(collection(db,"studyHistory"),yn);return console.log("Study history saved successfully:",bn.id),bn.id}catch(hn){throw console.error("Error saving study history:",hn),hn}},updateStudyHistory=async(_e,e,un)=>{try{const dn=doc(db,"studyHistory",_e),hn={analysisData:e,data:[e],timestamp:Timestamp.now()};un&&(hn.pageAnalysesMap=un,hn.totalAnalyzedPages=Object.keys(un).length),await updateDoc(dn,hn),console.log("Study history updated successfully:",_e)}catch(dn){throw console.error("Error updating study history:",dn),dn}},getStudyHistory=async _e=>{try{const e=query(collection(db,"studyHistory"),where("userId","==",_e),orderBy("timestamp","desc")),un=await getDocs(e),dn=[];return un.forEach(hn=>{const fn=hn.data();dn.push({id:hn.id,...fn,timestamp:fn.timestamp})}),dn}catch(e){throw console.error("Error fetching study history:",e),e}},getStudyHistoryForFile=async(_e,e,un,dn)=>{try{let hn;un&&dn?hn=query(collection(db,"studyHistory"),where("userId","==",_e),where("fileHash","==",un),where("fileSize","==",dn),where("type","==","analysis"),orderBy("timestamp","desc")):hn=query(collection(db,"studyHistory"),where("userId","==",_e),where("fileName","==",e),where("type","==","analysis"),orderBy("timestamp","desc"));const fn=await getDocs(hn);if(fn.empty)return null;const pn=fn.docs[0],mn=pn.data();return{id:pn.id,...mn}}catch(hn){return console.error("Error fetching study history for file:",hn),null}},deleteStudyHistory=async(_e,e)=>{try{if(await deleteDoc(doc(db,"studyHistory",_e)),e&&e.length>0)for(const un of e)try{const dn=ref(storage,un);await deleteObject(dn)}catch(dn){console.warn("Error deleting file from storage:",dn)}}catch(un){throw console.error("Error deleting study history:",un),un}},AnalysisResults=({result:_e,onReset:e,selectedFiles:un,onGenerateQuestions:dn,onStartQuiz:hn,isGeneratingQuestions:fn})=>{const[pn]=useAuthState(auth);React.useEffect(()=>{(async()=>{var yn;if(pn&&_e)try{await saveStudyHistory(pn.uid,"analysis",[_e],{fileName:((yn=un[0])==null?void 0:yn.name)||"Study Material",difficulty:"medium",language:_e.language||"english",files:un}),console.log("Analysis saved to study history")}catch(xn){console.error("Failed to save to study history:",xn)}})()},[pn,_e,un]);const mn=async()=>{try{await downloadPDF({title:`TNPSC Study Analysis - ${_e.mainTopic||"Study Material"}`,content:[_e],type:"analysis"}),Jt$2.success("Analysis downloaded successfully!")}catch(gn){console.error("Download error:",gn),Jt$2.error("Failed to download analysis. Please try again.")}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 relative z-10",children:[jsxRuntimeExports.jsx(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-4",children:jsxRuntimeExports.jsxs(Button,{onClick:e,variant:"ghost",className:"text-gray-600 hover:text-gray-800 p-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Upload New Files"]})}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h2",{className:"text-xl md:text-2xl font-bold gradient-text",children:_e.mainTopic||"TNPSC Study Analysis"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs(Badge,{className:"badge-elegant badge-success",children:["Source Files: ",un.length]}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant badge-success",children:"Analysis Complete"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsxRuntimeExports.jsx(Button,{onClick:dn,disabled:fn,className:"btn-primary flex-1",children:fn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Questions..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 mr-2"}),"Start Interactive Quiz"]})}),jsxRuntimeExports.jsxs(Button,{onClick:mn,className:"btn-secondary",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download Analysis"]})]})]}),un.length>0&&jsxRuntimeExports.jsxs("div",{className:"w-full sm:w-48 flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Source Files"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[un.slice(0,3).map((gn,yn)=>jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 truncate",children:gn.name},yn)),un.length>3&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["+",un.length-3," more files"]})]})]})]})}),_e.keyPoints&&_e.keyPoints.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",style:{animationDelay:"0.1s"},children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-green-600"}),jsxRuntimeExports.jsx("span",{className:"gradient-text",children:"Key Points"})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3 stagger-animation",children:_e.keyPoints.map((gn,yn)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0 shadow-md",children:yn+1}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 leading-relaxed",children:gn})]},yn))})]}),_e.summary&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",style:{animationDelay:"0.2s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:"Summary"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 leading-relaxed",children:_e.summary})]}),_e.tnpscRelevance&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 bg-gradient-to-r from-purple-50 to-blue-50 animate-fadeInUp hover-lift",style:{animationDelay:"0.3s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:"TNPSC Relevance"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 leading-relaxed",children:_e.tnpscRelevance})]}),_e.studyPoints&&_e.studyPoints.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",style:{animationDelay:"0.4s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:"Study Points"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:_e.studyPoints.map((gn,yn)=>jsxRuntimeExports.jsxs("div",{className:"border-l-4 border-gradient-to-b from-blue-500 to-purple-600 pl-4 hover-lift",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:gn.title}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsxs(Badge,{className:gn.importance==="high"?"badge-elegant badge-error":gn.importance==="medium"?"badge-elegant badge-warning":"badge-elegant badge-success",children:[gn.importance," priority"]}),gn.tnpscPriority&&jsxRuntimeExports.jsxs(Badge,{className:gn.tnpscPriority==="high"?"bg-gradient-to-r from-red-500 to-pink-600 text-white":gn.tnpscPriority==="medium"?"bg-gradient-to-r from-yellow-500 to-orange-600 text-white":"bg-gradient-to-r from-green-500 to-emerald-600 text-white",children:["TNPSC ",gn.tnpscPriority]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 mb-2",children:gn.description}),gn.tnpscRelevance&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-purple-700 bg-gradient-to-r from-purple-50 to-indigo-50 p-2 rounded-lg",children:[jsxRuntimeExports.jsx("strong",{children:"TNPSC Context:"})," ",gn.tnpscRelevance]}),gn.memoryTip&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-green-700 bg-gradient-to-r from-green-50 to-emerald-50 p-2 rounded-lg mt-2",children:[jsxRuntimeExports.jsx("strong",{children:" Memory Tip:"})," ",gn.memoryTip]})]},yn))})]}),_e.tnpscCategories&&_e.tnpscCategories.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-4 md:p-6 animate-fadeInUp hover-lift",style:{animationDelay:"0.5s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold gradient-text mb-4",children:"TNPSC Categories"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:_e.tnpscCategories.map((gn,yn)=>jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800 border-indigo-200 text-sm",children:gn},yn))})]})]})})]})},QuestionResults=({result:_e,onReset:e,selectedFiles:un,onStartQuiz:dn})=>{var mn,gn,yn,xn;const hn=async()=>{try{await downloadPDF({title:`TNPSC Practice Questions - ${_e.difficulty.toUpperCase()}`,content:_e.questions,type:"questions"}),Jt$2.success("Questions downloaded successfully!")}catch{Jt$2.error("Failed to download questions. Please try again.")}},fn=En=>({easy:"from-green-500 to-emerald-600",medium:"from-yellow-500 to-orange-600",hard:"from-red-500 to-pink-600","very-hard":"from-purple-500 to-indigo-600"})[En]||"from-gray-500 to-gray-600",pn=En=>{switch(En){case"mcq":return"";case"assertion_reason":return"";default:return""}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-blue-600 rounded-full",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"TNPSC Practice Questions"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:["Generated ",((mn=_e.questions)==null?void 0:mn.length)||0," questions for practice"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(Button,{onClick:e,variant:"outline",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4"}),"Back to Upload"]}),jsxRuntimeExports.jsxs(Button,{onClick:hn,variant:"outline",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Download"]}),jsxRuntimeExports.jsxs(Button,{onClick:dn,className:"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4"}),"Start Interactive Quiz"]})]})]})}),jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-lg border-0",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:((gn=_e.questions)==null?void 0:gn.length)||0}),jsxRuntimeExports.jsx("div",{className:"text-blue-700 font-medium",children:"Total Questions"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:_e.difficulty.replace("-"," ").toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"text-purple-700 font-medium",children:"Difficulty Level"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:((yn=_e.questions)==null?void 0:yn.filter(En=>En.type==="mcq").length)||0}),jsxRuntimeExports.jsx("div",{className:"text-green-700 font-medium",children:"MCQ Questions"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-6 w-6 text-blue-600"}),"Generated Questions"]}),(xn=_e.questions)==null?void 0:xn.map((En,bn)=>jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-lg border-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:pn(En.type)})}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-semibold text-gray-800",children:["Question ",bn+1]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsx(Badge,{className:`bg-gradient-to-r ${fn(En.difficulty)} text-white`,children:En.difficulty.toUpperCase()}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:En.tnpscGroup}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:En.type.toUpperCase()})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 p-4 rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-gray-800 text-lg leading-relaxed",children:En.question})}),En.options&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-700",children:"Options:"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:En.options.map((vn,Pn)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-blue-600 bg-blue-100 px-2 py-1 rounded",children:String.fromCharCode(65+Pn)}),jsxRuntimeExports.jsx("span",{className:"text-gray-800",children:vn})]},Pn))})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 bg-green-50 border border-green-200 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-2",children:jsxRuntimeExports.jsx("span",{className:"font-semibold text-green-700",children:"Correct Answer:"})}),jsxRuntimeExports.jsx("span",{className:"text-green-800 font-medium",children:En.answer})]}),En.explanation&&jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-2",children:jsxRuntimeExports.jsx("span",{className:"font-semibold text-blue-700",children:"Explanation:"})}),jsxRuntimeExports.jsx("span",{className:"text-blue-800",children:En.explanation})]})]})]})},bn))]})]})})})};function usePrevious(_e){const e=reactExports.useRef({value:_e,previous:_e});return reactExports.useMemo(()=>(e.current.value!==_e&&(e.current.previous=e.current.value,e.current.value=_e),e.current.previous),[_e])}var RADIO_NAME="Radio",[createRadioContext,createRadioScope]=createContextScope$3(RADIO_NAME),[RadioProvider,useRadioContext]=createRadioContext(RADIO_NAME),Radio=reactExports.forwardRef((_e,e)=>{const{__scopeRadio:un,name:dn,checked:hn=!1,required:fn,disabled:pn,value:mn="on",onCheck:gn,form:yn,...xn}=_e,[En,bn]=reactExports.useState(null),vn=useComposedRefs(e,In=>bn(In)),Pn=reactExports.useRef(!1),Tn=En?yn||!!En.closest("form"):!0;return jsxRuntimeExports.jsxs(RadioProvider,{scope:un,checked:hn,disabled:pn,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"radio","aria-checked":hn,"data-state":getState(hn),"data-disabled":pn?"":void 0,disabled:pn,value:mn,...xn,ref:vn,onClick:composeEventHandlers(_e.onClick,In=>{hn||gn==null||gn(),Tn&&(Pn.current=In.isPropagationStopped(),Pn.current||In.stopPropagation())})}),Tn&&jsxRuntimeExports.jsx(BubbleInput,{control:En,bubbles:!Pn.current,name:dn,value:mn,checked:hn,required:fn,disabled:pn,form:yn,style:{transform:"translateX(-100%)"}})]})});Radio.displayName=RADIO_NAME;var INDICATOR_NAME$1="RadioIndicator",RadioIndicator=reactExports.forwardRef((_e,e)=>{const{__scopeRadio:un,forceMount:dn,...hn}=_e,fn=useRadioContext(INDICATOR_NAME$1,un);return jsxRuntimeExports.jsx(Presence,{present:dn||fn.checked,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(fn.checked),"data-disabled":fn.disabled?"":void 0,...hn,ref:e})})});RadioIndicator.displayName=INDICATOR_NAME$1;var BubbleInput=_e=>{const{control:e,checked:un,bubbles:dn=!0,...hn}=_e,fn=reactExports.useRef(null),pn=usePrevious(un),mn=useSize(e);return reactExports.useEffect(()=>{const gn=fn.current,yn=window.HTMLInputElement.prototype,En=Object.getOwnPropertyDescriptor(yn,"checked").set;if(pn!==un&&En){const bn=new Event("click",{bubbles:dn});En.call(gn,un),gn.dispatchEvent(bn)}},[pn,un,dn]),jsxRuntimeExports.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:un,...hn,tabIndex:-1,ref:fn,style:{..._e.style,...mn,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState(_e){return _e?"checked":"unchecked"}var ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],RADIO_GROUP_NAME="RadioGroup",[createRadioGroupContext,createRadioGroupScope]=createContextScope$3(RADIO_GROUP_NAME,[createRovingFocusGroupScope,createRadioScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),useRadioScope=createRadioScope(),[RadioGroupProvider,useRadioGroupContext]=createRadioGroupContext(RADIO_GROUP_NAME),RadioGroup$1=reactExports.forwardRef((_e,e)=>{const{__scopeRadioGroup:un,name:dn,defaultValue:hn,value:fn,required:pn=!1,disabled:mn=!1,orientation:gn,dir:yn,loop:xn=!0,onValueChange:En,...bn}=_e,vn=useRovingFocusGroupScope(un),Pn=useDirection(yn),[Tn,In]=useControllableState({prop:fn,defaultProp:hn,onChange:En});return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:un,name:dn,required:pn,disabled:mn,value:Tn,onValueChange:In,children:jsxRuntimeExports.jsx(Root$2,{asChild:!0,...vn,orientation:gn,dir:Pn,loop:xn,children:jsxRuntimeExports.jsx(Primitive.div,{role:"radiogroup","aria-required":pn,"aria-orientation":gn,"data-disabled":mn?"":void 0,dir:Pn,...bn,ref:e})})})});RadioGroup$1.displayName=RADIO_GROUP_NAME;var ITEM_NAME$1="RadioGroupItem",RadioGroupItem$1=reactExports.forwardRef((_e,e)=>{const{__scopeRadioGroup:un,disabled:dn,...hn}=_e,fn=useRadioGroupContext(ITEM_NAME$1,un),pn=fn.disabled||dn,mn=useRovingFocusGroupScope(un),gn=useRadioScope(un),yn=reactExports.useRef(null),xn=useComposedRefs(e,yn),En=fn.value===hn.value,bn=reactExports.useRef(!1);return reactExports.useEffect(()=>{const vn=Tn=>{ARROW_KEYS.includes(Tn.key)&&(bn.current=!0)},Pn=()=>bn.current=!1;return document.addEventListener("keydown",vn),document.addEventListener("keyup",Pn),()=>{document.removeEventListener("keydown",vn),document.removeEventListener("keyup",Pn)}},[]),jsxRuntimeExports.jsx(Item$1,{asChild:!0,...mn,focusable:!pn,active:En,children:jsxRuntimeExports.jsx(Radio,{disabled:pn,required:fn.required,checked:En,...gn,...hn,name:fn.name,ref:xn,onCheck:()=>fn.onValueChange(hn.value),onKeyDown:composeEventHandlers(vn=>{vn.key==="Enter"&&vn.preventDefault()}),onFocus:composeEventHandlers(hn.onFocus,()=>{var vn;bn.current&&((vn=yn.current)==null||vn.click())})})})});RadioGroupItem$1.displayName=ITEM_NAME$1;var INDICATOR_NAME2="RadioGroupIndicator",RadioGroupIndicator=reactExports.forwardRef((_e,e)=>{const{__scopeRadioGroup:un,...dn}=_e,hn=useRadioScope(un);return jsxRuntimeExports.jsx(RadioIndicator,{...hn,...dn,ref:e})});RadioGroupIndicator.displayName=INDICATOR_NAME2;var Root2$1=RadioGroup$1,Item2=RadioGroupItem$1,Indicator$1=RadioGroupIndicator;const RadioGroup=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Root2$1,{className:cn$1("grid gap-2",_e),...e,ref:un}));RadioGroup.displayName=Root2$1.displayName;const RadioGroupItem=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Item2,{ref:un,className:cn$1("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",_e),...e,children:jsxRuntimeExports.jsx(Indicator$1,{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));RadioGroupItem.displayName=Item2.displayName;function createContextScope(_e,e=[]){let un=[];function dn(fn,pn){const mn=reactExports.createContext(pn),gn=un.length;un=[...un,pn];function yn(En){const{scope:bn,children:vn,...Pn}=En,Tn=(bn==null?void 0:bn[_e][gn])||mn,In=reactExports.useMemo(()=>Pn,Object.values(Pn));return jsxRuntimeExports.jsx(Tn.Provider,{value:In,children:vn})}function xn(En,bn){const vn=(bn==null?void 0:bn[_e][gn])||mn,Pn=reactExports.useContext(vn);if(Pn)return Pn;if(pn!==void 0)return pn;throw new Error(`\`${En}\` must be used within \`${fn}\``)}return yn.displayName=fn+"Provider",[yn,xn]}const hn=()=>{const fn=un.map(pn=>reactExports.createContext(pn));return function(mn){const gn=(mn==null?void 0:mn[_e])||fn;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...mn,[_e]:gn}}),[mn,gn])}};return hn.scopeName=_e,[dn,composeContextScopes(hn,...e)]}function composeContextScopes(..._e){const e=_e[0];if(_e.length===1)return e;const un=()=>{const dn=_e.map(hn=>({useScope:hn(),scopeName:hn.scopeName}));return function(fn){const pn=dn.reduce((mn,{useScope:gn,scopeName:yn})=>{const En=gn(fn)[`__scope${yn}`];return{...mn,...En}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:pn}),[pn])}};return un.scopeName=e.scopeName,un}var PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext,createProgressScope]=createContextScope(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((_e,e)=>{const{__scopeProgress:un,value:dn=null,max:hn,getValueLabel:fn=defaultGetValueLabel,...pn}=_e;(hn||hn===0)&&!isValidMaxNumber(hn)&&console.error(getInvalidMaxError(`${hn}`,"Progress"));const mn=isValidMaxNumber(hn)?hn:DEFAULT_MAX;dn!==null&&!isValidValueNumber(dn,mn)&&console.error(getInvalidValueError(`${dn}`,"Progress"));const gn=isValidValueNumber(dn,mn)?dn:null,yn=isNumber(gn)?fn(gn,mn):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:un,value:gn,max:mn,children:jsxRuntimeExports.jsx(Primitive.div,{"aria-valuemax":mn,"aria-valuemin":0,"aria-valuenow":isNumber(gn)?gn:void 0,"aria-valuetext":yn,role:"progressbar","data-state":getProgressState(gn,mn),"data-value":gn??void 0,"data-max":mn,...pn,ref:e})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((_e,e)=>{const{__scopeProgress:un,...dn}=_e,hn=useProgressContext(INDICATOR_NAME,un);return jsxRuntimeExports.jsx(Primitive.div,{"data-state":getProgressState(hn.value,hn.max),"data-value":hn.value??void 0,"data-max":hn.max,...dn,ref:e})});ProgressIndicator.displayName=INDICATOR_NAME;function defaultGetValueLabel(_e,e){return`${Math.round(_e/e*100)}%`}function getProgressState(_e,e){return _e==null?"indeterminate":_e===e?"complete":"loading"}function isNumber(_e){return typeof _e=="number"}function isValidMaxNumber(_e){return isNumber(_e)&&!isNaN(_e)&&_e>0}function isValidValueNumber(_e,e){return isNumber(_e)&&!isNaN(_e)&&_e<=e&&_e>=0}function getInvalidMaxError(_e,e){return`Invalid prop \`max\` of value \`${_e}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(_e,e){return`Invalid prop \`value\` of value \`${_e}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Root$1=Progress$1,Indicator=ProgressIndicator;const Progress=reactExports.forwardRef(({className:_e,value:e,...un},dn)=>jsxRuntimeExports.jsx(Root$1,{ref:dn,className:cn$1("relative h-3 w-full overflow-hidden rounded-full bg-gray-200",_e),style:{background:"linear-gradient(90deg, #f3f4f6 0%, #e5e7eb 100%)"},...un,children:jsxRuntimeExports.jsx(Indicator,{className:"h-full w-full flex-1 rounded-full transition-all duration-700 ease-out",style:{transform:`translateX(-${100-(e||0)}%)`,background:"linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%)",boxShadow:"0 0 10px rgba(59, 130, 246, 0.4)"}})}));Progress.displayName=Root$1.displayName;const ModernQuizMode=({result:_e,onReset:e,onBackToAnalysis:un,difficulty:dn,outputLanguage:hn})=>{var Xn;const[fn]=useAuthState(auth),[pn,mn]=reactExports.useState(0),[gn,yn]=reactExports.useState([]),[xn,En]=reactExports.useState(""),[bn,vn]=reactExports.useState(!1),[Pn,Tn]=reactExports.useState(null),[In]=reactExports.useState(new Date),Rn=_e.questions||[],Sn=Rn[pn],Dn=Rn.length>0?(pn+1)/Rn.length*100:0,$n=nr=>({easy:"from-green-500 to-emerald-600",medium:"from-yellow-500 to-orange-600",hard:"from-red-500 to-pink-600","very-hard":"from-purple-500 to-indigo-600"})[nr]||"from-gray-500 to-gray-600",Fn=nr=>{switch(nr){case"mcq":return"";case"assertion_reason":return"";default:return""}},Gn=nr=>{En(nr)},kn=()=>{if(!xn.trim()){Jt$2.error("Please select an answer before proceeding");return}const nr={questionIndex:pn,selectedOption:xn},sr=[...gn.filter(lr=>lr.questionIndex!==pn),nr];if(yn(sr),pn<Rn.length-1){mn(pn+1);const lr=sr.find(tr=>tr.questionIndex===pn+1);En((lr==null?void 0:lr.selectedOption)||"")}else Ln(sr)},Nn=()=>{if(pn>0){mn(pn-1);const nr=gn.find(sr=>sr.questionIndex===pn-1);En((nr==null?void 0:nr.selectedOption)||"")}},Ln=nr=>{const sr=nr.map(ar=>{var Yn,er;const gr=Rn[ar.questionIndex];let qn=!1;const On=ar.selectedOption.trim(),Un=((Yn=gr.answer)==null?void 0:Yn.trim())||"";if(On.length===1&&/^[A-D]$/i.test(On))qn=On.toLowerCase()===Un.toLowerCase();else{const Zn=(er=gr.options)==null?void 0:er.findIndex(ir=>ir.trim().toLowerCase()===On.toLowerCase());Zn!==void 0&&Zn!==-1?qn=String.fromCharCode(65+Zn).toLowerCase()===Un.toLowerCase():qn=On.toLowerCase()===Un.toLowerCase()}return{question:gr,userAnswer:ar.selectedOption,correctAnswer:gr.answer||"",isCorrect:qn,questionIndex:ar.questionIndex}}),lr=sr.filter(ar=>ar.isCorrect).length,tr=Math.round(lr/Rn.length*100),Jn={score:lr,totalQuestions:Rn.length,percentage:tr,answers:sr};Tn(Jn),fn&&saveStudyHistory(fn.uid,"quiz",Jn,{fileName:`Quiz - ${dn.toUpperCase()} - ${new Date().toLocaleDateString()}`,difficulty:dn,language:hn,score:lr,totalQuestions:Rn.length,percentage:tr,quizAnswers:sr,quizData:Jn}).then(()=>{console.log("Quiz results saved to study history successfully"),Jt$2.success("Quiz results saved to your study history!")}).catch(ar=>{console.error("Failed to save quiz results:",ar),Jt$2.error("Failed to save quiz results to history")}),vn(!0),Jt$2.success(" Quiz completed successfully!")},zn=nr=>nr>=90?"Outstanding! You're mastering TNPSC concepts! ":nr>=80?"Excellent work! You're well prepared! ":nr>=70?"Great job! Keep up the good work! ":nr>=60?"Good effort! Review and improve! ":nr>=40?"Fair performance. More practice needed! ":"Keep studying! You'll improve with practice! ",Cn=nr=>nr>=80?"text-green-600":nr>=60?"text-blue-600":nr>=40?"text-orange-600":"text-red-600",Mn=async()=>{try{if(!Pn){Jt$2.error("No quiz results available to download");return}await downloadPDF({title:`TNPSC Quiz Results - ${dn.toUpperCase()}`,content:[Pn],type:"quiz-results"}),Jt$2.success("Quiz results downloaded successfully!")}catch(nr){console.error("Download error:",nr),Jt$2.error("Failed to download results. Please try again.")}},Bn=()=>{const sr=new Date().getTime()-In.getTime(),lr=Math.floor(sr/6e4),tr=Math.floor(sr%6e4/1e3);return`${lr}m ${tr}s`};return Rn.length===0?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"No Questions Available"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to generate quiz questions from the uploaded content. Please try uploading different files."}),jsxRuntimeExports.jsxs(Button,{onClick:e,className:"btn-primary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Upload New Files"]})]})}):bn&&Pn?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-yellow-400/20 to-orange-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"p-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-4xl space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center animate-fadeInScale hover-lift",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-4 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 shadow-elegant pulse-glow",children:jsxRuntimeExports.jsx(Trophy,{className:"h-10 w-10 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold gradient-text",children:"Quiz Complete!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-2",children:"TNPSC Practice Results"})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass-card p-8 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:`text-7xl font-bold mb-4 ${Cn(Pn.percentage)}`,children:[Pn.percentage,"%"]}),jsxRuntimeExports.jsxs("div",{className:"text-xl text-gray-700 mb-3",children:[Pn.score," out of ",Pn.totalQuestions," questions correct"]}),jsxRuntimeExports.jsx("div",{className:"text-lg font-medium text-gray-600 glass-card p-4 mb-4",children:zn(Pn.percentage)}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6 text-sm text-gray-600 stagger-animation",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4"}),jsxRuntimeExports.jsxs("span",{children:["Time: ",Bn()]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"}),jsxRuntimeExports.jsxs("span",{children:["Difficulty: ",dn.toUpperCase()]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[jsxRuntimeExports.jsxs(Button,{onClick:Mn,className:"btn-secondary",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download Results"]}),jsxRuntimeExports.jsxs(Button,{onClick:un,className:"btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Analysis"]}),jsxRuntimeExports.jsxs(Button,{onClick:e,className:"btn-primary",children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4 mr-2"}),"New Quiz"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold gradient-text flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-blue-600"}),"Answer Review"]}),Pn.answers.map((nr,sr)=>jsxRuntimeExports.jsx(Card,{className:`glass-card p-6 hover-lift animate-fadeInUp ${nr.isCorrect?"border-l-4 border-l-green-500":"border-l-4 border-l-red-500"}`,style:{animationDelay:`${sr*.1}s`},children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-full ${nr.isCorrect?"bg-green-100":"bg-red-100"}`,children:nr.isCorrect?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-5 w-5 text-green-600"}):jsxRuntimeExports.jsx(TriangleAlert,{className:"h-5 w-5 text-red-600"})}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-semibold text-gray-800",children:["Question ",sr+1," ",Fn(nr.question.type)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsx(Badge,{className:`bg-gradient-to-r ${$n(nr.question.difficulty)} text-white`,children:nr.question.difficulty.toUpperCase()}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border-blue-200",children:nr.question.tnpscGroup}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 border-purple-200",children:nr.question.type.toUpperCase()})]})]}),jsxRuntimeExports.jsx("div",{className:"glass-card p-4",children:jsxRuntimeExports.jsx("p",{className:"text-gray-800 text-lg leading-relaxed",children:nr.question.question})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:`p-4 rounded-xl ${nr.isCorrect?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-700",children:"Your Answer:"}),jsxRuntimeExports.jsx("span",{className:`font-medium ${nr.isCorrect?"text-green-700":"text-red-700"}`,children:nr.userAnswer})]})}),!nr.isCorrect&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-700",children:"Correct Answer:"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-green-700",children:nr.correctAnswer})]})}),nr.question.explanation&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5 text-blue-600 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-blue-800",children:"Explanation:"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 mt-1",children:nr.question.explanation})]})]})})]})]})},sr))]})]})})]}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsx("div",{className:"p-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-4xl space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 animate-fadeInScale",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 shadow-elegant",children:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"TNPSC Quiz Mode"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Test your knowledge with practice questions"})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:un,className:"btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Analysis"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Question ",pn+1," of ",Rn.length]}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(Dn),"% Complete"]})]}),jsxRuntimeExports.jsx(Progress,{value:Dn,className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500 ease-out rounded-full",style:{width:`${Dn}%`}})})]})]}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8 animate-fadeInUp hover-lift",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-full bg-gradient-to-r from-indigo-100 to-purple-100",children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:Fn(Sn.type)})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Question ",pn+1]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Choose the correct answer"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsx(Badge,{className:`bg-gradient-to-r ${$n(Sn.difficulty)} text-white`,children:Sn.difficulty.toUpperCase()}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border-blue-200",children:Sn.tnpscGroup}),jsxRuntimeExports.jsx(Badge,{className:"badge-elegant bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 border-purple-200",children:Sn.type.toUpperCase()})]})]}),jsxRuntimeExports.jsx("div",{className:"glass-card p-6",children:jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-800 leading-relaxed",children:Sn.question})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Select your answer:"}),jsxRuntimeExports.jsx(RadioGroup,{value:xn,onValueChange:Gn,children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:(Xn=Sn.options)==null?void 0:Xn.map((nr,sr)=>{const lr=String.fromCharCode(65+sr);return jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all duration-200 cursor-pointer",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:lr,id:`option-${sr}`}),jsxRuntimeExports.jsxs(Label$1,{htmlFor:`option-${sr}`,className:"flex-1 cursor-pointer text-gray-700 leading-relaxed",children:[jsxRuntimeExports.jsxs("span",{className:"font-semibold text-blue-600 mr-2",children:[lr,"."]}),nr]})]},sr)})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between pt-6",children:[jsxRuntimeExports.jsxs(Button,{onClick:Nn,disabled:pn===0,className:"btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Previous"]}),jsxRuntimeExports.jsx(Button,{onClick:kn,disabled:!xn.trim(),className:"btn-primary",children:pn===Rn.length-1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Trophy,{className:"h-4 w-4 mr-2"}),"Finish Quiz"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Next",jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 ml-2 rotate-180"})]})})]})]})}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Question Navigation"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:Rn.map((nr,sr)=>{const lr=gn.some(Jn=>Jn.questionIndex===sr),tr=sr===pn;return jsxRuntimeExports.jsx("button",{onClick:()=>{mn(sr);const Jn=gn.find(ar=>ar.questionIndex===sr);En((Jn==null?void 0:Jn.selectedOption)||"")},className:`
                      w-10 h-10 rounded-lg font-semibold text-sm transition-all duration-200
                      ${tr?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-elegant":lr?"bg-green-100 text-green-700 border border-green-300 hover:bg-green-200":"bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200"}
                    `,children:sr+1},sr)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 mt-4 text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded"}),jsxRuntimeExports.jsx("span",{children:"Current"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded"}),jsxRuntimeExports.jsx("span",{children:"Answered"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-gray-100 border border-gray-300 rounded"}),jsxRuntimeExports.jsx("span",{children:"Not Answered"})]})]})]})]})})]})},QuickAnalysisMode=({files:_e,difficulty:e,outputLanguage:un,onStartQuiz:dn,onReset:hn})=>{const[fn]=useAuthState(auth),[pn,mn]=reactExports.useState([]),[gn,yn]=reactExports.useState(-1),[xn,En]=reactExports.useState(0),[bn,vn]=reactExports.useState(!1),[Pn,Tn]=reactExports.useState(!1),In="AIzaSyAJ2P2TqBOXQncnBgT0T_BNsLcAA7cToo4";reactExports.useEffect(()=>{Rn()},[_e]);const Rn=()=>{const zn=_e.map(Cn=>({fileName:Cn.name,fileType:Cn.type==="application/pdf"?"pdf":"image",status:"pending",keyPoints:[],summary:"",tnpscCategories:[]}));mn(zn)},Sn=async(zn,Cn)=>{var Mn;yn(Cn),mn(Bn=>Bn.map((Xn,nr)=>nr===Cn?{...Xn,status:"analyzing"}:Xn));try{let Bn;if(zn.type==="application/pdf"){const Xn=await extractTextFromPdfPage(zn,1);Bn=await Dn(Xn,zn.name)}else Bn=await analyzeImage(zn,un);if(mn(Xn=>Xn.map((nr,sr)=>{var lr;return sr===Cn?{...nr,status:"completed",keyPoints:((lr=Bn.studyPoints)==null?void 0:lr.map(tr=>`${tr.title}: ${tr.description}`))||[],summary:Bn.summary||"",tnpscCategories:Bn.tnpscCategories||[]}:nr})),fn)try{const Xn={keyPoints:((Mn=Bn.studyPoints)==null?void 0:Mn.map(nr=>`${nr.title}: ${nr.description}`))||[],summary:Bn.summary||"",tnpscRelevance:Bn.tnpscRelevance||"",studyPoints:Bn.studyPoints||[],tnpscCategories:Bn.tnpscCategories||[],mainTopic:zn.name};await saveStudyHistory(fn.uid,"analysis",[Xn],{fileName:zn.name,difficulty:e,language:un,files:[zn]})}catch(Xn){console.error("Failed to save file analysis to study history:",Xn)}Jt$2.success(` ${zn.name} analyzed successfully!`)}catch(Bn){console.error(`Analysis failed for ${zn.name}:`,Bn),mn(Xn=>Xn.map((nr,sr)=>sr===Cn?{...nr,status:"error"}:nr)),Jt$2.error(` Failed to analyze ${zn.name}`)}yn(-1)},Dn=async(zn,Cn)=>{var tr,Jn,ar,gr,qn;const Mn=un==="tamil"?"Please provide all responses in Tamil language. Use Tamil script for all content.":"Please provide all responses in English language.",Bn=`
Analyze this text content for TNPSC preparation:

Content: ${zn.substring(0,3e3)}

${Mn}

Provide analysis in this JSON format:
{
  "mainTopic": "Main topic of the content",
  "studyPoints": [
    {
      "title": "Key point title",
      "description": "Detailed description",
      "importance": "high/medium/low",
      "tnpscRelevance": "TNPSC relevance explanation"
    }
  ],
  "summary": "Overall summary of the content",
  "tnpscCategories": ["Category1", "Category2"]
}

Focus on TNPSC Group 1, 2, 4 exam relevance.
`,lr=((qn=(gr=(ar=(Jn=(tr=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${In}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:Bn}]}],generationConfig:{temperature:.7,maxOutputTokens:2048}})})).json()).candidates)==null?void 0:tr[0])==null?void 0:Jn.content)==null?void 0:ar.parts)==null?void 0:gr[0])==null?void 0:qn.text).replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(lr)},$n=async()=>{for(let zn=0;zn<_e.length;zn++)await Sn(_e[zn],zn),En((zn+1)/_e.length*100);Tn(!0),Jt$2.success(" All files analyzed successfully!")},Fn=async()=>{vn(!0);try{const zn=pn.filter(sr=>sr.status==="completed");if(zn.length===0)throw new Error("No completed analyses available");const Cn=zn.flatMap(sr=>sr.keyPoints),Mn=zn.map(sr=>`${sr.fileName}: ${sr.summary}`).join(`

`),Bn=Array.from(new Set(zn.flatMap(sr=>sr.tnpscCategories))),nr={questions:await Gn(Cn.join(`
`),Mn),summary:Mn,keyPoints:Cn,difficulty:e};dn(nr)}catch(zn){console.error("Quiz generation failed:",zn),Jt$2.error("Failed to generate quiz. Please try again.")}finally{vn(!1)}},Gn=async(zn,Cn)=>{var tr,Jn,ar,gr,qn;const Mn=un==="tamil"?"Please provide all questions and answers in Tamil language.":"Please provide all questions and answers in English language.",Bn=`
Based on this TNPSC study content, generate 15-20 questions:

Key Points: ${zn.substring(0,2e3)}
Summary: ${Cn.substring(0,1e3)}

Difficulty: ${e}
${Mn}

Generate a mix of:
- Multiple choice questions (4 options each)
- True/False questions
- Short answer questions

Return as JSON array:
[
  {
    "question": "Question text",
    "options": ["A", "B", "C", "D"], // for MCQ only
    "answer": "Correct answer",
    "type": "mcq" | "true_false" | "short_answer",
    "difficulty": "${e}",
    "tnpscGroup": "Group 1",
    "explanation": "Brief explanation"
  }
]
`,lr=((qn=(gr=(ar=(Jn=(tr=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${In}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:Bn}]}],generationConfig:{temperature:.7,maxOutputTokens:3e3}})})).json()).candidates)==null?void 0:tr[0])==null?void 0:Jn.content)==null?void 0:ar.parts)==null?void 0:gr[0])==null?void 0:qn.text).replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(lr)},kn=async()=>{try{const zn=pn.filter(Cn=>Cn.status==="completed");await downloadPDF({title:"TNPSC Study Analysis Report",content:zn,type:"analysis"}),Jt$2.success("Analysis report downloaded successfully!")}catch{Jt$2.error("Failed to download report. Please try again.")}},Nn=zn=>{switch(zn){case"completed":return jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4 text-green-600"});case"analyzing":return jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 text-blue-600 animate-spin"});case"error":return jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4 text-red-600"});default:return jsxRuntimeExports.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"})}},Ln=zn=>({easy:"from-green-500 to-emerald-600",medium:"from-yellow-500 to-orange-600",hard:"from-red-500 to-pink-600","very-hard":"from-purple-500 to-indigo-600"})[zn]||"from-gray-500 to-gray-600";return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:hn,variant:"ghost",className:"text-gray-600 hover:text-gray-800",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Upload"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"h-6 w-6 text-blue-600"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Smart Analysis"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_e.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Files"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:pn.filter(zn=>zn.status==="completed").length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Analyzed"})]}),jsxRuntimeExports.jsx("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:jsxRuntimeExports.jsx(Badge,{className:`bg-gradient-to-r ${Ln(e)} text-white`,children:e.toUpperCase()})}),jsxRuntimeExports.jsx("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:jsxRuntimeExports.jsx(Badge,{className:"bg-orange-100 text-orange-700",children:un==="tamil"?"":"English"})})]})]}),xn>0&&xn<100&&jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Analysis Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(xn),"%"]})]}),jsxRuntimeExports.jsx(Progress,{value:xn,className:"h-2"})]})}),jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-blue-600"}),"File Analysis Status"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:pn.map((zn,Cn)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[zn.fileType==="pdf"?jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-red-600"}):jsxRuntimeExports.jsx(Image$1,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700 truncate",children:zn.fileName})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[Nn(zn.status),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 capitalize",children:zn.status})]})]},Cn))})]}),jsxRuntimeExports.jsx(Card,{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 shadow-xl border-0",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:Pn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:Fn,disabled:bn,className:`bg-gradient-to-r ${Ln(e)} hover:shadow-lg px-8 py-6 text-lg font-semibold`,children:bn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-5 w-5 mr-3 animate-spin"}),"Generating Quiz..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Play,{className:"h-5 w-5 mr-3"}),"Start Smart Quiz"]})}),jsxRuntimeExports.jsxs(Button,{onClick:kn,variant:"outline",className:"px-8 py-6 text-lg font-semibold border-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-5 w-5 mr-3"}),"Download Report"]})]}):jsxRuntimeExports.jsx(Button,{onClick:$n,disabled:gn!==-1,className:`bg-gradient-to-r ${Ln(e)} hover:shadow-lg px-8 py-6 text-lg font-semibold`,children:gn!==-1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-5 w-5 mr-3 animate-spin"}),"Analyzing Files..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-5 w-5 mr-3"}),"Start Analysis"]})})})}),Pn&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Analysis Summary"}),pn.filter(zn=>zn.status==="completed").map((zn,Cn)=>jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-lg border-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[zn.fileType==="pdf"?jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-red-600"}):jsxRuntimeExports.jsx(Image$1,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:zn.fileName})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:zn.summary}),zn.tnpscCategories.length>0&&jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:zn.tnpscCategories.map((Mn,Bn)=>jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:Mn},Bn))})]})},Cn))]})]})})})},PageRangeSelector=({totalPages:_e,onConfirm:e,onBack:un,title:dn,description:hn,isProcessing:fn=!1})=>{const[pn,mn]=reactExports.useState(1),[gn,yn]=reactExports.useState(Math.min(5,_e)),xn=()=>{const Tn=typeof pn=="string"?1:pn,In=typeof gn=="string"?_e:gn;if(Tn<1||In>_e){Jt$2.error(`Page range must be between 1 and ${_e}`);return}if(Tn>In){Jt$2.error("Start page cannot be greater than end page");return}if(In-Tn+1>20){Jt$2.error("Please select a maximum of 20 pages at a time for optimal performance");return}e(Tn,In)},En=typeof pn=="string"?1:pn,bn=typeof gn=="string"?_e:gn,vn=bn-En+1,Pn=En>=1&&bn<=_e&&En<=bn;return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-2xl space-y-6",children:[jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx(Button,{onClick:un,variant:"ghost",className:"p-2 hover:bg-blue-50",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold gradient-text",children:dn}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:hn})]})]})}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Select Page Range"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Choose which pages to include in your session"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_e}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Total Pages"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-purple-600",children:vn}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Selected Pages"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Start Page"}),jsxRuntimeExports.jsx(Input,{type:"number",min:"1",max:_e,value:pn,onChange:Tn=>{const In=Tn.target.value;mn(In===""?"":Math.max(1,parseInt(In)||1))},className:"input-elegant h-12 text-center text-lg font-semibold"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"End Page"}),jsxRuntimeExports.jsx(Input,{type:"number",min:"1",max:_e,value:gn,onChange:Tn=>{const In=Tn.target.value;yn(In===""?"":Math.min(_e,parseInt(In)||1))},className:"input-elegant h-12 text-center text-lg font-semibold"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Quick Select:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{mn(1),yn(Math.min(5,_e))},className:"btn-secondary",children:"First 5 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{mn(1),yn(Math.min(10,_e))},className:"btn-secondary",children:"First 10 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{mn(Math.max(1,_e-9)),yn(_e)},className:"btn-secondary",children:"Last 10 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{mn(1),yn(_e)},className:"btn-secondary",children:"All Pages"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center gap-2 p-3 rounded-lg bg-gray-50",children:Pn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-5 w-5 text-green-600"}),jsxRuntimeExports.jsxs("span",{className:"text-green-700 font-medium",children:["Valid range: ",vn," page",vn!==1?"s":""," selected"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-5 w-5 text-orange-600"}),jsxRuntimeExports.jsx("span",{className:"text-orange-700 font-medium",children:"Please check your page range"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:un,variant:"outline",className:"flex-1 btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),jsxRuntimeExports.jsx(Button,{onClick:xn,disabled:!Pn||fn,className:"flex-1 btn-primary",children:fn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Starting Analysis..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 mr-2"}),"Continue"]})})]})]})})]})})},Pagination=({className:_e,...e})=>jsxRuntimeExports.jsx("nav",{role:"navigation","aria-label":"pagination",className:cn$1("mx-auto flex w-full justify-center",_e),...e});Pagination.displayName="Pagination";const PaginationContent=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx("ul",{ref:un,className:cn$1("flex flex-row items-center gap-1",_e),...e}));PaginationContent.displayName="PaginationContent";const PaginationItem=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx("li",{ref:un,className:cn$1("",_e),...e}));PaginationItem.displayName="PaginationItem";const PaginationLink=({className:_e,isActive:e,size:un="icon",...dn})=>jsxRuntimeExports.jsx("a",{"aria-current":e?"page":void 0,className:cn$1(buttonVariants({variant:e?"outline":"ghost",size:un}),_e),...dn});PaginationLink.displayName="PaginationLink";const PaginationPrevious=({className:_e,...e})=>jsxRuntimeExports.jsxs(PaginationLink,{"aria-label":"Go to previous page",size:"default",className:cn$1("gap-1 pl-2.5",_e),...e,children:[jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Previous"})]});PaginationPrevious.displayName="PaginationPrevious";const PaginationNext=({className:_e,...e})=>jsxRuntimeExports.jsxs(PaginationLink,{"aria-label":"Go to next page",size:"default",className:cn$1("gap-1 pr-2.5",_e),...e,children:[jsxRuntimeExports.jsx("span",{children:"Next"}),jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})]});PaginationNext.displayName="PaginationNext";const PaginationEllipsis=({className:_e,...e})=>jsxRuntimeExports.jsxs("span",{"aria-hidden":!0,className:cn$1("flex h-9 w-9 items-center justify-center",_e),...e,children:[jsxRuntimeExports.jsx(Ellipsis,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"More pages"})]});PaginationEllipsis.displayName="PaginationEllipsis";const ComprehensivePdfResults=({pageAnalyses:_e,overallSummary:e,totalKeyPoints:un,onReset:dn,onGenerateQuestions:hn,isGeneratingQuestions:fn})=>{const[pn]=useAuthState(auth),[mn,gn]=reactExports.useState(1),[yn,xn]=reactExports.useState({start:1,end:Math.min(10,_e.length)});reactExports.useState(!1);const En=_e.length,bn=_e[mn-1];React.useEffect(()=>{(async()=>{if(pn&&_e.length>0)try{const In={keyPoints:un,summary:e,tnpscRelevance:`Comprehensive analysis of ${_e.length} pages with detailed study points.`,studyPoints:_e.flatMap(Rn=>Rn.studyPoints||[]),tnpscCategories:["Comprehensive PDF Analysis"],mainTopic:`PDF Analysis - ${_e.length} Pages`};await saveStudyHistory(pn.uid,"analysis",[In],{fileName:`Comprehensive PDF Analysis - ${_e.length} Pages`,difficulty:"medium",language:"english"}),console.log("Comprehensive analysis saved to study history")}catch(In){console.error("Failed to save comprehensive analysis to study history:",In)}})()},[pn,_e,un,e]);const vn=Tn=>{switch(Tn){case"high":return"bg-red-100 text-red-700 border-red-200";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"low":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},Pn=()=>{hn(yn.start,yn.end)};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Comprehensive PDF Analysis"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:[En," pages analyzed  ",un.length," key points identified"]})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:dn,variant:"outline",className:"border-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Upload"]})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 mb-8 bg-gradient-to-r from-blue-50 to-purple-50 border-0 shadow-lg",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5 text-blue-600"}),"Overall Summary"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700",children:e})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 mb-8 bg-white/80 backdrop-blur-sm shadow-lg border-0",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-green-600"}),"Generate Practice Questions"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:En,value:yn.start,onChange:Tn=>xn(In=>({...In,start:Math.max(1,Math.min(parseInt(Tn.target.value)||1,En))})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:yn.start,max:En,value:yn.end,onChange:Tn=>xn(In=>({...In,end:Math.max(In.start,Math.min(parseInt(Tn.target.value)||In.start,En))})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),jsxRuntimeExports.jsx(Button,{onClick:Pn,disabled:fn,className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white",children:fn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 mr-2"}),"Generate Quiz"]})})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",yn.end-yn.start+1," pages (Page ",yn.start," to ",yn.end,")"]})]}),bn&&jsxRuntimeExports.jsxs(Card,{className:"p-8 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Page ",bn.pageNumber," Analysis"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>gn(Math.max(1,mn-1)),disabled:mn===1,variant:"outline",size:"sm",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 px-3",children:[mn," of ",En]}),jsxRuntimeExports.jsx(Button,{onClick:()=>gn(Math.min(En,mn+1)),disabled:mn===En,variant:"outline",size:"sm",children:jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Page Summary"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:bn.summary})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"TNPSC Relevance"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500",children:bn.tnpscRelevance})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Key Points (",bn.keyPoints.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:bn.keyPoints.map((Tn,In)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0 mt-0.5",children:In+1}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 text-sm",children:Tn})]},In))})]}),bn.studyPoints.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Detailed Study Points (",bn.studyPoints.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:bn.studyPoints.map((Tn,In)=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:Tn.title}),jsxRuntimeExports.jsx(Badge,{className:`${vn(Tn.importance)} border`,children:Tn.importance})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm mb-2",children:Tn.description}),Tn.tnpscRelevance&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-3 rounded border-l-2 border-blue-400",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"TNPSC Relevance:"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-600",children:Tn.tnpscRelevance})]})]},In))})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 flex justify-center",children:jsxRuntimeExports.jsx(Pagination,{children:jsxRuntimeExports.jsxs(PaginationContent,{children:[jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationPrevious,{onClick:()=>gn(Math.max(1,mn-1)),className:mn===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,En)},(Tn,In)=>{let Rn;return En<=5||mn<=3?Rn=In+1:mn>=En-2?Rn=En-4+In:Rn=mn-2+In,jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationLink,{onClick:()=>gn(Rn),isActive:mn===Rn,className:"cursor-pointer",children:Rn})},Rn)}),En>5&&mn<En-2&&jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationEllipsis,{})}),jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationNext,{onClick:()=>gn(Math.min(En,mn+1)),className:mn===En?"pointer-events-none opacity-50":"cursor-pointer"})})]})})})]})]})})})},PdfPageNavigator=({file:_e,totalPages:e,fullText:un,outputLanguage:dn,onReset:hn,onStartQuiz:fn,initialPageAnalyses:pn,initialStudyHistoryId:mn,currentPage:gn,onPageChange:yn})=>{const[xn]=useAuthState(auth),[En,bn]=reactExports.useState(new Map),[vn,Pn]=reactExports.useState(!1),[Tn,In]=reactExports.useState(0),[Rn,Sn]=reactExports.useState(mn||null),[Dn,$n]=reactExports.useState(1),[Fn,Gn]=reactExports.useState(Math.min(10,e)),[kn,Nn]=reactExports.useState("medium"),[Ln,zn]=reactExports.useState(!1),[Cn,Mn]=reactExports.useState(1),[Bn,Xn]=reactExports.useState(Math.min(10,e));reactExports.useEffect(()=>{pn&&bn(new Map(pn))},[pn]);const nr=()=>En.get(gn),sr=async()=>{if(En.has(gn)){Jt$2.info(`Page ${gn} is already analyzed`);return}Pn(!0),In(0);try{const On=extractPageRangeFromOcr(un,gn,gn);if(!On.trim()){Jt$2.error(`No content found on page ${gn}`);return}In(30);const Un=await analyzeIndividualPage(On,gn,dn);In(80);const Yn=new Map(En);if(Yn.set(gn,Un),bn(Yn),xn){const er={keyPoints:Array.from(Yn.values()).flatMap(ir=>ir.keyPoints),studyPoints:Array.from(Yn.values()).flatMap(ir=>ir.studyPoints),summary:`Analysis of ${Yn.size} pages from ${_e.name}`,tnpscRelevance:`Comprehensive analysis covering pages: ${Array.from(Yn.keys()).sort().join(", ")}`,tnpscCategories:["PDF Analysis"],mainTopic:_e.name},Zn=Object.fromEntries(Yn);if(Rn)await updateStudyHistory(Rn,er,Zn);else{const ir=await saveStudyHistory(xn.uid,"analysis",[er],{fileName:_e.name,difficulty:"medium",language:dn,pageAnalysesMap:Zn});Sn(ir)}}In(100),Jt$2.success(`Page ${gn} analyzed successfully!`)}catch(On){console.error(`Error analyzing page ${gn}:`,On),Jt$2.error(`Failed to analyze page ${gn}. Please try again.`)}finally{Pn(!1),In(0)}},lr=async(On,Un)=>{Pn(!0),In(0);try{const Yn=Un-On+1;let er=0;for(let Zn=On;Zn<=Un;Zn++){if(En.has(Zn)){er++,In(er/Yn*100);continue}const ir=extractPageRangeFromOcr(un,Zn,Zn);if(!ir.trim()){console.warn(`No content found on page ${Zn}, skipping`),er++,In(er/Yn*100);continue}try{const fr=await analyzeIndividualPage(ir,Zn,dn);bn(br=>{const Tr=new Map(br);return Tr.set(Zn,fr),Tr}),er++,In(er/Yn*100),Jt$2.success(`Page ${Zn} analyzed successfully!`),await new Promise(br=>setTimeout(br,1e3))}catch(fr){console.error(`Error analyzing page ${Zn}:`,fr),Jt$2.error(`Failed to analyze page ${Zn}`),er++,In(er/Yn*100)}}if(xn){const Zn={keyPoints:Array.from(En.values()).flatMap(fr=>fr.keyPoints),studyPoints:Array.from(En.values()).flatMap(fr=>fr.studyPoints),summary:`Analysis of ${En.size} pages from ${_e.name}`,tnpscRelevance:`Comprehensive analysis covering pages: ${Array.from(En.keys()).sort().join(", ")}`,tnpscCategories:["PDF Analysis"],mainTopic:_e.name},ir=Object.fromEntries(En);if(Rn)await updateStudyHistory(Rn,Zn,ir);else{const fr=await saveStudyHistory(xn.uid,"analysis",[Zn],{fileName:_e.name,difficulty:"medium",language:dn,pageAnalysesMap:ir});Sn(fr)}}Jt$2.success(`Successfully analyzed pages ${On} to ${Un}!`)}catch(Yn){console.error("Error in range analysis:",Yn),Jt$2.error("Failed to complete range analysis")}finally{Pn(!1),In(0),zn(!1)}},tr=async()=>{try{const On=Array.from(En.values()).map(Un=>({fileName:`Page ${Un.pageNumber}`,keyPoints:Un.keyPoints,studyPoints:Un.studyPoints,summary:Un.summary,tnpscRelevance:Un.tnpscRelevance,tnpscCategories:[]}));if(On.length===0){Jt$2.error("No analyses available to download");return}await downloadPDF({title:`PDF Analysis - ${_e.name}`,content:On,type:"analysis"}),Jt$2.success("Analysis downloaded successfully!")}catch(On){console.error("Download error:",On),Jt$2.error("Failed to download analysis")}},Jn=()=>{if(Dn>Fn){Jt$2.error("Start page cannot be greater than end page");return}if(Dn<1||Fn>e){Jt$2.error(`Page range must be between 1 and ${e}`);return}fn({start:Dn,end:Fn},kn)},ar=nr(),gr=Array.from(En.keys()).sort((On,Un)=>On-Un),qn=gr.length/e*100;return Ln?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-2xl space-y-6",children:[jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>zn(!1),variant:"ghost",className:"p-2 hover:bg-blue-50",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"Select Page Range"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Choose which pages to analyze"})]})]})}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Analyze Page Range"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Select the pages you want to analyze for study points"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Total Pages"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Bn-Cn+1}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Selected Pages"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:gr.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Already Analyzed"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Start Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:e,value:Cn,onChange:On=>Mn(Math.max(1,parseInt(On.target.value)||1)),className:"input-elegant h-12 text-center text-lg font-semibold"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"End Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:e,value:Bn,onChange:On=>Xn(Math.min(e,parseInt(On.target.value)||1)),className:"input-elegant h-12 text-center text-lg font-semibold"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Quick Select:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{Mn(1),Xn(Math.min(5,e))},className:"btn-secondary",children:"First 5 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{Mn(1),Xn(Math.min(10,e))},className:"btn-secondary",children:"First 10 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{Mn(Math.max(1,e-9)),Xn(e)},className:"btn-secondary",children:"Last 10 Pages"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{Mn(1),Xn(e)},className:"btn-secondary",children:"All Pages"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:()=>zn(!1),variant:"outline",className:"flex-1 btn-secondary",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>lr(Cn,Bn),disabled:vn||Cn>Bn,className:"flex-1 btn-primary",children:vn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Analyzing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 mr-2"}),"Analyze Pages"]})})]})]})})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:hn,variant:"ghost",className:"text-gray-600 hover:text-gray-800",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Upload"]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsxs(Button,{onClick:tr,variant:"outline",size:"sm",disabled:En.size===0,children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download Analysis"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-blue-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"PDF Page Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:_e.name})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Total Pages"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:gr.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Analyzed"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(qn),"%"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Progress"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"TNPSC"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-orange-700",children:"Ready"})]})]}),gr.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-gray-700 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Analysis Progress"}),jsxRuntimeExports.jsxs("span",{children:[gr.length,"/",e," pages"]})]}),jsxRuntimeExports.jsx(Progress,{value:qn,className:"h-2"})]})]})]}),vn&&jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Analyzing Pages..."})]}),jsxRuntimeExports.jsx(Progress,{value:Tn,className:"h-3"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Please wait while we analyze the selected pages for TNPSC study points."})]})}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Navigate Pages"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>yn(Math.max(1,gn-1)),variant:"outline",disabled:gn===1,size:"sm",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-600 px-3",children:[gn," / ",e]}),jsxRuntimeExports.jsx(Button,{onClick:()=>yn(Math.min(e,gn+1)),variant:"outline",disabled:gn===e,size:"sm",children:jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Go to:"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:e,value:gn,onChange:On=>yn(parseInt(On.target.value)||1),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"Page"})]}),jsxRuntimeExports.jsx(Button,{onClick:sr,disabled:vn||En.has(gn),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:vn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Analyzing..."]}):En.has(gn)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4 mr-2"}),"Analyzed"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 mr-2"}),"Analyze Page ",gn]})})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:jsxRuntimeExports.jsxs(Button,{onClick:()=>zn(!0),variant:"outline",className:"flex-1",disabled:vn,children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 mr-2"}),"Analyze Page Range"]})})]})}),ar&&jsxRuntimeExports.jsx(Card,{className:"glass-card p-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Page ",gn," Analysis"]}),jsxRuntimeExports.jsxs(Badge,{className:"bg-green-100 text-green-700",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 mr-1"}),"Analyzed"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-yellow-800 mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"h-4 w-4"}),"TNPSC Relevance"]}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700",children:ar.tnpscRelevance})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 text-blue-500"}),"Key Study Points (",ar.keyPoints.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3",children:ar.keyPoints.map((On,Un)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0",children:Un+1}),jsxRuntimeExports.jsx("p",{className:"text-gray-700",children:On})]},Un))})]}),ar.studyPoints.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-gray-800 mb-3",children:["Detailed Study Points (",ar.studyPoints.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:ar.studyPoints.map((On,Un)=>jsxRuntimeExports.jsxs("div",{className:"border-l-4 border-gradient-to-b from-blue-500 to-purple-600 pl-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h5",{className:"font-semibold text-gray-800",children:On.title}),jsxRuntimeExports.jsxs(Badge,{className:On.importance==="high"?"bg-red-100 text-red-700":On.importance==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700",children:[On.importance," priority"]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 mb-2",children:On.description}),On.tnpscRelevance&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-purple-700 bg-purple-50 p-2 rounded",children:[jsxRuntimeExports.jsx("strong",{children:"TNPSC Context:"})," ",On.tnpscRelevance]})]},Un))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Summary"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700",children:ar.summary})]})]})}),gr.length>0&&jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Analyzed Pages (",gr.length,")"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:gr.map(On=>jsxRuntimeExports.jsx(Button,{onClick:()=>yn(On),variant:gn===On?"default":"outline",size:"sm",className:gn===On?"bg-blue-600 text-white":"",children:On},On))})]}),gr.length>0&&jsxRuntimeExports.jsx(Card,{className:"glass-card p-6 bg-gradient-to-r from-green-50 to-blue-50",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"h-5 w-5 text-green-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Generate Practice Quiz"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:e,value:Dn,onChange:On=>$n(Math.max(1,Math.min(e,parseInt(On.target.value)||1))),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Page"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:e,value:Fn,onChange:On=>Gn(Math.max(1,Math.min(e,parseInt(On.target.value)||1))),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),jsxRuntimeExports.jsxs("select",{value:kn,onChange:On=>Nn(On.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[jsxRuntimeExports.jsx("option",{value:"easy",children:" Easy"}),jsxRuntimeExports.jsx("option",{value:"medium",children:" Medium"}),jsxRuntimeExports.jsx("option",{value:"hard",children:" Hard"}),jsxRuntimeExports.jsx("option",{value:"very-hard",children:" Very Hard"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/50 p-4 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-bold text-blue-600",children:Fn-Dn+1}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Pages"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-bold text-green-600",children:kn.toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Difficulty"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-bold text-purple-600",children:"TNPSC"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Focused"})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:Jn,className:"w-full bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 py-4",disabled:Dn>Fn,children:[jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 mr-2"}),"Generate Quiz (Pages ",Dn,"-",Fn,")"]})]})]})})]})})})},PdfResumeOptions=({fileName:_e,totalPages:e,analyzedPages:un,lastAnalyzed:dn,onResumeAnalysis:hn,onStartNewAnalysis:fn,onBack:pn})=>{const mn=un.length/e*100;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-purple-400/10 to-blue-400/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center animate-fadeInUp",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full shadow-elegant pulse-glow animate-bounceIn",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold gradient-text animate-slideInRight",children:"Resume PDF Analysis"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-xl leading-relaxed animate-fadeInUp",style:{animationDelay:"0.2s"},children:"We found previous analysis for this PDF file"})]}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8 md:p-10 hover-lift animate-fadeInScale",style:{animationDelay:"0.4s"},children:jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4 animate-fadeInUp",style:{animationDelay:"0.6s"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-blue-600 animate-float"}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:_e.length>40?_e.substring(0,40)+"...":_e})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-base text-gray-600",children:[jsxRuntimeExports.jsx(Clock,{className:"h-5 w-5 text-blue-500"}),jsxRuntimeExports.jsxs("span",{children:["Last analyzed: ",dn.toLocaleDateString()," at ",dn.toLocaleTimeString()]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-8 rounded-2xl border border-green-200/50 shadow-elegant animate-fadeInUp",style:{animationDelay:"0.8s"},children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center stagger-animation",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:e}),jsxRuntimeExports.jsx("div",{className:"text-base font-medium text-blue-700",children:"Total Pages"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:un.length}),jsxRuntimeExports.jsx("div",{className:"text-base font-medium text-green-700",children:"Analyzed Pages"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:[Math.round(mn),"%"]}),jsxRuntimeExports.jsx("div",{className:"text-base font-medium text-purple-700",children:"Progress"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-base text-gray-700 mb-3 font-medium",children:[jsxRuntimeExports.jsx("span",{children:"Analysis Progress"}),jsxRuntimeExports.jsxs("span",{children:[un.length,"/",e," pages"]})]}),jsxRuntimeExports.jsx("div",{className:"progress-elegant",children:jsxRuntimeExports.jsx("div",{className:"progress-fill",style:{width:`${mn}%`}})})]})]}),jsxRuntimeExports.jsxs("div",{className:"animate-fadeInUp",style:{animationDelay:"1s"},children:[jsxRuntimeExports.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-3 text-lg",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-6 w-6 text-green-600 animate-pulse"}),"Previously Analyzed Pages"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-3 stagger-animation",children:un.sort((gn,yn)=>gn-yn).map(gn=>jsxRuntimeExports.jsxs(Badge,{className:"badge-elegant status-success hover-lift px-4 py-2 text-sm font-semibold",children:["Page ",gn]},gn))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6 animate-fadeInUp",style:{animationDelay:"1.2s"},children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx(Button,{onClick:hn,className:"btn-primary py-8 text-lg font-bold relative group overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Play,{className:"h-6 w-6 group-hover:scale-110 transition-transform"}),jsxRuntimeExports.jsx("span",{children:"Resume Analysis"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm opacity-90",children:["Continue from page ",Math.max(...un)+1]})]})}),jsxRuntimeExports.jsx(Button,{onClick:fn,className:"btn-secondary py-8 text-lg font-bold relative group overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-6 w-6 group-hover:rotate-180 transition-transform duration-500"}),jsxRuntimeExports.jsx("span",{children:"Start New Analysis"})]}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-70",children:"Analyze from beginning"})]})})]}),jsxRuntimeExports.jsx(Button,{onClick:pn,variant:"ghost",className:"w-full text-gray-600 hover:text-gray-800 py-4 text-base font-medium hover:bg-gray-100/50 rounded-xl transition-all duration-300",children:"Back to Upload"})]})]})})]})})]})},FileRecognitionModal=({fileName:_e,totalPages:e,analyzedPages:un,lastAnalyzed:dn,onContinue:hn,onStartNew:fn,onCancel:pn})=>{const[mn,gn]=reactExports.useState(!1),yn=un/e*100,xn=async()=>{gn(!0),await hn()},En=bn=>bn.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4 flex items-center justify-center",children:jsxRuntimeExports.jsx(Card,{className:"max-w-2xl mx-auto p-8 bg-white/95 backdrop-blur-sm shadow-2xl border-0 animate-fadeInScale",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full w-fit mx-auto",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"File Already Analyzed"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"We found previous analysis for this document"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:_e}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4"}),En(dn)]}),jsxRuntimeExports.jsxs("span",{children:[e," pages total"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Analysis Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[un,"/",e," pages"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${yn}%`}})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx(Badge,{className:`${yn===100?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:yn===100?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 mr-1"}),"Complete"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3 mr-1"}),Math.round(yn),"% completed"]})})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 text-center",children:"What would you like to do?"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsx("div",{className:"border border-blue-200 rounded-lg p-4 hover:bg-blue-50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:jsxRuntimeExports.jsx(ArrowRight,{className:"h-5 w-5 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:"Continue from where you left off"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Resume analysis from page ",un+1," and save tokens"]}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx(Button,{onClick:xn,disabled:mn,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:mn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Loading..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 mr-2"}),"Continue Analysis"]})})})]})]})}),jsxRuntimeExports.jsx("div",{className:"border border-orange-200 rounded-lg p-4 hover:bg-orange-50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:jsxRuntimeExports.jsx(RotateCcw,{className:"h-5 w-5 text-orange-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800",children:"Start fresh analysis"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Completely re-analyze the entire document from the beginning"}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsxs(Button,{onClick:fn,variant:"outline",className:"border-orange-300 text-orange-700 hover:bg-orange-50",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4 mr-2"}),"Start New Analysis"]})})]})]})})]})]}),yn>25&&jsxRuntimeExports.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-4 w-4 text-yellow-600"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-yellow-700",children:[jsxRuntimeExports.jsx("strong",{children:"Note:"})," Starting a fresh analysis will use additional tokens and replace your existing progress."]})]})}),jsxRuntimeExports.jsx("div",{className:"text-center pt-4",children:jsxRuntimeExports.jsx(Button,{onClick:pn,variant:"ghost",className:"text-gray-500 hover:text-gray-700",children:"Cancel & Choose Different File"})})]})})})},AdvancedAnalyzingState=({progress:_e,step:e,analysisType:un,fileName:dn,currentPage:hn,totalPages:fn})=>{const mn=(()=>{switch(un){case"next-page":return{title:`Analyzing Page ${hn}`,subtitle:"Generating insights for the next page",icon:ArrowRight,gradient:"from-green-500 to-emerald-600",bgGradient:"from-green-50 to-emerald-50"};case"comprehensive":return{title:"Comprehensive Analysis",subtitle:"Processing entire document for detailed insights",icon:Brain,gradient:"from-purple-500 to-indigo-600",bgGradient:"from-purple-50 to-indigo-50"};default:return{title:"Detailed Analysis",subtitle:"AI is analyzing your study material",icon:FileText,gradient:"from-blue-500 to-purple-600",bgGradient:"from-blue-50 to-purple-50"}}})(),gn=mn.icon,yn=[{id:1,label:"Processing Content",completed:_e>20},{id:2,label:"Extracting Key Points",completed:_e>40},{id:3,label:"TNPSC Analysis",completed:_e>60},{id:4,label:"Generating Study Points",completed:_e>80},{id:5,label:"Finalizing Results",completed:_e>95}];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-br from-blue-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-br from-indigo-400/30 to-pink-400/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs(Card,{className:`glass-card p-8 md:p-12 text-center mb-8 bg-gradient-to-r ${mn.bgGradient} border-0 shadow-2xl animate-fade-in`,children:[jsxRuntimeExports.jsxs("div",{className:`relative mx-auto mb-8 w-24 h-24 bg-gradient-to-r ${mn.gradient} rounded-full flex items-center justify-center shadow-2xl animate-pulse`,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-white/20 to-transparent animate-spin"}),jsxRuntimeExports.jsx(gn,{className:"h-12 w-12 text-white animate-bounce"})]}),jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold gradient-text mb-4 animate-fade-in",style:{animationDelay:"0.2s"},children:mn.title}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-2 animate-fade-in",style:{animationDelay:"0.4s"},children:mn.subtitle}),dn&&jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-500 mb-8 animate-fade-in",style:{animationDelay:"0.6s"},children:[" ",dn,hn&&fn&&jsxRuntimeExports.jsxs("span",{className:"ml-2 text-blue-600 font-semibold",children:["(Page ",hn," of ",fn,")"]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8 animate-fade-in",style:{animationDelay:"0.8s"},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[Math.round(_e),"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Progress,{value:_e,className:"h-3 bg-gradient-to-r from-gray-200 to-gray-300 rounded-full overflow-hidden"}),jsxRuntimeExports.jsx("div",{className:`absolute top-0 left-0 h-full bg-gradient-to-r ${mn.gradient} rounded-full transition-all duration-500 ease-out`,style:{width:`${_e}%`},children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-white/30 to-transparent animate-pulse"})})]})]}),jsxRuntimeExports.jsxs("div",{className:`inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r ${mn.gradient} text-white rounded-full shadow-lg animate-fade-in`,style:{animationDelay:"1s"},children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:e})]})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 md:p-8 animate-fade-in",style:{animationDelay:"1.2s"},children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-6 text-center",children:"Analysis Pipeline"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:yn.map((xn,En)=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:`flex flex-col items-center p-4 rounded-lg transition-all duration-500 ${xn.completed?"bg-gradient-to-b from-green-100 to-emerald-100 text-green-800 shadow-md transform scale-105":_e>(xn.id-1)*20?"bg-gradient-to-b from-blue-100 to-indigo-100 text-blue-800 shadow-md animate-pulse":"bg-gray-50 text-gray-500"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-2 ${xn.completed?"bg-green-500 text-white":_e>(xn.id-1)*20?"bg-blue-500 text-white animate-pulse":"bg-gray-300 text-gray-600"}`,children:xn.completed?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4"}):jsxRuntimeExports.jsx("span",{className:"text-xs font-bold",children:xn.id})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:xn.label})]}),En<yn.length-1&&jsxRuntimeExports.jsx("div",{className:"hidden md:block absolute top-1/2 -right-2 w-4 h-0.5 bg-gray-300 transform -translate-y-1/2",children:jsxRuntimeExports.jsx("div",{className:`h-full bg-gradient-to-r ${mn.gradient} transition-all duration-500 ${xn.completed?"w-full":"w-0"}`})})]},xn.id))})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 text-center animate-fade-in",style:{animationDelay:"1.4s"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(Zap,{className:"h-5 w-5 text-yellow-500 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-800",children:"Did you know?"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:un==="next-page"?"Our AI analyzes each page for TNPSC-specific content and creates targeted study materials.":un==="comprehensive"?"Comprehensive analysis processes every page to create a complete study guide tailored for TNPSC preparation.":"Our AI processes text, identifies key concepts, and generates TNPSC-focused study materials in seconds!"})]})]})})]})},StudyAssistant=()=>{var qr;const[_e]=useAuthState(auth),{selectedFiles:e,setSelectedFiles:un,analysisResults:dn,setAnalysisResults:hn,questionResult:fn,setQuestionResult:pn,difficulty:mn,setDifficulty:gn,outputLanguage:yn,setOutputLanguage:xn,clearAppState:En}=useAppContext(),[bn,vn]=reactExports.useState("upload"),[Pn,Tn]=reactExports.useState(!1),[In,Rn]=reactExports.useState(!1),[Sn,Dn]=reactExports.useState(0),[$n,Fn]=reactExports.useState(""),[Gn,kn]=reactExports.useState(null),[Nn,Ln]=reactExports.useState(""),[zn,Cn]=reactExports.useState(null),[Mn,Bn]=reactExports.useState(!1);reactExports.useState(1);const[Xn,nr]=reactExports.useState(!1),[sr,lr]=reactExports.useState(null),[tr,Jn]=reactExports.useState(1),ar=Ar=>{if(!Ar)return;const or=Array.from(Ar),jr=or.filter(cr=>cr.type.startsWith("image/")||cr.type==="application/pdf");jr.length!==or.length&&Jt$2.error("Only image files (PNG, JPG, etc.) and PDF files are supported"),un(jr)},gr=async()=>{var or,jr;if(e.length===0){Jt$2.error("Please select files to analyze");return}const Ar=e.find(cr=>cr.type==="application/pdf");if(Ar){try{const cr=await extractAllPdfText(Ar),hr=findTotalPagesFromOcr(cr);if(hr>0){kn({file:Ar,totalPages:hr}),Ln(cr);const wr=await Ar.arrayBuffer(),Pr=await crypto.subtle.digest("SHA-256",wr),Hr=Array.from(new Uint8Array(Pr)).map(Nr=>Nr.toString(16).padStart(2,"0")).join(""),Kr=await getStudyHistoryForFile((_e==null?void 0:_e.uid)||"",Ar.name,Hr,Ar.size);if(Kr&&Kr.pageAnalysesMap&&Object.keys(Kr.pageAnalysesMap).length>0){const Nr=new Map,ns=[];Object.entries(Kr.pageAnalysesMap).forEach(([ts,Ps])=>{const ps=parseInt(ts);Nr.set(ps,Ps),ns.push(ps)}),Cn({id:Kr.id,pageAnalysesMap:Nr,analyzedPages:ns,lastAnalyzed:Kr.timestamp.toDate()}),vn("file-recognition")}else vn("pdf-navigator");return}else{Jt$2.error("Unable to process PDF. Please try a different file.");return}}catch(cr){console.error("PDF analysis error:",cr),Jt$2.error("Failed to analyze PDF. Please try again.")}return}Tn(!0),Dn(0),Fn("Initializing analysis...");try{const cr=[],hr=e.filter(wr=>wr.type.startsWith("image/")).length;for(let wr=0;wr<e.length;wr++){const Pr=e[wr];if(Pr.type.startsWith("image/")){Fn(`Analyzing image ${wr+1} of ${hr}...`),Dn(wr/hr*80);const kr=await analyzeImage(Pr,yn);cr.push({...kr,language:yn,mainTopic:((jr=(or=kr.studyPoints)==null?void 0:or[0])==null?void 0:jr.title)||"Study Material"})}}Fn("Finalizing results..."),Dn(100),setTimeout(()=>{hn(cr),vn("analysis"),Jt$2.success("Analysis completed successfully!"),Tn(!1)},1e3)}catch(cr){console.error("Analysis error:",cr),Jt$2.error("Failed to analyze files. Please try again."),Tn(!1)}},qn=async()=>{var Ar;if(dn.length!==0){Rn(!0);try{const or=await generateQuestions(dn,mn,yn);pn({...or,totalQuestions:((Ar=or.questions)==null?void 0:Ar.length)||0}),vn("questions"),Jt$2.success("Questions generated successfully!")}catch(or){console.error("Question generation error:",or),Jt$2.error("Failed to generate questions. Please try again.")}finally{Rn(!1)}}},On=()=>{if(e.length===0){Jt$2.error("Please select files first");return}vn("quick-analysis")},Un=Ar=>{var or;pn({...Ar,totalQuestions:((or=Ar.questions)==null?void 0:or.length)||0}),vn("quiz")};React.useEffect(()=>{fn&&bn==="upload"&&vn("quiz")},[fn]);const Yn=async(Ar,or)=>{var jr,cr;if(Gn){Rn(!0);try{const hr=[];for(let kr=Ar.start;kr<=Ar.end;kr++)(jr=zn==null?void 0:zn.pageAnalysesMap)!=null&&jr.has(kr)&&hr.push(zn.pageAnalysesMap.get(kr));let wr;if(hr.length>0){const kr=hr.flatMap(Nr=>Nr.keyPoints||[]),Hr=hr.map(Nr=>Nr.summary||"").join(" "),Kr=hr.flatMap(Nr=>Nr.studyPoints||[]);wr={keyPoints:kr,summary:Hr,tnpscRelevance:`Quiz based on analyzed pages ${Ar.start} to ${Ar.end}`,studyPoints:Kr,tnpscCategories:["PDF Quiz"]}}else{const kr=extractPageRangeFromOcr(Nn,Ar.start,Ar.end);wr=await analyzePdfContent(kr,yn)}const Pr=await generateQuestions([wr],or,yn);pn({...Pr,totalQuestions:((cr=Pr.questions)==null?void 0:cr.length)||0}),vn("questions"),Jt$2.success(`Quiz generated for pages ${Ar.start} to ${Ar.end}!`)}catch(hr){console.error("Question generation error:",hr),Jt$2.error("Failed to generate questions. Please try again.")}finally{Rn(!1)}}},er=(Ar,or)=>{vn("pdf-navigator")},Zn=()=>{En(),Cn(null),vn("upload")},ir=()=>{fn&&vn("quiz")},fr=()=>{Gn&&zn&&vn("pdf-navigator")},br=()=>{Cn(null),Gn&&vn("pdf-page-select")},Tr=()=>{Gn&&zn&&vn("pdf-navigator")},Ir=()=>{Cn(null),Gn&&vn("pdf-page-select")},Mr=()=>{un([]),kn(null),Cn(null),vn("upload")};return bn==="quick-analysis"?jsxRuntimeExports.jsx(QuickAnalysisMode,{files:e,difficulty:mn,outputLanguage:yn,onStartQuiz:Un,onReset:Zn}):bn==="quiz"&&fn?jsxRuntimeExports.jsx(ModernQuizMode,{result:fn,onReset:Zn,onBackToAnalysis:()=>vn("analysis"),difficulty:mn,outputLanguage:yn}):bn==="questions"&&fn?jsxRuntimeExports.jsx(QuestionResults,{result:fn,onReset:Zn,selectedFiles:e,onStartQuiz:ir}):bn==="analysis"&&dn.length>0?jsxRuntimeExports.jsx(AnalysisResults,{result:dn[0],onReset:Zn,selectedFiles:e,onGenerateQuestions:qn,onStartQuiz:ir,isGeneratingQuestions:In}):bn==="comprehensive-pdf"&&sr?jsxRuntimeExports.jsx(ComprehensivePdfResults,{pageAnalyses:sr.pageAnalyses,overallSummary:sr.overallSummary,totalKeyPoints:sr.totalKeyPoints,onReset:Zn,onGenerateQuestions:()=>{},isGeneratingQuestions:In}):bn==="pdf-navigator"&&Gn?jsxRuntimeExports.jsx(PdfPageNavigator,{file:Gn.file,totalPages:Gn.totalPages,fullText:Nn,outputLanguage:yn,onReset:Zn,onStartQuiz:Yn,initialPageAnalyses:zn==null?void 0:zn.pageAnalysesMap,initialStudyHistoryId:zn==null?void 0:zn.id,currentPage:tr,onPageChange:Jn}):bn==="pdf-resume-options"&&Gn&&zn?jsxRuntimeExports.jsx(PdfResumeOptions,{fileName:Gn.file.name,totalPages:Gn.totalPages,analyzedPages:zn.analyzedPages,lastAnalyzed:zn.lastAnalyzed,onResumeAnalysis:fr,onStartNewAnalysis:br,onBack:Zn}):bn==="pdf-page-select"&&Gn?jsxRuntimeExports.jsx(PageRangeSelector,{totalPages:Gn.totalPages,onConfirm:er,onBack:Zn,title:"Select PDF Pages",description:"Choose which pages to analyze for TNPSC preparation",isProcessing:Xn}):bn==="file-recognition"&&Gn&&zn?jsxRuntimeExports.jsx(FileRecognitionModal,{fileName:Gn.file.name,totalPages:Gn.totalPages,analyzedPages:zn.analyzedPages.length,lastAnalyzed:zn.lastAnalyzed,onContinue:Tr,onStartNew:Ir,onCancel:Mr}):bn==="quiz-page-select"&&Gn?jsxRuntimeExports.jsx(PageRangeSelector,{totalPages:Gn.totalPages,onConfirm:(Ar,or)=>{vn("pdf-navigator")},onBack:()=>vn("upload"),title:"Select Quiz Pages",description:"Choose which pages to generate quiz questions from"}):Pn||Mn?jsxRuntimeExports.jsx(AdvancedAnalyzingState,{progress:Sn,step:$n,analysisType:"detailed",fileName:(qr=e[0])==null?void 0:qr.name}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-secondary/10 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-secondary/20 to-primary/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-accent/10 to-primary/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),jsxRuntimeExports.jsx("div",{className:"p-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-4xl",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8 animate-fadeInUp",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-primary to-primary-glow rounded-full shadow-2xl pulse-glow",children:jsxRuntimeExports.jsx(Brain,{className:"h-10 w-10 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-5xl md:text-6xl font-bold gradient-text",children:"Ram's AI"})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"Transform your TNPSC preparation with AI-powered analysis. Upload your study materials and get instant insights, key points, and practice questions."})]}),jsxRuntimeExports.jsx(Card,{className:"glass-card p-8 mb-8 animate-fadeInScale hover-lift",children:jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-foreground",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 inline mr-2"}),"Difficulty Level"]}),jsxRuntimeExports.jsxs("select",{value:mn,onChange:Ar=>gn(Ar.target.value),className:"input-elegant",children:[jsxRuntimeExports.jsx("option",{value:"easy",children:" Easy - Basic concepts"}),jsxRuntimeExports.jsx("option",{value:"medium",children:" Medium - Standard level"}),jsxRuntimeExports.jsx("option",{value:"hard",children:" Hard - Advanced level"}),jsxRuntimeExports.jsx("option",{value:"very-hard",children:" Very Hard - Expert level"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-foreground",children:[jsxRuntimeExports.jsx(Languages,{className:"h-4 w-4 inline mr-2"}),"Output Language"]}),jsxRuntimeExports.jsxs("select",{value:yn,onChange:Ar=>xn(Ar.target.value),className:"input-elegant",children:[jsxRuntimeExports.jsx("option",{value:"english",children:" English"}),jsxRuntimeExports.jsx("option",{value:"tamil",children:"  (Tamil)"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"interactive-card p-6 md:p-10 border-2 border-dashed border-border hover:border-primary transition-all duration-500 hover:bg-primary/5 group",children:[" ",jsxRuntimeExports.jsx("input",{type:"file",multiple:!0,accept:"image/*,application/pdf",onChange:Ar=>ar(Ar.target.files),className:"hidden",id:"file-upload"}),jsxRuntimeExports.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer block text-center",children:[jsxRuntimeExports.jsx(Upload,{className:"h-16 md:h-20 w-16 md:w-20 text-muted-foreground mx-auto mb-4 md:mb-6 animate-float group-hover:text-primary transition-colors duration-300"}),jsxRuntimeExports.jsx("p",{className:"text-xl md:text-2xl font-bold text-foreground mb-2 md:mb-3 group-hover:text-primary transition-colors",children:"Upload Your Study Materials"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground text-lg md:text-xl mb-2",children:"Drag & drop or click to select images and PDF files"}),jsxRuntimeExports.jsx("p",{className:"text-sm md:text-base text-muted-foreground/60",children:"Supports: JPG, PNG, GIF, PDF (up to 10MB each)"})]})]}),e.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-fadeInUp",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800 text-lg",children:jsxRuntimeExports.jsxs("span",{className:"gradient-text",children:["Selected Files (",e.length,")"]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 stagger-animation",children:e.map((Ar,or)=>jsxRuntimeExports.jsxs("div",{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ar.type.startsWith("image/")?jsxRuntimeExports.jsx(Image$1,{className:"h-7 w-7 text-blue-600 animate-pulse"}):jsxRuntimeExports.jsx(FileText,{className:"h-7 w-7 text-red-600 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-base font-semibold text-gray-700",children:Ar.type.startsWith("image/")?"Image":"PDF"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium truncate mb-1",children:Ar.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs",children:["(",(Ar.size/1024/1024).toFixed(2)," MB)"]})]})]},or))}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 md:gap-6 pt-6 md:pt-8",children:[jsxRuntimeExports.jsx(Button,{onClick:gr,disabled:Pn,className:"flex-1 btn-primary py-6 md:py-8 text-lg md:text-xl font-bold",children:Pn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-5 w-5 md:h-6 md:w-6 border-b-2 border-white mr-2 md:mr-3"}),"Analyzing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Settings,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3"}),"Detailed Analysis"]})}),jsxRuntimeExports.jsxs(Button,{onClick:On,className:"flex-1 bg-gradient-to-r from-accent-success to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-6 md:py-8 text-lg md:text-xl font-bold shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-300 border-0 rounded-2xl relative overflow-hidden group",children:[jsxRuntimeExports.jsx(Zap,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3 group-hover:rotate-12 transition-transform"}),"Quick Quiz"]})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 stagger-animation",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-blue-100 rounded-full w-fit mx-auto mb-6 animate-bounceIn",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-blue-600"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Smart Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-base leading-relaxed",children:"AI-powered analysis extracts key points and creates crisp, memorable study notes"})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-purple-100 rounded-full w-fit mx-auto mb-6 animate-bounceIn",style:{animationDelay:"0.2s"},children:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-purple-600"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"MCQ & Assertion Questions"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-base leading-relaxed",children:"Generate TNPSC-style multiple choice and assertion-reason questions for practice"})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-8 text-center hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-green-100 rounded-full w-fit mx-auto mb-6 animate-bounceIn",style:{animationDelay:"0.4s"},children:jsxRuntimeExports.jsx(Zap,{className:"h-8 w-8 text-green-600"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Instant Results"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-base leading-relaxed",children:"Get immediate feedback with detailed explanations and performance tracking"})]})]})]})})]})};function clamp(_e,[e,un]){return Math.min(un,Math.max(e,_e))}var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope$3(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=_e=>{const{__scopeSelect:e,children:un,open:dn,defaultOpen:hn,onOpenChange:fn,value:pn,defaultValue:mn,onValueChange:gn,dir:yn,name:xn,autoComplete:En,disabled:bn,required:vn,form:Pn}=_e,Tn=usePopperScope(e),[In,Rn]=reactExports.useState(null),[Sn,Dn]=reactExports.useState(null),[$n,Fn]=reactExports.useState(!1),Gn=useDirection(yn),[kn=!1,Nn]=useControllableState({prop:dn,defaultProp:hn,onChange:fn}),[Ln,zn]=useControllableState({prop:pn,defaultProp:mn,onChange:gn}),Cn=reactExports.useRef(null),Mn=In?Pn||!!In.closest("form"):!0,[Bn,Xn]=reactExports.useState(new Set),nr=Array.from(Bn).map(sr=>sr.props.value).join(";");return jsxRuntimeExports.jsx(Root2$3,{...Tn,children:jsxRuntimeExports.jsxs(SelectProvider,{required:vn,scope:e,trigger:In,onTriggerChange:Rn,valueNode:Sn,onValueNodeChange:Dn,valueNodeHasChildren:$n,onValueNodeHasChildrenChange:Fn,contentId:useId(),value:Ln,onValueChange:zn,open:kn,onOpenChange:Nn,dir:Gn,triggerPointerDownPosRef:Cn,disabled:bn,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:e,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:_e.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(sr=>{Xn(lr=>new Set(lr).add(sr))},[]),onNativeOptionRemove:reactExports.useCallback(sr=>{Xn(lr=>{const tr=new Set(lr);return tr.delete(sr),tr})},[]),children:un})}),Mn?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:vn,tabIndex:-1,name:xn,autoComplete:En,value:Ln,onChange:sr=>zn(sr.target.value),disabled:bn,form:Pn,children:[Ln===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(Bn)]},nr):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,disabled:dn=!1,...hn}=_e,fn=usePopperScope(un),pn=useSelectContext(TRIGGER_NAME,un),mn=pn.disabled||dn,gn=useComposedRefs(e,pn.onTriggerChange),yn=useCollection(un),xn=reactExports.useRef("touch"),[En,bn,vn]=useTypeaheadSearch(Tn=>{const In=yn().filter(Dn=>!Dn.disabled),Rn=In.find(Dn=>Dn.value===pn.value),Sn=findNextItem(In,Tn,Rn);Sn!==void 0&&pn.onValueChange(Sn.value)}),Pn=Tn=>{mn||(pn.onOpenChange(!0),vn()),Tn&&(pn.triggerPointerDownPosRef.current={x:Math.round(Tn.pageX),y:Math.round(Tn.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...fn,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":pn.contentId,"aria-expanded":pn.open,"aria-required":pn.required,"aria-autocomplete":"none",dir:pn.dir,"data-state":pn.open?"open":"closed",disabled:mn,"data-disabled":mn?"":void 0,"data-placeholder":shouldShowPlaceholder(pn.value)?"":void 0,...hn,ref:gn,onClick:composeEventHandlers(hn.onClick,Tn=>{Tn.currentTarget.focus(),xn.current!=="mouse"&&Pn(Tn)}),onPointerDown:composeEventHandlers(hn.onPointerDown,Tn=>{xn.current=Tn.pointerType;const In=Tn.target;In.hasPointerCapture(Tn.pointerId)&&In.releasePointerCapture(Tn.pointerId),Tn.button===0&&Tn.ctrlKey===!1&&Tn.pointerType==="mouse"&&(Pn(Tn),Tn.preventDefault())}),onKeyDown:composeEventHandlers(hn.onKeyDown,Tn=>{const In=En.current!=="";!(Tn.ctrlKey||Tn.altKey||Tn.metaKey)&&Tn.key.length===1&&bn(Tn.key),!(In&&Tn.key===" ")&&OPEN_KEYS.includes(Tn.key)&&(Pn(),Tn.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,className:dn,style:hn,children:fn,placeholder:pn="",...mn}=_e,gn=useSelectContext(VALUE_NAME,un),{onValueNodeHasChildrenChange:yn}=gn,xn=fn!==void 0,En=useComposedRefs(e,gn.onValueNodeChange);return useLayoutEffect2(()=>{yn(xn)},[yn,xn]),jsxRuntimeExports.jsx(Primitive.span,{...mn,ref:En,style:{pointerEvents:"none"},children:shouldShowPlaceholder(gn.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:pn}):fn})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,children:dn,...hn}=_e;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...hn,ref:e,children:dn||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=_e=>jsxRuntimeExports.jsx(Portal$2,{asChild:!0,..._e});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME="SelectContent",SelectContent$1=reactExports.forwardRef((_e,e)=>{const un=useSelectContext(CONTENT_NAME,_e.__scopeSelect),[dn,hn]=reactExports.useState();if(useLayoutEffect2(()=>{hn(new DocumentFragment)},[]),!un.open){const fn=dn;return fn?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:_e.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:_e.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:_e.children})})}),fn):null}return jsxRuntimeExports.jsx(SelectContentImpl,{..._e,ref:e})});SelectContent$1.displayName=CONTENT_NAME;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,position:dn="item-aligned",onCloseAutoFocus:hn,onEscapeKeyDown:fn,onPointerDownOutside:pn,side:mn,sideOffset:gn,align:yn,alignOffset:xn,arrowPadding:En,collisionBoundary:bn,collisionPadding:vn,sticky:Pn,hideWhenDetached:Tn,avoidCollisions:In,...Rn}=_e,Sn=useSelectContext(CONTENT_NAME,un),[Dn,$n]=reactExports.useState(null),[Fn,Gn]=reactExports.useState(null),kn=useComposedRefs(e,Zn=>$n(Zn)),[Nn,Ln]=reactExports.useState(null),[zn,Cn]=reactExports.useState(null),Mn=useCollection(un),[Bn,Xn]=reactExports.useState(!1),nr=reactExports.useRef(!1);reactExports.useEffect(()=>{if(Dn)return hideOthers(Dn)},[Dn]),useFocusGuards();const sr=reactExports.useCallback(Zn=>{const[ir,...fr]=Mn().map(Ir=>Ir.ref.current),[br]=fr.slice(-1),Tr=document.activeElement;for(const Ir of Zn)if(Ir===Tr||(Ir==null||Ir.scrollIntoView({block:"nearest"}),Ir===ir&&Fn&&(Fn.scrollTop=0),Ir===br&&Fn&&(Fn.scrollTop=Fn.scrollHeight),Ir==null||Ir.focus(),document.activeElement!==Tr))return},[Mn,Fn]),lr=reactExports.useCallback(()=>sr([Nn,Dn]),[sr,Nn,Dn]);reactExports.useEffect(()=>{Bn&&lr()},[Bn,lr]);const{onOpenChange:tr,triggerPointerDownPosRef:Jn}=Sn;reactExports.useEffect(()=>{if(Dn){let Zn={x:0,y:0};const ir=br=>{var Tr,Ir;Zn={x:Math.abs(Math.round(br.pageX)-(((Tr=Jn.current)==null?void 0:Tr.x)??0)),y:Math.abs(Math.round(br.pageY)-(((Ir=Jn.current)==null?void 0:Ir.y)??0))}},fr=br=>{Zn.x<=10&&Zn.y<=10?br.preventDefault():Dn.contains(br.target)||tr(!1),document.removeEventListener("pointermove",ir),Jn.current=null};return Jn.current!==null&&(document.addEventListener("pointermove",ir),document.addEventListener("pointerup",fr,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ir),document.removeEventListener("pointerup",fr,{capture:!0})}}},[Dn,tr,Jn]),reactExports.useEffect(()=>{const Zn=()=>tr(!1);return window.addEventListener("blur",Zn),window.addEventListener("resize",Zn),()=>{window.removeEventListener("blur",Zn),window.removeEventListener("resize",Zn)}},[tr]);const[ar,gr]=useTypeaheadSearch(Zn=>{const ir=Mn().filter(Tr=>!Tr.disabled),fr=ir.find(Tr=>Tr.ref.current===document.activeElement),br=findNextItem(ir,Zn,fr);br&&setTimeout(()=>br.ref.current.focus())}),qn=reactExports.useCallback((Zn,ir,fr)=>{const br=!nr.current&&!fr;(Sn.value!==void 0&&Sn.value===ir||br)&&(Ln(Zn),br&&(nr.current=!0))},[Sn.value]),On=reactExports.useCallback(()=>Dn==null?void 0:Dn.focus(),[Dn]),Un=reactExports.useCallback((Zn,ir,fr)=>{const br=!nr.current&&!fr;(Sn.value!==void 0&&Sn.value===ir||br)&&Cn(Zn)},[Sn.value]),Yn=dn==="popper"?SelectPopperPosition:SelectItemAlignedPosition,er=Yn===SelectPopperPosition?{side:mn,sideOffset:gn,align:yn,alignOffset:xn,arrowPadding:En,collisionBoundary:bn,collisionPadding:vn,sticky:Pn,hideWhenDetached:Tn,avoidCollisions:In}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:un,content:Dn,viewport:Fn,onViewportChange:Gn,itemRefCallback:qn,selectedItem:Nn,onItemLeave:On,itemTextRefCallback:Un,focusSelectedItem:lr,selectedItemText:zn,position:dn,isPositioned:Bn,searchRef:ar,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:Sn.open,onMountAutoFocus:Zn=>{Zn.preventDefault()},onUnmountAutoFocus:composeEventHandlers(hn,Zn=>{var ir;(ir=Sn.trigger)==null||ir.focus({preventScroll:!0}),Zn.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:fn,onPointerDownOutside:pn,onFocusOutside:Zn=>Zn.preventDefault(),onDismiss:()=>Sn.onOpenChange(!1),children:jsxRuntimeExports.jsx(Yn,{role:"listbox",id:Sn.contentId,"data-state":Sn.open?"open":"closed",dir:Sn.dir,onContextMenu:Zn=>Zn.preventDefault(),...Rn,...er,onPlaced:()=>Xn(!0),ref:kn,style:{display:"flex",flexDirection:"column",outline:"none",...Rn.style},onKeyDown:composeEventHandlers(Rn.onKeyDown,Zn=>{const ir=Zn.ctrlKey||Zn.altKey||Zn.metaKey;if(Zn.key==="Tab"&&Zn.preventDefault(),!ir&&Zn.key.length===1&&gr(Zn.key),["ArrowUp","ArrowDown","Home","End"].includes(Zn.key)){let br=Mn().filter(Tr=>!Tr.disabled).map(Tr=>Tr.ref.current);if(["ArrowUp","End"].includes(Zn.key)&&(br=br.slice().reverse()),["ArrowUp","ArrowDown"].includes(Zn.key)){const Tr=Zn.target,Ir=br.indexOf(Tr);br=br.slice(Ir+1)}setTimeout(()=>sr(br)),Zn.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,onPlaced:dn,...hn}=_e,fn=useSelectContext(CONTENT_NAME,un),pn=useSelectContentContext(CONTENT_NAME,un),[mn,gn]=reactExports.useState(null),[yn,xn]=reactExports.useState(null),En=useComposedRefs(e,kn=>xn(kn)),bn=useCollection(un),vn=reactExports.useRef(!1),Pn=reactExports.useRef(!0),{viewport:Tn,selectedItem:In,selectedItemText:Rn,focusSelectedItem:Sn}=pn,Dn=reactExports.useCallback(()=>{if(fn.trigger&&fn.valueNode&&mn&&yn&&Tn&&In&&Rn){const kn=fn.trigger.getBoundingClientRect(),Nn=yn.getBoundingClientRect(),Ln=fn.valueNode.getBoundingClientRect(),zn=Rn.getBoundingClientRect();if(fn.dir!=="rtl"){const Tr=zn.left-Nn.left,Ir=Ln.left-Tr,Mr=kn.left-Ir,qr=kn.width+Mr,Ar=Math.max(qr,Nn.width),or=window.innerWidth-CONTENT_MARGIN,jr=clamp(Ir,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,or-Ar)]);mn.style.minWidth=qr+"px",mn.style.left=jr+"px"}else{const Tr=Nn.right-zn.right,Ir=window.innerWidth-Ln.right-Tr,Mr=window.innerWidth-kn.right-Ir,qr=kn.width+Mr,Ar=Math.max(qr,Nn.width),or=window.innerWidth-CONTENT_MARGIN,jr=clamp(Ir,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,or-Ar)]);mn.style.minWidth=qr+"px",mn.style.right=jr+"px"}const Cn=bn(),Mn=window.innerHeight-CONTENT_MARGIN*2,Bn=Tn.scrollHeight,Xn=window.getComputedStyle(yn),nr=parseInt(Xn.borderTopWidth,10),sr=parseInt(Xn.paddingTop,10),lr=parseInt(Xn.borderBottomWidth,10),tr=parseInt(Xn.paddingBottom,10),Jn=nr+sr+Bn+tr+lr,ar=Math.min(In.offsetHeight*5,Jn),gr=window.getComputedStyle(Tn),qn=parseInt(gr.paddingTop,10),On=parseInt(gr.paddingBottom,10),Un=kn.top+kn.height/2-CONTENT_MARGIN,Yn=Mn-Un,er=In.offsetHeight/2,Zn=In.offsetTop+er,ir=nr+sr+Zn,fr=Jn-ir;if(ir<=Un){const Tr=Cn.length>0&&In===Cn[Cn.length-1].ref.current;mn.style.bottom="0px";const Ir=yn.clientHeight-Tn.offsetTop-Tn.offsetHeight,Mr=Math.max(Yn,er+(Tr?On:0)+Ir+lr),qr=ir+Mr;mn.style.height=qr+"px"}else{const Tr=Cn.length>0&&In===Cn[0].ref.current;mn.style.top="0px";const Mr=Math.max(Un,nr+Tn.offsetTop+(Tr?qn:0)+er)+fr;mn.style.height=Mr+"px",Tn.scrollTop=ir-Un+Tn.offsetTop}mn.style.margin=`${CONTENT_MARGIN}px 0`,mn.style.minHeight=ar+"px",mn.style.maxHeight=Mn+"px",dn==null||dn(),requestAnimationFrame(()=>vn.current=!0)}},[bn,fn.trigger,fn.valueNode,mn,yn,Tn,In,Rn,fn.dir,dn]);useLayoutEffect2(()=>Dn(),[Dn]);const[$n,Fn]=reactExports.useState();useLayoutEffect2(()=>{yn&&Fn(window.getComputedStyle(yn).zIndex)},[yn]);const Gn=reactExports.useCallback(kn=>{kn&&Pn.current===!0&&(Dn(),Sn==null||Sn(),Pn.current=!1)},[Dn,Sn]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:un,contentWrapper:mn,shouldExpandOnScrollRef:vn,onScrollButtonChange:Gn,children:jsxRuntimeExports.jsx("div",{ref:gn,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$n},children:jsxRuntimeExports.jsx(Primitive.div,{...hn,ref:En,style:{boxSizing:"border-box",maxHeight:"100%",...hn.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,align:dn="start",collisionPadding:hn=CONTENT_MARGIN,...fn}=_e,pn=usePopperScope(un);return jsxRuntimeExports.jsx(Content$2,{...pn,...fn,ref:e,align:dn,collisionPadding:hn,style:{boxSizing:"border-box",...fn.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,nonce:dn,...hn}=_e,fn=useSelectContentContext(VIEWPORT_NAME$1,un),pn=useSelectViewportContext(VIEWPORT_NAME$1,un),mn=useComposedRefs(e,fn.onViewportChange),gn=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:dn}),jsxRuntimeExports.jsx(Collection.Slot,{scope:un,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...hn,ref:mn,style:{position:"relative",flex:1,overflow:"hidden auto",...hn.style},onScroll:composeEventHandlers(hn.onScroll,yn=>{const xn=yn.currentTarget,{contentWrapper:En,shouldExpandOnScrollRef:bn}=pn;if(bn!=null&&bn.current&&En){const vn=Math.abs(gn.current-xn.scrollTop);if(vn>0){const Pn=window.innerHeight-CONTENT_MARGIN*2,Tn=parseFloat(En.style.minHeight),In=parseFloat(En.style.height),Rn=Math.max(Tn,In);if(Rn<Pn){const Sn=Rn+vn,Dn=Math.min(Pn,Sn),$n=Sn-Dn;En.style.height=Dn+"px",En.style.bottom==="0px"&&(xn.scrollTop=$n>0?$n:0,En.style.justifyContent="flex-end")}}}gn.current=xn.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,...dn}=_e,hn=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:un,id:hn,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":hn,...dn,ref:e})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,...dn}=_e,hn=useSelectGroupContext(LABEL_NAME,un);return jsxRuntimeExports.jsx(Primitive.div,{id:hn.id,...dn,ref:e})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,value:dn,disabled:hn=!1,textValue:fn,...pn}=_e,mn=useSelectContext(ITEM_NAME,un),gn=useSelectContentContext(ITEM_NAME,un),yn=mn.value===dn,[xn,En]=reactExports.useState(fn??""),[bn,vn]=reactExports.useState(!1),Pn=useComposedRefs(e,Sn=>{var Dn;return(Dn=gn.itemRefCallback)==null?void 0:Dn.call(gn,Sn,dn,hn)}),Tn=useId(),In=reactExports.useRef("touch"),Rn=()=>{hn||(mn.onValueChange(dn),mn.onOpenChange(!1))};if(dn==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:un,value:dn,disabled:hn,textId:Tn,isSelected:yn,onItemTextChange:reactExports.useCallback(Sn=>{En(Dn=>Dn||((Sn==null?void 0:Sn.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:un,value:dn,disabled:hn,textValue:xn,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":Tn,"data-highlighted":bn?"":void 0,"aria-selected":yn&&bn,"data-state":yn?"checked":"unchecked","aria-disabled":hn||void 0,"data-disabled":hn?"":void 0,tabIndex:hn?void 0:-1,...pn,ref:Pn,onFocus:composeEventHandlers(pn.onFocus,()=>vn(!0)),onBlur:composeEventHandlers(pn.onBlur,()=>vn(!1)),onClick:composeEventHandlers(pn.onClick,()=>{In.current!=="mouse"&&Rn()}),onPointerUp:composeEventHandlers(pn.onPointerUp,()=>{In.current==="mouse"&&Rn()}),onPointerDown:composeEventHandlers(pn.onPointerDown,Sn=>{In.current=Sn.pointerType}),onPointerMove:composeEventHandlers(pn.onPointerMove,Sn=>{var Dn;In.current=Sn.pointerType,hn?(Dn=gn.onItemLeave)==null||Dn.call(gn):In.current==="mouse"&&Sn.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(pn.onPointerLeave,Sn=>{var Dn;Sn.currentTarget===document.activeElement&&((Dn=gn.onItemLeave)==null||Dn.call(gn))}),onKeyDown:composeEventHandlers(pn.onKeyDown,Sn=>{var $n;(($n=gn.searchRef)==null?void 0:$n.current)!==""&&Sn.key===" "||(SELECTION_KEYS.includes(Sn.key)&&Rn(),Sn.key===" "&&Sn.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,className:dn,style:hn,...fn}=_e,pn=useSelectContext(ITEM_TEXT_NAME,un),mn=useSelectContentContext(ITEM_TEXT_NAME,un),gn=useSelectItemContext(ITEM_TEXT_NAME,un),yn=useSelectNativeOptionsContext(ITEM_TEXT_NAME,un),[xn,En]=reactExports.useState(null),bn=useComposedRefs(e,Rn=>En(Rn),gn.onItemTextChange,Rn=>{var Sn;return(Sn=mn.itemTextRefCallback)==null?void 0:Sn.call(mn,Rn,gn.value,gn.disabled)}),vn=xn==null?void 0:xn.textContent,Pn=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:gn.value,disabled:gn.disabled,children:vn},gn.value),[gn.disabled,gn.value,vn]),{onNativeOptionAdd:Tn,onNativeOptionRemove:In}=yn;return useLayoutEffect2(()=>(Tn(Pn),()=>In(Pn)),[Tn,In,Pn]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:gn.textId,...fn,ref:bn}),gn.isSelected&&pn.valueNode&&!pn.valueNodeHasChildren?reactDomExports.createPortal(fn.children,pn.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,...dn}=_e;return useSelectItemContext(ITEM_INDICATOR_NAME,un).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...dn,ref:e}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((_e,e)=>{const un=useSelectContentContext(SCROLL_UP_BUTTON_NAME,_e.__scopeSelect),dn=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,_e.__scopeSelect),[hn,fn]=reactExports.useState(!1),pn=useComposedRefs(e,dn.onScrollButtonChange);return useLayoutEffect2(()=>{if(un.viewport&&un.isPositioned){let mn=function(){const yn=gn.scrollTop>0;fn(yn)};const gn=un.viewport;return mn(),gn.addEventListener("scroll",mn),()=>gn.removeEventListener("scroll",mn)}},[un.viewport,un.isPositioned]),hn?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._e,ref:pn,onAutoScroll:()=>{const{viewport:mn,selectedItem:gn}=un;mn&&gn&&(mn.scrollTop=mn.scrollTop-gn.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((_e,e)=>{const un=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,_e.__scopeSelect),dn=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,_e.__scopeSelect),[hn,fn]=reactExports.useState(!1),pn=useComposedRefs(e,dn.onScrollButtonChange);return useLayoutEffect2(()=>{if(un.viewport&&un.isPositioned){let mn=function(){const yn=gn.scrollHeight-gn.clientHeight,xn=Math.ceil(gn.scrollTop)<yn;fn(xn)};const gn=un.viewport;return mn(),gn.addEventListener("scroll",mn),()=>gn.removeEventListener("scroll",mn)}},[un.viewport,un.isPositioned]),hn?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._e,ref:pn,onAutoScroll:()=>{const{viewport:mn,selectedItem:gn}=un;mn&&gn&&(mn.scrollTop=mn.scrollTop+gn.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,onAutoScroll:dn,...hn}=_e,fn=useSelectContentContext("SelectScrollButton",un),pn=reactExports.useRef(null),mn=useCollection(un),gn=reactExports.useCallback(()=>{pn.current!==null&&(window.clearInterval(pn.current),pn.current=null)},[]);return reactExports.useEffect(()=>()=>gn(),[gn]),useLayoutEffect2(()=>{var xn;const yn=mn().find(En=>En.ref.current===document.activeElement);(xn=yn==null?void 0:yn.ref.current)==null||xn.scrollIntoView({block:"nearest"})},[mn]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...hn,ref:e,style:{flexShrink:0,...hn.style},onPointerDown:composeEventHandlers(hn.onPointerDown,()=>{pn.current===null&&(pn.current=window.setInterval(dn,50))}),onPointerMove:composeEventHandlers(hn.onPointerMove,()=>{var yn;(yn=fn.onItemLeave)==null||yn.call(fn),pn.current===null&&(pn.current=window.setInterval(dn,50))}),onPointerLeave:composeEventHandlers(hn.onPointerLeave,()=>{gn()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,...dn}=_e;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...dn,ref:e})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((_e,e)=>{const{__scopeSelect:un,...dn}=_e,hn=usePopperScope(un),fn=useSelectContext(ARROW_NAME,un),pn=useSelectContentContext(ARROW_NAME,un);return fn.open&&pn.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...hn,...dn,ref:e}):null});SelectArrow.displayName=ARROW_NAME;function shouldShowPlaceholder(_e){return _e===""||_e===void 0}var BubbleSelect=reactExports.forwardRef((_e,e)=>{const{value:un,...dn}=_e,hn=reactExports.useRef(null),fn=useComposedRefs(e,hn),pn=usePrevious(un);return reactExports.useEffect(()=>{const mn=hn.current,gn=window.HTMLSelectElement.prototype,xn=Object.getOwnPropertyDescriptor(gn,"value").set;if(pn!==un&&xn){const En=new Event("change",{bubbles:!0});xn.call(mn,un),mn.dispatchEvent(En)}},[pn,un]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...dn,ref:fn,defaultValue:un})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(_e){const e=useCallbackRef$1(_e),un=reactExports.useRef(""),dn=reactExports.useRef(0),hn=reactExports.useCallback(pn=>{const mn=un.current+pn;e(mn),function gn(yn){un.current=yn,window.clearTimeout(dn.current),yn!==""&&(dn.current=window.setTimeout(()=>gn(""),1e3))}(mn)},[e]),fn=reactExports.useCallback(()=>{un.current="",window.clearTimeout(dn.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(dn.current),[]),[un,hn,fn]}function findNextItem(_e,e,un){const hn=e.length>1&&Array.from(e).every(yn=>yn===e[0])?e[0]:e,fn=un?_e.indexOf(un):-1;let pn=wrapArray(_e,Math.max(fn,0));hn.length===1&&(pn=pn.filter(yn=>yn!==un));const gn=pn.find(yn=>yn.textValue.toLowerCase().startsWith(hn.toLowerCase()));return gn!==un?gn:void 0}function wrapArray(_e,e){return _e.map((un,dn)=>_e[(e+dn)%_e.length])}var Root2=Select$1,Trigger=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2=SelectContent$1,Viewport$1=SelectViewport,Label=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;const Select=Root2,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:_e,children:e,...un},dn)=>jsxRuntimeExports.jsxs(Trigger,{ref:dn,className:cn$1("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_e),...un,children:[e,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:un,className:cn$1("flex cursor-default items-center justify-center py-1",_e),...e,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:un,className:cn$1("flex cursor-default items-center justify-center py-1",_e),...e,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:_e,children:e,position:un="popper",...dn},hn)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{ref:hn,className:cn$1("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",un==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_e),position:un,...dn,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport$1,{className:cn$1("p-1",un==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2.displayName;const SelectLabel=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Label,{ref:un,className:cn$1("py-1.5 pl-8 pr-2 text-sm font-semibold",_e),...e}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:_e,children:e,...un},dn)=>jsxRuntimeExports.jsxs(Item,{ref:dn,className:cn$1("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_e),...un,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:e})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:_e,...e},un)=>jsxRuntimeExports.jsx(Separator,{ref:un,className:cn$1("-mx-1 my-1 h-px bg-muted",_e),...e}));SelectSeparator.displayName=Separator.displayName;const StudyHistory=()=>{const[_e]=useAuthState(auth),[e,un]=reactExports.useState([]),[dn,hn]=reactExports.useState([]),[fn,pn]=reactExports.useState(!0),[mn,gn]=reactExports.useState("all"),[yn,xn]=reactExports.useState("all"),[En,bn]=reactExports.useState("all"),[vn,Pn]=reactExports.useState(""),[Tn,In]=reactExports.useState(null),{setQuestionResult:Rn,setDifficulty:Sn,setOutputLanguage:Dn}=useAppContext();reactExports.useEffect(()=>{_e?Fn():pn(!1)},[_e]),reactExports.useEffect(()=>{$n()},[e,mn,yn,En,vn]);const $n=()=>{let Xn=[...e];mn!=="all"&&(Xn=Xn.filter(nr=>nr.type===mn)),yn!=="all"&&(Xn=Xn.filter(nr=>nr.difficulty===yn)),En!=="all"&&(Xn=Xn.filter(nr=>nr.language===En)),vn.trim()&&(Xn=Xn.filter(nr=>{var sr;return((sr=nr.fileName)==null?void 0:sr.toLowerCase().includes(vn.toLowerCase()))||nr.type.toLowerCase().includes(vn.toLowerCase())})),hn(Xn)},Fn=async()=>{if(_e)try{pn(!0);const nr=(await getStudyHistory(_e.uid)).map(sr=>({...sr,timestamp:sr.timestamp}));un(nr)}catch(Xn){console.error("Error fetching study history:",Xn),Jt$2.error("Failed to load study history")}finally{pn(!1)}},Gn=async Xn=>{try{let nr,sr,lr;const tr=Xn.timestamp.toDate().toLocaleDateString();Xn.type==="quiz"&&Xn.quizData?(nr=`Quiz Results - ${tr}`,sr=Xn.quizData,lr="quiz-results"):Xn.type==="analysis"&&Xn.analysisData?(nr=`Study Analysis - ${tr}`,sr=[Xn.analysisData],lr="analysis"):(nr=Xn.type==="quiz"?`Quiz Results - ${tr}`:`Study Analysis - ${tr}`,sr=Xn.data,lr=Xn.type==="quiz"?"quiz-results":"analysis"),await downloadPDF({title:nr,content:sr,type:lr}),Jt$2.success("Downloaded successfully!")}catch(nr){console.error("Download error:",nr),Jt$2.error("Failed to download")}},kn=async Xn=>{try{const nr=e.find(sr=>sr.id===Xn);await deleteStudyHistory(Xn,nr==null?void 0:nr.fileUrls),un(sr=>sr.filter(lr=>lr.id!==Xn)),Jt$2.success("Record deleted successfully")}catch{Jt$2.error("Failed to delete record")}},Nn=async Xn=>{var nr;if(!Xn.analysisData){Jt$2.error("Cannot retake quiz: Original analysis data not found");return}In(Xn.id);try{const sr=await generateQuestions([Xn.analysisData],Xn.difficulty,Xn.language);Rn({...sr,totalQuestions:((nr=sr.questions)==null?void 0:nr.length)||0}),Sn(Xn.difficulty),Dn(Xn.language),Jt$2.success("New quiz generated! Starting quiz...")}catch(sr){console.error("Error generating retake quiz:",sr),Jt$2.error("Failed to generate new quiz. Please try again.")}finally{In(null)}},Ln=()=>{gn("all"),xn("all"),bn("all"),Pn("")},zn=(Xn,nr)=>{const sr=Xn/nr*100;return sr>=80?"text-green-600 bg-green-50":sr>=60?"text-blue-600 bg-blue-50":sr>=40?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50"},Cn=Xn=>{const nr=e.map(sr=>sr[Xn]).filter(Boolean);return[...new Set(nr)]},Mn=dn.filter(Xn=>Xn.type==="analysis"),Bn=dn.filter(Xn=>Xn.type==="quiz");return!_e&&!fn?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs(Card,{className:"p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx(History,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Login Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Please login to view your study history."})]})}):fn?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading your study history..."})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(History,{className:"h-6 w-6 text-blue-600"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Study History"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Track your learning progress and access previous study sessions"}),jsxRuntimeExports.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Total Sessions"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:Mn.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Analyses"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Bn.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Quizzes"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(Bn.reduce((Xn,nr)=>Xn+(nr.score||0)/(nr.totalQuestions||1),0)/Math.max(Bn.length,1)*100)||0,"%"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-orange-700",children:"Avg Score"})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(Filter$1,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold gradient-text",children:"Filter & Search"}),jsxRuntimeExports.jsxs(Button,{onClick:Ln,variant:"outline",size:"sm",className:"ml-auto btn-secondary",children:[jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4 mr-2"}),"Clear All"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"Session Type"}),jsxRuntimeExports.jsxs(Select,{value:mn,onValueChange:Xn=>gn(Xn),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant h-12 bg-white/80 backdrop-blur-sm border-2 hover:border-blue-400 transition-all",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"All Types"})}),jsxRuntimeExports.jsxs(SelectContent,{className:"bg-white/95 backdrop-blur-sm shadow-2xl border-2",children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",className:"hover:bg-blue-50",children:" All Types"}),jsxRuntimeExports.jsx(SelectItem,{value:"analysis",className:"hover:bg-green-50",children:" Document Analysis"}),jsxRuntimeExports.jsx(SelectItem,{value:"quiz",className:"hover:bg-purple-50",children:" Quiz Sessions"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"Difficulty Level"}),jsxRuntimeExports.jsxs(Select,{value:yn,onValueChange:xn,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant h-12 bg-white/80 backdrop-blur-sm border-2 hover:border-green-400 transition-all",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"All Difficulties"})}),jsxRuntimeExports.jsxs(SelectContent,{className:"bg-white/95 backdrop-blur-sm shadow-2xl border-2",children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",className:"hover:bg-gray-50",children:" All Levels"}),Cn("difficulty").map(Xn=>jsxRuntimeExports.jsxs(SelectItem,{value:Xn,className:"hover:bg-orange-50",children:[Xn==="easy"&&"",Xn==="medium"&&"",Xn==="hard"&&"",Xn==="very-hard"&&""," ",Xn.toUpperCase()]},Xn))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"Language"}),jsxRuntimeExports.jsxs(Select,{value:En,onValueChange:bn,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"input-elegant h-12 bg-white/80 backdrop-blur-sm border-2 hover:border-purple-400 transition-all",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"All Languages"})}),jsxRuntimeExports.jsxs(SelectContent,{className:"bg-white/95 backdrop-blur-sm shadow-2xl border-2",children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",className:"hover:bg-gray-50",children:" All Languages"}),Cn("language").map(Xn=>jsxRuntimeExports.jsx(SelectItem,{value:Xn,className:"hover:bg-indigo-50",children:Xn==="tamil"?" ":" English"},Xn))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"Search Files"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),jsxRuntimeExports.jsx(Input,{placeholder:"Search by filename...",value:vn,onChange:Xn=>Pn(Xn.target.value),className:"input-elegant h-12 pl-12 bg-white/80 backdrop-blur-sm"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[" Showing ",jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-bold",children:dn.length})," of ",jsxRuntimeExports.jsx("span",{className:"text-purple-600 font-bold",children:e.length})," records"]}),dn.length!==e.length&&jsxRuntimeExports.jsx(Badge,{className:"bg-gradient-to-r from-orange-400 to-red-500 text-white shadow-md",children:"Filtered"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:dn.length===0?e.length===0?jsxRuntimeExports.jsxs(Card,{className:"p-8 text-center bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsx(FileText,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Study History"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Start analyzing documents and taking quizzes to build your study history."})]}):jsxRuntimeExports.jsxs(Card,{className:"p-8 text-center bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsx(Filter$1,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Records Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"No records match your current filters. Try adjusting your search criteria."}),jsxRuntimeExports.jsx(Button,{onClick:Ln,className:"mt-4",children:"Clear All Filters"})]}):dn.map(Xn=>jsxRuntimeExports.jsx(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-lg border-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Xn.type==="quiz"?jsxRuntimeExports.jsx(Trophy,{className:"h-5 w-5 text-purple-600"}):jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800",children:Xn.type==="quiz"?"Quiz Session":"Document Analysis"}),Xn.fileName&&jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:Xn.fileName})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4"}),Xn.timestamp.toDate().toLocaleDateString()," at ",Xn.timestamp.toDate().toLocaleTimeString()]}),jsxRuntimeExports.jsx(Badge,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:Xn.difficulty.toUpperCase()}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:Xn.language==="tamil"?"":"English"})]}),Xn.type==="quiz"&&Xn.score!==void 0&&jsxRuntimeExports.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${zn(Xn.score,Xn.totalQuestions||1)}`,children:[jsxRuntimeExports.jsx(Trophy,{className:"h-4 w-4"}),"Score: ",Xn.score,"/",Xn.totalQuestions," (",Math.round(Xn.score/(Xn.totalQuestions||1)*100),"%)"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Xn.type==="analysis"&&Xn.analysisData&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>Nn(Xn),disabled:Tn===Xn.id,className:"flex items-center gap-2 text-green-600 hover:text-green-700 hover:bg-green-50",children:Tn===Xn.id?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4"}),"Retake Quiz"]})}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>Gn(Xn),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Download"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>kn(Xn.id),className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"}),"Delete"]})]})]})},Xn.id))})]})})})},UserProfile=()=>{const[_e]=useAuthState(auth),[e,un]=reactExports.useState(!1),[dn,hn]=reactExports.useState((_e==null?void 0:_e.displayName)||""),[fn,pn]=reactExports.useState({documentsAnalyzed:0,quizzesCompleted:0,averageScore:0,studyStreak:0});reactExports.useEffect(()=>{(async()=>{if(_e)try{const yn=await getStudyHistory(_e.uid),xn=yn.filter(Pn=>Pn.type==="analysis").length,En=yn.filter(Pn=>Pn.type==="quiz").length,bn=yn.filter(Pn=>Pn.type==="quiz"&&Pn.score!==void 0),vn=bn.length>0?Math.round(bn.reduce((Pn,Tn)=>Pn+(Tn.score||0)/(Tn.totalQuestions||1),0)/bn.length*100):0;pn({documentsAnalyzed:xn,quizzesCompleted:En,averageScore:vn,studyStreak:Math.min(7,yn.length)})}catch(yn){console.error("Error fetching user stats:",yn)}})()},[_e]);const mn=()=>{Jt$2.success("Profile updated successfully!"),un(!1)};return _e?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full",children:jsxRuntimeExports.jsx(User$1,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"User Profile"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"phone",children:"Phone Number"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx(Phone,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx(Input,{id:"phone",value:_e.phoneNumber||"",disabled:!0,className:"bg-gray-50"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-green-600 border-green-200",children:"Verified"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"displayName",children:"Display Name"}),jsxRuntimeExports.jsx(Input,{id:"displayName",value:dn,onChange:gn=>hn(gn.target.value),placeholder:"Enter your name",disabled:!e,className:e?"":"bg-gray-50"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Account Created"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700",children:_e.metadata.creationTime?new Date(_e.metadata.creationTime).toLocaleDateString():"N/A"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Last Sign In"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700",children:_e.metadata.lastSignInTime?new Date(_e.metadata.lastSignInTime).toLocaleDateString():"N/A"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:mn,className:"bg-gradient-to-r from-green-600 to-blue-600",children:"Save Changes"}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>un(!1),children:"Cancel"})]}):jsxRuntimeExports.jsx(Button,{onClick:()=>un(!0),variant:"outline",children:"Edit Profile"})})]})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Trophy,{className:"h-5 w-5 text-yellow-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Study Statistics"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:fn.documentsAnalyzed}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Documents Analyzed"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:fn.quizzesCompleted}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Quizzes Completed"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[fn.averageScore,"%"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-700",children:"Average Score"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-orange-600",children:fn.studyStreak}),jsxRuntimeExports.jsx("div",{className:"text-sm text-orange-700",children:"Study Streak"})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Target,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Study Preferences"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Preferred Difficulty"}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(Badge,{className:"bg-gradient-to-r from-yellow-500 to-orange-600 text-white",children:"MEDIUM"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{children:"Preferred Language"}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(Badge,{variant:"outline",children:" English"})})]})]})]})]})})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs(Card,{className:"p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx(User$1,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Login Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Please login to view your profile."})]})})};function useStateMachine(_e,e){return reactExports.useReducer((un,dn)=>e[un][dn]??un,_e)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope$3(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((_e,e)=>{const{__scopeScrollArea:un,type:dn="hover",dir:hn,scrollHideDelay:fn=600,...pn}=_e,[mn,gn]=reactExports.useState(null),[yn,xn]=reactExports.useState(null),[En,bn]=reactExports.useState(null),[vn,Pn]=reactExports.useState(null),[Tn,In]=reactExports.useState(null),[Rn,Sn]=reactExports.useState(0),[Dn,$n]=reactExports.useState(0),[Fn,Gn]=reactExports.useState(!1),[kn,Nn]=reactExports.useState(!1),Ln=useComposedRefs(e,Cn=>gn(Cn)),zn=useDirection(hn);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:un,type:dn,dir:zn,scrollHideDelay:fn,scrollArea:mn,viewport:yn,onViewportChange:xn,content:En,onContentChange:bn,scrollbarX:vn,onScrollbarXChange:Pn,scrollbarXEnabled:Fn,onScrollbarXEnabledChange:Gn,scrollbarY:Tn,onScrollbarYChange:In,scrollbarYEnabled:kn,onScrollbarYEnabledChange:Nn,onCornerWidthChange:Sn,onCornerHeightChange:$n,children:jsxRuntimeExports.jsx(Primitive.div,{dir:zn,...pn,ref:Ln,style:{position:"relative","--radix-scroll-area-corner-width":Rn+"px","--radix-scroll-area-corner-height":Dn+"px",..._e.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((_e,e)=>{const{__scopeScrollArea:un,children:dn,asChild:hn,nonce:fn,...pn}=_e,mn=useScrollAreaContext(VIEWPORT_NAME,un),gn=reactExports.useRef(null),yn=useComposedRefs(e,gn,mn.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:fn}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...pn,asChild:hn,ref:yn,style:{overflowX:mn.scrollbarXEnabled?"scroll":"hidden",overflowY:mn.scrollbarYEnabled?"scroll":"hidden",..._e.style},children:getSubtree({asChild:hn,children:dn},xn=>jsxRuntimeExports.jsx("div",{"data-radix-scroll-area-content":"",ref:mn.onContentChange,style:{minWidth:mn.scrollbarXEnabled?"fit-content":void 0},children:xn}))})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((_e,e)=>{const{forceMount:un,...dn}=_e,hn=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),{onScrollbarXEnabledChange:fn,onScrollbarYEnabledChange:pn}=hn,mn=_e.orientation==="horizontal";return reactExports.useEffect(()=>(mn?fn(!0):pn(!0),()=>{mn?fn(!1):pn(!1)}),[mn,fn,pn]),hn.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...dn,ref:e,forceMount:un}):hn.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...dn,ref:e,forceMount:un}):hn.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...dn,ref:e,forceMount:un}):hn.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...dn,ref:e}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((_e,e)=>{const{forceMount:un,...dn}=_e,hn=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),[fn,pn]=reactExports.useState(!1);return reactExports.useEffect(()=>{const mn=hn.scrollArea;let gn=0;if(mn){const yn=()=>{window.clearTimeout(gn),pn(!0)},xn=()=>{gn=window.setTimeout(()=>pn(!1),hn.scrollHideDelay)};return mn.addEventListener("pointerenter",yn),mn.addEventListener("pointerleave",xn),()=>{window.clearTimeout(gn),mn.removeEventListener("pointerenter",yn),mn.removeEventListener("pointerleave",xn)}}},[hn.scrollArea,hn.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:un||fn,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":fn?"visible":"hidden",...dn,ref:e})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((_e,e)=>{const{forceMount:un,...dn}=_e,hn=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),fn=_e.orientation==="horizontal",pn=useDebounceCallback(()=>gn("SCROLL_END"),100),[mn,gn]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(mn==="idle"){const yn=window.setTimeout(()=>gn("HIDE"),hn.scrollHideDelay);return()=>window.clearTimeout(yn)}},[mn,hn.scrollHideDelay,gn]),reactExports.useEffect(()=>{const yn=hn.viewport,xn=fn?"scrollLeft":"scrollTop";if(yn){let En=yn[xn];const bn=()=>{const vn=yn[xn];En!==vn&&(gn("SCROLL"),pn()),En=vn};return yn.addEventListener("scroll",bn),()=>yn.removeEventListener("scroll",bn)}},[hn.viewport,fn,gn,pn]),jsxRuntimeExports.jsx(Presence,{present:un||mn!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":mn==="hidden"?"hidden":"visible",...dn,ref:e,onPointerEnter:composeEventHandlers(_e.onPointerEnter,()=>gn("POINTER_ENTER")),onPointerLeave:composeEventHandlers(_e.onPointerLeave,()=>gn("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((_e,e)=>{const un=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),{forceMount:dn,...hn}=_e,[fn,pn]=reactExports.useState(!1),mn=_e.orientation==="horizontal",gn=useDebounceCallback(()=>{if(un.viewport){const yn=un.viewport.offsetWidth<un.viewport.scrollWidth,xn=un.viewport.offsetHeight<un.viewport.scrollHeight;pn(mn?yn:xn)}},10);return useResizeObserver(un.viewport,gn),useResizeObserver(un.content,gn),jsxRuntimeExports.jsx(Presence,{present:dn||fn,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":fn?"visible":"hidden",...hn,ref:e})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((_e,e)=>{const{orientation:un="vertical",...dn}=_e,hn=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),fn=reactExports.useRef(null),pn=reactExports.useRef(0),[mn,gn]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),yn=getThumbRatio(mn.viewport,mn.content),xn={...dn,sizes:mn,onSizesChange:gn,hasThumb:yn>0&&yn<1,onThumbChange:bn=>fn.current=bn,onThumbPointerUp:()=>pn.current=0,onThumbPointerDown:bn=>pn.current=bn};function En(bn,vn){return getScrollPositionFromPointer(bn,pn.current,mn,vn)}return un==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...xn,ref:e,onThumbPositionChange:()=>{if(hn.viewport&&fn.current){const bn=hn.viewport.scrollLeft,vn=getThumbOffsetFromScroll(bn,mn,hn.dir);fn.current.style.transform=`translate3d(${vn}px, 0, 0)`}},onWheelScroll:bn=>{hn.viewport&&(hn.viewport.scrollLeft=bn)},onDragScroll:bn=>{hn.viewport&&(hn.viewport.scrollLeft=En(bn,hn.dir))}}):un==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...xn,ref:e,onThumbPositionChange:()=>{if(hn.viewport&&fn.current){const bn=hn.viewport.scrollTop,vn=getThumbOffsetFromScroll(bn,mn);fn.current.style.transform=`translate3d(0, ${vn}px, 0)`}},onWheelScroll:bn=>{hn.viewport&&(hn.viewport.scrollTop=bn)},onDragScroll:bn=>{hn.viewport&&(hn.viewport.scrollTop=En(bn))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((_e,e)=>{const{sizes:un,onSizesChange:dn,...hn}=_e,fn=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),[pn,mn]=reactExports.useState(),gn=reactExports.useRef(null),yn=useComposedRefs(e,gn,fn.onScrollbarXChange);return reactExports.useEffect(()=>{gn.current&&mn(getComputedStyle(gn.current))},[gn]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...hn,ref:yn,sizes:un,style:{bottom:0,left:fn.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:fn.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(un)+"px",..._e.style},onThumbPointerDown:xn=>_e.onThumbPointerDown(xn.x),onDragScroll:xn=>_e.onDragScroll(xn.x),onWheelScroll:(xn,En)=>{if(fn.viewport){const bn=fn.viewport.scrollLeft+xn.deltaX;_e.onWheelScroll(bn),isScrollingWithinScrollbarBounds(bn,En)&&xn.preventDefault()}},onResize:()=>{gn.current&&fn.viewport&&pn&&dn({content:fn.viewport.scrollWidth,viewport:fn.viewport.offsetWidth,scrollbar:{size:gn.current.clientWidth,paddingStart:toInt(pn.paddingLeft),paddingEnd:toInt(pn.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((_e,e)=>{const{sizes:un,onSizesChange:dn,...hn}=_e,fn=useScrollAreaContext(SCROLLBAR_NAME,_e.__scopeScrollArea),[pn,mn]=reactExports.useState(),gn=reactExports.useRef(null),yn=useComposedRefs(e,gn,fn.onScrollbarYChange);return reactExports.useEffect(()=>{gn.current&&mn(getComputedStyle(gn.current))},[gn]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...hn,ref:yn,sizes:un,style:{top:0,right:fn.dir==="ltr"?0:void 0,left:fn.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(un)+"px",..._e.style},onThumbPointerDown:xn=>_e.onThumbPointerDown(xn.y),onDragScroll:xn=>_e.onDragScroll(xn.y),onWheelScroll:(xn,En)=>{if(fn.viewport){const bn=fn.viewport.scrollTop+xn.deltaY;_e.onWheelScroll(bn),isScrollingWithinScrollbarBounds(bn,En)&&xn.preventDefault()}},onResize:()=>{gn.current&&fn.viewport&&pn&&dn({content:fn.viewport.scrollHeight,viewport:fn.viewport.offsetHeight,scrollbar:{size:gn.current.clientHeight,paddingStart:toInt(pn.paddingTop),paddingEnd:toInt(pn.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((_e,e)=>{const{__scopeScrollArea:un,sizes:dn,hasThumb:hn,onThumbChange:fn,onThumbPointerUp:pn,onThumbPointerDown:mn,onThumbPositionChange:gn,onDragScroll:yn,onWheelScroll:xn,onResize:En,...bn}=_e,vn=useScrollAreaContext(SCROLLBAR_NAME,un),[Pn,Tn]=reactExports.useState(null),In=useComposedRefs(e,Ln=>Tn(Ln)),Rn=reactExports.useRef(null),Sn=reactExports.useRef(""),Dn=vn.viewport,$n=dn.content-dn.viewport,Fn=useCallbackRef$1(xn),Gn=useCallbackRef$1(gn),kn=useDebounceCallback(En,10);function Nn(Ln){if(Rn.current){const zn=Ln.clientX-Rn.current.left,Cn=Ln.clientY-Rn.current.top;yn({x:zn,y:Cn})}}return reactExports.useEffect(()=>{const Ln=zn=>{const Cn=zn.target;(Pn==null?void 0:Pn.contains(Cn))&&Fn(zn,$n)};return document.addEventListener("wheel",Ln,{passive:!1}),()=>document.removeEventListener("wheel",Ln,{passive:!1})},[Dn,Pn,$n,Fn]),reactExports.useEffect(Gn,[dn,Gn]),useResizeObserver(Pn,kn),useResizeObserver(vn.content,kn),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:un,scrollbar:Pn,hasThumb:hn,onThumbChange:useCallbackRef$1(fn),onThumbPointerUp:useCallbackRef$1(pn),onThumbPositionChange:Gn,onThumbPointerDown:useCallbackRef$1(mn),children:jsxRuntimeExports.jsx(Primitive.div,{...bn,ref:In,style:{position:"absolute",...bn.style},onPointerDown:composeEventHandlers(_e.onPointerDown,Ln=>{Ln.button===0&&(Ln.target.setPointerCapture(Ln.pointerId),Rn.current=Pn.getBoundingClientRect(),Sn.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",vn.viewport&&(vn.viewport.style.scrollBehavior="auto"),Nn(Ln))}),onPointerMove:composeEventHandlers(_e.onPointerMove,Nn),onPointerUp:composeEventHandlers(_e.onPointerUp,Ln=>{const zn=Ln.target;zn.hasPointerCapture(Ln.pointerId)&&zn.releasePointerCapture(Ln.pointerId),document.body.style.webkitUserSelect=Sn.current,vn.viewport&&(vn.viewport.style.scrollBehavior=""),Rn.current=null})})})}),THUMB_NAME="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((_e,e)=>{const{forceMount:un,...dn}=_e,hn=useScrollbarContext(THUMB_NAME,_e.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:un||hn.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:e,...dn})})}),ScrollAreaThumbImpl=reactExports.forwardRef((_e,e)=>{const{__scopeScrollArea:un,style:dn,...hn}=_e,fn=useScrollAreaContext(THUMB_NAME,un),pn=useScrollbarContext(THUMB_NAME,un),{onThumbPositionChange:mn}=pn,gn=useComposedRefs(e,En=>pn.onThumbChange(En)),yn=reactExports.useRef(),xn=useDebounceCallback(()=>{yn.current&&(yn.current(),yn.current=void 0)},100);return reactExports.useEffect(()=>{const En=fn.viewport;if(En){const bn=()=>{if(xn(),!yn.current){const vn=addUnlinkedScrollListener(En,mn);yn.current=vn,mn()}};return mn(),En.addEventListener("scroll",bn),()=>En.removeEventListener("scroll",bn)}},[fn.viewport,xn,mn]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":pn.hasThumb?"visible":"hidden",...hn,ref:gn,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...dn},onPointerDownCapture:composeEventHandlers(_e.onPointerDownCapture,En=>{const vn=En.target.getBoundingClientRect(),Pn=En.clientX-vn.left,Tn=En.clientY-vn.top;pn.onThumbPointerDown({x:Pn,y:Tn})}),onPointerUp:composeEventHandlers(_e.onPointerUp,pn.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((_e,e)=>{const un=useScrollAreaContext(CORNER_NAME,_e.__scopeScrollArea),dn=!!(un.scrollbarX&&un.scrollbarY);return un.type!=="scroll"&&dn?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{..._e,ref:e}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((_e,e)=>{const{__scopeScrollArea:un,...dn}=_e,hn=useScrollAreaContext(CORNER_NAME,un),[fn,pn]=reactExports.useState(0),[mn,gn]=reactExports.useState(0),yn=!!(fn&&mn);return useResizeObserver(hn.scrollbarX,()=>{var En;const xn=((En=hn.scrollbarX)==null?void 0:En.offsetHeight)||0;hn.onCornerHeightChange(xn),gn(xn)}),useResizeObserver(hn.scrollbarY,()=>{var En;const xn=((En=hn.scrollbarY)==null?void 0:En.offsetWidth)||0;hn.onCornerWidthChange(xn),pn(xn)}),yn?jsxRuntimeExports.jsx(Primitive.div,{...dn,ref:e,style:{width:fn,height:mn,position:"absolute",right:hn.dir==="ltr"?0:void 0,left:hn.dir==="rtl"?0:void 0,bottom:0,..._e.style}}):null});function toInt(_e){return _e?parseInt(_e,10):0}function getThumbRatio(_e,e){const un=_e/e;return isNaN(un)?0:un}function getThumbSize(_e){const e=getThumbRatio(_e.viewport,_e.content),un=_e.scrollbar.paddingStart+_e.scrollbar.paddingEnd,dn=(_e.scrollbar.size-un)*e;return Math.max(dn,18)}function getScrollPositionFromPointer(_e,e,un,dn="ltr"){const hn=getThumbSize(un),fn=hn/2,pn=e||fn,mn=hn-pn,gn=un.scrollbar.paddingStart+pn,yn=un.scrollbar.size-un.scrollbar.paddingEnd-mn,xn=un.content-un.viewport,En=dn==="ltr"?[0,xn]:[xn*-1,0];return linearScale([gn,yn],En)(_e)}function getThumbOffsetFromScroll(_e,e,un="ltr"){const dn=getThumbSize(e),hn=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,fn=e.scrollbar.size-hn,pn=e.content-e.viewport,mn=fn-dn,gn=un==="ltr"?[0,pn]:[pn*-1,0],yn=clamp(_e,gn);return linearScale([0,pn],[0,mn])(yn)}function linearScale(_e,e){return un=>{if(_e[0]===_e[1]||e[0]===e[1])return e[0];const dn=(e[1]-e[0])/(_e[1]-_e[0]);return e[0]+dn*(un-_e[0])}}function isScrollingWithinScrollbarBounds(_e,e){return _e>0&&_e<e}var addUnlinkedScrollListener=(_e,e=()=>{})=>{let un={left:_e.scrollLeft,top:_e.scrollTop},dn=0;return function hn(){const fn={left:_e.scrollLeft,top:_e.scrollTop},pn=un.left!==fn.left,mn=un.top!==fn.top;(pn||mn)&&e(),un=fn,dn=window.requestAnimationFrame(hn)}(),()=>window.cancelAnimationFrame(dn)};function useDebounceCallback(_e,e){const un=useCallbackRef$1(_e),dn=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(dn.current),[]),reactExports.useCallback(()=>{window.clearTimeout(dn.current),dn.current=window.setTimeout(un,e)},[un,e])}function useResizeObserver(_e,e){const un=useCallbackRef$1(e);useLayoutEffect2(()=>{let dn=0;if(_e){const hn=new ResizeObserver(()=>{cancelAnimationFrame(dn),dn=window.requestAnimationFrame(un)});return hn.observe(_e),()=>{window.cancelAnimationFrame(dn),hn.unobserve(_e)}}},[_e,un])}function getSubtree(_e,e){const{asChild:un,children:dn}=_e;if(!un)return typeof e=="function"?e(dn):e;const hn=reactExports.Children.only(dn);return reactExports.cloneElement(hn,{children:typeof e=="function"?e(hn.props.children):e})}var Root=ScrollArea$1,Viewport=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:_e,children:e,...un},dn)=>jsxRuntimeExports.jsxs(Root,{ref:dn,className:cn$1("relative overflow-hidden",_e),...un,children:[jsxRuntimeExports.jsx(Viewport,{className:"h-full w-full rounded-[inherit]",children:e}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root.displayName;const ScrollBar=reactExports.forwardRef(({className:_e,orientation:e="vertical",...un},dn)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:dn,orientation:e,className:cn$1("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",_e),...un,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;const ArivuChatbot=()=>{const[_e]=useAuthState(auth),[e,un]=reactExports.useState([{id:"1",content:"Hello! I'm Arivu, your AI assistant. I can help you with TNPSC studies, answer general questions, solve math problems, and analyze images or documents. How can I assist you today?",sender:"arivu",timestamp:new Date}]),[dn,hn]=reactExports.useState(""),[fn,pn]=reactExports.useState(!1),[mn,gn]=reactExports.useState([]),[yn,xn]=reactExports.useState("english"),En=reactExports.useRef(null),bn=reactExports.useRef(null),vn="AIzaSyAJ2P2TqBOXQncnBgT0T_BNsLcAA7cToo4";reactExports.useEffect(()=>{un(yn==="tamil"?$n=>$n.length===1?[{id:"1",content:"!  ,  AI .      ,  ,  ,        .      ?",sender:"arivu",timestamp:new Date}]:$n:$n=>$n.length===1?[{id:"1",content:"Hello! I'm Arivu, your AI assistant. I can help you with TNPSC studies, answer general questions, solve math problems, and analyze images or documents. How can I assist you today?",sender:"arivu",timestamp:new Date}]:$n)},[yn]);const Pn=async()=>{if(!_e)return"";try{return(await getStudyHistory(_e.uid)).slice(0,5).map(kn=>`${kn.type}: ${kn.fileName||"Study session"} - ${kn.difficulty} level`).join(`
`)}catch($n){return console.error("Error fetching study history:",$n),""}},Tn=$n=>{if(!$n)return;const Fn=Array.from($n),Gn=Fn.filter(kn=>kn.type.startsWith("image/")||kn.type==="application/pdf");Gn.length!==Fn.length&&Jt$2.error("Only image files and PDF files are supported"),gn(kn=>[...kn,...Gn])},In=$n=>{gn(Fn=>Fn.filter((Gn,kn)=>kn!==$n))},Rn=$n=>new Promise((Fn,Gn)=>{const kn=new FileReader;kn.readAsDataURL($n),kn.onload=()=>Fn(kn.result),kn.onerror=Nn=>Gn(Nn)}),Sn=async()=>{var Fn,Gn,kn,Nn,Ln;if(!dn.trim()&&mn.length===0)return;const $n={id:Date.now().toString(),content:dn,sender:"user",timestamp:new Date,attachments:mn};un(zn=>[...zn,$n]),hn(""),pn(!0);try{const zn=e.slice(-5).map(tr=>`${tr.sender==="user"?"User":"Arivu"}: ${tr.content}`).join(`
`),Cn=await Pn(),Xn={contents:[{parts:[{text:`You are 'Arivu', a friendly and highly knowledgeable AI assistant. You can help with a wide variety of topics including:

1. TNPSC (Tamil Nadu Public Service Commission) exam preparation - your primary expertise
2. General knowledge and current affairs
3. Math problems and calculations
4. Science and technology questions
5. History, geography, and social studies
6. Analysis of uploaded documents and images
7. Any other questions users might have

Your approach:
- Be helpful, accurate, and conversational
- For TNPSC topics, focus on exam-relevant content
- For general questions, provide clear and comprehensive answers
- When analyzing images or documents, provide detailed explanations
- Always be encouraging and supportive
- ${yn==="tamil"?"Please respond in Tamil language using Tamil script.":"Please respond in English language."}
- If you don't know something, admit it honestly

${Cn?`User's recent study history:
${Cn}
`:""}

Conversation history:
${zn}

User's new message: ${dn}`}]}],generationConfig:{temperature:.7,maxOutputTokens:2e3}};if(mn.length>0){for(const tr of mn)if(tr.type.startsWith("image/")){const Jn=await Rn(tr);Xn.contents[0].parts.push({inline_data:{mime_type:tr.type,data:Jn.split(",")[1]}})}}const nr=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${vn}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xn)});if(!nr.ok)throw new Error(`HTTP error! status: ${nr.status}`);const lr=(Ln=(Nn=(kn=(Gn=(Fn=(await nr.json()).candidates)==null?void 0:Fn[0])==null?void 0:Gn.content)==null?void 0:kn.parts)==null?void 0:Nn[0])==null?void 0:Ln.text;if(lr){const tr={id:(Date.now()+1).toString(),content:lr,sender:"arivu",timestamp:new Date};un(Jn=>[...Jn,tr])}else throw new Error("No response from Arivu")}catch(zn){console.error("Error sending message:",zn),Jt$2.error("Failed to get response from Arivu. Please try again.");const Cn={id:(Date.now()+1).toString(),content:yn==="tamil"?",    .     .":"I'm sorry, I'm having trouble responding right now. Please try again in a moment.",sender:"arivu",timestamp:new Date};un(Mn=>[...Mn,Cn])}finally{pn(!1),gn([])}},Dn=$n=>{$n.key==="Enter"&&!$n.shiftKey&&($n.preventDefault(),Sn())};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx(Card,{className:"p-4 md:p-6 bg-white/90 backdrop-blur-sm shadow-xl border-0 mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-blue-600 rounded-full",children:jsxRuntimeExports.jsx(MessageCircle,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Arivu - AI Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Your intelligent study companion"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Languages,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsxs("select",{value:yn,onChange:$n=>xn($n.target.value),className:"p-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-sm",children:[jsxRuntimeExports.jsx("option",{value:"english",children:"English"}),jsxRuntimeExports.jsx("option",{value:"tamil",children:""})]})]})]})}),jsxRuntimeExports.jsxs(Card,{className:"bg-white/90 backdrop-blur-sm shadow-xl border-0",children:[jsxRuntimeExports.jsx(ScrollArea,{className:"h-[500px] p-4",ref:bn,children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[e.map($n=>jsxRuntimeExports.jsxs("div",{className:`flex gap-3 ${$n.sender==="user"?"justify-end":"justify-start"}`,children:[$n.sender==="arivu"&&jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 text-white"})}),jsxRuntimeExports.jsxs("div",{className:`max-w-[80%] ${$n.sender==="user"?"order-1":"order-2"}`,children:[jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-2xl ${$n.sender==="user"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white ml-auto":"bg-gray-100 text-gray-800"}`,children:[jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:$n.content}),$n.attachments&&$n.attachments.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-2 space-y-1",children:$n.attachments.map((Fn,Gn)=>jsxRuntimeExports.jsxs("div",{className:"text-xs opacity-75",children:[" ",Fn.name]},Gn))})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-1 px-1",children:$n.timestamp.toLocaleTimeString()})]}),$n.sender==="user"&&jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0 order-2",children:jsxRuntimeExports.jsx(User$1,{className:"h-4 w-4 text-gray-600"})})]},$n.id)),fn&&jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 text-white"})}),jsxRuntimeExports.jsx("div",{className:"bg-gray-100 p-3 rounded-2xl",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),mn.length>0&&jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 p-4",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:mn.map(($n,Fn)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 p-2 rounded-lg",children:[$n.type.startsWith("image/")?jsxRuntimeExports.jsx(Image$1,{className:"h-4 w-4 text-blue-600"}):jsxRuntimeExports.jsx(Paperclip,{className:"h-4 w-4 text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-blue-800 truncate max-w-[100px]",children:$n.name}),jsxRuntimeExports.jsx("button",{onClick:()=>In(Fn),className:"text-red-500 hover:text-red-700 text-lg leading-none",children:""})]},Fn))})}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"file",ref:En,onChange:$n=>Tn($n.target.files),accept:"image/*,application/pdf",multiple:!0,className:"hidden"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{var $n;return($n=En.current)==null?void 0:$n.click()},variant:"outline",size:"sm",className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Paperclip,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Input,{value:dn,onChange:$n=>hn($n.target.value),onKeyPress:Dn,placeholder:yn==="tamil"?"   ?":"Ask me anything...",className:"flex-1",disabled:fn}),jsxRuntimeExports.jsx(Button,{onClick:Sn,disabled:fn||!dn.trim()&&mn.length===0,className:"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 flex-shrink-0",children:jsxRuntimeExports.jsx(Send,{className:"h-4 w-4"})})]})})]})]})})})},LandingPage=()=>{const[_e,e]=reactExports.useState(!1),un=()=>{e(!0)},dn=()=>{};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-purple-400/10 to-blue-400/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),jsxRuntimeExports.jsx("header",{className:"bg-white/90 backdrop-blur-elegant shadow-elegant border-b relative z-10",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-md pulse-glow",children:jsxRuntimeExports.jsx(BookOpen,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"TNPSC Study Assistant"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:un,className:"hidden md:flex",children:"Login"}),jsxRuntimeExports.jsx(Button,{onClick:un,className:"btn-primary",children:"Get Started"})]})]})})}),jsxRuntimeExports.jsx("section",{className:"py-20 px-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-6xl font-bold mb-6 gradient-text animate-fadeInUp",children:"Master TNPSC Exams with AI"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed animate-fadeInUp",style:{animationDelay:"0.2s"},children:"Transform your TNPSC preparation with our intelligent study assistant. Analyze documents, generate questions, and get personalized guidance from Arivu - your AI study companion."}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-fadeInUp",style:{animationDelay:"0.4s"},children:jsxRuntimeExports.jsx(Button,{size:"lg",onClick:un,className:"btn-primary text-lg px-8 py-3",children:"Start Learning Now"})})]})}),jsxRuntimeExports.jsx("section",{className:"py-16 px-4 bg-white/50 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-center mb-12 gradient-text animate-fadeInUp",children:"Everything You Need to Ace TNPSC"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 stagger-animation",children:[jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-blue-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Smart Document Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Upload images or PDFs and get instant analysis with key points, summaries, and TNPSC relevance scores."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-purple-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(Brain,{className:"h-6 w-6 text-purple-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"AI Question Generator"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Generate practice questions based on your study materials with customizable difficulty levels."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-green-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(MessageCircle,{className:"h-6 w-6 text-green-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Arivu - AI Chatbot"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Get instant answers to your questions, clarify doubts, and receive personalized study guidance."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(Target,{className:"h-6 w-6 text-indigo-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Interactive Quizzes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Test your knowledge with interactive quizzes and track your progress over time."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(Award,{className:"h-6 w-6 text-yellow-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Study History"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Keep track of your learning journey with detailed study history and performance analytics."})]}),jsxRuntimeExports.jsxs(Card,{className:"glass-card p-6 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-100 rounded-lg w-fit mb-4",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-6 w-6 text-red-600"})}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-gray-800",children:"Progress Tracking"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Monitor your improvement with detailed analytics and personalized recommendations."})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"py-20 px-4 relative z-10",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto text-center",children:jsxRuntimeExports.jsxs(Card,{className:"p-8 md:p-12 bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-elegant-lg animate-fadeInScale",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Transform Your TNPSC Preparation?"}),jsxRuntimeExports.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Join thousands of successful candidates who've achieved their dreams with our AI-powered study assistant."}),jsxRuntimeExports.jsx(Button,{size:"lg",onClick:un,className:"bg-white text-blue-600 hover:bg-gray-100 text-lg px-8 py-3 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 rounded-xl",children:"Start Your Journey Today"})]})})}),jsxRuntimeExports.jsx("footer",{className:"bg-gray-900 text-white py-12 px-4 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-md",children:jsxRuntimeExports.jsx(BookOpen,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"text-2xl font-bold",children:"TNPSC Study Assistant"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-6",children:"Empowering TNPSC aspirants with AI-driven learning solutions"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6 text-sm text-gray-400",children:[jsxRuntimeExports.jsx("span",{children:" 2024 TNPSC Study Assistant"}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Powered by AI"})]})]})}),_e&&jsxRuntimeExports.jsx(AuthModal,{isOpen:_e,onClose:()=>e(!1),onSuccess:dn})]})},queryClient=new QueryClient,AppContent=()=>{const[_e,e]=useAuthState(auth),[un,dn]=reactExports.useState("study"),{questionResult:hn}=useAppContext();if(React.useEffect(()=>{hn&&un==="history"&&dn("study")},[hn]),e)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!_e)return jsxRuntimeExports.jsx(LandingPage,{});const fn=()=>{switch(un){case"history":return jsxRuntimeExports.jsx(StudyHistory,{});case"profile":return jsxRuntimeExports.jsx(UserProfile,{});case"arivu":return jsxRuntimeExports.jsx(ArivuChatbot,{});default:return jsxRuntimeExports.jsx(StudyAssistant,{})}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[jsxRuntimeExports.jsx(NavigationHeader,{currentView:un,onViewChange:dn}),fn()]})},App=()=>jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(AppProvider,{children:[jsxRuntimeExports.jsx(Toaster$1,{}),jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(AppContent,{})]})})});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{_typeof as _,commonjsGlobal$2 as c,getDefaultExportFromCjs as g};
